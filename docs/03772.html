<html>
<head>
<title>Comments, Clean Code, and JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">注释、干净的代码和JavaScript</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/javascript-clean-code-comments-c926d5aae2cb?source=collection_archive---------23-----------------------#2020-03-03">https://betterprogramming.pub/javascript-clean-code-comments-c926d5aae2cb?source=collection_archive---------23-----------------------#2020-03-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fe0e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我们看看什么时候需要评论，以及如何写评论</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/91ba513ed206062e4515022d861ca2fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*59kTvD0Dnw4Gm7TJ9psT4w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@blakeconnally?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">布莱克·康纳利</a>在<a class="ae ky" href="https://unsplash.com/s/photos/clean-code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="320e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注释有时用于解释用代码无法解释的思想。其他时候，它们被用来解释一些混乱的代码在做什么。</p><p id="a5b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将看看如何编写有用的注释，并且不弄乱代码。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1565" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">我们需要评论吗？</h1><p id="6b27" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">大多数代码应该是不言自明的。如果不是，也许我们应该想个办法让它变成这样。可能有办法让代码足够清晰，这样就不需要注释了。</p><p id="4adf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着代码的改变，注释很快就会过时，因为当代码改变时，注释经常被忽略。它们不像代码那样频繁更新。这意味着代码将偏离它所描述的原始代码。</p><p id="75a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码也经常移动。评论不跟。</p><p id="2c11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以像更新代码一样频繁地更新注释，但是最好让代码足够清晰，这样我们就不需要注释了。代码是我们首先需要处理的。注释只是为了支持代码。</p><p id="22e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不准确的注释会误导阅读代码的人。这并不好，因为它会导致对代码的错误理解，并由此产生不好的变化。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="72cb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">注释弥补不了糟糕的代码</h1><p id="6cd1" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">注释可能会让一些人更愿意编写糟糕的代码，因为他们认为可以用注释来弥补混乱。</p><p id="5c96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">清晰的代码要比混乱的代码和大量的注释好得多。写评论的时间最好花在收拾残局上。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="873f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">让代码自己解释</h1><p id="4cb0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们可以很容易地编写代码来解释它自己。例如，不要写:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="d3ac" class="ne md it na b gy nf ng l nh ni">if (employee.salary &lt; 50000 &amp;&amp; employee.hasChild) {<br/>  //...<br/>}</span></pre><p id="aeb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以写:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="52e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二个例子更好，因为它解释了条件的实际含义。如果我们只看第一个条件，其他阅读代码的人可能不知道这些条件是什么意思。</p><p id="cd1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第二个例子中，我们有一个<code class="fe nl nm nn na b">isEligibleForChildCareBenefits</code>函数，我们知道它检查一个<code class="fe nl nm nn na b">employee</code>是否有资格享受儿童保健福利。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2101" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">好评</h1><p id="cb54" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">有些评论是必要的或有益的。例如，有时我们需要在代码的注释中加入法律声明。</p><h2 id="5a26" class="ne md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">法律意见</h2><p id="da46" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">由于公司编码标准，有时需要法律注释。这可能包括版权信息、许可和其他信息。</p><p id="a6ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">他们不应该形成一个合同或有法律的语气。我们应该尽可能参考标准许可证或外部文档。</p><p id="8312" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这方面的一个例子是:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="b865" class="ne md it na b gy nf ng l nh ni">// Copyright (C) 2020 by Foo Inc. All rights reserved</span></pre><h2 id="2852" class="ne md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">信息丰富的评论</h2><p id="1cab" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">有时候，除了代码之外，我们还想在注释中传达更多的信息。但在大多数情况下，它们可以在更好地命名事物后被删除。</p><p id="50db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">信息性注释的示例如下:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="e16b" class="ne md it na b gy nf ng l nh ni">// Person instance being tested<br/>let person = new Person();</span></pre><p id="6956" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，我们可以将名称改为更有意义的名称，如:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="dd15" class="ne md it na b gy nf ng l nh ni">let personBeingTested = new Person();</span></pre><h2 id="e437" class="ne md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">解释意图</h2><p id="aac8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">有时候，我们想解释为什么我们要在代码中做一些事情。</p><h2 id="e54c" class="ne md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">澄清</h2><p id="1ba8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们也可以写注释来澄清我们不能改变的或者我们从其他库导入的不太清楚的东西。</p><p id="9f07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们想使用<a class="ae ky" href="https://lodash.com/" rel="noopener ugc nofollow" target="_blank"> Lodash </a>的<code class="fe nl nm nn na b">chunk</code>方法将一个数组分成一个指定块的数组，我们可能必须解释我们在做什么:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="6d96" class="ne md it na b gy nf ng l nh ni">import * as _ from "lodash";</span><span id="cc7c" class="ne md it na b gy nz ng l nh ni">// divide array into groups of 2<br/>const arr = [1, 2, 3, 4, 5];<br/>const splitArray = _.chunk(arr, 2);</span></pre><p id="739d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这让人们不用看Lodash的手册就能知道<code class="fe nl nm nn na b">chunk</code>方法是做什么的。</p><h2 id="3690" class="ne md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">后果警告</h2><p id="e0c4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们也可以使用注释让人们知道运行一些代码会导致一些后果。</p><p id="8f9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以警告人们运行缓慢的代码，如下所示:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="e20d" class="ne md it na b gy nf ng l nh ni">const slowCode = () =&gt; {<br/>  // slow code<br/>}</span></pre><h2 id="3169" class="ne md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">待办事项注释</h2><p id="b74f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在尚未实现的代码中留下注释也很常见。没有完成的代码，最终应该会完成，但目前做不到。</p><p id="fc42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些评论可以提醒你添加或删除一些代码，或者以某种方式清理它们。</p><h2 id="b804" class="ne md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">强调</h2><p id="ce89" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">注释也可以用来强调某些代码的重要性。这表明代码很重要，这样人们就不会忽略它。</p><h2 id="f77d" class="ne md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">JSDoc注释</h2><p id="9e27" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">当我们编写库时，我们必须为使用它们的大众编写文档或代码。我们可以用<a class="ae ky" href="https://jsdoc.app/" rel="noopener ugc nofollow" target="_blank"> JSDoc </a>通过在代码中写注释来做到这一点，这将从代码中生成文档。</p><p id="eddd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它们通常看起来像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="42fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些评论是必要的，因为这是使用我们库的人获得如何使用它的信息的方式。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ef1b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="13d0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在某些情况下，注释可能是有用的。我们可以用它来解释我们的决策，强调某些代码片段，警告人们后果，并为外部用户提供文档。</p><p id="a0a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除此之外，我们可以更好地命名事物，编写更好的代码，使其更易于自我解释，而不是编写注释。</p></div></div>    
</body>
</html>