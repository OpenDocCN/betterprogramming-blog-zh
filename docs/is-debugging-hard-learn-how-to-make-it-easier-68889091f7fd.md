# 调试难吗？了解如何让它变得更简单

> 原文：<https://betterprogramming.pub/is-debugging-hard-learn-how-to-make-it-easier-68889091f7fd>

## 有时我们的心理模型根本不映射代码

![](img/ce2d65f70456962fa35ff691dacba651.png)

格伦·卡丽在 [Unsplash](https://unsplash.com/s/photos/ladybug?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片。

这是审判日。上个月我一直在做一个专题。那天下午，我的团队要向首席执行官展示这项工作。

我感到相当自信。前一天，一名测试人员报告了几个小错误——一些明显的问题需要在我喝咖啡的时候解决。

其中一项任务是在表格中展示这些公司的标识。很公平。但是很奇怪。我觉得我早就修好了。我甚至想知道我怎么能弄乱简单的逻辑。

嗯，唯一不犯错的人就是什么都不做的人。我删除了代码中的一个感叹号，相信这项工作已经完成。

不是的。

一个半小时后，我已经修改了 14 个文件，修改了 250 行代码。我祈祷修复工作。

# 调试很难

当我们开始创建计算机程序时，我们立刻意识到我们一直在把它搞得一团糟。更糟糕的是，纠正我们的错误并不容易。正如 T4 的布莱恩·柯尼根所说:

> “调试比一开始写代码要难两倍。因此，如果你尽可能聪明地编写代码，从定义上来说，你还没有聪明到可以调试它。”

那么为什么调试这么难呢？这一切都归结于复杂性。

即使是最简单的应用程序也是建立在巨大的代码基础上的。现代开发人员免费获得许多工具——他们并不真正理解的工具。我们能够使用它们，但是我们不知道它们是如何工作的。

复杂性对我们打击很大，尤其是当我们得到一个草率的错误消息或一个复杂的堆栈跟踪时。通常，代码中错误及其症状之间的空间是巨大的。

我们的系统很复杂，但我们的输入也会带来麻烦。您经常会遇到这样的情况，最终用户有一些 bug，但是您在自己的机器上看不到。该错误可能与配置有关，或者取决于浏览器版本或事件顺序。一些 bug 在团队中工作，使画面更加模糊。

此外，一个错误可以产生各种错误。更糟糕的是，修复一个错误往往会产生新的错误。这通常表明缺乏测试或在不理解代码的情况下执行草率的修复。

![](img/731b67ed6fa400b3ed3e445b57721a36.png)

由 [cottonbro](https://www.pexels.com/pl-pl/@cottonbro?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels) 在[像素](https://www.pexels.com/pl-pl/zdjecie/mezczyzna-zaklad-maska-zabawny-3951388/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels)上拍摄的照片。

# 如何调试得更好

我们都承认调试很难，但是我们怎样才能让它变得更容易呢？

## 寻找 bug

要学习调试，我们需要明白一件事:这不是添加或删除代码或记录一切。调试的本质部分与打字无关。这与*的思维*有关。

在开始任何调试之前，您需要思考和分析您的代码。你认为哪里出了问题？无论错误是什么，经过几分钟的深入思考，你应该有一个假设。甚至可能是几个。

下一步是什么？

从最有可能的开始测试你的假设。测试可能包括更改输入(例如，上传不同的文件大小或格式)，使用不同的浏览器，或注释掉您认为可以的代码部分。目标是尽可能缩小 bug 的范围。

现在你应该对 bug 的位置相当有信心了。如果你不是，有一个额外的技巧可以帮助你:分而治之。

我写了一篇关于这种技术的文章，但是它的本质很简单。您将代码库分成两半，并使用日志来检查 bug 是在前半部分还是后半部分。现在再次将小车部分切成两半。重复这个过程，直到将 bug 缩小到只有几行代码。

## 修复 bug

你已经找到漏洞了。现在是时候解决它了。抵制立即获得编码的冲动。和调试一样，思考比做更重要。

你了解输入和输出以及应用程序的流程吗？要真正知道错误发生的原因，你必须调整你对代码的心理模型以适应现实。

有时快速解决是可能的，但也许你并不完全明白发生了什么。找出所有代码失败的情况。尝试用随机输入来测试它。它的行为是否符合预期？

修复后，再次尝试所有情况(成功和不成功)。你现在明白了吗？如果您解决了问题，但仍然不确定失败的原因，那么您的工作还没有完成。修补周围，直到你完全明白发生了什么，什么时候。否则，你会再次被这个错误绊倒——也许是在不同的地方——而你仍然不知道发生了什么。

# 结论

您可能想知道，“修复成功了吗？”是啊！我设法做到了，演示进行得很顺利。

对输入的误解导致了我的错误。我处理从数据库返回的大量对象，对一些属性有错误的理解。这个错误看起来像是布尔逻辑中的一个简单错误，但它是对系统的一个巨大误解。

这件事提醒我不要想当然。编程很难。调试很难。有时看似简单的错误可以帮助你发现你的心智模型中的一个主要缺陷。从中吸取教训。

有没有一些调试失败的情况？欢迎在评论中分享！