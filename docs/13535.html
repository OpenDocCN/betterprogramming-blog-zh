<html>
<head>
<title>A Guide to Handling User Privacy To Comply With GDPR in Flutter Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤振应用中符合GDPR的用户隐私处理指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-guide-to-handling-user-privacy-to-comply-with-gdpr-in-flutter-applications-9914ab479240?source=collection_archive---------13-----------------------#2022-09-05">https://betterprogramming.pub/a-guide-to-handling-user-privacy-to-comply-with-gdpr-in-flutter-applications-9914ab479240?source=collection_archive---------13-----------------------#2022-09-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9b10" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过在收集数据前询问来保持合规性</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8fe98f22d4265884a20855954ea35f10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UGvG8WgZuSlr3xrr"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@jdent?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杰森·登特</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="55d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">自2018年5月18日起，在欧盟地区发布应用程序的公共和私人组织必须征得用户同意才能收集和处理个人数据，这已经不是什么秘密。</p><p id="d39b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">处理隐私设置似乎很有挑战性，但并不复杂。我将描述一种通用而快速的方法来满足您的需求，使用或者不使用专用的隐私框架。</p><blockquote class="ls lt lu"><p id="47a8" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">像往常一样，我将使用<a class="ae kv" href="https://pub.dev/packages/flutter_bloc" rel="noopener ugc nofollow" target="_blank">阻塞</a>和<a class="ae kv" href="https://pub.dev/packages/injectable" rel="noopener ugc nofollow" target="_blank">依赖注入</a>，这只是一个偏好。您可以手动实例化您的类。那没什么大不了的。</p></blockquote><h1 id="41a8" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">让我们做一些编码</h1><p id="cb14" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">为了这篇文章，让我们假设我们想要<code class="fe mw mx my mz b">allow</code>或<code class="fe mw mx my mz b">deny</code>所有的跟踪工具。我们可以很容易地识别三种状态:</p><ul class=""><li id="5a6e" class="na nb iq ky b kz la lc ld lf nc lj nd ln ne lr nf ng nh ni bi translated"><code class="fe mw mx my mz b">authorized</code>:用户授权启用我们需要的每一个追踪工具。</li><li id="7f7e" class="na nb iq ky b kz nj lc nk lf nl lj nm ln nn lr nf ng nh ni bi translated"><code class="fe mw mx my mz b">denied</code>:没有。我们必须取消一切可能违反GDPR法规的东西。</li><li id="e77d" class="na nb iq ky b kz nj lc nk lf nl lj nm ln nn lr nf ng nh ni bi translated"><code class="fe mw mx my mz b">requested</code>:用户对我们来说是陌生的，我们必须询问他们的隐私管理。</li></ul><p id="a3f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">姑且称之为<code class="fe mw mx my mz b">privacy status</code>。最简单的方法似乎是创建一个<code class="fe mw mx my mz b">enum</code>来描述它们。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="2e3b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们需要一个实体来管理这些，某种类型的<code class="fe mw mx my mz b">privacy manager</code>。这是该功能最重要的部分。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="8bbd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以发挥想象力，创造一个<code class="fe mw mx my mz b">preferences manager</code>，但这不会有很大的不同。尽管如果你想把所有与<a class="ae kv" href="https://pub.dev/packages/shared_preferences" rel="noopener ugc nofollow" target="_blank">相关的东西都集中到里面，这可能会很好。</a></p><p id="2e97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">只有两种方法，<code class="fe mw mx my mz b">savePermission</code>保存用户的选择，<code class="fe mw mx my mz b">checkStatus</code>检索用户的选择。<code class="fe mw mx my mz b">checkStatus</code>根据本地保存的值返回前面<code class="fe mw mx my mz b">PrivacyStatus</code>中的一个。</p><blockquote class="ls lt lu"><p id="b426" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">如果你正在使用一个隐私管理SDK，你只需要用它替换<code class="fe mw mx my mz b"><em class="iq">SharedPreferences</em></code>,并且可能将隐私状态包装到另一个对象中。特别是如果你想更具体地了解允许或不允许的权限。例如，作为一个用户，我可能同意分享一些crashlytics，但不分享我的设备。</p></blockquote><p id="bb5e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为什么是<code class="fe mw mx my mz b">PrivacyManager</code>？有时，您可能想要创建自定义跟踪事件，比如当前访问的屏幕。你也不想在每个电话前都加上<code class="fe mw mx my mz b">if (sharedPreferences.getBool(authorized)…</code>。相反，你可以创建一个<code class="fe mw mx my mz b">analytics manager</code>，注入/实例化你的<code class="fe mw mx my mz b">privacy manager</code>，然后嘣！现在可以直接叫<code class="fe mw mx my mz b">analyticsManager.track(…)</code>了。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="c630" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">快好了！我们需要在业务层和表示层之间架起一座桥梁。毕竟，关注点分离是一个非常好的架构实践。让我们创建一个简单的<a class="ae kv" href="https://pub.dev/packages/flutter_bloc#usage" rel="noopener ugc nofollow" target="_blank">腕尺</a>叫做… <code class="fe mw mx my mz b">privacy cubit</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="0df3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这件事没什么好说的。它只是处理我们的<code class="fe mw mx my mz b">PrivacyManager</code>和<code class="fe mw mx my mz b">emits</code>状态。当然，您需要创建一个<code class="fe mw mx my mz b">PrivacyConfiguration</code>状态来将适当的<code class="fe mw mx my mz b">PrivacyStatus</code>传递给当前屏幕。</p><p id="7dc9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，实现表示层来与我们的用户进行交互。那很简单。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="e554" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用一个<code class="fe mw mx my mz b">BlocListener</code>包好你的应用，把<code class="fe mw mx my mz b">_privacyCubit</code>传给它，立刻<code class="fe mw mx my mz b">check</code>当前的隐私状态。</p><p id="185d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mw mx my mz b">listener</code>回调中，处理发出的状态。</p><ul class=""><li id="8d24" class="na nb iq ky b kz la lc ld lf nc lj nd ln ne lr nf ng nh ni bi translated"><code class="fe mw mx my mz b">authorized</code>:初始化您的监控工具(碰撞分析、性能、分析…)</li><li id="2932" class="na nb iq ky b kz nj lc nk lf nl lj nm ln nn lr nf ng nh ni bi translated"><code class="fe mw mx my mz b">requested</code>:显示<code class="fe mw mx my mz b">AlertDialog</code>说明并征求用户同意。</li><li id="1241" class="na nb iq ky b kz nj lc nk lf nl lj nm ln nn lr nf ng nh ni bi translated"><code class="fe mw mx my mz b">denied</code>:伤心，禁用你的工具，尊重用户的决定。</li></ul><p id="38c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另外，记得提供一种方法来更新用户的选择。这就是为什么，对于这个例子，我只是在调用<code class="fe mw mx my mz b">request</code>的<code class="fe mw mx my mz b">AppBar</code>中增加了一个按钮来再次提示<code class="fe mw mx my mz b">AlertDialog</code>。</p><h1 id="d598" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">最后的话</h1><p id="bd6f" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">就是这样！你会一切就绪的。这可能看起来有点让人不知所措，但是这并不复杂，而且这比处理EDPB的事情要好。</p><p id="5335" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你已经学习并喜欢这篇文章，请留下你的评论。</p><h1 id="543b" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">了解更多信息</h1><div class="nq nr gp gr ns nt"><a rel="noopener  ugc nofollow" target="_blank" href="/detect-user-inactivity-in-flutter-applications-af42b08101c"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">检测颤振应用中的用户不活动</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">防止数据泄露</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">better编程. pub</p></div></div><div class="oc l"><div class="od l oe of og oc oh kp nt"/></div></div></a></div><div class="nq nr gp gr ns nt"><a href="https://medium.com/@julien.duribreux_43255/flutter-dependency-injection-flavors-and-secrets-management-75181705045d" rel="noopener follow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">依赖注入和风味的颤振秘密管理</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">软件开发中的一个常见用例是需要处理多种环境和相关的…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">medium.com</p></div></div><div class="oc l"><div class="oi l oe of og oc oh kp nt"/></div></div></a></div></div></div>    
</body>
</html>