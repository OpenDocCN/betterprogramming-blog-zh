<html>
<head>
<title>Improve iPad Sidebar Navigation on the iPhone With SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SwiftUI改进iPhone上的iPad侧边栏导航</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/improve-ipad-sidebar-navigation-on-the-iphone-with-swiftui-953d85acfc14?source=collection_archive---------10-----------------------#2021-11-22">https://betterprogramming.pub/improve-ipad-sidebar-navigation-on-the-iphone-with-swiftui-953d85acfc14?source=collection_archive---------10-----------------------#2021-11-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f6a8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用选项卡视图的强大功能进行导航</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/416da2c8fd2a996d8e746bc76a41d11e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zwM6zgek0uFV_j2B7s61hQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@slothxbear" rel="noopener ugc nofollow" target="_blank">熊燕</a>在<a class="ae ky" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="1595" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在之前的博客文章中，我们学习了如何为iPad添加侧边栏，但是这种方法对于iPhone来说并不太好。</p><p id="83ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它看起来很奇怪，一旦我们配置了一个默认视图，一旦iPhone应用程序启动，它就会自动导航到这个视图。这在手机上不太好，但在iPad上完全说得通。我们可以通过在iPad上显示侧边栏和在iPhone上显示标签视图来改善这一点。</p><h1 id="40e1" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">检查设备是否为iPad</h1><p id="12ac" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">首先，我们需要区分一个应用是在iPhone上运行还是在iPad上运行。为此，我们应该使用<code class="fe ms mt mu mv b">UIUserInterfaceIdiom</code>枚举。它可以回答应用程序在什么类型的设备上运行的问题，从手机开始，到carplay内的汽车结束。</p><p id="105a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这次我们对两个枚举案例感兴趣:</p><ul class=""><li id="8071" class="mw mx it lb b lc ld lf lg li my lm mz lq na lu nb nc nd ne bi translated"><code class="fe ms mt mu mv b">phone</code> -用于iPhone或iPod touch的接口；</li><li id="1afe" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><code class="fe ms mt mu mv b">pad</code>-iPad的接口。</li></ul><p id="04d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要获取当前设备接口，我们需要从代表当前运行设备的UIDevice类中访问它。要检索用户界面习语，我们需要从UIDevice类的现有类变量中获取它。然后从<code class="fe ms mt mu mv b">userInterfaceIdiom</code>变量中，我们得到当前设备习语。</p><p id="1dff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了以更好的方式访问它，我们可以扩展<code class="fe ms mt mu mv b">UIDevice</code>类并添加一个新的静态变量，这将是之前解释的过程的简化版本。</p><pre class="kj kk kl km gt nk mv nl nm aw nn bi"><span id="5297" class="no lw it mv b gy np nq l nr ns">extension UIDevice {<br/>  static var idiom: UIUserInterfaceIdiom {<br/>    UIDevice.current.userInterfaceIdiom<br/>  }<br/>}</span></pre><p id="7608" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了让它更加糖衣，我们可以添加两个静态变量来查看设备是iPhone还是iPad。</p><pre class="kj kk kl km gt nk mv nl nm aw nn bi"><span id="7b73" class="no lw it mv b gy np nq l nr ns">extension UIDevice {<br/>static var isIpad: Bool {<br/>    idiom == .pad<br/>  }<br/>  <br/>  static var isiPhone: Bool {<br/>    idiom == .phone<br/>  }<br/>}</span></pre><h1 id="db75" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">分割导航</h1><p id="b4e3" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在我们知道了我们的app用户有什么样的设备，我们就可以划分导航了。这意味着我们将使用<code class="fe ms mt mu mv b">TabView</code>和iPhone的iPad侧边栏。</p><p id="90e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在用Xcode创建了一个新的SwiftUI项目之后，我们可以在<code class="fe ms mt mu mv b">ContentView.swift</code>文件中分离导航。然后就在<code class="fe ms mt mu mv b">body</code>中，我们可以添加逻辑语句来检查设备是否是iPad，换句话说，它可以是一个电话视图。</p><pre class="kj kk kl km gt nk mv nl nm aw nn bi"><span id="09d1" class="no lw it mv b gy np nq l nr ns">struct ContentView: View {<br/>  var body: some View {<br/>    if UIDevice.isIpad {<br/>     // iPad view<br/>    } else {<br/>	    // iPhone view<br/>    }<br/>  }<br/>}</span></pre><p id="1a23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们需要仔细检查这两个步骤，为iPad 添加一个<a class="ae ky" href="https://kristaps.me/blog/swiftui-sidebar/" rel="noopener ugc nofollow" target="_blank">侧边栏，为iPhone </a>添加一个<a class="ae ky" href="https://kristaps.me/blog/swiftui-tabview/" rel="noopener ugc nofollow" target="_blank">标签视图。我们之前已经研究过如何完成这两项任务，所以我们不再深入研究。完整的代码可以在</a><a class="ae ky" href="https://github.com/fassko/SwiftUITabViewSidebar" rel="noopener ugc nofollow" target="_blank">示例项目</a>中查看。</p><pre class="kj kk kl km gt nk mv nl nm aw nn bi"><span id="f71a" class="no lw it mv b gy np nq l nr ns">struct ContentView: View {<br/>  var body: some View {<br/>    if UIDevice.isIpad {<br/>      NavigationView {<br/>        List {<br/>          NavigationLink(destination: DashboardView()) {<br/>            Label("Dashboard", systemImage: "square.dashed")<br/>          }</span><span id="3d80" class="no lw it mv b gy nt nq l nr ns">          // ...<br/>        }<br/>      <br/>        DashboardView()<br/>      }<br/>    } else {<br/>      TabView {<br/>        DashboardView()<br/>          .tabItem {<br/>            Label("Dashboard", systemImage: "square.dashed")<br/>          }</span><span id="3ee1" class="no lw it mv b gy nt nq l nr ns">        // ...<br/>      }<br/>	  }<br/>  }<br/>}</span></pre><p id="c6bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们能做的是将这两个步骤提取到结构变量中，以分离关注点。</p><pre class="kj kk kl km gt nk mv nl nm aw nn bi"><span id="5866" class="no lw it mv b gy np nq l nr ns">struct ContentView: View {<br/>  var body: some View {<br/>    if UIDevice.isIpad {<br/>      sidebar<br/>    } else {<br/>      tabview<br/>    }<br/>  }<br/>  <br/>  private var sidebar: some View {<br/>    NavigationView {<br/>      List {<br/>        NavigationLink(destination: DashboardView()) {<br/>          Label("Dashboard", systemImage: "square.dashed")<br/>        }<br/>        // ...<br/>    }<br/>      <br/>      DashboardView()<br/>    }<br/>  }<br/>  <br/>  private var tabview: some View {<br/>    TabView {<br/>      DashboardView()<br/>        .tabItem {<br/>          Label("Dashboard", systemImage: "square.dashed")<br/>        }</span><span id="eda0" class="no lw it mv b gy nt nq l nr ns">      // ..<br/>    }<br/>  }<br/>}</span></pre><h1 id="527a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">限制</h1><p id="1a65" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">生活不仅仅是彩虹和蝴蝶。这种方法有一些限制。iPhone标签视图最多可以容纳五个项目。如果有更多选项卡，则它位于更多选项卡下。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/ed358e915cc66e6bc4a6f3c1c27c3271.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/0*lmfN2NBBlgbBXoA6.png"/></div></figure><p id="e84d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要考虑这种方法，为iPhone显示标签视图而不是导航列表。另一种方法是显示一个自定义视图，这不是我们在本文中要研究的。</p><h1 id="98f1" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="b576" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">边栏是在iPad上快速浏览多个视图的好方法。遗憾的是，它在iPhone上看起来是错误的列表，会自动导航到默认视图。我们可以通过显示iPhone的标签视图和iPad用户界面的侧边栏来改善这一点。我们需要记住，在一部iPhone上，一个标签视图最多可以容纳五个项目。</p><h1 id="49d8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">链接</h1><ul class=""><li id="9f0b" class="mw mx it lb b lc mn lf mo li nv lm nw lq nx lu nb nc nd ne bi translated"><a class="ae ky" href="https://github.com/fassko/SwiftUITabViewSidebar" rel="noopener ugc nofollow" target="_blank">样本代码</a></li><li id="bd29" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><a class="ae ky" href="https://developer.apple.com/documentation/uikit/uiuserinterfaceidiom" rel="noopener ugc nofollow" target="_blank"> UIUserInterfaceIdiom文档</a></li><li id="394b" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><a class="ae ky" href="https://developer.apple.com/documentation/uikit/uidevice/" rel="noopener ugc nofollow" target="_blank">ui设备文档</a></li><li id="14a2" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><a class="ae ky" href="https://kristaps.me/blog/swiftui-tabview/" rel="noopener ugc nofollow" target="_blank">带SwiftUI的iOS中隐藏的TabView秘密</a></li><li id="86ee" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><a class="ae ky" href="https://kristaps.me/blog/swiftui-sidebar/" rel="noopener ugc nofollow" target="_blank">侧边栏如何在iPad上使用SwiftUI </a></li></ul></div></div>    
</body>
</html>