<html>
<head>
<title>Mint Your Own NFT Using Solidity and HardHat on Avalanche FUJI Test Network</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Avalanche FUJI测试网络上使用Solidity和HardHat打造自己的NFT</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/mint-your-own-nft-using-solidity-and-hardhat-on-avalanche-fuji-test-network-71a56ef88bd3?source=collection_archive---------1-----------------------#2022-05-12">https://betterprogramming.pub/mint-your-own-nft-using-solidity-and-hardhat-on-avalanche-fuji-test-network-71a56ef88bd3?source=collection_archive---------1-----------------------#2022-05-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a46e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在Avalanche Fuji上部署我们的智能合约</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d5b68c387528c7c9f7dbbe888d086a96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NS-mHjCXaxEica4vGqZubA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@fakurian?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">米拉德·法库里安</a>在<a class="ae kv" href="https://unsplash.com/s/photos/mint-nft?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="6ac5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，您将学习如何创建自己的NFT (ERC-721标准)，并将其部署在Avalanche FUJI C-chain testnet上。</p><h1 id="d6dc" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">目录</h1><ul class=""><li id="31d4" class="mk ml iq ky b kz mm lc mn lf mo lj mp ln mq lr mr ms mt mu bi translated">什么是NFT？</li><li id="a1f5" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">什么是ERC-721令牌？</li><li id="f6c7" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">ERC-721标准</li><li id="0f28" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">创建ERC-721令牌合同</li><li id="4d6a" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">部署合同</li><li id="f2c0" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">在雪崩富士测试网上铸造NFT</li><li id="9436" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">将NFT添加到元掩码钱包</li></ul><h1 id="c6e5" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">什么是NFT？</h1><p id="549a" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">NFTs代表不可替代令牌，是类似于<a class="ae kv" href="https://www.cryptokitties.co/" rel="noopener ugc nofollow" target="_blank"> CryptoKitties </a>的数字收藏品的加密等价物。出于安全原因，它们通常由以太坊顶部的智能合约监管。它们使用不同的加密货币进行买卖，并在不同的交易所进行交易。虽然并非总是如此，但NFT通常可以使用与许多加密货币相同的底层代码进行编码。</p><p id="08ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，<a class="ae kv" href="https://www.cryptokitties.co/" rel="noopener ugc nofollow" target="_blank"> CryptoKitties </a>使用以太坊，而<a class="ae kv" href="https://rarepepes.com/" rel="noopener ugc nofollow" target="_blank"> RarePepe </a>基于交易对手。但是所有的NFT都与加密货币有许多共同的特征。例如，所有的都有某种形式的有限供应，为了被创造而被“开采”。因为NFT承担了密码的许多方面，它们通常在许多与密码相同的交易所进行交易，这使得它们总体上相当容易获得。</p><h1 id="f0a1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">什么是ERC-721令牌？</h1><p id="cbf3" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">ERC-721为NFT引入了一个标准，换句话说，这种类型的令牌是唯一的，并且可以具有与来自同一智能合约的另一个令牌不同的值。</p><p id="f17c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所有的NFT都有一个名为<code class="fe nd ne nf ng b">tokenId</code>的<code class="fe nd ne nf ng b">uint256</code>变量，所以对于任何ERC-721合约，这对<code class="fe nd ne nf ng b">contract address, uint256 tokenId</code>必须是全球唯一的。也就是说，dApp可以有一个“转换器”，使用<code class="fe nd ne nf ng b">tokenId</code>作为输入，输出一些很酷的图像，如僵尸、武器、技能或神奇的小猫！</p><h1 id="a471" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">ERC-721标准</h1><p id="6a14" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">由William Entriken、Dieter Shirley、Jacob Evans、Nastassia Sachs于2018年1月提出的ERC-721(以太坊征求意见稿721)是一种不可替代的令牌标准，实现了智能合约内令牌的API。</p><p id="1d16" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它提供的功能包括将令牌从一个帐户转移到另一个帐户，获取帐户的当前令牌余额，获取特定令牌的所有者，以及网络上可用令牌的总供应量。除此之外，它还具有一些其他功能，如批准一个帐户的令牌数量可以由第三方帐户移动。</p><p id="c468" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果智能合约实现了以下方法和事件，它可以被称为ERC-721不可替换令牌合约，并且一旦部署，它将负责跟踪以太坊上创建的令牌。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/43ddac4994c20a198161f007694523ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NOA6o2jwJOMtfo1bHV5l1A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">ERC-721方法</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/8c1e011a3c8b4875dac25bb33802c7ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M2j7B3uYbGj_LYz5p8p_1A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">ERC-721事件</p></figure><h1 id="f6b9" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">创建ERC-721令牌合同</h1><h2 id="d9a3" class="nj lt iq bd lu nk nl dn ly nm nn dp mc lf no np me lj nq nr mg ln ns nt mi nu bi translated">步骤1:项目设置</h2><p id="bdf8" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">好了，我们进入下一步。我们需要进入我们想要工作的目录，并运行以下命令:</p><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="38ea" class="nj lt iq ng b gy nz oa l ob oc">mkdir butterfly_token<br/>cd butterfly_token<br/>npm install --save-dev hardhat</span></pre><p id="9840" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们应该有一顶安全帽。让我们通过运行下面的命令来启动一个示例项目:</p><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="87e6" class="nj lt iq ng b gy nz oa l ob oc">npx hardhat init</span></pre><p id="f388" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将选择创建一个示例项目。接受所有请求。</p><p id="52e2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">之后，我们需要安装一些依赖项。我们可以使用以下命令安装这些依赖项:</p><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="20bc" class="nj lt iq ng b gy nz oa l ob oc">npm install --save-dev @nomiclabs/hardhat-waffle ethereum-waffle chai @nomiclabs/hardhat-ethers ethers @openzeppelin/contracts</span></pre><ul class=""><li id="448a" class="mk ml iq ky b kz la lc ld lf od lj oe ln of lr mr ms mt mu bi translated">我们可以使用这个插件在Hardhat中使用Waffle来构建智能契约测试，利用两者的优势。</li><li id="0987" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b"><a class="ae kv" href="https://www.npmjs.com/package/ethereum-waffle" rel="noopener ugc nofollow" target="_blank">ethereum-waffle</a></code>测试智能合约的最先进框架。</li><li id="a62d" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b"><a class="ae kv" href="https://www.npmjs.com/package/chai" rel="noopener ugc nofollow" target="_blank">chai</a></code> Chai是一个<em class="og">断言库</em>，类似于Node的内置<code class="fe nd ne nf ng b">assert</code>。它给了你许多可以针对代码运行的断言，从而使测试变得更加容易。</li><li id="7501" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b"><a class="ae kv" href="https://www.npmjs.com/package/@nomiclabs/hardhat-ethers" rel="noopener ugc nofollow" target="_blank">@nomiclabs/hardhat-ethers</a></code>这个插件给Hardhat带来了以太坊库<code class="fe nd ne nf ng b">ethers.js</code>，可以让你以一种简单的方式与以太坊区块链互动。</li><li id="ebdb" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b"><a class="ae kv" href="https://www.npmjs.com/package/ethers" rel="noopener ugc nofollow" target="_blank">ethers</a></code>完整的以太坊钱包实现和JavaScript(和TypeScript)实用程序。</li><li id="7228" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b"><a class="ae kv" href="https://www.npmjs.com/package/@openzeppelin/contracts" rel="noopener ugc nofollow" target="_blank">@openzeppelin/contracts</a></code>用于保护智能合约开发的库。建立在社区审查代码的坚实基础上。</li></ul><p id="7b4f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要确保一切正常，请运行:</p><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="9d75" class="nj lt iq ng b gy nz oa l ob oc">npx hardhat test</span></pre><p id="8730" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将在控制台中看到通过测试的结果。</p><h2 id="b240" class="nj lt iq bd lu nk nl dn ly nm nn dp mc lf no np me lj nq nr mg ln ns nt mi nu bi translated">步骤2:编写智能合同</h2><p id="d1fd" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">接下来，在合同目录下，我们将创建一个名为ButterflyToken.sol的文件。我们可以通过继承<a class="ae kv" href="https://docs.openzeppelin.com/contracts/4.x/erc20-supply" rel="noopener ugc nofollow" target="_blank">openzeplin</a>合同来编写一个ERC-721令牌合同。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><ul class=""><li id="fb6a" class="mk ml iq ky b kz la lc ld lf od lj oe ln of lr mr ms mt mu bi translated">一种更灵活但更昂贵的元数据存储方式。</li></ul><h2 id="1de4" class="nj lt iq bd lu nk nl dn ly nm nn dp mc lf no np me lj nq nr mg ln ns nt mi nu bi translated">_safeMint</h2><p id="584c" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">这个函数接受一个地址和一个令牌id作为参数。我们分别将<code class="fe nd ne nf ng b">msg.sender</code>和<code class="fe nd ne nf ng b">tokenCounter</code>作为地址和令牌id进行传递。</p><ul class=""><li id="30e5" class="mk ml iq ky b kz la lc ld lf od lj oe ln of lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">msg.sender</code>钱包在调用造币功能吗</li><li id="b007" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">tokenCounter</code>是目前的代币。</li></ul><p id="acc1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦被调用，该函数将安全地铸造一个令牌，并将其传送到调用铸造函数的钱包。</p><h2 id="e90d" class="nj lt iq bd lu nk nl dn ly nm nn dp mc lf no np me lj nq nr mg ln ns nt mi nu bi translated">_setTokenURI</h2><p id="2a43" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">我们可以通过这个函数将元数据设置为token。这些元数据可以是名称、描述，甚至是图像。它接受一个令牌id和uri作为参数。</p><p id="3927" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们很快就会讨论如何得到一个<code class="fe nd ne nf ng b">tokenURI</code>。基本上，它只是一个发回JSON对象的url。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">JSON形式的NFT元数据示例</p></figure><p id="805d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以用下面的命令编写合同:</p><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="5cbd" class="nj lt iq ng b gy nz oa l ob oc">npx hardhat compile</span></pre><p id="f867" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">编译过程完成后，我们将看到一个名为artifacts的新文件夹。在这个文件夹里，我们编译了ABI的文件。</p><h2 id="dea5" class="nj lt iq bd lu nk nl dn ly nm nn dp mc lf no np me lj nq nr mg ln ns nt mi nu bi translated">部署合同</h2><p id="fbb4" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">默认情况下，HardHat有一个示例部署脚本。你可以在<code class="fe nd ne nf ng b">scripts/ folder</code>下看到那个脚本。现在，我们要写一个这样的脚本。</p><p id="fcb1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，创建一个名为<code class="fe nd ne nf ng b">deploy_butterfly_token.js</code>的JavaScript文件，并粘贴以下代码</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="ad3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在部署合同之前，我们需要再进行一次配置。</p><p id="54f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe nd ne nf ng b">hardhat.config.js</code>文件，用下面的代码修改它:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="4141" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在第2行，你需要写你自己的私钥。</p><p id="dd69" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要获得私钥，您需要在浏览器上安装元掩码扩展。如果您没有元掩码，请查看本<a class="ae kv" href="https://myterablock.medium.com/how-to-create-or-import-a-metamask-wallet-a551fc2f5a6b#:~:text=Click%20on%20the%20MetaMask%20extension,or%20create%20a%20new%20one.&amp;text=Click%20on%20%E2%80%9CCreate%20a%20Wallet,%E2%80%9CNo%20Thanks%E2%80%9D%20to%20proceed." rel="noopener">教程</a>。</p><p id="25bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以按照这些步骤获得您的私钥<a class="ae kv" href="https://metamask.zendesk.com/hc/en-us/articles/360015289632-How-to-Export-an-Account-Private-Key" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="a193" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在部署您的合同之前，您需要向您的钱包中添加一些AVAX。你可以在每个测试网络上免费这样做。对于富士测试网，你可以使用这个网站。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://faucet.avax-test.network/"><div class="gh gi oj"><img src="../Images/1ecc443db93c7d2b7ed5eefefbc2f573.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EusSjnEE_xCTB_BQLcKkjw.png"/></div></a></figure><p id="26d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">粘贴您的钱包地址并请求10 AVAX。</p><p id="4d67" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此后，您可以通过编写以下代码来部署您的合同:</p><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="716c" class="nj lt iq ng b gy nz oa l ob oc">npx hardhat run scripts/deploy_butterfly_token.js --network avalanche_fuji</span></pre><p id="b2e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">部署过程完成后，您将会看到在您的文件系统上创建的<code class="fe nd ne nf ng b">config.js</code>文件。这是你的令牌地址。如果你想检查你可以使用<a class="ae kv" href="https://testnet.snowtrace.io/" rel="noopener ugc nofollow" target="_blank">雪迹</a>。复制地址并粘贴到搜索栏。你将得到关于你的合同的信息。</p><h2 id="a92f" class="nj lt iq bd lu nk nl dn ly nm nn dp mc lf no np me lj nq nr mg ln ns nt mi nu bi translated">在雪崩富士测试网上铸造NFT</h2><p id="29bf" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">部署过程完成后，现在是铸造NFT的时候了。在开始编写代码之前，您需要再添加一个依赖项。复制下面的命令并按回车键。</p><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="6346" class="nj lt iq ng b gy nz oa l ob oc">npm install axios</span></pre><p id="ca24" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将用它来上传元数据到Pinata。</p><p id="36cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在scripts/ folder下创建一个名为<code class="fe nd ne nf ng b">mint_nft.js</code>的新文件，并将下面的导入添加到这个文件的顶部。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><ul class=""><li id="9d06" class="mk ml iq ky b kz la lc ld lf od lj oe ln of lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">butterflyToken</code>是我们在Avalanche上部署的令牌地址。</li><li id="31f6" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">uploadImage</code>这是上传helper的文件。我们接下来就来了。</li><li id="03f0" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">ButterflyToken</code>是我们作为JSON的契约工件文件。</li></ul><p id="13e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这之后，我们需要添加几个函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="5c3d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该函数的分层调用是:</p><ul class=""><li id="2f9f" class="mk ml iq ky b kz la lc ld lf od lj oe ln of lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">tokenCounter</code>是当前令牌计数器<code class="fe nd ne nf ng b">e.g. 0, 1, 2…</code></li><li id="518b" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">指向我们上传的元数据的散列字符串。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><ul class=""><li id="5d32" class="mk ml iq ky b kz la lc ld lf od lj oe ln of lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">getTokenCounter()</code>读取当前令牌计数器并将其返回。</li><li id="7d91" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">我们使用ethers.js与contract交互。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="681b" class="nj lt iq ng b gy nz oa l ob oc">Replace YOUR_PRIVATE_KEY wtih your private key. It needs to look like 0x5g4sb.....</span></pre><ul class=""><li id="f8c5" class="mk ml iq ky b kz la lc ld lf od lj oe ln of lr mr ms mt mu bi translated">这个函数接受一个参数<code class="fe nd ne nf ng b">ipfsUrl</code>，即元数据文件URL，并在创建一个新的NFT后返回当前的令牌计数器。</li></ul><p id="dab4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在所有过程完成后<code class="fe nd ne nf ng b">mint_nft.js</code>文件看起来会是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="7188" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在在scripts/ folder下创建名为<code class="fe nd ne nf ng b">PinataConnection.js</code>的新文件，并将这些代码复制粘贴到这个文件中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="add1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nd ne nf ng b">uploadImage</code>函数有4个参数:</p><ul class=""><li id="ab17" class="mk ml iq ky b kz la lc ld lf od lj oe ln of lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">file_name</code>是文件系统<code class="fe nd ne nf ng b">e.g. butterfly.jpg</code>中我们的NFT图像文件名。您需要将您的图像添加到您的顶级项目文件夹。</li><li id="57ee" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">nft_title</code>是NFT的称号。</li><li id="7942" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">nft_desc</code>是对NFT的描述。</li><li id="5618" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">tokenId</code>是当前令牌计数器。</li></ul><p id="e810" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nd ne nf ng b">uploadToPinata</code>函数采用5个参数，并将选择的图像上传到Pinata。</p><ul class=""><li id="6d69" class="mk ml iq ky b kz la lc ld lf od lj oe ln of lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">IPFSHash</code>是我们上传的图像文件的散列字符串。</li><li id="9264" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">nft_title</code>是NFT的国号。</li><li id="b18a" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">nft_desc</code>是对NFT的描述。</li><li id="ea87" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">tokenId</code>是当前的代币计数器。</li></ul><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="e9b7" class="nj lt iq ng b gy nz oa l ob oc">You need to add your Pinata API_KEY and API_SECRET. For get this key and secret follow this steps:</span><span id="41ff" class="nj lt iq ng b gy ok oa l ob oc">1- Create new account on <a class="ae kv" href="https://app.pinata.cloud/" rel="noopener ugc nofollow" target="_blank">Pinata</a>.<br/>2- Login your account.<br/>3- Click profile icon on top right and select API Keys option.<br/>4- Then click Nex Key button.</span></pre><p id="0ada" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nd ne nf ng b">sendMetadata</code>函数取4个参数生成元数据，上传到Pinata，返回该元数据的IPFSHash。</p><ul class=""><li id="9695" class="mk ml iq ky b kz la lc ld lf od lj oe ln of lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">image</code>是我们的NFT图像文件。</li><li id="3d3c" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">name</code>是文件系统<code class="fe nd ne nf ng b">e.g. butterfly.jpg</code>中我们的NFT映像文件名。您需要将您的图像添加到您的顶级项目文件夹。</li><li id="62a3" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">nft_title</code>是NFT的称号。</li><li id="528a" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">nft_desc</code>是对NFT的描述。</li><li id="7492" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><code class="fe nd ne nf ng b">tokenId</code>是当前令牌计数器。</li></ul><p id="4a99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不要忘记将您的图像添加到项目文件的根目录中。并更新<code class="fe nd ne nf ng b">nft_desc</code>、<code class="fe nd ne nf ng b">nft_title</code>变量。在此之后，您可以编写以下命令:</p><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="9bf2" class="nj lt iq ng b gy nz oa l ob oc">npx hardhat run scripts/mint_nft.js --network avalanche_fuji</span></pre><p id="9478" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当mint过程完成时，您将在控制台上看到以下内容:</p><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="cb87" class="nj lt iq ng b gy nz oa l ob oc">Image Uploading to Pinata...<br/>QmYFr3b4xSkPRybwhKx7......vysLCKRX7FyCv<br/>Minting NFT...<br/>Contract Address: 0x37A03F828A40f06eE7......E9df73a3Fbc44 Token Counter: 0</span></pre><p id="d60b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">恭喜你刚刚铸造了你的第一个NFT！</p><h2 id="cd15" class="nj lt iq bd lu nk nl dn ly nm nn dp mc lf no np me lj nq nr mg ln ns nt mi nu bi translated">将NFT添加到元掩码钱包</h2><p id="3982" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">在Avalanche上看到Tesnet NFTs有点棘手。你需要在你的Android或IOS手机上安装MetaMask。安装后将您的钱包添加到MetaMask。您必须添加拥有此NFT的帐户。这意味着谁属于<code class="fe nd ne nf ng b">YOUR_PRIVATE_KEY</code>。</p><p id="a86b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你没有的话，在这之后添加雪崩富士测试网到MetaMask。遵循以下步骤。</p><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="bd17" class="nj lt iq ng b gy nz oa l ob oc">1. Click hamburger (≡) menu on top left.<br/>2. Click Settings.<br/>3. Select Networks.<br/>4. Click Add Network button, input below informations and click Add.</span><span id="6452" class="nj lt iq ng b gy ok oa l ob oc">FUJI Testnet Settings:<a class="ae kv" href="https://docs.avax.network/build/tutorials/smart-contracts/deploy-a-smart-contract-on-avalanche-using-remix-and-metamask/#fuji-testnet-settings" rel="noopener ugc nofollow" target="_blank">​</a></span><span id="f3f6" class="nj lt iq ng b gy ok oa l ob oc">Network Name: Avalanche FUJI C-Chain<br/>New RPC URL: <a class="ae kv" href="https://api.avax-test.network/ext/bc/C/rpc" rel="noopener ugc nofollow" target="_blank">https://api.avax-test.network/ext/bc/C/rpc</a><br/>ChainID: <!-- -->43113<br/>Symbol: <!-- -->AVAX<br/>Explorer: <a class="ae kv" href="https://testnet.snowtrace.io/" rel="noopener ugc nofollow" target="_blank">https://testnet.snowtrace.io/</a></span></pre><p id="eea4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">之后，通过点击钱包按钮切换网络。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/db4dae1d9b8592dffbe281287542e491.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O-rKwDE8fMsrOHWJO4H8-A.jpeg"/></div></div></figure><p id="bece" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要将NFT添加到您的元掩码钱包中，请切换到NFT选项卡。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/f143638e9cc09135b6a974e1a4501805.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lYLHG6ACWcvCEwl9-iONqg.jpeg"/></div></div></figure><p id="a50e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后单击导入NFT按钮，输入合同地址和令牌计数器。等待30秒后，您将看到元数据。如果您没有看到长单击NFT，然后单击刷新元数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/07427dda94e3b7fa8486feb14bbd81b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ajDjLWT7JQSUnQkbk5iJIQ.jpeg"/></div></div></figure><h1 id="6a64" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="72fe" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">你可以从<a class="ae kv" href="https://github.com/Enes-Kayiklik/ButterflyNFT" rel="noopener ugc nofollow" target="_blank"> GitHub </a>获得代码。</p><p id="adf6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我们到目前为止学到的和做的:</p><ul class=""><li id="d6bc" class="mk ml iq ky b kz la lc ld lf od lj oe ln of lr mr ms mt mu bi translated">学会了NFTs和ERC-721代币。</li><li id="1c4c" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">创建一个ERC-721合同。</li><li id="6399" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">在雪崩富士山部署了我们的合同。</li><li id="a9da" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">创建一个NFT文件并上传到Pinata。</li><li id="9fb3" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">铸造NFT。</li><li id="cfd6" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">将元掩码添加到此NFT。</li></ul><h2 id="3f7e" class="nj lt iq bd lu nk nl dn ly nm nn dp mc lf no np me lj nq nr mg ln ns nt mi nu bi translated">有用的链接</h2><ul class=""><li id="e759" class="mk ml iq ky b kz mm lc mn lf mo lj mp ln mq lr mr ms mt mu bi translated"><a class="ae kv" href="https://solidity-by-example.org/" rel="noopener ugc nofollow" target="_blank">实例的可靠性</a></li><li id="40e6" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><a class="ae kv" href="https://docs.soliditylang.org/" rel="noopener ugc nofollow" target="_blank">坚固性文件</a></li><li id="4757" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><a class="ae kv" href="https://hardhat.org/getting-started/" rel="noopener ugc nofollow" target="_blank">安全帽文档</a></li><li id="e5b0" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><a class="ae kv" href="https://docs.openzeppelin.com/contracts/3.x/erc721" rel="noopener ugc nofollow" target="_blank">ERC-721文件</a></li><li id="098d" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><a class="ae kv" href="https://cryptozombies.io/" rel="noopener ugc nofollow" target="_blank">隐型丧尸教程</a></li><li id="3994" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><a class="ae kv" href="https://www.youtube.com/watch?v=nRMo5jjgCr4" rel="noopener ugc nofollow" target="_blank">纳德·达比特——Youtube</a></li><li id="bf80" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><a class="ae kv" href="https://faucet.avax-test.network/" rel="noopener ugc nofollow" target="_blank"> AVAX水龙头</a></li><li id="81a1" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><a class="ae kv" href="https://medium.com/scrappy-squirrels/tutorial-nft-metadata-ipfs-and-pinata-9ab1948669a3" rel="noopener">教程NFT元数据</a></li><li id="8929" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><a class="ae kv" href="https://ethereum.org/tr/developers/docs/standards/tokens/erc-721/#:~:text=What%20is%20ERC%2D721%3F,something%20else%20like%20its%20visual." rel="noopener ugc nofollow" target="_blank">什么是NFT？</a></li></ul></div></div>    
</body>
</html>