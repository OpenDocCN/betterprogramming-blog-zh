<html>
<head>
<title>Build a Twitter-Inspired Animated Like Button in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中构建一个受Twitter启发的动画Like按钮</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-twitter-inspired-animated-like-button-in-swiftui-d558c4a3fc00?source=collection_archive---------2-----------------------#2020-09-18">https://betterprogramming.pub/build-a-twitter-inspired-animated-like-button-in-swiftui-d558c4a3fc00?source=collection_archive---------2-----------------------#2020-09-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6b6d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个有趣的、生动的心形按钮</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/710395a55062646f77de515d4b95319f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*amToosuJjwEi6jHp"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Jude Beck 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="2576" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">喜欢按钮视图</h1><p id="fb41" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">创建一个包含一个<code class="fe mu mv mw mx b">ZStack</code>的结构视图，然后将两个<code class="fe mu mv mw mx b">Image</code>视图添加到堆栈中。定义一个状态布尔变量，当用户点击图像时，该变量会改变其状态。使用<code class="fe mu mv mw mx b">heart.fill</code>和<code class="fe mu mv mw mx b">heart</code> SF符号，或者添加您的自定义图像。</p><p id="a051" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">如果你使用SF符号，那么给带有<code class="fe mu mv mw mx b">heart.fill</code>符号的图像视图添加以下修饰符:</p><ul class=""><li id="247d" class="nd ne it ma b mb my me mz mh nf ml ng mp nh mt ni nj nk nl bi translated"><code class="fe mu mv mw mx b">opacity</code>:图像未点击时数值为0，点击时数值为1。</li><li id="f4e6" class="nd ne it ma b mb nm me nn mh no ml np mp nq mt ni nj nk nl bi translated"><code class="fe mu mv mw mx b">scaleEffect</code>:刻度不能是0，所以当图像没有被点击时给它取值0.1，当图像被点击时给它取值1。</li><li id="a5e5" class="nd ne it ma b mb nm me nn mh no ml np mp nq mt ni nj nk nl bi translated">你可以尝试动画。我选择了一个线性动画来简化它。</li></ul><p id="4132" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">给<code class="fe mu mv mw mx b">ZStack</code>以下三个修改器:</p><ul class=""><li id="0aa2" class="nd ne it ma b mb my me mz mh nf ml ng mp nh mt ni nj nk nl bi translated"><code class="fe mu mv mw mx b">font</code>:这将改变SF符号的大小。</li><li id="880b" class="nd ne it ma b mb nm me nn mh no ml np mp nq mt ni nj nk nl bi translated"><code class="fe mu mv mw mx b">onTapGesture</code>:切换这个修饰符内部的布尔变量。</li><li id="6eb2" class="nd ne it ma b mb nm me nn mh no ml np mp nq mt ni nj nk nl bi translated"><code class="fe mu mv mw mx b">foregroundColor</code>:当用户点击图像时，将<code class="fe mu mv mw mx b">ZStack</code>元素的颜色从白色变为红色。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/06545e14c6aa2d7c9a34e0aa21366bd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/1*_IOtne56Tcv331dwDn-Mlg.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码结果:心形按钮动画</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="5586" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">CirclesView</h1><p id="8281" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">创建一个新的结构视图，并将以下常量添加到该视图中:</p><ul class=""><li id="7b0b" class="nd ne it ma b mb my me mz mh nf ml ng mp nh mt ni nj nk nl bi translated"><code class="fe mu mv mw mx b">angle</code>:控制每个圆的位置。对于九个圆来说，40度是一个很好的角度。</li><li id="490e" class="nd ne it ma b mb nm me nn mh no ml np mp nq mt ni nj nk nl bi translated"><code class="fe mu mv mw mx b">radius</code>:通过偏移位置来控制圆的半径。</li><li id="3c5c" class="nd ne it ma b mb nm me nn mh no ml np mp nq mt ni nj nk nl bi translated"><code class="fe mu mv mw mx b">speed</code>:控制动画速度。</li><li id="96d3" class="nd ne it ma b mb nm me nn mh no ml np mp nq mt ni nj nk nl bi translated"><code class="fe mu mv mw mx b">scale</code>:当图像未被点击时，给定标尺值0.1，当图像被点击时，给定标尺值1。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="0791" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">在我们的<code class="fe mu mv mw mx b">CirclesView</code>中创建一个<code class="fe mu mv mw mx b">ZStack</code>。在<code class="fe mu mv mw mx b">ForEach</code>循环中，用以下修改器创建一个圆形:</p><ul class=""><li id="4b3c" class="nd ne it ma b mb my me mz mh nf ml ng mp nh mt ni nj nk nl bi translated"><code class="fe mu mv mw mx b">fill</code>:给圆形添加颜色。</li><li id="303e" class="nd ne it ma b mb nm me nn mh no ml np mp nq mt ni nj nk nl bi translated"><code class="fe mu mv mw mx b">frame</code>:改变形状/视图尺寸。</li><li id="e0ee" class="nd ne it ma b mb nm me nn mh no ml np mp nq mt ni nj nk nl bi translated"><code class="fe mu mv mw mx b">scaleEffect</code>:当图像未被点击时，赋予形状值0.1，当图像被点击时，赋予<code class="fe mu mv mw mx b">scale</code>变量。</li><li id="4a23" class="nd ne it ma b mb nm me nn mh no ml np mp nq mt ni nj nk nl bi translated">同样，你可以尝试动画。线性动画看起来很适合我。</li><li id="1a07" class="nd ne it ma b mb nm me nn mh no ml np mp nq mt ni nj nk nl bi translated"><code class="fe mu mv mw mx b">offset</code>:通过偏移<code class="fe mu mv mw mx b">x</code>和<code class="fe mu mv mw mx b">y</code>的位置，形成圆形。使用下面代码片段中的公式。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="1f41" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">您可以创建一个颜色数组来使用，而不是用相同的颜色填充所有的圆。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="e0c6" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">将CirclesView添加到喜欢按钮</h1><p id="5a0d" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">在我们的<code class="fe mu mv mw mx b">LikeButton</code>视图中，添加以下状态变量:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="6363" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">在<code class="fe mu mv mw mx b">ZStack</code>内部，增加两个<code class="fe mu mv mw mx b">CirclesViews</code>。您可以控制圆的半径、动画速度和比例。将<code class="fe mu mv mw mx b">opacity</code>修饰符添加到两个<code class="fe mu mv mw mx b">CirclesViews</code>中，并将上面定义的<code class="fe mu mv mw mx b">opacity</code>变量传递给它。使用<code class="fe mu mv mw mx b">.rotationEffect</code>调节器抵消其中一个<code class="fe mu mv mw mx b">CircleViews</code>的旋转。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="690e" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">最后，给<code class="fe mu mv mw mx b">ZStack</code>添加一个<code class="fe mu mv mw mx b">scaleEffect</code>修饰符，并将<code class="fe mu mv mw mx b">.onTapGesture</code>修饰符的代码改为下面的代码。该代码将动画显示<code class="fe mu mv mw mx b">ZStack</code>的比例和<code class="fe mu mv mw mx b">CircleViews</code>的不透明度。在第一个动画结束后，不透明度应该回到0。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/bca635fcbbe37b0b748a81289dfd9e82.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/1*Ottu7XFmWw4qWuVEdaHMLg.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码结果:心形和圆形动画</p></figure><p id="cf12" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">搞定了。感谢阅读。</p></div></div>    
</body>
</html>