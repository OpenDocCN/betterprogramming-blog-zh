<html>
<head>
<title>Full Screen Bottom Sheet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">全屏底部页</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/bottom-sheet-android-340703e114d2?source=collection_archive---------1-----------------------#2019-09-07">https://betterprogramming.pub/bottom-sheet-android-340703e114d2?source=collection_archive---------1-----------------------#2019-09-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="ffe2" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">材料设计魔法！</h2><div class=""/><div class=""><h2 id="7687" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">想做一个可以充当全面屏的底片？给你！</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ko"><img src="../Images/0703bdc82f6acfbaabf5be232c464397.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*MQQCqbrwMvbDngxfqkwVTA.png"/></div></figure><p id="8836" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">底部表单是表示任何类型的用户相关信息或放置选项以获得用户快速操作的好方法，如打开相机、共享和图库等。</p><p id="6d00" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是今天我们将学习如何制作一个漂亮的底部表单，通过点击一个按钮就可以像全屏一样打开。激动吗？</p><p id="a320" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们开始吧！</p><p id="944e" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们要建造的是:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ls"><img src="../Images/03dc54167cfd0c6609e79f693ccd222d.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/1*lZTBcYUYb8eB65x_7bWbjw.gif"/></div></div></figure><p id="34bb" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们创建一个新项目，并在您的<code class="fe lx ly lz ma b">gradle.build</code>中添加以下依赖项。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="deb4" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我在本教程中使用数据绑定，所以请确保您已经在<code class="fe lx ly lz ma b">build.gradle</code>中添加了数据绑定依赖项。</p><pre class="kp kq kr ks gt md ma me mf aw mg bi"><span id="24cf" class="mh mi iq ma b gy mj mk l ml mm">dataBinding{<br/>    enabled true<br/>}</span></pre><p id="bc15" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要制作这个底部表单，我们首先需要有一个将与底部表单一起弹出的布局。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/3019092405977213c9c78ebddcac1e3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*r48M0lIfkOaquG4MTfCePw.png"/></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">底部工作表布局</p></figure></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><p id="1c90" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在布局目录中创建布局资源文件，并粘贴以下代码:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mb mc l"/></div></figure></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><p id="bfa8" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在你有了一个布局，是时候做一个底层适配器了。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="e11d" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe lx ly lz ma b">BottomSheet.java</code>是从<code class="fe lx ly lz ma b">BottomSheetDialogFragment</code>、<em class="mz">、</em>延伸出来的，所以有一些超越功能，像<code class="fe lx ly lz ma b">onCreateDialog()</code>。</p><ul class=""><li id="4245" class="na nb iq ky b kz la lc ld lf nc lj nd ln ne lr nf ng nh ni bi translated"><code class="fe lx ly lz ma b"><a class="ae nj" href="https://developer.android.com/reference/android/support/v7/app/AppCompatDialogFragment.html#onCreateDialog(android.os.Bundle)" rel="noopener ugc nofollow" target="_blank">onCreateDialog</a>(<a class="ae nj" href="https://developer.android.com/reference/android/os/Bundle.html" rel="noopener ugc nofollow" target="_blank">Bundle</a> savedInstanceState)</code>:覆盖构建自己的自定义对话框容器。</li></ul><p id="8eb9" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要添加底部表单行为，这样我们就可以根据底部表单的行为隐藏和显示应用程序栏。对此我们有一个<code class="fe lx ly lz ma b">BottomSheetBehavior</code>类。</p><p id="d4fe" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据<a class="ae nj" href="https://developer.android.com/reference/android/support/design/widget/BottomSheetBehavior" rel="noopener ugc nofollow" target="_blank">文件</a>，底板可定义为:</p><blockquote class="nk nl nm"><p id="3b29" class="kw kx mz ky b kz la ka lb lc ld kd le nn lg lh li no lk ll lm np lo lp lq lr ij bi translated">一个交互行为插件，用于<code class="fe lx ly lz ma b"><a class="ae nj" href="https://developer.android.com/reference/android/support/design/widget/CoordinatorLayout.html" rel="noopener ugc nofollow" target="_blank">CoordinatorLayout</a></code>的子视图，使其作为底层工作表工作。</p></blockquote><p id="74c8" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">底层有一些常数。</p><ul class=""><li id="74dc" class="na nb iq ky b kz la lc ld lf nc lj nd ln ne lr nf ng nh ni bi translated"><a class="ae nj" href="https://developer.android.com/reference/android/support/design/widget/BottomSheetBehavior.html#PEEK_HEIGHT_AUTO" rel="noopener ugc nofollow" target="_blank"> PEEK_HEIGHT_AUTO </a>:查看其父级的16:9比率关键线。</li><li id="4c61" class="na nb iq ky b kz nq lc nr lf ns lj nt ln nu lr nf ng nh ni bi translated"><a class="ae nj" href="https://developer.android.com/reference/android/support/design/widget/BottomSheetBehavior.html#STATE_COLLAPSED" rel="noopener ugc nofollow" target="_blank"> STATE_COLLAPSED </a>:表示底层板材已经折叠。</li><li id="da28" class="na nb iq ky b kz nq lc nr lf ns lj nt ln nu lr nf ng nh ni bi translated"><a class="ae nj" href="https://developer.android.com/reference/android/support/design/widget/BottomSheetBehavior.html#STATE_EXPANDED" rel="noopener ugc nofollow" target="_blank"> STATE_EXPANDED </a>:表示底部板材展开。</li></ul><p id="8894" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe lx ly lz ma b">BottomSheetBehavior</code> <em class="mz"> </em>有一个嵌套类<code class="fe lx ly lz ma b">BottomSheetCallback</code>，它将帮助我们实现我们需要的结果，即根据底部工作表的状态隐藏或显示应用程序栏。</p><p id="4dcf" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个嵌套类中，有两个抽象方法。</p><ul class=""><li id="eb64" class="na nb iq ky b kz la lc ld lf nc lj nd ln ne lr nf ng nh ni bi translated"><code class="fe lx ly lz ma b"><a class="ae nj" href="https://developer.android.com/reference/android/support/design/widget/BottomSheetBehavior.BottomSheetCallback.html#onSlide(android.view.View,%20float)" rel="noopener ugc nofollow" target="_blank">onSlide</a>(<a class="ae nj" href="https://developer.android.com/reference/android/view/View.html" rel="noopener ugc nofollow" target="_blank">View</a> bottomSheet, float slideOffset)</code>，拖动底层板材时调用。</li><li id="d5ed" class="na nb iq ky b kz nq lc nr lf ns lj nt ln nu lr nf ng nh ni bi translated"><code class="fe lx ly lz ma b"><a class="ae nj" href="https://developer.android.com/reference/android/support/design/widget/BottomSheetBehavior.BottomSheetCallback.html#onStateChanged(android.view.View,%20int)" rel="noopener ugc nofollow" target="_blank">onStateChanged</a>(<a class="ae nj" href="https://developer.android.com/reference/android/view/View.html" rel="noopener ugc nofollow" target="_blank">View</a> bottomSheet, int newState)</code>，当底层表的状态改变时调用。</li></ul><p id="3311" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以这些都是相对的方法，可以帮助我们实现目标。</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><p id="39d3" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们的底部表单已经准备好了，只需点击一下按钮就可以弹出来。让我们回到我们的<code class="fe lx ly lz ma b">MainActivity.java</code>。在Java类中添加以下代码行。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="caf9" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您的<code class="fe lx ly lz ma b">activity_main.xml</code>应该是这样的:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="067d" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们运行应用程序，看看它的神奇之处。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ls"><img src="../Images/03dc54167cfd0c6609e79f693ccd222d.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/1*lZTBcYUYb8eB65x_7bWbjw.gif"/></div></div></figure></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><p id="3337" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ja">关注</strong><a class="ae nj" href="https://medium.com/codixlab" rel="noopener"><strong class="ky ja">CodixLab</strong></a><strong class="ky ja">了解更多科技知识。</strong></p><p id="1800" class="pw-post-body-paragraph kw kx iq ky b kz la ka lb lc ld kd le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">觉得这篇文章有用？跟着我<a class="ae nj" href="https://medium.com/u/8ee4abb8abb8?source=post_page-----1b8c9832af43----------------------" rel="noopener"> Mustufa Ansari </a>上媒。看看下面我读得最多的文章。</p><ul class=""><li id="5356" class="na nb iq ky b kz la lc ld lf nc lj nd ln ne lr nf ng nh ni bi translated"><a class="ae nj" href="https://medium.com/better-programming/android-copy-paste-7dd60ad47d0" rel="noopener">如何使用textView在android中实现复制/粘贴功能？</a></li><li id="ed7f" class="na nb iq ky b kz nq lc nr lf ns lj nt ln nu lr nf ng nh ni bi translated"><a class="ae nj" href="https://medium.com/better-programming/recyclerview-expanded-1c1be424282c" rel="noopener">如何在没有任何库的情况下制作可扩展的recyclerView？</a></li><li id="d5b6" class="na nb iq ky b kz nq lc nr lf ns lj nt ln nu lr nf ng nh ni bi translated">想要制作具有更多选项的动画浮动操作按钮？</li><li id="4b14" class="na nb iq ky b kz nq lc nr lf ns lj nt ln nu lr nf ng nh ni bi translated">用漂亮的动画制作RecyclerView！</li><li id="07b1" class="na nb iq ky b kz nq lc nr lf ns lj nt ln nu lr nf ng nh ni bi translated"><a class="ae nj" href="https://medium.com/better-programming/what-is-androidx-1b8c9832af43" rel="noopener">什么是安卓系统？</a></li></ul></div></div>    
</body>
</html>