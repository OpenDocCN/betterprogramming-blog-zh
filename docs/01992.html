<html>
<head>
<title>Debug Node.js Apps Using Google Chrome and Visual Studio Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Google Chrome和Visual Studio代码调试Node.js应用</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/debug-node-js-using-google-chrome-and-visual-studio-code-5521c5e8f30c?source=collection_archive---------6-----------------------#2019-10-29">https://betterprogramming.pub/debug-node-js-using-google-chrome-and-visual-studio-code-5521c5e8f30c?source=collection_archive---------6-----------------------#2019-10-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d78f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用超能力调试</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://dltlabs.io/"><div class="gh gi ki"><img src="../Images/9e8d8cc731a3224f059ba9bbbbf7e5ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WK2Ce4FvwAQIFSBojHzCwg.png"/></div></a></figure><p id="24df" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">调试是开发应用程序的重要组成部分，您可以在其中找到并删除错误。在这篇博客中，我们将看到如何通过使用Google Chrome浏览器的DevTools和Visual Studio代码来高效地调试Node.js代码。</p><p id="9125" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">许多初学者使用<code class="fe lm ln lo lp b">console.log()</code>来调试代码，这不是一种有效的做法，因为我们需要在代码行中一次又一次地添加console.log。</p><p id="99a1" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这使我们停止应用程序，添加console.log，并再次启动应用程序。这个过程产生了不必要的代码，降低了我们的工作效率。</p><p id="0bca" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在这种情况下，调试工具是救星，因为它们为我们提供了断点、进入/退出函数、重启等功能。</p><p id="51f3" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">必要时，我们可以暂停执行并检查变量/对象，然后修改它们，而无需在任何时间点重新启动我们的应用程序。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="4bf3" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated"><strong class="ak">使用谷歌Chrome DevTools进行调试</strong></h1><p id="af24" class="pw-post-body-paragraph kq kr it ks b kt mp ju kv kw mq jx ky kz mr lb lc ld ms lf lg lh mt lj lk ll im bi translated">谷歌Chrome自带默认的Node.js调试工具，所以最好使用最新版本的Chrome。</p><p id="e5c6" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">要开始调试，让我们用<code class="fe lm ln lo lp b">--inspect-brk</code>标志运行我们的应用程序。</p><p id="d3fb" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">例子:<code class="fe lm ln lo lp b">$ node --inspect-brk server.js</code></p><p id="c264" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">下一步是进入Chrome，打开一个新标签，输入URL <code class="fe lm ln lo lp b">chrome://inspect/</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/f5cc7980271f5e3d2c7f26e1fc3209b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*O-IHFS97xd3fpMqqVHlz3w.png"/></div></figure><p id="47a1" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">单击“Open dedicated DevTools for Node”开始调试应用程序。在Chrome DevTools中查看源代码需要几秒钟时间。</p><h2 id="f09a" class="mv ly it bd lz mw mx dn md my mz dp mh kz na nb mj ld nc nd ml lh ne nf mn ng bi translated"><strong class="ak">用Chrome动手调试</strong></h2><p id="c358" class="pw-post-body-paragraph kq kr it ks b kt mp ju kv kw mq jx ky kz mr lb lc ld ms lf lg lh mt lj lk ll im bi translated">现在，让我们动手操作下面的代码，用<code class="fe lm ln lo lp b">node --inspect-brk server.js</code> <strong class="ks iu"> </strong>启动应用程序，打开Chrome DevTools。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="b303" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">当我们打开DevTools时，源代码出现在浏览器中，它是在运行我们的应用程序时加载的，并将在第一行暂停。</p><p id="1a01" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">单击右上方的播放按钮，如下图所示，继续执行脚本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi nj"><img src="../Images/b852b9c262e96b03d36116fecade4ffb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PTxljswdJVRANHDXfR44Vg.png"/></div></div></figure><p id="1021" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">现在Chrome或任何调试工具都提供了添加断点的功能，您可以在断点处暂停应用程序并检查那些变量和函数。</p><p id="5de7" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">要添加断点，请单击行号或在装订线或空白处。在“Get API”中添加一些断点，我们希望在这里检查请求对象。</p><p id="ab0a" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">现在，让我们调用Get API:<a class="ae no" href="http://localhost:3000/sam," rel="noopener ugc nofollow" target="_blank">http://localhost:3000/Sam，</a>我们可以发现DevTools，它会自动弹出并显示在那些断点处暂停的执行。</p><p id="5ef1" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我们可以将鼠标悬停在这些行上，以查看在如下所示的范围内接收到的变量或对象。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi np"><img src="../Images/0b2f81b7cb655f5eeeb200fd337e0c28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HlGCkWHWTJ_3ttd6"/></div></div></figure><p id="dc73" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">让我们在右侧探索Chrome调试器中的一些重要功能:</p><ol class=""><li id="0a76" class="nq nr it ks b kt ku kw kx kz ns ld nt lh nu ll nv nw nx ny bi translated">监视:在这个部分中，我们可以单击+图标，并添加我们希望在断点处暂停时监视的变量。它们有时不可用或未定义，这取决于作用域以及在断点处是否没有给它们赋值。</li><li id="46fe" class="nq nr it ks b kt nz kw oa kz ob ld oc lh od ll nv nw nx ny bi translated">调用堆栈:查看函数调用列表。</li><li id="bc44" class="nq nr it ks b kt nz kw oa kz ob ld oc lh od ll nv nw nx ny bi translated">范围:在范围部分，我们可以查看或编辑具有局部和全局范围的变量。</li><li id="e9c1" class="nq nr it ks b kt nz kw oa kz ob ld oc lh od ll nv nw nx ny bi translated">断点:查看断点列表。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/4e7d8cc3d33a983abc54bff644264d24.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/0*ODgPaJbukrqHk5Bk"/></div></figure><p id="41d7" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">现在，让我们来看看上面的图片，这些箭头按钮位于Chrome的右侧。这些图标将帮助我们导航代码的执行。</p><p id="2679" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这些箭头让我们:</p><ul class=""><li id="2371" class="nq nr it ks b kt ku kw kx kz ns ld nt lh nu ll of nw nx ny bi translated">单步执行下一个函数调用。</li><li id="740a" class="nq nr it ks b kt nz kw oa kz ob ld oc lh od ll of nw nx ny bi translated">进入下一个函数调用，查看该函数。</li><li id="1738" class="nq nr it ks b kt nz kw oa kz ob ld oc lh od ll of nw nx ny bi translated">跳出当前函数。</li></ul><p id="d711" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">注意:我们可以解决它们，进行实验，并探索更多的功能。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="94ed" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated"><strong class="ak">在VS代码中调试</strong></h1><p id="2782" class="pw-post-body-paragraph kq kr it ks b kt mp ju kv kw mq jx ky kz mr lb lc ld ms lf lg lh mt lj lk ll im bi translated">现在，让我们看看如何使用我们最喜欢的IDE(集成开发环境)，而不是代码来调试Node.js，这是强烈推荐的，而不是Chrome。</p><p id="d35c" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">打开VS代码并点击Ctrl + Shift + D，这将在VS代码中打开一个调试器标签，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi og"><img src="../Images/6871983d482aec096471c9b4af0ad80f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1Ni29CeHjZS3tDFl"/></div></div></figure><p id="19af" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">点击右上方菜单栏上的齿轮图标，这将打开一个<code class="fe lm ln lo lp b">launch.json</code>文件。按照下图所示的规范配置JSON。</p><p id="2687" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">将程序值从<code class="fe lm ln lo lp b">${workspaceFolder}\\index.js</code>改为<code class="fe lm ln lo lp b">${workspaceFolder}\\server.js</code>，因为我们的文件名是<code class="fe lm ln lo lp b">server.js</code>。</p><p id="d2a5" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">给程序取一个合适的名字。在下图中，我们将我们的程序命名为<em class="oh"> launch Node.js程序</em>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi oi"><img src="../Images/78fc436cb0c73797ede2d627ac68ba5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mbAuUQGnGHWD-8C6"/></div></div></figure><p id="ce4a" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">要启动程序并打开调试控制台，单击<em class="oh">运行</em>按钮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi oj"><img src="../Images/ee725643128167603a8d116e7517bde9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A1Gnp5iLfnKWT-cDH94XnQ.png"/></div></div></figure><p id="e8a0" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">现在我们可以像在上面的Chrome调试器工具中一样添加断点。</p><p id="99b3" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">或者，如果我们想在那一点暂停执行，我们可以在代码行前添加<code class="fe lm ln lo lp b">debugger</code>关键字。</p><p id="19aa" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">例如，我在下图的第12行添加了一个调试器。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi ok"><img src="../Images/be55d2abef404029b749a29b5f80fd2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SBQlWXNHq78ySMY-"/></div></div></figure><p id="0f7b" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">VS代码调试器包括其他重要的特性，如监视、调用堆栈、断点和导航面板。</p><p id="730a" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如果我们使用<a class="ae no" href="https://nodemon.io/" rel="noopener ugc nofollow" target="_blank"> Nodemon </a> <strong class="ks iu"> </strong>进行开发，请根据下图更改配置，并仅从VS代码终端使用Nodemon运行应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi ok"><img src="../Images/07fee996595914a30f26ae0d2e4bfc71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Jkcm2YfFVpqEmk17"/></div></div></figure><p id="e51d" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">因此，最后，您现在可以使用Visual Studio代码或Google Chrome来调试Node.js应用程序。</p><p id="3557" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">调试愉快！</p><div class="ol om gp gr on oo"><a href="https://dltlabs.medium.com/5-tips-to-create-high-performance-node-js-applications-e8419d9d158c" rel="noopener follow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">创建高性能Node.js应用程序的5个技巧</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">我们分享创建高性能Node.js应用程序的5个技巧。</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">dltlabs.medium.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc ko oo"/></div></div></a></div></div></div>    
</body>
</html>