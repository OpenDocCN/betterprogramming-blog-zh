<html>
<head>
<title>How To Set Up Cron Jobs in Linux Systems</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Linux系统中设置Cron作业</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-set-cron-jobs-in-linux-systems-83821be7ea3e?source=collection_archive---------15-----------------------#2021-03-09">https://betterprogramming.pub/how-to-set-cron-jobs-in-linux-systems-83821be7ea3e?source=collection_archive---------15-----------------------#2021-03-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4006" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">理解cron jobs的终极指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/08f21619f40aafa751a19b5faca1b159.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*l3nMZccdKlDfP6bt"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来自<a class="ae kv" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>。</p></figure><p id="c70c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可能经常需要在没有任何手动干预的情况下自动启动任务(作业)(例如，在备份数据库时)。您可能无法完成任务，或者您可能希望机器来完成并运行它们。无论哪种方式，您都需要它们在指定的时间在后台运行。</p><p id="9f8e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Cron作业有助于自动化此类任务——更具体地说，是那些重复性的任务。</p><p id="86f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本指南将帮助您在Linux实例上设置cron作业。您将学习如何使用Linux中内置的cron作业工具，以及初始化作业的各种方法。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="f4fd" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">使用crontab</h1><p id="5209" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">Linux提供了<code class="fe mw mx my mz b">crontab</code>，它在内部使用<code class="fe mw mx my mz b">cron</code>来调度作业。<code class="fe mw mx my mz b">cron</code>是一个使我们能够设置cron作业的实用程序。<code class="fe mw mx my mz b">crontab</code>封装cron表。这是您必须输入cron作业的地方，它充当用户与<code class="fe mw mx my mz b">cron</code>交互的接口。</p><p id="6c32" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每个用户，包括根用户，在<code class="fe mw mx my mz b">/var/spool/cron</code>目录中都有一个cron文件。如果您是根用户，在相关目录中会有一个<code class="fe mw mx my mz b">root</code>文件。</p><p id="4e48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">默认情况下，与用户相关的cron文件不存在。当你发出命令<code class="fe mw mx my mz b">crontab -e</code>时，它们就会被创建。该命令创建cron文件，并作为编辑器输入cron作业。一旦保存，它就启动<code class="fe mw mx my mz b">crond</code>守护进程。</p><p id="1ba5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要启动<code class="fe mw mx my mz b">crontab</code>，键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="dda0" class="ne ma iq mz b gy nf ng l nh ni">$ crontab -e</span></pre><p id="eb2a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将打开一个空文件。</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="b2d2" class="ne ma iq mz b gy nf ng l nh ni">~<br/>~<br/>"/tmp/crontab.9b8tmCAVkx" 0L, 0C</span></pre><p id="831e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在假设您要安排一个名为<code class="fe mw mx my mz b">backup.py</code>的备份脚本每天出现在<code class="fe mw mx my mz b">~/Desktop/cronscripts</code>目录中。您在文件中输入以下行:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="c9d6" class="ne ma iq mz b gy nf ng l nh ni">@daily cd ~/Desktop/cronscripts/; python3 backup.py<br/>~<br/>~</span></pre><p id="78d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输入作业后，保存并退出，这会自动启动cron作业。</p><p id="1c14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mw mx my mz b">@daily</code>这里每天运行脚本。对于传统场景，您可以使用许多其他的简写表达式。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="5435" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">Cron表达式的格式</h1><p id="70b8" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">每个cron作业必须具有以下格式:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="a816" class="ne ma iq mz b gy nf ng l nh ni">MINUTE HOUR DAY MONTH DAY COMMAND</span></pre><ul class=""><li id="915c" class="nj nk iq ky b kz la lc ld lf nl lj nm ln nn lr no np nq nr bi translated"><code class="fe mw mx my mz b">MINUTE</code> —接受范围从<code class="fe mw mx my mz b">0</code>到<code class="fe mw mx my mz b">59</code>的值。</li><li id="eae1" class="nj nk iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated"><code class="fe mw mx my mz b">HOUR</code> —接受范围从<code class="fe mw mx my mz b">0</code>到<code class="fe mw mx my mz b">23</code>的值。</li><li id="c233" class="nj nk iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated"><code class="fe mw mx my mz b">DAY</code> —接受从<code class="fe mw mx my mz b">1</code>到<code class="fe mw mx my mz b">31</code>的值。</li><li id="c506" class="nj nk iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated"><code class="fe mw mx my mz b">MONTH</code> —接受范围从<code class="fe mw mx my mz b">1</code>到<code class="fe mw mx my mz b">12</code>或<code class="fe mw mx my mz b">JAN</code>到<code class="fe mw mx my mz b">DEC</code>的值(非标准)。</li><li id="fe91" class="nj nk iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated"><code class="fe mw mx my mz b">DAY</code> —接受范围从<code class="fe mw mx my mz b">0</code>到<code class="fe mw mx my mz b">6</code>或<code class="fe mw mx my mz b">SUN</code>到<code class="fe mw mx my mz b">SAT</code>的值(非标准)。</li><li id="2939" class="nj nk iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated"><code class="fe mw mx my mz b">COMMAND</code> —封装要执行的命令。</li></ul><p id="37b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每个参数(除了<code class="fe mw mx my mz b">COMMAND</code>)也接受<code class="fe mw mx my mz b">*</code>、<code class="fe mw mx my mz b">,</code>和<code class="fe mw mx my mz b">-</code>。<code class="fe mw mx my mz b">*</code>表示可以取任意值。<code class="fe mw mx my mz b">,</code>是给出多个值，<code class="fe mw mx my mz b">-</code>是提供范围。</p><p id="0d6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，假设我们必须设置一个cron，它在每小时的第12分钟运行。</p><p id="2e9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，<code class="fe mw mx my mz b">crontab</code>中的cron作业看起来像这样:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="a759" class="ne ma iq mz b gy nf ng l nh ni">12 * * * * &lt;command&gt;</span></pre><p id="e2d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将该行包含在通过<code class="fe mw mx my mz b">crontab -e</code>打开的文件中后，保存它。这将在指定时间自动触发cron。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="e400" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">设置Cron作业的示例</h1><p id="5ed8" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">要设置每30分钟运行一次的cron，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="f6a6" class="ne ma iq mz b gy nf ng l nh ni">*/30 * * * * &lt;command&gt;</span></pre><p id="4850" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要设置在每小时开始时运行的cron，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="19ae" class="ne ma iq mz b gy nf ng l nh ni">0 */1 * * * &lt;command&gt;</span></pre><p id="fd83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要设置在每天晚上12点运行的cron，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="e55e" class="ne ma iq mz b gy nf ng l nh ni">0 12 * * * &lt;command&gt;</span></pre><p id="f4ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要设置cron在每月第15天的上午8:30运行，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="a3da" class="ne ma iq mz b gy nf ng l nh ni">30 8 */15 * * &lt;command&gt;</span></pre><p id="117b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要设置cron，使其在每第六个小时和第九个小时的第12分钟运行，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="89d0" class="ne ma iq mz b gy nf ng l nh ni">12 6,9 * * * &lt;command&gt;</span></pre><p id="180c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要设置在每三个月的第十天上午12点运行的cron，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="572e" class="ne ma iq mz b gy nf ng l nh ni">0 0 */10 */3 * &lt;command&gt;</span></pre><p id="60e2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要设置cron在一周的第二天下午5点运行，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="16df" class="ne ma iq mz b gy nf ng l nh ni">0 17 * * */2 &lt;command&gt;</span></pre><p id="d390" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要设置在每周一凌晨1点运行的cron，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="190d" class="ne ma iq mz b gy nf ng l nh ni">0 1 * * */MON &lt;command&gt;</span></pre><p id="5d95" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="acc0" class="ne ma iq mz b gy nf ng l nh ni">0 1 * * */1 &lt;command&gt;</span></pre><p id="2f27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要设置在每个月的第一天和每个星期天的上午12点运行的cron，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="10b5" class="ne ma iq mz b gy nf ng l nh ni">0 0 1 * 0 &lt;command&gt;</span></pre><p id="01b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要设置cron，使其在一个月的第二天和第三天每小时的开始运行，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="27b0" class="ne ma iq mz b gy nf ng l nh ni">0 * 2,3 * * &lt;command&gt;</span></pre><p id="7a63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要设置从<code class="fe mw mx my mz b">1</code>到<code class="fe mw mx my mz b">10</code>每分钟运行一次的cron，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="0631" class="ne ma iq mz b gy nf ng l nh ni">1-10 * * * * &lt;command&gt;</span></pre><p id="5a50" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要设置在每个工作日的凌晨1点运行的cron，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="1f3d" class="ne ma iq mz b gy nf ng l nh ni">0 1 * * 1-5 &lt;command&gt;</span></pre><p id="5b4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要设置在每天上午9点、上午10点、下午1点和下午2点运行的cron，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="5542" class="ne ma iq mz b gy nf ng l nh ni">0 9,10,13,14 * * * &lt;command&gt;</span></pre><p id="4be1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要设置从早上8点到晚上12点每隔一小时运行一次的cron，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="8ea1" class="ne ma iq mz b gy nf ng l nh ni">0 8-12/2 * * * &lt;command&gt;</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="a3f2" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">速记表达</h1><p id="2bbe" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">如果您不倾向于以原始格式设置cron作业，那么您可以使用一种简化的表达方式。</p><p id="21bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果希望每年都触发命令，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="8c94" class="ne ma iq mz b gy nf ng l nh ni">@yearly &lt;command&gt;</span></pre><p id="d8aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将在每年1月1日上午12点触发该命令。<code class="fe mw mx my mz b">@yearly</code>相当于cron表达式<code class="fe mw mx my mz b">0 0 1 1 *</code>。</p><p id="c2ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果希望每月触发一次命令，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="e3dd" class="ne ma iq mz b gy nf ng l nh ni">@monthly &lt;command&gt;</span></pre><p id="fdda" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将在每月第一天的上午12点触发该命令。<code class="fe mw mx my mz b">@monthly</code>相当于cron表情<code class="fe mw mx my mz b">0 0 1 * *</code>。</p><p id="1c9c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果希望每周触发一次命令，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="d399" class="ne ma iq mz b gy nf ng l nh ni">@weekly &lt;command&gt;</span></pre><p id="6433" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将在每周日上午12点触发该命令。<code class="fe mw mx my mz b">@weekly</code>相当于cron表情<code class="fe mw mx my mz b">0 0 * * 0</code>。</p><p id="8d26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想每天触发您的命令，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="78c7" class="ne ma iq mz b gy nf ng l nh ni">@daily &lt;command&gt;</span></pre><p id="22fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将在每天上午12点触发该命令。<code class="fe mw mx my mz b">@daily</code>相当于cron表达式<code class="fe mw mx my mz b">0 0 * * *</code>。</p><p id="7250" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果希望每小时触发一次命令，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="4d66" class="ne ma iq mz b gy nf ng l nh ni">@hourly &lt;command&gt;</span></pre><p id="7708" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将在每小时开始时触发该命令。<code class="fe mw mx my mz b">@hourly</code>相当于cron表达式<code class="fe mw mx my mz b">0 * * * *</code>。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="98c4" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">限制对crontab的访问</h1><p id="f2ec" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">有时，您可能想要限制谁可以访问<code class="fe mw mx my mz b">crontab</code>。您不希望cron作业在用户不知情的情况下被删除。</p><p id="2fb8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了实施这种访问，您可以创建<code class="fe mw mx my mz b">cron.allow</code> <em class="nx"> </em>和<code class="fe mw mx my mz b">cron.deny</code>文件。</p><p id="b7ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果有一个<code class="fe mw mx my mz b">cron.allow</code> <em class="nx"> </em>存在，那么只有被封装的用户才有权修改<code class="fe mw mx my mz b">crontab</code>。</p><p id="70e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果有<code class="fe mw mx my mz b">cron.deny</code>出现，除了<code class="fe mw mx my mz b">cron.deny</code>中出现的用户外，所有用户都可以访问<code class="fe mw mx my mz b">crontab</code>。</p><p id="593d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果这两个文件都不存在，所有用户都可以访问<code class="fe mw mx my mz b">crontab</code>。</p><p id="c2eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要在这些文件中添加用户名，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="f429" class="ne ma iq mz b gy nf ng l nh ni">vim /etc/cron.allow</span></pre><p id="3bae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在文件中，每行添加一个用户。</p><p id="174b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，可以填写<code class="fe mw mx my mz b">/etc/cron.deny</code>文件。</p><p id="d777" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要使用指定用户访问<code class="fe mw mx my mz b">crontab</code>，您可以键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="0498" class="ne ma iq mz b gy nf ng l nh ni">crontab -u user -e</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="bffb" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">如何延伸你的<code class="fe mw mx my mz b">crontab</code></h1><p id="4d6b" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">考虑这样一种情况，您希望cron作业每隔一天在上午12点触发，简单的cron作业表达式不足以满足这一要求。我们需要一个额外的shell命令来验证这个条件:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="b58f" class="ne ma iq mz b gy nf ng l nh ni">0 0 * * * &lt; $((($(date +%s) / 86400) % 2)) == 0 &gt; &amp;&amp; &lt;command&gt;</span></pre><p id="008d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，cron在每天上午12点被触发。但是，在cron作业表达式之后写入的条件验证自1970–01–01 00:00:00 UTC以来的一天是否能被2整除。这样，我们就能够每隔一天触发一次cron(也就是说，只有当天数被2整除时)。</p><p id="3c98" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nx">注意:您可能会认为cron </em> <code class="fe mw mx my mz b"><em class="nx">0 0 */2 * *</em></code> <em class="nx">应该满足隔日条件。尽管如此，这个cron在每月的第二天上午12点触发</em></p><p id="5505" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，要每隔一周触发一次cron作业，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="fb29" class="ne ma iq mz b gy nf ng l nh ni">0 0 * * 1 &lt; $((($(date +%s) / 86400) % 14)) == 0 &gt; &amp;&amp; &lt;command&gt;</span></pre><p id="ca51" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，cron在每周一的上午12点被触发。底层条件检查自1970–01–01 00:00:00 UTC以来的周数(14天)计数是否能被2整除。</p><p id="3182" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要每隔一个月触发一次cron作业，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="d39c" class="ne ma iq mz b gy nf ng l nh ni">0 0 1 */2 * &lt;command&gt;</span></pre><p id="3dfb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您可以推断，这里不需要shell脚本。月份字段中的<code class="fe mw mx my mz b">*/2</code>应满足要求。</p><p id="ecf9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要每隔一小时触发一次cron作业，请键入:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="257b" class="ne ma iq mz b gy nf ng l nh ni">0 */2 * * * &lt;command&gt;</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="bcf4" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="e594" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated"><code class="fe mw mx my mz b">crontab</code>是一个强大且易于使用的工具，用于设置后台作业的自动触发。</p><p id="fcf8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本教程中，您已经学习了如何初始化<code class="fe mw mx my mz b">crontab</code>。为了掌握额外的复杂需求，考虑什么是适合该工作的cron表达式。此外，您可以使用shell脚本和常见的cron作业表达式来处理各种其他用例。</p><p id="8072" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望你喜欢阅读这篇文章！</p></div></div>    
</body>
</html>