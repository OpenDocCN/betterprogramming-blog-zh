<html>
<head>
<title>Mocking iOS 15 Section Headers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">模仿iOS 15部分标题</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/mocking-ios-15-section-headers-ef6ff33750e9?source=collection_archive---------11-----------------------#2021-11-15">https://betterprogramming.pub/mocking-ios-15-section-headers-ef6ff33750e9?source=collection_archive---------11-----------------------#2021-11-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a93e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何伪造iOS 15的默认列表区标题样式</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2f0ed750badc3aefbbcb9dd322d2a86b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rJI_0iCB47cY4rg6"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">马克西姆·伊利亚霍夫在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="2e01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着iOS 15的发布，你可能已经注意到了列表头样式的细微变化。现在，它在该部分的上方和下方有了更多的填充。你可以在下面看到一个对比。</p><h2 id="2f99" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> iOS 14列表对比iOS 15列表</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ml"><img src="../Images/c5ec17acc43f255250f9cc2107fb34bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AKVa2xT6R3BnGV-XVwS4KQ.png"/></div></div></figure><p id="5465" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你<em class="mm">不</em>喜欢这个变化，你可以通过改变<code class="fe mn mo mp mq b">UITableView</code>上的<code class="fe mn mo mp mq b">sectionHeaderTopPadding</code>属性来改变标题顶部填充，或者如果你像我一样转移到SwiftUI，那么你可以使用如下外观修饰符:</p><pre class="kg kh ki kj gt mr mq ms mt aw mu bi"><span id="1d10" class="ls lt iq mq b gy mv mw l mx my">UITableView.appearance().sectionHeaderTopPadding = 0</span></pre><p id="9a1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想在你的应用程序中使用列表，这是非常好的。你得到了一个(可以说)很好的列表UI调整，基本上是免费的。但是我最近在尝试复制这种新风格时遇到了一个有趣的问题。</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><h2 id="5da3" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">复制iOS节头</strong></h2><p id="0a54" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">你会问为什么要复制它？当我在做我的最新项目(Flora — <a class="ae kv" href="https://twitter.com/floraios" rel="noopener ugc nofollow" target="_blank">在这里查看</a>)时，我也需要在我的应用程序中使用网格。我有一个<code class="fe mn mo mp mq b">ScrollView</code>,里面有一个<code class="fe mn mo mp mq b">LazyVGrid</code>,里面有一堆需要按类别分成几个部分的单元格。</p><p id="d7e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">没有列表的上下文，部分标题默认为完全不同的字体大小和粗细。保持与第一个例子相同的列表内容，你可以看到“水果”和“蔬菜”标题现在默认为与常规<code class="fe mn mo mp mq b">Text</code>视图相同的默认文本。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ml"><img src="../Images/71460097bd2c5d1e482d8eb7bd028628.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1BS3seB0corqKnfz2fvx8Q.png"/></div></div></figure><p id="9259" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望在两个<code class="fe mn mo mp mq b">List</code>视图以及任何<code class="fe mn mo mp mq b">ScrollView</code>或<code class="fe mn mo mp mq b">LazyVGrid</code>视图中保持一致的标题样式。由于用户可能已经熟悉了iOS风格的标题，我认为最好尝试和模仿iOS风格的标题。</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><h2 id="c35b" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> …但是有一个问题</strong></h2><p id="0ee9" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">但是说起来容易做起来难，因为苹果的文档包括SwiftUI和UIKit <code class="fe mn mo mp mq b">List</code> / <code class="fe mn mo mp mq b">UITableView</code>视图并没有透露任何关于默认填充、字体或颜色的有用信息。</p><p id="ce19" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据苹果文档，<code class="fe mn mo mp mq b">sectionHeaderTopPadding</code>的默认值是<code class="fe mn mo mp mq b"><a class="ae kv" href="https://developer.apple.com/documentation/uikit/uitableviewautomaticdimension?language=objc" rel="noopener ugc nofollow" target="_blank">UITableViewAutomaticDimensio</a>n</code>。<a class="ae kv" href="https://developer.apple.com/documentation/uikit/uitableview/3750914-sectionheadertoppadding" rel="noopener ugc nofollow" target="_blank">苹果文档</a> <br/>但是这对我们没有帮助，因为无论是官方文档还是头文件都没有给我们任何有用的信息。它必须在运行时根据视图的上下文来确定。也没有提到标题的默认字体大小、字体粗细或字体颜色。</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><p id="1a76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于没有默认值的官方来源，我们不得不求助于试错法。首先我在SwiftUI中创建了一个常规的旧列表，在模拟器上运行它，并截图。现在我们有了一个基线来比较我们自己的实现。</p><p id="26c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我从标题文本顶部和上面部分底部之间的距离开始，以像素为单位(见下文)。</p><p id="1cdf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我开始测试文本上方的填充值，一边测试一边截图，直到我得到的结果彼此相差几个像素。那时，我知道我找到了或多或少与苹果的实现相匹配的价值。</p><p id="6273" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">字体颜色非常清晰<code class="fe mn mo mp mq b">Color.secondary</code>，看起来非常匹配。然后对于字体大小，更多的尝试，和错误。看起来最匹配的字体是13磅大小和<code class="fe mn mo mp mq b">.regular</code>字体粗细。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ml"><img src="../Images/b5031a91a1862691939769033fc563cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3PyZNWp8OIJfXJz_eIw70Q.png"/></div></div></figure></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><h1 id="7291" class="nl lt iq bd lu nm nn no lx np nq nr ma jw ns jx md jz nt ka mg kc nu kd mj nv bi translated"><strong class="ak">实施</strong></h1><p id="7b65" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">将这些放在一起，我们可以创建一个模仿苹果实现的通用视图。</p><p id="338f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我通过反复试验找到的所有值</p><ul class=""><li id="4eb0" class="nw nx iq ky b kz la lc ld lf ny lj nz ln oa lr ob oc od oe bi translated">字体颜色:<code class="fe mn mo mp mq b"><strong class="ky ir">Color.secondary</strong></code></li><li id="3067" class="nw nx iq ky b kz of lc og lf oh lj oi ln oj lr ob oc od oe bi translated">字体大小:<code class="fe mn mo mp mq b"><strong class="ky ir">13 Points</strong></code></li><li id="7665" class="nw nx iq ky b kz of lc og lf oh lj oi ln oj lr ob oc od oe bi translated">字体粗细:<code class="fe mn mo mp mq b"><strong class="ky ir">.regular</strong></code></li><li id="155a" class="nw nx iq ky b kz of lc og lf oh lj oi ln oj lr ob oc od oe bi translated">前导填充(从列表行左侧开始填充):<code class="fe mn mo mp mq b"><strong class="ky ir">14</strong></code></li><li id="dd1e" class="nw nx iq ky b kz of lc og lf oh lj oi ln oj lr ob oc od oe bi translated">顶部填充:<code class="fe mn mo mp mq b"><strong class="ky ir">12</strong></code></li><li id="1cfa" class="nw nx iq ky b kz of lc og lf oh lj oi ln oj lr ob oc od oe bi translated">底部填充:<code class="fe mn mo mp mq b"><strong class="ky ir">8</strong></code></li></ul><p id="d78f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将所有这些值放入一个很好的通用视图中，我们最终会得到这样的结果:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ok ol l"/></div></figure></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><p id="4ecf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，您可以在自己的<code class="fe mn mo mp mq b">ScrollView</code>中使用这个视图，如下所示:</p><pre class="kg kh ki kj gt mr mq ms mt aw mu bi"><span id="c30d" class="ls lt iq mq b gy mv mw l mx my">Section(header: MockedSectionHeader(header: "Fruits")) {<br/>    Text("Apple")<br/>    Text("Orange")<br/>    Text("Pear")<br/>}</span></pre><p id="d9d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可能需要在你使用的<code class="fe mn mo mp mq b">LazyVGrid</code>或<code class="fe mn mo mp mq b">ScrollView</code>的侧面添加填充来匹配<code class="fe mn mo mp mq b">List</code>的侧面填充，但是现在我们已经尽可能的匹配了iOS的标题样式。</p><p id="74cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这在我自己的项目中很有用，所以如果你有同样的问题，希望我已经帮你节省了一些谷歌搜索和修补的时间。</p><p id="8206" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读。</p></div></div>    
</body>
</html>