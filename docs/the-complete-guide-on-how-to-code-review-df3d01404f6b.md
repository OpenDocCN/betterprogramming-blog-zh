# 如何进行代码评审的完整指南

> 原文：<https://betterprogramming.pub/the-complete-guide-on-how-to-code-review-df3d01404f6b>

## 苹果、谷歌、微软、亚马逊和脸书的最佳实践

![](img/1087ec9d23d46fe004cf78143387e602.png)

妮可·沃尔夫在 [Unsplash](https://unsplash.com/s/photos/code-review?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的照片

代码评审的最终目标是什么？

以确保改变奏效？验证代码是否遵循了样式指南？检查新的变化是否不会破坏任何东西？所有这些？这些都没有？

所有这些问题都是代码审查的必要部分，但没有一个是它的最终目标。

代码评审的主要目的是确保解决方案以最好的方式解决问题——从代码和产品的角度。

所有的代码评审实践都是为了满足这个最终目标而设计的。

但是，您如何确定您正在审查的解决方案是否是解决问题的最佳方式呢？换句话说，你如何进行代码审查？

让我们深入探讨一下。

# 没有完美的代码

在你开始审查代码之前，你需要明白没有所谓的*完美的*代码——只有*平衡的*代码。

作为一个评审者，你应该在取得进步的需要和理解变化的重要性之间取得平衡。

不要追求完美。

你不仅仅是为了代码而写代码，而是用代码解决业务问题。

如果代码解决了一个问题，并提高了系统的可维护性、可读性和可理解性，即使它并不完美，也不要拖延几个星期。留下评论，告诉作者如何改进他们的代码，并给它开绿灯。

# 你的意见不是权威

每个人对每件事都有自己的看法:你应该如何写代码，你应该花多少时间，为什么你需要使用一些文本编辑器而不是另一个，等等。

我们都有不同的经历，不同的背景，但我们需要在代码审查期间关闭它们。

当你决定你正在评论的解决方案写得好不好时，你必须依赖技术事实和标准，而不是个人偏好。

例如，在编码时，也许您总是在行尾使用分号，但是您正在审阅的代码的作者却不这样做。你要做的第一件事是留下类似“在此添加分号”的注释但是你应该做的是创建一个风格指南，并使之成为团队的标准。

代码库一定要一致，不要为了符合个人喜好而写。

# 解决冲突

我见过很多这样的例子，评审者在“如何编写代码”上犯了错误，在代码评审时留下了评论，在意识到他们错了之后，仍然决定改变他们的观点，只是为了看起来不愚蠢或者好像他们不知道一些事情。

代码审查并不是一个你需要统治对手的地方。你们是一个团队。你们朝着共同的目标努力。每个人都是你的队友。

在冲突中你应该做的第一件事是达成共识。最好在聊天或视频通话中进行，而不是在 GitHub 上的评论中。到最后就快多了。

如果你们两个都找不到关于如何编写代码的共同解决方案，请向团队或技术负责人寻求帮助。

不要在一个冲突上坐几天——试着尽快解决它。

# 代码质量

在高层次上，在代码评审时，您需要注意两件事情:

1.  改变解决问题。
2.  代码设计得很好。

要做到这一点，创建一个清单，列出在评审代码时应该注意的事项，并在每次代码评审时使用它。

以下是我对您应该关注的内容的一般性建议:

*   变更按照开发人员的意图进行。在任务中一切都按需要工作。
*   **变化并不复杂，难以理解。**团队所有成员都能理解每一行代码，并能在未来轻松维护这段代码。
*   **作者为一切事物取了好名字。它们不长，也很难读懂。**
*   作者在必要的地方添加了评论。好的注释是那些解释为什么一段代码存在的注释——而不仅仅是解释代码在做什么。如果代码不够清晰，不能自我解释，那么作者应该使代码更简单。
*   **变化遵循风格指南。如果你在公司没有风格指南，你一定要创建一个。**
*   **变更需要记录吗？**如果他们改变了基本或主要功能的主要部分(构建、测试、API、集成等。)，那么作者需要创建或更新关于它的文档。

# 试验

每一个变化都必须经过测试。

如果作者还没有添加单元、集成或端到端测试，请他们根据变更情况进行添加。

确保测试不是为了自我测试而编写的。它们必须是有用和有效的。

# 评论

首先，从你对你正在审查的代码的人的感觉中抽象出来。总是对代码而不是对一个人发表评论。

如果你看到作者写了“糟糕”的代码，不知何故引发了愤怒，先冷静下来，然后带着平静的心态回来留下你的评论。

此外，永远不要写像“做这个，不要做这个”这样的评论总是要解释作者为什么要做出改变，并添加一个来源(链接到博客帖子、文档、指南),人们可以在那里读到更多。但是解释原因的时候不要写完整的解决问题的方案。代码审查不能占用你一整天的时间。你的工作也不是修复另一个开发者的改变。在指出问题和提供直接解决方案之间找到平衡。

# 做人吧

还有最后一条:做人。

如果你在修改中发现了一些好的东西，告诉作者。代码审查不应该仅仅是错误。也给一些积极的反馈。做导师。

对你来说，这可能只是一个小小的积极的评论，但对其他人来说，这可能会让他们的一天。

干杯，

–[尼克](https://twitter.com/nickbulljs)

如果你喜欢这篇文章，你需要知道，每周一，我都会给 4000 多名 web 开发人员发一封信，里面有 3 篇来自技术世界的精选文章、2 篇 Web 开发指南和 1 篇本周最佳 Tweet

***“你的迅器真是混账牛逼*** *，真是尼克。这给了我一周的良好开端，让我学到了很多重要的知识。”*

在这里 **加入免费获得短小精悍知识信的聪明开发者 [**。**](https://nickbulljs.com/3-2-1/)**