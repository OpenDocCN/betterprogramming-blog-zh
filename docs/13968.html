<html>
<head>
<title>Build a Custom Video Player for Your Website</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为你的网站建立一个自定义的视频播放器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-tutorial-to-the-html-video-element-b8b9a4bf2f76?source=collection_archive---------8-----------------------#2022-10-20">https://betterprogramming.pub/a-tutorial-to-the-html-video-element-b8b9a4bf2f76?source=collection_archive---------8-----------------------#2022-10-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7cea" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">HTML视频元素教程</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ea8c16ff3a2d2b8700590286900c55ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M-w5XdLvSwd2WeKsgW4BqA.png"/></div></div></figure><p id="df11" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你是否在建立一个网站，让你的访问者可以观看视频，但是发现HTML视频元素的默认设计很无趣？不要担心！这篇文章解释了如何修改你的视频HTML元素，给他们一个更清爽的设计。</p><h1 id="7756" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">1.HTML视频元素是什么？</h1><p id="a5c4" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">video元素提供了一种将视频直接嵌入HTML文档的方法(<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video" rel="noopener ugc nofollow" target="_blank"> Mozilla，无日期，a </a>)。它有一套全面的属性、事件和方法，可用于将特性绑定到新元素。</p><h2 id="df4a" class="ml lo iq bd lp mm mn dn lt mo mp dp lx la mq mr lz le ms mt mb li mu mv md mw bi translated">1.1.属性</h2><p id="3dee" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">可以使用不同的属性直接配置视频元素，如<code class="fe mx my mz na b">autoplay</code>、<code class="fe mx my mz na b">controls</code>、<code class="fe mx my mz na b">src</code>、<code class="fe mx my mz na b">muted</code>、<code class="fe mx my mz na b">poster</code>等。(参见图1)。视频元素的属性远不止这些，如果你对其他属性感兴趣，我推荐你看看<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video#browser_compatibility" rel="noopener ugc nofollow" target="_blank"> Mozilla(无日期，a) </a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/dfd66757b11ff249c8e27f0c3aa48109.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*MP7N1WATBVSJYoWmxZuDSQ.png"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图一。视频元素属性说明(<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video" rel="noopener ugc nofollow" target="_blank"> Mozilla，无日期，a </a>)。</p></figure><p id="c18c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">视频元素可以配置一个或多个信号源(见图2)。使用多个源的原因是为可能不支持特定格式的浏览器提供一种替代格式(<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video" rel="noopener ugc nofollow" target="_blank"> Mozilla，无日期，a </a>)。通过在视频元素中插入消息，不会向用户传达支持错误。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图二。一个视频标签配置了单源和多源的例子(<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video" rel="noopener ugc nofollow" target="_blank"> Mozilla，无日期，a </a>)。</p></figure><p id="d2fd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">默认浏览器控件为不同的视频操作提供了图形用户界面(GUI)元素。这包括播放/暂停、时间轴、时间信息、音量设置、全屏、播放速度和集成图像等操作(参见图3)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/52373a3d347775cdad0a23a3f3a5dd40.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*AdJfLdt9Atej01Uu6JPIdg.png"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图3。带有默认浏览器控件的视频元素示例。视频元素显示的图像来自Artem Podrez 制作的视频。</p></figure><h2 id="aeef" class="ml lo iq bd lp mm mn dn lt mo mp dp lx la mq mr lz le ms mt mb li mu mv md mw bi translated">1.2.方法和属性</h2><p id="0b3c" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">HTML video元素的接口继承了HTML media元素接口的属性、事件和方法(<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement" rel="noopener ugc nofollow" target="_blank"> Mozilla，无日期，b </a>)。这包括<code class="fe mx my mz na b">play()</code>、<code class="fe mx my mz na b">pause()</code>等方法，以及<code class="fe mx my mz na b">volume</code>、<code class="fe mx my mz na b">duration</code>、<code class="fe mx my mz na b">currentTime</code>、<code class="fe mx my mz na b">paused</code>等属性。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/e9e4faeaa11d9dd74d94ae28be84fb92.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*BH3rWMvx7elkxDCsYiKdSA.png"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图4。对HTML媒体元素的属性和方法的解释(<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement" rel="noopener ugc nofollow" target="_blank"> Mozilla，无日期，b </a>)。</p></figure><p id="4afe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">只需从HTML文档中获取视频元素，就可以使用这些属性和方法(参见图5)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图5。一个通过界面修改视频元素的例子。</p></figure><p id="5270" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注意:在任何交互之前调用方法<code class="fe mx my mz na b">play()</code>可能会导致以下错误:<em class="nj"> DOMException: play()失败，因为用户没有先与文档进行交互。</em></p><p id="53ce" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">出现此错误是因为实施了特定于浏览器的自动播放策略(<a class="ae mk" href="https://developer.chrome.com/blog/autoplay/" rel="noopener ugc nofollow" target="_blank"> Beaufort，2017 </a>)。</p><h2 id="5af7" class="ml lo iq bd lp mm mn dn lt mo mp dp lx la mq mr lz le ms mt mb li mu mv md mw bi translated">1.3.事件</h2><p id="1ff3" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">HTML媒体元素接口还提供了一组在不同场景中执行的事件(参见图6)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/9f4dcadcb6a6a4b5937dc105fbf1a3a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*Z_tlvjSBcabPSKOw7VnYpA.png"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图6。对HTML媒体元素事件的解释(<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement" rel="noopener ugc nofollow" target="_blank"> Mozilla，无日期，b </a>)。</p></figure><p id="ab4b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一个事件可以通过调用方法<code class="fe mx my mz na b">element.addEventListener(event, function)</code>来分配，或者作为一个属性来分配(<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement" rel="noopener ugc nofollow" target="_blank"> Mozilla，无日期，b </a>)。当属性指定一个事件时，可以指定一个函数，但是方法<code class="fe mx my mz na b">addEventListener()</code>可以用于指定多个函数。当调用分配给事件的方法时，事件对象被传递给包含执行事件的元素的方法(参见图7)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图7。一个如何使用HTML媒体元素事件的例子。</p></figure><h1 id="8ff4" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">2.构建自定义视频播放器</h1><p id="16cb" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">本文的这一部分将解释如何为HTML视频元素构建定制的GUI元素。</p><h2 id="7e33" class="ml lo iq bd lp mm mn dn lt mo mp dp lx la mq mr lz le ms mt mb li mu mv md mw bi translated">2.1.实体模型设计</h2><p id="cc10" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">在编写任何HTML、CSS或JavaScript之前，我想介绍一下设计的概况(参见图8)。设计可以分为三个不同的部分:顶部；视频；底部；</p><p id="5880" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">顶部包含页面导航元素和附加视频选项，如播放速度滑块或全屏按钮。视频部分包含实际的视频元素、时间轴、当前时间信息和主要视频选项，如播放/暂停、倒带和前进。底部包含显示视频信息的元素，如标题、持续时间和描述。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/1ac2d0322333ee3f9739194adeac76c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MDSD9YQFVyexN9a6Kd1DOw.png"/></div></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图8。视频播放器的实体模型设计。</p></figure><p id="66c2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">默认情况下，附加选项滑块是隐藏的，可以通过按下它们位置旁边的按钮来切换它们的可见性(参见图9)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/817723063694f25d2d9ec14f195b7047.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Ec0JrAOjmwEOll12MbUAg.png"/></div></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图9。切换滑块可见性的图示。</p></figure><p id="33f3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当光标移动到视频区域之外，或者有一段时间没有移动时，视频控件会自动隐藏(参见图10)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/6cf70c4bdb6f6b6ec9afe7a3a50b47a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B-ZsH2LZRy9SM7_8GFofOg.png"/></div></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图10。光标不在视频区域内时GUI元素如何隐藏的图示。</p></figure><p id="e622" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">全屏活动时，视频信息是隐藏的，但仍然可以访问视频控件(参见图11)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/42c020b2698e0c196f999ce1c8a25f32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TTaRXYTPtoaNgQ5ozp55NQ.png"/></div></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图11。全屏活动时如何隐藏视频信息的图示。</p></figure><h2 id="52ea" class="ml lo iq bd lp mm mn dn lt mo mp dp lx la mq mr lz le ms mt mb li mu mv md mw bi translated">2.2.构建HTML结构</h2><p id="5112" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">第一步是建立一个简单的HTML结构(参见图12)。图12中的HTML结构包括两个外部资源，<a class="ae mk" href="https://fontawesome.com/" rel="noopener ugc nofollow" target="_blank">字体Awesome </a>和<a class="ae mk" href="https://fonts.google.com/specimen/Nunito?query=nunito" rel="noopener ugc nofollow" target="_blank">谷歌字体Nunito </a>。Font Awesome提供了一个可以由特定类显示的图标集合，Google Fonts Nunito将被用作页面的主要字体家族。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图12。一个简单的HTML结构的例子，包括字体Awesome图标和Nunito Sans字体。</p></figure><p id="7566" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下一步是添加第2.1节“实体模型设计”中介绍的分割部分(顶部、视频、底部)(参见图13)。这包括一个div元素，其中有一个名为<code class="fe mx my mz na b">video-player</code>的类包装这三个部分。顶部有一个名为<code class="fe mx my mz na b">top</code>的类，视频部分有一个名为<code class="fe mx my mz na b">video-container</code>的类，底部有一个名为<code class="fe mx my mz na b">video-information</code>的类。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图13。视频播放器三个不同部分的HTML结构。</p></figure><p id="fe37" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后一步是添加不同的输入和输出元素(参见图14)。我不会详细讨论具体的HTML元素，因为它不包含任何特别高级的东西。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图14。自定义视频播放器的HTML结构。</p></figure><h2 id="0fe0" class="ml lo iq bd lp mm mn dn lt mo mp dp lx la mq mr lz le ms mt mb li mu mv md mw bi translated">2.3.设计视频播放器</h2><p id="656b" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">有了HTML结构，是时候添加一些样式了。添加一个名为style.css的单独文件，并在HTML文档头中链接资源(参见图15)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图15。包含外部样式表的例子。</p></figure><p id="9b90" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先向样式表添加几个通用类(参见图16)。这些类没有绑定到任何特定类型的概念元素(fx top、video-container等)。)，它们应该被组合在HTML文档中。</p><p id="d66a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如，<code class="fe mx my mz na b">btn</code>定义了视频播放器中一个按钮的默认外观，但是它没有指定文本颜色。然而，按钮的文本颜色可以通过将类与<code class="fe mx my mz na b">txt-white</code>结合起来定义。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图16。一个用于设计视频播放器的通用类的例子。</p></figure><p id="be4b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下一步是将通用类添加到相关的HTML元素中。该设计包含四个不同的元素，应该使用<code class="fe mx my mz na b">flex</code>属性显示出来(参见图17)。</p><p id="ce2a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">顶部的div元素应该包含<code class="fe mx my mz na b">flex</code>、<code class="fe mx my mz na b">space-between</code>和<code class="fe mx my mz na b">align-center</code>类的组合，以确保导航和“附加视频选项”被调整到各自的一侧，并垂直居中对齐(参见图17，第13行)。</p><p id="e0e1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">“additional video options”div元素还应该包含<code class="fe mx my mz na b">flex</code>类，以确保按钮和输入滑块的换行div元素被内联显示(参见图17，第22行)。</p><p id="6970" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">主视频选项应该包含<code class="fe mx my mz na b">flex</code>和<code class="fe mx my mz na b">space-between</code>类，以确保按钮彼此分开显示(参见图17，第37行)。</p><p id="dd9a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，包含当前时间信息和时间轴的div元素应该包含类<code class="fe mx my mz na b">flex</code>、<code class="fe mx my mz na b">align-center</code>和<code class="fe mx my mz na b">gp-20</code>(参见图17，第44行)。<code class="fe mx my mz na b">Align-center</code>确保时间线和时间信息文本垂直居中，并且<code class="fe mx my mz na b">gp-20</code>在时间线和时间信息文本之间添加一个20px大小的间隙。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图17。应包含flex类的元素示例。</p></figure><p id="d96e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">视频容器div应该包含<code class="fe mx my mz na b">relative</code>类，以确保定义为absolute的子元素相对于视频容器div定位(参见图18，第16行)。</p><p id="a6d8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">主视频选项div应该包含<code class="fe mx my mz na b">absolute</code>和<code class="fe mx my mz na b">absolute-center</code>类，以指定div元素应该位于视频容器div的中心，并在视频元素的顶部(参见图18，第25行)。</p><p id="1508" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">时间信息div应该包含<code class="fe mx my mz na b">absolute</code>和<code class="fe mx my mz na b">absolute-bottom</code>来指定它应该位于视频容器div的底部，视频元素的顶部(参见图18，第33行)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图18。应该相对或绝对定位的元素示例。</p></figure><p id="879a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下一步是设计按钮和锚元素的样式，并添加文本颜色。顶部div标签中的按钮和锚元素应该包含四个不同的类:<code class="fe mx my mz na b">btn</code>；<code class="fe mx my mz na b">txt-white</code>；<code class="fe mx my mz na b">txt-white-alpha-hover</code>；<code class="fe mx my mz na b">font-m</code>；(参见图19，第16–38行)</p><p id="6fd5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mx my mz na b">btn</code>取消默认按钮设计，增加5个像素的填充。<code class="fe mx my mz na b">txt-white</code>将文本颜色设置为白色。<code class="fe mx my mz na b">txt-white-alpha-hover</code>当鼠标悬停在包含该类的元素上时，将文本颜色设置为透明白色。<code class="fe mx my mz na b">font-m</code>将字体大小设置为中等。</p><p id="28e3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">主视频选项div中的按钮也应该包含四个类:<code class="fe mx my mz na b">btn</code>；<code class="fe mx my mz na b">txt-white-alpha</code>；<code class="fe mx my mz na b">txt-white-hover</code>；<code class="fe mx my mz na b">font-xl</code>；(参见图19，第55–64行)</p><p id="4fb8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mx my mz na b">txt-white-alpha</code>将文本颜色设置为透明白色。<code class="fe mx my mz na b">txt-white-hover</code>如果鼠标悬停在元素上，将文本颜色设置为白色。<code class="fe mx my mz na b">font-xl</code>将字体大小设置为特大号。</p><p id="aad7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">显示当前时间信息和附加视频信息的div元素应该包含<code class="fe mx my mz na b">txt-white</code>类，以确保文本是白色的(参见图19，第77–84行)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图19。一个设置锚和按钮元素样式并添加文本颜色的例子。</p></figure><p id="5feb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后一个通用类是<code class="fe mx my mz na b">pd-20</code>。这个类只是增加了20px的填充。将该类添加到top div、time info div和video information div中(参见图20)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图20。应包含填充类的元素示例。</p></figure><p id="9efd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下一步是向一些概念性元素添加一些宽度、高度和边距配置，比如top div和video options div(参见图21)。将图21中的附加CSS添加到style.css的顶部。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图21。定义宽度、高度和边距属性的附加CSS。</p></figure><p id="e0a3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">类<code class="fe mx my mz na b">timeline</code>也应该被添加到时间轴的progress元素中(参见图22，第27行)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图22。添加timeline类的示例。</p></figure><p id="5f3a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下一步是添加四个定义，为数据状态属性等于<code class="fe mx my mz na b">none</code>、<code class="fe mx my mz na b">flex</code>、<code class="fe mx my mz na b">block</code>或<code class="fe mx my mz na b">maximized</code>的元素添加样式。将图23中的CSS添加到style.css中。</p><p id="baee" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mx my mz na b">none</code>、<code class="fe mx my mz na b">flex</code>和<code class="fe mx my mz na b">block</code>的定义用于根据元素的数据状态值隐藏或显示元素，而<code class="fe mx my mz na b">maximized</code>的定义用于确保当元素全屏显示时，顶部div元素位于视频元素的顶部。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图23。针对具有数据状态属性的元素的两个CSS定义的示例。</p></figure><p id="121b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">顶部的div和视频容器div应该包装在一个新的div元素中，该元素的id为<code class="fe mx my mz na b">fullscreen-container</code>，数据状态属性设置为<code class="fe mx my mz na b">minimized</code>(参见图24，第13行)。</p><p id="04ef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">样式化的最后一步是将数据状态属性<code class="fe mx my mz na b">none</code>和<code class="fe mx my mz na b">flex</code>添加到div元素中(参见图24，第20–78行)。有些元素可能已经使用flex属性显示了，但是data-state属性将在本教程的后面使用。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图24。向div元素添加数据状态属性的示例。</p></figure><p id="d15f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此时，视频播放器应该类似于图25中的屏幕截图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/56a72dfd859e89d73cb9d23d1e057d3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*111NFKg05j--ELCfnAZc9A.png"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图25。视频播放器的截图。视频元素显示的图像来自Artem Podrez 制作的视频。</p></figure><h2 id="e6ea" class="ml lo iq bd lp mm mn dn lt mo mp dp lx la mq mr lz le ms mt mb li mu mv md mw bi translated">2.4.添加事件和控件功能</h2><p id="8561" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">在添加任何特定的方法或事件之前，添加一个名为video-player.js的新文件，并将其包含在HTML文件中(参见图26)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图26。包含JavaScript文件的示例。</p></figure><p id="2a7f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">向javascript文件添加一个名为<code class="fe mx my mz na b">toggleVisibility(id)</code>的方法(参见图27)。此方法的职责是根据元素的当前数据状态值将元素的数据状态属性设置为“none”或“block”。</p><p id="9b9d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该方法还应该被添加到一个名为<code class="fe mx my mz na b">VideoPlayer</code>的空对象中，以便有一个封闭的范围来调用方法。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图26。用于切换元素可见性的方法示例。</p></figure><p id="0f93" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下一步是向包装div元素添加id，向播放速度滑块和音量滑块按钮添加方法<code class="fe mx my mz na b">toggleVisibility(id)</code>(参见图27)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图27。添加<code class="fe mx my mz na b">toggleVisibility(id)</code>方法和id的示例。</p></figure><p id="8fe3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在向video-player.js添加最后的方法之前，应该向video元素、滑块、按钮和其他相关的div元素添加几个id(参见图28)。</p><p id="225b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">还应该注意到，倒带和前进按钮应该包含一个数据状态属性，指定它们修改当前时间属性的秒数(参见图28，第69–86行)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图28。最后一个id和数据状态的例子。</p></figure><p id="ffac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">视频播放器需要的下一件事是控制视频功能的方法(参见图29)。</p><p id="873d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mx my mz na b">setVideoElement(videoId)</code>是否应该总是在其他方法之前执行<em class="nj"/>，因为其他一些方法是为了从名为<code class="fe mx my mz na b">videoElement</code>的属性中获取视频元素而设计的(参见图29，第22–24行)。</p><p id="9116" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mx my mz na b">setPlaybackSpeedEvent(sliderId)</code>绑定一个滑块来设置视频的回放速率属性等于滑块的值(参见图29，第30–36行)。</p><p id="df7a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mx my mz na b">setVolumeEvent(sliderId)</code>绑定一个范围在0–100之间的滑块，将视频的音量属性设置为等于滑块的值(参见图29，第42–48行)。</p><p id="4ed5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mx my mz na b">setCurrentTimeEvent(buttonId)</code>绑定一个按钮的<code class="fe mx my mz na b">click</code>事件，根据按钮的数据状态属性增加视频的当前时间属性(参见图29，第64–61行)。</p><p id="6915" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mx my mz na b">setPlayPauseEvent(buttonId)</code>绑定一个按钮的<code class="fe mx my mz na b">click</code>事件，根据视频的暂停属性播放或暂停视频(参见图29，第68–77行)。</p><p id="e59e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mx my mz na b">setCurrentTimeInfoEvent(containerId)</code>绑定视频的<code class="fe mx my mz na b">timeupdate</code>事件，将容器的内容设置为视频的当前时间(参见图29，第84–90行)。</p><p id="db15" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mx my mz na b">setTimelineEvent(timelineId)</code>绑定视频的<code class="fe mx my mz na b">timeupdate</code>事件，根据视频的当前时间与其持续时间的比较，将progress元素的值设置为0–100之间的一个数字(参见图29，第98–107行)。</p><p id="dd03" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mx my mz na b">setFullscreenEvent(buttonId, containerId)</code>绑定一个按钮的<code class="fe mx my mz na b">click</code>事件来设置容器是否全屏(参见图29，第117-133行)。</p><p id="efc7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mx my mz na b">setOnHoverEvent(containerId)</code>绑定鼠标事件来隐藏或显示包含类<code class="fe mx my mz na b">video-hover-event</code>的HTML元素(参见图29，第143–175行)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图29。用于控制视频功能的方法示例。</p></figure><p id="7bd5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，将类<code class="fe mx my mz na b">video-hover-event</code>添加到数据状态属性等于<code class="fe mx my mz na b">flex</code>的div元素中，并添加一个带有视频播放器初始化的脚本标签(参见图30)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">图30。添加类<code class="fe mx my mz na b">video-hover-event</code>并初始化视频播放器的例子。</p></figure><p id="69e4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这就是一切！自定义视频控件现在已连接到视频元素。</p><h1 id="2e5c" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">3.未来的改进</h1><p id="82fc" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">我有意省略了一些重要的元素，比如隐藏光标、点击时间线的能力或者格式化当前时间。原因是为了保持文章简短。另一个方面是对平板电脑和手机的支持，该设计目前只在桌面上测试。</p><p id="3ea7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在https://github.com/niiicolai/video-player找到完整的代码</p><h1 id="2e6f" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">4.文献学</h1><p id="77cc" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">Mozilla。没有约会。a. <em class="nj"> &lt;视频&gt;:视频嵌入元素</em>。可在:<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/HTML/Element/video</a>(访问时间:2022年10月19日)。</p><p id="0b58" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Mozilla。没有约会。b. <em class="nj"> HTMLMediaElement </em>。可在:<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/API/HTMLMediaElement</a>(访问时间:2022年10月19日)。</p><p id="4a0b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Beaufort，f .(2017)<em class="nj">Chrome中的自动播放政策</em>，<em class="nj"> Chrome开发者</em>。可用时间:<a class="ae mk" href="https://developer.chrome.com/blog/autoplay/" rel="noopener ugc nofollow" target="_blank">https://developer.chrome.com/blog/autoplay/</a>(访问时间:2022年10月19日)。</p></div></div>    
</body>
</html>