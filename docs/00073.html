<html>
<head>
<title>Webhook for You and Me</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你和我的网钩</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/webhook-for-you-and-me-54b83f5e31d0?source=collection_archive---------9-----------------------#2017-11-24">https://betterprogramming.pub/webhook-for-you-and-me-54b83f5e31d0?source=collection_archive---------9-----------------------#2017-11-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bd94" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你不会(也许)再问:“妈妈，什么是网钩？”</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/58cf628218cbfe970a38e309514b1126.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RNCvaJoz27hcyN3WzHFwNg.jpeg"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/photos/Rs5BQj5zbf8?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">埃菲社</a>在<a class="ae kz" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="6b26" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我是那种习惯用日常例子来解释专业术语的人，这样我就不需要仅仅把它们当成专业术语来记忆了。</p><p id="9e25" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">也许这个过程在某些情况下过于简化了这个术语，但是谁在乎呢？只要我明白它是如何工作的，并且不费力去记住它，我想我很好。</p><p id="c5a7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如今，我们需要学习数以百万计的东西来让自己跟上时代，而做到这一点已经够难的了。所以，有些过于简单化也无妨。</p><p id="a0a5" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">因此，在我今天向你解释webhooks的尝试中，我将首先告诉你一个“敲门”的故事(不是一个笑话，这是一个严肃的故事)，然后我们将进入技术部分。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="ebeb" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">沃尔特的故事</h1><p id="443c" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">有一个家伙，让我们叫他沃尔特·怀特先生。是的，电视剧《绝命毒师》里的好人。</p><p id="faa9" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">怀特先生想开始自己的毒品生意，需要非法化学品来做。所以，他联系了一个叫Tuco Salamanca的歹徒，他答应给他化学品，他们做了笔交易。</p><p id="e9d0" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">几天后，怀特先生还没有收到化学药品。所以，他去了屠库的家:</p><p id="3985" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">敲门敲门。谁在那里？是我，沃尔特·怀特。<br/> -你想要什么？<br/> -我已经付了款，还没拿到。我知道。你很快就会得到它们。现在离开。</p><p id="9de8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">沃尔特·怀特知道这个家伙疯了，他不想激怒他，所以他立即离开。</p><p id="78a8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">又过了几天，他不耐烦了，回到屠库的家:</p><p id="8154" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">敲门敲门。谁在那里？我，沃尔特·怀特。<br/> -你到底想要@#$@什么？我的东西在哪里？我已经告诉过你，你很快就会拿到的。多快？一个多星期了。你是说我是骗子吗？不，不。我只是想知道最新情况。<br/> -包裹到达时我会通知你。不要再回来了。现在离开这里。<br/>(怀特先生转身要走但屠库叫了出来:)<br/> -嘿，你走之前，留下你的电话号码，我好给你打电话。</p><p id="ac71" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">怀特先生留下了他的电话号码。第二天，他接到Tuco的电话，说包裹已经到了。</p><p id="2cfe" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们的小故事到此结束。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="5396" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">Webhooks的故事</h1><p id="f8c9" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">让我们回到讨论webhooks。</p><p id="de8b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们看到，在我们的故事中，Tuco告诉White先生，他对“不要打电话给我，我会打电话给你”的哲学很满意。同样的理念也存在于Webhook概念的背后。</p><p id="cb19" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">你看，当我们使用一个<a class="ae kz" href="https://en.wikipedia.org/wiki/Application_programming_interface" rel="noopener ugc nofollow" target="_blank"> API </a>的时候，我们在需要的时候调用它。该流程以请求-响应的方式工作。我们将请求数据，API将做出响应。</p><p id="8c3f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">所以，如果有一个服务API，你需要定期从它那里获取更新，你会经常调用它。你打电话越频繁，你得到的实时更新就越多。</p><p id="a310" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这被称为<em class="na"> API轮询</em>。</p><p id="bd59" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">然而，这不是一个好方法，因为在大多数情况下，你不会得到任何更新，因为没有任何。</p><p id="8dee" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">此外，就资源使用而言，这对双方来说都是巨大的开销。</p><p id="f70d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">另一方面，如果这些服务有一个可用的webhook，那么我们只需用它连接或“挂钩”我们的应用程序URL，它就会在每次有数据可用时敲打我们。</p><p id="fb1b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">就像屠库一样。包裹到达时，他打电话给怀特先生。就这么简单。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/a7572b72317212598953bd2303c65f8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*r3_O2ZyX00xEtL2RgQjW-g.png"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">图片来源:<a class="ae kz" href="https://thenewstack.io/wonderful-world-webhooks/" rel="noopener ugc nofollow" target="_blank">新闻来源</a></p></figure><p id="1307" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这就是你理解webhook如何工作所需要的。</p><p id="01f1" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">由于互联网上的大多数通信都是通过HTTP，API和webhook都广泛使用它。</p><p id="cac6" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">但是webhook不像API那样使用所有的<code class="fe nc nd ne nf b">GET</code>、<code class="fe nc nd ne nf b">POST</code>、<code class="fe nc nd ne nf b">PUT</code>、<code class="fe nc nd ne nf b">DELETE</code>方法。</p><p id="133d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">它只向希望获得更新的侦听器或服务发出一个<code class="fe nc nd ne nf b">HTTP POST</code>请求(也称为HTTP回调)。</p><p id="b0f8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">对于webhook，监听器将是一个简单的URL，它将通过一个针对特定事件的<code class="fe nc nd ne nf b">HTTP POST</code>请求来调用这个URL。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1e59" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">你为什么需要一个网络钩子，你在哪里使用它？</h1><p id="bbfd" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">Webhooks主要用于需要针对某些事件进行实时通知或操作的情况，例如Slack通知、持续集成服务和其他集成。</p><p id="70e7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">Webhooks可以用来在系统、系统内的组件或微服务之间交换数据——任何通过HTTP连接的东西。</p><p id="b062" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">比方说，你开发了一个应用程序，如果今天有可能下雨，它会向你发出警报，这样你就可以带雨伞了。或者，如果有人在您的项目存储库中提交了一个请求，而您希望在您的一个Slack通道中收到通知。</p><p id="d3a7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">你看，在这些情况下，行动是在特定事件发生后发生的。因此，对于您的天气应用程序，您可以将它连接到一个天气服务webhook，它只会在有可能下雨时向您发送通知。</p><p id="41da" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果你想在你的Slack通道中获得实时的提交更新，你需要将你的<a class="ae kz" href="https://developer.github.com/webhooks/" rel="noopener ugc nofollow" target="_blank"> GitHub账户</a>连接到<a class="ae kz" href="https://api.slack.com/incoming-webhooks" rel="noopener ugc nofollow" target="_blank"> Slack incoming webhooks </a>，这样它将在每次提交时接收消息。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1753" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">Webhooks的优势</h1><p id="b294" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">在互联网的早期，所有的web应用程序都在一个筒仓中工作，大多数仍然以同样的方式运行。随着API的兴起，这些应用程序之间出现了通信和集成。</p><p id="fd86" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">但是正如我们在例子中看到的，这种交流的一个关键部分(即“事件驱动的交流”)缺失了——web hooks来拯救我们。</p><p id="afd9" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">希望这篇文章容易理解。您现在应该可以使用由花哨的web服务或应用程序提供的webhooks了。如果需要，您也可以构建自己的webhook。</p><p id="9800" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">它们并不太复杂。感谢阅读！</p></div></div>    
</body>
</html>