<html>
<head>
<title>Gostradamus: Better dateTimes in Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Gostradamus:围棋中更好的日期时间</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/gostradamus-better-datetimes-in-go-2c17fe8a4a29?source=collection_archive---------14-----------------------#2020-04-09">https://betterprogramming.pub/gostradamus-better-datetimes-in-go-2c17fe8a4a29?source=collection_archive---------14-----------------------#2020-04-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ed67" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">因为日期在每种语言中都很难</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a53ee0d89068a23d9722106f4f91db63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NBCW2tcyDiD8SaPLu7E3qA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片由Pixaby上的<a class="ae kv" href="https://pixabay.com/users/tigerlily713-194784/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=660670" rel="noopener ugc nofollow" target="_blank">tiger ly 713</a>提供</p></figure><p id="d896" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Go中使用<code class="fe ls lt lu lv b">time</code>包很难。我认为许多围棋程序员也是这么看的。</p><p id="d073" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与其他语言相比，解析时间、替换一个<code class="fe ls lt lu lv b">time.Time</code>对象的天数以及其他操作都不自然。</p><p id="66a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，将一个<code class="fe ls lt lu lv b">string</code>解析成一个<code class="fe ls lt lu lv b">time.Time</code>对象，如下所示:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="4f38" class="ma mb iq lv b gy mc md l me mf">import "time"</span><span id="9b86" class="ma mb iq lv b gy mg md l me mf">parsed, err := time.Parse(<br/>    "02.01.2006 15:04:05", <br/>    "09.04.2020 11:49:54",<br/>)</span></pre><p id="f7da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">而替换当前<code class="fe ls lt lu lv b">time</code>的那天物体看起来是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="8ff5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">time</code>封装提供了所有需要的功能，但是仍然需要对封装本身有太多的了解才能得到一个纤薄的解决方案。</p><p id="4799" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以我编写了<a class="ae kv" href="https://github.com/bykof/gostradamus" rel="noopener ugc nofollow" target="_blank">Gostradamus:Go中更好的日期时间</a>来简化<code class="fe ls lt lu lv b">dateTime</code>处理和解析/格式化。</p><p id="a5ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们以上面的例子为例，在Gostradamus中实现它们:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="13d6" class="ma mb iq lv b gy mc md l me mf">import "github.com/bykof/gostradamus"</span><span id="8f99" class="ma mb iq lv b gy mg md l me mf">parsed, err := gostradamus.Parse(<br/>    "09.04.2020 11:49:54",<br/>    "DD.MM.YYYY HH:mm:ss",<br/>)</span></pre><p id="169b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很简单吧？也是解析日期和时间的一种非常常见的方式。在这里您可以找到所有的<a class="ae kv" href="https://github.com/bykof/gostradamus#token-table" rel="noopener ugc nofollow" target="_blank">解析标记</a>。</p><p id="82c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Gostradamus的第二个例子是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="67dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在围棋中与s合作从来没有这么容易。你可以在<a class="ae kv" href="https://github.com/bykof/gostradamus#basic-usage" rel="noopener ugc nofollow" target="_blank"> Github自述文件</a>中查找一些特性，或者在<a class="ae kv" href="https://pkg.go.dev/github.com/bykof/gostradamus?tab=doc" rel="noopener ugc nofollow" target="_blank"> go.dev参考文件</a>中查找所有特性。它也完全兼容<code class="fe ls lt lu lv b">time.Time</code>和<a class="ae kv" href="https://github.com/bykof/gostradamus#conversion-between-timetime-and-gostradamusdatetime" rel="noopener ugc nofollow" target="_blank">可以从它和</a>进行解析。</p><p id="cf58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望我的新包裹能帮到你很多。如果您想改进或添加功能，请随意贡献。</p></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><h1 id="1097" class="mq mb iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">奖金</h1><p id="1658" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">Gostradamus还提供了一种处理时区的简单方法。所有可能的时区都保存在<a class="ae kv" href="https://github.com/bykof/gostradamus/blob/master/timezone_constants.go" rel="noopener ugc nofollow" target="_blank">常量</a>中，因此您可以轻松地从一个时区转换到另一个时区:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="3636" class="ma mb iq lv b gy mc md l me mf">import "github.com/bykof/gostradamus"<br/>dateTime := gostradamus.Now()<br/>dateTime = dateTime.<!-- -->InTimeZone(gostradamus.<!-- -->AmericaNewYork<!-- -->)</span></pre><p id="c4f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">移位、天花板或地板也不是问题:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="3883" class="ma mb iq lv b gy mc md l me mf">import "github.com/bykof/gostradamus"<br/>dateTime := gostradamus.Now()<br/>dateTime = dateTime.ShiftDays(-14).CeilMonth()</span></pre></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><h1 id="97d3" class="mq mb iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">后续步骤</h1><p id="a2d4" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">该计划的下一步将是提供支持和实施<code class="fe ls lt lu lv b">timedelta</code> s，人们实际上可以用一个减去另一个来获得中间经过的时间:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="97fd" class="ma mb iq lv b gy mc md l me mf">dateTime := gostradamus.Now()<br/>... // some computation<br/>gostradamus.Now().Difference(dateTime).Seconds()</span></pre></div></div>    
</body>
</html>