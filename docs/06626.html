<html>
<head>
<title>Simple Flask Pagination</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简单烧瓶分页</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/simple-flask-pagination-example-4190b12c2e2e?source=collection_archive---------0-----------------------#2020-10-20">https://betterprogramming.pub/simple-flask-pagination-example-4190b12c2e2e?source=collection_archive---------0-----------------------#2020-10-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="60fd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">下面是一个简单的分步教程，介绍如何在Flask中实现分页</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7de3970311d6e6e5dcafd3376967bc20.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*0G5zu7CnXdMT9pGbYUTQLQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">烧瓶标志</p></figure><p id="b0f4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://flask.palletsprojects.com/en/1.1.x/" rel="noopener ugc nofollow" target="_blank"> Flask </a>以轻便著称，一旦你足够熟练，它会帮助你尽快建造。</p><p id="c3c0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们的任务:返回所有可用的颜色，每页五个项目。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><ol class=""><li id="30c1" class="mc md it la b lb lc le lf lh me ll mf lp mg lt mh mi mj mk bi translated">从后端定义数据。(您应该已经在数据库的颜色表中添加了颜色。)</li></ol><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="a621" class="mq mr it mm b gy ms mt l mu mv">@app.route('/colors')<br/>@login_required<br/><em class="mw">def </em>colors():<br/>    # Get the data from the database<br/>    colors = Color.query.all()<br/>    <em class="mw">return </em>render_template('colors/all_colors.html', colors=colors)</span></pre><p id="edf1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">2.显示页面上的项目。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="d6d7" class="mq mr it mm b gy ms mt l mu mv">&lt;div <em class="mw">class</em>="table-responsive"&gt;<br/>    &lt;table <em class="mw">class</em>="table table-sm table-borderless mb-0"&gt;<br/>        &lt;thead <em class="mw">class</em>="thead-dark"&gt;<br/>            &lt;tr&gt;<br/>                &lt;th&gt;S/N&lt;/th&gt;<br/>                &lt;th&gt;Color Name&lt;/th&gt;<br/>                &lt;th&gt;Date Created&lt;/th&gt;<br/>                &lt;th&gt;Actions&lt;/th&gt;<br/>            &lt;/tr&gt;<br/>        &lt;/thead&gt;<br/>        &lt;tbody&gt;<br/>            {% for color in colors %}<br/>            &lt;tr&gt;<br/>                &lt;th <em class="mw">scope</em>="row"&gt;{{ loop.index }}&lt;/th&gt;<br/>                &lt;td&gt;{{ color.name }}&lt;/td&gt;<br/>                &lt;td&gt;{{ color.created_at }}&lt;/td&gt;<br/>            &lt;/tr&gt;<br/>            {% endfor %}<br/>        &lt;/tbody&gt;<br/>    &lt;/table&gt;<br/>&lt;/div&gt;</span></pre><p id="7ba3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后将显示所有颜色。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/ad4fc82860c8b6edcd3ccdabf6bbd893.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pBKIaPhy8a4JUUDQblwngA.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d292" class="my mr it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">现在是分页部分</h1><p id="b61f" class="pw-post-body-paragraph ky kz it la b lb np ju ld le nq jx lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">3.修改视图以适应分页。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="d6bb" class="mq mr it mm b gy ms mt l mu mv">ROWS_PER_PAGE = 5</span><span id="322a" class="mq mr it mm b gy nu mt l mu mv">@app.route('/colors')<br/>@login_required<br/><em class="mw">def </em>colors():<br/>    <em class="mw"># Set the pagination configuration<br/>    </em>page = request.args.get('page', 1, type=<em class="mw">int</em>)<br/><br/>    colors = Color.query.paginate(page=page, per_page=ROWS_PER_PAGE)</span><span id="0c43" class="mq mr it mm b gy nu mt l mu mv">    <em class="mw">return </em>render_template('colors/all_colors.html', colors=colors)</span></pre><p id="eab4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用<a class="ae lu" href="https://flask-sqlalchemy.palletsprojects.com/en/2.x/" rel="noopener ugc nofollow" target="_blank"> Flask SQLAlchemy </a>的分页功能对结果进行分页，并根据需要使用任意数量的参数。调用<code class="fe nv nw nx mm b"> paginate()</code>函数的结果是一个分页对象，它有很多方法可以帮助你达到你想要的结果。您可以在<a class="ae lu" href="https://flask-sqlalchemy.palletsprojects.com/en/2.x/" rel="noopener ugc nofollow" target="_blank">文档</a>中了解更多信息。</p><p id="ac32" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">4.修改显示模板</p><p id="3753" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要显示项目，必须调用后端定义的<code class="fe nv nw nx mm b">colors</code>分页对象的<code class="fe nv nw nx mm b">.items</code>方法。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="072e" class="mq mr it mm b gy ms mt l mu mv">&lt;div <em class="mw">class</em>="table-responsive"&gt;<br/>    &lt;table <em class="mw">class</em>="table table-sm table-borderless mb-0"&gt;<br/>        &lt;thead <em class="mw">class</em>="thead-dark"&gt;<br/>            &lt;tr&gt;<br/>                &lt;th&gt;S/N&lt;/th&gt;<br/>                &lt;th&gt;Color Name&lt;/th&gt;<br/>                &lt;th&gt;Date Created&lt;/th&gt;<br/>                &lt;th&gt;Actions&lt;/th&gt;<br/>            &lt;/tr&gt;<br/>        &lt;/thead&gt;<br/>        &lt;tbody&gt;<br/>            {% for color in <strong class="mm iu">colors.items</strong> %}<br/>            &lt;tr&gt;<br/>                &lt;th <em class="mw">scope</em>="row"&gt;{{ loop.index }}&lt;/th&gt;<br/>                &lt;td&gt;{{ color.name }}&lt;/td&gt;<br/>                &lt;td&gt;{{ color.created_at }}&lt;/td&gt;<br/>            &lt;/tr&gt;<br/>            {% endfor %}<br/>        &lt;/tbody&gt;<br/>    &lt;/table&gt;<br/>&lt;/div&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/bf9475795872fc6743d3a8727efdb372.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8bRXBfAVrlPhomZc5Yh1cA.png"/></div></div></figure><p id="f696" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为我们设置了<code class="fe nv nw nx mm b">ROWS_PER_PAGE = 5</code>，所以只返回了五个项目。</p><p id="e667" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">5.添加用于导航页面的分页按钮视图。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="6612" class="mq mr it mm b gy ms mt l mu mv"><em class="mw">&lt;!-- Pagination Links--&gt;<br/></em>&lt;div <em class="mw">class</em>="text-right"&gt;<br/>    &lt;a <em class="mw">href</em>="{{ url_for('colors', page=colors.prev_num) }}"<br/>       <em class="mw">class</em>="btn btn-outline-dark <br/>       {% if colors.page == 1 %}disabled{% endif %}"&gt;<br/>        &amp;laquo;<br/>    &lt;/a&gt;</span><span id="222f" class="mq mr it mm b gy nu mt l mu mv"><em class="mw">&lt;!-- Loop through the number of pages to display a link for each--&gt;<br/>    </em>{% for page_num in colors.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}</span><span id="68d1" class="mq mr it mm b gy nu mt l mu mv">{% if page_num %}<br/><em class="mw">&lt;!-- Check for the active page and set the link to "Active"--&gt;<br/>            </em>{% if colors.page == page_num %}<br/>            &lt;a <em class="mw">href</em>="{{ url_for('colors', page=page_num) }}"<br/>               <em class="mw">class</em>="btn btn-dark"&gt;<br/>                {{ page_num }}<br/>            &lt;/a&gt;<br/>            {% else %}<br/>            &lt;a <em class="mw">href</em>="{{ url_for('colors', page=page_num) }}"<br/>               <em class="mw">class</em>="btn btn-outline-dark"&gt;<br/>                {{ page_num }}<br/>            &lt;/a&gt;<br/>            {% endif %}<br/>        {% else %}<br/>            ...<br/>        {% endif %}<br/>    {% endfor %}</span><span id="a675" class="mq mr it mm b gy nu mt l mu mv">    &lt;a <em class="mw">href</em>="{{ url_for('colors', page=colors.next_num) }}"<br/>       <em class="mw">class</em>="btn btn-outline-dark <br/>       {% if colors.page == colors.pages %}disabled{% endif %}"&gt;<br/>        &amp;raquo;<br/>    &lt;/a&gt;<br/>&lt;/div&gt;<br/>&lt;p <em class="mw">class</em>="text-right mt-3"&gt;<br/>   Showing page {{ colors.page }} of {{ colors.pages }}<br/>&lt;/p&gt;</span></pre><p id="2efe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是你的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/3b3e6d116eae9e0144830c05a3e73182.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K381btosAw2yt6_XXfPArA.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="79e9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我希望你喜欢这个简单的教程。</p></div></div>    
</body>
</html>