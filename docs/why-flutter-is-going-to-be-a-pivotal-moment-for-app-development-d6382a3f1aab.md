# 为什么 Flutter 将成为应用程序开发的关键时刻

> 原文：<https://betterprogramming.pub/why-flutter-is-going-to-be-a-pivotal-moment-for-app-development-d6382a3f1aab>

## 唯一能让它消失的东西

![](img/f361a0f5b9dd88b48c263ae3b0702c86.png)

如果你和我一样，你可能在过去几年里一直在追踪 Flutter 的进展。如果你更像我一样，你已经把农场押在了新项目上，T2 在 YouTube 上开了一个频道，讨论 Flutter 的来龙去脉。

我几乎完全将我的开发负荷切换到了 Flutter，我一点也不后悔。我已经将我的开发称为“抖动之前”和“抖动之后”，即“之前”的时间是非常痛苦的，并且很难以一种高性能的方式针对多个平台。

但是跨平台并不新鲜，那么为什么 Flutter 代表了软件开发中如此关键的时刻呢？

# 跨平台需求

“一次编写，随处运行”的愿望已经存在很长时间了。这也是 Java 最初产生的原因之一，所以你可以拥有一个应用程序，你可以用一种语言编写它，然后在你选择的任何设备上运行它。

考虑到 DRY(不要重复自己)的概念已经烙进了每个软件开发人员的心中，用两种不同的语言和设计框架为 iPhone 和 Android 创建一个应用程序一直都很困难。这似乎是代码的终极复制，你的 Android 或 iOS 应用程序将调用相同的 API，在屏幕上产生相同的文本，但两者都必须以自己的方式进行。

多年来，我们曾多次尝试纠正这种被认为效率低下的现象，我也尝试过很多次。任何来自 Cordova、Ionic、NativeScript、React Native 和 Xamarin 的形式，我都至少在其中写了一些东西，然后离开了它们。为什么？这里有一个简短的分类:

*   **Cordova/Ionic —** 快速开发原型应用，但对于一般应用来说速度较慢。没有带来最好的用户体验。
*   **NativeScript —** 最初显示了一些希望，但是关键包的许可意味着它是不可行的(在我使用它的时候，我不能在商业产品中使用 SQLite，除非我想付钱)
*   **反应自然—** 这不是一个足够好的理由，但我就是不喜欢把我的应用程序放在 JSX 那里。另外，JavaScript 中的类型安全并不令人讨厌(当时——我知道 TypeScript 现在已经可以使用了)
*   **xa marin Forms/MAUI**——一次非常沮丧、无趣的经历。只是因为我懂 C#(坚持做某事的错误理由)才坚持下来

所有上述框架还有一些共同之处。它们依赖于目标设备上“本机控制”的利用。因此，对于 iOS 或 Android，框架将为我当时使用的东西绑定适当的系统控件，无论是标签、复选框还是其他控件。

因此，如果 checkbox 的实现方式发生了变化，那么负责维护框架的人必须更新他们绑定到这些控件的方式。新控件也是如此——框架维护者(或开源包)将在框架内实现这些新控件。从我的角度来看，这相当于一个近乎持续的打地鼠游戏，在 API 中的新特性可用时追逐它们，并在各自的操作系统更新时修复现有绑定的问题。

这也意味着将这些框架移植到新的平台是一个巨大的负担，因为您必须将框架提供的所有控件映射到设备本身的本机控件。然后，一旦完成，就会有人负责更新这些绑定。

我不太喜欢我的某个应用程序在 Android 7.0 上没有以 Xamarin 形式显示任何*按钮*的背景。最后，这仅仅是因为框架本身的一个实现上的怪癖，但是这并不是你可以很容易地向客户解释的事情。相反，你必须花几个小时去追逐它(并编写一个自定义的渲染器！)只是为了解决这样的问题。

# Flutter 如何解决这个问题

Flutter 通过不使用任何本地控件来解决这个问题，而是将自己的控件绘制到屏幕上。现在，就用户体验和电池寿命而言，这听起来对每个人来说都是最糟糕的结果。但是在你得出这个结论之前，考虑一下这就是*在过去二十年里几乎每款游戏都在做的事情*。我们没有“特定于平台”的游戏体验，我们有移植到多个平台的相同游戏。每个平台只更新接触点(向您展示如何在 Xbox 上使用 Xbox 控制器，在 PlayStation 上使用 PlayStation 控制器)。每个游戏都在各自的平台上本地运行，并且可以很好地执行。

让内容在独立平台上快速呈现是谷歌的核心业务之一，[谷歌还开发了一款你可能听说过的浏览器](https://www.google.com/intl/en_au/chrome/)。Chrome 使用 Skia 进行几乎所有的图形操作，包括文本布局，并且以一种非常高效的方式进行。仔细想想，这是有道理的。Chrome 开发者不需要在 Android、iOS、Windows 等平台上布局文本。他们只需要让 Skia 以极快的速度执行该操作，然后跨平台实现该功能。

Flutter 还使用 Skia 进行渲染操作，这意味着它在布局应用程序和渲染动画方面的性能非常好，即使在较低规格的硬件上也是如此。

# 为什么这对软件开发来说是一件大事？

随着时间的推移，随着操作系统的发布，操作系统版本和为该平台编写的应用程序中可用的功能之间有着相当强的联系。随着时间的推移，更多的功能被添加到核心操作系统中，更多的控制被引入，现有的控制被更新。如果你的应用程序使用一组更新的 API，它可能无法在同一操作系统的旧版本上运行，因为你的应用程序将依赖于那些特定的平台 API。

这只是在我们每天使用的计算机环境中。如果我们从更广泛的意义上考虑软件，甚至我们驾驶的汽车也对软件有着真正的依赖。信息娱乐系统都有特定的风格，并且在外观上保持一致。

这个故事的要点是*很多时间都花在了让东西以一种表演的方式呈现在屏幕上。无论你现在正在阅读这篇文章，你都已经在按钮、文本、标签和其他视觉元素的外观上投入了大量的时间。一旦它们被渲染到用户界面，其他视觉效果，如阴影和渐变，就会花费更多的精力来尝试快速渲染，以减少操作中的抖动或缓慢。*

从这个意义上来说，Flutter 是革命性的，因为它完全解除了对父操作系统的依赖。如果你可以将 Flutters 的渲染引擎移植到你的手机、汽车、爆米花机或咖啡机上，那么你就可以访问一个非常棒的控件库，让你制作的任何应用程序看起来都非常棒。因此，对平台开发人员的要求不是为按钮、文本和其他东西创建一组控件，而是确保他们的东西能够运行。那很酷。

这可能意味着平台开发人员可以创建一个操作系统，并选择完全接受 Flutter 附带的可视化设计语言，而不是实际设计任何自己的原生控件。只要他们的东西可以支持在屏幕上渲染 Flutter 应用程序，一切都应该正常。大量的开发工作被简单地删除了。

# 但它并不完美

我们永远不会得到一个完美的跨平台框架。在这个过程中，我们将不得不做出妥协，因为我们正在创建一个跨平台的应用程序。诚然，我发现这些与 Flutter 本身的妥协是相当小的。

我在 Flutter 中注意到的一件事是大量我称之为*稳定特性滑动的东西。*当 Flutter 来到 Android 和 iOS，变得稳定后，用*有状态热重装*落地。您可能已经听说过这一点，但您可以对应用布局和服务层进行更改，应用的状态将会保持不变，但您的应用将会神奇地更新。这大大缩短了开发周期，也是 Flutter 的主要特性之一。

去年，Flutter for Web 进入了稳定状态，而且是在*没有*状态热重装的情况下进入的。本期追踪这个特殊的问题。毫无疑问，web 热重装是一个很难解决的问题，根据关于这个问题的一个评论。

![](img/2af0bd1cddb7813761e4b13832ec5895.png)

但是，Windows/Android 和 iOS 的 Flutter 由于支持热重装而变得稳定。使用 Flutter 的人可能会有一个概念，是什么让一个软件变得“稳定”,一旦 Flutter 达到稳定，他们就有理由期待一个热重载，因为这是之前每个平台都附带的。

正如我们在这里看到的，这显然不是颤振网页的情况。要明确的是，这不是我喊“来吧，你 noobs！这能有多难！”因为我认识到并接受，即使在非 web 平台上，启用热重载也是一个非常复杂的命题。但这并不能改变这样一个事实，即 Flutter Stable 根据你开发的平台不同，在特性上有差异，这感觉很奇怪。

另一个例子是 Windows 平台上的 Flutter。iOS、Android 和 macOS 提供了用一种语言编写平台代码的能力，你可以合理地期望该平台的开发者知道这种语言。iOS 让你用 Swift 或者 Objective C 写平台代码，Android 让你用 Kotlin 或者 Java 写平台代码。我希望这些平台的开发者了解这些语言。

那么，你希望 Windows 开发人员知道什么语言呢？我会说. NET。当然，你可能知道 Python 或 JavaScript 或其他一些语言，但作为一名原生 Windows 开发人员，你可能会在. NET 中淘汰 WPF 或 UWP 应用程序。这是有道理的-它与各种 Windows API 和大量 Nuget 包进行了很好的集成，使原生平台功能非常容易使用。

很自然，你会希望 Windows 上的 Flutter 能让你使用。NET 作为您的平台特定的代码，尽管 C#和。NET 被世界上数百万的开发人员使用，并且是显而易见的选择，Windows 功能必须用 C++实现。

在 Flutter 之前，为什么 Windows 开发人员需要了解 C++？如果他们正在编写一个非常高性能的时间关键的本地应用程序，他们可能知道这一点。但这不是常态，这绝对是例外。因此，与相比，C++开发人员相对较少(甚至更少“优秀”)。Windows 开发人员。

因为 Flutter 是为 iOS 和 Android 推出的，支持最流行的语言，所以我认为它缺乏。NET 对 Windows 平台特定功能的支持是另一个稳定特性的例子。因此，在 Windows 上开发和发布 Flutter 插件变得更加困难，并从整体上影响了 Flutter 在 Windows 上的价值定位。

再说一遍，我并不是说这样做很容易。在任何规模上做这些都是非常困难的。但是仅仅因为有些东西很难，这就意味着你应该宣布像 Flutter 这样的东西的平台稳定性，并且当你这样做的时候随机地放弃某些特性吗？我不认为这有什么意义，因为它开创了一个先例，一个平台可以在没有普遍接受的功能可用的情况下保持稳定。毕竟，稳定只是一个词，可能最好让平台处于测试阶段，直到它们拥有其他平台的功能。

如果这种趋势继续下去，这意味着颤振对于任何平台都可能变得稳定，任何特性都可能存在或不存在。从长远来看，这是一个问题，因为 Flutters 的功能集因平台而异。这是一件可能影响 Flutters 作为跨平台框架选择的可行性的事情，因为你不会真正知道在你选择的平台上，你会在 Flutter 的稳定版本中获得什么功能。

尽管如此，Flutter 确实代表了一个非常棒的框架，如果你还没有开始使用它，那么你绝对应该尝试一下。不过，请注意，不同平台之间的情况可能会有所不同。