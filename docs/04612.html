<html>
<head>
<title>How to Play Audio Files in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python中播放音频文件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-play-audio-files-in-python-3a430b6b2657?source=collection_archive---------4-----------------------#2020-04-24">https://betterprogramming.pub/how-to-play-audio-files-in-python-3a430b6b2657?source=collection_archive---------4-----------------------#2020-04-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="faff" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">利用SimpleAudio包，这是一个用于Python的跨平台音频库</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f0b6ac80667857cb78f8ed6e2f6cb4ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DZFuc3v9lswjZmpFfoAW-A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@joshsorenson?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">乔希·索伦森</a>在<a class="ae ky" href="https://unsplash.com/s/photos/speaker?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="9c6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过阅读本文，您将学会在Python应用程序中播放音频文件。根据<a class="ae ky" href="https://simpleaudio.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">官方文档</a>，<a class="ae ky" href="https://simpleaudio.readthedocs.io/en/latest/capabilities.html" rel="noopener ugc nofollow" target="_blank">简单音频包</a>:</p><blockquote class="lv lw lx"><p id="6fad" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">“…为Python 3在OSX、Windows和Linux上提供跨平台、无依赖性的音频回放功能。</p><p id="6fbe" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">Simpleaudio旨在一站式购买用于声音剪辑播放的跨平台音频接口。"</p></blockquote><p id="020b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它具有以下特点:</p><ul class=""><li id="f140" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">异步接口——音频回放开始后，程序立即继续执行，剩下的工作由后台线程完成。</li><li id="1d22" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated">音频格式—标准整数(8位、16位和24位整数格式)以及32位浮点。8位无符号。16位和24位是带符号的小端字节序。24位是每个打包样本的三个字节。32位是小端浮点。</li></ul><p id="f53b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本教程分为三个部分:</p><ol class=""><li id="1dc4" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mq mi mj mk bi translated">设置</li><li id="6d75" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mq mi mj mk bi translated">履行</li><li id="78d1" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mq mi mj mk bi translated">结论</li></ol><p id="abb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们继续下一部分，开始安装必要的模块。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="6d0b" class="my mz it bd na nb nc nd ne nf ng nh ni jz nj ka nk kc nl kd nm kf nn kg no np bi translated">1.设置</h1><p id="1a12" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">使用<code class="fe nv nw nx ny b">pip install</code>命令安装非常简单。强烈建议您在继续之前设置一个虚拟环境。</p><h2 id="bcc9" class="nz mz it bd na oa ob dn ne oc od dp ni li oe of nk lm og oh nm lq oi oj no ok bi translated">Windows操作系统</h2><p id="b11b" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">运行以下命令安装<code class="fe nv nw nx ny b">simpleaudio</code>模块:</p><pre class="kj kk kl km gt ol ny om on aw oo bi"><span id="c881" class="nz mz it ny b gy op oq l or os">pip install simpleaudio</span></pre><h2 id="404f" class="nz mz it bd na oa ob dn ne oc od dp ni li oe of nk lm og oh nm lq oi oj no ok bi translated">Linux操作系统</h2><p id="db4f" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">对于Linux用户，除了上面的命令之外，您还必须安装额外的依赖项。对于Debian变体，您可以使用以下命令来完成。我们将首先安装python3开发包:</p><pre class="kj kk kl km gt ol ny om on aw oo bi"><span id="b57a" class="nz mz it ny b gy op oq l or os">sudo apt-get install python3-dev</span></pre><p id="cf4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们得到ALSA发展一揽子计划:</p><pre class="kj kk kl km gt ol ny om on aw oo bi"><span id="1289" class="nz mz it ny b gy op oq l or os">sudo apt-get install libasound2-dev</span></pre><p id="6a16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成安装后，继续下一节，开始编写一些Python代码。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="903e" class="my mz it bd na nb nc nd ne nf ng nh ni jz nj ka nk kc nl kd nm kf nn kg no np bi translated">2.履行</h1><h2 id="ac21" class="nz mz it bd na oa ob dn ne oc od dp ni li oe of nk lm og oh nm lq oi oj no ok bi translated">导入</h2><p id="b605" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">首先，在Python文件的顶部添加以下导入声明:</p><pre class="kj kk kl km gt ol ny om on aw oo bi"><span id="f36d" class="nz mz it ny b gy op oq l or os">import simpleaudio as sa</span></pre><h2 id="b4c1" class="nz mz it bd na oa ob dn ne oc od dp ni li oe of nk lm og oh nm lq oi oj no ok bi translated">波浪物体</h2><p id="83b5" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">下一步是创建一个<code class="fe nv nw nx ny b">WaveObject</code>。基于<a class="ae ky" href="https://simpleaudio.readthedocs.io/en/latest/simpleaudio.html" rel="noopener ugc nofollow" target="_blank">文档</a>，一个<code class="fe nv nw nx ny b">WaveObject</code>代表准备好回放的音频片段。它封装了音频数据缓冲区、回放参数(如采样率)，并提供了启动回放的方法。它接受以下输入参数。</p><ul class=""><li id="1003" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated"><code class="fe nv nw nx ny b">audio_data</code> —带有音频数据的对象(必须支持缓冲接口)</li><li id="9288" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated"><code class="fe nv nw nx ny b">num_channels</code> ( <em class="ly"> int </em> ) —音频通道的数量</li><li id="88fe" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated"><code class="fe nv nw nx ny b">bytes_per_sample</code> ( <em class="ly"> int </em> ) —每个单通道样本的字节数</li><li id="93fc" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated"><code class="fe nv nw nx ny b">sample_rate</code> ( <em class="ly"> int </em> ) —采样率，单位为赫兹</li></ul><p id="3dee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，这个模块还为我们提供了<code class="fe nv nw nx ny b">from_wave_file</code>函数，允许我们输入文件路径，它会将相应的数据加载到<code class="fe nv nw nx ny b">WaveObject</code>中。在Python文件中添加以下代码。根据您拥有的内容修改输入路径:</p><pre class="kj kk kl km gt ol ny om on aw oo bi"><span id="a4b9" class="nz mz it ny b gy op oq l or os">wave_obj = sa.WaveObject.from_wave_file('alarm.wav')</span></pre><p id="86c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">强烈建议使用一个<code class="fe nv nw nx ny b">wav</code>文件作为输入。如果您碰巧有一个<code class="fe nv nw nx ny b">mp3</code>而不是<code class="fe nv nw nx ny b">wav</code>，那么只需将其转换为一个<code class="fe nv nw nx ny b">wav</code>文件即可。</p><h2 id="8c14" class="nz mz it bd na oa ob dn ne oc od dp ni li oe of nk lm og oh nm lq oi oj no ok bi translated">玩</h2><p id="3609" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">下一步是调用<code class="fe nv nw nx ny b">play</code>函数:</p><pre class="kj kk kl km gt ol ny om on aw oo bi"><span id="53ab" class="nz mz it ny b gy op oq l or os">play_obj = wave_obj.play()</span></pre><p id="3b27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个函数将返回一个<code class="fe nv nw nx ny b">PlayObject</code>，它主要处理音频播放任务，比如停止和检查是否还在播放。最后，添加下面的函数，您可以运行这个Python文件来测试音频回放。对play函数的多次调用将在后台异步并行运行所有回放。</p><pre class="kj kk kl km gt ol ny om on aw oo bi"><span id="cf80" class="nz mz it ny b gy op oq l or os">play_obj.wait_done()</span></pre><h2 id="f35e" class="nz mz it bd na oa ob dn ne oc od dp ni li oe of nk lm og oh nm lq oi oj no ok bi translated">正在播放</h2><p id="f0bc" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">要检查<code class="fe nv nw nx ny b">PlayObject</code>是否还在播放，可以调用<code class="fe nv nw nx ny b">is_playing</code>函数:</p><pre class="kj kk kl km gt ol ny om on aw oo bi"><span id="9787" class="nz mz it ny b gy op oq l or os">play_obj.is_playing()</span></pre><h2 id="8383" class="nz mz it bd na oa ob dn ne oc od dp ni li oe of nk lm og oh nm lq oi oj no ok bi translated">停止</h2><p id="7b88" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">虽然在编写时没有提供暂停或恢复功能，但您仍然可以使用<code class="fe nv nw nx ny b">stop</code>功能来结束音频播放:</p><pre class="kj kk kl km gt ol ny om on aw oo bi"><span id="f335" class="nz mz it ny b gy op oq l or os">play_obj.stop()</span></pre><p id="0e45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有一个全局<code class="fe nv nw nx ny b">stop_all</code>功能可以停止所有现有的回放:</p><pre class="kj kk kl km gt ol ny om on aw oo bi"><span id="0700" class="nz mz it ny b gy op oq l or os">simpleaudio.stop_all()</span></pre><p id="5560" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看以下要点，了解异步工作方式的概况:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="9b80" class="my mz it bd na nb nc nd ne nf ng nh ni jz nj ka nk kc nl kd nm kf nn kg no np bi translated">3.结论</h1><p id="b407" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">让我们回顾一下今天所学的内容。</p><p id="c6b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们通过pip安装开始安装<code class="fe nv nw nx ny b">simpleaudio</code>模块。为Linux用户安装了额外的包，如Python和ALSA开发。</p><p id="d243" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们深入探讨了所提供的可用功能。我们创建了一个<code class="fe nv nw nx ny b">WaveObject</code>来读取和加载一个<code class="fe nv nw nx ny b">wav</code>文件。然后，我们播放它，并获得了一个可以用来控制音频播放的<code class="fe nv nw nx ny b">PlayObject</code>。</p><p id="a82f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢你阅读这篇文章。希望在下一篇文章中再见到你！</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="fdd9" class="my mz it bd na nb nc nd ne nf ng nh ni jz nj ka nk kc nl kd nm kf nn kg no np bi translated">参考</h1><ol class=""><li id="e4bb" class="mc md it lb b lc nq lf nr li ov lm ow lq ox lu mq mi mj mk bi translated"><a class="ae ky" href="https://github.com/hamiltron/py-simple-audio" rel="noopener ugc nofollow" target="_blank"> SimpleAudio GitHub </a></li><li id="4eb7" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mq mi mj mk bi translated"><a class="ae ky" href="https://simpleaudio.readthedocs.io/en/latest/index.html" rel="noopener ugc nofollow" target="_blank">简单音频文档</a></li></ol></div></div>    
</body>
</html>