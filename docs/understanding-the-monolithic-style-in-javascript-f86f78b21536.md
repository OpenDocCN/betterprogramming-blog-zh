# 理解 JavaScript 中的整体风格

> 原文：<https://betterprogramming.pub/understanding-the-monolithic-style-in-javascript-f86f78b21536>

## 用一个动手的词频代码例子

![](img/901007915bed6e3f80f6c2856f6105fd.png)

Julian Hochgesang 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片。

本文是关于使用不同编程风格用 JavaScript 编写程序的系列文章的第一篇。我这个系列的灵感来自《编程风格的 T4 练习》这本书，这本书是计算机科学家 Cristina Videira Lopes 于 2014 年写的。这本书研究了如何使用 Python 编程语言，以 33 种不同的编程风格编写一个特定的计算机程序——一个计算文本的术语频率的程序。

本系列的目标是使用 JavaScript 研究这些编程风格。

您应该学习这些不同的编程风格有几个原因。首先，有许多您可能不熟悉的风格，但是它们可以帮助您解决一个您可能认为用您已经熟悉的编程风格无法解决的问题。

另一个原因是让你意识到这些不同的编程风格。如果你在学校学过计算机编程，你可能只接触到其中的几种风格。然而，你可以学习其他的编程风格，这些风格可能会给你一个新的视角来看待你每天都在努力解决的编程问题。

最后，学习新的编程风格本身就是一项有趣的练习。大多数程序员喜欢编程过程，并且应该渴望学习这些编程风格，纯粹是为了享受编程的乐趣。

让我们从考察第一种编程风格开始: *monolithi* c。

# 整体式编程风格

[单词 monolithic 的一个定义](https://www.merriam-webster.com/dictionary/monolithic)是“铸造成一个整体”整体式程序风格是指没有函数定义或模块定义来将程序分成更小的部分。

要用单片风格编程，你必须回到 20 世纪 60 年代末和 70 年代初。主要的编程语言是 COBOL 和 Fortran。这些语言只有很少的函数库，而且许多语言不允许你定义自己的函数。

程序是以严格的自顶向下的方式编写的，不能被细分成模块或过程，因为编程语言不支持这些特性。当时的许多语言甚至没有结构化循环(`while`或`for`)，所以你能使用的只有`goto`语句和行标签，它们通常是数字。

如果您以前从未见过这样的程序，那么现在停下来在互联网上搜索一些旧的 Fortran 程序是值得的。Wikibooks 有一些早期 Fortran 代码的好例子[。](https://en.wikibooks.org/wiki/Fortran/Fortran_examples#FORTRAN_II,_IV,_and_77_compilers)

这些语言缺乏允许程序员通过定义过程、模块和函数，并使用它们作为更复杂的计算机程序的不太复杂的构件，在他们的程序中创建抽象层的能力。正如你所知道的，能够将长程序分解成更小的部分使得它们更容易编写、理解和调试。

正如 Lopes 在她关于整体风格的章节中所指出的，即使现代语言都有抽象工具，许多程序员仍然最终写出了长长的、完整的程序代码——有时是无意的，有时是有意的。很多时候，程序员会写一大段代码，一旦理解并解决了基本问题，就将其重构为更小的代码块。

通过对整体编程风格的介绍，让我们看看如何使用这种风格编写一个 JavaScript 程序来计算文本中单词的频率。对于文本，我去了古腾堡计划，选择了乔纳森·斯威夫特的*一个谦虚的建议*。

我用 Mozilla 的 Spidermonkey 版本的 JavaScript 编写了这个程序。我喜欢在桌面编程中使用这个版本，因为它具有简单的输入/输出功能，并且没有 Node.js 复杂。如果 Node.js 是您首选的 JavaScript 环境，这个程序应该也能在 node . js 中运行。

# JMWF (JavaScript Monolith 词频)程序

程序是这样的:

以下是文本中最常出现的十个单词的输出:

```
children 18
kingdom 15
thousand 15
country 11
own 10
child 10
hundred 8
parents 7
little 7
shillings 7
```

我比洛佩斯更努力地尝试使用整体风格。我本来可以使用一个`map`数据结构来存储单词和它们的频率，但是我使用了并行数组——一个存储单词，一个存储单词频率。

我只在使用正则表达式清理包含停用词的文件时向诱惑屈服过一次。说到停用词，如果你不熟悉的话，一个[停用词](https://en.wikipedia.org/wiki/Stop_word)是一个从文本中过滤出来的词，因为它在结果中很常见或者不需要或不想要。

我本来可以使用内置数组函数来确定单词是否已经在词频列表中，但是我写了一个循环在数组中查找单词。我还写了自己的 bubble `sort`而不是使用库函数`sort`。

当然，在一个真实的程序中，如果我不想用单一的风格编写，我不会做这些事情。但是因为我试图尽可能地保持整体性，所以我决定放弃任何内置函数(除了正则表达式的一次使用),这将使我的程序不那么整体。

# 结论

正如 Lopes 在她的书中指出的，现代程序员试图避免编写单一代码。然而，当你第一次开始编写程序时，编写完整的代码是很容易的——特别是如果你在做很多规划之前就开始编码的话。但是在一轮整体编码之后，大多数程序员会回去将他们的代码重构为模块、过程和函数。但是，有时候，单一代码没有被重构，这使得包含它的程序更难阅读、理解和调试。

我喜欢向我的编程学生展示单体代码的例子——尤其是早期 Basic 和 Fortran 等较老语言中的例子，这两种语言都是我在 20 世纪 70 年代中期上大学时的第一种编程语言——只是为了让他们感受到我在尝试调试和重写旧的意大利面条式代码时遇到的头痛。

在我的下一篇文章中，我将以不同的风格编写这个程序:T2 烹饪书风格。

感谢阅读。如果你有任何意见或建议，请在评论区留言。