<html>
<head>
<title>Advanced String Formatting in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的高级字符串格式</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/advanced-python-string-formatting-ac0e8fa88b0f?source=collection_archive---------14-----------------------#2022-04-06">https://betterprogramming.pub/advanced-python-string-formatting-ac0e8fa88b0f?source=collection_archive---------14-----------------------#2022-04-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="decb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解Python中format()函数的高级选项。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4f66e1d97c7cc72599bfdb75be409a10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v6nbw3FSJATM7Rtj"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@carlheyerdahl?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卡尔·海尔达尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="9fbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，您将了解字符串格式，以及如何创建一个格式良好的变量字符串，无论是使用简单的连接，还是以更专业的方式使用<code class="fe lv lw lx ly b">format()</code> <strong class="lb iu"> </strong>函数。这里使用了“变量”一词，因为在很多情况下，您可能需要创建一个带有占位符的字符串，您希望根据可用数据来更改这些占位符。现在不要再拖延了，让我们开始吧。</p><p id="a775" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">目录</strong></p><ol class=""><li id="37f8" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated"><a class="ae ky" href="#36d0" rel="noopener ugc nofollow">字符串串联</a></li><li id="8b2b" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><a class="ae ky" href="#44e0" rel="noopener ugc nofollow"> format()函数</a></li><li id="e2ef" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><a class="ae ky" href="#625c" rel="noopener ugc nofollow">带字典和列表的format()函数</a></li><li id="8a98" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><a class="ae ky" href="#e2b5" rel="noopener ugc nofollow">带有类对象的format()函数</a></li><li id="2325" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><a class="ae ky" href="#535f" rel="noopener ugc nofollow">带关键字参数的format()函数</a></li><li id="0608" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><a class="ae ky" href="#0c3d" rel="noopener ugc nofollow">带数字的format()函数</a></li><li id="c4d6" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><a class="ae ky" href="#6b3d" rel="noopener ugc nofollow">带日期和时间的format()函数</a></li></ol><h1 id="36d0" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">1.串并置</h1><p id="4c89" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">要用您的数据创建一个字符串，您可以使用字符串连接，如下所示。假设我们有一个代表学生信息的字典，你想用一句话打印这个信息。</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="dd37" class="no mo it ly b gy np nq l nr ns">student = {'name': 'Adam', 'age': 22, 'year': 4}</span><span id="5a8a" class="no mo it ly b gy nt nq l nr ns">information = 'The student name is ' + student['name'] + ', he is ' + str(student['age']) + ' years old and he is in the ' + str(student['year']) +'th year'</span><span id="1696" class="no mo it ly b gy nt nq l nr ns">print(information)</span></pre><p id="8f1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="9fb1" class="no mo it ly b gy np nq l nr ns">The student name is Adam, he is 22 years old and he is in the 4th year</span></pre><p id="6d7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以看到，前面的方法不容易阅读，如果你有一个整数，你需要把它转换成字符串。此外，你应该记住空格。因此，你必须用一种更实际的方法，这就是为什么你将学习<code class="fe lv lw lx ly b">format().</code></p><h1 id="44e0" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">2.format()函数</h1><p id="28b9" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">要使用它，你需要做的就是给你的字符串句子加上花括号<code class="fe lv lw lx ly b"><strong class="lb iu">{}</strong></code>，然后按照你想要的顺序把信息传递给<code class="fe lv lw lx ly b">format()</code>函数。</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="f1ac" class="no mo it ly b gy np nq l nr ns">student = {'name': 'Adam', 'age': 22, 'year': 4}</span><span id="fb23" class="no mo it ly b gy nt nq l nr ns">information = 'The student name is {} , he is {} years old and he is in the {} th year'.format(student['name'], student['age'], student['year'])</span><span id="ff40" class="no mo it ly b gy nt nq l nr ns">print(information)</span></pre><p id="e058" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="bf75" class="no mo it ly b gy np nq l nr ns">The student name is Adam , he is 22 years old and he is in the 4 th year</span></pre><p id="d5dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，您可以对占位符的顺序进行编号。当您有重复的值时，这很有用。假设学生的电子邮件由<code class="fe lv lw lx ly b">first_name</code>和<code class="fe lv lw lx ly b">last_name</code>组成，你想把<code class="fe lv lw lx ly b">email</code> <strong class="lb iu"> </strong>和<code class="fe lv lw lx ly b">first_name</code> <strong class="lb iu"> </strong>和<code class="fe lv lw lx ly b">last_name</code><strong class="lb iu"/>打印出来，这样你就不需要再传递它们了。</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="a92b" class="no mo it ly b gy np nq l nr ns">student = {'first_name': 'Adam', 'last_name': 'Smith'}</span><span id="42a5" class="no mo it ly b gy nt nq l nr ns">information = 'The student name is {0} {1}, and his email {0}_{1}@email.com'.format(student['first_name'], student['last_name'])</span><span id="03b1" class="no mo it ly b gy nt nq l nr ns">print(information)</span></pre><p id="87e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="a710" class="no mo it ly b gy np nq l nr ns">The student name is Adam Smith, and his email Adam_Smith@email.com</span></pre><h1 id="625c" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">3.带有字典和列表的format()函数</h1><p id="01b5" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">您还可以直接访问花括号<code class="fe lv lw lx ly b"><strong class="lb iu">{}</strong></code>中的字典字段，然后将字典对象传递给<code class="fe lv lw lx ly b">format()<strong class="lb iu"> </strong></code>函数，而不需要在<code class="fe lv lw lx ly b">format()</code>函数中显式确定字典的键。</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="cb63" class="no mo it ly b gy np nq l nr ns">student = {'first_name': 'Adam', 'last_name': 'Smith'}</span><span id="8d18" class="no mo it ly b gy nt nq l nr ns">information = 'The student name is {0[first_name]} {0[last_name]}, and his email {0[first_name]}_{0[last_name]}@email.com '.format(student)</span><span id="cfd1" class="no mo it ly b gy nt nq l nr ns">print(information)</span></pre><p id="89db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="cf89" class="no mo it ly b gy np nq l nr ns">The student name is Adam Smith, and his email Adam_Smith@email.com</span></pre><p id="a29a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，你也可以对列表使用同样的方法</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="f704" class="no mo it ly b gy np nq l nr ns">student_list = ['Adam', 'Smith']</span><span id="62a2" class="no mo it ly b gy nt nq l nr ns">information = 'The student name is {0[0]} {0[1]}, and his email {0[0]}_{0[1]}@email.com'.format(student_list)</span><span id="1c8f" class="no mo it ly b gy nt nq l nr ns">print(information)</span></pre><p id="890e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="adab" class="no mo it ly b gy np nq l nr ns">The student name is Adam Smith, and his email Adam_Smith@email.com</span></pre><h1 id="e2b5" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">4.具有类对象的format()函数</h1><p id="af18" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">假设我们有一个具有这些实例属性的<code class="fe lv lw lx ly b">Student</code> <strong class="lb iu"> </strong>类</p><ul class=""><li id="2878" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu nu mf mg mh bi translated">学生的姓名</li><li id="651c" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu nu mf mg mh bi translated">学生的年龄</li><li id="a83d" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu nu mf mg mh bi translated">他所在的那一年</li></ul><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="e093" class="no mo it ly b gy np nq l nr ns">class Student:<br/>    def  __init__(self, name, age, year):<br/>        self.name = name<br/>        self.age = age<br/>        self.year = year</span></pre><p id="047f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们从<code class="fe lv lw lx ly b">Student</code>类创建一个对象，并打印其属性值。</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="8371" class="no mo it ly b gy np nq l nr ns">s1 = Student('Adam', 23, 5)</span><span id="3795" class="no mo it ly b gy nt nq l nr ns">information = 'The student name is {0.name}, his age is {0.age} and he is in the {0.year}th year'.format(s1)</span><span id="bdf7" class="no mo it ly b gy nt nq l nr ns">print(information)</span></pre><p id="2bf2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="7cc0" class="no mo it ly b gy np nq l nr ns">The student name is Adam, his age is 23 and he is in the 5th year</span></pre><h1 id="535f" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">5.带有关键字参数的format()函数</h1><p id="e3cd" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">您可以将关键字参数传递给花括号<code class="fe lv lw lx ly b">{}</code>，如下所示。</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="1a35" class="no mo it ly b gy np nq l nr ns">information = 'The student name is {name}, his age is {age} and he is in the {year}th year'.format(name='Adam', age=22, year=4)</span><span id="d570" class="no mo it ly b gy nt nq l nr ns">print(information)</span></pre><p id="4d71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="4ce2" class="no mo it ly b gy np nq l nr ns">The student name is Adam, his age is 22 and he is in the 4th year</span></pre></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><p id="4227" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，您可以解包字典并使用关键字参数。</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="2750" class="no mo it ly b gy np nq l nr ns">student = {'name': 'Adam', 'age': 22, 'year': 4}</span><span id="da75" class="no mo it ly b gy nt nq l nr ns">information = 'The student name is {name} , he is {age} years old and he is in the {year}th year'.format(**student)</span><span id="8f25" class="no mo it ly b gy nt nq l nr ns">print(information)</span></pre><p id="49f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="8e51" class="no mo it ly b gy np nq l nr ns">The student name is Adam , he is 22 years old and he is in the 4th year</span></pre><h1 id="0c3d" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">6。带数字的format()函数</h1><ul class=""><li id="f43d" class="lz ma it lb b lc nf lf ng li oc lm od lq oe lu nu mf mg mh bi translated"><strong class="lb iu">整数</strong></li></ul><p id="2e2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时，我们的数字没有相同的位数，但我们希望以一种漂亮的方式打印它们，通过添加前导零，所有数字都有相同的位数。我们可以添加一个冒号，后跟花括号中的数字。</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="8600" class="no mo it ly b gy np nq l nr ns">numbers = [1, 7, 15, 100]</span><span id="cfce" class="no mo it ly b gy nt nq l nr ns">for x in numbers:<br/>    print('the number is {<strong class="ly iu">:03</strong>}'.format(x))</span></pre><p id="f807" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="7368" class="no mo it ly b gy np nq l nr ns">the number is 001<br/>the number is 007<br/>the number is 015<br/>the number is 100</span></pre><p id="4359" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，如果我们有一个很大的数字，您可以使用逗号分隔数字，使其更具可读性。</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="03b6" class="no mo it ly b gy np nq l nr ns">print('the number is {:,}'.format(5000000000000))</span></pre><p id="83a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="626a" class="no mo it ly b gy np nq l nr ns">the number is 5,000,000,000,000</span></pre></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><ul class=""><li id="7499" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu nu mf mg mh bi translated"><strong class="lb iu">浮动</strong></li></ul><p id="1462" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有些浮点数有许多十进制数字，如果您不想打印所有的数字，您可以按如下方式指定十进制数字的位数。</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="ea3c" class="no mo it ly b gy np nq l nr ns">e = 2.7182818284590452353602874713526<br/>print('the number is {:<strong class="ly iu">.3f</strong>}'.format(e))</span></pre><p id="474d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="65e7" class="no mo it ly b gy np nq l nr ns">the number is 2.718</span></pre><h1 id="6b3d" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated"><strong class="ak"> 7。带日期和时间的format()函数</strong></h1><p id="bf17" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated"><code class="fe lv lw lx ly b">format()</code>功能还可以帮助您处理日期和时间，并以您想要的方式打印出来。因此，让我们创建一个DateTime对象，并以“月日，年—小时:分钟:秒”的方式打印它。</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="620b" class="no mo it ly b gy np nq l nr ns">import datetime</span><span id="929c" class="no mo it ly b gy nt nq l nr ns">obj = datetime.datetime(2022, 4, 5, 11, 25, 17)<br/>information = '{:%B %d,%Y - %H : %M : %S}'.format(obj)</span><span id="4eec" class="no mo it ly b gy nt nq l nr ns">print(information)</span></pre><p id="e33c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt nk ly nl nm aw nn bi"><span id="b3b2" class="no mo it ly b gy np nq l nr ns">April 05,2022 - 11 : 25 : 17</span></pre><p id="fd11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里了解更多关于日期和时间格式<a class="ae ky" href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes" rel="noopener ugc nofollow" target="_blank">中使用的符号。</a></p><p id="5746" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！！现在让我们继续讨论文章摘要。</p></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><p id="2020" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，您已经了解到:</p><ul class=""><li id="b60e" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu nu mf mg mh bi translated">如何使用简单的字符串连接创建格式化字符串。</li><li id="bf83" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu nu mf mg mh bi translated">如何使用<code class="fe lv lw lx ly b">format()</code>函数创建格式化字符串？</li><li id="aef9" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu nu mf mg mh bi translated">如何将<code class="fe lv lw lx ly b">format()</code>函数用于字典、列表、对象、数字以及日期和时间。</li></ul></div></div>    
</body>
</html>