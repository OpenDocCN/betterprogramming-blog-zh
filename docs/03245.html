<html>
<head>
<title>Geolocation and Geocodes in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的地理定位和地理编码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/geolocation-and-geocodes-in-python-e71e056ffaea?source=collection_archive---------13-----------------------#2020-01-29">https://betterprogramming.pub/geolocation-and-geocodes-in-python-e71e056ffaea?source=collection_archive---------13-----------------------#2020-01-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="17ca" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">找到你需要的地址</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/71f0ec5244a7ecf883eb0bcf4d806a45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IcF66GWMdozhDOSC"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@marjan_blan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">марьянблан| @ marjanblan</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="492f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">找到一个不需要或不使用地理定位或不处理用户地址的应用程序可能是一个挑战。这确实是一个有用的特性，希望将它添加到您自己的服务中是可以理解的。</p><p id="82b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，让我介绍几个来自一对Python包的命令，它们使得与地理数据的交互更加容易。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2cd1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.获取当前位置</h1><p id="cd52" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们将使用<a class="ae ky" href="https://github.com/DenisCarriere/geocoder" rel="noopener ugc nofollow" target="_blank">地理编码器包</a>来获取当前位置，因为它有一个简单的IP地址处理接口。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="dec0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们有靠近我的位置的城市区域的坐标、我的家乡城市名称和国家代码。到目前为止，所有的信息都是正确的。但是，在<code class="fe nb nc nd ne b">g.geojson</code>属性中可以看到更多。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9cea" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.按地理编码定位</h1><p id="f66c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">对我来说，Geocoder对于处理地址有点混乱。相反，我们将使用<a class="ae ky" href="https://geopy.readthedocs.io/en/stable/#" rel="noopener ugc nofollow" target="_blank"> GeoPy库</a>来试试运气，它拥有数量惊人的地理编码服务和API。</p><p id="b424" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们试试默认的一个，名为Nominatim，再次检索坐标。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="5257" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到了靠近市中心的位置。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="dcf3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.按位置进行地理编码</h1><p id="f7ae" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">你也可以反过来尝试这项服务——通过位置获取绑定的地理标签。幸运的是，GeoPy正好提供了这样一个功能。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="800f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更好的是，我们获得了当前地区语言的地址(对我来说很好)。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7dbb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.测量距离</h1><p id="db8e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果你的服务是面向旅行的，那么仅仅知道位置坐标是不够的。我们忽略了他们之间的距离。</p><p id="52b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，GeoPy内置了距离计算功能。比方说，我想去看埃菲尔铁塔:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="62a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我从我的家乡开始:</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="cdfa" class="nj md it ne b gy nk nl l nm nn">loc_dnipro = geolocator.geocode("Dnipro, Dnipropetrovsk, UA")</span></pre><p id="7421" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我应该走多远？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="683d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者以英里为单位，如果你喜欢的话:</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="2b04" class="nj md it ne b gy nk nl l nm nn">Out[7]: 1487.520100400978</span></pre><p id="9421" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对我来说太远了，但我们有相当精确的测量。并且库有<a class="ae ky" href="https://geopy.readthedocs.io/en/stable/#module-geopy.distance" rel="noopener ugc nofollow" target="_blank">更多的算法</a>用于计算。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="68f4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="a15f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这是一个简短的介绍，但是您可以深入到这两个包的文档中并找到更多信息。您可以在我的GitHub中找到整个工作笔记本:</p><div class="no np gp gr nq nr"><a href="https://github.com/Midvel/medium_jupyter_notes/blob/master/geocode_and_distance/geocode-and-distance.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">中级/中等_jupyter_notes</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">github.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of ks nr"/></div></div></a></div><p id="9414" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你使用了哪些有用的地理编码和位置技巧？</p></div></div>    
</body>
</html>