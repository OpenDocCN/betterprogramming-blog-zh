<html>
<head>
<title>Your Code Should Read Like a Book</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你的代码应该读起来像一本书</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/your-code-should-read-like-a-book-873b27f71fe5?source=collection_archive---------4-----------------------#2020-08-07">https://betterprogramming.pub/your-code-should-read-like-a-book-873b27f71fe5?source=collection_archive---------4-----------------------#2020-08-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e73f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这让所有相关人员的生活变得更加轻松</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/40428e4b526bfbbc312932d992b586b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*J2kQMQ0eSTSKzuRn"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">法比安·格罗斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="defc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">程序员中有一个疫情。长函数、函数、类和变量名的宽泛和不可描述的名称、过度注释的代码、混乱的结构以及缺乏整体的流线型流程。</p><p id="710f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我经常偷看别人的工作代码，只是为了注意到我必须付出巨大的努力，只是为了首先理解它是做什么的。</p><p id="77bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我必须尽我最大的努力去推理模糊的变量名，比如<em class="lv"> i，k，num，counter，</em>等等。我们代表什么类型的数字，围绕它的操作的目的是什么？<em class="lv">计数器</em>的用途是什么？它在追踪什么？为什么会在那里？</p><p id="b11a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我必须不断地在整个类中跳转，以查看每个函数是如何在它周围的其他函数之上构建的，只是为了意识到每个函数的名称并没有真正告诉我该函数做了什么。</p><p id="de8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时我甚至不得不阅读解释一个函数可能做什么的注释段落，但我仍然不应该阅读一篇文章来简单地理解一个函数做什么。我应该能够简单地通过快速浏览一下这个函数来进行推理。</p><p id="808c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的代码应该读起来像一本书。正如一本书是如何通过段落和章节来组织的，这些段落和章节遵循一个描述性的故事，以一种精简和渐进的方式流动，您的代码应该以这样一种方式来组织和设计，即我可以进入一个班级，并且能够在参与的时刻理解它的目的。请不要让任何一个开发者，包括你自己，在看你的代码的时候，为了推断你写的东西背后的目的和意义，而不得不去具体化夏洛克·福尔摩斯。</p><p id="431e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">具体应该怎么做？</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="6e0b" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">通过有意义的名称对代码进行自我注释</h1><p id="0502" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">代码应该是自注释的，这意味着函数、类和变量的名字应该是描述性的，注释是完全不必要的。写得很差的代码的一个明显标志是它需要注释。</p><p id="7738" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">停止缩写名字(除非缩写的翻译是显而易见的)，停止使用字母作为变量，开始写名字时要准确描述函数或变量的用途。这些名字必须既能揭示意图，又容易发音。</p><p id="6a7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本质上，不要只写只有计算机会读的代码。编写人类可读的代码。这在实践中非常简单，但是你会发现你会对你写的所有东西的命名考虑得更多，这将允许你更好地思考你编程的意图，这最终将影响你的代码的流畅生成。</p><blockquote class="na"><p id="e56e" class="nb nc it bd nd ne nf ng nh ni nj lu dk translated">“一个长的描述性的名字比一个短的谜一样的名字要好。一个长的描述性名称比一个长的描述性注释要好。</p><p id="cab8" class="nb nc it bd nd ne nf ng nh ni nj lu dk translated">― <strong class="ak">罗伯特·c·马丁，</strong> <a class="ae ky" href="https://amzn.to/39I7QaU" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">干净代码:敏捷软件工艺手册</strong> </a></p></blockquote><p id="b0b0" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">如果您仍然不理解，这里有一个我用值填充选项列表的简单示例(语言在Salesforce的Apex中，但您仍然应该理解我试图传达的要点):</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="b9d7" class="nu me it nq b gy nv nw l nx ny">public static final Integer YEARS_IN_SCHOOL = 12;<br/>public static final Integer GRADUATION_MONTH = 6;</span><span id="37ba" class="nu me it nq b gy nz nw l nx ny">private List&lt;Integer&gt; getGradYearPicklistValues() {<br/>    List&lt;Integer&gt; gradYearValuesList <br/>            = new List&lt;Integer&gt;();<br/>    Integer earliestYearInPicklist = Date.<em class="lv">today</em>().year();<br/>    Integer latestYearInPicklist <br/>            = earliestYearInPicklist + <em class="lv">YEARS_IN_SCHOOL</em>;<br/>    if (Date.<em class="lv">today</em>().month() &gt;= <em class="lv">GRADUATION_MONTH</em>) {<br/>        earliestYearInPicklist += 1;<br/>        latestYearInPicklist += 1;<br/>    }<br/>    for (Integer year = earliestYearInPicklist; year &lt;= latestYearInPicklist; year++) {<br/>        gradYearValuesList.add(year);<br/>    }<br/>    return gradYearValuesList;<br/>}</span></pre><p id="0b48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如你所看到的，我使用了非常描述性的变量名和描述性的函数名，这样我们就能确切地知道每个变量的用途，以及这个函数的用途。对于其他开发人员来说，推断这个函数到底在做什么变得非常容易。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="be0f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">有组织的自顶向下的代码结构</h1><p id="f6ad" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">你编写代码的方式直接反映了你在编写代码时的思考程度、对细节的关注程度和付出的努力。当其他人来审查你的代码时，你希望他们对代码的整洁、有序和可读性印象深刻。你最不希望的事情就是交付一个杂乱无序的代码的整体墙，一眼看上去就像是用白爪子和百威灯敲打出来的。这只会导致一个结论，即代码中没有考虑或关注任何细节，这最终会影响到你。</p><p id="e0bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">罗伯特·C·马丁的<a class="ae ky" href="https://amzn.to/39I7QaU" rel="noopener ugc nofollow" target="_blank"> <em class="lv">干净的代码</em> </a>(顺便说一下，这是一本所有程序员都应该读的书)中的报纸比喻最好地解释了你应该如何格式化你的代码:</p><blockquote class="oa ob oc"><p id="ca82" class="kz la lv lb b lc ld ju le lf lg jx lh od lj lk ll oe ln lo lp of lr ls lt lu im bi translated">“想起一篇写得很好的报纸文章。你垂直阅读它。在顶部，你希望标题能告诉你故事的内容，并让你决定它是否是你想读的。第一段给你整个故事的梗概，隐藏所有的细节，同时给你大概的概念。随着你继续往下，细节会增加，直到你有了所有的日期、名字、引用、声明和其他细节。我们希望源文件像报纸上的文章一样。”</p></blockquote><p id="6468" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这告诉我们什么？我们的班级名称就是我们的标题——它将描述我们在班级中可以找到的内容。在这个类的顶部，我们将找到我们的高级概念和算法，当我们遍历这个类时，我们应该看到细节越来越多，直到我们找到最低级别的函数。</p><p id="c854" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们如何遵循这个结构？实际上，这很简单。我们本质上希望最重要的细节首先出现，并用最精确和简洁的细节向下表达这些概念。任何被调用的函数都应该放在进行调用的函数的正下方。如果一个函数太大(我的经验是将函数保持在20-25行以下)，将它分解成更小的函数，这样就可以完全清楚几行代码在处理什么。通常大的函数表明函数做的太多了，开始变得混乱，所以这就是我们这样做的原因。为了更好的描述。更加整洁有序。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="bcdd" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">外卖食品</h1><p id="90ed" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">编程本身就是一项非常具有精神挑战性的工作，我知道优秀的可读代码的重要性很容易被忽视，因为我们太沉迷于编程，以至于完全忘记了它的艺术和设计。后退一步，想想你在做什么——意图、整洁和可读性。它不仅能帮助你更好地理解你写的代码，还能帮助其他人更好地理解它。最终，你会因此成为一名更好、更受尊敬的程序员。谁知道呢，你可能会因为做出一些漂亮的东西而得到一些赞扬。</p></div></div>    
</body>
</html>