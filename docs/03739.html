<html>
<head>
<title>Implement the Builder Design Pattern in Swift 5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Swift 5中实施构建器设计模式</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/implement-the-builder-design-pattern-in-swift-5-ff5bc6f2fc3d?source=collection_archive---------8-----------------------#2020-03-02">https://betterprogramming.pub/implement-the-builder-design-pattern-in-swift-5-ff5bc6f2fc3d?source=collection_archive---------8-----------------------#2020-03-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a363" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">创建和使用自定义URLRequests和URLSessionDataTasks</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/12a4cf73535c1d2e80a2edc82d93975f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hl45EE_anQg4dx3J"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Artem Labunsky 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="061d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，我们将学习构建器设计模式，并用它实现一个<code class="fe lv lw lx ly b">URLRequest</code>和<code class="fe lv lw lx ly b">URLSessionDataTask</code>。</p><p id="b4f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个Xcode游乐场的<a class="ae ky" href="https://github.com/zafarivaev/Builder-DesignPattern" rel="noopener ugc nofollow" target="_blank">源代码可以在GitHub上获得。</a></p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="a828" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">模式的定义</h1><p id="6c6d" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">Builder帮助我们以渐进的方式构造复杂的对象，而不是将每个设置都放入初始化器中。它包括以下几个部分:</p><ul class=""><li id="ef90" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated">产品——我们想要创建的对象。</li><li id="f2ac" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">构建器—将构建并返回产品的组件。</li><li id="bf76" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">director——引用构建器并处理返回产品的类。</li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="be2b" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">我们开始吧</h1><p id="828c" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们的项目代表了GitHub的一个REST API客户端。它所做的是一个简单的任务:获取JSON格式的存储库列表。</p><h2 id="731b" class="nr mh it bd mi ns nt dn mm nu nv dp mq li nw nx ms lm ny nz mu lq oa ob mw oc bi translated">产品</h2><p id="fefc" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><code class="fe lv lw lx ly b">URLRequest</code>和<code class="fe lv lw lx ly b">URLSessionDataTask</code>代表产品组件，所以我们不必为它们创建单独的结构或类，因为它们已经存在了。</p><p id="54f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们添加一些有用的属性供以后使用:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="0015" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们来看下一个组件。</p><h2 id="35e5" class="nr mh it bd mi ns nt dn mm nu nv dp mq li nw nx ms lm ny nz mu lq oa ob mw oc bi translated">建设者</h2><p id="def2" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">首先，我们为<code class="fe lv lw lx ly b">URLRequest</code>创建一个构建器:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="0bf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们所看到的，我们将使用各种各样的<code class="fe lv lw lx ly b">set</code>方法来分配属性，然后在<code class="fe lv lw lx ly b">build()</code>方法中返回构造的对象。</p><p id="95ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">baseURL</code>、<code class="fe lv lw lx ly b">endpoint</code>、<code class="fe lv lw lx ly b">method</code>、<code class="fe lv lw lx ly b">header</code>和<code class="fe lv lw lx ly b">parameters</code>属性被定义为<code class="fe lv lw lx ly b">private(set)</code>，以禁止从类外部对它们进行直接赋值。导演将不得不使用已定义的<code class="fe lv lw lx ly b">set</code>方法。</p><p id="0eaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，为<code class="fe lv lw lx ly b">URLSessionDataTask</code>创建一个构建器:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="6be9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构建器部分完成后，让我们创建最后一个组件。</p><h2 id="5cf8" class="nr mh it bd mi ns nt dn mm nu nv dp mq li nw nx ms lm ny nz mu lq oa ob mw oc bi translated">导演</h2><p id="2240" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们项目中的<code class="fe lv lw lx ly b">Director</code>是一个<code class="fe lv lw lx ly b">UIViewController</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="9c05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们添加<code class="fe lv lw lx ly b">[“q”: “Builder Design Pattern”]</code>参数来搜索GitHub上的相关存储库。</p><p id="78fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们必须实例化<code class="fe lv lw lx ly b">ViewController</code>并将这些行添加到我们的Xcode playground中，以使<code class="fe lv lw lx ly b">viewDidLoad()</code>方法成功运行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="afaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们可以在调试控制台中看到打印的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/d8d3e8f86928808e9809bb30a63b78c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dB5qxEHe-T_Nd1WO-eiiaw.png"/></div></div></figure><p id="758d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经成功地实现了生成器设计模式。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="6137" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">包扎</h1><p id="0196" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">对其他设计模式感兴趣？请随意查看我的其他相关作品:</p><div class="og oh gp gr oi oj"><a href="https://medium.com/better-programming/implement-the-strategy-design-pattern-in-swift-5d9c3f221277" rel="noopener follow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd iu gy z fp oo fr fs op fu fw is bi translated">在Swift中实施战略设计模式</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">只需一行代码就可以在领域和核心数据之间切换</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">medium.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox ks oj"/></div></div></a></div><div class="og oh gp gr oi oj"><a href="https://medium.com/better-programming/this-is-how-you-implement-mvc-architecture-in-2020-b39d65b4212f" rel="noopener follow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd iu gy z fp oo fr fs op fu fw is bi translated">新MVC:单一责任原则和委托</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">苹果的模型视图控制器，终于做对了</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">medium.com</p></div></div><div class="os l"><div class="oy l ou ov ow os ox ks oj"/></div></div></a></div><div class="og oh gp gr oi oj"><a href="https://medium.com/better-programming/implement-a-model-view-presenter-architecture-in-swift-5-dfa21bbb8e0b" rel="noopener follow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd iu gy z fp oo fr fs op fu fw is bi translated">在Swift 5中实施模型-视图-演示者架构</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">使用领域数据库作为业务逻辑层</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">medium.com</p></div></div><div class="os l"><div class="oz l ou ov ow os ox ks oj"/></div></div></a></div><div class="og oh gp gr oi oj"><a href="https://medium.com/better-programming/reactive-mvvm-and-the-coordinator-pattern-done-right-88248baf8ca5" rel="noopener follow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd iu gy z fp oo fr fs op fu fw is bi translated">反应式MVVM和协调模式做对了</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">使用Swift 5、RxSwift和RxDataSources</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">medium.com</p></div></div><div class="os l"><div class="pa l ou ov ow os ox ks oj"/></div></div></a></div><div class="og oh gp gr oi oj"><a href="https://medium.com/better-programming/how-to-implement-viper-architecture-in-your-ios-app-rest-api-and-kingfisher-f494a0891c43" rel="noopener follow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd iu gy z fp oo fr fs op fu fw is bi translated">如何使用Swift 5在您的iOS应用中实现VIPER架构</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">使用方便的Xcode模板和参考报告</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">medium.com</p></div></div><div class="os l"><div class="pb l ou ov ow os ox ks oj"/></div></div></a></div><div class="og oh gp gr oi oj"><a href="https://medium.com/better-programming/implement-a-service-oriented-architecture-in-swift-5-fc70b8117616" rel="noopener follow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd iu gy z fp oo fr fs op fu fw is bi translated">在Swift 5中实施面向服务的架构</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">为什么只用MVC/MVVM/蝰蛇还不够</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">medium.com</p></div></div><div class="os l"><div class="pc l ou ov ow os ox ks oj"/></div></div></a></div><p id="6eaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>