<html>
<head>
<title>Native Modules: Export Objective C Modules to React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">本机模块:导出目标C模块以本机反应</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/native-modules-objective-c-to-react-native-for-beginners-9ec49ac5ca65?source=collection_archive---------7-----------------------#2022-06-03">https://betterprogramming.pub/native-modules-objective-c-to-react-native-for-beginners-9ec49ac5ca65?source=collection_archive---------7-----------------------#2022-06-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0e76" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">连接Objective-C以反应本机</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c077cd61fe668130e38d41fe3a7cf0db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0YtpRDW32fcHOgMlF2vHTg.png"/></div></div></figure><p id="c28c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了继续与从事移动开发的初学者分享我关于本机模块的知识，本文展示了一个简单的例子，说明如何使用objective C编写应用程序并将其导出到React Native。我们从一个新的React原生应用开始:</p><h1 id="4f4f" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated"><strong class="ak"> 1。创建一个新的React原生应用</strong></h1><pre class="kg kh ki kj gt mf mg mh mi aw mj bi"><span id="7756" class="mk lo iq mg b gy ml mm l mn mo">npx react-native init NativeModules</span></pre><h1 id="2c26" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated"><strong class="ak"> 2。打开Xcode </strong></h1><pre class="kg kh ki kj gt mf mg mh mi aw mj bi"><span id="a764" class="mk lo iq mg b gy ml mm l mn mo">NativeModules/ios/NativeModule.xcworkspace</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/7f043b7c2a4e4b87b59f5cf7d9ecbd7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kZSH7I9obEfsBZ_d.png"/></div></div></figure><h1 id="b177" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated"><strong class="ak"> 3。创建一个头文件，并将其命名为<em class="mq"> 'ObjC_to_RN.h' </em> </strong></h1><p id="fd11" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">现在，我们需要将我们的<code class="fe mw mx my mg b">@interface</code>类声明为<code class="fe mw mx my mg b">NSObject</code>，它将被导出到React Native端:</p><pre class="kg kh ki kj gt mf mg mh mi aw mj bi"><span id="3ad8" class="mk lo iq mg b gy ml mm l mn mo">// <strong class="mg ir"><em class="mz">ObjC_to_RN.h</em></strong></span><span id="ff54" class="mk lo iq mg b gy na mm l mn mo">#import &lt;React/RCTBridgeModule.h&gt;</span><span id="7946" class="mk lo iq mg b gy na mm l mn mo"><strong class="mg ir">@interface</strong> SampleClass : NSObject &lt;RCTBridgeModule&gt;</span><span id="01fa" class="mk lo iq mg b gy na mm l mn mo"><strong class="mg ir">@end</strong></span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/19836266b994dcdae0947bc1b3eb75ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0cFJv9H3M1Sx9EnVyZfqCg.png"/></div></div></figure><h1 id="e6b6" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated"><strong class="ak"> 4。创建一个Objective-C文件，并将其命名为<em class="mq"> 'ObjC_to_RN.m' </em> </strong></h1><ul class=""><li id="ecfe" class="nc nd iq kt b ku mr kx ms la ne le nf li ng lm nh ni nj nk bi translated">我们从<code class="fe mw mx my mg b">ObjC_to_RN.h</code>导入<code class="fe mw mx my mg b">@interface</code>类</li><li id="d26c" class="nc nd iq kt b ku nl kx nm la nn le no li np lm nh ni nj nk bi translated">我们创建了一个<code class="fe mw mx my mg b">@implement</code>类，它包含了我们想要导出来本地反应的模块和方法</li><li id="e7b7" class="nc nd iq kt b ku nl kx nm la nn le no li np lm nh ni nj nk bi translated">写一个简单的函数</li><li id="9d07" class="nc nd iq kt b ku nl kx nm la nn le no li np lm nh ni nj nk bi translated">包装上面的函数并将其导出到react-native</li></ul><pre class="kg kh ki kj gt mf mg mh mi aw mj bi"><span id="e53d" class="mk lo iq mg b gy ml mm l mn mo">//<strong class="mg ir"><em class="mz">ObjC_to_RN.m</em></strong><br/>#import &lt;Foundation/Foundation.h&gt;<br/>#import "ObjC_to_RN.h"</span><span id="548f" class="mk lo iq mg b gy na mm l mn mo"><a class="ae nq" href="http://twitter.com/implementation" rel="noopener ugc nofollow" target="_blank">@implementation</a> SampleClass</span><span id="c553" class="mk lo iq mg b gy na mm l mn mo">RCT_EXPORT_MODULE();</span><span id="0297" class="mk lo iq mg b gy na mm l mn mo">- (NSString *)hello{<br/>NSLog( @"Hello world !");<br/>return @"Hello world !";<br/>}</span><span id="25a5" class="mk lo iq mg b gy na mm l mn mo">RCT_EXPORT_METHOD(sayHello: (RCTResponseSenderBlock)callback{<br/>callback(@[[NSNull null], self.hello]);<br/>});</span><span id="eebc" class="mk lo iq mg b gy na mm l mn mo"><a class="ae nq" href="http://twitter.com/end" rel="noopener ugc nofollow" target="_blank">@end</a></span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/12a2f7f98dca250ae380441608ae6772.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bAFASXmwbxfUoN2PEh_xeg.png"/></div></div></figure><h1 id="fed1" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated"><strong class="ak"> 4。导出目标C模块以反应本机</strong></h1><p id="ba83" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">回到我们的react本地文件夹，打开<code class="fe mw mx my mg b">App.js</code>:</p><pre class="kg kh ki kj gt mf mg mh mi aw mj bi"><span id="05a2" class="mk lo iq mg b gy ml mm l mn mo">import React from 'react';<br/>import {StyleSheet, Text, View, NativeModules, Button} from 'react-native';</span><span id="183f" class="mk lo iq mg b gy na mm l mn mo">const App = () =&gt; {<br/>  const onPress = () =&gt; {<br/>    const {SampleClass} = NativeModules;<br/>    SampleClass.sayHello((_err, res) =&gt; console.log(res));<br/>  };<br/>  return (<br/>    &lt;View style={styles.container}&gt;<br/>      &lt;Text&gt; Practice !&lt;/Text&gt;<br/>      &lt;Button<br/>        title="Objective C to React Native"<br/>        color="#841584"<br/>        onPress={onPress}<br/>      /&gt;<br/>    &lt;/View&gt;<br/>  );<br/>};<br/>const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    justifyContent: 'center',<br/>    alignItems: 'center',<br/>  },<br/>});<br/>export default App;</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/1686eff15751c1d29d4ad30cadba9f90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7uQx-N0WcvGDtBg3waFJvA.png"/></div></div></figure><p id="40af" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们结束了。</p><p id="a634" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我希望我的文章能帮助人们容易理解如何连接objective C并通过Native模块反应Native。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/2d316a22223eaab370884630cfcc3fb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2M5XnZ50OO3oVdgL06wnhw.png"/></div></div></figure><p id="0c46" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢你阅读这篇文章，如果你认为它有帮助，别忘了给我一个掌声。</p></div></div>    
</body>
</html>