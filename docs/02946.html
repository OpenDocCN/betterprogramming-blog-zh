<html>
<head>
<title>Learning To Use Rust Over a 16-Hour Hackathon</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在16小时的黑客马拉松中学习使用Rust</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/learning-to-use-rust-over-a-16-hour-hackathon-5f0ac2f604df?source=collection_archive---------7-----------------------#2020-01-10">https://betterprogramming.pub/learning-to-use-rust-over-a-16-hour-hackathon-5f0ac2f604df?source=collection_archive---------7-----------------------#2020-01-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="973d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">热爱其中的每一刻</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6501de7b4eb3bf24b58ba90c944c5deb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RQ50uLh5v9tfSVWRYG7Bsg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">扭矩！这么大的扭矩！—<a class="ae ky" href="https://unsplash.com/@__matthoffman__?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">马特·霍夫曼</a>在<a class="ae ky" href="https://unsplash.com/s/photos/rust?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="168e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在<a class="ae ky" href="http://www.prodigygame.com/careers" rel="noopener ugc nofollow" target="_blank">天才教育</a>举办了年终黑客马拉松。在2019年的最后两天，团队和个人聚集在一起，将他们的想法付诸实践。</p><p id="3a83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了好玩。</p><p id="7cc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">去学习新的东西。</p><p id="a98c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者证明一个概念或想法。</p><p id="dc9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在过去的几周里，我一直在被动地阅读关于Rust的信息和代码片段，并认为黑客马拉松是接触这种语言的绝佳机会。</p><p id="6090" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">黑客马拉松的时间限制迫使我快速移动和学习，同时解决现实世界的问题。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="284e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">为什么生锈？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/009ece36d75ed377e56e7680ec75c43b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-SJyNKujq4teHLlNXcS7rg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">有机会再一次窥视引擎盖下——照片由<a class="ae ky" href="https://unsplash.com/@timmossholder?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Tim Mossholder </a>在<a class="ae ky" href="https://unsplash.com/s/photos/engine?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="a5e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一名软件专业人员，我花了十年时间使用C和C++。</p><p id="6289" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从积极的方面来说，我喜欢C++这样的语言在静态类型和编译器早期捕捉错误方面提供的清晰度。</p><p id="84ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我个人对C++的看法是:</p><ul class=""><li id="e195" class="mv mw it lb b lc ld lf lg li mx lm my lq mz lu na nb nc nd bi translated">很容易让工程师搬起石头砸自己的脚</li><li id="1019" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">作为一门语言，在我看来已经变得相当臃肿和复杂</li><li id="24df" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">缺乏良好/标准/广泛采用的包管理</li></ul><p id="6e13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自从<a class="ae ky" href="https://medium.com/@siddharth.shankar/getting-to-know-the-cloud-year-1-7bf60eb04013" rel="noopener">我转向构建web应用</a>以来，我一直专门使用Python和JavaScript，使用像Django、Flask和Express这样的框架。</p><p id="0ce9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">到目前为止，我对Python和JavaScript中的现代web应用程序开发栈的经验是，它们提供了良好的应用程序迭代和交付速度，但可能是CPU和内存密集型的，有时甚至是在空闲时。</p><p id="9914" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我确实经常发现自己缺少(写得很好的)编译C++应用程序的类型安全性、速度和精简性。</p><p id="a411" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想探索用一种精简的裸机编程语言(如Rust)开发web应用程序会是什么样子。</p><p id="a964" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没有运行时间。没有垃圾收集。只是内核加载并运行的二进制文件。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0510" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">目标</h1><p id="2740" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">我们的目标是构建一个具有Rust后端和JavaScript + React前端的应用程序，将一个S3桶的内容显示为一个图库。用户将能够:</p><ul class=""><li id="698d" class="mv mw it lb b lc ld lf lg li mx lm my lq mz lu na nb nc nd bi translated">浏览桶中的所有图像(分页可选)</li><li id="e8fb" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">上传图像</li><li id="0774" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">上传过程中为图像添加标签</li><li id="79a6" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">按文件名或标签搜索和过滤</li></ul><p id="2474" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有有趣的黑客马拉松项目都需要一个名字，所以我决定把这个叫做:</p><p id="a8ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">质朴-&gt;铁锈+图像内容</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/b55b7e9c4a9c754cd2a2ae45bfdd3b12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hUItmMX1gdBLya0AwsIW_Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">让我们黑掉一些伟大的东西——克拉克·蒂布斯在<a class="ae ky" href="https://unsplash.com/s/photos/vision?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="3cf4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我能做到以下几点(按优先级降序排列)，我会认为这次黑客马拉松是一次个人成功:</p><ul class=""><li id="87b2" class="mv mw it lb b lc ld lf lg li mx lm my lq mz lu na nb nc nd bi translated">对Rust、其类型系统和记忆模型有基本的了解</li><li id="83a8" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">探索与文件和任意标签的预设计链接相关的S3功能</li><li id="fc05" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">功能性概念验证应用程序</li></ul><p id="75cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我的重点是交付功能性，同时平衡学习，所以我写的很多代码必然倾向于功能性——也就是说，代码组织和效率是次要问题。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9d21" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">生锈的原理</h1><p id="d886" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">在我开始之前，我很想了解语言设计者在创造这种新语言时所考虑的原则。我找到了一个<a class="ae ky" href="https://doc.rust-lang.org/1.4.0/complement-design-faq.html" rel="noopener ugc nofollow" target="_blank">的删节版</a>和一个更详细的版本。</p><p id="272e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与我在很多博客上读到的相反，Rust中的<em class="np">有</em>可能存在内存泄漏(通过不正确设置<a class="ae ky" href="https://doc.rust-lang.org/book/ch15-06-reference-cycles.html" rel="noopener ugc nofollow" target="_blank">参考周期</a>)和执行不安全的操作(在不安全的<em class="np"> </em>块中)。正如详细的Rust FAQ中提到的，</p><blockquote class="nq nr ns"><p id="88f1" class="kz la np lb b lc ld ju le lf lg jx lh nt lj lk ll nu ln lo lp nv lr ls lt lu im bi translated">“我们(语言创造者)并不打算(让Rust)100%静态、100%安全、100%反射。”</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/fff4b2a3ba823631928f4443e7b53f4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wU31RD90to43G-u_-XkXUg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">炫目、复杂、精致——像铁锈一样——照片由<a class="ae ky" href="https://unsplash.com/@mavinmatt?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">马特·理查森</a>在<a class="ae ky" href="https://unsplash.com/collections/3417813/principles-of-design?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4c94" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">后端入门</h1><p id="9145" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">在谷歌上搜索“Rust web framework ”,搜索结果是“火箭T6 ”( Rocket)T7。我深入网站，发现文档和示例看起来布局合理且全面。</p><p id="ec53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Rocket需要注意的一点是，它需要Rust的夜间版本才能运行。在黑客马拉松的背景下没什么大不了的。</p><p id="9f72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">GitHub <a class="ae ky" href="https://github.com/SergioBenitez/Rocket/tree/v0.4" rel="noopener ugc nofollow" target="_blank"> repo </a>有很多例子。完美。</p><p id="d344" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我使用<a class="ae ky" href="https://doc.rust-lang.org/cargo/" rel="noopener ugc nofollow" target="_blank"> Cargo </a>建立一个新项目，在TOML文件中添加Rocket作为依赖项，并按照Rocket的<a class="ae ky" href="https://rocket.rs/v0.4/guide/getting-started/" rel="noopener ugc nofollow" target="_blank">入门</a>指南中的说明，建立一条路线:</p><pre class="kj kk kl km gt nx ny nz oa aw ob bi"><span id="77dd" class="oc md it ny b gy od oe l of og">#[get("/")]<br/>fn index() -&gt; &amp;'static str {<br/>    "Hello, world!"<br/>}<br/><br/>fn main() {<br/>    rocket::ignite().mount("/", routes![index]).launch();<br/>}</span></pre><p id="872d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于熟悉Django，Flask，Express等的人来说。，这应该看起来非常可读。作为Rocket用户，您使用宏作为函数的装饰者，将路径映射到处理函数。</p><p id="573f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在编译时，宏被展开。这对你来说是完全透明的。如果你想看看扩展的代码，可以利用<a class="ae ky" href="https://github.com/dtolnay/cargo-expand" rel="noopener ugc nofollow" target="_blank"> cargo-expand </a> crate。</p><p id="49a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我用Rust构建应用程序的有趣/具有挑战性的亮点:</p><h2 id="7369" class="oc md it bd me oh oi dn mi oj ok dp mm li ol om mo lm on oo mq lq op oq ms or bi translated">指定路由响应</h2><p id="9aa4" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">我希望我的内容路由通过返回一个JSON数据结构来列出S3桶中的所有文件。</p><p id="8847" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意(在下面的代码中),如何查看与路由相关联的函数处理程序来立即确定响应形状。</p><p id="a87e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">制作响应形状非常容易。如果您认为JSON数据是一个具有字段的结构，其中每个字段又可以包含自己的结构和字段，那么这很好地映射到Rust <code class="fe os ot ou ny b">struct</code> <em class="np">。</em></p><p id="63e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，您所要做的就是定义构成响应数据形状的<code class="fe os ot ou ny b">struct</code> (s ),并用以下内容标记每个T1:</p><pre class="kj kk kl km gt nx ny nz oa aw ob bi"><span id="0db3" class="oc md it ny b gy od oe l of og">#[derive(Serialize)]</span></pre><p id="6b64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">标记有<code class="fe os ot ou ny b">#[derive(Serialize)]</code> <em class="np"> </em>的<code class="fe os ot ou ny b">struct</code> (s)可以从<code class="fe os ot ou ny b">rocket_contrib::json::Json</code><em class="np"/>传递给JSON函数，我们走吧！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><h2 id="9155" class="oc md it bd me oh oi dn mi oj ok dp mm li ol om mo lm on oo mq lq op oq ms or bi translated">使用多部分上传</h2><p id="1faf" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">当我意识到我可能会在前端有一个表单，并产生一个带有<code class="fe os ot ou ny b">multipart/form-data</code> <em class="np">的帖子时，我正在用Rocket构建应用程序。</em></p><p id="da68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，Rocket(从v0.4开始)<a class="ae ky" href="https://github.com/SergioBenitez/Rocket/issues/106" rel="noopener ugc nofollow" target="_blank">没有多部分支持</a>。这个好像是安排在v0.5的。</p><p id="382e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着必须使用由多部分组成的箱，并需要解决与Rocket的集成问题。生成的代码可以工作，但是如果Rocket中内置了多部分支持，代码会更加简洁。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><h2 id="f785" class="oc md it bd me oh oi dn mi oj ok dp mm li ol om mo lm on oo mq lq op oq ms or bi translated">配置CORS</h2><p id="aa89" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">一旦路线就位，我已经用curl和Postman做了一些测试，是时候与前端集成了。我需要适当地设置响应头，以避免CORS问题。</p><p id="5ebd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，Rocket中没有内置支持。</p><p id="57b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在查看GitHub repo的问题日志时，我看到了解决方案的一些构件，结果是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="7666" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不久之后，我发现了<a class="ae ky" href="https://crates.io/crates/rocket_cors" rel="noopener ugc nofollow" target="_blank"> rocket_cors </a>，它显著地精简了东西。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3182" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">运行正常的</h1><p id="f782" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">终端中一个简单的<code class="fe os ot ou ny b">cargo run</code>调用产生了这个漂亮的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/1e73fb38d645f3e880ec4433f76eb467.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zHfMDgQMODEhl2xH4_LDaA.png"/></div></div></figure><p id="a022" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的机器上的活动监视器告诉我，这个应用程序正在嗡嗡作响，只占用2.7MB的内存。</p><p id="9344" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是未优化的调试版本。</p><p id="9cc8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用<code class="fe os ot ou ny b">— release</code> <em class="np"> </em>标志构建的同一个应用程序占用1.6MB内存。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/e9d7bea634e310395e265ae54983afe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xmEv6rvxaw6X4F8PnQe6wQ.png"/></div></div></figure><p id="32cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着基于Rust的后端服务的启动，在服务上点击<code class="fe os ot ou ny b">/contents</code> <em class="np"> </em>路径会产生:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="05f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在前端，工作相对简单。使用:</p><ul class=""><li id="7cb2" class="mv mw it lb b lc ld lf lg li mx lm my lq mz lu na nb nc nd bi translated">反应</li><li id="2262" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">反应引导</li><li id="20f1" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated"><a class="ae ky" href="https://www.npmjs.com/package/react-grid-gallery?activeTab=readme" rel="noopener ugc nofollow" target="_blank">反应网格图库</a></li><li id="f7bb" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated"><a class="ae ky" href="https://www.npmjs.com/package/react-tags-input" rel="noopener ugc nofollow" target="_blank">反应-标签-输入</a></li></ul><p id="5470" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户会看到一个页面，他们可以在其中浏览图像，并根据文件名或标签进行搜索/过滤。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/0a501f7668b486dbcc900505afdabe3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L5VXqfciJc39flpndvxxHQ.png"/></div></div></figure><p id="7dcc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户可以拖放上传文件，并能够在文件提交上传之前对其进行标记。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/451f9814f547acde08b40bc36046c484.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L6TsbSnze4TQmtjyooKexw.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bf4b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">我喜欢用Rust构建一个应用程序的原因是</h1><ul class=""><li id="00ba" class="mv mw it lb b lc nj lf nk li pa lm pb lq pc lu na nb nc nd bi translated"><a class="ae ky" href="https://doc.rust-lang.org/cargo/guide/why-cargo-exists.html" rel="noopener ugc nofollow" target="_blank"> Cargo </a>，特别是对于依赖和应用管理，令人惊叹</li><li id="0cef" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">编译器对编译器错误非常有帮助。查看这篇<a class="ae ky" href="https://dmerej.info/blog/post/letting-the-compiler-tell-you-what-to-do/" rel="noopener ugc nofollow" target="_blank">博客文章</a>，作者利用编译器的错误引导他找到正确的解决方案。我的经历绝对反映了这一点。</li><li id="88f2" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">我惊喜地发现，我需要的每一项功能都有板条箱。<br/> ○ Web框架？<a class="ae ky" href="https://rocket.rs/" rel="noopener ugc nofollow" target="_blank">检查</a>。<br/>○web框架的中间件选项？<a class="ae ky" href="https://crates.io/crates/rocket_cors" rel="noopener ugc nofollow" target="_blank">检查</a>。<br/> ○ S3等AWS服务客户端库？Redis客户库？JSON序列化和反序列化？<a class="ae ky" href="https://docs.rs/rusoto_s3/0.42.0/rusoto_s3/index.html" rel="noopener ugc nofollow" target="_blank">检查</a>、<a class="ae ky" href="https://docs.rs/redis/0.13.0/redis/" rel="noopener ugc nofollow" target="_blank">检查</a>、<a class="ae ky" href="https://crates.io/crates/serde" rel="noopener ugc nofollow" target="_blank">检查</a>！</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/4108302a003a280e1581745589b8c863.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CrC5p_hZP48eFAHAcX4nfw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">板条箱上堆满了板条箱。—照片由<a class="ae ky" href="https://unsplash.com/@timmossholder?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Tim Mossholder </a>在<a class="ae ky" href="https://unsplash.com/s/photos/crate?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><ul class=""><li id="790c" class="mv mw it lb b lc ld lf lg li mx lm my lq mz lu na nb nc nd bi translated">在线<a class="ae ky" href="https://play.rust-lang.org/" rel="noopener ugc nofollow" target="_blank"> Rust Playground </a>，在那里我可以试验小代码片段</li><li id="e312" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">Rust language server ，它很好地集成到了Visual Studio代码中，是前端不可知的，提供实时错误检查、格式化、符号查找等。我能够在没有构建的情况下进行几个小时的实验并取得进展。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6327" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">不便、惊喜和麻烦</h1><p id="502e" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">虽然Rust文档本身很棒，但是我必须依赖的一些板条箱的文档还有很多需要改进的地方——尤其是在使用示例方面。</p><p id="63d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一些板条箱有写得很好的集成测试，这提供了使用的线索。一如既往，堆栈溢出和Reddit帮了大忙。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/95d02fb71233d20928e5bae53c9abb00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lRAAu4ztCpoY0Iim9gJctg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“文件在哪里？”—<a class="ae ky" href="https://unsplash.com/@benwhitephotography?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">本·怀特</a>在<a class="ae ky" href="https://unsplash.com/s/photos/surprise?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="38ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外:</p><ul class=""><li id="828e" class="mv mw it lb b lc ld lf lg li mx lm my lq mz lu na nb nc nd bi translated">理解<a class="ae ky" href="https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html" rel="noopener ugc nofollow" target="_blank">所有权</a>、寿命和借贷最初会产生一个陡峭的学习曲线，尤其是在两天的黑客马拉松中推动交付功能的时候。只需轻轻一拨，我就能与C++相提并论，弄清楚一些事情，但我仍然发现自己有时会挠头。</li><li id="7d1d" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">在所有的事情中，有几分钟我被绊倒了。<code class="fe os ot ou ny b">String</code>与<code class="fe os ot ou ny b">&amp;str</code>的对比令人困惑——直到我花时间去理解所有权、寿命和借贷。那么，这一切都说得通了。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="47b9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">关于语言的其他观察</h1><ul class=""><li id="a452" class="mv mw it lb b lc nj lf nk li pa lm pb lq pc lu na nb nc nd bi translated">在<em class="np">安全</em> Rust中没有真正的空类型(尽管有一个<a class="ae ky" href="https://doc.rust-lang.org/std/ptr/fn.null.html" rel="noopener ugc nofollow" target="_blank">空原始指针</a>的概念)。你通常会看到对<a class="ae ky" href="https://doc.rust-lang.org/std/option/" rel="noopener ugc nofollow" target="_blank">选项</a>类型的自由使用。可能会评估为<code class="fe os ot ou ny b">Some</code>或<code class="fe os ot ou ny b">None</code>，其中<a class="ae ky" href="https://doc.rust-lang.org/book/ch18-00-patterns.html" rel="noopener ugc nofollow" target="_blank">模式匹配</a>经常出现。</li><li id="5e97" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">模式匹配太棒了。这是我最喜欢的Scala特性之一，我喜欢Rust也有这个特性。代码看起来很有表现力，允许编译器标记未处理的情况。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><ul class=""><li id="b415" class="mv mw it lb b lc ld lf lg li mx lm my lq mz lu na nb nc nd bi translated">说到s <em class="np"> afe </em>和<em class="np"> unsafe，</em> you <em class="np"> </em>仍然可以做底层编程，比如说，使用<a class="ae ky" href="https://doc.rust-lang.org/book/ch19-01-unsafe-rust.html" rel="noopener ugc nofollow" target="_blank"> unsafe </a>代码块与C语言接口。虽然许多正确性检查不会消失，但是您可以在不安全的块中取消对原始指针的引用。对于任何阅读代码的人来说，看到不安全的代码块也是有益的。</li><li id="677b" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">堆上的分配是通过<code class="fe os ot ou ny b">Box</code>完成的，而不是使用<code class="fe os ot ou ny b">new</code>和<code class="fe os ot ou ny b">delete</code>。这一开始感觉很奇怪，但很容易习惯。如果你需要做引用计数或者需要保留弱引用，标准库中还有其他的智能指针选项。</li><li id="2ff2" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">Rust中的异常很有趣，因为它没有任何异常。您可以选择使用<code class="fe os ot ou ny b">Result&lt;T, E&gt;</code>来表示可恢复的错误，或者使用<code class="fe os ot ou ny b">panic!</code>宏来表示不可恢复的错误。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="8e89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://doc.rust-lang.org/book/ch09-00-error-handling.html" rel="noopener ugc nofollow" target="_blank">指南声明</a>:</p><blockquote class="nq nr ns"><p id="753a" class="kz la np lb b lc ld ju le lf lg jx lh nt lj lk ll nu ln lo lp nv lr ls lt lu im bi translated">“在许多情况下，Rust要求你承认错误的可能性，并在代码编译之前采取一些措施。这一要求通过确保在将代码部署到生产环境之前发现错误并适当地处理它们，使您的程序更加健壮！”</p></blockquote></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9a52" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">关键要点和教训</h1><ul class=""><li id="3b32" class="mv mw it lb b lc nj lf nk li pa lm pb lq pc lu na nb nc nd bi translated">约翰·卡马克曾经把写Rust代码的感觉描述为“<a class="ae ky" href="https://mobile.twitter.com/ID_AA_Carmack/status/1094419108781789184" rel="noopener ugc nofollow" target="_blank">非常有益健康</a>”我同意这种观点。这次黑客马拉松感觉更像是打开了不断发现和学习新事物的大门，而不是胡乱拼凑代码。</li><li id="1ee3" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">事后看来，我应该更谨慎地选择我的web框架。再多一点思考，我可能会走一条不同的路线(没有双关的意思)。Web框架选项的讨论和比较<a class="ae ky" href="https://github.com/flosse/rust-web-framework-comparison" rel="noopener ugc nofollow" target="_blank">在这里</a>。我可能会为我的下一个项目考虑<a class="ae ky" href="http://ironframework.io/" rel="noopener ugc nofollow" target="_blank"> iron </a>、<a class="ae ky" href="https://actix.rs/" rel="noopener ugc nofollow" target="_blank"> actix-web </a>，甚至<a class="ae ky" href="https://github.com/tiny-http/tiny-http" rel="noopener ugc nofollow" target="_blank"> tiny-http </a>。</li><li id="f8a4" class="mv mw it lb b lc ne lf nf li ng lm nh lq ni lu na nb nc nd bi translated">就真正学习Rust而言，我只是触及了皮毛——16个小时的黑客马拉松并不能成为一个Rustacean，尽管我在这里的努力让我很想更深入地挖掘这门语言。我对Rust的未来感到兴奋。我认为它给应用程序的构建带来了很多原则，是一种非常强大和富有表现力的语言，并且已经提供了与C++不相上下的运行速度和内存性能。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="056a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读，我希望您学到了一些关于Rust或Rocket的新知识。黑客快乐！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="693c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">资源</h1><p id="d30c" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated"><a class="ae ky" href="https://github.com/sidshank/rustic-backend" rel="noopener ugc nofollow" target="_blank">土气后端代码</a></p><p id="2b65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/sidshank/rustic-frontend" rel="noopener ugc nofollow" target="_blank">乡村前端代码</a></p><p id="1a1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/dtolnay/rust-faq" rel="noopener ugc nofollow" target="_blank">生锈常见问题解答</a></p><p id="9bf1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://rocket.rs/" rel="noopener ugc nofollow" target="_blank">火箭腹板框架生锈</a></p><p id="26b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Rusoto:一个针对Rust的AWS SDK</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="8ac2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="np">本文中表达的观点和意见仅代表作者个人，并不一定反映神童教育或神童教育内部工程组织的观点。</em></p></div></div>    
</body>
</html>