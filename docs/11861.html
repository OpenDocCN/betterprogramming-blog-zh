<html>
<head>
<title>Data-driven Retraining With Production Observability Insights</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有生产可观察性洞察力的数据驱动再培训</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/data-driven-retraining-with-production-observability-insights-af539d788cd3?source=collection_archive---------21-----------------------#2022-04-21">https://betterprogramming.pub/data-driven-retraining-with-production-observability-insights-af539d788cd3?source=collection_archive---------21-----------------------#2022-04-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9ed9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我们能做的任何事情都是至关重要的，以提高完成再培训周期并取得更好成绩的可能性。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fe6ef1a3102b18e173338ce72aa659da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yfzpuyafkoJEw4AD.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">数据驱动的再培训</p></figure><p id="f9c2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们都知道，我们的模型在生产中最好的一天将是它生产的第一天。随着时间的推移，模型性能会下降，这是一个简单的事实。ML试图根据它训练和学习的观察模式来预测现实世界的行为。但是现实世界是动态的，总是在运动；根据您的用例和数据速度，您的模型迟早会衰退，并开始表现出概念漂移、数据漂移，甚至两者都有。</p><p id="779e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当模型行为不当时，我们经常求助于再培训来试图解决问题。根据经验，数据科学团队通常会从生产中获取最近的数据，比如2或3个月的数据，并在此基础上重新训练他们的模型，假设“刷新”模型的训练观察将使其能够更好地预测未来的结果。但是，最近的数据是解决模型性能问题并使其回到正轨的最佳数据吗？请这样想，如果一个端到端的软件测试失败了，你会仅仅通过重新运行测试就认为它已经修复了吗？很可能不是。您将对问题进行故障诊断，以查明根本原因，并应用精确的修复来解决问题。ML团队正是通过模型监控来做到这一点，以查明异常并发现其根本原因，从而在问题影响业务成果之前快速解决问题。但是，当决议需要重新培训时，“新鲜是最好的”并不完全是一种数据驱动的方法。</p><p id="ea81" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">本文将展示数据科学和ML工程团队如何利用ML监控来找到最佳的数据和再训练策略组合，以解决机器学习性能问题。这种数据驱动、生产第一的方法支持更周到的再训练选择、更短和更精简的再训练周期，并且可以集成到MLOps CI/CD管道中，用于异常检测时的连续模型再训练。</p><h1 id="288c" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">将生产洞察力与再培训策略相匹配</h1><p id="6c7a" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">以下解释的见解基于在监督模型可观察性平台中检测到的异常，并在提取再培训见解的相应<a class="ae mo" href="https://colab.research.google.com/drive/18nPnH4Jm7ieBIeFeC5WmCex9_JK1sMci?usp=sharing#scrollTo=85602f22-80eb-4c58-ba49-922f89e34f7c" rel="noopener ugc nofollow" target="_blank"> jupyter笔记本</a>中进行分析。所有的资产都在<a class="ae mo" href="https://portal.superwise.ai/account/sign-up" rel="noopener ugc nofollow" target="_blank"> Superwise社区版</a>下开放使用，你可以用它在自己的数据上运行笔记本。</p><p id="e898" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意:重要的是要注意，这种方法的价值在于，一旦在根本原因调查中消除了其他可能的问题，就可以确定如何最好地进行再培训。</p><h1 id="b014" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">识别再培训组</h1><p id="931c" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">问题是。下次再培训要用什么数据？</p><p id="c714" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">模型受暂时性和季节性的影响。选择受时间异常或流量影响的数据集会导致模型偏斜。来自生产数据的一个重要见解是数据DNA或天数分布的相似性。了解数据在日期之间如何变化(日期之间的漂移分数)可以基于相似性和差异进行基于日期的分组。有了这些信息，您可以创建反映或排除生产数据的时态行为的数据重新训练组的组合。</p><p id="b846" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里我们可以看到一个日期X日期的热图矩阵，每个单元格代表两个日期之间的变化。用粗体显示的单元格彼此差异很大，而用浅色显示的单元格表示彼此非常相似的日期。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/b65bcc40c3bf0abc30e904e6842fd29c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i0M8SyCCWLP4zr7c"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">数据DNA</p></figure><p id="88e9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如您在本例中所看到的，数据分为3个主要组，橙色、红色和绿色，代表在下一次重新训练中使用的3个可选数据集。</p><ul class=""><li id="d312" class="mq mr iq kx b ky kz lb lc le ms li mt lm mu lq mv mw mx my bi translated">红色—红色组，反映了我们数据中的重复事件，我们希望对其进行训练。例如，这可能是周末的行为。</li><li id="a0f8" class="mq mr iq kx b ky mz lb na le nb li nc lm nd lq mv mw mx my bi translated">橙色-橙色组是生产中的正常数据行为。</li><li id="ec63" class="mq mr iq kx b ky mz lb na le nb li nc lm nd lq mv mw mx my bi translated">绿色——绿色组，代表一个独特的行为事件。例如，这可能是点击率优化用例中的营销活动。</li></ul><p id="ad26" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">根据您对领域的理解，包含/排除决策可能会有所不同。如果营销活动取得成功，并且这些见解将推广到所有营销活动中，您可能会决定重新培训绿色和红色。如果该活动是一次性事件或失败的实验，橙色和红色将是更好的再训练数据组选择。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/33da7932948133171346d589df837ee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CRjWInX8YGBtxeWW"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">再培训团体</p></figure><h1 id="8dec" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">识别漂移段</h1><p id="bbd5" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">问题是。哪些人群受到影响？</p><p id="98d8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">模型的目的是在你的人群中抽象预测，但也就是说，你总是需要在细分水平上监控你的模型的行为，以检测特定的细分是否在漂移。当检测到段漂移时，我们可以考虑以下解决方案，甚至是它们的组合，以及重新训练。</p><ul class=""><li id="b848" class="mq mr iq kx b ky kz lb lc le ms li mt lm mu lq mv mw mx my bi translated">模型分割(model split )-为段创建特定模型。</li><li id="f70b" class="mq mr iq kx b ky mz lb na le nb li nc lm nd lq mv mw mx my bi translated">优化模型—使模型适合处理当前细分市场。</li><li id="55df" class="mq mr iq kx b ky mz lb na le nb li nc lm nd lq mv mw mx my bi translated">对数据重新采样-更改模型将在特定模型的数据上学习的数据分布。</li></ul><p id="5b66" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这里，我们可以看到段漂移值，其中每个条形显示每个段的漂移分数。在采取行动之前，重要的是要了解段大小与段漂移的关系，以确定段对模型的影响程度。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/956e18c28f023b757c4d9b4722b3a0a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5AP-lB7QVeAznm33"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">漂移段</p></figure><p id="5b57" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">此外，这让我们看到段大小与段漂移值的关系，并确定我们是否需要为该段创建特定的模型。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/9a6aaa244bb0222cb4d90582a0af3c93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RdcI0fx463fb6Krx"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">片段大小与片段漂移的关系</p></figure><h1 id="3b06" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">识别有完整性问题的日期</h1><p id="290b" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">问题是。原则上哪些日子应该排除在再培训之外？</p><p id="a311" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">原则上，一些数据应该排除在再培训之外，即由于一些管道或上游源问题，我们遇到数据完整性问题的日子。如果在再训练过程中考虑这些数据，可能会导致我们的模型误解“正态”分布，从而导致模型性能进一步下降。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/594df3d85ff0e1ec074508365270f72a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3KPPQdPMn7zKLN7N"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">有诚信问题的日子</p></figure><p id="09ee" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这里，我们可以看到数据完整性事件发生天数的条形图。这让我们可以快速识别出应该从下一次再训练中排除的“坏”数据。</p><h1 id="fa8e" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">更智能、更精简的再培训</h1><p id="bd35" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">再培训不是免费的。它占用了跑步训练和你的团队的注意力和努力的资源。因此，我们能做的任何事情都是至关重要的，以提高以更好的表现完成再培训周期的概率。这就是具有生产洞察力的数据驱动再培训的价值。更智能、更精简的再培训，利用模型的可观察性，快速有效地将您从检测中解救出来。</p></div></div>    
</body>
</html>