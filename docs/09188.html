<html>
<head>
<title>3 Python Tricks That Will Improve Your Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3个Python技巧可以改善你的代码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/3-python-tricks-that-will-improve-your-code-525ca693632e?source=collection_archive---------1-----------------------#2021-07-26">https://betterprogramming.pub/3-python-tricks-that-will-improve-your-code-525ca693632e?source=collection_archive---------1-----------------------#2021-07-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9df1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Python正在发展——不要自满</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6d599e6e8a86d2fdf0d64564d13b7b3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*W92-T92IxZbA49Zl"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@lazycreekimages?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迈克尔·泽兹奇</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="937c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">我用Python编程已经超过10年了。曾经有一段时间，我认为自己无所不知，这是我变得自满的明显迹象。</p><p id="36c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我决定做一些关于Python改进的研究。那些3.6，3.7，3.8 Python版本不是白来的吧？</p><p id="422e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在浏览发行说明后，我发现了这些巧妙的技巧，我想和你分享一下。</p><p id="0b73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过阅读这篇文章，你将学会:</p><ul class=""><li id="a8ef" class="me mf it lb b lc ld lf lg li mg lm mh lq mi lu mj mk ml mm bi translated">如何更清晰地格式化大整数</li><li id="0e0b" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">使用文件路径的更好方法</li><li id="511a" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">字符串格式化的正确方式</li></ul><p id="2b47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有几个你可能会感兴趣的链接:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="a134" class="mx my it mt b gy mz na l nb nc">- <a class="ae ky" href="https://trymito.io/" rel="noopener ugc nofollow" target="_blank">Complete your Python analyses 10x faster with Mito</a> [Product]</span><span id="cf78" class="mx my it mt b gy nd na l nb nc">- <a class="ae ky" href="https://aigents.co/skills" rel="noopener ugc nofollow" target="_blank">Free skill tests for Data Scientists &amp; ML Engineers</a> [Test]</span><span id="1e41" class="mx my it mt b gy nd na l nb nc">- <a class="ae ky" href="https://imp.i115008.net/c/2402645/1116216/11298" rel="noopener ugc nofollow" target="_blank">All New Self-Driving Car Engineer Nanodegree</a><strong class="mt iu"> </strong>[Course]</span></pre><p id="9b53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ne">你愿意多看一些这样的文章吗？如果是这样，你可以点击上面的任何链接来支持我。其中一些是附属链接，但你不需要购买任何东西。</em></p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="d5d1" class="nm my it bd nn no np nq nr ns nt nu nv jz nw ka nx kc ny kd nz kf oa kg ob oc bi translated">1.格式化大整数</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/7e51efb2837f03ccc2365e250ea46b67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*stpStrtT8AcPoFuuN7Dsmg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在数字文本中使用下划线。图像由Roman Orac提供</p></figure><p id="6103" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从Python 3.6(以及更高版本)开始，您可以使用下划线来使数字更容易阅读。详见<a class="ae ky" href="https://www.python.org/dev/peps/pep-0515/" rel="noopener ugc nofollow" target="_blank"> PEP 515 </a>。</p><p id="61bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看一个例子:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="9a87" class="mx my it mt b gy mz na l nb nc">a = 1000000000<br/># Is variable a billion or 100 millions?</span><span id="0fc0" class="mx my it mt b gy nd na l nb nc"># Let's use underscores to make it easier to read<br/>a = 1_000_000_000</span><span id="dc6a" class="mx my it mt b gy nd na l nb nc"># You can group numbers as you like<br/>b = 1_0_9_0</span></pre><p id="837a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它也适用于十六进制地址和分组位。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="73fd" class="mx my it mt b gy mz na l nb nc"># grouping hexadecimal addresses by words<br/>addr = 0xCAFE_F00D</span><span id="cf66" class="mx my it mt b gy nd na l nb nc"># grouping bits into nibbles in a binary literal<br/>flags = 0b_0011_1111_0100_1110</span></pre><h1 id="f5e6" class="nm my it bd nn no oe nq nr ns of nu nv jz og ka nx kc oh kd nz kf oi kg ob oc bi translated">2.Pathlib</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/f149d147d7ccc318e4b6c3f2aafba0ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZoVfHdx2SJgSBbt9"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">爱丽丝·多诺万·劳斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="4c7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用路径可能很有挑战性，尤其是当您的代码需要在多个操作系统上运行时。</p><p id="3153" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，Python标准库有<code class="fe ok ol om mt b"><a class="ae ky" href="https://docs.python.org/3/library/pathlib.html" rel="noopener ugc nofollow" target="_blank">pathllib</a></code>。</p><p id="4b6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看一个例子:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="0d1d" class="mx my it mt b gy mz na l nb nc">from pathlib import Path</span><span id="ded1" class="mx my it mt b gy nd na l nb nc">path = Path("some_folder")<br/>print(path)<br/># output: some_folder</span><span id="bda8" class="mx my it mt b gy nd na l nb nc"># We can add more subfolders in a readable way<br/>path = path / "sub_folder" / "sub_sub_folder"<br/>print(path)<br/># output: some_folder/sub_folder/sub_sub_folder</span><span id="767a" class="mx my it mt b gy nd na l nb nc"># make path absolute<br/>print(path.resolve())<br/># output: /Users/r.orac/some_folder/sub_folter/sub_sub_folder</span></pre><p id="7d0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管使用/ sign作为分隔符来连接路径，但pathlib使其与操作系统无关，这意味着它也可以在Windows操作系统上工作。</p><h1 id="1bbf" class="nm my it bd nn no oe nq nr ns of nu nv jz og ka nx kc oh kd nz kf oi kg ob oc bi translated">3.简化字符串格式</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/d4b7187903a87283d0f47712805ec581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tLp69duFedELSRKnsJ760Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Python中的f字符串格式。图像由Roman Orac提供</p></figure><p id="c075" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我习惯于在Python中使用老式的字符串格式:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="a87f" class="mx my it mt b gy mz na l nb nc">person = 'Roman'<br/>exercise = 0</span><span id="b95e" class="mx my it mt b gy nd na l nb nc">print("%d-times %s exercised during corona epidemic" % (exercise, person))</span><span id="ec5c" class="mx my it mt b gy nd na l nb nc"># output<br/># 0-times Roman exercised during corona epidemic</span></pre><p id="781c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">直到最近，我才知道Python中有更好(更现代)的字符串格式化方式。</p><p id="b2f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Python 3.6中，<a class="ae ky" href="https://www.python.org/dev/peps/pep-0498/" rel="noopener ugc nofollow" target="_blank"> PEP 498 </a>引入了文字字符串插值，简化了字符串格式。</p><p id="ac76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以将上面的例子改写为:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="9a8e" class="mx my it mt b gy mz na l nb nc">person = 'roman'<br/>exercise = 0</span><span id="1d4c" class="mx my it mt b gy nd na l nb nc">print(f"{exercise}-times {person} exercised during corona epidemic")</span><span id="0a6e" class="mx my it mt b gy nd na l nb nc"># output<br/># 0-times Roman exercised during corona epidemic</span></pre><p id="10fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以f为前缀的字符串称为fstring。</p><p id="48a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">fstrings甚至支持数学运算:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="2f1b" class="mx my it mt b gy mz na l nb nc">print(f"{exercise+1}-times {person} exercised during corona epidemic")</span><span id="ff49" class="mx my it mt b gy nd na l nb nc"># Output<br/># '1-times roman exercised during corona epidemic'</span></pre><p id="b730" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是我在电晕流行期间没有锻炼，所以在fstring中加上+1只是一个谎言😂</p><p id="8123" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">格式化浮点值怎么样？</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="2aa3" class="mx my it mt b gy mz na l nb nc">f = 0.333333<br/>print(f"this is f={f:.2f} rounded to 2 decimals")</span><span id="e5a5" class="mx my it mt b gy nd na l nb nc"># Output<br/>this is f=0.33 rounded to 2 decimals</span></pre><h1 id="7da4" class="nm my it bd nn no oe nq nr ns of nu nv jz og ka nx kc oh kd nz kf oi kg ob oc bi translated">结论</h1><p id="aa52" class="pw-post-body-paragraph kz la it lb b lc oo ju le lf op jx lh li oq lk ll lm or lo lp lq os ls lt lu im bi translated">这些Python技巧将使你的代码更加简洁，并使编码更加有趣。</p><p id="60a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">许多Python开发者不知道这些技巧——你不再是他们中的一员了。</p><h1 id="6a44" class="nm my it bd nn no oe nq nr ns of nu nv jz og ka nx kc oh kd nz kf oi kg ob oc bi translated">在你走之前</h1><p id="dea3" class="pw-post-body-paragraph kz la it lb b lc oo ju le lf op jx lh li oq lk ll lm or lo lp lq os ls lt lu im bi translated">在<a class="ae ky" href="https://twitter.com/romanorac" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我，我经常在那里发布关于数据科学和机器学习的微博。</p></div></div>    
</body>
</html>