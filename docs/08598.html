<html>
<head>
<title>New in Python 3.10: 4 Features You Should Try Out</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 3.10中的新特性:4您应该尝试的特性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/new-in-python-3-10-4-features-you-should-try-out-d48db504500d?source=collection_archive---------1-----------------------#2021-05-19">https://betterprogramming.pub/new-in-python-3-10-4-features-you-should-try-out-d48db504500d?source=collection_archive---------1-----------------------#2021-05-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d22c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">期待已久的switch语句终于来了！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7185fcefac2c5b49d280a99e17cfcb4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YUIiQ6fQyV2G7bkJ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@kadh?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Kira auf der Heide </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="2349" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python因其简单和优雅而受到许多数据科学家和通用开发人员的喜爱。Python的最新版本(3.10)目前处于测试阶段，但在2021年10月最终发布之前不会添加新功能。现在正是提前了解其新特性的时候。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="27ea" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">多个上下文管理器</h1><p id="43ce" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们列表中的第一项是Python 3.10中带括号的上下文管理器。作为复习，上下文管理器是特殊的代码构造，允许简单处理资源(例如文件):</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="c8af" class="ne md it na b gy nf ng l nh ni">with open('output.log', 'rw') as fout:<br/>    fout.write('hello')</span></pre><p id="9bb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，有了带括号的上下文管理器，您可以在一个<code class="fe nj nk nl na b">with</code>块中使用多个上下文管理器:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="1f0e" class="ne md it na b gy nf ng l nh ni">with (open('output.log', 'w') as fout, open('input.csv') as fin):<br/>    fout.write(fin.read())</span></pre><p id="39c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个特性对于使用异步资源的代码非常有用，因为您不再需要多个<code class="fe nj nk nl na b">with</code>语句。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c3cd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">有用的错误消息</h1><p id="3377" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">新的Python 3.10更新也给我们带来了更多有用的错误消息。其中包括<code class="fe nj nk nl na b">SyntaxError</code>、<code class="fe nj nk nl na b">IdentationError</code>、<code class="fe nj nk nl na b">AttributeError</code>、<code class="fe nj nk nl na b">NameError</code>。例如，当您拼错一个变量名时，Python会建议另一个名称:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="c478" class="ne md it na b gy nf ng l nh ni">&gt;&gt;&gt; number_of_cars = 5 <br/>&gt;&gt;&gt; number_of_cats </span><span id="1497" class="ne md it na b gy nm ng l nh ni">Traceback (most recent call last): <br/>    File "&lt;stdin&gt;", line 1, in &lt;module&gt; <br/>NameError: name 'number_of_cats' is not defined. Did you mean: number_of_cars?</span></pre><p id="a614" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样的逻辑也适用于对象的属性。如果你在对象的属性中犯了一个错误，解释器会尽力帮你改正。其他错误消息现在包括丢失的括号:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="59b8" class="ne md it na b gy nf ng l nh ni">users = {'abacaba': '123', 'ozzy': 'qwerty', <br/>print(users) </span><span id="5975" class="ne md it na b gy nm ng l nh ni">File "example.py", line 1 <br/>    users = {'abacaba': '123', 'ozzy': 'qwerty', <br/>            ^ <br/>SyntaxError: '{' was never closed</span></pre><p id="fa56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对错误信息还有很多其他的改进，包括少了逗号，少了<code class="fe nj nk nl na b">:</code>，把<code class="fe nj nk nl na b">=</code>和<code class="fe nj nk nl na b">==</code>搞混了等等。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a3ac" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结构模式匹配</h1><p id="e2f8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这是一个大的。我们已经要求switch声明有一段时间了，所有的等待都是合理的。在我看来，这些实现的方式真正代表了Pythonic式的方式。这是一个简单的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="641b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，我们评估的是<code class="fe nj nk nl na b">name</code>变量。如果匹配<code class="fe nj nk nl na b">"Misha"</code>或<code class="fe nj nk nl na b">"John"</code>，会返回一个问候语。所有其他名字将被告知走开。这可以用<code class="fe nj nk nl na b">|</code>符号简化:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="cd88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用<code class="fe nj nk nl na b">if</code>语句为匹配添加附加条件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="e9a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个特性对于那些处理大型多轴数据库的人来说特别有用，可以快速地对他们的数据进行分类。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ab5a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">类型联合运算符</h1><p id="b07b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">你们中的许多人可能知道Python支持类型提示。它们不保证类型安全，但在开发中是一个有用的工具。我们将专门讨论类型联合，或者为一个变量匹配多个类型。在Python 3.10之前，您必须使用来自<code class="fe nj nk nl na b">typing</code>的特殊<code class="fe nj nk nl na b">Union</code>类型:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="ddd3" class="ne md it na b gy nf ng l nh ni">def square_root(number: Union[int, float]) -&gt; Union[int, float]: <br/>    return number ** 0.5</span></pre><p id="9b66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，使用Python 3.10，您可以编写:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="05fd" class="ne md it na b gy nf ng l nh ni">def square_root(number: int | float) -&gt; int | float: <br/>    return number ** 0.5</span></pre><p id="ec28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个语法也适用于<code class="fe nj nk nl na b">isinstance</code>函数:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="697e" class="ne md it na b gy nf ng l nh ni">&gt;&gt;&gt; isinstance('abacaba', int | str) <br/>True</span></pre><p id="438a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">遵循类型提示范例的代码库将极大地受益于这一新特性。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="541f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结束语</h1><p id="e00b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">感谢您阅读我的文章。我希望你喜欢它。请在评论区让我知道你最喜欢的Python 3.10更新特性！</p><p id="30e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你没有赶上所有的Python更新，看看我对Python 3.9特性的<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/take-a-look-at-the-awesome-new-features-coming-in-python-3-9-8753c494de39">评论。</a></p></div></div>    
</body>
</html>