# Swift 中的标记语句:如何给循环命名

> 原文：<https://betterprogramming.pub/labeled-statements-in-swift-how-to-give-loops-a-name-44e6fd374d9b>

## 了解给循环命名的重要性

![](img/baae2fb3f158a75495ce2daf585bb4c9.png)

[奥斯汀·柯克](https://unsplash.com/@austinkirk?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍照。

在我看来，Swift 是一种初学者友好的编程语言。

请想一想我们在 Swift 中拥有/没有的一些东西:

*   我们不必处理指向内存地址的指针。
*   有自动引用计数(ARC ),它负责计算对对象的引用，并在没有引用时自动释放它们。
*   可选值迫使我们更加小心地处理可选值，并考虑没有设置可选值的情况。
*   等等。

尽管如此，Swift 也有其隐藏的宝藏。最近我在读 Swift 编程语言[](https://docs.swift.org/swift-book/)*的时候偶然发现了其中的一个:带标签的语句。*

*本质上，它们允许您命名语句，这在处理循环或`switch`语句时会变得很方便。*

*在本文中，我将向您展示如何命名您的语句，以及为什么您应该命名它们。*

*但是让我们从标记语句解决的问题开始。*

# *如果没有带标签的语句，我们将不得不做什么*

*假设您正在进行公司员工查找。你有某种形式的数据库，你得到按部门分类的所有雇员。*

*现在，您需要按名称找到一个成员。为了简单起见，我们将忽略两个成员共享相同名称的情况。*

*所以你有一个包含雇员名字的字符串。您马上会想到一个解决方案，用一个`for`循环遍历各个部门，在这个循环的内部是另一个`for`循环，遍历该部门的成员。*

*解决方案可能是这样的:*

*你可以创建一个空白的操场，并进行测试。下面是实际打印到控制台的内容:*

```
*We weren't able to find the person E. Neville in Human ResourcesThe employee was found in Development!We weren't able to find the person E. Neville in DevelopmentWe weren't able to find the person E. Neville in Sales*
```

*第一个日志是因为我们找不到`E`而被解雇的。内维尔在人力资源部。第二条语句表明我们在开发部门找到了我们的员工。*

*然而，我们仍然触发那个部门的最后一个`print`语句。最后一个部门也是如此。即使我们已经找到了我们正在寻找的成员，我们仍然不能停止循环的运行。*

*我们需要某种形式的取消。*

*现在你可以提出这样一个解决方案:*

*我们使用布尔变量`employeeFound`来识别我们是否有匹配。我们可以使用`break`来打破内部循环。在我们的变量的帮助下，当我们找到我们的成员时，这个变量变成了`true`，我们也打破了外部循环。*

*这可以帮助我们解决问题，但这并不优雅。我们需要两条`break`语句、一条`if`语句和一个需要正确更新的变量。*

*我们可以做得更好。*

# *标签语句如何帮助我们编写简洁的代码*

*现在让我们来看同一个例子，但是这一次，我们将使用带标签的语句:*

*你能看到我在那里做了什么吗？*

*我给了外循环一个标签(`departmentLoop`)。这个标签不需要`var`或`let`关键字。它可以只是一个后跟冒号的名称。从那时起，我们可以用它来打破这个循环。*

*我们在`employee`循环中使用它来告诉 Swift 我们不想脱离内部循环，这将是默认行为。相反，该`break`命令旨在脱离外部循环。*

*这样就不需要在外部(`department`)循环的每次迭代结束时添加一个额外的`if`语句。我们也不需要跟踪另一个变量，并找到合适的位置来改变它。*

*相反，我们可以非常清楚地传达我们想要摆脱什么。*

# *带标签语句的其他用例*

*上面的例子描述了为什么我们想要和需要带标签的语句。它允许我们编写更少的代码，可读性更好。*

*然而，我知道还有两个用例:*

1.  *在循环中使用`continue`命令。*
2.  *结合使用`break`命令和`switch`语句。*

*让我们简单回顾一下。*

*`continue`命令也用于循环。与`break`命令相反，它不会跳出循环并完全停止执行。它只是开始另一次迭代，而不执行后面的任何代码。*

*想象一下，我们有一个人在多个部门工作。同样，我们将忽略在同一个部门中多次出现相同名称的情况。*

*代码可能是这样的(`\\ ...`标记应该保持代码和以前一样的地方):*

*现在我们的控制台输出如下所示:*

```
*We weren't able to find the person E. Neville in Human ResourcesThe employee was found in Development!The employee was found in Sales!*
```

*您可以通过简单地使用一个没有标记语句的`break`语句来达到同样的效果。然而，如果你有更多的循环，这可能会变得很方便。*

*最后，对于`switch`语句，您还可以使用带标签的语句来摆脱以下情况:*

*   *你想跳出一个包含循环的外层`switch`语句。*
*   *您想要跳出包含一个`switch`语句的外部循环。*
*   *您想要从包含另一个`switch`语句的外部`switch`语句中分离出来。*

*让我们来看一个`switch`例子的代码:*

*我们想找到我们的名叫幸运的狗。我们在一个循环中有一个`switch`在另一个`switch`里面。*

*当我们发现一种动物属于物种`dog`并被命名为幸运时，我们不仅想要打破内部开关和外部开关，而且想要完全脱离循环。*

*当我们使用带标签的语句时，这就是一行程序。日志如下所示:*

```
*It was a different animal of species: catIt was a dog but a different oneWe found our dog Lucky!*
```

*结果在意料之中。我们在第三次循环迭代中找到了 Lucky，此后就没有更多的迭代了。*

# *结论*

*正如您已经知道的那样，带标签的语句是用于非常特殊情况的工具。你可能不会每天甚至每周都需要它们。*

*然而，作为开发人员，我们的工作是在我们的工具箱中拥有各种各样的工具，并为手头的问题选择最好的一个。*

*当我们想要跳出外部循环或`switch`语句时，带标签的语句允许我们编写简洁的代码。它们易于使用，也应该成为你工具带的一部分。*

*这也让我们看到，Swift 有一些我们很少看到，甚至可能不知道的隐藏宝藏。所以永远不要停止学习这门伟大的语言所提供的东西。*

*感谢您的宝贵时间！*