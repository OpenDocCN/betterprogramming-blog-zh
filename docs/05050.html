<html>
<head>
<title>How to Install pyenv on MacOS Without Homebrew</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在没有自制的MacOS上安装pyenv</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/installing-pyenv-on-macos-without-homebrew-12062ba3f3b8?source=collection_archive---------10-----------------------#2020-06-03">https://betterprogramming.pub/installing-pyenv-on-macos-without-homebrew-12062ba3f3b8?source=collection_archive---------10-----------------------#2020-06-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2a06" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">当然，自制软件很棒，但是即使没有它，你也可以在Mac上拥有一个健壮的Python环境</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/41f6f7393d13f6e1c03aa58c66cefa9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AfRyOysue8a4L6gBZ8OA1Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae ky" href="https://unsplash.com/@rubmenarguez?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">鲁本·门纳格斯</a>的照片</p></figure><p id="b263" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最近发现自己正在为Python开发设置一个新的MacBook Pro。互联网上有大量关于在Mac上安装pyenv的文档，但它们似乎都集中在通过自制软件安装上。嗯，那对我来说不是一个选项，所以下面我记录了我在没有自制软件的情况下安装<a class="ae ky" href="https://github.com/pyenv/pyenv" rel="noopener ugc nofollow" target="_blank"> pyenv </a>的步骤。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="556c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="1bd8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">运行以下命令安装pyenv。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="fdb5" class="ne md it na b gy nf ng l nh ni">% curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash</span></pre><p id="3ce9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果pyenv仍然不在您的路径中，并且您使用的是最新版本的MacOS，请在终端中运行以下命令。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="3a07" class="ne md it na b gy nf ng l nh ni">% PYENV_ROOT="${HOME}/.pyenv"</span><span id="5db8" class="ne md it na b gy nj ng l nh ni">% echo "export PATH=\"${PYENV_ROOT}/bin:\$PATH\"" &gt;&gt; ~/.zshrc<br/>% echo "eval \"\$(pyenv init -)\"" &gt;&gt; ~/.zshrc<br/>% echo "eval \"\$(pyenv virtualenv-init -)\"" &gt;&gt; ~/.zshrc</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3f4c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">我的眼镜</h1><p id="404e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我用这种方法在运行macOS Catalina的2020 MacBook Pro上安装pyenv。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="abfb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">使用pyenv-installer</h1><p id="750e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果您不希望在pyenv安装中使用Homebrew，该项目的开发者还提供了<a class="ae ky" href="https://github.com/pyenv/pyenv-installer" rel="noopener ugc nofollow" target="_blank"> pyenv-installer </a>项目。这提供了一个带有简单bash命令的安装脚本，可以为您处理安装。</p><p id="6042" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个项目的文档说运行<code class="fe nk nl nm na b">curl <a class="ae ky" href="https://pyenv.run" rel="noopener ugc nofollow" target="_blank">https://pyenv.run</a> | bash</code>，但是这给了我一个证书错误。</p><p id="7eb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有两种方法可以解决这个问题。阻力最小的方法是在<code class="fe nk nl nm na b">curl</code>命令中使用<code class="fe nk nl nm na b">-k</code>标志(不检查证书)。更安全的选择是只调用<code class="fe nk nl nm na b">pyenv.run</code>脚本重定向到的命令——该命令指向GitHub并有一个安全证书。为此，请运行:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="e759" class="ne md it na b gy nf ng l nh ni">% curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash</span></pre><p id="9bf3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个命令下载安装程序文件，并将安装程序文件传输到bash。换句话说，它在bash shell中运行文件。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3c07" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">将pyenv添加到路径</h1><p id="06f4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">不幸的是，我们使用的installer命令没有成功地将pyenv添加到您的路径中。这是由于bash shell的命令管道。在macOS Catalina中生效，苹果已经开始使用Zsh(读作Z Shell)代替bash作为默认终端(<a class="ae ky" href="https://support.apple.com/en-us/HT208050" rel="noopener ugc nofollow" target="_blank">来源</a>)。因此，当我们将命令传送给bash时，它不知道更新Zsh的配置。</p><p id="287c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">补救这种情况的一个简单方法就是不要将命令传送到bash，而是在Zsh中运行它。如果该脚本能够正确地检测到它正在运行，它就有内置的逻辑来更新Zsh配置文件。但是，如果您像我一样，已经运行了安装程序，下面的步骤将纠正这种情况，并将pyenv添加到路径中。</p><p id="8b22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要添加到Zsh路径，我们需要运行以下命令将pyenv添加到shell的配置文件中。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="1697" class="ne md it na b gy nf ng l nh ni">% PYENV_ROOT="${HOME}/.pyenv"</span><span id="3ffc" class="ne md it na b gy nj ng l nh ni">% echo "export PATH=\"${PYENV_ROOT}/bin:\$PATH\"" &gt;&gt; ~/.zshrc<br/>% echo "eval \"\$(pyenv init -)\"" &gt;&gt; ~/.zshrc<br/>% echo "eval \"\$(pyenv virtualenv-init -)\"" &gt;&gt; ~/.zshrc</span></pre><p id="289e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将把程序添加到您的path变量中。从这里，您可以重新启动您的终端并开始使用pyenv。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4de4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">开始使用pyenv</h1><p id="975c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">安装了pyenv之后，我用它安装了最新版本的Python。在撰写本文时，这是Python 3.8.3。为了安装，我运行:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="ec3c" class="ne md it na b gy nf ng l nh ni">% pyenv install -v 3.8.3</span></pre><p id="0c4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此时，如果您检查您的Python版本，您仍然会看到系统默认的版本。在我的系统上，这看起来像:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="241d" class="ne md it na b gy nf ng l nh ni">% python -V<br/>Python 2.7.16</span></pre><p id="68f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们必须告诉系统我们想要使用哪个版本的Python。首先，我们可以通过pyenv列出可用的Python版本，然后我们可以告诉pyenv将全局版本设置为首选版本。在这种情况下，这是3.8.3。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="1b24" class="ne md it na b gy nf ng l nh ni">% pyenv versions<br/>* system (set by /Users/snolesmuth/.pyenv/version)<br/>3.8.3</span><span id="6ac9" class="ne md it na b gy nj ng l nh ni">% pyenv global 3.8.3</span><span id="1e35" class="ne md it na b gy nj ng l nh ni">% python -V<br/>Python 3.8.3</span></pre><p id="9261" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦我们告诉Python使用新版本，我们就可以正常运行Python命令，但是pyenv会重定向到我们指定的版本。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2bec" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="bc4c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Pyenv是一个非常强大的工具，允许您根据需要为不同的用户、项目或文件夹使用单独的Python安装，而不依赖于macOS非常过时的默认版本。</p></div></div>    
</body>
</html>