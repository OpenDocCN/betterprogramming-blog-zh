<html>
<head>
<title>Learn p5.js by Making Fractals</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过制作分形学习p5.js</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/learning-p5-js-by-making-fractals-cbdcac5c651e?source=collection_archive---------8-----------------------#2020-02-13">https://betterprogramming.pub/learning-p5-js-by-making-fractals-cbdcac5c651e?source=collection_archive---------8-----------------------#2020-02-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="63d2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">数学教育制图</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c986028fa5efbfd74f1455a82b648ed1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ptbIp5RRLA-HCccZLbN2yg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">黑色背景上的蓝色树状不对称分形</p></figure><p id="358d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">即使当我真的想学习一门新的编程语言、框架或工具时，入门的过程也会感觉像是一件苦差事。但是当回报很高时，这是有帮助的，如果你能很快看到回报，这就更有帮助了。</p><p id="7876" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是我在<a class="ae lr" href="https://p5js.org/" rel="noopener ugc nofollow" target="_blank"> p5.js </a>中学习制作分形的经历。使用不到40行JavaScript代码，您也可以制作自己的可调整和可定制的分形树。</p><p id="cd72" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我也推荐观看<a class="ae lr" href="https://www.youtube.com/watch?v=0jjeOYMjmDU" rel="noopener ugc nofollow" target="_blank">编码培训关于制作分形树的视频</a>。</p><p id="3b31" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你需要的唯一资源是来自p5网站的p5库。“p5.js complete”链接为您提供了一个名为<code class="fe ls lt lu lv b">p5.js</code>的文件中的库，您可以在另一个JavaScript文件中引用它，方法是将它包含在HTML文件的头中:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="924f" class="ma mb iq lv b gy mc md l me mf">&lt;script <em class="mg">src</em>='./p5.js'&gt;&lt;/script&gt;<br/>&lt;script src='./index.js&gt;&lt;/script&gt;</span></pre><p id="231a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了指导p5画出像这篇文章顶部那样的图像，我们需要分解我们试图构建的部分，并问…</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="ebb3" class="mo mb iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated"><strong class="ak">什么是分形？</strong></h1><p id="bf66" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">即使我们以前见过很多次，牛津的定义也有助于澄清:</p><blockquote class="nk"><p id="a4f8" class="nl nm iq bd nn no np nq nr ns nt lq dk translated">"一种曲线或几何图形，其每一部分都具有与整体相同的统计特征."</p></blockquote><p id="46ad" class="pw-post-body-paragraph kv kw iq kx b ky nu jr la lb nv ju ld le nw lg lh li nx lk ll lm ny lo lp lq ij bi translated">在进入细节之前，我们可能已经想象了我们写的任何命令都可以重复，也许通过一些小的修改或逐步小型化，来继续渲染越来越多的小部件，这些小部件与它们的父部件具有“相同的统计特征”。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="cc53" class="mo mb iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">p5在这其中扮演了什么角色？</h1><p id="957d" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">P5为我们画了所有的图。</p><p id="3d4b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们只给出几条p5指令，如果我们以这样一种方式编写它们，即指令的参数递归地(自引用地)改变它们自己，我们可以让p5执行大量的操作，同时只编写几条指令。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="9e32" class="mo mb iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated"><strong class="ak">获取图纸的时间</strong></h1><p id="16e0" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">如果我们要画一个最简单的分形形式，一个树枝上有一个又一个树枝的树，我们可以从画第一个树枝开始。但是首先，让我们设置我们的<code class="fe ls lt lu lv b">index.js</code>文件:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="32b4" class="ma mb iq lv b gy mc md l me mf">function setup() {<br/>    createCanvas(800, 600)<br/>}</span></pre><p id="6d13" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以把这个写在第一行。顾名思义，它创造了我们的画布。</p><p id="5a69" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="9a04" class="ma mb iq lv b gy mc md l me mf">function draw() {<br/>    background(0)<br/>}</span></pre><p id="ecb4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe ls lt lu lv b">Setup()</code>和<code class="fe ls lt lu lv b">draw()</code>是出现在每个p5文件中的前两个函数。</p><p id="421d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下一个重要的功能是<code class="fe ls lt lu lv b">translate()</code>。我们给出的平移指令是屏幕上的x和y坐标，表示虚拟画笔应该移动到的方向和距离。</p><p id="4ef2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">跟踪笔刷位置很重要，因为后续的移动是建立在之前的移动基础上的。在draw函数中，我们可以参考画布的宽度和高度来找到底部，如下所示:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="d35b" class="ma mb iq lv b gy mc md l me mf">translate(width / 2, height)</span></pre><p id="8459" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们已经就位，我们可以在<code class="fe ls lt lu lv b">stroke()</code>函数的帮助下用<code class="fe ls lt lu lv b">line()</code>函数画一条线，它定义了我们的线的颜色:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="575f" class="ma mb iq lv b gy mc md l me mf">stroke(50, 50, 250)<br/>line(0,0,0, -150)</span></pre><p id="c4f3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">所有这些给了我们画布底部的一条线。如果我们画的是我们的第一个分支，我们想画更多的分支，让我们把那个分支分成它自己的函数，并在我们的draw函数中调用它。</p><p id="95dc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因为我们想改变分支的长度，函数可以接受一个长度参数。总之，我们的代码现在看起来像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="2bb1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要画下一条线，我们需要从上一条线的末端开始，以一个新的角度来画。角度是相对于圆周率定义的，所以我们可以像这样添加到绘图函数中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="e149" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意我们第二次翻译的时候。这就把我们带到了树枝的顶端。从那里，我们旋转方向45度，画一个新的分支，长度是上一个分支的3/4。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/eba08dd975654315f989668734826806.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UHNgQfOdMDA2Gk_Z8FBB6w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">两条绿色细线从黑色画布的底部延伸出来</p></figure><p id="01a4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来自然要做的是绘制下一个分支，从上一个分支开始。</p><p id="ddf9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以在那里进行平移，但是当我们制作越来越多的分支时，我们必须上下平移每个分支，这将变得非常难以扩展。这就是下一个p5工具如此有用的原因。</p><h2 id="b95e" class="ma mb iq bd mp oc od dn mt oe of dp mx le og oh mz li oi oj nb lm ok ol nd om bi translated"><strong class="ak"> pop()和push() </strong></h2><p id="4c4c" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">这些函数允许我们在画布上绘制，然后在绘制下一个元素之前重置回之前的位置。</p><p id="57f2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下一次，我们将旋转相反的角度，并在那个方向绘制相同的分支。draw函数现在看起来像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="b004" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这给了我们两个分支。我们已经上路了！但是要重复这个函数，我们仍然需要向上平移下一个分支，然后向下和向上平移下一个分支，以绘制更多的分支。</p><p id="e5bd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果没有…的力量，这仍然是非常重复的执行</p><h2 id="1831" class="ma mb iq bd mp oc od dn mt oe of dp mx le og oh mz li oi oj nb lm ok ol nd om bi translated"><strong class="ak">递归</strong></h2><p id="528d" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">递归将帮助我们执行所有的后续操作，而无需写出每一个操作。递归是非常强大的——强大到如果你不给它一个断点，它可以通过试图永远运行来破坏你的代码。</p><p id="2416" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我选择了分支长度达到1时的断点。我的浏览器花了几秒钟才运行起来。根据计算机的速度，您可能希望将最小长度设置为3或5或更高。</p><p id="c69c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通过将<code class="fe ls lt lu lv b">push</code>、<code class="fe ls lt lu lv b">pop</code>、<code class="fe ls lt lu lv b">rotate</code>和<code class="fe ls lt lu lv b">branch</code>函数移到我们的分支函数中，我们的代码现在看起来像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="eabd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最终呈现出我们的第一个分形:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/bd78efb6b2a6389e8f15a70567eb6e18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4hwvMI9N9lR7kSiu-jY9Ww.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">羊角面包</p></figure></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="33ed" class="mo mb iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated"><strong class="ak">接下来是什么？</strong></h1><p id="0f31" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">如果您自己一直在运行这段代码，那么您可能已经对如何试验和定制有了一些想法。您可以更改旋转角度、分支长度、添加更多分支、更改颜色或更彻底地修改函数。</p><p id="eb9e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有时，如果渲染时间过长，您可能需要降低在<code class="fe ls lt lu lv b">if</code>语句中建立的最小长度。</p><p id="03bb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是上面代码的修改版本，增加了一个滑块，允许用户在浏览器中实时改变角度。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="be4f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让这个项目成为你自己的吧。P5是一个强大的工具，如果你对常见的功能和它们的行为有一点了解，你就已经很熟悉了。</p><p id="6631" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要运行这段代码，你可以从<a class="ae lr" href="https://github.com/BenMiriello/Fractal-Fun-V1" rel="noopener ugc nofollow" target="_blank">我的GitHub repo </a>中克隆它。</p></div></div>    
</body>
</html>