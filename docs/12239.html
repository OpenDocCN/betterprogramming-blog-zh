<html>
<head>
<title>Meet Heyoo — an Open-source Python Wrapper for WhatsApp Cloud API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">见见Heyoo——WhatsApp云API的开源Python包装器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/programming-whatsapp-is-now-even-easier-for-python-developers-e1a4343deed6?source=collection_archive---------0-----------------------#2022-05-21">https://betterprogramming.pub/programming-whatsapp-is-now-even-easier-for-python-developers-e1a4343deed6?source=collection_archive---------0-----------------------#2022-05-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a1e9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">对于Python开发者来说，现在编写WhatsApp更容易了</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3790853381efba4d7f7d3cf776655708.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nxaR8blDskCa0fKQ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@eyestetix?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Eyestetix工作室</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="0381" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">WhatsApp是一个免费的多平台信息程序，允许你通过互联网进行视频和电话对话，发送短信等。WhatsApp在生活在其他国家并希望保持联系的朋友和家人中非常受欢迎，拥有超过20亿活跃用户。</p><h1 id="1d8b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">用于开发WhatsApp应用的python库</h1><p id="b258" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">WhatsApp最近开放了其云API，以使开发者更容易与其消息服务集成，但入门可能很难。</p><p id="d425" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mn mo mp mq b">Heyoo</code>是由<a class="ae ky" href="https://github.com/Neurotech-HQ/heyoo" rel="noopener ugc nofollow" target="_blank"> Neurotech </a>开发的开源Python包装器，使集成更加容易。</p><h1 id="d89e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">支持的功能</h1><ul class=""><li id="9b1a" class="mw mx it lb b lc mr lf ms li my lm mz lq na lu nb nc nd ne bi translated">消息发送</li><li id="60ae" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">媒体分发(图像、音频、视频和文件)</li><li id="0494" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">发送位置</li><li id="ee60" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">发送交互式按钮</li><li id="ba5f" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">发送消息模板</li></ul><h1 id="5c71" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">走吧</h1><p id="8753" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">要开始使用<code class="fe mn mo mp mq b">heyoo</code>，您必须首先安装库，手动或使用pip。</p><h1 id="7e7e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">直接安装</h1><p id="77c6" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">您可以用git克隆项目存储库，或者直接下载它，如下所示。</p><pre class="kj kk kl km gt nk mq nl nm aw nn bi"><span id="d863" class="no lw it mq b gy np nq l nr ns">$ git clone https://github.com/Neurotech-HQ/heyoo<br/>$ cd heyoo<br/>heyoo $ python setup.py install</span></pre><h1 id="9987" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">安装</h1><pre class="kj kk kl km gt nk mq nl nm aw nn bi"><span id="d389" class="no lw it mq b gy np nq l nr ns"># For Windows <br/><br/>pip install  --upgrade heyoo<br/><br/>#For Linux | MAC <br/><br/>pip3 install --upgrade heyoo</span></pre><h1 id="d20c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">入门指南</h1><p id="3ee4" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">要运行这个包中的代码，你需要一个<strong class="lb iu">令牌</strong>和一个<strong class="lb iu">测试WHATSAPP号</strong>。</p><p id="847b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您必须在<a class="ae ky" href="https://developers.facebook.com/" rel="noopener ugc nofollow" target="_blank">脸书开发者门户</a>设置一个脸书开发者账户，稍后系统会提示您设置一个脸书商业账户。</p><p id="6344" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://developers.facebook.com/" rel="noopener ugc nofollow" target="_blank">https://developers.facebook.com/</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/eda1c66a118f5440b08b65b52bcfb5ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QqX63tV50EgHvH03XAE57Q.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/f40d61f12d32dcb8230faa0abbf44b8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mzv21bv2gC6sQGNrCibXFg.png"/></div></div></figure><p id="f04d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一些入门指南。</p><ul class=""><li id="4e0e" class="mw mx it lb b lc ld lf lg li nv lm nw lq nx lu nb nc nd ne bi translated">转到您的应用程序。</li><li id="4515" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><strong class="lb iu">创建应用程序</strong></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl ny"><img src="../Images/fdde3294f9c8e5736500d11f74db23a9.png" data-original-src="https://miro.medium.com/v2/format:webp/1*MNEk-Wa1vLKxug9_-FSgPQ.png"/></div></figure><ul class=""><li id="e163" class="mw mx it lb b lc ld lf lg li nv lm nw lq nx lu nb nc nd ne bi translated"><strong class="lb iu">选择业务&gt; &gt;业务:会要求你填写一些基本的app信息。</strong></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/64774fb9cce8f6ee037b60d024534ca1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fzlOEg_PQNd0roDx0uF0QA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/7005ee7c4d77ed64561f2104655392bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IZu6k5jtWEgCp8JnO_RdWg.png"/></div></div></figure><ul class=""><li id="2735" class="mw mx it lb b lc ld lf lg li nv lm nw lq nx lu nb nc nd ne bi translated">接下来，系统会提示您在应用中加入产品。应该包括WhatsApp Messenger。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/b388e08a91970270aaa86ea9355ff399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PM-Ue-unYyqlPvaSj-gjQA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/81146ae1bb544e8c61057c298eee194f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ah33hkNPdxV13S6JPLOs1A.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/88e4872c9f7eda004c47935d51a3846f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3zs5cPjSk_5j6lrVn-RTow.png"/></div></div></figure><ul class=""><li id="2099" class="mw mx it lb b lc ld lf lg li nv lm nw lq nx lu nb nc nd ne bi translated">创建一个商业帐户后，你会注意到你的令牌和测试WHATSAPP号码就在那里。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/b3e0ac99f5d108811b425845af18df93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X0iEm7TyZZxZlWj-N_3p0A.png"/></div></div></figure><ul class=""><li id="0c7c" class="mw mx it lb b lc ld lf lg li nv lm nw lq nx lu nb nc nd ne bi translated">最后，仔细检查您将在To字段中用于测试的号码。</li><li id="0593" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">完成前面的步骤后，就可以开始研究包装器了。</li></ul><h1 id="df33" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">证明</h1><p id="d7ff" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">如何验证您的应用程序？</p><pre class="kj kk kl km gt nk mq nl nm aw nn bi"><span id="68aa" class="no lw it mq b gy np nq l nr ns">from heyoo import WhatsApp<br/>messenger = WhatsApp('TOKEN',  phone_number_id='104xxxxxx')</span></pre><p id="5ba8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦你验证了你的应用程序，现在你可以开始使用上述功能，如上所示。</p><h1 id="9774" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">发送消息</h1><p id="fd26" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">以下是发送信息的方法:</p><pre class="kj kk kl km gt nk mq nl nm aw nn bi"><span id="1643" class="no lw it mq b gy np nq l nr ns">messenger.send_message('Your message ', 'xxxxxxxxxxx') # put mobile number where there is xxxxxxxxxxx</span></pre><h1 id="e1a4" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">例子</h1><pre class="kj kk kl km gt nk mq nl nm aw nn bi"><span id="c13f" class="no lw it mq b gy np nq l nr ns">messenger.send_message('Hi there just testing', 'xxxxxxxxxxx') # put mobile number where there is xxxxxxxxxxx</span></pre><h1 id="ff70" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">发送图像</h1><p id="7178" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">使用相同的方法传输媒体(图像、视频、音频、gif和文档)时，可以指定包含媒体的链接，也可以指定对象id。</p><p id="735e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，所有的media方法都假设你正在发送一个带有media的链接，但是你可以通过指定<code class="fe mn mo mp mq b">link=False</code>来改变这一点。</p><pre class="kj kk kl km gt nk mq nl nm aw nn bi"><span id="4ba5" class="no lw it mq b gy np nq l nr ns">messenger.send_image(image="https://i.imgur.com/Fh7XVYY.jpeg",<br/>        recipient_id="255757xxxxxx",)</span></pre><h1 id="9733" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">发送视频</h1><pre class="kj kk kl km gt nk mq nl nm aw nn bi"><span id="a31a" class="no lw it mq b gy np nq l nr ns">messenger.send_video(video="https://www.youtube.com/watch?v=K4TOrB7at0Y",recipient_id="255757xxxxxx",)</span></pre><h1 id="5432" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">发送音频</h1><p id="18bd" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">这里有一个例子:</p><pre class="kj kk kl km gt nk mq nl nm aw nn bi"><span id="962a" class="no lw it mq b gy np nq l nr ns">&gt;&gt;&gt; messenger.send_audio(<br/>        audio="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",<br/>        recipient_id="255757xxxxxx",<br/>    )</span></pre><h1 id="84ea" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">发送文档</h1><pre class="kj kk kl km gt nk mq nl nm aw nn bi"><span id="8d32" class="no lw it mq b gy np nq l nr ns">messenger.send_document(<br/>        document="http://www.africau.edu/images/default/sample.pdf",<br/>        recipient_id="255757xxxxxx",<br/>    )</span></pre><h1 id="9f3f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">发送位置</h1><pre class="kj kk kl km gt nk mq nl nm aw nn bi"><span id="7345" class="no lw it mq b gy np nq l nr ns">messenger.send_location(<br/>        lat=1.29,<br/>        long=103.85,<br/>        name="Singapore",<br/>        address="Singapore",<br/>        recipient_id="255757xxxxxx",<br/>    )</span></pre><h1 id="5b76" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">发送交互式按钮</h1><pre class="kj kk kl km gt nk mq nl nm aw nn bi"><span id="8bea" class="no lw it mq b gy np nq l nr ns">messenger.send_button(<br/>        recipient_id="255757xxxxxx",<br/>        button={<br/>            "header": "Header Testing",<br/>            "body": "Body Testing",<br/>            "footer": "Footer Testing",<br/>            "action": {<br/>                "button": "Button Testing",<br/>                "sections": [<br/>                    {<br/>                        "title": "iBank",<br/>                        "rows": [<br/>                            {"id": "row 1", "title": "Send Money", "description": ""},<br/>                            {<br/>                                "id": "row 2",<br/>                                "title": "Withdraw money",<br/>                                "description": "",<br/>                            },<br/>                        ],<br/>                    }<br/>                ],<br/>            },<br/>        },<br/>    )</span></pre><h1 id="ccbd" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">发送模板消息</h1><p id="7b10" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">以下是如何发送预先批准的模板消息。</p><pre class="kj kk kl km gt nk mq nl nm aw nn bi"><span id="0c01" class="no lw it mq b gy np nq l nr ns">messenger.send_template("hello_world", "255757xxxxxx")</span></pre></div><div class="ab cl of og hx oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="im in io ip iq"><p id="7a5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看Neurotech的Heyoo <a class="ae ky" href="https://github.com/Neurotech-HQ/heyoo" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>。</p></div></div>    
</body>
</html>