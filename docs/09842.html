<html>
<head>
<title>How To Create Pull Requests Which Are a Pleasure To Review?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建令人愉快的拉动式请求？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-pull-requests-which-are-a-pleasure-to-review-d4ef46c63d07?source=collection_archive---------2-----------------------#2021-10-20">https://betterprogramming.pub/how-to-create-pull-requests-which-are-a-pleasure-to-review-d4ef46c63d07?source=collection_archive---------2-----------------------#2021-10-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d31f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一些工具和模板来控制拉取请求</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8ecb1435c50e1d645ec964e416b55df3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Kn2cgpjyq4Ei08g0"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">扬西·敏</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="694d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你正在阅读这篇博文，你可能已经感受到了没有描述和上下文的4000行拉请求的痛苦。</p><p id="e77b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">任何人都不应该在打开一个拉取请求时翻白眼和呻吟。如果你也认为让他们愉快地接受审查的责任在于提出拉取请求的工程师，请继续阅读。</p><h1 id="4d0d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">拉式请求模板</h1><p id="3ab4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们公司最近开始使用拉式请求模板。拉动式请求模板提供了一个模板，工程师可以在编写拉动式请求时填写该模板。</p><p id="686a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们不会在拉式请求中强制说明，但是我发现如果您包含一个模板，工程师可能会填写字段，并为审阅者提供一些上下文。</p><p id="15e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这在您审查您当前没有处理的功能/项目时特别有用。要添加一个模板到你的项目中，你必须创建一个<code class="fe mp mq mr ms b">pull_request_template.md</code>文件，这个文件可以在你的项目的根目录下可见或者隐藏在一个<code class="fe mp mq mr ms b">.github/</code>目录中。这是我们采用的模板:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">点击raw查看原始降价文件</p></figure><p id="28da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当工程师用简单的英语思考他们所做的更改时，这个模板是有用的，从而使审核者更清楚地了解拉取请求。关于拉请求模板的更多信息可以在<a class="ae kv" href="https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/creating-a-pull-request-template-for-your-repository" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h1 id="50ca" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">对拉取请求大小的限制</h1><p id="0aa1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">施加一个大小限制使得拉取请求更加简洁，并且更容易被审阅者理解，这意味着他们可以用更少的努力来捕捉任何潜在的错误。</p><p id="8613" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">认知负荷和拉请求的大小之间的关系是指数级的——在一定的规模下，评审者甚至不会阅读代码，错误就会溜走。</p><p id="9803" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了解决这个问题，我们对拉取请求施加了400行代码的长度限制。在此限制下，我们有时需要将功能分解为多个拉式请求(即SQ4–123-a、SQ4–123-b、SQ4–123-c等)。)并发现代码审查在这样做时更有效。</p><p id="ec3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">提交历史确实变得有点混乱，但是我们觉得这是一个值得的权衡；评论者考虑的越少，他们在评论中就能抓住更多。</p><p id="e673" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">400行的限制可能不适合您的项目。这里有一个有趣的工具<a class="ae kv" href="https://www.pullrequest.com/blog/benchmarks-code-review-size/" rel="noopener ugc nofollow" target="_blank"/>，它将你的组织与行业中的其他组织进行比较。</p><h1 id="1785" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">在GitHub上使用什么工具</h1><p id="4e18" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">有几个代码拉取请求工具使得审查代码变得更加容易。以下是我最喜欢的几个:</p><ol class=""><li id="837e" class="mv mw iq ky b kz la lc ld lf mx lj my ln mz lr na nb nc nd bi translated"><a class="ae kv" href="https://reviewable.io/" rel="noopener ugc nofollow" target="_blank">可查看的</a>——这是一个比Github的原生视图更好的用户界面，它有大量的键盘快捷键来帮助查看。如果您希望使用可复查，也可以通过提交进行复查。</li><li id="6009" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated">GitHub . dev——你知道吗，如果你在GitHub repo上按下<code class="fe mp mq mr ms b">.</code>,你会被带到一个web版本的VSCode？这也适用于拉请求，你可以清楚地看到所有的文件被修改，并在IDE中随心所欲地添加注释。</li><li id="92ca" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated">GitHub的更好的拉取请求——与上面类似，这个chrome扩展将允许你浏览在类似IDE的树形结构中改变的文件。</li><li id="e9bb" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated"><a class="ae kv" href="https://github.com/marketplace/codacy" rel="noopener ugc nofollow" target="_blank">Codacy</a>——使用这个GitHub应用程序，您将能够去除平凡的代码评审活动(比如代码风格)，它自动化了代码评审的某些方面。</li><li id="ba3d" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated">使用<a class="ae kv" href="https://github.com/typicode/husky" rel="noopener ugc nofollow" target="_blank"> Husky </a>的预提交/预推送挂钩——这些任务在提交或推送代码之前在本地运行；他们可以做诸如运行测试、运行lint检查器和检查提交消息之类的事情，并且他们可以捕捉到一些本来可能会漏掉的东西。这将简化审查者的代码审查。</li></ol></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="a8b9" class="ls lt iq bd lu lv nq lx ly lz nr mb mc jw ns jx me jz nt ka mg kc nu kd mi mj bi translated">自我检讨</h1><p id="0b2a" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">总是值得考虑的；您愿意审核自己的拉动式请求吗？</p><p id="1222" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我个人使用的技巧。虽然看起来很傻，但我假装自己是评审者，在要求别人之前先评审我自己写的代码。</p><p id="cc02" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我把评论留给自己，一旦我解决了它们，我就解决它们。即使使用了我上面提到的所有工具，我仍然会在检查我自己的代码时发现一些东西。之后，我会要求其他人进行审核，希望我已经让他们感到更愉快，并减少了在合并之前可能会遗漏的内容。</p><p id="9393" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了这些工具，对于评审者来说，你可以使拉请求变得不那么费力，甚至是愉快的。如果你有更多的建议，请告诉我们。我们喜欢听到和探索新的方法来改进我们的流程。</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="cd17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nv">最初发表于</em><a class="ae kv" href="https://www.brightec.co.uk/blog/what-are-the-best-tools-to-use-for-pull-requests" rel="noopener ugc nofollow" target="_blank"><em class="nv">【https://www.brightec.co.uk】</em></a><em class="nv">。</em></p></div></div>    
</body>
</html>