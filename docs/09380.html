<html>
<head>
<title>How to Add Internationalization in Your Next.js App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在你的Next.js应用中添加国际化</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-add-internationalization-in-your-next-js-app-a038c9407a1b?source=collection_archive---------4-----------------------#2021-08-17">https://betterprogramming.pub/how-to-add-internationalization-in-your-next-js-app-a038c9407a1b?source=collection_archive---------4-----------------------#2021-08-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8e28" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在Next.js中实现国际化路由和本地化</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/41b3fba878c5088e69d69714150d921a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r33rS2xGC3_68KPp"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@farzadme?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Farzad Mohsenvand </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="72ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">国际化，通常缩写为i18n，是准备网站或web app以支持本地语言和设置的过程。这分两个主要部分完成。首先是添加国际化路由。第二是文本本地化。</p><p id="b45f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从版本10开始，Next.js提供了处理国际化路由的内置支持。</p><p id="356d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将了解如何在Next.js中为应用程序添加国际化。在本文结束时，您应该了解如何执行以下操作:</p><ul class=""><li id="8af2" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">将国际化路由添加到Next.js应用程序</li><li id="482a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">处理不同地区之间的转换</li><li id="4f14" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">向应用程序添加翻译文本</li></ul><p id="200f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这个例子，我们将使用一个用<code class="fe mj mk ml mm b">create-next-app</code>创建的基本应用程序。</p><p id="c134" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您是Next.js的新手，请查看下面的文章开始学习:</p><div class="mn mo gp gr mp mq"><a href="https://blog.devgenius.io/what-i-learned-from-the-create-a-next-js-app-tutorial-1f506b56173d" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd iu gy z fp mv fr fs mw fu fw is bi translated">我从Create a Next.js应用程序教程中学到了什么</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">Next.js路由、样式、预渲染和部署简介</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">blog.devgenius.io</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne ks mq"/></div></div></a></div><h1 id="b517" class="nf ng it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">国际化路由</h1><p id="e5fe" class="pw-post-body-paragraph kz la it lb b lc nx ju le lf ny jx lh li nz lk ll lm oa lo lp lq ob ls lt lu im bi translated">国际化的第一步是添加国际化路由。在Next.js应用程序中，我们可以将<code class="fe mj mk ml mm b">i18n</code>配置添加到<code class="fe mj mk ml mm b">next.config.js</code>文件中。</p><p id="2078" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将传递一个对象并包含两个值。</p><p id="1951" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个值是您希望在应用程序中支持的区域设置数组。区域设置是UTS区域设置标识符，这是定义区域设置的标准格式。对于这个例子，我将向数组中添加两个语言环境，<code class="fe mj mk ml mm b">en</code>(英语)和<code class="fe mj mk ml mm b">ja</code>(日语)。</p><p id="c86e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二个值是一个字符串，指定您想要使用的默认区域设置。我会将默认区域设置设置为<code class="fe mj mk ml mm b">en</code>(英语)。</p><pre class="kj kk kl km gt oc mm od oe aw of bi"><span id="e830" class="og ng it mm b gy oh oi l oj ok"><em class="ol">module</em>.<em class="ol">exports</em> = {<br/>  i18n: {<br/>    locales: ['en', 'ja'],<br/>    defaultLocale: 'en',<br/>  },<br/>};</span></pre><h2 id="69cf" class="og ng it bd nh om on dn nl oo op dp np li oq or nr lm os ot nt lq ou ov nv ow bi translated">现场策略</h2><p id="327a" class="pw-post-body-paragraph kz la it lb b lc nx ju le lf ny jx lh li nz lk ll lm oa lo lp lq ob ls lt lu im bi translated">处理国际化路由有两种方式:子路径路由和域路由。</p><p id="b201" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">子路径路由示例</strong></p><ul class=""><li id="ea5e" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">英语:<code class="fe mj mk ml mm b">/blog</code></li><li id="6257" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">日语:<code class="fe mj mk ml mm b">/ja/blog</code></li></ul><p id="9916" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">域路由示例</strong></p><ul class=""><li id="67ea" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">英语:<code class="fe mj mk ml mm b">example.com/blog</code></li><li id="c6cf" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">日语:<code class="fe mj mk ml mm b">example.ja/blog</code></li></ul><p id="c1f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本例中，我们将使用子路径路由。</p><h1 id="d44c" class="nf ng it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">更改区域设置</h1><h2 id="33c4" class="og ng it bd nh om on dn nl oo op dp np li oq or nr lm os ot nt lq ou ov nv ow bi translated">自动现场检测</h2><p id="3fe2" class="pw-post-body-paragraph kz la it lb b lc nx ju le lf ny jx lh li nz lk ll lm oa lo lp lq ob ls lt lu im bi translated">Next.js提供了自动区域检测。这意味着Next.js将尝试根据用户自动检测首选的语言环境。</p><p id="a861" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我启动我的项目并在浏览器中访问它，我将被带到<a class="ae ky" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>。这是因为我将浏览器设置为默认语言为英语。如果你使用的是谷歌Chrome，你可以在<em class="ol">设置- &gt;高级- &gt;语言</em>中查看这个。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/8da87f95af1d6de10866b73334067030.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hxlk3dibDSvb6pe0naqZng.png"/></div></div></figure><p id="6d41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，如果我更改了Google Chrome中的设置，将日语设置为默认语言，我将被带到<a class="ae ky" href="http://localhost:3000/ja" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/ja</a>。</p><h2 id="41a0" class="og ng it bd nh om on dn nl oo op dp np li oq or nr lm os ot nt lq ou ov nv ow bi translated">区域转换</h2><p id="0a72" class="pw-post-body-paragraph kz la it lb b lc nx ju le lf ny jx lh li nz lk ll lm oa lo lp lq ob ls lt lu im bi translated">我们也可以手动处理地区之间的转换。</p><p id="7ba9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这可以通过使用<code class="fe mj mk ml mm b">next/link</code>来实现。可以向<code class="fe mj mk ml mm b">next/link</code>提供一个<code class="fe mj mk ml mm b">locale</code>道具来处理地区间的转换。</p><p id="2980" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比如我会在标题下面加两个链接:一个改成英文，一个改成日文。每个链接将有一个<code class="fe mj mk ml mm b">href=”/”</code>属性和一个等同于适当区域设置的区域设置属性。</p><pre class="kj kk kl km gt oc mm od oe aw of bi"><span id="8301" class="og ng it mm b gy oh oi l oj ok">&lt;div&gt;<br/>  &lt;<em class="ol">Link</em> <em class="ol">href</em>="/" <em class="ol">locale</em>="en"&gt;<br/>    &lt;a <em class="ol">className</em>={styles.locale}&gt;English&lt;/a&gt;<br/>  &lt;/<em class="ol">Link</em>&gt;<br/>  &lt;<em class="ol">Link</em> <em class="ol">href</em>="/" <em class="ol">locale</em>="ja"&gt;<br/>    &lt;a <em class="ol">className</em>={styles.locale}&gt;Japanese&lt;/a&gt;<br/>  &lt;/<em class="ol">Link</em>&gt;<br/>&lt;/div&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/6c5cd98db4f3c3b06850547bc312d195.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ggmCAqSbto-kpxnc8y2gaw.png"/></div></div></figure><p id="70bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们点击任何一个链接，我们将被发送到相应的网址。</p><p id="2d15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">英文:</strong><a class="ae ky" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/</a></p><p id="a048" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">日语:</strong><a class="ae ky" href="http://localhost:3000/ja" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/ja</a></p><h1 id="6262" class="nf ng it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">本地化</h1><p id="3d25" class="pw-post-body-paragraph kz la it lb b lc nx ju le lf ny jx lh li nz lk ll lm oa lo lp lq ob ls lt lu im bi translated">国际化的第二部分是将内容翻译成正确的语言。如果我访问英文网站，我希望看到英文网站；如果我访问日本地区，我想看看日文网站。</p><p id="3393" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本地化文本最简单的方法是创建两个独立的对象，每个对象都包含翻译后的文本。例如，我将创建两个新文件:<code class="fe mj mk ml mm b">locales/en.js</code>和<code class="fe mj mk ml mm b">locales/ja.js</code>。</p><p id="e2c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> locales/en.js </strong></p><pre class="kj kk kl km gt oc mm od oe aw of bi"><span id="cce4" class="og ng it mm b gy oh oi l oj ok">export const en = {<br/>  title: 'Welcome to ',<br/>};</span></pre><p id="f47f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> locales/ja.js </strong></p><pre class="kj kk kl km gt oc mm od oe aw of bi"><span id="d596" class="og ng it mm b gy oh oi l oj ok">export const ja= {<br/>  title: 'ようこそへ',<br/>};</span></pre><p id="bd39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe mj mk ml mm b">index.js</code>文件中，我们可以导入<code class="fe mj mk ml mm b">en</code>和<code class="fe mj mk ml mm b">ja</code>对象。我们还需要使用<code class="fe mj mk ml mm b">next/router</code>。</p><pre class="kj kk kl km gt oc mm od oe aw of bi"><span id="17f6" class="og ng it mm b gy oh oi l oj ok">import { useRouter } from 'next/router';<br/>import { en } from '../locales/en';<br/>import { ja } from '../locales/ja';</span></pre><p id="9580" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要检查我们当前使用的是哪种语言环境，我们可以调用返回路由器对象的<code class="fe mj mk ml mm b">useRouter()</code>钩子。然后，我们可以根据当前显示的语言环境设置一个变量。</p><pre class="kj kk kl km gt oc mm od oe aw of bi"><span id="6eb7" class="og ng it mm b gy oh oi l oj ok">const router = useRouter();<br/>const t = router.locale === 'en' ? en : ja;</span></pre><p id="785b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在这里做的是检查<code class="fe mj mk ml mm b">router.locale</code>。如果它等于<code class="fe mj mk ml mm b">en</code>，我们将设置变量<code class="fe mj mk ml mm b">t</code>等于<code class="fe mj mk ml mm b">en</code>对象。如果<code class="fe mj mk ml mm b">router.locale</code>不等于<code class="fe mj mk ml mm b">en</code>，我们将设置变量<code class="fe mj mk ml mm b">t</code>等于<code class="fe mj mk ml mm b">ja</code>对象。</p><p id="1d41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们可以用<code class="fe mj mk ml mm b">{t.title}</code>值替换标题文本。</p><pre class="kj kk kl km gt oc mm od oe aw of bi"><span id="10c0" class="og ng it mm b gy oh oi l oj ok">&lt;h1 <em class="ol">className</em>={styles.title}&gt;<br/>  <strong class="mm iu">{t.title}</strong><br/>  &lt;a <em class="ol">href</em>="https://nextjs.org"&gt;Next.js!&lt;/a&gt;<br/>&lt;/h1&gt;</span></pre><p id="0359" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，当网站的区域设置改变时，标题文本也将改变为适当的语言。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/708ea1efa65e534615ad8268b56e65a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*Jy0q8tS9kyQ3ynr8-yCx_Q.gif"/></div></figure><h1 id="9a1d" class="nf ng it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">结论</h1><p id="d535" class="pw-post-body-paragraph kz la it lb b lc nx ju le lf ny jx lh li nz lk ll lm oa lo lp lq ob ls lt lu im bi translated">感谢阅读！我希望这篇文章对您将国际化添加到Next.js应用程序有所帮助。Next.js版本10内置了对国际化路由的支持。你可以查看他们的文档<a class="ae ky" href="https://nextjs.org/docs/advanced-features/i18n-routing" rel="noopener ugc nofollow" target="_blank">这里</a>来了解更多。</p><p id="4c50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想继续了解Next.js，请查看下面的文章:</p><div class="mn mo gp gr mp mq"><a href="https://levelup.gitconnected.com/how-to-handle-routing-in-your-next-js-app-6ba71280b922" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd iu gy z fp mv fr fs mw fu fw is bi translated">如何在你的Next.js应用中处理路由</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">查看页面目录、动态路由、链接组件和用户外部挂钩</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mz l"><div class="pa l nb nc nd mz ne ks mq"/></div></div></a></div><div class="mn mo gp gr mp mq"><a href="https://levelup.gitconnected.com/optimize-images-from-an-external-website-with-the-image-component-from-next-js-aa104a1f78e0" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd iu gy z fp mv fr fs mw fu fw is bi translated">使用Next.js中的图像组件优化外部网站中的图像</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">Next.js中图像组件的介绍</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mz l"><div class="pb l nb nc nd mz ne ks mq"/></div></div></a></div><p id="8637" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">资源</strong></p><ul class=""><li id="914d" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" href="https://nextjs.org/docs/advanced-features/i18n-routing" rel="noopener ugc nofollow" target="_blank">https://nextjs.org/docs/advanced-features/i18n-routing</a></li></ul></div></div>    
</body>
</html>