# 10 的力量——NASA 的编码规则

> 原文：<https://betterprogramming.pub/the-power-of-10-nasas-rules-for-coding-43ae1764f73d>

## 这 10 条规则旨在消除某些 C 编码实践，这些实践使得代码难以审查或静态分析。

![](img/ef0d9e7479a7d4c66c6a87764f1b0439.png)

以下是美国宇航局对这些规则的看法:

> *这些规则就像你汽车上的安全带:最初，它们可能会有点不舒服，但过一段时间，它们的使用就变成了第二天性——不使用它们就变得不可思议了。*

[![](img/544d66d036d51d0ab14f01a2f40d78ac.png)](https://amzn.to/2PaNeyt)

杰拉德·霍尔兹曼

[10 条规则的力量](https://en.wikipedia.org/wiki/The_Power_of_10:_Rules_for_Developing_Safety-Critical_Code)于 2006 年由美国宇航局/JPL 可靠软件实验室的杰拉德·j·霍尔兹曼创立。这些规则旨在消除某些 C 编码实践，这些实践使得代码难以审查或静态分析。

这些规则是对 [MISRA C 指南](https://amzn.to/2qiY8d0)的补充，并已被纳入更大的一套 [JPL 编码标准](https://github.com/stanislaw/awesome-safety-critical/blob/master/Backup/JPL_Coding_Standard_C.pdf)。

# 10 条规则

1.  避免复杂的流结构，例如`goto`和`recursion`
2.  所有循环都必须有固定的界限(这可以防止代码失控)
3.  避免堆内存分配
4.  将功能限制在单个打印页面上
5.  每个函数至少使用两个运行时断言
6.  将数据范围限制到最小
7.  检查所有非 void 函数的返回值，或强制转换为 void 以指示返回值是无用的
8.  谨慎使用预处理器
9.  将指针的使用限制在一次解引用中，不要使用函数指针
10.  编译时激活所有可能的警告；所有的警告都应该在软件发布之前解决

这些规则是为 C 语言定义的，但其中一些也可能用于现代 web 或移动项目。以下是我的选择。

# 1.避免复杂的流结构，如 Goto 和递归

如果不需要做一个简单的`for` 可以处理的相同任务，我不会使用`recursion`；递归在你不能直接访问你的机器的地方是非常危险的，比如你在火星、月球或者海底！

# 2.所有循环必须有固定的界限(这可以防止代码失控)

与第一条规则类似，我将使用固定的边界来循环，以防止无限循环或代码失控。

# 4.将功能限制在单个打印页面上

将函数的长度缩短到一页，可以更容易地掌握程序中特定例程的所有功能。

如果你超过了这个长度，就意味着你在代码中添加了太多的动作。

另一个问题可能是您没有将函数分割成更小的函数来防止代码重复。

# 6.将数据范围限制到最小

如果你正在使用 JavaScript，千万不要使用`var`——总是喜欢使用`let`,以防止变量泄漏或覆盖，甚至重影。

其他语言也应该如此，比如 C#。为你的变量使用最受保护和最小的作用域，比如`private`或者`protected`。

# 10.编译时激活所有可能的警告；所有警告都应在软件发布前解决

使用 JavaScript，你不能编译你的代码，但是你可以很容易地使用 ESLint 或者类似的工具从你的代码中得到警告。

然后，您应该删除并修复所有这些组件，即使您认为它们没有用。

现在我们已经准备好向火星发射我们的代码了！

[![](img/bc228463fecfbeee60ae0cbe8481b6c5.png)](https://commons.wikimedia.org/wiki/File:Curiosity_-_The_Next_Mars_Rover.jpg)

火星好奇号火星车