<html>
<head>
<title>Perform Speech Recognition in Your Javascript Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在您的Javascript应用程序中执行语音识别</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/perform-speech-recognition-in-your-javascript-applications-91367b0d0?source=collection_archive---------6-----------------------#2021-01-25">https://betterprogramming.pub/perform-speech-recognition-in-your-javascript-applications-91367b0d0?source=collection_archive---------6-----------------------#2021-01-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4696" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Web语音识别API简介</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/11301d6b3fe45a42e49e5d20ce601596.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bSs94VGkAo4THNDp5gpBtA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="a147" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://en.wikipedia.org/wiki/Speech_recognition" rel="noopener ugc nofollow" target="_blank">语音识别</a>是计算机科学和计算语言学的交叉子领域。它识别口语并将其翻译成文本。它也被称为自动语音识别(ASR)，计算机语音识别，或语音到文本(STT)。</p><p id="4dec" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">机器学习(ML)是人工智能(AI)的一种应用，它为系统提供了自动学习和根据经验进行改进的能力，而无需显式编程。机器学习为本世纪的大部分语音识别突破做出了贡献。如今，语音识别技术无处不在，比如<a class="ae lu" href="https://en.wikipedia.org/wiki/Siri" rel="noopener ugc nofollow" target="_blank">苹果Siri </a>、<a class="ae lu" href="https://en.wikipedia.org/wiki/Amazon_Echo" rel="noopener ugc nofollow" target="_blank">亚马逊Echo </a>、<a class="ae lu" href="https://en.wikipedia.org/wiki/Google_Nest_(smart_speakers)" rel="noopener ugc nofollow" target="_blank">谷歌Nest </a>。</p><p id="6fe9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">语音识别和语音响应(也称为语音合成或文本到语音(TTS))都是由Web语音API支持的。</p><p id="e65d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我们主要关注JavaScript应用程序中的语音识别。另一篇文章中的<a class="ae lu" href="https://medium.com/better-programming/perform-speech-synthesis-in-your-javascript-applications-ac3efa1eb6fa" rel="noopener">描述了语音合成。</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="159a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">语音识别界面</h1><p id="d01d" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated"><code class="fe mz na nb nc b">SpeechRecognition</code>是识别服务的控制器接口。在Chrome中被称为<code class="fe mz na nb nc b">webkitSpeechRecognition</code>。<code class="fe mz na nb nc b">SpeechRecognition</code>处理识别服务发送的<code class="fe mz na nb nc b">SpeechRecognitionEvent</code>。<code class="fe mz na nb nc b">SpeechRecognitionEvent.results</code>返回一个<code class="fe mz na nb nc b">SpeechRecognitionResultList</code>对象，代表当前会话的所有语音识别结果。</p><p id="fead" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe mz na nb nc b">SpeechRecognition</code>可以用几行代码进行初始化:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="e032" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe mz na nb nc b">recognition.start()</code>开始语音识别，<code class="fe mz na nb nc b">recognition.stop()</code>停止语音识别。也可以中止(<code class="fe mz na nb nc b">recognition.abort)</code>)。</p><p id="3350" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当页面访问您的麦克风时，地址栏中会出现一个麦克风图标，表示麦克风已打开并在工作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/7ef673fdd6bae11ae9da75584783be84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*7TlZFnLFtUDTHjOIfYf7hw.png"/></div></figure><p id="a9de" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们对着这一页说:“你好，逗号，我说的是句号。”<code class="fe mz na nb nc b">onresult</code>显示我们所说的所有中期结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/56a70c53aae752ea62c18f9607e99496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*egsri7ZKvKzeimuYSpo02g.png"/></div></div></figure><p id="60ab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是该示例的HTML代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="41f8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第25行创建了一个<code class="fe mz na nb nc b">SpeechRecognition</code>对象。第26行和第27行配置了<code class="fe mz na nb nc b">SpeechRecognition</code>对象。</p><p id="f93d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第28 - 34行设置了一个当单词或短语被正确识别时的事件处理程序。</p><p id="e870" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第19行开始语音识别，第12行停止语音识别。</p><p id="8acb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在第12行，单击按钮后，它可能仍然会打印出一些消息。这是因为<code class="fe mz na nb nc b">recognition.stop()</code>试图归还一只迄今为止捕获的<code class="fe mz na nb nc b">SpeechRecognitionResult</code>。如果你想完全停止，使用<code class="fe mz na nb nc b">recognition.abort()</code>代替。</p><p id="0df4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以看到动画按钮的代码(第38 - 51行)比语音识别代码长。这是一个例子的视频剪辑。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ne l"/></div></figure><p id="4fa9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是浏览器兼容性表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/f758c9a924a4f7400e07aded209f1769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2cuvFLivuHj1UNwwD7pM_w.png"/></div></div></figure><p id="0b49" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Web语音识别依赖于浏览器自带的语音识别引擎。在Chrome中，该引擎在云端执行识别。因此，它只在网上有效。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="def5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">语音识别库</h1><p id="6b89" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">有一些开源的语音识别库。以下是基于npm趋势的这些库的列表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/fef20e14f1f7aadb25d683b7176081d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DITC_zPH9rLNa_uzzErEdQ.png"/></div></div></figure><h2 id="ce10" class="nk md it bd me nl nm dn mi nn no dp mm lh np nq mo ll nr ns mq lp nt nu ms nv bi translated">1.安阳</h2><p id="94f5" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated"><a class="ae lu" href="https://github.com/TalAter/annyang" rel="noopener ugc nofollow" target="_blank"> Annyang </a>是一个JavaScript语音识别库，用语音命令控制网站。它构建在<code class="fe mz na nb nc b">SpeechRecognition</code>Web API之上。在下一节中，我们将举例说明annyang是如何工作的。</p><h2 id="2de2" class="nk md it bd me nl nm dn mi nn no dp mm lh np nq mo ll nr ns mq lp nt nu ms nv bi translated">2.artyom.js</h2><p id="1c9d" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated"><a class="ae lu" href="https://github.com/sdkcarlos/artyom.js" rel="noopener ugc nofollow" target="_blank"> artyom.js </a>是一个JavaScript语音识别和语音合成库。它建立在Web语音API之上。除了语音命令，它还提供语音响应。</p><h2 id="3f8c" class="nk md it bd me nl nm dn mi nn no dp mm lh np nq mo ll nr ns mq lp nt nu ms nv bi translated">3.咕哝</h2><p id="756e" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated"><a class="ae lu" href="https://github.com/jrunestone/mumble" rel="noopener ugc nofollow" target="_blank"> Mumble </a>是一个JavaScript语音识别库，用语音命令控制网站。它构建在<code class="fe mz na nb nc b">SpeechRecognition</code>Web API之上。这与annyang的工作方式类似。</p><h2 id="71d8" class="nk md it bd me nl nm dn mi nn no dp mm lh np nq mo ll nr ns mq lp nt nu ms nv bi translated">4.朱利叶斯</h2><p id="b221" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated"><a class="ae lu" href="https://github.com/julius-speech/julius" rel="noopener ugc nofollow" target="_blank"> Julius </a>是一款面向语音相关研究人员和开发人员的高性能、小尺寸、大词汇量连续语音识别(LVCSR)解码器软件。它可以在从微型计算机到云服务器的各种计算机和设备上进行实时解码。朱利斯是用C语言构建的，而julius.js是julius到JavaScript的自以为是的移植。</p><h2 id="8300" class="nk md it bd me nl nm dn mi nn no dp mm lh np nq mo ll nr ns mq lp nt nu ms nv bi translated">5.语音命令. js</h2><p id="e881" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated"><a class="ae lu" href="https://github.com/jimmybyrum/voice-commands.js" rel="noopener ugc nofollow" target="_blank"> voice-commands.js </a>是一个JavaScript语音识别库，通过语音命令来控制网站。它构建在<code class="fe mz na nb nc b">SpeechRecognition</code>Web API之上。这与annyang的工作方式类似。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9eb7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">安阳</h1><p id="8b12" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">Annyang初始化一个<code class="fe mz na nb nc b">SpeechRecognition</code>对象，定义如下:</p><pre class="kj kk kl km gt nw nc nx ny aw nz bi"><span id="8c80" class="nk md it nc b gy oa ob l oc od">var SpeechRecognition = root.SpeechRecognition ||                                     <br/>                        root.webkitSpeechRecognition ||                          <br/>                        root.mozSpeechRecognition ||                          <br/>                        root.msSpeechRecognition ||                          <br/>                        root.oSpeechRecognition;</span></pre><p id="a1ae" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有几个API可以启动或停止annyang:</p><ul class=""><li id="6bab" class="oe of it la b lb lc le lf lh og ll oh lp oi lt oj ok ol om bi translated"><code class="fe mz na nb nc b">annyang.start</code>:从<code class="fe mz na nb nc b">options</code> ( <code class="fe mz na nb nc b">autoRestart</code>、<code class="fe mz na nb nc b">continuous</code>或<code class="fe mz na nb nc b">paused</code>)开始听，如<code class="fe mz na nb nc b">annyang.start({ autoRestart: true, continuous: false })</code>。</li><li id="9d4c" class="oe of it la b lb on le oo lh op ll oq lp or lt oj ok ol om bi translated"><code class="fe mz na nb nc b">annyang.abort</code>:停止收听(停止语音识别引擎或关闭麦克风)。</li><li id="bbc6" class="oe of it la b lb on le oo lh op ll oq lp or lt oj ok ol om bi translated"><code class="fe mz na nb nc b">annyang.pause</code>:停止收听(不停止语音识别引擎或关闭麦克风)。</li><li id="b674" class="oe of it la b lb on le oo lh op ll oq lp or lt oj ok ol om bi translated"><code class="fe mz na nb nc b">annyang.resume</code>:开始监听，没有选项。</li></ul><p id="4367" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是该示例的HTML代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="9059" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第7行添加annyang源代码。</p><p id="3e4d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第20行开始annyang，第13行暂停annyang。</p><p id="1092" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Annyang提供语音命令来控制网页(第26 - 42行)。</p><p id="bac9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第27行是一个简单的命令。如果用户说<code class="fe mz na nb nc b">hello</code>，页面会回应“你说了‘你好’。”"</p><p id="b2b2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第30行是一个带<code class="fe mz na nb nc b">splats</code>的命令，贪婪地捕捉命令末尾的多词文本。如果你说，“<code class="fe mz na nb nc b">hi</code>，爱丽丝，”它会回答“你向爱丽丝打招呼了。”如果你说，“<code class="fe mz na nb nc b">hi</code>，爱丽丝和约翰，”它会回答“你问候了爱丽丝和约翰。”</p><p id="540a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第33行是带有<code class="fe mz na nb nc b">named variable</code>的命令。一周中的某一天被捕获为<code class="fe mz na nb nc b">day</code>，它在响应中被回显。</p><p id="5482" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第36行是带有<code class="fe mz na nb nc b">optional words</code>的命令。如果你说“黄色”，它被忽略。如果你提到任何一种原色，它会回答“你说了一个原色名称。”</p><p id="2823" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从第26行到第39行定义的所有命令都被添加到第41行的annyang中。</p><p id="22cd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里有一个视频片段作为例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ne l"/></div></figure><p id="4d77" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">语音识别几乎是正确的，只是把“约翰”当成了“乔”。</p><p id="f80c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Annyang回调对于理解听错非常有用。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="162e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是“<code class="fe mz na nb nc b">hi</code>，John”的输出，显示了引擎如何选择“Joe”而不是“John”</p><pre class="kj kk kl km gt nw nc nx ny aw nz bi"><span id="a600" class="nk md it nc b gy oa ob l oc od">hi Joe<br/>hi *splats<br/>(5) [" hi Joe", " hi John", " hi Jo", " High John", " hi JoJo"]</span></pre><p id="0b71" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下为“<code class="fe mz na nb nc b">I’m saying things to randomly</code>”的输出，相当准确。</p><pre class="kj kk kl km gt nw nc nx ny aw nz bi"><span id="ed07" class="nk md it nc b gy oa ob l oc od">I think the user said:  I'm saying things to randomly<br/>But then again, it could be any of the following:  <br/>(5) ["I'm saying things to randomly", "I'm seeing things to randomly", "I'm saying things the randomly", "I'm saying things randomly", "I'm saying things that are randomly"]</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7479" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="60cf" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">我们已经讨论了JavaScript应用程序中的语音识别。Chrome对Web语音API的支持最好。我们所有的例子都是在Chrome浏览器上实现和测试的。</p><p id="25c1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当你探索网络语音API时，这里有一个小提示:</p><p id="494b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您不希望在日常生活中听到声音，请记得关闭语音识别应用程序。</p><p id="12fc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">谢谢什拉达查达和乔纳森马，让我对这个领域感兴趣。</p><p id="5897" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这项工作的一部分是由乔纳森马贡献。</p><p id="feea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读。我希望这有所帮助。你可以在这里看到我的其他媒体出版物<a class="ae lu" href="https://medium.com/@jenniferfubook/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener"/>。</p></div></div>    
</body>
</html>