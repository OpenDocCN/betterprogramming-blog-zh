<html>
<head>
<title>How To Use SQLite in Bun, Deno, and Node</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Bun、Deno和Node中使用SQLite</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-sqlite-in-bun-deno-and-node-66001a9c3dcb?source=collection_archive---------5-----------------------#2022-08-22">https://betterprogramming.pub/how-to-use-sqlite-in-bun-deno-and-node-66001a9c3dcb?source=collection_archive---------5-----------------------#2022-08-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b5af" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">探究每种方法的优点和缺点</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/91f5639fcf4f0e716887abfee8a0e003.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z1j6Y2DgzJyp45-Q"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">约翰·汤纳在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="6718" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是SQLite？</h1><p id="7a59" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">SQLite是一个提供关系数据库管理系统(RDBMS)的软件库。SQLite中的lite意味着在设置、数据库管理和所需资源方面是轻量级的。</p><p id="ddd9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">SQLite是部署最广泛的SQL数据库引擎，它具有以下特性:</p><ul class=""><li id="2a59" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">自包含:它需要来自操作系统或外部库的最少支持。因此很容易被嵌入iPhones、Android手机、游戏机、手持媒体播放器等。</li><li id="8e5c" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">无服务器:它与访问数据库的应用程序集成在一起。应用程序与SQLite数据库交互，并直接从存储在磁盘上的数据库文件中读取和写入。它不同于普通的RDBMS，比如<a class="ae ky" href="https://en.wikipedia.org/wiki/MySQL" rel="noopener ugc nofollow" target="_blank"> MySQL </a>，它需要一个单独的服务器进程来运行。SQLite不需要服务器来运行。</li><li id="ed70" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">零配置:没有要安装的包，没有要配置、启动和停止的服务器进程。SQLite不使用任何配置文件。</li><li id="d9c5" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">事务性:所有事务都完全符合ACID，即原子的、一致的、隔离的和持久的。</li></ul><p id="9797" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">D.Richard Hipp在2000年春天设计了SQLite，数据库引擎是用C编程语言编写的。SQLite 1.0于2000年8月17日发布。SQLite 3.0.0于2004年6月18日发布。最新版本是3.39.2。版本3维持了18年，<a class="ae ky" href="https://www.sqlite.org/changes.html" rel="noopener ugc nofollow" target="_blank">延续到</a>。</p><h1 id="b313" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">安装SQLite</h1><p id="0ff3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">从macOS X 10.4及以上版本开始，SQLite已经默认安装在macOS上。不过，这不是最新版本。下面是如何做到这一点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="a781" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">运行<code class="fe ni nj nk nl b">brew upgrade sqlite3</code>进行升级。</p><p id="bcc4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">但是，它不会更新默认的SQLite。而是更新<code class="fe ni nj nk nl b">/usr/local/opt/sqlite/bin/sqlite3</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="82e9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">家酿不会覆盖默认的SQLite，因为它是macOS的默认SQLite，覆盖它可能会以一些意想不到的方式破坏系统。</p><p id="1aa2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">SQLite也可以从<a class="ae ky" href="https://www.sqlite.org/download.html" rel="noopener ugc nofollow" target="_blank">下载页面</a>安装。<code class="fe ni nj nk nl b">sqlite-tools-osx-x86–3390200.zip</code>是用于Mac OS X (x86)的预编译二进制文件——管理SQLite数据库文件的命令行工具包，包括<code class="fe ni nj nk nl b">sqldiff</code>、<code class="fe ni nj nk nl b">sqlite3</code>和<code class="fe ni nj nk nl b">sqlite3_analyzer</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="1f5a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe ni nj nk nl b">sqlite3</code>是SQLite的命令行实用程序，它允许用户针对SQLite数据库手动执行SQL语句。</p><p id="daae" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在本文中，我们将展示以下使用SQLite的方法:</p><ul class=""><li id="7f69" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">在命令行shell中使用SQLite</li><li id="58dc" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在Bun脚本中使用SQLite</li><li id="6e20" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在Deno脚本中使用SQLite</li><li id="c437" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在节点脚本中使用SQLite</li></ul><p id="1a2c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将比较Bun、Deno和Node如何连接和使用SQLite。</p><h1 id="7ad0" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">在命令行Shell中使用SQLite</h1><p id="9dca" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们可以使用macOS默认的SQLite，或者自制安装的SQLite，或者下载的SQLite来运行命令。</p><p id="fa8e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在下面的例子中，我们使用自制安装的SQLite。键入带有完整路径的<code class="fe ni nj nk nl b">sqlite3</code>来启动命令行shell:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="3299" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果显示的是<code class="fe ni nj nk nl b">...&gt;</code>，而不是执行结果，通常是由于缺少终止<code class="fe ni nj nk nl b">;</code>或缺少匹配<code class="fe ni nj nk nl b">'</code>造成的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><ul class=""><li id="6c62" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">在第1行，<code class="fe ni nj nk nl b">SELECT</code>语句用于执行一个简单的计算。</li><li id="4897" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第2行，它显示了结果<code class="fe ni nj nk nl b">2</code>。</li><li id="1184" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">第3行没有终止。</li><li id="6e8f" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">第4行以<code class="fe ni nj nk nl b">;</code>结束。</li><li id="c458" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">第5行显示了结果，<code class="fe ni nj nk nl b">2</code>。</li><li id="22f6" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">第6行没有终止。</li><li id="b9e7" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">第7行以<code class="fe ni nj nk nl b">'</code>结束。</li><li id="969b" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">第8行以<code class="fe ni nj nk nl b">;</code>结束。</li><li id="e242" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第9行，显示了结果，<code class="fe ni nj nk nl b">2</code>。</li></ul><p id="7001" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">除了SQL语句之外，命令行shell还支持点命令，这些命令在左边以<code class="fe ni nj nk nl b">.</code>开始，前面没有空格。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="add3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">SQLite数据库是存储在磁盘上的文件。我们可以使用<code class="fe ni nj nk nl b">sqlite3</code>来打开一个特定的数据库文件。如果文件不存在，将创建一个新文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><ul class=""><li id="68d6" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">在第1行，在当前目录中创建了一个新的数据库文件。</li><li id="1c2c" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第4行，执行<code class="fe ni nj nk nl b">.databases</code>命令。</li><li id="c3af" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第5行，它列出了附加数据库的名称和文件。</li></ul><p id="ced5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们使用以下代码创建了<code class="fe ni nj nk nl b">students</code>表，该表已经在一篇<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/set-up-and-use-mysql-in-create-react-app-environment-22a4c7dc077f"> MySQL文章</a>中使用过:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><ul class=""><li id="8a33" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">在第1行，创建了一个名为<code class="fe ni nj nk nl b">students</code>的表。该表有<code class="fe ni nj nk nl b">id</code>、<code class="fe ni nj nk nl b">name</code>、<code class="fe ni nj nk nl b">age</code>和<code class="fe ni nj nk nl b">grade</code>列。此外<code class="fe ni nj nk nl b">name</code>是一个最大长度为255的变长字符串。其他列是整数。</li><li id="b7c2" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第2行，执行<code class="fe ni nj nk nl b">.tables</code>命令。</li><li id="46c6" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第3行，它列出了表名。</li><li id="2bb5" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第4行，一条新记录被插入到<code class="fe ni nj nk nl b">students</code>中。</li><li id="f390" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第5行，它选择来自<code class="fe ni nj nk nl b">students</code>的数据。</li><li id="a67d" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第6行，显示新添加的记录。</li></ul><p id="3261" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">数据库文件存储在磁盘上:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="9f3c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">SQLite中的所有SQL命令都与MySQL相同。但是，SQLite更加轻量级——自包含、无服务器、零配置和事务性。</p><h1 id="3adf" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">在Bun脚本中使用SQLite</h1><p id="f7fc" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Bun 是一个快速、现代、一体化的JavaScript运行时，内置了本机bundler、transpiler、task runner和npm客户端。Bun是零配置的，支持开箱即用的TypeScript。</p><p id="c282" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe ni nj nk nl b">bun:sqlite</code>是一个高性能的SQLite3模块，可以用来执行SQLite语句。<code class="fe ni nj nk nl b">bun:sqlite</code>内置于<code class="fe ni nj nk nl b">bun.js</code>中，除了Bun本身没什么可安装的。在之前的一篇文章中，我们已经提供了如何安装Bun的详细步骤。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="9015" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下面是创建<code class="fe ni nj nk nl b">students</code>表的Bun脚本。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><ul class=""><li id="4967" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">在第1行，<code class="fe ni nj nk nl b">Database</code>是从<code class="fe ni nj nk nl b">bun:sqlite</code>导入的。</li><li id="87c9" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第3行，从文件<code class="fe ni nj nk nl b">mybun.db</code>创建了一个数据库连接。如果文件不存在，将生成一个新文件。</li><li id="d60f" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第4–6行，创建了一个名为<code class="fe ni nj nk nl b">students</code>的表格。该表有<code class="fe ni nj nk nl b">id</code>、<code class="fe ni nj nk nl b">name</code>、<code class="fe ni nj nk nl b">age</code>和<code class="fe ni nj nk nl b">grade</code>栏。此外<code class="fe ni nj nk nl b">name</code>是一个最大长度为255的变长字符串。其他列是整数。</li><li id="c7b5" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第7行，一条新记录被插入<code class="fe ni nj nk nl b">students</code>。</li><li id="b050" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第8行，它选择来自<code class="fe ni nj nk nl b">students</code>的数据，并在控制台上显示结果。</li></ul><p id="884f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">执行这个TypeScript，我们会看到一个学生记录的结果数组(第3行)。由于Bun对它的速度很自豪，所以它总是显示执行命令的时间(第2行)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="a294" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">执行后，数据库文件存储在磁盘上，代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="8435" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于我们的小代码片段，性能并不重要。不过Bun确实号称比Node和Deno快。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/fa03bc14227578aef4040b3905aded4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*3AylcRhvnaWgmGFvM_miYA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://github.com/oven-sh/bun#bunsqlite-benchmark" rel="noopener ugc nofollow" target="_blank">https://github.com/oven-sh/bun#bunsqlite-benchmark</a></p></figure><h1 id="08d1" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">在Deno脚本中使用SQLite</h1><p id="2b11" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Deno_(software)" rel="noopener ugc nofollow" target="_blank"> Deno </a>是基于V8 JavaScript引擎和Rust编程语言的JavaScript、TypeScript和WebAssembly的运行时。它有安全的默认值和良好的开发者体验。名字是node的变位词，也是DEstroy NOde的首字母缩写。</p><p id="73a7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在macOS上，我们可以使用homebrew安装Deno，命令如下:</p><pre class="kj kk kl km gt nn nl no np aw nq bi"><span id="e8f8" class="nr la it nl b gy ns nt l nu nv">% brew install deno</span></pre><p id="4341" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">与节点支持命令<code class="fe ni nj nk nl b">node</code>、<code class="fe ni nj nk nl b">npm</code>和<code class="fe ni nj nk nl b">npx</code>不同，Deno只有一个可执行文件<code class="fe ni nj nk nl b">deno</code>。关于Deno的更多细节，请查看这篇文章。</p><p id="3dca" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">Deno为Deno脚本提供托管服务<code class="fe ni nj nk nl b"><a class="ae ky" href="https://deno.land/x" rel="noopener ugc nofollow" target="_blank">https://deno.land/x</a></code>。它缓存存储在GitHub上的开源模块，并在一个易于记忆的域中提供服务。<code class="fe ni nj nk nl b"><a class="ae ky" href="https://deno.land/x/sqlite/mod.ts" rel="noopener ugc nofollow" target="_blank">https://deno.land/x/sqlite/mod.ts</a></code>是Deno SQLite模块，使用时下载到本地缓存。Deno也是零配置。</p><p id="d24f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下面是创建<code class="fe ni nj nk nl b">students</code>表的Deno脚本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><ul class=""><li id="e188" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">第1行<code class="fe ni nj nk nl b">DB</code>是从<code class="fe ni nj nk nl b"><a class="ae ky" href="https://deno.land/x/sqlite/mod.ts." rel="noopener ugc nofollow" target="_blank">https://deno.land/x/sqlite/mod.ts</a></code> <a class="ae ky" href="https://deno.land/x/sqlite/mod.ts." rel="noopener ugc nofollow" target="_blank">导入的。</a></li><li id="0799" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第3行，从文件<code class="fe ni nj nk nl b">mydeno.db</code>创建了一个新的数据库连接。如果文件不存在，将生成一个新文件。</li><li id="e0a6" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第4–6行，创建了一个名为<code class="fe ni nj nk nl b">students</code>的表格。该表有<code class="fe ni nj nk nl b">id</code>、<code class="fe ni nj nk nl b">name</code>、<code class="fe ni nj nk nl b">age</code>和<code class="fe ni nj nk nl b">grade</code>栏。此外<code class="fe ni nj nk nl b">name</code>是一个最大长度为255的变长字符串。其他列是整数。</li><li id="5b72" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第7行，一条新记录被插入到<code class="fe ni nj nk nl b">students</code>中。</li><li id="e59e" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第8行，它选择来自<code class="fe ni nj nk nl b">students</code>的数据，并在控制台上显示结果。</li></ul><p id="8587" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">执行此类型脚本。由于Deno有安全的默认值，我们必须回答许多问题，以允许在<code class="fe ni nj nk nl b">mydeno.db</code>(第2-3行)上读取，允许在<code class="fe ni nj nk nl b">mydeno.db</code>(第4-5行)上写入，允许在<code class="fe ni nj nk nl b">mydeno.db-journal</code>(第6-7行)上读取，允许在<code class="fe ni nj nk nl b">mydeno.db-journal</code>(第8-9行)上写入。最终，我们会看到由1个学生记录组成的数组(第10行)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="ab0a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">执行后，数据库文件存储在磁盘上:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="ee5d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">Deno脚本的工作方式类似于Bun脚本。</p><h1 id="fa0d" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">在节点脚本中使用SQLite</h1><p id="40a1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Node.js" rel="noopener ugc nofollow" target="_blank"> Node </a>是一个开源、跨平台、后端的JavaScript运行时环境，运行在JavaScript引擎上，在web浏览器之外执行JavaScript代码，旨在构建可扩展的网络应用。</p><p id="18ea" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/5-major-features-of-node-js-18-5f4a164cc9fc">节点可以通过NVM </a>安装。以下是安装节点18.0.0的示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="b7c0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe ni nj nk nl b">better-sqlite3</code>是SQLite3的节点包。因为节点不是零配置，所以必须首先安装软件包。</p><p id="c830" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们重用<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/an-in-depth-guide-for-create-react-app-5-cra-5-b94b03c233f2"> Create React App </a>作为工作环境:</p><pre class="kj kk kl km gt nn nl no np aw nq bi"><span id="2401" class="nr la it nl b gy ns nt l nu nv">% npx create-react-app my-app<br/>% cd my-app</span></pre><p id="ac0f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">设置<code class="fe ni nj nk nl b">better-sqlite3</code>:</p><pre class="kj kk kl km gt nn nl no np aw nq bi"><span id="7a52" class="nr la it nl b gy ns nt l nu nv">% npm install better-sqlite3</span></pre><p id="b0f4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe ni nj nk nl b">better-sqlite3</code>成为<code class="fe ni nj nk nl b">package.json</code>中<code class="fe ni nj nk nl b"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/package-jsons-dependencies-in-depth-a1f0637a3129">dependencies</a></code>的一部分:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="d70f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">由于Node不支持现成的TypeScript，我们将编写一个JavaScript文件来简化设置。</p><p id="3f46" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">另外，<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/what-might-be-coming-in-npm-9-6985cf2678a6">节点不支持开箱即用的es模块</a>。一种解决方案是以扩展名<code class="fe ni nj nk nl b">.mjs</code>结束脚本名称，以指示它使用ES2015模块符号。</p><p id="4492" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下面是创建<code class="fe ni nj nk nl b">students</code>表的节点脚本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><ul class=""><li id="23c2" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">在第1行，<code class="fe ni nj nk nl b">Database</code>是从<code class="fe ni nj nk nl b">better-sqlite3</code>导入的。</li><li id="0c20" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第3行，从文件<code class="fe ni nj nk nl b">mynode.db</code>创建了一个新的数据库连接。如果文件不存在，将生成一个新文件。</li><li id="193d" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第4–6行，创建了一个名为<code class="fe ni nj nk nl b">students</code>的表。该表有<code class="fe ni nj nk nl b">id</code>、<code class="fe ni nj nk nl b">name</code>、<code class="fe ni nj nk nl b">age</code>和<code class="fe ni nj nk nl b">grade</code>列。此外<code class="fe ni nj nk nl b">name</code>是一个最大长度为255的变长字符串。其他列是整数。</li><li id="6779" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第7行，一条新记录被插入<code class="fe ni nj nk nl b">students</code>。</li><li id="9b37" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">在第8行，它选择来自<code class="fe ni nj nk nl b">students</code>的数据，并在控制台上显示结果。</li></ul><p id="07bf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">执行这段JavaScript。<code class="fe ni nj nk nl b">better-sqlite3</code>沿途回显SQL语句(第2行、第3行和第4行)。最后，我们看到一个学生记录的结果数组(第5行)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="eb40" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">执行后，数据库文件存储在磁盘上。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="bb76" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">与Bun或Deno脚本相比，Node脚本需要更多的设置。</p><h1 id="1c81" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="f737" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们已经看到SQLite是一个轻量级的关系数据库管理系统。它是独立的、无服务器的、零配置的和事务性的。</p><p id="d995" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们就如何连接和使用SQLite对Bun、Deno和Node进行了比较。显然，Bun和Deno更先进，因为它们支持现成的TypeScript，并且是零配置的。</p><p id="2a6f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">是时候搬出Node了吗？Bun或者<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/is-deno-ready-for-primetime-a1ea5cd4bea1"> Deno准备好黄金时段</a>了吗？</p><p id="fb3e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">感谢阅读。</p><pre class="kj kk kl km gt nn nl no np aw nq bi"><span id="ee1c" class="nr la it nl b gy ns nt l nu nv"><strong class="nl iu">Want to Connect?</strong></span><span id="ab22" class="nr la it nl b gy nw nt l nu nv">If you are interested, check out <a class="ae ky" href="https://jenniferfubook.medium.com/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">my directory of web development articles</a>.</span></pre></div></div>    
</body>
</html>