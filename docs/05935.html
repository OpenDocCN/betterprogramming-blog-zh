<html>
<head>
<title>24 Swift Extensions for Cleaner Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">24个Swift扩展，代码更简洁</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/24-swift-extensions-for-cleaner-code-41e250c9c4c3?source=collection_archive---------0-----------------------#2020-08-19">https://betterprogramming.pub/24-swift-extensions-for-cleaner-code-41e250c9c4c3?source=collection_archive---------0-----------------------#2020-08-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4ec6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">更高效地构建您的移动应用</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ce13d1e3e809d8cebfdd661f20af2637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HQm1yU37T9Kn0Sqk"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">弗朗西斯科·德·托马索在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="4421" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我看来，Swift和Objective-C最好的特性之一就是扩展。它们使您能够向任何类添加新方法，并且整个项目将能够调用它们，而无需额外的继承和重载。</p><p id="8292" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一名移动开发人员，我同时使用iOS和Android，我经常看到Android的功能和方法比Swift更简短、更简洁、更容易理解。使用扩展，其中一些方法可以移植到Swift。加上一些新的方法(扩展),我们将在Swift中获得一个简短、干净和易于维护的代码。</p><p id="7e7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我会用Swift，但是所有这些扩展都可以移植到Objective-C或者直接和Objective-C一起使用，不需要转换。</p><h1 id="a9fb" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">String.trim()和Swift.trimmed</h1><p id="cfc5" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在99%的情况下，当我在Swift中修剪字符串时，我希望删除空格和其他类似符号(例如，新行和制表符)。</p><p id="fcc7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个简单的扩展完成了这个任务:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="cf07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="a151" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">var</strong> str1 = "  a b c d e   \n"<br/><strong class="mv iu">var</strong> str2 = str1.trimmed<br/>str1.trim()</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="a6e0" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">Int.toDouble()和Double.toInt()</h1><p id="6709" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果您使用选项，这些方法会很有用。如果有非可选的<code class="fe nq nr ns mv b">Int</code>，可以用<code class="fe nq nr ns mv b">Double(a)</code>进行转换，其中<code class="fe nq nr ns mv b">a</code>为整数变量。但如果<code class="fe nq nr ns mv b">a</code>是可选的，就做不到了。</p><p id="5aa0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们添加对<code class="fe nq nr ns mv b">Int</code>和<code class="fe nq nr ns mv b">Double</code>的扩展:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="13de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="d280" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> a = 15.78<br/><strong class="mv iu">let</strong> b = a.toInt()</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="ab41" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">String.toDate(…)和Date.toString(…)</h1><p id="40bf" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">从<code class="fe nq nr ns mv b">String</code>获取<code class="fe nq nr ns mv b">Date</code>并格式化<code class="fe nq nr ns mv b">Date</code>以显示它或发送给API是常见的任务。标准的转换方法需要三行代码。让我们看看如何使它更短:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="da71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="2957" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> strDate = "2020-08-10 15:00:00"<br/><strong class="mv iu">let</strong> date = strDate.toDate(format: "yyyy-MM-dd HH:mm:ss")<br/><strong class="mv iu">let</strong> strDate2 = date?.toString(format: "yyyy-MM-dd HH:mm:ss")</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="b88f" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">Int.centsToDollars()</h1><p id="150e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">一些支付API(例如<a class="ae ky" href="https://stripe.com/" rel="noopener ugc nofollow" target="_blank"> Stripe </a>)更喜欢使用货币单位(美分)进行支付处理。它可以避免<code class="fe nq nr ns mv b">Float</code>和<code class="fe nq nr ns mv b">Double</code>的不精确。同时，使用这些类型来显示值会更舒服。</p><p id="dacd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该扩展实现了这种转换:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="08a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="7b95" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> cents = 12350<br/><strong class="mv iu">let</strong> dollars = cents.centsToDollars()</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="c938" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">String.asCoordinates()</h1><p id="1860" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">地球上一个地方的坐标至少有两个数字——纬度和经度。另一个是高度，但这仅在3D空间中有意义，这在软件开发中并不常见。</p><p id="2fb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从API中，我们要么得到两个单独的字段，要么得到一个带有逗号分隔值的字段。这个扩展允许将这样的字符串转换成<code class="fe nq nr ns mv b">CLLocationCoordinate2D</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="1310" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="8aff" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> strCoordinates = "41.6168, 41.6367"<br/><strong class="mv iu">let</strong> coordinates = strCoordinates.asCoordinates</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="6c35" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">String.asURL()</h1><p id="f8e4" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">iOS和macOS使用<code class="fe nq nr ns mv b">URL</code>类型来处理链接。它更加灵活，允许获取组件，并且处理不同类型的URL。同时，我们通常输入它或者从API <code class="fe nq nr ns mv b">String</code>获取它。</p><p id="c35c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从一个到另一个的转换非常容易，但是这个扩展允许我们处理可选的或者链接这个转换:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="5e30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="8c9c" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> strUrl = "https://medium.com"<br/><strong class="mv iu">let</strong> url = strUrl.asURL</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="ef46" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">UIDevice.vibrate()</h1><p id="439c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">iPhone的振动对于按钮敲击和其他来自设备的反馈来说是一种很酷的效果。对于iPhone振动，有一种特殊的声音，由<code class="fe nq nr ns mv b">AudioToolbox</code>框架处理。</p><p id="868a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">包括<code class="fe nq nr ns mv b">AudioToolbox</code>到所有带振动的<code class="fe nq nr ns mv b">UIViewController</code>都很烦人，逻辑上振动更多的是设备功能(它不是来自扬声器而是来自设备本身)而不是播放声音。这个扩展允许将其简化为一行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="9a1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="654a" class="mz lw it mv b gy na nb l nc nd">UIDevice.vibrate()</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="6058" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">String.width(…)和String.height(…)</h1><p id="c2ed" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">iOS可以使用提供的约束自动计算<code class="fe nq nr ns mv b">UILabel</code>的大小，但有时自己设置大小也很重要。</p><p id="e42d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个扩展允许我们使用提供的<code class="fe nq nr ns mv b">UIFont</code>计算<code class="fe nq nr ns mv b">String</code>的宽度和高度:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="69b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="351a" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> text = "Hello, world!"<br/><strong class="mv iu">let</strong> textHeight = text.height(withConstrainedWidth: 100, font: UIFont.systemFont(ofSize: 16))</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="2639" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">String .只包含个数字</h1><p id="f23b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">当您需要限制用户输入或验证来自API的数据时，下面的扩展非常有用。它检查<code class="fe nq nr ns mv b">String</code>是否只有数字:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="c684" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="4b9d" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> digitsOnlyYes = "1234567890".containsOnlyDigits<br/><strong class="mv iu">let</strong> digitsOnlyNo = "12345+789".containsOnlyDigits</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="1946" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">String.isAlphanumeric</h1><p id="ee0b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">和前面的扩展一样，这个扩展检查<code class="fe nq nr ns mv b">String</code>的内容。如果字符串不为空并且只包含字母数字字符，则返回true。此扩展的反向版本可用于确认密码包含非字母数字字符。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="2923" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="afa8" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> alphanumericYes = "asd3kJh43saf".isAlphanumeric<br/><strong class="mv iu">let</strong> alphanumericNo = "Kkncs+_s3mM.".isAlphanumeric</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="ddf3" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">字符串下标</h1><p id="8d53" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Swift 5订阅<code class="fe nq nr ns mv b">String</code> s的方式很糟糕。例如，如果你想得到从5到10的字符，计算索引和偏移量是很烦人的。该扩展允许使用简单的<code class="fe nq nr ns mv b">Int</code>来实现此目的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="5709" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="ad7b" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> subscript1 = "Hello, world!"[7...]<br/><strong class="mv iu">let</strong> subscript2 = "Hello, world!"[7...11]</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="953d" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">UIImage.squared</h1><p id="6f57" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">当你让用户拍照或选择一张现有的照片作为个人资料照片时，他们很难提供一张正方形的照片。同时，大部分ui使用的是正方形或者圆形。</p><p id="9cf6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个扩展裁剪了提供的<code class="fe nq nr ns mv b">UIImage</code>，使其成为一个完美的正方形:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="be38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个扩展也可以作为一个方法来实现。因为方形图像不是原始图像的属性，而是原始图像的处理版本。如果你觉得method是更好的解决方案，就把<code class="fe nq nr ns mv b">var squared: UIImage?</code>换成<code class="fe nq nr ns mv b">func squared() -&gt; UIImage?</code>。</p><p id="a645" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="6737" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> img = UIImage() // Must be a real UIImage<br/><strong class="mv iu">let</strong> imgSquared = img.squared // img.squared() for method</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="6efe" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">UIImage.resized(…)</h1><p id="3933" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在将图片上传到服务器之前，您必须确保它足够小。iPhones和iPads有非常好的相机，它们图库中的图片可能没有大小限制。</p><p id="e2a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要确保<code class="fe nq nr ns mv b">UIImage</code>不大于给定的尺寸，例如512像素或1024像素，请使用以下扩展:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="d13d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="8ef3" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> img2 = UIImage() // Must be a real UIImage<br/><strong class="mv iu">let</strong> img2Thumb = img2.resized(maxSize: 512)</span></pre><p id="8f18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后两个扩展名可以链接在一起:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="4cda" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> img = UIImage() // Must be a real UIImage<br/><strong class="mv iu">let</strong> imgPrepared = img.squared?.resized(maxSize: 512)</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="6a62" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">Int.toString()</h1><p id="6687" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Java最有用的特性之一就是<code class="fe nq nr ns mv b">toString()</code>方法。这绝对是所有类和类型的方法。Swift允许使用字符串插值做类似的事情:<code class="fe nq nr ns mv b">"\(someVar)"</code>。但是有一点不同，你的变量是可选的。Swift会将单词<code class="fe nq nr ns mv b">optional</code>添加到输出中。Java只会崩溃，但Kotlin会很好地处理optionals】会返回一个可选字符串，如果<code class="fe nq nr ns mv b">someVar</code>是<code class="fe nq nr ns mv b">null</code> ( <code class="fe nq nr ns mv b">nil</code>)或者包含<code class="fe nq nr ns mv b">var</code>值的<code class="fe nq nr ns mv b">String</code>，则返回<code class="fe nq nr ns mv b">null</code> ( <code class="fe nq nr ns mv b">nil</code>)。</p><p id="4c47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，Swift不允许扩展<code class="fe nq nr ns mv b">Any</code>，所以让我们至少给<code class="fe nq nr ns mv b">Int</code>增加<code class="fe nq nr ns mv b">toString()</code>方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="25fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="154c" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> i1 = 15<br/><strong class="mv iu">let</strong> i1AsString = i1.toString()</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="1405" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">Double.toString()</h1><p id="c75c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">和前面的例子一样，将<code class="fe nq nr ns mv b">Double</code>转换成<code class="fe nq nr ns mv b">String</code>非常有用。但在这种情况下，我们将用两位小数限制输出。我不能说这个扩展对所有情况都有用，但是对于大多数情况来说，它会工作得很好:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="0ee8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="4e64" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> d1 = 15.67<br/><strong class="mv iu">let</strong> d1AsString = d1.toString()</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="27ba" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">Double.toPrice()</h1><p id="bd0e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">用价格生成<code class="fe nq nr ns mv b">String</code> s只是格式化<code class="fe nq nr ns mv b">Double</code> s的另一种方式，这种算法并不通用，它取决于地区设置。但你可以把它作为一个总体思路，并对你的应用程序进行调整:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="8ee6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="e8f9" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> dPrice = 16.50<br/><strong class="mv iu">let</strong> strPrice = dPrice.toPrice(currency: "€")</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="05e7" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">String.asDict</h1><p id="4141" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">JSON是交换或存储结构化数据的流行格式。大多数API更喜欢使用JSON。JSON是一种JavaScript结构。Swift有完全相同的数据类型— dictionary。</p><p id="0956" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将一个转换成另一个是一个相当简单的技巧:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="59da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="b816" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> json = "{\"hello\": \"world\"}"<br/><strong class="mv iu">let</strong> dictFromJson = json.asDict</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="9bb4" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">String.asArray</h1><p id="8225" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这个扩展类似于上一个扩展，但是它将JSON数组转换为Swift数组:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="5e68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="2758" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> json2 = "[1, 2, 3]"<br/><strong class="mv iu">let</strong> arrFromJson2 = json2.asArray</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="3cb4" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">String.asAttributedString</h1><p id="aaee" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">有时我们需要一些简单的独立于平台的文本样式。一种相当常见的方法是使用简单的HTML来实现这个目的。</p><p id="d8b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nq nr ns mv b">UILabel</code>可以显示带有粗体(<code class="fe nq nr ns mv b">&lt;strong&gt;</code>)部分的文本、带下划线的文本、更大和更小的片段等。你只需要把HTML转换成<code class="fe nq nr ns mv b">NSAttributedString</code>，赋给<code class="fe nq nr ns mv b">UILabel.attributedText</code>。</p><p id="2aab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个扩展将帮助您完成第一个任务:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="3f36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="fd82" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> htmlString = "&lt;p&gt;Hello, &lt;strong&gt;world!&lt;/string&gt;&lt;/p&gt;"<br/><strong class="mv iu">let</strong> attrString = htmlString.asAttributedString</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="e727" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">Bundle.appVersion</h1><p id="1d53" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">最后一个扩展名允许从<code class="fe nq nr ns mv b">Info.plist</code>文件中获取应用程序版本。它可用于:</p><ul class=""><li id="4973" class="nt nu it lb b lc ld lf lg li nv lm nw lq nx lu ny nz oa ob bi translated">正在将应用版本发送到API。</li><li id="e65c" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">正在检查可用的更新。</li><li id="a0e7" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">在设备屏幕上显示应用程序版本。</li><li id="fe85" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">将应用版本包含在支持电子邮件中。</li></ul><p id="354c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的扩展允许你在一行代码中获得应用版本(或者<code class="fe nq nr ns mv b">nil</code>，如果不可用的话):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="66cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="1718" class="mz lw it mv b gy na nb l nc nd"><strong class="mv iu">let</strong> appVersion = Bundle.mainAppVersion</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="b062" class="lv lw it bd lx ly nl ma mb mc nm me mf jz nn ka mh kc no kd mj kf np kg ml mm bi translated">结论</h1><p id="c8d1" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我希望这些扩展能帮助你使你的代码更短更整洁。请随意修改它们以满足您的需求，并将它们包含到您的项目中。</p><p id="82e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您对更有用的Swift字符串扩展感兴趣，您可以阅读我的另一篇文章:</p><div class="oh oi gp gr oj ok"><a href="https://medium.com/better-programming/10-useful-swift-string-extensions-e4280e55a554" rel="noopener follow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">10个有用的Swift字符串扩展</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">电子邮件验证、类型转换等等</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">medium.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy ks ok"/></div></div></a></div><p id="6330" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐，下次见！</p></div></div>    
</body>
</html>