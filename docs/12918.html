<html>
<head>
<title>Transcribe Audio Files in 10 Lines of Python Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用10行Python代码转录音频文件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/transcribe-audio-files-in-10-lines-of-code-1d92fb05a0f?source=collection_archive---------15-----------------------#2022-07-11">https://betterprogramming.pub/transcribe-audio-files-in-10-lines-of-code-1d92fb05a0f?source=collection_archive---------15-----------------------#2022-07-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7068" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">最先进的语音转文本技术</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e7aca417da9885d59bb2d0db001a7e2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bwusCoEdqu5EiRhB"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">丹·克里斯蒂安·pădureț在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="b7d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">人类总是拥有在不同背景和情况下理解口语的牵强附会的能力，例如从对话中区分背景噪音，识别音频中的多个说话者等。看到最近在自然语言处理(NLP)，特别是语音识别方面的进步，日复一日地慢慢接近类似人类的理解能力，这是势不可挡的。因此，支持语音的应用程序在我们的日常生活中变得越来越普遍。</p><p id="cb9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，在自然语言处理中，语音识别是一个非常棘手的问题。客观地说，我见过的最大挑战是没有足够的音频文件。即使一个人有这些，他们也可能是原始的，混乱的，吵闹的，或者有时甚至是腐败的。此外，音量可能会有问题，有时高，有时低，或者单个音频中存在多个扬声器，等等。因此，从这些数据中生成文本并不容易。</p><p id="e6f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您计划在项目中利用语音到文本技术，从头开始构建端到端语音识别模型可能不是最佳的方法，这可能是由于缺乏相关的专业知识或者时间和成本的限制。然而，现在有太多的选项可供您选择，只需通过一个API调用就可以提供如此复杂的解决方案。</p><p id="de72" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在接下来的几节中，我将演示如何使用AssemblyAI API和Python转录音频文件。</p><p id="24b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们开始吧。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="8c96" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">转录音频文件</h1><p id="1d2a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在本节中，让我带您了解如何使用AssemblyAI的API来转录音频文件。作为一个介绍性的帖子，我们将坚持异步音频转录，即有一个预先录制的文件可供转录。</p><h2 id="b19f" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated"><strong class="ak">第一步:安装要求</strong></h2><p id="ab09" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">就库需求而言，您需要的只是Python中的<code class="fe ni nj nk nl b"><a class="ae kv" href="https://pypi.org/project/requests/" rel="noopener ugc nofollow" target="_blank">requests</a></code>包，您可以这样做:</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="b82c" class="mw ma iq nl b gy nq nr l ns nt">pip install requests</span></pre><h2 id="3fc0" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated"><strong class="ak">步骤2:获取您的API令牌</strong></h2><p id="e51d" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">下一步是在<code class="fe ni nj nk nl b"><a class="ae kv" href="https://app.assemblyai.com/signup" rel="noopener ugc nofollow" target="_blank">AssemblyAI</a></code>(免费)网站上创建一个账户。这将为您提供您的私有API密钥，我们将使用它来访问语音到文本模型。</p><h2 id="5389" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated"><strong class="ak">第三步:转录</strong></h2><p id="de5c" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">一旦有了API密匙，就可以继续利用AssemblyAI的转录服务和音频智能特性。你将需要一个音频文件，可以通过一个网址访问，如AWS S3桶或上传到音频托管服务，如SoundCloud。出于我们的目的，我们将使用以下音频文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="15de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用AssemblyAI API从音频文件生成输出(或转录)分三步完成:</p><ul class=""><li id="5b49" class="nw nx iq ky b kz la lc ld lf ny lj nz ln oa lr ob oc od oe bi translated"><strong class="ky ir">认证</strong></li></ul><p id="ac0c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">身份验证是使用授权头实现的，它应该包含在所有API请求中。这是按如下方式完成的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of nv l"/></div></figure><p id="03eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意:'<code class="fe ni nj nk nl b">YOUR-API-TOKEN</code>'指的是您帐户的仪表板中提到的唯一的私有API密钥。</p><ul class=""><li id="2151" class="nw nx iq ky b kz la lc ld lf ny lj nz ln oa lr ob oc od oe bi translated"><strong class="ky ir">提交文件进行转录</strong></li></ul><p id="480d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成身份验证后，下一步是调用HTTP Post请求，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og nv l"/></div></figure><p id="3318" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">传递给<strong class="ky ir"> POST </strong>请求的参数有:</p><ol class=""><li id="cb41" class="nw nx iq ky b kz la lc ld lf ny lj nz ln oa lr oh oc od oe bi translated"><em class="oi">端点</em>指定要调用的转录服务。</li><li id="3c75" class="nw nx iq ky b kz oj lc ok lf ol lj om ln on lr oh oc od oe bi translated">一个<em class="oi"> JSON </em>，带有你的音频文件的URL。</li><li id="df37" class="nw nx iq ky b kz oj lc ok lf ol lj om ln on lr oh oc od oe bi translated"><em class="oi">头</em>保存API密钥和内容类型。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oo nv l"/></div></figure><ul class=""><li id="5217" class="nw nx iq ky b kz la lc ld lf ny lj nz ln oa lr ob oc od oe bi translated"><strong class="ky ir">获取转录结果</strong></li></ul><p id="9faa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在您提交一个文件进行转录后，它的状态(上面JSON响应中的一个键)将从“<strong class="ky ir">排队</strong>变为“<strong class="ky ir">处理中</strong>，最后变为“<strong class="ky ir">完成</strong>”</p><p id="6b53" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，您可以发出GET请求，如下所示，以检查您发布的转录请求的状态:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op nv l"/></div></figure><p id="e5a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">传递给GET请求的参数有:</p><ol class=""><li id="a4f3" class="nw nx iq ky b kz la lc ld lf ny lj nz ln oa lr oh oc od oe bi translated">端点指定调用的服务和API调用标识符。</li><li id="ecec" class="nw nx iq ky b kz oj lc ok lf ol lj om ln on lr oh oc od oe bi translated">头像以前一样保存API密钥。</li></ol><p id="5a2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据音频长度，转录时间可能会有所不同。因此，您必须重复进行GET请求，直到状态变为“<strong class="ky ir">已完成</strong>或“<strong class="ky ir">错误</strong>”一旦状态键显示为“<strong class="ky ir"> Completed </strong>”，您将看到文本、单词和其他键，包括您启用的任何音频智能特性(如上所述)的结果，以及JSON响应中填充的转录结果。JSON响应将如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oq nv l"/></div></figure><p id="c7c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，上述响应中的状态是“<strong class="ky ir">已完成</strong>”以下是关于转录的一些见解:</p><ol class=""><li id="1134" class="nw nx iq ky b kz la lc ld lf ny lj nz ln oa lr oh oc od oe bi translated">由于音频文件属于单个扬声器，我们看到<code class="fe ni nj nk nl b">words</code>键内的所有<code class="fe ni nj nk nl b">speaker</code>键都是<strong class="ky ir">无</strong>。</li><li id="64de" class="nw nx iq ky b kz oj lc ok lf ol lj om ln on lr oh oc od oe bi translated">由AssemblyAI模型解释的音频的整个转录结果存储在响应的<code class="fe ni nj nk nl b">text</code>键中。</li><li id="a5be" class="nw nx iq ky b kz oj lc ok lf ol lj om ln on lr oh oc od oe bi translated">我们可以看到所有单个单词和整个转录文本的置信度得分。分数范围从0到1，0为最低，1为最高。</li><li id="94d5" class="nw nx iq ky b kz oj lc ok lf ol lj om ln on lr oh oc od oe bi translated">由于在POST请求中没有指定AssemblyAI提供的任何音频智能特性，我们看到了与这些关键字(language_detection、perspective _ analysis、chapters等)相对应的值。)为假。</li></ol><h2 id="ca42" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">完整代码</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or nv l"/></div></figure><p id="344a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总之，在这篇文章中，我们讨论了AssemblyAI API来帮助你转录和理解音频。具体来说，我们讨论了它能为您做什么，以及如何对预先录制的音频文件使用异步转录服务。</p><p id="065e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在接下来的文章中，我将从技术和实践的角度讨论它的具体用例，比如情感分析、实体检测等等。因此，请继续关注。</p><p id="1117" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下次见。感谢阅读。</p></div></div>    
</body>
</html>