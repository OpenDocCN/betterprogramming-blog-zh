<html>
<head>
<title>JetPack Navigation Components in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android中的JetPack导航组件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/jitpack-navigation-component-in-android-944165c35f54?source=collection_archive---------5-----------------------#2019-10-08">https://betterprogramming.pub/jitpack-navigation-component-in-android-944165c35f54?source=collection_archive---------5-----------------------#2019-10-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c406" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">近十年后，Android团队为开发者引入了一个新的导航系统</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6f5b8dc76f8fac6dccb68ea4962536fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EG2k_eb1H2NnGCtC"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@chrislawton?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯·劳顿</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><ol class=""><li id="957d" class="kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">概观</li><li id="f748" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">综合</li><li id="0907" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">术语</li><li id="530d" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">导航图</li><li id="5992" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">导航类型</li><li id="1b91" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">安全的论点</li><li id="71cd" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">带参数的导航</li><li id="3dba" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">带有导航组件的DeepLink</li><li id="2856" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">Google I/O 2019中导航控制器的增强功能</li><li id="4a97" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">有用的链接</li><li id="6d7e" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">GitHub示例</li></ol><h1 id="7566" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">概观</h1><p id="e1dc" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">在屏幕之间导航是android应用程序的基本功能之一。我们通常通过<strong class="lb iu">意图</strong>来做到这一点，但是像导航抽屉或底部导航这样的复杂情况呢，我们必须保持高亮项目与当前屏幕同步，更不用说后台管理了——这很复杂，不是吗？</p><p id="c322" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">导航组件是android应用<em class="ng">中任何类型导航的所有问题的一站式解决方案。</em>JetPack导航组件是一套库、工具和指南，为应用内导航提供了一个健壮的导航框架</p><p id="6a55" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">导航组件在android开发中提供了一种新的导航类型，我们有一个导航图来查看所有屏幕以及它们之间的导航。这很像IOS 中的<strong class="lb iu">故事板。</strong></p><p id="0bdf" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">导航组件可以帮助你管理导航、片段事务、backstack、动画，最重要的是深度链接(深度链接不再需要意图过滤器)等等。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="feae" class="lw lx it bd ly lz no mb mc md np mf mg jz nq ka mi kc nr kd mk kf ns kg mm mn bi translated">综合</h1><p id="f3c7" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated"><strong class="lb iu">注意:</strong>如果要使用Android Studio导航，必须使用<a class="ae ky" href="https://developer.android.com/studio" rel="noopener ugc nofollow" target="_blank"> Android Studio 3.3或更高版本</a>。</p><p id="6cd9" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">在您的<code class="fe nt nu nv nw b">build.gradle</code>中包含以下代码，您就可以开始了:</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="ef51" class="ob lx it nw b gy oc od l oe of">dependencies {<br/>  def nav_version = "2.1.0"<br/><br/>  // Java<br/>  implementation "androidx.navigation:navigation-fragment:$nav_version"<br/>  implementation "androidx.navigation:navigation-ui:$nav_version"<br/><br/>  // Kotlin<br/>  implementation "androidx.navigation:navigation-fragment-ktx:$nav_version"<br/>  implementation "androidx.navigation:navigation-ui-ktx:$nav_version"<br/><br/>}</span></pre><p id="140a" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated"><code class="fe nt nu nv nw b">navigation-fragment</code> <strong class="lb iu"> : </strong>片段是每个开发人员都使用的一个通用架构组件，所以<code class="fe nt nu nv nw b">navigation-fragment</code> <strong class="lb iu"> </strong>是一个开箱即用的库，用于片段导航。</p><p id="bae3" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated"><code class="fe nt nu nv nw b">navigation-ui</code> <strong class="lb iu"> : </strong>这有助于您使用Nav Controller设置应用栏、工具栏和其他材质设计组件配置。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="695d" class="lw lx it bd ly lz no mb mc md np mf mg jz nq ka mi kc nr kd mk kf ns kg mm mn bi translated">术语</h1><h2 id="60da" class="ob lx it bd ly og oh dn mc oi oj dp mg lg ok ol mi li om on mk lk oo op mm oq bi translated">导航主机碎片</h2><p id="8634" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">显示导航图中目的地的空容器。导航组件包含一个默认的<code class="fe nt nu nv nw b">NavHost</code>实现<code class="fe nt nu nv nw b"><a class="ae ky" href="https://developer.android.com/reference/androidx/navigation/fragment/NavHostFragment.html" rel="noopener ugc nofollow" target="_blank">NavHostFragment</a></code>，它显示片段目的地。</p><h2 id="78ef" class="ob lx it bd ly og oh dn mc oi oj dp mg lg ok ol mi li om on mk lk oo op mm oq bi translated">导航控制器</h2><p id="5cec" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">在<code class="fe nt nu nv nw b">NavHost</code>中管理应用导航的对象。当用户在你的应用中移动时，<code class="fe nt nu nv nw b">NavController</code>协调<code class="fe nt nu nv nw b">NavHost</code>中目标内容的交换。</p><h2 id="021f" class="ob lx it bd ly og oh dn mc oi oj dp mg lg ok ol mi li om on mk lk oo op mm oq bi translated">目的地</h2><p id="d2a5" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">目的地是你的应用程序中的所有内容区域，比如活动、片段、对话框等等。</p><h2 id="f053" class="ob lx it bd ly og oh dn mc oi oj dp mg lg ok ol mi li om on mk lk oo op mm oq bi translated">行动</h2><p id="d1f9" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">Action用于创建一个导航，该导航具有一个名为<code class="fe nt nu nv nw b">destination</code>的属性，我们可以在这里提到结束屏幕id。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="e5d0" class="lw lx it bd ly lz no mb mc md np mf mg jz nq ka mi kc nr kd mk kf ns kg mm mn bi translated">导航图</h1><p id="c237" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">导航图是一个包含所有目的地和操作的资源文件。基本上，导航图代表了应用程序的导航。</p><h2 id="9e90" class="ob lx it bd ly og oh dn mc oi oj dp mg lg ok ol mi li om on mk lk oo op mm oq bi translated">如何创建导航图</h2><p id="bdcb" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">正如我所说，导航图只不过是一个资源文件，所以我们在<strong class="lb iu"> res </strong>目录下创建一个资源文件，资源类型为navigation。看一看:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/0e7940152578979ee07fe411fac42a23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SVa9VgyCJQXOC3GrPjTuOg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">导航图的创建</p></figure><p id="e5db" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">创建导航图的步骤:</p><ol class=""><li id="30be" class="kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">在项目窗口中，右击<code class="fe nt nu nv nw b">res</code>目录，选择<strong class="lb iu">新建&gt; Android资源文件</strong>。出现<strong class="lb iu">新资源文件</strong>对话框。</li><li id="cc57" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">在<strong class="lb iu">文件名</strong>字段中输入一个名称，如“nav_graph”。</li><li id="83a2" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">从<strong class="lb iu">资源类型</strong>下拉列表中选择<strong class="lb iu">导航</strong>，然后点击<strong class="lb iu">确定</strong>。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/9200167751932e3923cc256c37a1be84.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*JU-DqAPzOGyagqnESGwOJA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">项目面板中的导航图</p></figure><p id="e0a8" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">让我用两个片段的示例应用程序向您展示导航图预览。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/4902f2a86a51453664df7ccf2d506527.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QeEwPpPS2SEIUVgq9ecgaA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">导航图预览</p></figure><p id="a031" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">由于每个XML资源文件nav_graph也有design和text选项卡，现在让我们看看text选项卡中的XML代码，以创建一个类似上面的图表</p><p id="4d51" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">这里的根标签是<code class="fe nt nu nv nw b">navigation</code> <strong class="lb iu"> </strong>，带有<code class="fe nt nu nv nw b">startDestination</code>属性，我们必须提到最初要加载的片段的id。接下来是目的地，比如片段、对话框等等，有一个属性<code class="fe nt nu nv nw b">name</code>，它的值就是目的地的名称。</p><p id="c0b6" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">现在我们来看导航。我们在一个特定的目的地下使用一个标签动作——我们希望在那里开始导航。还有一个我们提到目的地ID的属性。</p><p id="d7b2" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">让我们把所有的碎片放在一起:</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="bfdf" class="ob lx it nw b gy oc od l oe of">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;navigation xmlns:android="http://schemas.android.com/apk/res/android"<br/>            xmlns:app="http://schemas.android.com/apk/res-auto"<br/>            xmlns:tools="http://schemas.android.com/tools"<br/>            android:id="@+id/nav_graph"<br/>            app:startDestination="@id/nav_fragment_one"&gt;<br/><br/>    &lt;fragment<br/>            android:id="@+id/nav_fragment_one"<br/>            android:name="com.m.navigationsample1.FragmentOne"<br/>            android:label="Nav Fragment One"<br/>            tools:layout="@layout/fragment_one"&gt;<br/>        &lt;action<br/>                android:id="@+id/one_to_two"<br/>                app:destination="@id/nav_fragment_two"<br/>                app:enterAnim="@anim/nav_default_enter_anim"<br/>                app:exitAnim="@anim/nav_default_exit_anim"<br/>                app:popEnterAnim="@anim/nav_default_pop_enter_anim"<br/>                app:popExitAnim="@anim/nav_default_pop_exit_anim"<br/>/&gt;<br/>    &lt;/fragment&gt;<br/><br/>    &lt;fragment<br/>            android:id="@+id/nav_fragment_two"<br/>            android:name="com.m.navigationsample1.FragmentTwo"<br/>            android:label="Nav Fragment Two"<br/>            tools:layout="@layout/fragment_two"/&gt;<br/>      <br/>&lt;/navigation&gt;</span></pre></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="774d" class="lw lx it bd ly lz no mb mc md np mf mg jz nq ka mi kc nr kd mk kf ns kg mm mn bi translated">导航类型</h1><p id="9256" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">为了通过导航组件在应用程序中导航，我们告诉<code class="fe nt nu nv nw b">NavController</code>要么跟随一条路径，要么提到一个特定的目的地ID。然后<code class="fe nt nu nv nw b">NavController</code>在<code class="fe nt nu nv nw b">NavHost</code>中显示合适的目的地。</p><p id="001a" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">有了导航组件，我们有多种导航方式。</p><h2 id="3d81" class="ob lx it bd ly og oh dn mc oi oj dp mg lg ok ol mi li om on mk lk oo op mm oq bi translated">使用ID导航</h2><p id="de0f" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">这里我们使用<code class="fe nt nu nv nw b">nav_graph</code>中提到的目的地ID来到达目的地:</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="fca8" class="ob lx it nw b gy oc od l oe of">viewTransactionsButton.setOnClickListener { view -&gt;<br/>   view.findNavController().navigate(R.id.viewTransactionsAction)<br/>}</span></pre><h2 id="7c7b" class="ob lx it bd ly og oh dn mc oi oj dp mg lg ok ol mi li om on mk lk oo op mm oq bi translated">单击监听器</h2><p id="c9b1" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">对于视图，你也可以使用<code class="fe nt nu nv nw b"><a class="ae ky" href="https://developer.android.com/reference/androidx/navigation/Navigation.html" rel="noopener ugc nofollow" target="_blank">Navigation</a></code>类的<code class="fe nt nu nv nw b"><a class="ae ky" href="https://developer.android.com/reference/androidx/navigation/Navigation.html#createNavigateOnClickListener(int)" rel="noopener ugc nofollow" target="_blank">createNavigateOnClickListener()</a></code>。这是导航到目的地的便捷方法，如下所示:</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="5d40" class="ob lx it nw b gy oc od l oe of">button.setOnClickListener(Navigation.createNavigateOnClickListener(R.id.next_fragment, null))</span></pre><h2 id="510a" class="ob lx it bd ly og oh dn mc oi oj dp mg lg ok ol mi li om on mk lk oo op mm oq bi translated">使用动作导航</h2><p id="08a4" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">在上面的nav_graph中，我们有专门用于导航的动作，这样我们就可以在导航中使用像动画一样的高级功能。</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="44af" class="ob lx it nw b gy oc od l oe of">findNavController().navigate(R.id.one_to_two)</span></pre></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="6b39" class="lw lx it bd ly lz no mb mc md np mf mg jz nq ka mi kc nr kd mk kf ns kg mm mn bi translated">安全的论点</h1><p id="dfca" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">安全参数是一个Gradle插件，用于在目的地之间传递数据。</p><h2 id="285d" class="ob lx it bd ly og oh dn mc oi oj dp mg lg ok ol mi li om on mk lk oo op mm oq bi translated">综合</h2><p id="b451" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">在顶级Gradle文件中添加以下代码:</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="8a89" class="ob lx it nw b gy oc od l oe of">ext.nav_version = '1.0.0'<br/>classpath "android.arch.navigation:navigation-safe-args-gradle-plugin:$nav_version"</span></pre><p id="1f8c" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">现在将插件导入模块级Gradle文件:</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="a2a4" class="ob lx it nw b gy oc od l oe of">apply plugin: 'androidx.navigation.safeargs'</span></pre><p id="1955" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">就这样——安全参数插件在您的项目中处于活动状态。</p><p id="7241" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">安全参数帮助您安全地传递参数。使用安全参数的主要优点是，运行时发生的一些检查现在将在编译时完成。</p><p id="2064" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">safe args所做的是为带有函数参数的目的地生成代码。这些函数具有基于您在nav_graph中为目的地提到的参数的参数。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="1362" class="lw lx it bd ly lz no mb mc md np mf mg jz nq ka mi kc nr kd mk kf ns kg mm mn bi translated">带参数的导航</h1><p id="b3f4" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">现在，安全参数插件在我们的项目中是活跃的，让我们看看如何使用它。</p><h2 id="8e84" class="ob lx it bd ly og oh dn mc oi oj dp mg lg ok ol mi li om on mk lk oo op mm oq bi translated">第一步</h2><p id="d044" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">首先，我们需要提到nav_graph中目的地所需的参数，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/9646312349f76e78b90f8ba37de7d2a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*FnzfS-UppOVLmUDOyiRQSA.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">nav_graph中的安全参数</p></figure><p id="6795" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">这里我们提到了两个参数:类型string和片段二的整数。正如我已经说过的，安全参数为目的地生成代码，其名称与附加了directions关键字的源类名相同。比如这里它生成<code class="fe nt nu nv nw b">FragmentOneDirections</code>。</p><h2 id="3578" class="ob lx it bd ly og oh dn mc oi oj dp mg lg ok ol mi li om on mk lk oo op mm oq bi translated">从源传递参数</h2><p id="ebb6" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">现在我们知道了如何在<code class="fe nt nu nv nw b">nav_graph</code>中引用参数，下一步是传递来自源的参数。</p><p id="8236" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">这里我们使用<code class="fe nt nu nv nw b">FragmentOneDirections</code> <strong class="lb iu"> </strong>类来传递参数。看一看:</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="ddb6" class="ob lx it nw b gy oc od l oe of">btn_fragment_two_argument?.setOnClickListener {<br/>    val direction = FragmentOneDirections.oneToTwo()<br/>    direction.name = "Samule"<br/>    direction.id = 113<br/>    Navigation.findNavController(btn_fragment_two_argument).navigate(direction)<br/>}</span></pre><p id="6cce" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">正如我提到的，nullable属性为true —没有一个参数是强制的。如果您将nullable称为false，那么您应该在构造函数中传递非空值。您需要提到可空参数的默认值，否则您的应用程序可能会在运行时崩溃。</p><h2 id="4941" class="ob lx it bd ly og oh dn mc oi oj dp mg lg ok ol mi li om on mk lk oo op mm oq bi translated">在目标中接收参数</h2><p id="0b5e" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">通常我们在活动中使用bundle，在片段中使用参数，但是这里我们使用生成的类来获取这些参数:</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="fa24" class="ob lx it nw b gy oc od l oe of">val args : FragmentTwoArgs? = arguments?.let{<br/>    FragmentTwoArgs.fromBundle(it)<br/>}<br/>args?.let {<br/>    var text_to_show = tv_fragment_two.text<br/>    text_to_show = "$text_to_show \nname : ${it.name} \nid : ${it.id}"<br/>    tv_fragment_two?.text = text_to_show<br/>}</span></pre><p id="eb41" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">如果你仔细观察，我们得到的名字是字符串，ID是整型。这是因为我们在<code class="fe nt nu nv nw b">nav_graph</code>中提到的类型。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="a9ad" class="lw lx it bd ly lz no mb mc md np mf mg jz nq ka mi kc nr kd mk kf ns kg mm mn bi translated">带有导航组件的DeepLink</h1><p id="74f4" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">我们都熟悉通过意图过滤器在应用程序中实现深度链接。现在是改变的时候了:为深度链接使用导航组件。</p><p id="b891" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">首先，让我们看看如何在<code class="fe nt nu nv nw b">nav_graph</code>中提到目的地的深度链接:</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="6a96" class="ob lx it nw b gy oc od l oe of">&lt;fragment<br/>        android:id="@+id/nav_fragment_two"<br/>        android:name="com.m.navigationsample1.FragmentTwo"<br/>        android:label="Nav Fragment Two"<br/>        tools:layout="@layout/fragment_two"&gt;<br/>    &lt;argument android:name="name"<br/>              app:argType="string"<br/>              app:nullable="true"<br/>              android:defaultValue="Default"/&gt;<br/>    &lt;argument android:name="id"<br/>              app:argType="integer"<br/>              android:defaultValue="-1"/&gt;<br/>    &lt;deepLink app:uri="http://mysitesampleapp.com/{name}/{id}"/&gt;<br/>&lt;/fragment&gt;</span></pre><p id="279d" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">您还需要在清单文件中的activity标记下实现以下代码行:</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="b515" class="ob lx it nw b gy oc od l oe of">&lt;activity android:name=".MainActivity"&gt;<br/>    &lt;nav-graph android:value="@navigation/nav_graph" /&gt;<br/>    &lt;intent-filter&gt;<br/>        &lt;action android:name="android.intent.action.MAIN"/&gt;<br/>        &lt;category android:name="android.intent.category.LAUNCHER"/&gt;<br/>    &lt;/intent-filter&gt;<br/>&lt;/activity&gt;</span></pre><p id="0dd7" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">就是这样——deep link在你的app里实现了！</p><p id="96ec" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">使用导航组件，我们可以通过应用程序中的deeplink调用片段或活动:</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="f5f4" class="ob lx it nw b gy oc od l oe of">btn_fragment_two_depplink?.setOnClickListener {<br/>    val name :String = "sam"<br/>    val id : Int = 123<br/>    val deeplink_uri = "http://mysitesampleapp.com/$name/$id".toUri()<br/>    Navigation.findNavController(btn_fragment_two_argument).navigate(deeplink_uri)<br/>}</span></pre></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="9e2f" class="lw lx it bd ly lz no mb mc md np mf mg jz nq ka mi kc nr kd mk kf ns kg mm mn bi translated">Google I/O 2019中导航控制器的增强功能</h1><p id="a4ea" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">谷歌I/O 2019上宣布了一些增强功能和新功能——维护嵌套图、支持视图模型、动态模块导航等等。如果您感兴趣，请观看下面的视频:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><h1 id="f523" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">有用的链接</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">导航组件介绍</p></figure><div class="ox oy gp gr oz pa"><a href="https://developer.android.com/guide/navigation#get-started" rel="noopener  ugc nofollow" target="_blank"><div class="pb ab fo"><div class="pc ab pd cl cj pe"><h2 class="bd iu gy z fp pf fr fs pg fu fw is bi translated">导航|安卓开发者</h2><div class="ph l"><h3 class="bd b gy z fp pf fr fs pg fu fw dk translated">导航指的是允许用户在不同部分之间来回导航的交互…</h3></div><div class="pi l"><p class="bd b dl z fp pf fr fs pg fu fw dk translated">developer.android.com</p></div></div><div class="pj l"><div class="pk l pl pm pn pj po ks pa"/></div></div></a></div></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="ed74" class="lw lx it bd ly lz no mb mc md np mf mg jz nq ka mi kc nr kd mk kf ns kg mm mn bi translated">GitHub示例</h1><p id="ba12" class="pw-post-body-paragraph mo mp it lb b lc mq ju mr le ms jx mt lg mu mv mw li mx my mz lk na nb nc lm im bi translated">下面是一个样例项目的GitHub资源库的链接。本文中包含的所有代码片段都来自该存储库，您可以随意克隆并享受其中的乐趣:</p><div class="ox oy gp gr oz pa"><a href="https://github.com/SG-K/AndroidNavControllerSample" rel="noopener  ugc nofollow" target="_blank"><div class="pb ab fo"><div class="pc ab pd cl cj pe"><h2 class="bd iu gy z fp pf fr fs pg fu fw is bi translated">SG-K/androidnavcontroller示例</h2><div class="ph l"><h3 class="bd b gy z fp pf fr fs pg fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="pi l"><p class="bd b dl z fp pf fr fs pg fu fw dk translated">github.com</p></div></div></div></a></div><p id="c040" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">如果可能的话，我将写这篇文章的第二部分，介绍导航组件的高级特性。</p><p id="05bc" class="pw-post-body-paragraph mo mp it lb b lc ld ju mr le lf jx mt lg nd mv mw li ne my mz lk nf nb nc lm im bi translated">感谢您的阅读。</p></div></div>    
</body>
</html>