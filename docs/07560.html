<html>
<head>
<title>Using Nodemailer To Send Emails From Your Node.js Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Nodemailer从Node.js服务器发送电子邮件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/using-nodemailer-to-send-emails-from-your-node-js-server-d726f73d0439?source=collection_archive---------6-----------------------#2021-01-27">https://betterprogramming.pub/using-nodemailer-to-send-emails-from-your-node-js-server-d726f73d0439?source=collection_archive---------6-----------------------#2021-01-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2cef" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">加速您的网上邮寄过程</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4ecae74e0ddc6ff38f440f32cff97928.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-WsCN--8uCrM-bcN"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@rinckad?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Rinck内容工作室</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="f5c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们开始解释如何使用<a class="ae kv" href="https://nodemailer.com/about/" rel="noopener ugc nofollow" target="_blank"> Nodemailer </a>之前，最好先了解一下它是什么，以及为什么要使用它。Nodemailer是一个Node.js模块，允许您轻松地从服务器发送电子邮件。无论你是想和你的用户交流，还是想在出现问题时通知你自己，其中一个选择就是通过电子邮件。</p><p id="ec26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有许多文章解释了如何以基本形式使用Nodemailer，但本文不是其中之一。在这里，我将展示使用Nodemailer和Gmail从Node.js后端发送电子邮件的最常见实践。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="32c2" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">入门指南</h1><p id="46db" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">首先，我们需要使用Express设置Node.js样板文件。要确保安装了节点和npm，您可以运行以下命令:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="365a" class="nb ma iq mx b gy nc nd l ne nf">node -v<br/>npm -v</span></pre><p id="bd1e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果这两个命令都显示了一个版本，那么就可以使用了。否则，安装缺少的部分。</p><p id="d0e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为您的项目创建一个目录。我们将使用<code class="fe ng nh ni mx b">nodemailerProject</code>:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="7ceb" class="nb ma iq mx b gy nc nd l ne nf">mkdir nodemailerProject</span></pre><p id="48c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">进入新创建的目录并运行:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="2fab" class="nb ma iq mx b gy nc nd l ne nf">npm init</span></pre><p id="7a8f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将用一个<code class="fe ng nh ni mx b">package.json</code>文件初始化我们的项目。</p><p id="a529" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们需要使用以下命令安装Express:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="2efc" class="nb ma iq mx b gy nc nd l ne nf">npm install express</span></pre><p id="799b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据您指向哪个文件作为入口点(默认为<code class="fe ng nh ni mx b">index.js</code>)，打开它并粘贴以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">索引. js</p></figure><p id="bf4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以上是使用Express启动一个简单服务器所需的内容。通过运行以下命令，您可以看到它工作正常:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="b90f" class="nb ma iq mx b gy nc nd l ne nf">node index.js</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="c61a" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">节点邮件程序</h1><p id="d031" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">使用以下命令安装Nodemailer:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="d98e" class="nb ma iq mx b gy nc nd l ne nf">npm install nodemailer</span></pre><p id="6ad6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Nodemailer的API非常简单，需要我们做以下事情:</p><ol class=""><li id="db6c" class="nl nm iq ky b kz la lc ld lf nn lj no ln np lr nq nr ns nt bi translated">创建一个<code class="fe ng nh ni mx b">Transporter</code> <strong class="ky ir"> </strong>对象。</li><li id="ef8c" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated">创建一个<code class="fe ng nh ni mx b">MailOptions</code> <strong class="ky ir"> </strong>对象。</li><li id="feb0" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated">使用<code class="fe ng nh ni mx b">Transporter.sendMail</code>方法。</li></ol><p id="598c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了创建一个<code class="fe ng nh ni mx b">transporter</code>对象，我们执行以下操作:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="77a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nz">注意:除了用户密钥和通行密钥(这是您自己的Gmail帐户凭证)之外，其他三个密钥需要在设置OAuth后检索。</em></p><p id="78ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如我们在本文开头所述，我们将使用Gmail来满足我们的邮件发送需求。正如你可能已经猜到的，Gmail对于用户帐户发送的邮件有很高的安全性。有许多方法可以克服这一障碍(有些方法比其他方法更好)，我们将选择一种需要我们在谷歌云平台上建立一个项目的方法。我们需要这样做，以便获得由Gmail启用的OAuth安全性的凭证。</p><p id="bf6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想了解更多关于使用Gmail和Nodemailer的复杂性，请看文档。</p><p id="eeac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来的步骤将需要一些配置而不是编码，所以做好准备。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/23482edf207b1db14fdb14503e5d6ac7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Uok-bBmvLoFNF2qv"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@d_mccullough?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丹尼尔·麦卡洛</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><h1 id="7624" class="lz ma iq bd mb mc ob me mf mg oc mi mj jw od jx ml jz oe ka mn kc of kd mp mq bi translated">谷歌云平台配置</h1><p id="4903" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">如果你没有<a class="ae kv" href="https://console.cloud.google.com/home" rel="noopener ugc nofollow" target="_blank">谷歌云平台</a>账号，一定要做一个。完成设置后，单击左上角的下拉菜单创建一个新项目:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/95225af787e8e1d23cbe469f2aeb1ca2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*a4fnFLNMoTtLJuqsKilVnA.png"/></div></figure><p id="60e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择“新项目”选项:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/a7956dbfbdf1ede841f4514bf1f7c5a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HNwUG3wPdbrwc3JB5D7_tg.png"/></div></div></figure><p id="054d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在下一个窗口中，我们必须为我们的项目命名。选择您喜欢的，但是我们将继续使用我们的NodemailerProject <strong class="ky ir"> </strong>名称。对于位置属性，您可以将其保留为“无组织”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/d9f0149645a476a945ff1bea301498f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*TRlA6RBLCCCSMQ5R4di27A.png"/></div></div></figure><p id="b034" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">项目设置可能需要几秒钟，但之后，您将能够看到以下屏幕:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/da4eef1f7d408b5b66320b0360d40744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FT9MhBZyU4cZd4Qg6zeFag.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">节点邮件程序项目</p></figure><p id="45de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过单击左上角的三条虚线打开导航菜单，并选择“APIs &amp; Services”:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/744d5b331a42b83849c137db7e3591d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*qPaPpPadHQLdKCQbhjND7Q.png"/></div></figure><p id="3e2f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了能够使用Nodemailer和Gmail，我们必须使用OAuth2。如果您不熟悉OAuth，它是一种身份验证协议。我不会在这里讨论细节，因为没有必要，但如果你想了解更多，请访问<a class="ae kv" href="https://oauth.net/2/" rel="noopener ugc nofollow" target="_blank"> OAuth 2.0 </a>。</p><p id="d0d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们必须配置OAuth同意屏幕:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/78d8ecd2e697e87483e73cdbf7db278e.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*W2oeT1KmJXpwSQlIMIVo5w.png"/></div></figure><p id="f870" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您不是G-Suite成员，唯一可用的选项将是“用户类型”的“外部”:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/e5649c6e9fe95f42560b11a4ca8e50c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l_GrPVtXODPS0GXKLMdWYA.png"/></div></div></figure><p id="f204" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">单击“创建”后，下一个屏幕要求我们填写应用程序的信息(我们的服务器):</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/4645c877b2789a769cdd3a25f62bf329.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*reZ04hUX4jh1IzLGh7vCFA.png"/></div></div></figure><p id="9394" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在“用户支持电子邮件”字段和“开发者联系信息”字段中填写您的电子邮件。单击“保存并继续”会将我们带到此配置的“范围”阶段。跳过这个阶段，因为它与我们无关，直接进入“测试用户”阶段。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/54c016065db85551c8ccd2a4a4c8e454.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jms50wZ5mVmUyOaiVF7b4w.png"/></div></div></figure><p id="d306" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，将您自己添加为用户，然后单击“保存并继续”</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="0d9d" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">OAuth设置</h1><p id="f085" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在此阶段，我们将创建OAuth凭据以用于Nodemailer。转到OAuth同意屏幕上方的凭证选项卡。单击带有文本“创建凭证”<strong class="ky ir"> <em class="nz"> </em> </strong>的加号，并选择OAuth客户端ID。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/a5cb41aaf0969d5fb771f4b8b00a9e02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h0nME2ccR7HPjKmz_DMZRw.png"/></div></div></figure><p id="6673" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在“应用程序类型”下拉菜单中，选择“Web应用程序”:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/be0fb850c54542a61959c11cb4d3cec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*72Em-VS-fdM2WCwOA6zcfg.png"/></div></figure><p id="52e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在“授权重定向URIs”部分，确保添加了<a class="ae kv" href="https://developers.google.com/oauthplayground/" rel="noopener ugc nofollow" target="_blank"> OAuth2 Playground </a>，因为我们将使用它来获取本文开头提到的密钥之一。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi or"><img src="../Images/3d4c876b8f90a3b18c06a0aee83123d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*ywIcOlqA5DHdsPaSNnjJ9Q.png"/></div></figure><p id="0644" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击“创建”后，您将看到您的客户端ID和客户端密码。把这些留给自己，永远不要以任何方式、形状或形式暴露出来。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/aacb3cbf357cd89eb51b7511702dd99a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A7EKmU66RybGNlGb"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@welipower?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">动力赖</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><h1 id="70cd" class="lz ma iq bd mb mc ob me mf mg oc mi mj jw od jx ml jz oe ka mn kc of kd mp mq bi translated">OAuth刷新令牌</h1><p id="b612" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">为了获得我们将在Nodemailer的<code class="fe ng nh ni mx b">transporter</code>对象中使用的刷新令牌，我们需要前往OAuth2游乐场。我们在前期批准了这个URI用于这个特定的目的。</p><p id="7e3a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">1.单击右侧的齿轮图标(这是OAuth2配置),并选中复选框以使用您自己的OAuth2凭据:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/1db01c114fdd0dab36004d9915c2bf24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*Kbg3RnTBNkDd_RQ0zn59mQ.png"/></div></figure><p id="e6fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.看向网站的左侧，你会看到一个服务列表。向下滚动，直到看到Gmail API v1:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/9e5d2ec7de136ee4c8e1ce4499c3a318.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*BppvkU1r4JzZ6j6FvC2qNw.png"/></div></div></figure><p id="cdac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">3.单击“授权API”</p><p id="2311" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">4.您将看到一个屏幕，用于登录您的任何Gmail帐户。选择您列为测试用户的用户。</p><p id="fb83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">5.下一个屏幕会让你知道Google仍然没有验证这个应用程序，但是这是可以的，因为我们还没有提交它进行验证。点击“继续”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/1cf7f1d44b506c7fa3373014951c3571.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*rL0tNdaZqOyIg6aCp4IR3g.png"/></div></figure><p id="975d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">6.在下一个屏幕中，您将被要求授予您的项目与您的Gmail帐户交互的权限。这样做。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/fe1a4edbd5d758da5a663c75cbbf386c.png" data-original-src="https://miro.medium.com/v2/resize:fit:818/format:webp/1*y0TUXbtC_oUaB6KoGlURbQ.png"/></div></figure><p id="49c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">7.完成后，您将被重定向回OAuth游乐场，您会注意到左侧菜单中有一个授权代码。单击标有“用授权码兑换令牌”的蓝色按钮</p><p id="53b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">8.现在将填充刷新令牌和访问令牌的字段</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="d78f" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">回到服务器</h1><p id="7ac3" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">完成所有这些配置后，我们可以返回到我们的应用程序，并将所有数据输入到<code class="fe ng nh ni mx b">transporter</code>创建中。为了让你的所有凭证保密，你可以使用<a class="ae kv" href="https://www.npmjs.com/package/dotenv" rel="noopener ugc nofollow" target="_blank"> dotenv包</a>。不要忘记将您将要创建的<code class="fe ng nh ni mx b">.env</code>文件添加到<code class="fe ng nh ni mx b">.gitignore</code>中。</p><p id="a09f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，现在我们有了这个:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="9cea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将创建<code class="fe ng nh ni mx b">mailOptions</code>对象，它保存了将电子邮件发送到哪里以及使用什么数据的详细信息。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><blockquote class="ox"><p id="cdca" class="oy oz iq bd pa pb pc pd pe pf pg lr dk translated">✋将上述配置更改为您的电子邮件设置</p></blockquote><p id="2b26" class="pw-post-body-paragraph kw kx iq ky b kz ph jr lb lc pi ju le lf pj lh li lj pk ll lm ln pl lp lq lr ij bi translated">这个对象可以有更多的字段，甚至可以有多个接收者，但是我们不会在这里深入讨论。</p><p id="9fba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们将使用<code class="fe ng nh ni mx b">sendMail</code>方法:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="4acb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行您的应用程序，您将看到您的收件箱被一封新邮件填充。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="cef5" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="77eb" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">本文的灵感来自我创建的一个使用Nodemailer的项目。请查看以下内容:</p><div class="pm pn gp gr po pp"><a href="https://github.com/TomerPacific/ProjectChecker" rel="noopener  ugc nofollow" target="_blank"><div class="pq ab fo"><div class="pr ab ps cl cj pt"><h2 class="bd ir gy z fp pu fr fs pv fu fw ip bi translated">to mer Pacific/项目检查器</h2><div class="pw l"><h3 class="bd b gy z fp pu fr fs pv fu fw dk translated">检查我的所有其他项目状态的项目Permalink未能加载最新提交信息。一个项目…</h3></div><div class="px l"><p class="bd b dl z fp pu fr fs pv fu fw dk translated">github.com</p></div></div><div class="py l"><div class="pz l qa qb qc py qd kp pp"/></div></div></a></div></div></div>    
</body>
</html>