# Swift 中使用自返回功能的方法链接

> 原文：<https://betterprogramming.pub/method-chaining-in-swift-using-self-returning-functions-7489ca34a336>

## 利用 UIKit 中的声明性编程

![](img/5ff693afafc6436b3cdc28fac3de9bf6.png)

马修·兰卡斯特在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

[维基百科](https://en.wikipedia.org/wiki/Method_chaining)将方法链定义为:

> **方法链接**，也称为**命名参数习语**，是面向对象编程语言中调用多个方法调用的常用语法。每个方法返回一个对象，允许调用在一个语句中链接在一起，而不需要变量来存储中间结果。

很有可能，我们大多数人已经在某个时候使用过方法链。但是在这里我想谈谈一种特殊类型的对象返回函数。

让我们用一个例子深入探讨一下。

使用 UIKit 创建普通的声明式 UI

在上面的代码片段中，创建了一个对象`UIButton`,它反过来用于设置按钮属性，如背景/标题颜色、按钮标题文本等。最后，将目标操作添加到相同的。

现在让我们来看看`Self`返回函数是如何帮助我们的。

包含自返回功能的 UIButton 扩展

上面的代码片段是一个带有几个函数的`UIButton`扩展。这些功能体中的每一个基本上都设置了一个或多个按钮属性。如果你注意到，这里所有的函数都有两个共同点:

1.  它们都标有`**@discardableResult**` 属性。这是为了抑制编译器警告，因为在大多数情况下，我们不会显式地存储/使用该函数的返回值。过一会儿你就会明白了。
2.  它们都有一个返回类型为`Self`。这就是让我们链接函数调用的原因。

所以让我们来使用这些功能。

使用 UIKit 中的链式方法创建声明性 UI

每次我们使用上面声明的函数编辑一个按钮属性时，我们都获得按钮对象作为返回值，这又可以用来调用一个新函数。

此外，在大多数情况下，我们甚至不必声明一个变量来存储它(当然，除非您想在以后编辑按钮属性)。

举个例子，我们将这个按钮添加到一个`StackView`中。您可以简单地在`arrangedSubviews`数组中定义它，如下所示。

UIKit 类加上这些漂亮而简单的扩展使得声明式 UI 创建成为一种流畅的体验。

这种类型的方法链接不局限于 UIKit 类，可以与任何类类型耦合。一个广泛使用的例子是 Alamofire 请求 API。