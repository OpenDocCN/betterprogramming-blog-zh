<html>
<head>
<title>How To Setup Prometheus (Operator) and Grafana Monitoring on Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Kubernetes上设置Prometheus(操作员)和Grafana监控</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-setup-prometheus-and-grafana-monitoring-on-kubernetes-37d76c97dba0?source=collection_archive---------6-----------------------#2022-03-17">https://betterprogramming.pub/how-to-setup-prometheus-and-grafana-monitoring-on-kubernetes-37d76c97dba0?source=collection_archive---------6-----------------------#2022-03-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5b5e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">本教程向您展示了如何在Kubernetes上使用Prometheus(操作员)和Grafana开始一个现代监控堆栈</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/09c87f4731d5d1b8f27a8ec515bc12cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EdoF8_GDwK9G89to.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@mattvs?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Matthijs van Schuppen </a>在<a class="ae kv" href="https://unsplash.com/photos/bwonz6tZpVA?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="97c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">监控是DevOps最佳实践的关键支柱。这提供了关于平台性能和健康状况的重要信息。在Kubernetes和微服务这样的分布式环境中，更是如此。</p><p id="70df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Kubernetes的一大优势是能够扩展您的服务和应用程序。当您接触到成千上万个应用程序时，手动监控它们或使用脚本是不可行的。您需要采用一个可扩展的监控系统！这就是普罗米修斯和格拉夫纳出现的地方。</p><p id="11c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Prometheus将收集、存储并允许您利用您的平台指标。另一方面，Grafana将插入Prometheus，并允许您创建漂亮的仪表板和图表。</p><p id="219b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">今天，我们将讨论Prometheus是什么，以及在Kubernetes上部署它的最佳方式——使用操作符。我们将看到如何用普罗米修斯和格拉夫纳建立一个监控平台。</p><p id="3dc1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本教程将为您提供一个具有可观察性的良好起点，并走得更远！</p><h1 id="a3f0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">普罗米修斯</h1><h2 id="49b4" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">时间表</h2><p id="c3e3" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated"><a class="ae kv" href="https://prometheus.io/" rel="noopener ugc nofollow" target="_blank"> Prometheus </a>是2012年在<a class="ae kv" href="https://soundcloud.com/" rel="noopener ugc nofollow" target="_blank"> SoundCloud </a>开发的一款用于事件监控和警报的免费开源应用。不久之后，许多公司和组织采用了它并做出了贡献。2016年，<a class="ae kv" href="https://www.cncf.io/" rel="noopener ugc nofollow" target="_blank">云原生计算基金会</a> (CNCF)继Kubernetes之后孵化了普罗米修斯项目。</p><p id="da41" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下时间表显示了普罗米修斯项目的进展:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/3adb1a05e79702e3b824bab175710b10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/0*80ochMcj3M9VVHs2.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">普罗米修斯项目时间表</p></figure><h2 id="8f12" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">概念</h2><p id="a739" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">Prometheus被认为是Kubernetes的默认监控解决方案，其灵感来自谷歌的Borgman。它使用HTTP拉请求从应用程序和基础设施收集指标。目标是通过服务发现或静态配置发现的。通过中间网关也支持推送时间序列。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/84e7563d38728fec69407fb11342a84d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OsqziZC3P9HdxaGU.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">通过HTTP向Prometheus公开的指标示例</p></figure><p id="5143" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nd">普罗米修斯目标暴露的度量具有以下格式:</em> <code class="fe ne nf ng nh b">&lt;metric name&gt;{&lt;label name&gt;=&lt;label value&gt;, ...}</code></p><p id="5356" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Prometheus在时序数据库(TSDB)中记录实时指标，这带来了维度数据模型、操作简单性和可扩展的数据收集。它提供了PromQL，一种灵活的查询语言来利用这种维度。</p><h2 id="0195" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">体系结构</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/632cfb8c53fb01086c4eda81bddc1dc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*u_rFr08xLJOWCZDO.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来自<a class="ae kv" href="https://prometheus.io/" rel="noopener ugc nofollow" target="_blank">https://prometheus.io/</a>的普罗米修斯建筑</p></figure><p id="c9eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">架构图显示Prometheus是一个多组件监控系统。普罗米修斯部署中集成了以下组件:</p><ul class=""><li id="1aac" class="nj nk iq ky b kz la lc ld lf nl lj nm ln nn lr no np nq nr bi translated">Prometheus服务器抓取并存储时间序列数据。它还提供了一个用户界面来查询指标。</li><li id="5932" class="nj nk iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated"><a class="ae kv" href="https://prometheus.io/docs/instrumenting/clientlibs/" rel="noopener ugc nofollow" target="_blank">客户端库</a>用于检测应用程序代码。</li><li id="1ed3" class="nj nk iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated"><a class="ae kv" href="https://github.com/prometheus/pushgateway" rel="noopener ugc nofollow" target="_blank"> Pushgateway </a>支持从短期任务中收集指标</li><li id="ed7e" class="nj nk iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated"><a class="ae kv" href="https://prometheus.io/docs/instrumenting/exporters/" rel="noopener ugc nofollow" target="_blank">出口商</a>对于不直接使用普罗米修斯指标的服务。</li><li id="dee8" class="nj nk iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated"><a class="ae kv" href="https://github.com/prometheus/alertmanager" rel="noopener ugc nofollow" target="_blank">警报管理器</a>处理基于触发器的实时警报</li></ul><h1 id="44e7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">为什么选择普罗米修斯算子？</h1><p id="a028" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">Kubernetes提供了许多对象来部署您的应用程序:Pod、Deployment、Service、Ingress等。这些是本机资源，由于它们是通用的，所以它们的行为不像最终的应用程序。Kubernetes允许您通过自定义资源定义(CRD)创建自定义资源。</p><p id="afc9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">CRD对象实现了最终应用程序的行为。这允许更好的可维护性并减少部署工作。使用<a class="ae kv" href="https://github.com/prometheus-operator/prometheus-operator" rel="noopener ugc nofollow" target="_blank">普罗米修斯算子</a>时，架构的每个组件都来自一个CRD。这使得Prometheus的安装比传统的安装更简单。</p><p id="0885" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在传统的Prometheus安装中，添加新的度量端点需要更新服务器配置。这允许注册一个新的端点作为收集指标的目标。Prometheus操作员使用<code class="fe ne nf ng nh b">Monitor</code>对象(<a class="ae kv" href="https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#podmonitor" rel="noopener ugc nofollow" target="_blank"> PodMonitor </a>、<a class="ae kv" href="https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#servicemonitor" rel="noopener ugc nofollow" target="_blank"> ServiceMonitor </a>)来动态发现端点并抓取指标。</p><p id="875a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用Prometheus操作员可以为Prometheus的安装和维护赢得时间。它为您提供监视对象，以便在不更新Prometheus配置的情况下动态收集指标。</p><h1 id="2b4e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">与操作员一起部署普罗米修斯</h1><p id="c14c" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated"><code class="fe ne nf ng nh b">kube-prometheus-stack</code>是Kubernetes清单、Grafana仪表板和Prometheus规则的集合。它通过Prometheus使用操作员提供易于操作的端到端Kubernetes集群监控。</p><div class="nx ny gp gr nz oa"><a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">头盔-海图/海图/库贝-普罗米修斯-主普罗米修斯-社区的堆栈/头盔-海图</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">安装kube-prometheus堆栈，它是Kubernetes清单、Grafana仪表板和prometheus规则的集合…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">github.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo kp oa"/></div></div></a></div><p id="d686" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这一系列可通过舵轮图获得和部署。您可以在一个命令行中部署监控堆栈。刚接触头盔？看一下<a class="ae kv" href="https://getbetterdevops.io/helm-quickstart-tutorial/" rel="noopener ugc nofollow" target="_blank">本教程</a>入门！</p><h2 id="a152" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">安装舵</h2><pre class="kg kh ki kj gt op nh oq or aw os bi"><span id="380f" class="mk lt iq nh b gy ot ou l ov ow">$ brew install helm</span></pre><h2 id="8431" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">创建专用的监视命名空间</h2><p id="6551" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">在Kubernetes中，名称空间提供了一种在单个集群中隔离资源组的机制。我们创建一个名为<code class="fe ne nf ng nh b">monitoring</code>的名称空间来准备新的部署:</p><pre class="kg kh ki kj gt op nh oq or aw os bi"><span id="4065" class="mk lt iq nh b gy ot ou l ov ow">$ kubectl create namespace monitoring</span></pre><h2 id="abf1" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">安装带舵的kube-prometheus-stack</h2><p id="1fd2" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">使用以下命令添加Prometheus图表存储库并更新本地缓存:</p><pre class="kg kh ki kj gt op nh oq or aw os bi"><span id="b5b6" class="mk lt iq nh b gy ot ou l ov ow">$ helm repo add prometheus-community https://prometheus-community.github.io/helm-charts <br/>$ helm repo update</span></pre><p id="4b51" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用Helm在名称空间<code class="fe ne nf ng nh b">monitoring</code>中部署kube-stack-prometheus图表:</p><pre class="kg kh ki kj gt op nh oq or aw os bi"><span id="3619" class="mk lt iq nh b gy ot ou l ov ow">$ helm upgrade --namespace monitoring --install kube-stack-prometheus prometheus-community/kube-prometheus-stack --set prometheus-node-exporter.hostRootFsMount.enabled=false</span></pre><p id="1748" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ne nf ng nh b">hostRootFsMount.enabled</code> <em class="nd">设置为</em> <code class="fe ne nf ng nh b">false</code> <em class="nd">在Mac上Docker桌面工作</em></p><p id="4c1d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">CRD现在安装在名称空间中。您可以使用下面的<code class="fe ne nf ng nh b">kubectl</code>命令来验证这一点:</p><pre class="kg kh ki kj gt op nh oq or aw os bi"><span id="f636" class="mk lt iq nh b gy ot ou l ov ow">$ kubectl get -n monitoring crds                                                           <br/>NAME                                        CREATED AT<br/>alertmanagerconfigs.monitoring.coreos.com   2022-03-15T10:54:41Z<br/>alertmanagers.monitoring.coreos.com         2022-03-15T10:54:42Z<br/>podmonitors.monitoring.coreos.com           2022-03-15T10:54:42Z<br/>probes.monitoring.coreos.com                2022-03-15T10:54:42Z<br/>prometheuses.monitoring.coreos.com          2022-03-15T10:54:42Z<br/>prometheusrules.monitoring.coreos.com       2022-03-15T10:54:42Z<br/>servicemonitors.monitoring.coreos.com       2022-03-15T10:54:42Z<br/>thanosrulers.monitoring.coreos.com          2022-03-15T10:54:42Z</span></pre><p id="bc71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是我们现在在名称空间中运行的内容:</p><pre class="kg kh ki kj gt op nh oq or aw os bi"><span id="2c4b" class="mk lt iq nh b gy ot ou l ov ow">$ kubectl get pods -n monitoring                                                                    <br/>NAME                                                       READY   STATUS    RESTARTS   AGE<br/>alertmanager-kube-stack-prometheus-kube-alertmanager-0     2/2     Running   0          2m36s<br/>kube-stack-prometheus-grafana-6994bd6c69-h6s9z             3/3     Running   0          13h<br/>kube-stack-prometheus-kube-operator-86667b5cdf-cqndt       1/1     Running   0          13h<br/>kube-stack-prometheus-kube-state-metrics-fc9878699-dpgh6   1/1     Running   0          13h<br/>kube-stack-prometheus-prometheus-node-exporter-vrjsl       1/1     Running   0          13h<br/>prometheus-kube-stack-prometheus-kube-prometheus-0         2/2     Running   0          13h</span></pre><p id="d792" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该图表安装了Prometheus components、Operator、Grafana和以下出口商:</p><ul class=""><li id="625e" class="nj nk iq ky b kz la lc ld lf nl lj nm ln nn lr no np nq nr bi translated"><a class="ae kv" href="https://github.com/prometheus/node_exporter" rel="noopener ugc nofollow" target="_blank">普罗米修斯节点导出器</a>公开硬件和操作系统指标</li><li id="fbd0" class="nj nk iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated"><a class="ae kv" href="https://github.com/kubernetes/kube-state-metrics" rel="noopener ugc nofollow" target="_blank"> kube-state-metrics </a>监听Kubernetes API服务器并生成关于对象状态的度量</li></ul><p id="52df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们与普罗米修斯和格拉夫纳的监控系统已经准备好了！</p><h1 id="0199" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">连接到普罗米修斯的网络界面</h1><p id="6440" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">Prometheus web UI可通过以下命令通过<code class="fe ne nf ng nh b">port-forward</code>访问:</p><pre class="kg kh ki kj gt op nh oq or aw os bi"><span id="d584" class="mk lt iq nh b gy ot ou l ov ow">$ kubectl port-forward --namespace monitoring svc/kube-stack-prometheus-kube-prometheus 9090:9090</span></pre><p id="4ad8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe ne nf ng nh b"><a class="ae kv" href="http://localhost:9090" rel="noopener ugc nofollow" target="_blank">http://localhost:9090</a></code>上的浏览器标签，显示普罗米修斯网络用户界面。我们可以检索从出口商那里收集的指标:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/bd4e87651b3e2dedd0787f43548f7695.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hv3JV93RRsXmqkRT.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Prometheus web UI中的仪表板显示时间序列指标</p></figure><p id="33ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">转到“Status&gt;Targets ”,您可以看到Prometheus服务器发现的所有指标端点:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/fa928d0e33ba923d5652ac21152e8289.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0oN5q_IE5N100Fq-.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">普罗米修斯发现的度量端点在状态&gt;目标菜单中可见</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/0895d48f71d952f8e225a7997fc063a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WYMiQqgHEpQDmOjw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Prometheus服务器发现的目标端点很少</p></figure><h1 id="ccc8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">连接到Grafana</h1><p id="23f2" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">连接到Grafana web界面的凭证存储在Kubernetes Secret中，并以base64编码。我们用这两个命令检索用户名和密码:</p><pre class="kg kh ki kj gt op nh oq or aw os bi"><span id="c767" class="mk lt iq nh b gy ot ou l ov ow">$ kubectl get secret --namespace monitoring kube-stack-prometheus-grafana -o jsonpath='{.data.admin-user}' | base64 -d <br/>$ kubectl get secret --namespace monitoring kube-stack-prometheus-grafana -o jsonpath='{.data.admin-password}' | base64 -d</span></pre><p id="fa11" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们用以下命令创建到Grafana的<code class="fe ne nf ng nh b">port-forward</code>:</p><pre class="kg kh ki kj gt op nh oq or aw os bi"><span id="145d" class="mk lt iq nh b gy ot ou l ov ow">$ kubectl port-forward --namespace monitoring svc/kube-stack-prometheus-grafana 8080:80</span></pre><p id="e848" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开您的浏览器，进入<code class="fe ne nf ng nh b"> <a class="ae kv" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a></code>并填写之前的凭证:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/7897cc1f8cd6ab351cc625b504ce5da8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/0*hdmGziekrHjYqZFq.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Grafana登录界面</p></figure><p id="6bc7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">kube-stack-prometheus部署提供了Grafana仪表盘:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pa"><img src="../Images/0d486e5702f7f6c485c6db25a3824695.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JC3cma4x11hDCI0_.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">提供的Grafana仪表板列表</p></figure><p id="5f55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们可以看到其中一个展示了Kubernetes pods的计算资源:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/6da1ddf30a8e4a279119978b64388e45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Jy2OIoBHt-pplHir.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">显示Kubernetes pod计算资源的Grafana仪表板</p></figure><p id="40e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好了，这就是你如何在库本内特斯上设置普罗米修斯和格拉法纳监控的。</p></div><div class="ab cl pc pd hu pe" role="separator"><span class="pf bw bk pg ph pi"/><span class="pf bw bk pg ph pi"/><span class="pf bw bk pg ph"/></div><div class="ij ik il im in"><p id="7753" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！🙏我希望这篇文章是有帮助的。想了解更多关于DevOps的知识？看看下面更多类似的文章吧！⬇️</p><div class="nx ny gp gr nz oa"><a href="https://getbetterdevops.io" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">Getbetterdevops</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">Getbetterdevops是一个devops博客，帮助学习现代基础设施和云技术，如Kubernetes…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">getbetterdevops.io</p></div></div><div class="oj l"><div class="pj l ol om on oj oo kp oa"/></div></div></a></div></div></div>    
</body>
</html>