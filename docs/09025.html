<html>
<head>
<title>Solving the Monty Hall Problem With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python解决Monty Hall问题</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/solving-the-monty-hall-problem-with-python-46d3f63eadc3?source=collection_archive---------2-----------------------#2021-07-08">https://betterprogramming.pub/solving-the-monty-hall-problem-with-python-46d3f63eadc3?source=collection_archive---------2-----------------------#2021-07-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="187b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过考虑是否转换来增加你在三门问题上的获胜机会</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/48fa1ccb08297191474ba497e430234f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DZPKH7MJ2MjW8Gy0"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">特里·维里斯迪斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="0833" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">蒙蒂·霍尔问题</h1><p id="7b9c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">蒙蒂霍尔问题是最著名的概率谜题之一。它是以美国电视游戏节目主持人蒙蒂·霍尔的名字命名的，该节目涉及以下问题。下面的描述是游戏最典型的设置，只是为了说明——实际的奖励可能会有所不同。</p><p id="8c49" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">假设你可以选择打开一扇门，门后会有一个奖项。总共有三扇门:一扇门后是一辆汽车，另外两扇门后是山羊。在你从剩下的两扇门中选择一扇门后，主人会为你打开一扇门，门后有一只山羊。此时，系统会询问您是否要将初始选择切换到剩余的关闭的门。假设你的目标是最大化赢得汽车的机会。</p><h1 id="7ffe" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">令人困惑的部分和简单的解决方案</h1><p id="532e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">此时，你只剩下两扇门:一扇门有汽车，另一扇门有山羊。所以看起来这并不重要，你切换你的选择与否，因为当你从两个中选择一个时，有50%的机会。然而，事实是，如果你切换到剩下的关闭的门，对你是有利的。为了说明这一点，让我们考虑下面的解决方案。首先，我们知道奖项的设置只有三种可能，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/9e8ea47eb9ab9aa09e7925dc2f661695.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-PRWqJXUyD43db8XVODjSw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">位置的可能性</p></figure><p id="92e0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">因为不同门之间的选择/切换场景是相同的，所以我们可以假设您总是选择1号门作为开始。有了这个固定的选择，我们就可以知道你是选择保持你的选择还是选择剩下的封闭选择。下图总结了可能的情况:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/385a122b85b143caaeb2af574e3824bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sjZ1yCQDuz7f22auVNS2CA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">停留与转换的可能场景</p></figure><p id="afd4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如上图所示，如果你选择保持原来的选择，只有1/3的机会可以赢得汽车。相比之下，如果你改变选择，你有三分之二的机会赢得这辆车。因此，如果你真的在玩这个游戏，你肯定应该切换到关闭的车门，以增加你赢得汽车的机会。</p><h1 id="89c9" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">Python代码模拟</h1><p id="7eb5" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">上面的插图或多或少是一个直观的解决方案，列出了所有可能的场景。还有许多其他更数学的解决方案，你可以通过简单地在网上搜索蒙蒂霍尔问题找到它们。出于学习Python的目的，我们可以运行一个模拟实验，找出留/换车的赢车概率。因为这篇文章是关于教初学者学习Python的，所以我将重点讨论各个组件和最终工作版本的步骤。</p><p id="1698" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">请注意，我将包括额外的解释，这些解释是在我解决问题的过程中产生的，所以你可以看到我是如何处理这个问题的。另一件要注意的事情是，代码并不打算产生最简洁的解决方案。相反，我正试图使用可读的代码来解决这个我们大多数人都能理解的问题。</p><h1 id="7f04" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated"><strong class="ak">数据模型</strong></h1><p id="c5c3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">对于这个问题，关键数据包括门牌号、想要的奖励(汽车)、不想要的奖励(山羊)以及门后的奖励(汽车、山羊、山羊)。因此，我们从以下变量开始:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="7d05" class="mz la it mv b gy na nb l nc nd">from random import shuffle, choice</span><span id="cea8" class="mz la it mv b gy ne nb l nc nd">door_numbers = [1, 2, 3]<br/>wanted_award = <strong class="mv iu">"car"<br/></strong>unwanted_award = <strong class="mv iu">"goat"<br/></strong>awards = [wanted_award, unwanted_award, unwanted_award]</span></pre><ul class=""><li id="d673" class="nf ng it lt b lu mn lx mo ma nh me ni mi nj mm nk nl nm nn bi translated">来自<code class="fe no np nq mv b">random</code>模块的<code class="fe no np nq mv b">shuffle</code>和<code class="fe no np nq mv b">choice</code>功能将用于游戏，这将在后面说明。</li><li id="4754" class="nf ng it lt b lu nr lx ns ma nt me nu mi nv mm nk nl nm nn bi translated">我使用一个<code class="fe no np nq mv b">list</code>对象来存储奖励，因为我打算改变奖励的顺序(使用<code class="fe no np nq mv b">shuffle</code>方法，你会看到)，这将允许我们在每次玩游戏时有一个随机的奖励顺序。</li><li id="77ea" class="nf ng it lt b lu nr lx ns ma nt me nu mi nv mm nk nl nm nn bi translated">我使用两个变量来分别表示想要的和不想要的奖励，因为我们将在后面的代码中频繁使用它们，并且我们不希望多次直接编写字符串——使用变量不仅可以消除任何拼写错误，而且如果以后我们决定使用不同的奖励，还可以更容易地进行重构。</li></ul><h1 id="7e46" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated"><strong class="ak">单人游戏</strong></h1><p id="b41e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了使用模拟来计算概率，我们将不得不多次重复这个游戏，所以我们将首先建立我们如何玩这个游戏一次。以下功能是工作版本，有一些重要亮点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">天魔单人游戏</p></figure><ul class=""><li id="29e7" class="nf ng it lt b lu mn lx mo ma nh me ni mi nj mm nk nl nm nn bi translated">在一个游戏中，有两个因素会发生变化。第一，你会先挑哪扇门？第二，在主持人以不合意的奖项摔门之后，你会切换最初的选择吗？因此，我们的<code class="fe no np nq mv b">monty_hall_trial</code>函数为这两个因素取两个参数。</li><li id="1316" class="nf ng it lt b lu nr lx ns ma nt me nu mi nv mm nk nl nm nn bi translated">第2行用于随机排列<code class="fe no np nq mv b">awards</code>的顺序。洗牌后，我们将使用奖励和门编号来创建一个<code class="fe no np nq mv b">dict</code>对象(即<code class="fe no np nq mv b">doors</code>)来存储门奖励信息。</li><li id="2f2a" class="nf ng it lt b lu nr lx ns ma nt me nu mi nv mm nk nl nm nn bi translated">第4-10行用于删除没有所需奖励的门，并确定您可以切换到的门。因为我们想要操作这些项目，所以出于可变性的考虑，我们使用了一个<code class="fe no np nq mv b">list</code>对象。</li><li id="734a" class="nf ng it lt b lu nr lx ns ma nt me nu mi nv mm nk nl nm nn bi translated">根据开关的决定，最终选择的门将是最初选择的门或保留的门(第11行)。</li><li id="ec99" class="nf ng it lt b lu nr lx ns ma nt me nu mi nv mm nk nl nm nn bi translated"><code class="fe no np nq mv b">monty_hall_trial</code>函数返回您是否赢得想要的奖励。此信息非常重要，因为我们将根据交换决策来计算获胜的次数。</li></ul><h1 id="32fe" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated"><strong class="ak">模拟总结</strong></h1><p id="ae04" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们需要把这个游戏玩上千次，才能找出大概的概率。因此，我们将有以下函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><ul class=""><li id="4b07" class="nf ng it lt b lu mn lx mo ma nh me ni mi nj mm nk nl nm nn bi translated"><code class="fe no np nq mv b">simulate_monty_hall</code>函数有两个参数:<code class="fe no np nq mv b">trial_number</code>(试验次数)和<code class="fe no np nq mv b">should_switch</code>(是否使用开关)。</li><li id="eda3" class="nf ng it lt b lu nr lx ns ma nt me nu mi nv mm nk nl nm nn bi translated"><code class="fe no np nq mv b">choice</code>功能从列表中随机选择一个门号码。</li><li id="99c2" class="nf ng it lt b lu nr lx ns ma nt me nu mi nv mm nk nl nm nn bi translated"><code class="fe no np nq mv b">won_car</code>是一个布尔值，通过指定<code class="fe no np nq mv b">initial_pick</code>和<code class="fe no np nq mv b">should_switch</code>来表示我们是否会赢得游戏。</li><li id="7fab" class="nf ng it lt b lu nr lx ns ma nt me nu mi nv mm nk nl nm nn bi translated">在第6行中，<code class="fe no np nq mv b">int</code>函数将把一个布尔值转换成一个整数。<code class="fe no np nq mv b">True</code>被评估为1，而<code class="fe no np nq mv b">False</code>被评估为0。因此，我们可以不断更新<code class="fe no np nq mv b">winning_counts</code>来记录中奖次数。</li><li id="e478" class="nf ng it lt b lu nr lx ns ma nt me nu mi nv mm nk nl nm nn bi translated">在第7行，我们用获胜次数除以总尝试次数，计算出使用<code class="fe no np nq mv b">should_switch</code>策略的游戏获胜概率。</li><li id="8fdc" class="nf ng it lt b lu nr lx ns ma nt me nu mi nv mm nk nl nm nn bi translated">第8–10行只是打印关键信息，告诉我们指定参数发生了什么。</li></ul><p id="e17b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如下图，你可以看到，当你一致切换我们的选择时，模拟显示你的中奖概率约为67.55%，而如果你坚持最初的选择，你的中奖概率约为33.08%。这些模拟结果与我们在上一节中的计算一致。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="b90a" class="mz la it mv b gy na nb l nc nd">&gt;&gt;&gt; simulate_monty_hall(10000, True)<br/>Trial Times: 10000 times<br/>Switching: True<br/>Probability: 67.55%<br/>&gt;&gt;&gt; simulate_monty_hall(10000, False)<br/>Trial Times: 10000 times<br/>Switching: False<br/>Probability: 33.08%</span></pre><h1 id="f301" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="e882" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在本文中，我们介绍了蒙蒂霍尔问题的背景及其简单的解决方法。然后，我们使用Python通过切换我们的初始选择或不切换来进行获胜概率的模拟分析。具体来说，我们首先回顾了所需的数据模型，并分析了运行单个试验(<code class="fe no np nq mv b">monty_hall_trial</code>函数)和整个实验(<code class="fe no np nq mv b">simulate_monty_hall</code>函数)所需的两个基本函数。</p><p id="1ca2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">就像那句老话，罗马不是一天建成的——学习编码也是一个漫长的过程。通过解决这个看似微不足道的项目，你逐渐变得更擅长编码。</p><p id="e7c4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">感谢你阅读这篇文章。</p></div></div>    
</body>
</html>