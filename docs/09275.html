<html>
<head>
<title>5 SwiftUI List Tricks for iOS 14+</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS 14+的5个SwiftUI列表技巧</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-swiftui-list-tricks-for-ios-13-7431c5347a93?source=collection_archive---------4-----------------------#2021-08-05">https://betterprogramming.pub/5-swiftui-list-tricks-for-ios-13-7431c5347a93?source=collection_archive---------4-----------------------#2021-08-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="98f2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">导航、分组样式、批量删除、可扩展列表和部分</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/84e491cac547ac7c18d1527c61ad4801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ll99istwBGuPVzEOFdyxw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="93a1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">List 是一个很棒的SwiftUI组件，用于创建包含多个行视图的列表视图。它非常类似于UITableView，但是它有一个完全不同的实现(不再有委托和数据源方法)。</p><p id="bd1a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">SwiftUI中的List使用声明性代码，这意味着它将观察数据更改，并仅根据更改的内容高效地更新呈现的结果。</p><p id="e545" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本文中，我们将讨论列表中提供的五个基本特性:</p><ol class=""><li id="3498" class="ls lt iq kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">多个部分</li><li id="5fc2" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">分组并插入</li><li id="a68a" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">删除行项目(单一和批量模式)</li><li id="c933" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">可扩展列表</li><li id="b5ad" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">航行</li></ol><h1 id="3690" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">了解基本知识</h1><p id="5d47" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">在我们讨论所有这五个特性之前，让我们先来看看这个列表的基本语法和实现。</p><p id="586b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，创建一个新的SwiftUI项目来试验一些例子。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/0f8f65265a65e203a8ff09ca766f5a3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w--G5Dpo325BYckwoQoE1w.png"/></div></div></figure><h2 id="84e0" class="ne mh iq bd mi nf ng dn mm nh ni dp mq le nj nk ms li nl nm mu lm nn no mw np bi translated">静态列表</h2><p id="feb0" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">在列表闭包中静态定义所有项目的列表。将以下代码添加到项目中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">静态列表示例</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/038a1bdd3558491734dd7df974a9fd66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o2nr-v44GYW-0sBhmg10lQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">预览静态列表的输出</p></figure><h2 id="a64a" class="ne mh iq bd mi nf ng dn mm nh ni dp mq le nj nk ms li nl nm mu lm nn no mw np bi translated">带有自定义行视图的动态列表</h2><p id="2455" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">首先，我们需要创建<code class="fe nt nu nv nw b">CustomRowView</code>结构并定义简单的内容。然后，通过在<code class="fe nt nu nv nw b">List()</code>中传递一个参数来使其动态化。参见下面的代码来显示来自<code class="fe nt nu nv nw b">bookTitles</code>数组的列表:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/d88a1b1548fa506d2db9b063774e7a1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xe0Sl5w435CoDBZs-TY3xw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">动态列表示例的预览输出</p></figure><h2 id="76ed" class="ne mh iq bd mi nf ng dn mm nh ni dp mq le nj nk ms li nl nm mu lm nn no mw np bi translated">使用ForEach</h2><p id="0b6e" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">注意，动态内容也可以使用<code class="fe nt nu nv nw b">ForEach</code>闭包来完成。这里有一个例子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">带有ForEach语法的动态列表</p></figure></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="5c79" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">酷，我想我们对基本列表的工作方式很满意。现在，让我们继续讨论五个列表特性。</p><h1 id="9d39" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">1.多个部分</h1><p id="7835" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">在下面的代码中，我们将创建包含动态项目的两个部分(食品和饮料)。我们只需要做以下事情:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/4f91841400c11c93014a4380cbaa3630.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VzBDHeJ47eVjZjlLEqRzfw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">预览带有节示例的列表的输出</p></figure><h1 id="ac0a" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">2.分组并插入</h1><p id="3b88" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">对于分组和插入，SwiftUI提供了几个选项，包括<code class="fe nt nu nv nw b">InsetGroupedListStyle()</code>、<code class="fe nt nu nv nw b">GroupedListStyle()</code>、<code class="fe nt nu nv nw b">InsetListStyle()</code>。我个人喜欢InsetGroupedList风格。它的默认填充已经很好很干净了。代码如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/c15479a4ec7dcaaad1c8de1591a80f5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bOWjt2bmoAgTisxIwi1EcQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">包含节和组的列表的预览输出插入</p></figure><h1 id="3774" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">3.删除行项目(单一和批量模式)</h1><p id="5ca7" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">对于iOS13及以上版本，默认支持<code class="fe nt nu nv nw b">onDelete()</code>，允许用户滑动并点击默认的“删除”按钮。然而，在iOS15中，列表中添加了一个更新，以调用新的<code class="fe nt nu nv nw b">swipeActions()</code>函数，如本文<a class="ae lr" href="https://www.appcoda.com/swiftui-swipe-actions/" rel="noopener ugc nofollow" target="_blank">文章</a>中详细讨论的。</p><p id="9724" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">很好，现在让我们添加<code class="fe nt nu nv nw b">onDelete()</code>函数。注意，我们将属性包装器<code class="fe nt nu nv nw b">@State</code>添加到<code class="fe nt nu nv nw b">bookTitles</code>中，使其在视图结构中可变。此外，一旦我们更新了变量，如添加或删除项目，列表将自动刷新。下面是实现这一点的代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/014acdff5ee88b6952bfc74d78a453b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CV6zNQ298hR0TIIholpmBA.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">滑动以删除示例</p></figure><h2 id="15b7" class="ne mh iq bd mi nf ng dn mm nh ni dp mq le nj nk ms li nl nm mu lm nn no mw np bi translated">批量删除</h2><p id="adf2" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">此外，SwiftUI提供了<a class="ae lr" href="https://developer.apple.com/documentation/swiftui/editbutton" rel="noopener ugc nofollow" target="_blank"> EditButton </a>特性，可以在指定范围内启用编辑模式。因此，我们将更新导航，并在右上方添加<code class="fe nt nu nv nw b">EditButton</code>,以便为列表中的所有内容启用删除选项。请参见下面的代码和输出:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/aed93b3b8089531720b954ec35c7f086.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*x8bYn8GSurABG16fL2Pjrw.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用编辑按钮批量删除示例</p></figure><h1 id="6f35" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">4.可扩展列表</h1><p id="9613" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">List有一个特性，可以传递相同类型的子项或子项。让我们看看下面的例子:</p><p id="483f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，我们将创建一个用于模拟数据的基本结构。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="b3d5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，添加一个列表，并将<code class="fe nt nu nv nw b">subItem</code>字段作为<code class="fe nt nu nv nw b">children</code>参数传递。正如我们所看到的，最重要的部分是数据，它决定了列表是否有其子列表。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/bb8f49bfad265e385c56c02bd5c29a8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qYnFHL1BVgyvD4pN8N8-oQ.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">可扩展列表示例输出</p></figure><h1 id="f53d" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">5.航行</h1><p id="3dac" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">在这一节中，让我们重温一下我们的基本动态列表，并使用<code class="fe nt nu nv nw b">NavigationLink</code>闭包使其可点击。</p><p id="1029" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，我们将创建一个简单的DetailView，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="257a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，用以下代码更新<code class="fe nt nu nv nw b">BasicDynamicView</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/683b1b598e38753268fad626062520c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*dtVzLSFjLQPMIwzV3DK4mA.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">列表示例的导航</p></figure><h1 id="ebbf" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">项目已完成</h1><p id="a284" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">恭喜你！现在，我们已经完成了所有基本的五个功能。完整的源代码可以从我的GitHub <a class="ae lr" href="https://github.com/xmhafiz/SwiftUIListExample" rel="noopener ugc nofollow" target="_blank">库</a>下载。希望对你学习SwiftUI和提升iOS开发技能有所帮助。</p><p id="a313" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢阅读。编码快乐！</p></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><h1 id="bcff" class="mg mh iq bd mi mj oi ml mm mn oj mp mq jw ok jx ms jz ol ka mu kc om kd mw mx bi translated">参考</h1><ul class=""><li id="ce73" class="ls lt iq kx b ky my lb mz le on li oo lm op lq oq ly lz ma bi translated"><a class="ae lr" href="https://developer.apple.com/documentation/swiftui/list" rel="noopener ugc nofollow" target="_blank"> SwiftUI列表文档</a></li><li id="ac1b" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq oq ly lz ma bi translated"><a class="ae lr" href="https://developer.apple.com/documentation/swiftui/editbutton" rel="noopener ugc nofollow" target="_blank">编辑按钮文档</a></li><li id="c168" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq oq ly lz ma bi translated"><a class="ae lr" href="https://www.appcoda.com/swiftui-swipe-actions/" rel="noopener ugc nofollow" target="_blank">列表教程</a>由AppCoda提供</li><li id="9d7f" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq oq ly lz ma bi translated"><a class="ae lr" href="https://www.hackingwithswift.com/quick-start/swiftui/working-with-lists" rel="noopener ugc nofollow" target="_blank">列表教程</a>由HackingWithSwift提供</li><li id="af07" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq oq ly lz ma bi translated"><a class="ae lr" href="https://github.com/xmhafiz/SwiftUIListExample" rel="noopener ugc nofollow" target="_blank"> GitHub回购</a></li></ul></div></div>    
</body>
</html>