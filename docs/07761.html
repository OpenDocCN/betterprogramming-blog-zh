<html>
<head>
<title>How To Share Jupyter Notebooks With Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何与Docker共享Jupyter笔记本</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-share-jupyter-notebooks-with-docker-2f19aa2cd87b?source=collection_archive---------10-----------------------#2021-02-16">https://betterprogramming.pub/how-to-share-jupyter-notebooks-with-docker-2f19aa2cd87b?source=collection_archive---------10-----------------------#2021-02-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9e4d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">共享笔记本的快速浏览示例</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5069a27a71e5d1492ff6ad0d9bf9034e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QGWAaIuMrVGx6vzL"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://images.unsplash.com/photo-1587606607115-1165198fd0de?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1050&amp;q=80" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的图像</p></figure><div class="kz la gp gr lb lc"><a href="https://jorgepit-14189.medium.com/membership" rel="noopener follow" target="_blank"><div class="ld ab fo"><div class="le ab lf cl cj lg"><h2 class="bd iu gy z fp lh fr fs li fu fw is bi translated">用我的推荐链接加入媒体-乔治皮皮斯</h2><div class="lj l"><h3 class="bd b gy z fp lh fr fs li fu fw dk translated">阅读乔治·皮皮斯(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="lk l"><p class="bd b dl z fp lh fr fs li fu fw dk translated">jorgepit-14189.medium.com</p></div></div><div class="ll l"><div class="lm l ln lo lp ll lq ks lc"/></div></div></a></div><p id="2910" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">作为数据科学家，我们希望我们的工作是可重复的，这意味着当我们分享我们的分析时，每个人都应该能够重新运行它，并得出相同的结果。这并不总是容易的，因为我们要处理不同的操作系统(iOS、Windows、Linux)和不同的编程语言版本和软件包。这就是为什么我们鼓励您使用虚拟环境，如康达环境。conda environments的另一个更强大的解决方案是与<a class="ae ky" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank">码头工人</a>合作。</p><p id="481c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><strong class="lt iu">场景</strong>:我们已经使用Python Jupyter笔记本对我们自己的数据进行了分析，我们希望与各个社区分享这一分析，确保每个人都能够重现结果。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="84ce" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">在本地运行分析</h1><p id="ed4f" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">为简单起见，我们假设我已经运行了以下分析:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/378473f2640ce4a8f2f231e5528cba96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vrUZGjrAE8LDbmu0.png"/></div></div></figure><p id="72a8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">本质上，我尝试使用<code class="fe ns nt nu nv b">pandas</code>、<code class="fe ns nt nu nv b">numpy</code>和<code class="fe ns nt nu nv b">vaderSentiment</code>库对<code class="fe ns nt nu nv b">my_data.csv</code>进行情感分析。因此，我想分享这个Jupyter笔记本，我希望它是即插即用的。让我们看看如何创建一个包含Jupyter笔记本的docker映像，以及我的数据和所需的库。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="8c29" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">Jupyter Docker堆栈</h1><p id="2941" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated"><a class="ae ky" href="https://jupyter-docker-stacks.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Jupyter Docker Stacks </a>是一组现成的Docker映像，包含Jupyter应用程序和交互式计算工具。您可以使用堆栈图像来执行以下任何操作(以及更多操作):</p><ul class=""><li id="24dd" class="nw nx it lt b lu lv lx ly ma ny me nz mi oa mm ob oc od oe bi translated">在本地Docker容器中启动个人Jupyter笔记本服务器</li><li id="ff29" class="nw nx it lt b lu of lx og ma oh me oi mi oj mm ob oc od oe bi translated">使用JupyterHub为团队运行JupyterLab服务器</li><li id="a320" class="nw nx it lt b lu of lx og ma oh me oi mi oj mm ob oc od oe bi translated">编写自己的项目文档</li></ul><p id="844b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们将建立基于<code class="fe ns nt nu nv b"><a class="ae ky" href="https://jupyter-docker-stacks.readthedocs.io/en/latest/using/selecting.html#core-stacks" rel="noopener ugc nofollow" target="_blank">jupyter/scipy</a></code>的自定义图像</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="87b3" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">创建requirements.txt文件</h1><p id="00d9" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">Jupyter Docker核心映像包含最常见的库，但可能需要安装一些额外的库。就像在我们的例子中，我们想要安装<code class="fe ns nt nu nv b">vaderSentiment==3.3.2</code>库。这意味着我们必须创建<code class="fe ns nt nu nv b">requirements.txt</code>文件。</p><p id="e20f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><code class="fe ns nt nu nv b">requirements.txt</code>文件是:</p><pre class="kj kk kl km gt ok nv ol om aw on bi"><span id="04fa" class="oo mv it nv b gy op oq l or os">vaderSentiment==3.3.2</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="8d07" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">创建Dockerfile文件</h1><p id="1b8d" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">现在我们需要如下创建<code class="fe ns nt nu nv b"><strong class="lt iu">Dockerfile</strong></code>:</p><pre class="kj kk kl km gt ok nv ol om aw on bi"><span id="6635" class="oo mv it nv b gy op oq l or os">FROM jupyter/scipy-notebook</span><span id="e9d9" class="oo mv it nv b gy ot oq l or os">COPY requirements.txt ./requirements.txt<br/>COPY my_data.csv ./my_data.csv<br/>COPY my_jupyter.ipynb ./my_jupyter.ipynb</span><span id="e12e" class="oo mv it nv b gy ot oq l or os">RUN pip install -r requirements.txt</span></pre><p id="f3bb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">因此，我们用<code class="fe ns nt nu nv b">jupyter/scipy-notebook</code>开始我们的映像，然后我们将所需的文件从本地计算机复制到映像中。注意，我们可以使用路径和目录。最后，我们在<code class="fe ns nt nu nv b">requirements.txt</code>文件中安装所需的库。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="5317" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">构建Dockerfile文件</h1><p id="cdd2" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">因为我们已经创建了Dockerfile文件，所以我们准备构建它。请注意，您可以给它取任何名称。我选择叫它<code class="fe ns nt nu nv b">mysharednotebook</code>。提示:不要忘记经期！</p><p id="1f6f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">该命令如下所示:</p><pre class="kj kk kl km gt ok nv ol om aw on bi"><span id="bc0a" class="oo mv it nv b gy op oq l or os">$ docker build -t mysharednotebook .</span></pre><p id="ed28" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果您想确保您的图像已经创建，您可以键入:</p><pre class="kj kk kl km gt ok nv ol om aw on bi"><span id="bc18" class="oo mv it nv b gy op oq l or os">$ docker images</span></pre><p id="b6fc" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">去拿码头工人的照片。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="6572" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">运行图像</h1><p id="f63e" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">如果我们想确保映像按预期运行，我们运行:</p><pre class="kj kk kl km gt ok nv ol om aw on bi"><span id="d3ba" class="oo mv it nv b gy op oq l or os">$ docker run -it -p 8888:8888 mysharednotebook</span></pre><p id="b930" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们将获得一个Jupyter笔记本的链接！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/7945a646ff7b2cd53d736774cd21c86a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Wx8hvDwPQYwiUshJ.png"/></div></div></figure><p id="011d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果您想查看哪些容器正在运行，您可以键入:</p><pre class="kj kk kl km gt ok nv ol om aw on bi"><span id="b7af" class="oo mv it nv b gy op oq l or os">$ docker ps -a</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="f3e3" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">将您的图像推送到Docker Hub</h1><p id="ea02" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">一旦你确定图像按预期工作，你就可以把它推送到Docker Hub，这样每个人都可以拉它。你需要做的第一件事是标记你的图片。您可以使用以下命令:</p><pre class="kj kk kl km gt ok nv ol om aw on bi"><span id="11f9" class="oo mv it nv b gy op oq l or os">$ docker tag 9811503b3d3a gpipis/mysharednotebook:first</span></pre><p id="ac6e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><code class="fe ns nt nu nv b">9811503b3d3a</code>是图像ID，它是从命令<code class="fe ns nt nu nv b">docker images</code>获得。<code class="fe ns nt nu nv b">gpipis</code>是我的用户名，<code class="fe ns nt nu nv b">mysharednotebook</code>是我在上面创建的图像名。最后，<code class="fe ns nt nu nv b">:first</code>是一个可选标签。</p><p id="18e1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在，我们可以通过键入以下命令来推送映像了:</p><pre class="kj kk kl km gt ok nv ol om aw on bi"><span id="8fd2" class="oo mv it nv b gy op oq l or os">$ docker push gpipis/mysharednotebook:first</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/50200b8bb4c79cfe79c240dc4938bab8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/0*wrxJEW8Ndqie_rs7.png"/></div></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="4a23" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">从Docker Hub提取图像</h1><p id="5ea4" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">上面的工作是由想要分享他们工作的人完成的。现在，让我们看看如何获得这个图像，并在可复制的Jupyter笔记本上工作。</p><p id="edc1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们要做的是通过键入以下内容来<code class="fe ns nt nu nv b">pull</code>图像:</p><pre class="kj kk kl km gt ok nv ol om aw on bi"><span id="32ad" class="oo mv it nv b gy op oq l or os">$ docker pull gpipis/mysharednotebook:first</span></pre><p id="37d2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在，我们可以通过键入以下命令来运行它:</p><pre class="kj kk kl km gt ok nv ol om aw on bi"><span id="ce7b" class="oo mv it nv b gy op oq l or os">$ docker run -it -p 8888:8888 gpipis/mysharednotebook:first</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/0910c41a2741742f098e8fba0751866e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jW8-qkwqmHqPMnSU.png"/></div></div></figure><p id="6cc4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果我们将URL复制粘贴到浏览器中，我们会得到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/1dbaf976389fac4485d89171d2f066c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oefpUUHFIQC7iRrJ.png"/></div></div></figure><p id="a03a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">请注意，您可以更改端口。例如，如果您想在<code class="fe ns nt nu nv b">8889</code>上运行，那么您键入:</p><pre class="kj kk kl km gt ok nv ol om aw on bi"><span id="24a2" class="oo mv it nv b gy op oq l or os">$ docker run -it -p 8888:8888 gpipis/mysharednotebook:first</span></pre><p id="7ef9" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">您还必须将端口更改为您的URL:</p><pre class="kj kk kl km gt ok nv ol om aw on bi"><span id="6557" class="oo mv it nv b gy op oq l or os"><a class="ae ky" href="http://127.0.0.1:8889/?token=7e767d9a8dbb92e9d93ce7a5f52ba3c524a3cfcc65401714" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8889/?token=7e767d9a8dbb92e9d93ce7a5f52ba3c524a3cfcc65401714</a></span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="37ce" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">外卖</h1><p id="ec0e" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">当你想与许多人分享你的工作，你希望他们能够复制你的分析，那么最好的方法是与码头工人合作。</p></div></div>    
</body>
</html>