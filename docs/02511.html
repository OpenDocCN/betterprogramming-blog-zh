<html>
<head>
<title>How to Add Github Webhooks to a Jenkins Pipeline</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将Github Webhooks添加到Jenkins管道中</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-too-add-github-webhook-to-a-jenkins-pipeline-62b0be84e006?source=collection_archive---------2-----------------------#2019-12-05">https://betterprogramming.pub/how-too-add-github-webhook-to-a-jenkins-pipeline-62b0be84e006?source=collection_archive---------2-----------------------#2019-12-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="64e3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">基于GitHub事件触发Jenkins作业的执行</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3f352a5e9df31d67ace2ce9001e54f0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gZChYgDHBWDAoxGI"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jjying?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"/>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="e71d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当某些事件被触发时，Github提供了一种调用webhooks的URL的简便方法。这些事件的列表很长，包括:推送到存储库时，打开、关闭和重新打开拉请求时，创建发布时，等等。你可以在这里  <em class="lv">查看完整列表<a class="ae ky" href="https://developer.github.com/webhooks/#events" rel="noopener ugc nofollow" target="_blank"> <em class="lv">。</em></a></em></p><p id="aac2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简单来说，一旦事件被触发，Github将使用包含有关被触发事件的数据的有效负载对象向您定义的webhook URL执行POST请求。这将允许我们基于Github事件自动执行一些动作。例如，如果在每次推送至主分支后，我们想要打包或部署我们的软件，我们可以简单地向负责打包或部署服务的Jenkins任务添加一个webhook。</p><p id="ac10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将展示如何定义一个Jenkins webhook，以及如何定义与Github webhook相关的Jenkins任务。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="55b7" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak">在Github中添加Jenkins web hook</strong></h1><ol class=""><li id="708f" class="mv mw it lb b lc mx lf my li mz lm na lq nb lu nc nd ne nf bi translated">打开Github存储库。</li><li id="a53b" class="mv mw it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated">进入“设置”,然后进入“挂钩”。</li><li id="9be5" class="mv mw it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated">点击“添加网页挂钩”按钮。</li><li id="0c83" class="mv mw it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated">如下图所示，填写表单。对于有效负载URL，请在URL末尾提供您的Jenkins URL和GitHub webhook路径— <code class="fe nl nm nn no b"><a class="ae ky" href="https://${jenkins_url}/github-webhook/." rel="noopener ugc nofollow" target="_blank">https://${jenkins_url}/github-webhook/</a></code> <a class="ae ky" href="https://${jenkins_url}/github-webhook/." rel="noopener ugc nofollow" target="_blank">。</a>如果您的Jenkins服务器没有有效的SSL证书，您可以禁用SSL验证。最后，选择“只为推送事件调用webhook”选项(这个其实要看你在努力做什么。您可以通过选择其他选项来进行更改)。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/56dd29b392fab1da350f375df873fbd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qtRhtwqIN9cJl3qxs-HRzw.png"/></div></div></figure><p id="b361" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">5.最后，当所有的更改完成后，点击“添加webhook”</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="d85d" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak">构建一个Jenkins管道来处理Webhook调用</strong></h1><ol class=""><li id="6b51" class="mv mw it lb b lc mx lf my li mz lm na lq nb lu nc nd ne nf bi translated">确保你已经安装了Github插件<a class="ae ky" href="https://plugins.jenkins.io/github" rel="noopener ugc nofollow" target="_blank">并在Jenkins上配置了它。要配置插件你需要进入Jenkins <code class="fe nl nm nn no b">Configure system</code>页面，向下滚动到GitHub部分添加一个新的GitHub实例，如图所示:</a></li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/cc2cb183d5414604114aa56a64d59e30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TRuWAvTc5kkESjz2Acesjw.png"/></div></div></figure><p id="e41f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.下一步是开始编写管道。第一行将其配置为每当Jenkins收到来自GitHub的推送通知时运行:</p><pre class="kj kk kl km gt nr no ns nt aw nu bi"><span id="07ed" class="nv me it no b gy nw nx l ny nz">properties([pipelineTriggers([githubPush()])])</span></pre><p id="4a5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.下一步是为Github存储库配置要执行的管道。这可以通过在管道的开头添加一个检验阶段来实现。需要注意的一点是，<code class="fe nl nm nn no b">url</code>和<code class="fe nl nm nn no b">branches</code>属性必须是静态值，不能包含任何类型的变量。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="e51b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.最后一步是将Jenkins管道添加到Jenkins服务器，并执行它来加载配置。每次我们向主分支提交新的提交时，都会执行Jenkins任务。</p><p id="1d43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，这里是詹金斯管道的完整示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure></div></div>    
</body>
</html>