<html>
<head>
<title>Simplifying Your Multi-Account Git Setup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简化您的多帐户Git设置</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/simplifying-your-multi-account-git-setup-e8ac50798990?source=collection_archive---------17-----------------------#2020-09-09">https://betterprogramming.pub/simplifying-your-multi-account-git-setup-e8ac50798990?source=collection_archive---------17-----------------------#2020-09-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a93f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在同一台机器上使用带有多个SSH密钥的git和GitHub</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7160923e88956941d5225bb1cbb68fd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-_KJfC5YzSaMWeVj"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">迭戈·乔克在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="2407" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您克隆git存储库以使用正确帐户的私钥和用户名时，您有改变主机名的习惯吗？通过将您的本地项目放在每个帐户的根文件夹中，并相应地更新您的git配置，您可以使您的生活更轻松，节省时间，并解放您的思想以进行更有影响力的工作。请继续阅读，了解如何操作。</p><p id="b482" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设你在GitHub(或GitLab，或Bitbucket，或任何其他托管的存储库)上有两个帐户:</p><ol class=""><li id="abb3" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><strong class="ky ir">账户A </strong> —您的工作账户，以及</li><li id="cae8" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">账户B </strong> —您的个人账户</li></ol><p id="e89c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这两个帐户都有自己独特的用户名，并使用自己独特的私钥。当在本地使用这些存储库中的代码时，您需要一种方法来指定每个存储库使用什么用户名和什么私钥。您有两种选择让两个帐户在同一台机器上工作。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="8c4e" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">又快又脏的方法</h1><p id="1a29" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">为了让您的本地git知道使用什么名称和私有密钥，您可以在<code class="fe nk nl nm nn b">~/.ssh/config</code>中创建两个ssh配置，它们将包含如下内容:</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="e10e" class="ns mo iq nn b gy nt nu l nv nw">Host github-<strong class="nn ir">work</strong><br/>    Hostname github.com<br/>    IdentityFile ~/.ssh/id_rsa_<strong class="nn ir">account_a</strong><br/>Host github-<strong class="nn ir">personal</strong><br/>    Hostname github.com<br/>    IdentityFile ~/.ssh/id_rsa_<strong class="nn ir">account_b</strong></span></pre><p id="afdd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每次你克隆一个作品或者一个个人存储库，你都需要手动将远程主机从<code class="fe nk nl nm nn b">github.com</code>更改为<code class="fe nk nl nm nn b">github-work</code>或者<code class="fe nk nl nm nn b">github-personal</code>。此外，在克隆之后，您需要设置一个相关的git用户名和git电子邮件到与相关帐户相关联的那个。</p><p id="4412" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它会工作得很好，但有时你可能会忘记更改主机名，导致本地git使用默认帐户，或者你在工作项目中不小心将<code class="fe nk nl nm nn b">user.email</code>设置为你的个人电子邮件。</p><p id="e5c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总而言之，除了在每个克隆上浪费时间之外，您有时还会犯错误，并且只有在推送到远程给团队的其他成员造成不便之后才意识到这一点。很高兴有更好的方法。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="bf74" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">更好的方法</h1><p id="d5b5" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">通过围绕如何在本地存储项目建立一个结构，您可以加速您的开发过程，并且永远忘记改变克隆URL。</p><h2 id="50e5" class="ns mo iq bd mp nx ny dn mt nz oa dp mx lf ob oc mz lj od oe nb ln of og nd oh bi translated">步骤1:将项目分成两个子目录</h2><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="cc8d" class="ns mo iq nn b gy nt nu l nv nw">~/<br/>	workspaces/<br/>		<strong class="nn ir">account_a</strong>/<br/>			project_panda/<br/>			project_tiger/<br/>			project_swan/<br/>		<strong class="nn ir">account_b</strong>/<br/>			project_mice/<br/>			project_cricket/<br/>			project_elephant/</span></pre><h2 id="8087" class="ns mo iq bd mp nx ny dn mt nz oa dp mx lf ob oc mz lj od oe nb ln of og nd oh bi translated">步骤2:修改git配置</h2><p id="ca12" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">对于您的<strong class="ky ir">帐户A，</strong>添加以下配置。</p><p id="4b0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更新<code class="fe nk nl nm nn b">~/.gitconfig</code>以有条件地包含<code class="fe nk nl nm nn b">~/workspaces/account_a</code>目录下项目的自定义帐户配置:</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="4db4" class="ns mo iq nn b gy nt nu l nv nw">[includeIf "gitdir:~/workspaces/<strong class="nn ir">account_a</strong>/“]<br/>path = ~/.gitconfig_<strong class="nn ir">account_a</strong></span></pre><p id="652f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在创建<code class="fe nk nl nm nn b">~/.gitconfig_account_a</code>文件来设置您的<strong class="ky ir">帐户和</strong>用户名和电子邮件，并使用私钥指向ssh配置:</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="57d1" class="ns mo iq nn b gy nt nu l nv nw">[core]<br/>    sshCommand="ssh -F ~/.ssh/<strong class="nn ir">config_account_a</strong>"<br/>[user]<br/>    name = Account A Name<br/>    email = <strong class="nn ir">account.a</strong>.email@example.com</span></pre><p id="179c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，创建<code class="fe nk nl nm nn b">~/.ssh/config_account_a</code>文件来指定github用户名和私钥:</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="f99c" class="ns mo iq nn b gy nt nu l nv nw">Host github.com<br/>    Hostname github.com<br/>    IdentityFile ~/.ssh/id_rsa_<strong class="nn ir">account_a</strong><br/>    IdentitiesOnly yes<br/>    User <strong class="nn ir">account_a</strong>_user_name</span></pre><p id="1d0e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">类似的配置也适用于<strong class="ky ir">账户B </strong>:</p><p id="466b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe nk nl nm nn b">~/.gitconfig</code>:</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="2da6" class="ns mo iq nn b gy nt nu l nv nw">[includeIf "gitdir:~/workspaces/<strong class="nn ir">account_b</strong>/“]<br/>path = ~/.gitconfig_<strong class="nn ir">account_b</strong></span></pre><p id="c866" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe nk nl nm nn b">~/.gitconfig_account_b</code>中:</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="705e" class="ns mo iq nn b gy nt nu l nv nw">[core]<br/>    sshCommand="ssh -F ~/.ssh/<strong class="nn ir">config_account_b</strong>"<br/>[user]<br/>    name = Account B Name<br/>    email = <strong class="nn ir">account.b</strong>.email@example.com</span></pre><p id="e5a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，创造<code class="fe nk nl nm nn b">~/.ssh/config_account_b</code>:</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="a02a" class="ns mo iq nn b gy nt nu l nv nw">Host github.com<br/>    Hostname github.com<br/>    IdentityFile ~/.ssh/id_rsa_<strong class="nn ir">account_b</strong><br/>    IdentitiesOnly yes<br/>    User <strong class="nn ir">account_b</strong>_user_name</span></pre><h2 id="2782" class="ns mo iq bd mp nx ny dn mt nz oa dp mx lf ob oc mz lj od oe nb ln of og nd oh bi translated">步骤3:更新远程</h2><p id="a82a" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">如果您之前使用了带有修改主机名的遥控器(例如，<code class="fe nk nl nm nn b">github-work</code>和<code class="fe nk nl nm nn b">github-personal</code>)，现在您可以将其恢复为原始主机名<code class="fe nk nl nm nn b">github.com</code>:</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="6b50" class="ns mo iq nn b gy nt nu l nv nw">git@<strong class="nn ir">github-work</strong>:awesome_you/project_panda.git -&gt; git@<strong class="nn ir">github.com</strong>:awesome_you/project_panda.git</span></pre><p id="7461" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦遥控器更新，尝试一下，看看它是否工作。</p><h2 id="08c6" class="ns mo iq bd mp nx ny dn mt nz oa dp mx lf ob oc mz lj od oe nb ln of og nd oh bi translated">第四步:尝试一下</h2><p id="9ef3" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">现在，每当您想要为您的一个帐户克隆一个存储库时，请转到相应的目录并照常使用git命令。以下是<strong class="ky ir">账户A </strong>中的项目示例:</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="f804" class="ns mo iq nn b gy nt nu l nv nw"># cd ~/workspaces/<strong class="nn ir">account_a</strong><br/># git clone git@github.com:awesome_you/project_panda.git<br/># cd project_panda<br/># git config --get user.email<br/><strong class="nn ir">account.a</strong>.email@example.com</span></pre><p id="f6d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是<strong class="ky ir">账户B </strong>中的项目示例:</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="3af6" class="ns mo iq nn b gy nt nu l nv nw"># cd ~/workspaces/<strong class="nn ir">account_b</strong><br/># git clone git@github.com:awesome_you/project_mice.git<br/># cd project_mice<br/># git config --get user.email<br/><strong class="nn ir">account.b</strong>.email@example.com</span></pre><p id="fc28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如您所看到的，项目已经使用相应帐户的相关凭证进行了克隆，而不需要修改克隆URL。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="33a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为同一个SCM托管提供者管理多个git帐户是很棘手的，需要对git配置进行一些调整。尽管毫无疑问，您可以对不同的帐户使用修改过的主机名，但是这种方法很容易出错，并且会意外地将个人帐户提交到您的工作报告中。为了提升您的开发过程，将您的项目分割在本地单独的根目录中，并且彻底忘记将作者固定在提交的变更上所引起的头痛。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="0fa3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我要感谢Arnelle的下面这篇文章，这篇文章启发了我写这篇文章:</p><div class="oi oj gp gr ok ol"><a href="https://medium.com/uncaught-exception/setting-up-multiple-gitlab-accounts-82b70e88c437" rel="noopener follow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd ir gy z fp oq fr fs or fu fw ip bi translated">设置多个GitLab帐户</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">更新，2019–03–07:我发布了这篇文章的更新版本，你可以在下面查看它…</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">medium.com</p></div></div></div></a></div></div></div>    
</body>
</html>