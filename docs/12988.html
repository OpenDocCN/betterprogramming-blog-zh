<html>
<head>
<title>I’ve Submitted 1000 Pull Requests at Google. Here is What I’ve Learned</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我已经在谷歌提交了1000个拉请求。以下是我所学到的</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/ive-submitted-1000-pull-requests-at-google-here-is-what-i-ve-learned-f9aa8a7b11ec?source=collection_archive---------1-----------------------#2022-07-18">https://betterprogramming.pub/ive-submitted-1000-pull-requests-at-google-here-is-what-i-ve-learned-f9aa8a7b11ec?source=collection_archive---------1-----------------------#2022-07-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f206" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">代码评审是一种学习经历。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/aaac6b2967054342e58b8a4a9b2fb462.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UDUgY0AAHlIIh9D4pb870w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片</p></figure><p id="a8be" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在谷歌工作了3年后，我的代码贡献统计终于达到了四位数。自从我在2019年合并的第一次改变以来，这是一段相当长的旅程。在这段时间里，我写代码的方式发生了很大的变化，代码评审是这种变化的主要驱动力。既然我已经达到了这个里程碑，我想反思一下我对代码评审的观点以及我如何对待它们。</p><h1 id="6207" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">评论越多越好</h1><p id="d339" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">每个人对代码评审的理解都不一样。一些人认为他们是不可避免的祸害，另一些人则认为他们是拦路虎。当我还是个天真的毕业生时，我曾经鄙视他们。我觉得我受到了严厉的评判，完全是因为我缺乏经验。对我来说，提交任何代码似乎都要花费很长时间。我对自己的改变收到的源源不断的评论感到沮丧。我当时并没有意识到这一点，但这对我作为软件工程师的发展至关重要。</p><p id="7904" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">事实是，没有建设性的反馈，你就不会成长。如果没人告诉你，你怎么知道你犯了一个错误？回顾多年前我得到的评论，我受到如此多的批评并不奇怪。我做的一些决定是非常愚蠢的。当然，期望一个新毕业生在他们的第一天就开始编写生产质量的代码是愚蠢的。但重要的是，随着时间的推移，我从错误中吸取了教训。最终，我收到的评论数量减少了，我的代码质量也大大提高了。</p><p id="8511" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">关键的一点是，代码评审应该被视为一种建设性的反馈。是的，有时很难接受，但这些评论很少来自恶意的地方。评审者的目标是确保新代码符合团队的生产标准。不要只是盲目地解决评论，花一些时间思考为什么要对代码进行这些更改，这样下次就不会犯同样的错误。</p><p id="3ad5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">的确，长时间的代码审查会降低你提交代码的速度。这可能看起来违反直觉，但是从长远来看，在任期内尽早学习如何编写高质量的干净代码将会节省你更多的时间。如果你没有得到足够全面的反馈，考虑增加额外的评审员或者缩小你的PRs。PR越小，越容易彻底复习。</p><h1 id="2c89" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">了解你的评论者</h1><p id="9f85" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">没有两个人会给出相同的代码评审。每个人在评估时都有不同的标准和品质。学习人们的评审习惯是加速代码评审和减少代码合并的周转时间的最快方法之一。这看起来似乎不可能，但是大多数人只会让他们的直接队友审查他们90%的代码。</p><p id="ef45" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，我的技术主管已经审核了我提交的近40%的PRs。和他最亲近的人是另一个评审16%的团队成员。我剩下的44%的变更被分配给114个不同的人。这意味着，遵循这两位同事的标准，将加快我一半以上工作的周转时间。我目前的团队总共只有5名工程师，所以了解他们所有的偏好会让这个数字更高。我的技术主管很少在我的PRs上留下任何评论，因为我确切地知道他在寻找什么。当我写代码时，我积极地确保根据他的喜好来设计样式和格式，并预见他可能留下的任何评论，这样我就可以先发制人地避免它们。通过采用这种方法，我已经将从我请求评审到合并变更的中间周转时间减少到了仅仅2个小时。这是我保持高生产率的关键部分。</p><h1 id="8c7f" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">提前解决争议</h1><p id="b688" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">遗憾的是，并不是每个拉取请求都是一帆风顺的。有时候，你需要做出一个并非所有人都同意的技术性决定。在这些情况下，在一长串评论中来回切换是很常见的。因为技术上的争议，我已经让PRs陷入审查一个多星期了。幸运的是，有一些变通方法可以避免这种情况。</p><p id="beee" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">避免争议的最好方法是在编写任何代码之前解决它。在谷歌，最常见的方式通常是以设计文档的形式。这些文件基本上宣布了你已经评估了你的选择，并基于一些研究做出了技术决定。如果有任何分歧，可以在文件中迅速解决。在这个阶段解决争议比通过代码解决争议要快得多。文档不需要非常详细；在某些情况下，甚至一个寻呼机就足够了。我喜欢在我的拉取请求的描述框中包含一个指向文档的链接。</p><p id="43c5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有时候，你可能没有写文档，或者争议是意料之外的。在这种情况下，我喜欢安排一个15分钟的快速会议，通过对话解决争议。这种方法比等待审阅者再次检查他们的审阅队列并留下另一组注释要快得多。</p><h1 id="b685" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">尽可能多地收集评论</h1><p id="e36c" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">即使你获得了更多的资历，继续寻求对你的代码的反馈也是有价值的。继续收集反馈的最好方法是继续让新人评审你的代码。在其他代码库中工作或者在项目中与不同的团队协作是扩展您的审阅者集和了解不同观点的好方法。把这当作一次学习经历，以获得一些新的最佳实践，从而进一步提高您的代码质量。</p><p id="1e8c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从长远来看，只有一两个人审查你的大部分代码是危险的。这种做法通常会在一段时间后导致自满和低质量的评审。如果那个人离开了团队，那么你又回到了起点。你还会错过其他人有价值的反馈。有更多的审阅者可以让其他团队成员更多地了解您的工作。有更多的同事谈论你的代码质量和你所交付的影响总是有益的。</p><h1 id="3074" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">使用24小时规则</h1><p id="d50d" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">我们都遇到过这种尴尬的情况，好像评审员忘记评审你的代码了。你不想和他们聊天或发电子邮件，因为这感觉很粗鲁和强迫，所以你一直等啊等…</p><p id="4e86" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在谷歌，标准的做法是给某人24小时来审查你的代码。24小时后，发送一个温和的提醒是公平的游戏。我真的很喜欢这种做法。当我很忙或者被拉到许多不同的方向时，我甚至忘记了代码评审。</p><p id="037f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果公关因为某些原因阻止了某人或紧急情况，在24小时窗口过去之前发送友好的ping通常是可以接受的。否则，你可能会惹恼评论者。仅仅为了更快地审查某个东西而引起轰动是不值得的。</p><h1 id="6717" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated"><strong class="ak">超过数量的影响</strong></h1><p id="c7c1" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">这是我最难以下咽的药丸。当我刚开始在谷歌工作时，我痴迷于最大化我的代码输出。我主要是根据每月写的行数，平均每周提交的pr数来判断自己的表现。在我看来，这就是我如何证明我为团队做出了足够的贡献。我会想尽办法增加我正在编写的代码量，或者拆分代码以增加我要合并的pr的总数。</p><p id="c93e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最终，我认识到统计数据并不重要。虽然代码统计可以作为对整体生产率的粗略估计，但它远不是一个全面的性能指标。相反，要把重点放在最大化代码的整体影响上，而不仅仅是数量上。在一天结束的时候，你交付的项目将决定你的表现如何被评价，而不是你写了多少行代码。</p><p id="d11e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在谷歌，影响、难度和领导力决定了一个项目对你整体表现的意义。代码统计并不真的与这些指标直接一致。实现项目所需的代码量并不总是与难度相关。仅仅为了创造一种人为的挑战感而编写比解决问题所必需的更多的代码是没有意义的。当然，每个公司评估业绩的方式不同，所以里程数可能会有所不同。但是你所实现的可能比完成它需要多少代码更重要。</p><h1 id="32a8" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">结论</h1><p id="0a88" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">不管你喜欢还是讨厌它们，代码评审都是任何软件工程工作的关键部分。随着时间的推移，在学会如何优化它们并尽快合并我的代码后，我开始欣赏它们。当开始一个新团队时，这些评论可能会令人沮丧，但一旦你调整心态并了解诀窍，它们会变得比任何事情都更有益。请继续关注，我将分享一篇类似的文章，讲述当我审查了1000个PRs后，我是如何作为一个审查者进行代码审查的！</p><p id="3b33" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读。我已经写了一些我在谷歌学到的一般经验。要了解这方面的内容，可以看看我的处女作:<a class="ae mr" rel="noopener ugc nofollow" target="_blank" href="/a-lesson-in-confidence-what-ive-learned-from-working-at-google-as-a-software-engineer-b19ecc091df7">自信的一课:我作为软件工程师在谷歌工作时学到的东西</a>。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="5ae0" class="mx lv it mt b gy my mz l na nb"><strong class="mt iu">Want to Connect?</strong></span><span id="9c4c" class="mx lv it mt b gy nc mz l na nb">If you aren’t already, follow me on <a class="ae mr" href="https://twitter.com/allegretti813" rel="noopener ugc nofollow" target="_blank">Twitter</a>.</span></pre></div></div>    
</body>
</html>