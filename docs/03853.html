<html>
<head>
<title>What is the Merge Operator in Python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的归并运算符是什么？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/what-is-the-merge-operator-in-python-b62cdd562ab2?source=collection_archive---------10-----------------------#2020-03-09">https://betterprogramming.pub/what-is-the-merge-operator-in-python-b62cdd562ab2?source=collection_archive---------10-----------------------#2020-03-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c1c4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">合并字典的更好方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9db2e83186f84d553d3d70dd449c56c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WHpuHPVdHJq1fpM9jt1VBQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@zane4004?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">赞·李</a>在<a class="ae ky" href="https://unsplash.com/s/photos/patterns?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="1c9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">字典是一种类似于JSON对象的数据类型。通常被称为“字典”，它们是一组术语(唯一标识符)，每个术语都有一个定义(值)。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="72fa" class="ma mb it lw b gy mc md l me mf">myDict = {<br/>  "first_name": "Jonathan",<br/>  "last_name": "Hsu"<br/>}</span></pre><p id="483d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于字典术语必须是唯一的，如果多个字典在合并时有相同的术语，就会产生冲突。</p><p id="ca1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这些情况下，规则通常是——最后一个获胜。换句话说，最后一个要合并的词典具有优先权，如果一个术语的值之前已经被定义过，那么它将会被覆盖。</p><p id="e382" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从Python版开始，merge操作符和它的伙伴——增强赋值操作符，将成为组合字典的实际方法。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="5248" class="mn mb it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">合并字典的老方法</h1><p id="f7a7" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">合并字典的老方法是通过<code class="fe nj nk nl lw b">.update()</code>方法，或者最近使用的解包“splat”操作符，这两种方法都是本机可用的。</p><p id="bfb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从主字典调用<code class="fe nj nk nl lw b">.update()</code>方法，并接受另一个字典作为参数。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f1c7" class="ma mb it lw b gy mc md l me mf">myDict = { "first_name": "Jonathan", "last_name": "Hsu" }<br/>myDict.update({"first_name": "Jet", "age": 15})</span><span id="fc29" class="ma mb it lw b gy nm md l me mf">print(myDict)<br/># {'first_name': 'Jet', 'last_name': 'Hsu', 'age': 15}</span></pre><p id="99ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">原来的字典被修改了…如果你想保持原来的形式，这可能不是你想要的结果。要使用update保存原始文件，您必须复制原始文件，然后使用<code class="fe nj nk nl lw b">.update()</code>方法继续。我喜欢的步骤太多了。</p><p id="c394" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一种方法是使用双星号运算符，它用于解包字典:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="22b7" class="ma mb it lw b gy mc md l me mf">d1 = { "first_name": "Jonathan", "last_name": "Hsu" }<br/>d2 = { "first_name": "Jet", "age": 15 }<br/>d3 = { **d1, **d2 }</span><span id="b439" class="ma mb it lw b gy nm md l me mf">print(d3)<br/># {'first_name': 'Jet', 'last_name': 'Hsu', 'age': 15}</span></pre><p id="9511" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然有效地表达了所有字典都是平等的，并且最后一个应该获胜，但是代码不容易阅读。事实上，根据<a class="ae ky" href="https://www.python.org/dev/peps/pep-0584/" rel="noopener ugc nofollow" target="_blank"> PEP 584 </a>，“如果你问一个典型的Python用户如何将两个字典合并成一个新的，我怀疑很多人会想到<code class="fe nj nk nl lw b">{**d1, **d2}</code>”</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="2774" class="mn mb it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">使用合并运算符</h1><p id="a97b" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">为了解决这两个问题，引入了合并操作符。使用单个竖线，merge操作符可以被认为是字典的加法操作符。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="fe9c" class="ma mb it lw b gy mc md l me mf">d1 = { "first_name": "Jonathan", "last_name": "Hsu" }<br/>d2 = { "first_name": "Jet", "age": 15 }<br/>d3 = d1 | d2</span><span id="b91b" class="ma mb it lw b gy nm md l me mf">print(d3)<br/># {'first_name': 'Jet', 'last_name': 'Hsu', 'age': 15}</span></pre><p id="b082" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，merge操作符的功能与splat技术相同，并且不修改原始字典。</p><p id="cb20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是如果我们要修改原来的字典呢？在这种情况下，您可以使用增强赋值操作符，类似于任何其他复合赋值操作符。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="82fb" class="ma mb it lw b gy mc md l me mf">myDict = { "first_name": "Jonathan", "last_name": "Hsu" }<br/>myDict |= {"first_name": "Jet", "age": 15}</span><span id="5892" class="ma mb it lw b gy nm md l me mf">print(myDict)<br/># {'first_name': 'Jet', 'last_name': 'Hsu', 'age': 15}</span></pre><p id="79b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，扩充赋值操作符在功能上等同于<code class="fe nj nk nl lw b">.update()</code>方法，但在语法上类似于合并操作符。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><p id="df30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请记住，这些操作符仅在Python 3.9及更高版本中可用，因此请确保您在代码中添加了适当的版本验证。</p><p id="e278" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nn">感谢您的阅读，请在下面留下您的评论和想法！</em></p></div></div>    
</body>
</html>