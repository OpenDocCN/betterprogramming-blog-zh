<html>
<head>
<title>How To Upload Images With Cloudinary and MERN, Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Cloudinary和MERN上传图片，第1部分</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/image-upload-with-cloudinary-mern-f18812d5d023?source=collection_archive---------6-----------------------#2019-10-09">https://betterprogramming.pub/image-upload-with-cloudinary-mern-f18812d5d023?source=collection_archive---------6-----------------------#2019-10-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2a82" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过图片上传扩展您的应用程序</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9d73c23032e146e8cc0139945d5a6392.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A8w28-GtGIvvnC4OOC0p6Q.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@shttefan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> SHTTEFAN </a>在<a class="ae kv" href="https://unsplash.com/s/photos/clouds?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="337f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你有没有尝试过使用MERN堆栈来建立一个博客网站——或者只是一个CRUD网站？您是否希望将图像上传到您的应用程序，然后将上传到数据库的图像显示回客户端？</p><p id="43c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">咻，真多。但是今天我将向您展示如何使用Cloudinary和<a class="ae kv" href="https://github.com/expressjs/multer" rel="noopener ugc nofollow" target="_blank"> Multer </a>来实现这一点。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="3b1e" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">云状</strong></h1><p id="6456" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">你会问，什么是云？</p><p id="1bbf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Cloudinary是一种云服务，让您可以轻松地将图像上传到他们的云中，然后会返回一个URL，我们会将它保存到我们的数据库中，并显示给客户端。</p><p id="ad27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦我们付诸行动，就会更有意义。前往<a class="ae kv" href="http://www.cloudinary.com" rel="noopener ugc nofollow" target="_blank">www.cloudinary.com，</a>创建一个账户。完成后，请务必记下这些凭据:</p><p id="3fa8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mw mx my mz b">Cloud Name, API Key, API Secret</code></p><p id="60f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些将显示在您的仪表板上。我们稍后在设置后端时将需要这些。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="069d" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">创建React应用</strong></h1><p id="d0da" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">好了，让我们从创建前端开始。</p><p id="9a4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，我们将使用create-react-app来引导React starter项目。通过使用create-react-app，我们将不必担心设置webpack或Babel(因为create-react-app在默认情况下会对这些进行分类)。</p><p id="8669" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您的机器上还没有全局安装create-react-app，您需要输入…</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="824a" class="ne ma iq mz b gy nf ng l nh ni">npm install -g create-react-app</span></pre><p id="877f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">…进入您的终端。然后在您的终端中，输入以下命令:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="9688" class="ne ma iq mz b gy nf ng l nh ni">npm install create-react-app cloudinary-app</span></pre><p id="f2b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mw mx my mz b">cloudinary-app</code>将成为您项目的名称——您可以随意命名。</p><p id="00a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成后，我们需要进入项目文件夹。为此，在终端中输入<code class="fe mw mx my mz b">cd cloudinary-app</code> <strong class="ky ir"> </strong>。</p><p id="8e8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在项目文件夹中，在终端中输入以下命令:<code class="fe mw mx my mz b">npm start</code>。这将启动我们的开发服务器，并在您的浏览器中打开您在localhost:3000上的项目。</p><p id="27f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为我们已经在前端工作了，所以让我们安装我们需要的库。我们需要Axios在前端向我们的后端发出<code class="fe mw mx my mz b">GET/POST</code>请求。我们还将使用Redux(尽管这是一个小应用程序，我们可以在React中使用本地状态)。</p><p id="afbe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我知道大多数人希望将它包含在一个更大的项目中，所以我将使用Redux进行状态管理。为此，请在您的终端中输入以下命令。</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="ace5" class="ne ma iq mz b gy nf ng l nh ni">npm install axios react-redux redux redux-thunk --save</span></pre><p id="a71f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们也创建几个文件。这些不是必须的，但是为了跟随教程，它们是为了保持简单。</p><p id="fa21" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mw mx my mz b">src</code>文件夹中，创建一个<code class="fe mw mx my mz b">history.js</code>文件，并复制以下代码:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="8b42" class="ne ma iq mz b gy nf ng l nh ni">import { createBrowserHistory } from “history”;</span><span id="e3a9" class="ne ma iq mz b gy nj ng l nh ni">export default createBrowserHistory();</span></pre><p id="d4ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">历史文件将在每条路线中创建一个历史对象作为道具。这让我们可以完全控制浏览器历史。在我们的例子中，这有助于在一个动作之后重定向用户。</p><p id="aa24" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们要创建的下一个文件是一个代理文件。这将使我们对服务器的HTTP请求更加容易。让我们首先在<code class="fe mw mx my mz b">src</code>文件夹中创建一个组件文件夹。在components文件夹中，创建一个<code class="fe mw mx my mz b">AxiosAPI.js</code>文件，并粘贴以下代码:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="e441" class="ne ma iq mz b gy nf ng l nh ni">import axios from “axios”;</span><span id="10b1" class="ne ma iq mz b gy nj ng l nh ni">       export default axios.create({</span><span id="d4f6" class="ne ma iq mz b gy nj ng l nh ni">       baseURL: “http://localhost:5000"</span><span id="5362" class="ne ma iq mz b gy nj ng l nh ni">          });</span></pre><p id="6a6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你曾经不得不发出HTTP请求，你知道打出长URL是一件痛苦的事，所以这使它变得容易得多。我们稍后将回到组件文件夹。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="1560" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak"> Index.js → Redux商店设置</strong></h1><p id="659a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">现在我们来连线一下我们的Redux商店。</p><p id="dc41" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，让我们转到CRA已经生成的<code class="fe mw mx my mz b">Index.js</code>文件。在该文件中，用以下代码替换代码。Redux存储是存储我们所有状态的地方。</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="f548" class="ne ma iq mz b gy nf ng l nh ni">import React from “react”;</span><span id="e245" class="ne ma iq mz b gy nj ng l nh ni">import ReactDOM from “react-dom”;</span><span id="835d" class="ne ma iq mz b gy nj ng l nh ni">import “./index.css”;</span><span id="0b97" class="ne ma iq mz b gy nj ng l nh ni">import App from “./App”;</span><span id="7ae3" class="ne ma iq mz b gy nj ng l nh ni">import { Provider } from “react-redux”;</span><span id="5b81" class="ne ma iq mz b gy nj ng l nh ni">import { createStore, applyMiddleware, compose } from “redux”;</span><span id="2722" class="ne ma iq mz b gy nj ng l nh ni">import reducers from “./reducers”;</span><span id="5ea8" class="ne ma iq mz b gy nj ng l nh ni">import reduxThunk from “redux-thunk”;</span><span id="e260" class="ne ma iq mz b gy nj ng l nh ni">const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;</span><span id="dee7" class="ne ma iq mz b gy nj ng l nh ni">    const store = createStore(reducers,    composeEnhancers(applyMiddleware(reduxThunk)));</span><span id="83d5" class="ne ma iq mz b gy nj ng l nh ni">ReactDOM.render(&lt;Provider store={store}&gt;<br/>&lt;App /&gt;<br/>&lt;/Provider&gt;,</span><span id="732c" class="ne ma iq mz b gy nj ng l nh ni">document.getElementById(“root”));</span></pre><p id="5f6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们需要创建我们的<code class="fe mw mx my mz b">reducers</code>文件夹和<code class="fe mw mx my mz b">actions</code>文件夹。</p><p id="f184" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mw mx my mz b">src</code>文件夹下，创建一个<code class="fe mw mx my mz b">reducers</code>文件夹和一个<code class="fe mw mx my mz b">actions</code>文件夹。让我们首先创造我们的行动。在<code class="fe mw mx my mz b">actions</code>文件夹中，创建一个名为<code class="fe mw mx my mz b">imageActions.js</code>的新文件。在这个文件中，我们将创建我们的动作，这些动作将被发送到我们的reducer，告诉Redux如何更新我们的应用程序的状态。</p><h2 id="1dba" class="ne ma iq bd mb nk nl dn mf nm nn dp mj lf no np ml lj nq nr mn ln ns nt mp nu bi translated"><strong class="ak">行动</strong></h2><p id="cac4" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在我们创建我们的动作创建者之前，让我们创建我们的<code class="fe mw mx my mz b">types.js</code>文件。在<code class="fe mw mx my mz b">actions</code>文件夹中创建一个<code class="fe mw mx my mz b">types.js file</code>。这不是强制性的，但如果在创建动作创建器时出现了拼写错误，这样做总是一个好习惯。</p><p id="2e81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">翻到<code class="fe mw mx my mz b">imageActions.js</code>文件。这是我们创建<code class="fe mw mx my mz b">actions</code>文件的地方。</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="dfb5" class="ne ma iq mz b gy nf ng l nh ni">import { ADD_IMAGE, GET_IMAGES, GET_ERRORS } from “./types”;</span><span id="6ff2" class="ne ma iq mz b gy nj ng l nh ni">import AxiosAPI from “../components/AxiosAPI”;</span><span id="e7e2" class="ne ma iq mz b gy nj ng l nh ni">import history from “../history”;</span><span id="c28f" class="ne ma iq mz b gy nj ng l nh ni">   //ADD IMAGE</span><span id="6306" class="ne ma iq mz b gy nj ng l nh ni">    export const addImage = imageData =&gt; dispatch =&gt; {<br/>    AxiosAPI.post(“/add”, imageData).then(res =&gt; dispatch({<br/>    type: ADD_IMAGE,<br/>    payload: res.data<br/>    })).catch(err =&gt; dispatch({<br/>    type: GET_ERRORS,<br/>    payload: err.response.data<br/>    }));</span><span id="d232" class="ne ma iq mz b gy nj ng l nh ni">   history.push(“/”);<br/>    };</span><span id="46ce" class="ne ma iq mz b gy nj ng l nh ni">    //GET ALL IMAGES</span><span id="2112" class="ne ma iq mz b gy nj ng l nh ni">    export const getAllImages = () =&gt; dispatch =&gt; {<br/>    AxiosAPI.get(“/”).then(res =&gt; dispatch({<br/>    type: GET_IMAGES,<br/>    payload: res.data<br/>    })).catch(err =&gt; dispatch({<br/>    type: GET_IMAGES,<br/>    payload: null<br/>       }));<br/>    };</span></pre><p id="4301" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">传入的<code class="fe mw mx my mz b">imageData</code>是我们稍后将在表单组件中使用的<code class="fe mw mx my mz b">formData</code>，它将是标题和图像。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="3dbb" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">减速器</strong></h1><p id="0942" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">现在让我们设置我们的减速器。</p><p id="7d0c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为这是一个小应用程序，所以我们只有一个缩减器。但是由于你们中的许多人可能正在创建更大的应用程序，所以你们很可能有不止一个reducer，并且必须在你们的<code class="fe mw mx my mz b">rootReducer</code>文件中使用<code class="fe mw mx my mz b">combineReducers</code>。</p><p id="daba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">无论如何，在我们的<code class="fe mw mx my mz b">reducers</code>文件夹中，我们可以继续创建一个<code class="fe mw mx my mz b">index.js</code>文件。Reducers只是普通的JavaScript对象。</p><p id="5a1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，在<code class="fe mw mx my mz b">index.js</code>文件中添加以下代码。如果您也使用Redux DevTools来查看Redux存储中的数据，这也会很有帮助。将以下代码复制到<code class="fe mw mx my mz b">imageActions.js</code>文件中。</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="6d8a" class="ne ma iq mz b gy nf ng l nh ni">import { ADD_IMAGE, GET_IMAGES } from “../actions/types”;</span><span id="84cb" class="ne ma iq mz b gy nj ng l nh ni">     const initialState = {<br/>     images: []<br/>      };</span><span id="f347" class="ne ma iq mz b gy nj ng l nh ni">     export default function(state = initialState, action) {<br/>       switch (action.type) {<br/>       case ADD_IMAGE:<br/>       return {…state, images: [action.payload, …state.images]};</span><span id="e798" class="ne ma iq mz b gy nj ng l nh ni">     case GET_IMAGES:<br/>     return { …state, images: action.payload };<br/>     default:<br/>     return state;<br/>    }<br/>}</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="713c" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">组件</strong></h1><p id="c2e2" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">让我们从表单开始，我们需要使用connect将我们的动作创建器连接到表单组件。</p><p id="46ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在components文件夹中创建一个名为<code class="fe mw mx my mz b">Form.js</code>的文件。</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="eb33" class="ne ma iq mz b gy nf ng l nh ni">import React from “react”;</span><span id="732a" class="ne ma iq mz b gy nj ng l nh ni">import { connect } from “react-redux”;</span><span id="70cd" class="ne ma iq mz b gy nj ng l nh ni">import { addImage } from “../actions/imageActions”;</span><span id="33fa" class="ne ma iq mz b gy nj ng l nh ni">   class Form extends React.Component {<br/>     constructor(props) {<br/>      super(props);<br/>      this.state = {<br/>      title: “”,<br/>      image: “”<br/>     };</span><span id="dda1" class="ne ma iq mz b gy nj ng l nh ni">  this.onChangeTitle = this.onChangeTitle.bind(this);<br/>  this.onChangeImage = this.onChangeImage.bind(this);<br/>  this.onSubmit = this.onSubmit.bind(this);<br/>  }</span><span id="894f" class="ne ma iq mz b gy nj ng l nh ni">  onChangeTitle = e =&gt; {<br/>   this.setState({ title: e.target.value });<br/>   };</span><span id="6654" class="ne ma iq mz b gy nj ng l nh ni">  onChangeImage = e =&gt; {<br/>   this.setState({ image: e.target.files[0] });<br/>   };</span><span id="937e" class="ne ma iq mz b gy nj ng l nh ni">  onSubmit(e) {<br/>  e.preventDefault();</span><span id="194c" class="ne ma iq mz b gy nj ng l nh ni">  let formData = new FormData();<br/>  formData.append(“title”, this.state.title);<br/>  formData.append(“image”, this.state.image);<br/>  this.props.addImage(formData);<br/>  <br/>  this.setState({<br/>  title: “”,<br/>  image: “”<br/>  });<br/> }</span><span id="b363" class="ne ma iq mz b gy nj ng l nh ni">  render() {<br/>   return (<br/>   &lt;div className=”form-container”&gt;<br/>   &lt;form encType=”multipart/form-data” onSubmit={this.onSubmit}&gt; <br/>   &lt;h2&gt;Image Form&lt;/h2&gt;<br/>   &lt;label className=”form-label”&gt;Image Title&lt;/label&gt;</span><span id="1940" class="ne ma iq mz b gy nj ng l nh ni">   &lt;input <br/>   className=”form-input”<br/>   placeholder=”Enter Image Title”<br/>   type=”text”<br/>   value={this.state.title}<br/>   onChange={this.onChangeTitle}<br/>   /&gt;<br/>   &lt;label className=”form-label”&gt;Choose an Image&lt;/label&gt;</span><span id="1791" class="ne ma iq mz b gy nj ng l nh ni">  &lt;input type=”file” <br/>  className=”form-input”<br/>  onChange={this.onChangeImage} /&gt;<br/>  &lt;button type=”submit” className=”submit-btn”&gt;Submit!&lt;/button&gt;<br/>  &lt;/form&gt;<br/>  &lt;/div&gt;<br/>  );<br/>    }<br/>  }</span><span id="28d5" class="ne ma iq mz b gy nj ng l nh ni">export default connect(null,{ addImage })(Form);</span></pre><p id="339a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们在connect函数中使用<code class="fe mw mx my mz b">null</code>作为第一个参数的原因是因为我们没有传入任何东西。通常我们会通过<code class="fe mw mx my mz b">mapStateToProps</code>，你会在<code class="fe mw mx my mz b">AllImages.js</code>文件中看到。</p><p id="5d5d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我们的表单现在应该的样子！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/2776c0432124a0c3f24fe80e3caa7b95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BpviV8KLOeXGMZ1nOugQbg.png"/></div></div></figure><p id="5f8a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在名为<code class="fe mw mx my mz b">AllImages.js</code>的组件下创建另一个文件。这个组件负责显示我们从表单发送到服务器的数据。然后，我们获取从服务器返回的数据，并将其显示在该文件中。希望这有意义。以下是<code class="fe mw mx my mz b">AllImages.js</code>的代码:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/9b56c14a77cdad3ea6e2068d13ebd0cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*bNzboeQTUuBsn0YLbCxqBg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">AllImages.js</p></figure><p id="1c42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们所有的图像都存储在一个数组中。我们使用动作创建器<code class="fe mw mx my mz b">getAllImages</code>从数组中提取数据。我们通过映射数组来实现这一点，它将返回单个图像。<code class="fe mw mx my mz b">mapStateToProps</code>正如它所说的那样:将状态映射到我们可以在组件中使用的道具。</p><p id="6489" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是我们应用程序的前端。现在我们必须设置我们的后端，这将在本文的第二部分中完成。</p><p id="f456" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://medium.com/@lawrencegthomas/how-to-upload-images-with-cloudinary-and-mern-part-2-83f8ee31b903" rel="noopener">查看本文第2部分</a>。</p><p id="6f3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里有一个到GitHub库的链接。</p></div></div>    
</body>
</html>