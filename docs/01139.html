<html>
<head>
<title>How to Deploy Your React App to Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将React应用部署到Heroku</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-deploy-your-react-app-to-heroku-aedc28b218ae?source=collection_archive---------0-----------------------#2019-08-17">https://betterprogramming.pub/how-to-deploy-your-react-app-to-heroku-aedc28b218ae?source=collection_archive---------0-----------------------#2019-08-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/e25160f6b8683fc697f6b4fd4055e0dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Qh8X2YPYhDPfKPG_"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@fatosi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">胖子Bytyqi </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="3503" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，您开始使用<a class="ae kf" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">C</a>T7】reate React App开发您的第一个React应用程序，并且您已经到了最终部署您的应用程序的开发阶段。如果您选择的工具是Heroku，您可能会做一些研究，并意识到关于这个主题的文档包含的信息很少。因为我最近在构建自己的React应用程序时遇到了类似的情况，所以我想我应该充实一下我所经历的步骤，以便完成这项工作。</p><p id="9fec" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我将从一开始就提到，我决定采用use-a-simple-Express-server的方式，因此如果您喜欢其他方式，您可能会在<a class="ae kf" href="https://create-react-app.dev/docs/deployment" rel="noopener ugc nofollow" target="_blank"> React部署文档</a>中找到有用的文档。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="b481" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">步骤1:创建您的React应用程序(如果您还没有)</h1><figure class="mk ml mm mn gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mj"><img src="../Images/e294f68131d2012fbe1696201f826a51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n7V4Kv9IKpf_UQfxsMsmEA.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">反应</a>标志</p></figure><p id="51da" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您正在阅读这篇文章，您很可能已经有了一个正常运行的React应用程序。但是如果你没有，你只是想经历整个过程(从创建它到部署它)，我将从创建一个非常基本的React应用程序所需的步骤开始。</p><ol class=""><li id="ab98" class="mo mp it ki b kj kk kn ko kr mq kv mr kz ms ld mt mu mv mw bi translated">确保您已经安装了<a class="ae kf" href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwjj7JrN3IrkAhXRI1AKHZGzDe8QFjAAegQICRAC&amp;url=https%3A%2F%2Fnodejs.org%2F&amp;usg=AOvVaw1tY2p-vJFWJmxWlq4sTxCn" rel="noopener ugc nofollow" target="_blank"> Node.js </a>和<a class="ae kf" href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwihgb7U3IrkAhVGalAKHRHJCLwQFjAAegQIBxAC&amp;url=https%3A%2F%2Fwww.npmjs.com%2F&amp;usg=AOvVaw3X687KpYu1DK9666uZ55b8" rel="noopener ugc nofollow" target="_blank"> npm </a>。</li><li id="6562" class="mo mp it ki b kj mx kn my kr mz kv na kz nb ld mt mu mv mw bi translated">打开您选择的终端，通过用您的应用程序的名称替换<code class="fe nc nd ne nf b">my-app</code>来运行下面的命令。</li></ol><pre class="mk ml mm mn gt ng nf nh ni aw nj bi"><span id="0b67" class="nk lm it nf b gy nl nm l nn no">npx create-react-app my-app</span></pre><p id="7981" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">3.该过程完成后，将目录(cd)切换到为您的应用程序创建的文件夹，并启动开发服务器快速预览您创建的内容。</p><pre class="mk ml mm mn gt ng nf nh ni aw nj bi"><span id="4c7a" class="nk lm it nf b gy nl nm l nn no">cd my-app<br/>npm start</span></pre><p id="ca14" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">4.将您的代码推送到Github。我假设您已经知道如何做到这一点，所以我不会深入这些细节。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="9887" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">步骤2:创建Express服务器</h1><p id="bcbb" class="pw-post-body-paragraph kg kh it ki b kj np kl km kn nq kp kq kr nr kt ku kv ns kx ky kz nt lb lc ld im bi translated">在项目的根目录下，创建一个名为“server”的新文件夹(例如)，并在其中添加一个名为“server.js”的文件。</p><p id="27b6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我用来创建服务器的工具叫做<a class="ae kf" href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwjEkYS13orkAhUCZ1AKHbIeDwkQFjAAegQIBhAC&amp;url=https%3A%2F%2Fexpressjs.com%2F&amp;usg=AOvVaw2dzc6U9bu173R4s1d9BYhT" rel="noopener ugc nofollow" target="_blank"> Express </a>，这是一个很棒的用Node创建web服务器的工具。为了学习这个工具，你可以浏览网上的许多教程，但是在我们的例子中，你只需要写几行代码就可以生成你自己的服务器。</p><p id="f1ca" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以让我们开始吧！</p><ol class=""><li id="578e" class="mo mp it ki b kj kk kn ko kr mq kv mr kz ms ld mt mu mv mw bi translated">安装最新版本的Express。</li></ol><pre class="mk ml mm mn gt ng nf nh ni aw nj bi"><span id="84ab" class="nk lm it nf b gy nl nm l nn no">npm install express --save</span></pre><p id="0280" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2.导入Express，并创建一个新的Express实例。</p><pre class="mk ml mm mn gt ng nf nh ni aw nj bi"><span id="6b6f" class="nk lm it nf b gy nl nm l nn no">const express = require('express');<br/>const app = express();</span></pre><p id="20d3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">3.告诉Express <em class="nu"> </em>提供公共文件夹和其中的所有内容。</p><pre class="mk ml mm mn gt ng nf nh ni aw nj bi"><span id="3e6b" class="nk lm it nf b gy nl nm l nn no"><strong class="nf iu">const path = require('path');</strong><br/>const express = require('express');<br/>const app = express();</span><span id="957e" class="nk lm it nf b gy nv nm l nn no"><strong class="nf iu">const publicPath = path.join(__dirname, '..', 'public');</strong></span><span id="8a88" class="nk lm it nf b gy nv nm l nn no"><strong class="nf iu">app.use(express.static(publicPath));</strong></span></pre><p id="d1de" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">基本上，我们传入路径的所有部分，然后<code class="fe nc nd ne nf b">path.join</code>将它们放在一起。然后将结果传递到<code class="fe nc nd ne nf b">app.use(express.static())</code>中，这样Express就会知道应该提供哪些文件。</p><p id="a7d1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">4.通过告诉服务器使用哪个端口来启动服务器。我在本地环境中使用端口3000；但是，Heroku会在部署后为您的应用程序分配一个端口，因此这两种情况都应该包括在内。</p><pre class="mk ml mm mn gt ng nf nh ni aw nj bi"><span id="4a25" class="nk lm it nf b gy nl nm l nn no">const path = require('path');<br/>const express = require('express');<br/>const app = express();<br/><strong class="nf iu">const port = process.env.PORT || 3000;</strong><br/>const publicPath = path.join(__dirname, '..', 'public');</span><span id="f03f" class="nk lm it nf b gy nv nm l nn no">app.use(express.static(publicPath));</span><span id="24bc" class="nk lm it nf b gy nv nm l nn no"><strong class="nf iu">app.listen(port, () =&gt; {<br/>   console.log(`Server is up on port ${port}!`);<br/>});</strong></span></pre><p id="239f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">5.确保您的<code class="fe nc nd ne nf b">index.html</code>文件被提供，以防用户请求当前不在<em class="nu">公共</em>文件夹中的资源。</p><pre class="mk ml mm mn gt ng nf nh ni aw nj bi"><span id="0932" class="nk lm it nf b gy nl nm l nn no">const path = require('path');<br/>const express = require('express');<br/>const app = express();<br/>const publicPath = path.join(__dirname, '..', 'public');<br/>const port = process.env.PORT || 3000;</span><span id="b725" class="nk lm it nf b gy nv nm l nn no">app.use(express.static(publicPath));</span><span id="f02b" class="nk lm it nf b gy nv nm l nn no"><strong class="nf iu">app.get('*', (req, res) =&gt; {<br/>   res.sendFile(path.join(publicPath, 'index.html'));<br/>});</strong></span><span id="b05c" class="nk lm it nf b gy nv nm l nn no">app.listen(port, () =&gt; {<br/>   console.log('Server is up!');<br/>});</span></pre><p id="3f6c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此时，如果一切顺利，您应该能够在本地测试您的服务器，以确保一切设置正确。然后你就可以在Heroku进行实际部署了。</p><p id="d147" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了做到这一点，您只需要通过运行<code class="fe nc nd ne nf b">npm run build</code>来创建您的生产构建。然后转到您的终端并运行<code class="fe nc nd ne nf b">node server/server.js</code>，这将启动您的服务器，使您的应用程序可以在<a class="ae kf" href="http://localhost:3000." rel="noopener ugc nofollow" target="_blank"> http://localhost:3000上使用。</a></p><p id="f125" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这基本上是您的服务器<em class="nu"> </em>文件应该包含的所有内容:</p><figure class="mk ml mm mn gt ju gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/034343c7f3fe6934591fc368da4aa339.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*T5X_Y6rKqMEpFIPtEiTl4g.png"/></div></figure></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="4b95" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">步骤3:在Heroku上部署</h1><figure class="mk ml mm mn gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mj"><img src="../Images/bdbf7edab06115af2f447ecb9bd2bb2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N6ojB_VgECHwVgpoG_c1Yw.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://brand.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>标志</p></figure><ol class=""><li id="29d1" class="mo mp it ki b kj kk kn ko kr mq kv mr kz ms ld mt mu mv mw bi translated">如果您还没有Heroku帐户，请在此创建一个<a class="ae kf" href="https://signup.heroku.com/" rel="noopener ugc nofollow" target="_blank">。</a></li><li id="75f3" class="mo mp it ki b kj mx kn my kr mz kv na kz nb ld mt mu mv mw bi translated">同样，如果你还没有这个，安装<code class="fe nc nd ne nf b">heroku-cli</code>。更多细节请点击。</li><li id="1bab" class="mo mp it ki b kj mx kn my kr mz kv na kz nb ld mt mu mv mw bi translated">转到您的终端，运行<code class="fe nc nd ne nf b">heroku login</code>并在提示时输入您的凭证，登录Heroku。</li><li id="36d9" class="mo mp it ki b kj mx kn my kr mz kv na kz nb ld mt mu mv mw bi translated">通过在终端中运行以下命令来创建Heroku应用程序(当然，用您自己的应用程序名称替换<code class="fe nc nd ne nf b">my-app</code>)。</li></ol><pre class="mk ml mm mn gt ng nf nh ni aw nj bi"><span id="8b13" class="nk lm it nf b gy nl nm l nn no">heroku create my-app</span></pre><p id="75d8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此时，您的应用程序应该有两个Git遥控器:原始的和Heroku创建的。为了检查这一点，只需运行<code class="fe nc nd ne nf b">git remote</code>。</p><p id="2278" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">5.当Heroku启动您的应用程序时，它将尝试运行您的<code class="fe nc nd ne nf b">package.json</code>中的启动脚本。因此，该脚本应改为:</p><pre class="mk ml mm mn gt ng nf nh ni aw nj bi"><span id="87ce" class="nk lm it nf b gy nl nm l nn no">"start": "node server/server.js"</span></pre><p id="4592" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">6.将您的代码推送到Heroku远程存储库。</p><pre class="mk ml mm mn gt ng nf nh ni aw nj bi"><span id="5fd0" class="nk lm it nf b gy nl nm l nn no">git push heroku master</span></pre><p id="789d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就是这样！您的React应用程序现在应该部署到Heroku了！</p><p id="c780" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可以通过运行<code class="fe nc nd ne nf b">heroku open</code>直接从终端打开它。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="1120" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">就这些了，伙计们！</h1><p id="9e52" class="pw-post-body-paragraph kg kh it ki b kj np kl km kn nq kp kq kr nr kt ku kv ns kx ky kz nt lb lc ld im bi translated">请让我知道，如果你尝试这样做并遇到任何麻烦，或者如果我在这里写的任何东西不清楚或不容易理解。我总是乐于接受反馈。</p></div></div>    
</body>
</html>