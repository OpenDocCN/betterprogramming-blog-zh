<html>
<head>
<title>Create Blazing Fast Multi-Threading User Interfaces Outside Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Node.js之外创建超快的多线程用户界面</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-blazing-fast-multithreading-user-interfaces-outside-of-nodejs-c4199b0023ec?source=collection_archive---------5-----------------------#2020-08-05">https://betterprogramming.pub/create-blazing-fast-multithreading-user-interfaces-outside-of-nodejs-c4199b0023ec?source=collection_archive---------5-----------------------#2020-08-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a596" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">大多数前端开发人员都错过了现代浏览器的下一级功能</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2711b17efa18f51517433f91256d2bc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BGwG5AJ4P88K2bNO_upjOQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@lucabravo?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">卢卡·布拉沃</a>在<a class="ae kv" href="https://unsplash.com/s/photos/the-web?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><h1 id="7eaa" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">内容</h1><ol class=""><li id="f3ee" class="lo lp iq lq b lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><a class="ae kv" href="#75de" rel="noopener ugc nofollow">简介</a></li><li id="25b6" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated">网络工作者能帮上什么忙？</li><li id="9800" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><a class="ae kv" href="#af83" rel="noopener ugc nofollow">多屏应用</a></li><li id="0306" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><a class="ae kv" href="#e9d5" rel="noopener ugc nofollow">手机上的多屏应用</a></li><li id="cfed" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><a class="ae kv" href="#87c0" rel="noopener ugc nofollow">如何将我们的应用程序代码包含在Worker中？</a></li><li id="28e4" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><a class="ae kv" href="#746c" rel="noopener ugc nofollow">什么是远程方法？</a></li><li id="b2d6" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><a class="ae kv" href="#5d2d" rel="noopener ugc nofollow">模板有什么问题？</a></li><li id="dd5b" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><a class="ae kv" href="#a31f" rel="noopener ugc nofollow">将DOM平均减少80%以上</a></li><li id="fb06" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><a class="ae kv" href="#fe97" rel="noopener ugc nofollow"> ES8+代码直接在浏览器里面</a></li><li id="bf8b" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><a class="ae kv" href="#c293" rel="noopener ugc nofollow">从盒子里取出你的应用文档</a></li><li id="d2e7" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><a class="ae kv" href="#e449" rel="noopener ugc nofollow">好奇了？neo.mjs是什么？</a></li><li id="c97e" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated"><a class="ae kv" href="#624d" rel="noopener ugc nofollow">如何达到速度？</a></li><li id="afbe" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated">接下来会发生什么？</li></ol><h1 id="75de" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">1.介绍</h1><p id="5cd9" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated">网络在飞速发展，但是你呢？</p><p id="5800" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">当Angular和React推出时，浏览器对ES6+功能的支持很差。结果，整个UI开发都转移到了node.js中。</p><p id="5981" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">浏览器赶上来了，现在可以自己处理JavaScript模块和几个ESnext特性——所以是时候改变了。</p><p id="47ea" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">虽然使用像这样的自定义文件可能很方便。vue，你的浏览器看不懂他们。您需要一个构建过程、transpilation或至少一个热模块替换来将您的代码更改导入浏览器。这需要时间，而且你不能调试你真正的代码。</p><p id="8d5a" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">如今，大多数应用程序仍然使用以下设置:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/26716e3733a6c85be98783386775554b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N0eUYcDilXnP6KVTq8d-Rg.png"/></div></div></figure><p id="c123" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">一些公司正在使用<code class="fe ne nf ng nh b">WebWorker</code>来转移单个昂贵的任务，但这远远不够。主线程负责DOM操作——渲染队列。让它尽可能的空闲和轻量必须是主要目标。</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h1 id="b7ea" class="kw kx iq bd ky kz np lb lc ld nq lf lg jw nr jx li jz ns ka lk kc nt kd lm ln bi translated">2.网络工作者能帮上什么忙？</h1><p id="ba8b" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated">我们想要摆脱这种困境的是以下设置:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/79ced15aa68646f324002d6a7cd1eb9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EvOCaSTS11wKPRmbscFGhw.png"/></div></div></figure><p id="c9b4" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">一个框架和你的应用程序逻辑可以并且应该在一个工人内部运行。</p><p id="10f0" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">通过这种设置，主线程中没有后台任务。没有什么可以减缓甚至冻结你的用户界面转换。</p><p id="8b17" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">用一个简单的开关来使用<code class="fe ne nf ng nh b">SharedWorker</code> s代替普通的workers，我们甚至可以连接多个主线程。</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h1 id="af83" class="kw kx iq bd ky kz np lb lc ld nq lf lg jw nr jx li jz ns ka lk kc nt kd lm ln bi translated">3.多屏应用</h1><p id="aa9d" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated">虽然这是一个利基用途，但它可以创建一个惊人的UX，将单页应用程序扩展到多个浏览器窗口。</p><p id="c8ca" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">观看这段95s演示视频:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><ul class=""><li id="6b8f" class="lo lp iq lq b lr my lt mz lv nx lx ny lz nz mb oa md me mf bi translated">所有浏览器窗口共享后端数据。</li><li id="2cdf" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oa md me mf bi translated">所有窗口都可以直接通信(无需后端连接)。</li><li id="cc31" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oa md me mf bi translated">您可以移动整个组件树，甚至保持相同的JavaScript实例。</li></ul></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h1 id="e9d5" class="kw kx iq bd ky kz np lb lc ld nq lf lg jw nr jx li jz ns ka lk kc nt kd lm ln bi translated">4.移动设备上的多屏应用</h1><p id="1b99" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated">这将是一件大事。许多移动应用程序使用原生外壳，包含多个<code class="fe ne nf ng nh b">WebView</code>。<code class="fe ne nf ng nh b">SharedWorker</code>的设置也可以在这里工作，导致只需加载一次框架和应用程序相关的代码，更重要的是，还可以围绕<code class="fe ne nf ng nh b">WebView</code>移动组件树。</p><p id="9a04" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">Webkit团队(Safari)正在考虑再次提起这个话题。GitHub增加了门票的重量:</p><div class="ob oc gp gr od oe"><a href="https://bugs.webkit.org/show_bug.cgi?id=149850" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">149850 -恢复对共享工作者的支持</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">错误149850:恢复对共享工作人员的支持</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">bugs.webkit.org</p></div></div></div></a></div><p id="b6da" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">你真的应该这样做！</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h1 id="87c0" class="kw kx iq bd ky kz np lb lc ld nq lf lg jw nr jx li jz ns ka lk kc nt kd lm ln bi translated">5.我们如何将我们的应用程序代码包含在Worker中？</h1><p id="a7b4" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated">您的<code class="fe ne nf ng nh b">index.html</code>文件将如下所示(开发模式):</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/67acd9f4b9173b77095026db6fb1a40a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YHWlyYypMW5LZAHOZFThKw.png"/></div></div></figure><p id="e74b" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">你只需要拉进框架的主线程代码(40KB)。</p><p id="19d7" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">您不需要手动创建这个文件。你需要做的就是:</p><pre class="kg kh ki kj gt oo nh op oq aw or bi"><span id="e973" class="os kx iq nh b gy ot ou l ov ow">npx neo-app</span></pre><p id="5a76" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">或者克隆回购并使用<a class="ae kv" href="https://github.com/neomjs/neo/blob/dev/src/Main.mjs" rel="noopener ugc nofollow" target="_blank"> create-app程序</a>。这将导入<code class="fe ne nf ng nh b">WorkerManager</code>并为您生成<code class="fe ne nf ng nh b"> Worker</code>，注册远程方法并将您的应用程序代码加载到应用程序工作器中。</p><p id="2df8" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated"><a class="ae kv" href="https://github.com/neomjs/neo/blob/dev/src/worker/Manager.mjs" rel="noopener ugc nofollow" target="_blank">https://github . com/neom js/neo/blob/dev/src/worker/manager . mjs</a></p><p id="81b2" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">如果您仔细观察这些文件，您会注意到所有的虚拟dom更新都在<code class="fe ne nf ng nh b">requestAnimationFrame</code>中排队。您可以自己创建一个类似的设置，或者让<code class="fe ne nf ng nh b">neo.mjs</code>为您处理。</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h1 id="746c" class="kw kx iq bd ky kz np lb lc ld nq lf lg jw nr jx li jz ns ka lk kc nt kd lm ln bi translated">6.什么是远程方法？</h1><p id="cf6a" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated">如果您想在工作线程之间或者与主线程进行通信，您可能需要一个抽象层围绕所需的<code class="fe ne nf ng nh b">postMessages</code>。</p><p id="9c76" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">这可能是一项繁重的工作，尤其是在您还希望可选地支持<code class="fe ne nf ng nh b">SharedWorker</code>的情况下。</p><p id="4d90" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">如果您在一个<code class="fe ne nf ng nh b">Worker</code>(在app worker的<code class="fe ne nf ng nh b">neo.mjs</code>上下文中)中运行自己的代码，您会注意到:</p><ul class=""><li id="659e" class="lo lp iq lq b lr my lt mz lv nx lx ny lz nz mb oa md me mf bi translated"><code class="fe ne nf ng nh b">window</code>未定义</li><li id="b006" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oa md me mf bi translated"><code class="fe ne nf ng nh b">window.document</code>未定义</li></ul><p id="1d9a" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">您根本无法访问真正的DOM。这使得必须使用虚拟DOM。</p><p id="4628" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">尽管如此，仍有一些边缘用例需要直接访问DOM。滚动是一个好方法:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/e67bd2f85b5da5bbece71b55876fd26c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*HW8rdw7mNOYmWcU_P8F4cQ.png"/></div></figure><p id="2a81" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated"><a class="ae kv" href="https://github.com/neomjs/neo/blob/dev/src/main/DomAccess.mjs#L402" rel="noopener ugc nofollow" target="_blank">https://github . com/neom js/neo/blob/dev/src/main/domain access . mjs # L402</a></p><p id="26f5" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">顾名思义，<code class="fe ne nf ng nh b">Neo.main.DomAccess</code>只在主线程内部可用。它不会导入到app worker中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/531a9fbd89f7528e0250573cc36a355a.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*RxSR5CQRUyHN0Lea20tKgg.png"/></div></div></figure><p id="7357" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">你所需要做的就是添加你想要向不同的工作者或者主线程公开的方法。</p><p id="6abf" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">现在，在您的范围内(应用程序工作人员)，您可以调用这些远程方法作为承诺。它们将被映射到开箱即用的Neo名称空间。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/4d782b4367457a4b27906ede18cfdaa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*j74ZRm9Rjettnh1YJATa3w.png"/></div></figure><p id="f604" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated"><a class="ae kv" href="https://github.com/neomjs/neo/blob/dev/src/calendar/view/MonthComponent.mjs#L216" rel="noopener ugc nofollow" target="_blank">https://github . com/neom js/neo/blob/dev/src/calendar/view/month component . mjs # L216</a></p><p id="ec5d" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">就这么简单。</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h1 id="5d2d" class="kw kx iq bd ky kz np lb lc ld nq lf lg jw nr jx li jz ns ka lk kc nt kd lm ln bi translated">7.模板有什么问题？</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pa"><img src="../Images/c049260a0dc5a93307e988dc0b07c961.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iex82H3E3QajigkeCB0kOQ.png"/></div></div></figure><p id="70ca" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">Angular、React和Vue都使用基于伪XML字符串的模板。这些模板必须被解析，这是昂贵的。您可以在构建时这样做(例如，Svelte)，但是之后您就不能在构建时轻易修改它们了。这是可能的(如手动操作JSX输出)，但在这一点上不再一致使用。</p><p id="3d01" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">模板混合了dom标记、循环、if语句和变量。它们会降低你的工作效率(例如，限定范围)并限制你。</p><p id="c42b" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">虽然这个话题肯定有争议，但neo.mjs摆脱了模板。相反，类似JSON的持久结构已经就位:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/ba48834fb62e352bed2244451f5d9d74.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*MuQY4ZfwbsHcfTGxw-YAIA.png"/></div></figure><p id="20ad" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated"><a class="ae kv" href="https://github.com/neomjs/neo/blob/dev/src/calendar/view/MonthComponent.mjs#L99" rel="noopener ugc nofollow" target="_blank">https://github . com/neom js/neo/blob/dev/src/calendar/view/month component . mjs # L99</a></p><p id="4a46" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">类似JSON的意思是:嵌套的JS对象和数组，在整个组件生命周期中，您可以随意更改它们。它们不包含变量、if语句或循环。</p><p id="ba40" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">您可能同意JavaScript非常适合处理这些结构。</p><p id="d6ef" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">您永远不需要解析它们:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/8738c8df80abeeaddfbfdfbe87370800.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*P0BC_BEWF5yKqia1P6BhlQ.png"/></div></figure><p id="d6b3" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated"><a class="ae kv" href="https://github.com/neomjs/neo/blob/dev/src/calendar/view/MonthComponent.mjs#L232" rel="noopener ugc nofollow" target="_blank">https://github . com/neom js/neo/blob/dev/src/calendar/view/month component . mjs # L232</a></p><p id="f2d8" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">将配置更改映射到<code class="fe ne nf ng nh b">vdom</code>相当简单。您可以将标志添加到特定的节点，并使用<code class="fe ne nf ng nh b">VdomUtil</code>来获取它们。</p><p id="4270" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">您可以向任何节点添加removeDom标志，这将从实际的Dom中删除节点(或树),同时保持您的<code class="fe ne nf ng nh b">vdom</code>结构不变。</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h1 id="a31f" class="kw kx iq bd ky kz np lb lc ld nq lf lg jw nr jx li jz ns ka lk kc nt kd lm ln bi translated">8.平均减少80%以上的DOM</h1><p id="4600" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated">我们刚刚提到的这个<code class="fe ne nf ng nh b">removeDom</code>属性非常强大。我只是用它来增强卡片布局，默认情况下从DOM中移除所有不活动的卡片。</p><p id="72a5" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">如果你愿意的话，你也可以通过配置来改变它。</p><p id="53d9" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">虽然样式为<code class="fe ne nf ng nh b">display:’none’</code>的节点将被排除在浏览器布局计算之外，但它们仍然存在。</p><p id="1ead" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">移除它们会减少DOM，从而大大减少主线程的内存占用。</p><p id="3047" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">这是进一步提高性能的简单方法。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pd"><img src="../Images/67a988693b72f5b16856c214ab6beabc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tt_uyYNg6NHr5TUDHjmEpw.png"/></div></div></figure><p id="c4ff" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">如您所见，日历有4个主要视图(日、周、月、年)，但只有一个在DOM中。</p><p id="ed5e" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated"><code class="fe ne nf ng nh b">SideBar</code>折叠后会被移除。</p><p id="41e8" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated"><code class="fe ne nf ng nh b">SettingsContainer</code>折叠后将被移除。</p><p id="71fc" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">设置包含一个有五个选项卡的<code class="fe ne nf ng nh b">TabPanel</code>。在任何时候，DOM中只有一个选项卡体。</p><p id="aea4" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">所有视图的JavaScript实例仍然存在。您仍然可以将更改映射到虚拟DOM，并在任何给定时间将其放回——如果您愿意，可以放在应用程序的不同位置。</p><p id="198a" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">您的状态将保持不变，这意味着，在这种情况下，我们可以更改视图的设置，视图不再位于DOM中。</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h1 id="fe97" class="kw kx iq bd ky kz np lb lc ld nq lf lg jw nr jx li jz ns ka lk kc nt kd lm ln bi translated">9.直接在浏览器中编写ES8+代码</h1><p id="620e" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated">看一下下面的截图:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pe"><img src="../Images/c6b7d999744632efaa8ead2ce36b5bf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L6aNsDtGPWmRhMY_n75vIA.png"/></div></div></figure><p id="4512" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">这里需要注意的重要事项是:</p><ul class=""><li id="344a" class="lo lp iq lq b lr my lt mz lv nx lx ny lz nz mb oa md me mf bi translated">您可以看到线程(Main、App、Data、Vdom)。</li><li id="2322" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oa md me mf bi translated">WeekComponent.mjs文件位于App Worker内部。</li><li id="47bb" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oa md me mf bi translated">可以看到<strong class="lq ir">真实的</strong>代码(这不是源图)。</li><li id="1423" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oa md me mf bi translated">您可以看到定制类系统的增强:一个成熟的配置系统。</li></ul><p id="50b8" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">这带来了无与伦比的调试体验:</p><ul class=""><li id="329b" class="lo lp iq lq b lr my lt mz lv nx lx ny lz nz mb oa md me mf bi translated">修改你的代码，重新加载浏览器，这就是了。</li><li id="cebe" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oa md me mf bi translated">不需要构建或传输。</li><li id="d615" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oa md me mf bi translated">虽然JavaScript模块在所有主流浏览器中都得到完全支持，但在Firefox和Safari的worker范围内仍然不受支持。开发团队正在努力。</li><li id="6cf5" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oa md me mf bi translated">对于neo.mjs，有基于Webpack的dist版本，在Firefox和Safari中运行良好。</li></ul><p id="0abb" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">重要的是，Chrome完全支持它，所以你可以在那里使用dev模式，一旦它没有错误，在其他浏览器中测试dist/development版本。</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h1 id="c293" class="kw kx iq bd ky kz np lb lc ld nq lf lg jw nr jx li jz ns ka lk kc nt kd lm ln bi translated">10.获得开箱即用的应用程序文档</h1><p id="a31b" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated">虽然许多库或框架都提供了Docs应用程序，但这个程序只提供框架文件的文档视图。</p><p id="c427" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">使用neo.mjs，您还将获得您自己的应用程序相关代码的文档视图。您所需要做的就是向您的配置、方法和事件添加文档注释。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pf"><img src="../Images/fc98f49783139ded150e5d5cdca4f1c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z3hZsaqQvxYmhB2DXc4RhA.png"/></div></div></figure></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h1 id="e449" class="kw kx iq bd ky kz np lb lc ld nq lf lg jw nr jx li jz ns ka lk kc nt kd lm ln bi translated">11.neo.mjs是什么？</h1><p id="b679" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated">neo.mjs是一个开源项目(整个代码库，以及所有示例和演示应用程序，都使用MIT许可证)。</p><p id="9482" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">网站应用程序:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/cdcf0dfd4ec58f11143d5e38be4d7f1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*fLylJ4uD4I9VmjHA0Rqy2w.png"/></div></figure><div class="ob oc gp gr od oe"><a href="https://neomjs.github.io/pages/node_modules/neo.mjs/dist/production/apps/website/index.html#mainview=home&amp;childview=developers" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">neo.mjs -网站</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">编辑描述</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">neomjs.github.io</p></div></div></div></a></div><p id="6f64" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">存储库:</p><div class="ob oc gp gr od oe"><a href="https://github.com/neomjs/neo" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">近地天体</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">neo.mjs使您能够使用一个以上的CPU创建可扩展的高性能应用程序，而无需使用…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">github.com</p></div></div><div class="ph l"><div class="pi l pj pk pl ph pm kp oe"/></div></div></a></div><p id="e998" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">这意味着你可以免费使用它，它会一直这样。然而，这个项目需要更多的贡献者和赞助者。</p><p id="44f0" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">路线图上还有更多项目和想法。</p><p id="1624" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">如果你想为一个了不起的开源项目做贡献，你会受到赞赏。</p><p id="b098" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">如果该项目对贵公司有或将会有商业价值，注册成为赞助商将允许我投入更多时间，从而加快新事物的交付时间。</p><h1 id="624d" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">12.如何达到速度？</h1><p id="191e" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated">学习neo.mjs最简单的方法可能是按照前两个教程从头开始创建Covid Dashboard应用程序。</p><div class="ob oc gp gr od oe"><a href="https://medium.com/swlh/how-to-create-a-webworkers-driven-multithreading-app-part-1-fa0cc78a4237" rel="noopener follow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">如何创建webworkers驱动的多线程应用程序—第1部分</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">内容</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">medium.com</p></div></div><div class="ph l"><div class="pn l pj pk pl ph pm kp oe"/></div></div></a></div><div class="ob oc gp gr od oe"><a href="https://medium.com/swlh/how-to-create-a-webworkers-driven-multithreading-app-part-2-3c5b3c2d1adb" rel="noopener follow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">如何创建webworkers驱动的多线程应用程序—第2部分</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">内容</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">medium.com</p></div></div><div class="ph l"><div class="po l pj pk pl ph pm kp oe"/></div></div></a></div><h1 id="c438" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">12.接下来是什么？</h1><p id="c28a" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mn lt lu ju mo lv mp mq mr lx ms mt mu lz mv mw mx mb ij bi translated">现在，我正专注于1.4版本的新日历组件。目标是在GMail或原生MacOS日历之前，创建一个优秀的UX。</p><p id="e0d3" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">你可以在这里看看目前的进展:</p><div class="ob oc gp gr od oe"><a href="https://neomjs.github.io/pages/node_modules/neo.mjs/dist/production/examples/calendar/basic/index.html" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">neo.mjs日历基础</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">编辑描述</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">neomjs.github.io</p></div></div></div></a></div><p id="ee0c" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">作为下一步，我将进一步润色事件，然后从拖放实现开始。</p><p id="4fd3" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">一旦拖放到位，下一个项目是应用内对话框。我们必须能够抓住它们的头部来移动它们或者调整它们的大小。一个在不同浏览器窗口间移动对话框的演示是可能的，并且应该是惊人的。</p><p id="5bdd" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">一旦完成，我将进一步增强网格/表格的实现——更容易地访问列过滤、移动列、隐藏列等。</p><p id="1d46" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">你绝对可以影响路线图！</p><p id="822f" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">请随意使用<a class="ae kv" href="https://github.com/neomjs/neo/issues" rel="noopener ugc nofollow" target="_blank">问题跟踪器</a>。感谢所有反馈！</p><p id="213f" class="pw-post-body-paragraph ml mm iq lq b lr my jr mn lt mz ju mo lv na mq mr lx nb mt mu lz nc mw mx mb ij bi translated">最诚挚的问候和快乐的编码！</p></div></div>    
</body>
</html>