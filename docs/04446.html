<html>
<head>
<title>Create a Scroll to Top Arrow Using React Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React挂钩创建向上滚动箭头</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-a-scroll-to-top-arrow-using-react-hooks-18586890fedc?source=collection_archive---------2-----------------------#2020-04-14">https://betterprogramming.pub/create-a-scroll-to-top-arrow-using-react-hooks-18586890fedc?source=collection_archive---------2-----------------------#2020-04-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b0da" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">跳到页面顶部从未如此简单</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3c1d335e22f420ed0e9ed6b06494cbe2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hBcxgszHuCPLP1Wfeu3oLA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@sickcity?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Ojo Toluwashe </a>在<a class="ae ky" href="https://unsplash.com/s/photos/bow-arrow?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="4013" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之前，我写过一篇关于使用JavaScript 实现自定义滚动顶部箭头的文章。最近，我需要在React应用程序中实现一个，我首先想到的是在父组件的状态中管理箭头的可见性。</p><p id="d1ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然这样做是可行的，但它造成了不必要的状态变化，并重新呈现了整个父组件，而我想做的只是更新箭头是否可见。</p><p id="f65b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以赋予箭头组件自己的状态值并切换其可见性，但是通过使用<a class="ae ky" href="https://reactjs.org/docs/hooks-intro.html" rel="noopener ugc nofollow" target="_blank"> React Hooks </a>，我们可以用最少的代码和不引人注目的状态依赖和效果创建一个功能性的<code class="fe lv lw lx ly b">ScrollTopArrow</code>组件。可见性可以通过添加滚动事件监听器和实现<code class="fe lv lw lx ly b">useState</code>来管理。见下文:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="4eaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然在React中使用传统的DOM操作被认为是一种反模式，但我在这种情况下使用它的理由是因为我们没有使用传统的DOM操作来显著改变数据或状态。我们所做的就是添加一个监听器来决定是否显示一个元素。我们也没有使用DOM操作来改变元素类或样式。</p><p id="3541" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经有了可见性切换逻辑，我们可以开始实际构建我们的组件并应用样式。如果您想使用HTML和CSS创建自己的arrow元素，这完全没问题。但是有点懒，我决定从<a class="ae ky" href="https://react-icons.netlify.com/#/" rel="noopener ugc nofollow" target="_blank"> react-icons </a>导入一个图标:</p><pre class="kj kk kl km gt mb ly mc md aw me bi"><span id="e750" class="mf mg it ly b gy mh mi l mj mk">import {FaArrowCircleUp} from 'react-icons/fa';</span></pre><p id="5ea6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了显示之外，所有图标的样式都保留在<code class="fe lv lw lx ly b">App.css</code>中，显示将由<code class="fe lv lw lx ly b">showScroll</code>钩子状态属性驱动。如果<code class="fe lv lw lx ly b">showScroll</code>是<code class="fe lv lw lx ly b">true</code>，显示箭头。如果是<code class="fe lv lw lx ly b">false</code>，隐藏箭头。</p><pre class="kj kk kl km gt mb ly mc md aw me bi"><span id="8b7a" class="mf mg it ly b gy mh mi l mj mk">&lt;FaArrowCircleUp <br/>   className="scrollTop" <br/>   onClick={scrollTop} <br/>   style={{height: 40, display: showScroll ? 'flex' : 'none'}}<br/>/&gt;</span></pre><p id="9d00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，这里是<code class="fe lv lw lx ly b">scrollTop</code>函数的代码:</p><pre class="kj kk kl km gt mb ly mc md aw me bi"><span id="712b" class="mf mg it ly b gy mh mi l mj mk">const scrollTop = () =&gt;{<br/>   window.scrollTo({top: 0, behavior: 'smooth'});<br/>};</span></pre><p id="ba73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe lv lw lx ly b">window</code>接口自带的<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollTo" rel="noopener ugc nofollow" target="_blank"> </a> <code class="fe lv lw lx ly b"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollTo" rel="noopener ugc nofollow" target="_blank">scrollTo</a></code>函数，为<code class="fe lv lw lx ly b">top</code>和<code class="fe lv lw lx ly b">behavior</code>传递参数。我们的<code class="fe lv lw lx ly b">top</code>值是0，因为我们想要这个箭头做的就是将窗口滚动回页面顶部。很简单。对于<code class="fe lv lw lx ly b">behavior</code>，我个人更喜欢<code class="fe lv lw lx ly b">smooth</code>，因为它给了滚动效果一个不那么刺耳的过渡。</p><p id="6dfa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是<code class="fe lv lw lx ly b">ScrollTopArrow</code>组件和<code class="fe lv lw lx ly b">App.css</code>的完整代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="e044" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你所要做的就是在你选择的组件中导入<code class="fe lv lw lx ly b">ScrollTopArrow</code>,一切都准备好了。为了测试它，我将<code class="fe lv lw lx ly b">ScrollTopArrow</code>导入到我的<code class="fe lv lw lx ly b">App</code>组件中，并赋予<code class="fe lv lw lx ly b">App</code>5000 px的高度。下面是最终产品应该产生的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/cfba577ae9daa284b454d6c478d3c2a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/1*hfgMaWt6gwgFYG2FTlCiTw.gif"/></div></figure><p id="a7c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完整React应用程序的源代码可以在<a class="ae ky" href="https://github.com/macro6461/react-scroll-arrow" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><p id="8c20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://matt-croak.medium.com/membership" rel="noopener"> <em class="mt">在此将你的免费媒体会员升级为付费会员</em> </a> <em class="mt">每月只需5美元，你就能收到来自各种出版物上数千名作家的无限量无广告故事。这是一个附属链接，你的会员资格的一部分帮助我为我创造的内容获得奖励。谢谢大家！</em></p><h1 id="08e8" class="mu mg it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">参考</h1><div class="nl nm gp gr nn no"><a href="https://medium.com/@mattcroak718/custom-scroll-back-to-top-arrow-with-color-detection-cae51f8592a5" rel="noopener follow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">带有颜色检测的自定义滚动回顶部箭头</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">我想在我的个人网站中加入一个返回顶部的滚动按钮，以改善我的网站的用户体验…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">medium.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc ks no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://reactjs.org/docs/hooks-intro.html" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">介绍钩子-反应</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">钩子是React 16.8中的新增功能。它们允许您使用状态和其他React特性，而无需编写类。这个…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">reactjs.org</p></div></div><div class="nx l"><div class="od l nz oa ob nx oc ks no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://react-icons.netlify.com/#/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">反应图标</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">编辑描述</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">react-icons.netlify.com</p></div></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollTo" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">Window.scrollTo()</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">Window.scrollTo()滚动到文档中的一组特定坐标。window.scrollTo(x坐标，y坐标)…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">developer.mozilla.org</p></div></div><div class="nx l"><div class="oe l nz oa ob nx oc ks no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://github.com/macro6461/react-scroll-arrow" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">macro 6461/反应-滚动-箭头</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">在GitHub上创建一个帐户，为macro6461/react-scroll-arrow开发做出贡献。</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">github.com</p></div></div><div class="nx l"><div class="of l nz oa ob nx oc ks no"/></div></div></a></div></div></div>    
</body>
</html>