<html>
<head>
<title>22 Best Practices to Take Your API Design Skills to the Next Level</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">22个最佳实践，让您的API设计技能更上一层楼</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/22-best-practices-to-take-your-api-design-skills-to-the-next-level-65569b200b9?source=collection_archive---------0-----------------------#2021-04-15">https://betterprogramming.pub/22-best-practices-to-take-your-api-design-skills-to-the-next-level-65569b200b9?source=collection_archive---------0-----------------------#2021-04-15</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="6b20" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">设计REST APIs的实用建议</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/4bb91e31c892fb364fb27a26ae2ac062.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bGuAtdLThns0yU1pHHfwzA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图片来自<a class="ae kz" href="https://www.pexels.com/photo/man-in-red-polo-shirt-thought-a-good-idea-3779432/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae kz" href="https://www.pexels.com/@olly?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">安德里亚·皮亚卡迪奥</a></p></figure><p id="29ec" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">有没有因为一个糟糕的API而感到沮丧，在这个API中一切都是猜谜游戏？嗯，我有。</p><p id="4668" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这个微服务的世界里，后端API的一致设计是必不可少的。</p><p id="52dd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">今天，我们将讨论一些可以遵循的最佳实践。我们会让它简短而甜蜜——所以系好安全带！</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="5fbd" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">首先，一些术语</h1><p id="61dc" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">任何API设计都遵循一种叫做<code class="fe na nb nc nd b"><a class="ae kz" href="https://cloud.google.com/apis/design/resources" rel="noopener ugc nofollow" target="_blank">Resource Oriented Design</a></code> <strong class="lc iv"> </strong>的东西，它由三个关键概念组成</p><ul class=""><li id="1e1c" class="ne nf iu lc b ld le lg lh lj ng ln nh lr ni lv nj nk nl nm bi translated"><strong class="lc iv">资源:</strong>资源是一段数据，例如<strong class="lc iv">一个用户</strong>。</li><li id="ae2a" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated"><strong class="lc iv">集合:</strong>一组资源称为一个集合。示例:<strong class="lc iv">用户列表</strong></li><li id="a322" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated"><strong class="lc iv"> URL: </strong>标识资源或集合的位置。示例:<code class="fe na nb nc nd b">/user</code></li></ul></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="6eb7" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">1.对URL使用烤肉串大小写</h1><p id="6d61" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">例如，如果您想获得订单列表。</p><h2 id="8773" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">不好:</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="3f65" class="ns me iu nd b gz oi oj l ok ol"><strong class="nd iv">/systemOrders </strong>or <strong class="nd iv">/system_orders</strong></span></pre><h2 id="732e" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">好:</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="195d" class="ns me iu nd b gz oi oj l ok ol"><strong class="nd iv">/system-orders</strong></span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="a67e" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">2.使用camelCase作为参数</h1><p id="f94a" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">例如，如果您想从特定的商店购买产品。</p><h2 id="a78e" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">不好:</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="78dc" class="ns me iu nd b gz oi oj l ok ol">/system-orders/{order_id}<!-- --> or <!-- -->/system-orders/{OrderId}</span></pre><h2 id="e7ed" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">好:</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="8826" class="ns me iu nd b gz oi oj l ok ol">/system-orders/{orderId}</span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="6d36" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">3.指向集合的复数名称</h1><p id="ac4d" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">如果你想得到一个系统的所有用户。</p><h2 id="c05b" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">不好:</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="280a" class="ns me iu nd b gz oi oj l ok ol">GET /user<!-- --> or <!-- -->GET /User</span></pre><h2 id="76dd" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">好:</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="0594" class="ns me iu nd b gz oi oj l ok ol">GET /users</span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="89e4" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">4.URL以集合开始，以标识符结束</h1><p id="37a7" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">如果想保持概念的单数和一致。</p><h2 id="15d5" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">不好:</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="db1d" class="ns me iu nd b gz oi oj l ok ol">GET /shops/:shopId/category/:categoryId/price</span></pre><p id="c67c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这很糟糕，因为它指向的是属性而不是资源。</p><h2 id="0e2f" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">好:</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="d33a" class="ns me iu nd b gz oi oj l ok ol">GET /shops/:shopId/<!-- --> or <!-- -->GET /category/:categoryId</span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="b1b6" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">5.让动词远离你的资源URL</h1><p id="6294" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">不要在URL中使用动词来表达你的意图。相反，使用适当的HTTP方法来描述操作。</p><h2 id="a4d0" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">不好:</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="1e97" class="ns me iu nd b gz oi oj l ok ol">POST /updateuser/{userId}<!-- --> or <!-- -->GET /getusers</span></pre><h2 id="0367" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">好:</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="ec57" class="ns me iu nd b gz oi oj l ok ol">PUT /user/{userId}</span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="fd38" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">6.对非资源URL使用动词</h1><p id="fafe" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">您有一个只返回一个操作的端点。在这种情况下，你可以用动词。例如，如果您想向用户重新发送警报。</p><h2 id="1957" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">好:</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="f64b" class="ns me iu nd b gz oi oj l ok ol">POST /alerts/245743/resend</span></pre><p id="3eb2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">请记住，这些不是我们的CRUD操作。相反，这些是在我们的系统中完成特定工作的功能。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="356b" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">7.将camelCase用于JSON属性</h1><p id="58df" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">如果您正在构建一个请求体或响应是JSON的系统，那么属性名应该在<code class="fe na nb nc nd b">camelCase</code>中</p><p id="b780" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">不好</strong></p><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="a936" class="ns me iu nd b gz oi oj l ok ol">{<br/>   user_name: "Mohammad Faisal"<br/>   user_id: "1"<br/>}</span></pre><p id="3187" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">好的</strong></p><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="3dc8" class="ns me iu nd b gz oi oj l ok ol">{<br/>   userName: "Mohammad Faisal"<br/>   userId: "1"<br/>}</span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="39b2" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">8.监视</h1><p id="6130" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">RESTful HTTP服务必须实现<code class="fe na nb nc nd b">/health</code>和<code class="fe na nb nc nd b">/version</code>以及<code class="fe na nb nc nd b">/metrics </code> API端点。他们将提供以下信息。</p><h2 id="a0be" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">/健康</h2><p id="8e03" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">用一个<code class="fe na nb nc nd b">200 OK</code>状态码响应对<code class="fe na nb nc nd b">/health</code>的请求。</p><h2 id="1e73" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">/版本</h2><p id="7fc8" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">用版本号响应对<code class="fe na nb nc nd b">/version</code>的请求。</p><h2 id="64e3" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated"><code class="fe na nb nc nd b">/<strong class="ak">metrics</strong></code></h2><p id="fb65" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">这个端点将提供各种度量，比如平均响应时间。</p><p id="f116" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">也强烈建议使用<code class="fe na nb nc nd b">/debug </code>和<code class="fe na nb nc nd b"> /status</code>端点。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="197d" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">9.不要使用table_name作为资源名称</h1><p id="fc89" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">不要仅仅使用表名作为资源名。从长远来看，这种懒惰是有害的。</p><p id="c734" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">坏:</strong>T9】</p><p id="73ee" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">好:</strong> <code class="fe na nb nc nd b">product-orders</code></p><p id="8463" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这是因为公开底层架构不是您的目的。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="eced" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">10.使用API设计工具</h1><p id="8d1d" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">有许多优秀的API设计工具可用于优秀的文档，例如:</p><ul class=""><li id="b997" class="ne nf iu lc b ld le lg lh lj ng ln nh lr ni lv nj nk nl nm bi translated"><a class="ae kz" href="https://apiblueprint.org/" rel="noopener ugc nofollow" target="_blank"> API蓝图</a></li><li id="be1e" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated"><a class="ae kz" href="https://swagger.io/" rel="noopener ugc nofollow" target="_blank">大摇大摆</a></li></ul><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj om"><img src="../Images/d40330680b7217eb1c8a9140b79c394d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wbtbNmxsgf-KuMzqOr18HA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">时髦的</p></figure><p id="00ee" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">拥有良好而详细的文档可以为您的API消费者带来良好的用户体验。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="1616" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">11.使用简单的序数作为版本</h1><p id="921d" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">始终对API使用版本控制，并将其移动到左侧，以便它具有最高的范围。版本号应为<code class="fe na nb nc nd b">v1</code>、<code class="fe na nb nc nd b">v2</code>等。</p><h2 id="dc69" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">好:</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="20dd" class="ns me iu nd b gz oi oj l ok ol">http://api.domain.com/v1/shops/3/products</span></pre><p id="9cd7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">始终在API中使用版本控制，因为如果外部实体更改正在使用API的端点，可能会破坏它们的功能。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="9006" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">12.在您的回答中包括资源总数</h1><p id="e8b8" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">如果一个API返回一个对象列表，总是在响应中包含资源的总数。您可以为此使用<code class="fe na nb nc nd b">total</code>属性。</p><h2 id="aa01" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">不好:</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="983d" class="ns me iu nd b gz oi oj l ok ol">{<br/>  users: [ <br/>     ...<br/>  ]<br/>}</span></pre><h2 id="4203" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">好:</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="d4b1" class="ns me iu nd b gz oi oj l ok ol">{<br/>  users: [ <br/>     ...<br/>  ],</span><span id="729f" class="ns me iu nd b gz on oj l ok ol">  total: 34<br/>}</span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="8260" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">13.接受极限和偏移参数</h1><p id="667b" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在<code class="fe na nb nc nd b">GET</code>操作中始终接受<code class="fe na nb nc nd b">limit</code>和<code class="fe na nb nc nd b">offset</code>参数。</p><h2 id="259b" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">好:</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="ee34" class="ns me iu nd b gz oi oj l ok ol">GET /shops?offset=5&amp;limit=5</span></pre><p id="f170" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这是因为它是前端分页所必需的。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="83b4" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">14.获取字段查询参数</h1><p id="b7e3" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">还应该考虑返回的数据量。添加一个<code class="fe na nb nc nd b">fields</code>参数，只暴露API中的必需字段。</p><h2 id="b4e6" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">示例:</h2><p id="9d14" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">只返回商店的名称、地址和联系方式。</p><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="cc1b" class="ns me iu nd b gz oi oj l ok ol">GET /shops?fields=id,name,address,contact</span></pre><p id="5c61" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在某些情况下，它还有助于减少响应大小。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="a5f6" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">15.不要在URL中传递身份验证令牌</h1><p id="4a0e" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">这是一个非常糟糕的做法，因为URL经常被记录，而且身份验证令牌也会被不必要地记录。</p><h2 id="bc78" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">严重的</h2><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="b62e" class="ns me iu nd b gz oi oj l ok ol">GET /shops/123?token=some_kind_of_authenticaiton_token</span></pre><h2 id="4f4e" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">好的</h2><p id="e0de" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">相反，用标题传递它们:</p><pre class="kk kl km kn gu oe nd of og aw oh bi"><span id="31a6" class="ns me iu nd b gz oi oj l ok ol">Authorization: Bearer xxxxxx, Extra yyyyy</span></pre><p id="3ff1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，授权令牌应该是短命的</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="35c2" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">16.验证内容类型</h1><p id="1de5" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">服务器不应假定内容类型。例如，如果您接受<code class="fe na nb nc nd b">application/x-www-form-urlencoded</code>，那么攻击者可以创建一个表单并触发一个简单的POST请求。</p><p id="1678" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">所以，总是验证<code class="fe na nb nc nd b">content-type</code>，如果你想用默认的，使用<code class="fe na nb nc nd b">content-type: application/json</code></p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="6a36" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">17.对CRUD函数使用HTTP方法</h1><p id="0d84" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">HTTP方法服务于解释CRUD功能的目的。</p><p id="91f4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe na nb nc nd b">GET</code>:检索资源的表示。</p><p id="3723" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe na nb nc nd b">POST</code>:创建新的资源和子资源。</p><p id="458d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe na nb nc nd b">PUT</code>:更新现有资源。</p><p id="1b23" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe na nb nc nd b">PATCH</code>:更新现有资源。它只更新提供的字段，而不更新其他字段</p><p id="1c76" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe na nb nc nd b">DELETE</code>:删除现有资源。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="31d7" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">18.将URL中的关系用于嵌套资源</h1><p id="9e0e" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">一些实例如下:</p><ul class=""><li id="936f" class="ne nf iu lc b ld le lg lh lj ng ln nh lr ni lv nj nk nl nm bi translated"><code class="fe na nb nc nd b">GET /shops/2/products</code>:获取2号店所有商品的清单。</li><li id="7596" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated"><code class="fe na nb nc nd b">GET /shops/2/products/31</code>:获取商品31的详细信息，属于店铺2。</li><li id="8499" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated"><code class="fe na nb nc nd b">DELETE /shops/2/products/31</code>，应删除产品31，它属于商店2。</li><li id="8754" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated"><code class="fe na nb nc nd b">PUT /shops/2/products/31</code>，应该更新产品31的信息；仅在资源URL上使用<code class="fe na nb nc nd b">PUT</code>，而不是集合。</li><li id="c731" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated"><code class="fe na nb nc nd b">POST /shops</code>，应该创建一个新店并返回创建的新店的详细信息。在集合URL上使用<code class="fe na nb nc nd b">POST</code>。</li></ul></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="de39" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">19.克-奥二氏分级量表</h1><p id="f658" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">一定要支持所有面向公众的API的CORS(跨源资源共享)头。</p><p id="b54d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">考虑支持CORS允许的来源<code class="fe na nb nc nd b">“*”</code>，并通过有效的OAuth令牌强制授权。</p><p id="b38d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">避免将用户凭据与来源验证结合使用。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="3e2e" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">20.安全性</h1><p id="6542" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在所有终端、资源和服务上实施HTTPS (TLS加密)。</p><p id="e4d3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">对所有回调URL、推送通知端点和webhooks实施并要求HTTPS。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="b464" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">21.错误</h1><p id="37ab" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">当客户端发出无效或不正确的请求，或者向服务传递无效或不正确的数据，而服务拒绝该请求时，就会发生服务错误。</p><p id="1594" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">示例包括无效的身份验证凭证、不正确的参数、未知的版本id等。</p><ul class=""><li id="f0b6" class="ne nf iu lc b ld le lg lh lj ng ln nh lr ni lv nj nk nl nm bi translated">由于一个或多个服务错误而拒绝客户端请求时，请务必返回<code class="fe na nb nc nd b">4xx</code> HTTP错误代码。</li><li id="63ab" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated">考虑处理所有属性并在单个响应中返回多个验证问题。</li></ul></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="b560" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">22.金科玉律</h1><p id="64d7" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">如果你对API格式化的决定有疑问，这些黄金法则可以帮助我们做出正确的决定。</p><ul class=""><li id="21d0" class="ne nf iu lc b ld le lg lh lj ng ln nh lr ni lv nj nk nl nm bi translated">扁平的比嵌套的好。</li><li id="392c" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated">简单比复杂好。</li><li id="af20" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated">字符串比数字好。</li><li id="0145" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated">一致性比定制好。</li></ul></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><p id="32fa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">就这样——如果你已经走了这么远，恭喜你！我希望你学到了一些东西。</p><p id="62d5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我希望你有美好的一天！</p><p id="3cca" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">有话要说？通过</strong><a class="ae kz" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"><strong class="lc iv">LinkedIn</strong>T5】与我联系</a></p><div class="oo op gq gs oq or"><a href="https://javascript.plainenglish.io/45-npm-packages-to-solve-16-react-problems-a9ab18946224" rel="noopener  ugc nofollow" target="_blank"><div class="os ab fp"><div class="ot ab ou cl cj ov"><h2 class="bd iv gz z fq ow fs ft ox fv fx it bi translated">45个NPM软件包解决16个React问题</h2><div class="oy l"><h3 class="bd b gz z fq ow fs ft ox fv fx dk translated">关于如何选择完美的npm包的深入指导</h3></div><div class="oz l"><p class="bd b dl z fq ow fs ft ox fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf kt or"/></div></div></a></div><div class="oo op gq gs oq or"><a rel="noopener  ugc nofollow" target="_blank" href="/21-best-practices-for-a-clean-react-project-df788a682fb"><div class="os ab fp"><div class="ot ab ou cl cj ov"><h2 class="bd iv gz z fq ow fs ft ox fv fx it bi translated">清洁React项目的21个最佳实践</h2><div class="oy l"><h3 class="bd b gz z fq ow fs ft ox fv fx dk translated">提高代码质量的实用建议</h3></div><div class="oz l"><p class="bd b dl z fq ow fs ft ox fv fx dk translated">better编程. pub</p></div></div><div class="pa l"><div class="pg l pc pd pe pa pf kt or"/></div></div></a></div><h2 id="6cca" class="ns me iu bd mf nt nu dn mj nv nw dp mn lj nx ny mp ln nz oa mr lr ob oc mt od bi translated">资源:</h2><ul class=""><li id="d955" class="ne nf iu lc b ld mv lg mw lj ph ln pi lr pj lv nj nk nl nm bi translated"><a class="ae kz" href="https://github.com/elsewhencode/project-guidelines" rel="noopener ugc nofollow" target="_blank">https://github.com/elsewhencode/project-guidelines</a></li><li id="1673" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated"><a class="ae kz" href="https://cloud.google.com/apigee/" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/apigee/</a></li><li id="1551" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated"><a class="ae kz" href="https://github.com/byrondover/api-guidelines/blob/master/Guidelines.md#json-api-specification" rel="noopener ugc nofollow" target="_blank">https://github . com/Byron dover/API-guidelines/blob/master/guidelines . MD # JSON-API-specification</a></li></ul></div></div>    
</body>
</html>