<html>
<head>
<title>The Battle for Kilobytes in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的千字节之战</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/battle-of-the-kilobytes-squeezing-out-every-little-byte-in-web-applications-for-the-greater-good-98489143ab5f?source=collection_archive---------16-----------------------#2020-09-02">https://betterprogramming.pub/battle-of-the-kilobytes-squeezing-out-every-little-byte-in-web-applications-for-the-greater-good-98489143ab5f?source=collection_archive---------16-----------------------#2020-09-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1965" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为了速度和更大的利益，挤出网络应用中的每一个字节</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ecf03cea86c86ff29d12560638d12f5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1DVbm5ROPVld5vRz"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/photos/dQkXoqQLn40" rel="noopener ugc nofollow" target="_blank">弗拉德·乔姆帕洛夫</a>在<a class="ae kv" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片。</p></figure><p id="65c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我经常发现自己在旧手机上浏览互联网，无休止地等待应用程序加载，结果却点击了错误的按钮，因为其他一些HTML元素的呈现时间比按钮稍晚。按下按钮会显示一些其他链接。</p><p id="9df3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为什么网页不能...打火机？</p><p id="1b1e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有许多方法可以加快页面呈现速度。今天我想关注的一个特别的方法是减少我们发送给我们可怜的访问者的<em class="ls">东西</em>的数量。</p><p id="dbb3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然大小很重要，但我仍然希望使用先进的组件库。我最近更喜欢<a class="ae kv" href="https://preactjs.com/" rel="noopener ugc nofollow" target="_blank"> Preact </a>而不是其他组件库。</p><p id="5377" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Preact的好处是它很小！当将React的109kb (34.8 kb gzipped)大小与Preact的3kb大小进行比较时，很明显Preact是一个有吸引力的选项。</p><p id="b865" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Preact确实有缺点，它提供的功能不如react多，而且需要一段时间来适应，但我发现这不是被吓倒的理由。</p><p id="114d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">既然我们已经确定了我们的组件库，我想向你介绍一个最近比较流行的概念:纯CSS框架。纯CSS框架的伟大之处在于它们非常轻量级，如果构建得好，它们允许您轻松地定制CSS框架，以满足您的特定需求。</p><p id="94ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">到目前为止，我最喜欢的CSS框架是<a class="ae kv" href="https://bulma.io/" rel="noopener ugc nofollow" target="_blank">布尔玛</a>。它是轻量级的，有很好的文档记录，并且可以无限定制。</p><p id="46d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我想提一下，我是TypeScript<a class="ae kv" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank">的忠实粉丝，并将在本文中使用TypeScript。</a></p><p id="5d3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">说够了！让我们构建一个示例项目！让我们安装<code class="fe lt lu lv lw b">preact-cli</code>来帮助我们创建我们的第一个项目:</p><pre class="kg kh ki kj gt lx lw ly lz aw ma bi"><span id="d369" class="mb mc iq lw b gy md me l mf mg">npm i -g preact-cli</span></pre><p id="c7ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装Preact CLI后，让我们创建一个名为my-app的新TypeScript项目:</p><pre class="kg kh ki kj gt lx lw ly lz aw ma bi"><span id="051c" class="mb mc iq lw b gy md me l mf mg">preact create typescript my-app</span></pre><p id="171d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们可以通过在终端中输入以下命令，在后台运行我们的应用程序:</p><pre class="kg kh ki kj gt lx lw ly lz aw ma bi"><span id="3c5f" class="mb mc iq lw b gy md me l mf mg">npm run dev</span></pre><p id="26cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的下一步将是收购布尔玛并安装它:</p><pre class="kg kh ki kj gt lx lw ly lz aw ma bi"><span id="1c82" class="mb mc iq lw b gy md me l mf mg">npm install bulma node-sass sass-loader --save-dev</span></pre><p id="a6dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通常，您会希望将这些类型的依赖项保存为普通的“依赖项”，因为您只需要包含整个CSS文件。然而，我们将使用一个CSS加载器来只加载我们的应用程序实际需要的CSS，尽可能地精简我们的应用程序！</p><p id="5ff5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还需要一个Sass加载程序，以便能够导入布尔玛图书馆的一部分。</p><p id="096e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们在<code class="fe lt lu lv lw b">src/style</code>目录下创建一个文件，将其命名为<code class="fe lt lu lv lw b">index.scss</code>，并导入必要的CSS来将一个布尔玛主题的按钮添加到我们的web应用程序的首页:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mh mi l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在src/style/下创建index.scss。</p></figure><p id="311e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还有，一定要把<code class="fe lt lu lv lw b">src</code>下的<code class="fe lt lu lv lw b">index.js</code>第一行改成<code class="fe lt lu lv lw b">import “./style/index.scss”</code>。</p><p id="b2e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看完<a class="ae kv" href="https://bulma.io/documentation/elements/button/" rel="noopener ugc nofollow" target="_blank">关于布尔玛按钮</a>的文档后，似乎我们必须创建一个简单的<code class="fe lt lu lv lw b">&lt;button&gt;</code>元素并将其分配给<code class="fe lt lu lv lw b">button</code>类。听起来很简单！让我们将<code class="fe lt lu lv lw b">src/routes/home/index.tsx</code>中的代码改为:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="4018" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">切换回你的浏览器，你应该可以看到一个漂亮的按钮出现！</p><p id="b0ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">是时候测试我们的应用程序了。让我们运行下面的命令来真正挤出我们能想到的最小的代码块:</p><pre class="kg kh ki kj gt lx lw ly lz aw ma bi"><span id="e781" class="mb mc iq lw b gy md me l mf mg">preact build --no-sw --no-ssr --no-esm<br/>serve -s build</span></pre><p id="3e8b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们打开Lighthouse，看看具有完全相同代码的应用程序之间的区别(用<code class="fe lt lu lv lw b">react-router-dom</code>替换<code class="fe lt lu lv lw b">preact-router</code>):</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mj"><img src="../Images/651b226867dc8f3a25dad53eadc1b95a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MY-hFLEnzd9utEgra40e0w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Preact和布尔玛:总大小为23.7kb！</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mk"><img src="../Images/cf0bbd1acded6f424c3b75af7309feb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OwTw4sB-ZLjsBRDQu02Mzw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">React中的相同应用。还是小，但是大了三倍！</p></figure><p id="38e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">整洁！这可能看起来不多，但50kb的差异对于非常慢的连接或电话来说可能意味着很多。</p><p id="0f6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望您能够在享受Preact等组件库的体验的同时，学习一些关于纯CSS框架、Preact和创建更小的web应用程序的知识。一如既往，如果您有任何问题，请随时联系我们！</p></div></div>    
</body>
</html>