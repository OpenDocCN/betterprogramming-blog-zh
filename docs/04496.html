<html>
<head>
<title>Git Commands I Always Forget</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我总是忘记Git命令</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/git-commands-i-always-forget-24cbb71c502a?source=collection_archive---------8-----------------------#2020-04-16">https://betterprogramming.pub/git-commands-i-always-forget-24cbb71c502a?source=collection_archive---------8-----------------------#2020-04-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1217" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">恢复上次提交、更改上次或多次提交消息或删除标签</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9095e3d99925481c84f950fcb5f1be75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9xilCpCgG-BqhOICl-zNCg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Jonatan Lewczuk 在<a class="ae ky" href="https://unsplash.com/s/photos/free?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="23aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我每天分享<a class="ae ky" href="https://medium.com/@david.dalbusco/one-trick-a-day-d-34-469a0336a07e" rel="noopener">一个小技巧</a>直到原定的新冠肺炎隔离期结束——2020年4月19日。离第一个里程碑还有三天。希望更好的日子就在前面。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="8ee2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">说到<a class="ae ky" href="https://git-scm.com/" rel="noopener ugc nofollow" target="_blank"> Git </a>，我可能过于依赖它对我的编辑器<a class="ae ky" href="https://www.jetbrains.com/webstorm/" rel="noopener ugc nofollow" target="_blank"> WebStorm </a>的出色集成。这导致我有时会忘记有用的命令，甚至是简单的命令，我很少在终端中运行这些命令。</p><p id="ff86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是我分享这篇博客的原因——主要是为了我未来的自己！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a0de" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">恢复您上次提交的内容</h1><p id="85fe" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要恢复尚未提交的最后一次提交，您可以借助<code class="fe mz na nb nc b">reset</code>命令从上一步回滚历史:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="2071" class="nh md it nc b gy ni nj l nk nl">git reset --soft HEAD~1</span></pre><p id="e1fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，如果您的提交已经被推送，您可以保留您的历史并运行一个<code class="fe mz na nb nc b">revert</code>命令(其中<code class="fe mz na nb nc b">eec47301</code>是要恢复的提交的修订号——这可以在<code class="fe mz na nb nc b">git log</code>命令的帮助下找到),然后是一个提交和推送:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="03cc" class="nh md it nc b gy ni nj l nk nl">git revert eec47301</span></pre><p id="46e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，在<code class="fe mz na nb nc b">reset</code>命令和选项<code class="fe mz na nb nc b">--hard</code>的帮助下，在不保存历史的情况下恢复，然后用选项<code class="fe mz na nb nc b">--force</code>按下:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="d9c4" class="nh md it nc b gy ni nj l nk nl">git reset --hard<!-- --> eec47301</span></pre><p id="56d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不用说，它必须被明智地使用。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d1fd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">更改上次提交的消息</h1><p id="6c16" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">例如，如果您的最后一个提交消息是错误的，或者如果您有一个打字错误，您可以使用选项<code class="fe mz na nb nc b">--amend</code>修改最后或最近的提交消息:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="8abd" class="nh md it nc b gy ni nj l nk nl">git commit --amend</span></pre><p id="d853" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你的提交还没有完成，那就没什么可做的了。如果您已经推送过，您可以使用<code class="fe mz na nb nc b">--force</code>更新您的回购:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="950b" class="nh md it nc b gy ni nj l nk nl">git push --force</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9c19" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">更改多个提交消息</h1><p id="ef7b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果您想要修改多个提交消息，例如，如果您忘记指定相关的问题编号，这种情况可能会发生，您可以在<code class="fe mz na nb nc b">rebase</code>的帮助下继续。这个解决方案的功劳归于<a class="ae ky" href="https://jacopretorius.net/2013/05/amend-multiple-commit-messages-with-git.html" rel="noopener ugc nofollow" target="_blank">张博·普雷托里乌斯</a>和<a class="ae ky" href="https://linuxize.com/post/change-git-commit-message/" rel="noopener ugc nofollow" target="_blank">里努西泽</a>提供的——不是所有的英雄都穿斗篷！</p><p id="9de0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了开始修改，我们运行下面的命令，其中<code class="fe mz na nb nc b">2</code>是我们想要执行<code class="fe mz na nb nc b">rebase</code>的提交次数。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="ec5c" class="nh md it nc b gy ni nj l nk nl">git rebase -i HEAD~2</span></pre><p id="c145" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将打开一个提示，允许我们在每次提交时指定更改。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="8049" class="nh md it nc b gy ni nj l nk nl">pick e68a142 my frst update<br/>pick 1613f1e my scnd update<br/><br/><em class="nm"># Rebase 9703490..1613f1e onto 9703490 (2 commands)<br/>#<br/># Commands:<br/># p, pick &lt;commit&gt; = use commit<br/># r, reword &lt;commit&gt; = use commit, but edit the commit message<br/># e, edit &lt;commit&gt; = use commit, but stop for amending<br/># s, squash &lt;commit&gt; = use commit, but meld into previous commit<br/># f, fixup &lt;commit&gt; = like "squash", but discard this commit's log message<br/># x, exec &lt;command&gt; = run command (the rest of the line) using shell<br/># b, break = stop here (continue rebase later with 'git rebase --continue')<br/># d, drop &lt;commit&gt; = remove commit<br/># l, label &lt;label&gt; = label current HEAD with a name<br/># t, reset &lt;label&gt; = reset HEAD to a label<br/># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]<br/># .       create a merge commit using the original merge commit's<br/># .       message (or the oneline, if no original merge commit was<br/># .       specified). Use -c &lt;commit&gt; to reword the commit message.<br/>#</em></span></pre><p id="4a59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们想改变提交消息，所以我们用<code class="fe mz na nb nc b">reword</code>(或者简称<code class="fe mz na nb nc b">r</code>)来修改<code class="fe mz na nb nc b">pick</code>。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="0e4b" class="nh md it nc b gy ni nj l nk nl">reword e68a142 my frst update<br/>reword 1613f1e my scnd update</span></pre><p id="8691" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成后，我们保存(<code class="fe mz na nb nc b">:wq</code>)，提示将自动引导我们选择我们想要更改的第一个提交:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="9908" class="nh md it nc b gy ni nj l nk nl">my frst update</span></pre><p id="f62c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以更正消息(<code class="fe mz na nb nc b">x</code>删除一个字符，<code class="fe mz na nb nc b">i</code>切换到插入模式，<code class="fe mz na nb nc b">a</code>追加，总是<code class="fe mz na nb nc b">Esc</code>退出编辑模式)。保存它，提示将再次自动引导我们到下一个我们想要更改的提交消息，等等。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="6a06" class="nh md it nc b gy ni nj l nk nl">my snd update</span></pre><p id="c5d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成后，我们的终端将如下所示:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="4b1f" class="nh md it nc b gy ni nj l nk nl"><strong class="nc iu">❯</strong> git rebase -i HEAD~2</span><span id="ced9" class="nh md it nc b gy nn nj l nk nl">[detached HEAD 1f02610] my first update</span><span id="798d" class="nh md it nc b gy nn nj l nk nl">Date: Thu Apr 16 15:55:09 2020 +0200</span><span id="8f9a" class="nh md it nc b gy nn nj l nk nl">1 file changed, 1 insertion(+), 1 deletion(-)</span><span id="eff3" class="nh md it nc b gy nn nj l nk nl">[detached HEAD 68d3edd] my second update</span><span id="d458" class="nh md it nc b gy nn nj l nk nl">Date: Thu Apr 16 16:00:29 2020 +0200</span><span id="b2be" class="nh md it nc b gy nn nj l nk nl">1 file changed, 4 insertions(+)</span><span id="87f1" class="nh md it nc b gy nn nj l nk nl">Successfully rebased and updated refs/heads/master.</span></pre><p id="1ae3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这一点上，我们的历史被本地重写，但尚未在我们的回购中更新，这就是我们推这些的原因:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="88c2" class="nh md it nc b gy ni nj l nk nl">git push --force</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="47f2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">中止重置基础</h1><p id="b382" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果您在运行上述过程时遇到问题，您可以使用<code class="fe mz na nb nc b">--abort</code>取消重置基础操作。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="4592" class="nh md it nc b gy ni nj l nk nl">git rebase --abort</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="939b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">中止合并</h1><p id="9d99" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">说到中止，也可以在使用相同选项时退出合并:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="e913" class="nh md it nc b gy ni nj l nk nl">git merge --abort</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5ead" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">删除标签</h1><p id="d753" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">当您在<a class="ae ky" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上删除一个发布时，它会删除它，但不会删除相关的标签。通常，如果您使用浏览器返回回购，它仍会显示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/92d527a5f8960874860f3d423425c0d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iRWNQQhtlR3gWy65f0qi0g.png"/></div></div></figure><p id="901b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想要删除这样的标签，您可以借助Git push和选项<code class="fe mz na nb nc b">--delete</code>来完成，后面是要删除的标签的名称。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="14bb" class="nh md it nc b gy ni nj l nk nl">git push --delete origin v0.0.1</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="093b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">摘要</h1><p id="44a9" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">希望这次我能记住这些命令行。如果没有，至少我知道在哪里可以找到他们！</p><p id="5fbb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">呆在家里，注意安全。</p><p id="8669" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大卫</p></div></div>    
</body>
</html>