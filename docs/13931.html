<html>
<head>
<title>Writing Your First Qwik Component</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写您的第一个Qwik组件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/writing-your-first-qwik-component-18a0c50f2687?source=collection_archive---------2-----------------------#2022-10-16">https://betterprogramming.pub/writing-your-first-qwik-component-18a0c50f2687?source=collection_archive---------2-----------------------#2022-10-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3a15" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">探索这个奇妙的框架</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ecbe270f53c2e6d496f32ee070710e29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D72f4mPM3Ed-E-s2l2j1Ww.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">【qwik的图像标志</p></figure><p id="dca2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在过去的几周里，我正在深入研究<a class="ae kv" href="https://qwik.builder.io/" rel="noopener ugc nofollow" target="_blank"> Qwik </a>框架，为我将在<a class="ae kv" href="https://techradarcon.com/schedule/index.html#session-4400" rel="noopener ugc nofollow" target="_blank"> TechRadarCon 2022 </a>上发表的一次演讲做准备。我还用Qwik和QwikCity实现了一个<a class="ae kv" href="https://github.com/gilf/the-agency-qwik" rel="noopener ugc nofollow" target="_blank">完整演示应用</a>，以熟悉框架开发者体验。</p><p id="ce78" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我将向您展示如何开发一个简单的Qwik组件，并向您展示一些在开发组件时需要知道的事情。</p><h1 id="214b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">Qwik游乐场</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mk"><img src="../Images/455c47e11b61d0fd3eeceafabdab1c7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T9SDjOv90td4wsg2P-d69w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Qwik游乐场</p></figure><p id="fce7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在Qwik网站上找到的一个很好的功能是Qwik游乐场。在操场上，您可以使用Qwik语法编写组件。在右窗格中，您可以获得有关组件渲染、错误、符号的信息，甚至可以使用底部的选项选项卡来配置如何渲染。</p><p id="bb60" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以使用playground作为环境来构建我将在本文中实现的组件，或者您可以使用Qwik CLI创建一个新项目并添加该组件。</p><h1 id="3e80" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">构建组件</h1><p id="4932" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在本文中，我们将构建一个简单的可折叠面板组件。该组件将有一个可点击的标题，这将折叠其内容。内容将从外部注入。</p><p id="47a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，就这么办吧:)。</p><p id="a24c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的代码是一个完整的例子，我们将在后面解释:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h2 id="1111" class="ms lt iq bd lu mt mu dn ly mv mw dp mc lf mx my me lj mz na mg ln nb nc mi nd bi translated">我们来分解一下</h2><p id="9bc2" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">Qwik包含了TypeScript，所以我们将首先为组件将接收的props创建一个接口。下面是接口实现:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="afb3" class="ms lt iq nf b gy nj nk l nl nm">interface IProps {<br/>  title: string;<br/>}</span></pre><p id="4611" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们有了接口，让我们使用它，并使用Qwik语法声明组件:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="0710" class="ms lt iq nf b gy nj nk l nl nm">export const CollapsiblePanel = component$(({ title }: IProps) =&gt; {<br/>   ...<br/>});</span></pre><p id="f505" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，您使用了<code class="fe nn no np nf b">component$</code>函数来创建一个Qwik组件。<code class="fe nn no np nf b">$</code>符号用于指示<a class="ae kv" href="https://qwik.builder.io/docs/advanced/optimizer/" rel="noopener ugc nofollow" target="_blank"> Qwik优化器</a>以特定的方式处理该函数(在本例中，作为Qwik组件)。</p><p id="7ea9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nq">注意:我不打算讨论优化器，我鼓励你在这里</em>  <em class="nq">阅读关于它的</em> <a class="ae kv" href="https://qwik.builder.io/docs/advanced/optimizer/" rel="noopener ugc nofollow" target="_blank"> <em class="nq">。</em></a></p><p id="2f09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">既然我们已经声明了组件，让我们来实现它。Qwik使用JSX编码组件的渲染方式。在组件的最后，我们将返回下面的JSX:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="f84d" class="ms lt iq nf b gy nj nk l nl nm">return (<br/>    &lt;div className="collapsible"&gt;<br/>        &lt;header <strong class="nf ir">onClick$</strong>={toggle}&gt;<br/>          {title}<br/>        &lt;/header&gt;<br/>        &lt;section hidden={collapsed.value}&gt;<br/>          <strong class="nf ir">&lt;Slot /&gt;</strong><br/>        &lt;/section&gt;<br/>     &lt;/div&gt;<br/>);</span></pre><p id="8933" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可以看到，我们返回了一个带有一些实现的div。我在代码中标记了两个你应该知道的重要的东西。<code class="fe nn no np nf b">onClick$</code>是在Qwik中将事件与结尾的<code class="fe nn no np nf b">$</code>符号连接起来的方法。同样，<code class="fe nn no np nf b">$</code>符号是为Qwik优化器准备的。<code class="fe nn no np nf b">Slot</code>组件是一个特殊的Qwik组件，支持将内容注入到组件中。我们稍后将讨论商店。</p><p id="ac66" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们添加一些风格。如果你想在你的组件和外部之间创建一个风格屏障，你可以使用<code class="fe nn no np nf b">useStylesScoped$</code>钩子。<code class="fe nn no np nf b">useStylesScoped$</code>钩子接收您想要封装到组件中的样式，并将其施加到组件上。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="31a0" class="ms lt iq nf b gy nj nk l nl nm">useStylesScoped$(`<br/>    .collapsible {<br/>      border: black dashed 1px;<br/>    }</span><span id="9580" class="ms lt iq nf b gy nr nk l nl nm">header {<br/>      background: blue;<br/>      color: white;<br/>      cursor: pointer;<br/>      padding: 2px;<br/>    }<br/>`);</span></pre><p id="3b0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的例子中，我们向容器div和header元素添加了样式。呈现时，Qwik将确保样式只特定于组件；所以，风格不会从中泄露。</p><p id="6e51" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了拥有Qwik可以序列化的内部组件状态，您需要使用<code class="fe nn no np nf b">useSignal</code>钩子。钩子产生一个反馈信号，其内容可以被Qwik跟踪并序列化。在可折叠面板示例中，信号存储组件<code class="fe nn no np nf b">collapsed</code>状态:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="aa20" class="ms lt iq nf b gy nj nk l nl nm">const collapsed = useSignal(false);</span></pre><p id="d12f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后但同样重要的是，我们实现了<code class="fe nn no np nf b">toggle</code>函数，它将用于切换内容:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="7885" class="ms lt iq nf b gy nj nk l nl nm">const toggle = $(() =&gt; {<br/>    collapsed.value = !collapsed.value;<br/>});</span></pre><p id="7dfe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于toggle函数没有内嵌在组件的JSX中，您需要使用<code class="fe nn no np nf b">$(async () =&gt; { … })</code>语法来确保Qwik优化器理解这将是一个在JSX中使用的Qwik组件函数。</p><p id="11a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样。现在你可以玩这个组件了。</p><p id="b9c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下代码是运行可折叠面板的消费组件:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="68b0" class="ms lt iq nf b gy nj nk l nl nm">export default component$(() =&gt; {<br/>  return (<br/>    &lt;CollapsiblePanel title="Click me!"&gt;<br/>      &lt;ul&gt;<br/>        &lt;li&gt;Qwik is awsome&lt;/li&gt;<br/>        &lt;li&gt;Collapsible item&lt;/li&gt;<br/>      &lt;/ul&gt;<br/>    &lt;/CollapsiblePanel&gt;<br/>  );<br/>});</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mk"><img src="../Images/995b42a36c97028dc8ce75399b24898d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HfdKYWDndoQWc-YjcCOoZA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Qwik Playground中的可折叠面板组件</p></figure><h1 id="e56d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">摘要</h1><p id="644c" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在本文中，我们实现了一个Qwik可折叠面板组件。这是一个简单的组件，但是它展示了一些您在编写Qwik组件时需要熟悉的概念。</p><p id="c13b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一如既往，如果你有任何反馈，让我知道。</p></div></div>    
</body>
</html>