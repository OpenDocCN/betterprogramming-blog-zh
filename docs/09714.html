<html>
<head>
<title>Bash vs. Python vs. JavaScript: Which Is Better for Automation?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Bash vs. Python vs. JavaScript:自动化哪个更好？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/bash-vs-python-vs-javascript-which-is-better-for-automation-92a277ef49e?source=collection_archive---------0-----------------------#2021-10-01">https://betterprogramming.pub/bash-vs-python-vs-javascript-which-is-better-for-automation-92a277ef49e?source=collection_archive---------0-----------------------#2021-10-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4eef" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">比较Bash、Python和基于JavaScript的Shell脚本的优缺点</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/028e829ffa4a5e472dc03033df23162a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YPnbg8gfBzGZ08FsC1I1Sg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/users/242387/" rel="noopener ugc nofollow" target="_blank">免费提供——照片</a>来自<a class="ae ky" href="https://www.pixabay.com/photos/731198" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>，经Canva编辑。</p></figure><p id="b232" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Shell脚本是指专门为Bash这样的命令行解释器创建的源文件。程序员经常编写Shell脚本，通过自动化重复执行的任务来提高生产率。例如，他们为文件操作、环境设置、运行测试套件和部署编写自动化脚本。此外，我们可以在虚拟机或CI/CD服务中使用Shell脚本来进行干净且可配置的测试运行或部署。Shell脚本通常运行在命令行解释器上。然而，我们可以用流行的通用编程语言编写Shell脚本，并且仍然称它们为Shell脚本。</p><p id="684a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，您可以使用Python创建现代Shell脚本，并像Bash脚本一样使用Python解释器来执行它们。您可以在Python源文件中生成其他Unix进程，就像使用Bash一样。此外，由于Nodejs运行时，JavaScript是快速编写自动化脚本的一个很好的选择。</p><p id="86d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您确实可以用Bash、Python和JavaScript编写Shell脚本。但是，像软件开发中的任何其他技术一样，这些技术有各种利弊。在这个故事中，我将解释如何使用每种语言来构建Shell脚本，并给出优缺点。此外，我将解释如何为您的下一个Shell脚本选择合适的语言。</p><h1 id="4cb8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用Bash编写Shell脚本</h1><p id="eb1d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">每个流行的操作系统通常通过终端应用程序提供CLI(命令行界面)。终端应用程序通过特定的命令行解释器运行命令，比如Bash、Z shell、C shell和KornShell。我们可以将特定的命令放到一个文件中，并通过首选的命令行解释器来执行它。换句话说，我们可以用Bash、Z shell等编写Shell脚本。Bash是一个广泛使用的命令行解释器，因为它默认包含在几乎所有的Unix或类Unix操作系统中。因此，可以用Bash编写可移植的POSIX脚本。</p><p id="7326" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Bash允许您用最少的语法编写Shell脚本。如果您需要执行几个命令，您只需要将这些命令逐行放入Bash脚本中。Bash还支持一些基本的编程概念，比如if-else语句、循环、算术运算、函数和变量。Bash本身支持流程。换句话说，您可以生成其他作为命令的二进制文件。例如，如果需要执行<code class="fe ms mt mu mv b">ping</code>二进制文件，可以在Bash脚本中编写<code class="fe ms mt mu mv b">ping</code>命令。用Bash脚本显示GUI也有几种方法。</p><p id="b0f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Bash是一种命令语言，而不是通用编程语言。因此，当您的自动化脚本的逻辑增长时，它会变得更加复杂和不可读。此外，Bash总是试图将一切都视为命令，因为它是一种命令语言。请参见以下示例:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="014a" class="na lw it mv b gy nb nc l nd ne">#!/bin/bash<br/>x=10<br/>echo $x # prints 10</span><span id="e799" class="na lw it mv b gy nf nc l nd ne">x = 10 # x: command not found<br/>echo $x</span></pre><p id="256b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Bash没有标准的API，但是它有简单的内置特性(例如:内置的文本操作)。然而，你经常不得不派生进程来处理数据(还记得<a class="ae ky" href="https://www.gnu.org/software/sed/manual/sed.html" rel="noopener ugc nofollow" target="_blank"> sed </a>？).因此，与我们可以用来编写自动化脚本的其他语言相比，Bash的执行速度非常慢。</p><h1 id="c037" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用Python编写Shell脚本</h1><p id="25e5" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Python是Bash编写环境设置、构建和发布脚本的流行替代方法。我看到电子项目将Python用于几个实用程序<a class="ae ky" href="https://github.com/electron/electron/tree/main/script" rel="noopener ugc nofollow" target="_blank">脚本</a>。你不能在Python中直接运行命令，因为它不是一种命令语言。但是使用<a class="ae ky" href="https://docs.python.org/3/library/subprocess.html" rel="noopener ugc nofollow" target="_blank">子流程</a>模块运行命令和捕获输出是小菜一碟。请看下面的例子:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="3a52" class="na lw it mv b gy nb nc l nd ne">#!/usr/bin/python3</span><span id="39c3" class="na lw it mv b gy nf nc l nd ne">import subprocess<br/>o = subprocess.check_output(['node', '--version'], text = True)<br/>print('You are using Node ' + o)</span></pre><p id="00f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的Python脚本打印了计算机的当前Nodejs版本。该脚本相当于下面的Bash脚本。</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="9673" class="na lw it mv b gy nb nc l nd ne">#!/usr/bin/bash</span><span id="dbe6" class="na lw it mv b gy nf nc l nd ne">o=$(node --version)<br/>echo You are using Node $o</span></pre><p id="946d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您可以通过使用Python的内置特性来编写现代的富Shell脚本。但是，Python解释器不像Bash那样支持流程执行。因此，如果我们需要进一步简化Python脚本，让它看起来更像Bash，我们必须使用像<a class="ae ky" href="https://github.com/lamerman/shellpy" rel="noopener ugc nofollow" target="_blank"> Shellpy </a>这样的工具。看看下面的Shellpy脚本，它完成了前面脚本的工作:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="d2c8" class="na lw it mv b gy nb nc l nd ne">#!/usr/local/bin/shellpy3</span><span id="6028" class="na lw it mv b gy nf nc l nd ne">o = `node --version<br/>print('You are using Node ' + o.stdout)</span></pre><p id="5c3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python是一种对开发者非常友好的语言。此外，它还附带了许多有用的内置库。Python解释器预装在几乎所有类似Unix的操作系统中。因此，Python也是编写可移植自动化脚本的一个很好的选择。</p><p id="d216" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是与其他语言相比，Python的程序执行时间较慢。当你使用一些库的时候，Python的执行速度甚至比Bash还慢。像Shellpy和<a class="ae ky" href="https://github.com/tomerfiliba/plumbum" rel="noopener ugc nofollow" target="_blank"> Plumbum </a>这样的工具提供了方便的API来处理进程和命令。但是，我们仍然需要设置和编写一些额外的代码。</p><h1 id="31fb" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用JavaScript编写Shell脚本</h1><p id="5fbc" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">众所周知，JavaScript最初是作为web浏览器的一种脚本语言出现的，目的是让web页面变得更加动态。Nodejs项目将JavaScript从浏览器沙箱带到了操作系统级别。Nodejs提供了<a class="ae ky" href="https://nodejs.org/api/child_process.html" rel="noopener ugc nofollow" target="_blank">子流程API </a>来产生新流程。此外，Nodejs引入了几个跨平台API来处理文件处理、网络和控制台。现在，JavaScript和Nodejs都包含了制作现代自动化脚本所需的所有特性。</p><p id="9c43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Nodejs本身并不支持Python这样的二进制流程。但是，您可以通过子进程API运行其他二进制可执行文件。请看下面展示处理器架构的示例:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="9a6d" class="na lw it mv b gy nb nc l nd ne">#!/usr/bin/node<br/>let exec = require('child_process').exec;</span><span id="d6ad" class="na lw it mv b gy nf nc l nd ne">exec('arch', function(error, stdout, stderr) {<br/>    console.log(`Your computer's CPU architecture is ${stdout}`);<br/>});</span></pre><p id="145d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于回调函数，上面的Nodejs脚本看起来不像Shell脚本。因此，您必须做一些额外的工作，使它看起来像一个简单的Shell脚本。谷歌的<a class="ae ky" href="https://github.com/google/zx" rel="noopener ugc nofollow" target="_blank"> zx </a>项目最近被引入，用基于JavaScript的Shell脚本来解决这个问题。我们确实可以简化上面代码的语法，用zx编写下面的脚本。</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="d74d" class="na lw it mv b gy nb nc l nd ne">#!/usr/bin/env zx<br/>$.verbose = false</span><span id="f736" class="na lw it mv b gy nf nc l nd ne">let arch = await $`arch`<br/>console.log(`Your computer's CPU architecture is ${arch}`)</span></pre><p id="7406" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">zx工具提供了编写Shell脚本所需的几乎所有特性。JavaScript的原生JSON支持是制作丰富的现代Shell脚本的一个很好的特性。但是，默认情况下，每个CI/CD引擎和流行的Unix或类Unix操作系统都不提供Nodejs运行时和包管理器。</p><h1 id="10fd" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">哪个更好？</h1><p id="5a64" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">有许多通用编程语言。即使我们根据受欢迎程度对这些语言进行排名，我们也不能根据总体特征进行排名。如果有所谓的最好的编程语言，程序员总是使用一种编程语言来构建一切。但是，我们可以根据自己的需求选择合适的编程语言。</p><p id="df00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，您可以根据以下事实和条件选择Bash、Python或JavaScript来编写Shell脚本。</p><ul class=""><li id="2eea" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">如果您需要经常生成进程，并且需要为Unix或类似Unix的操作系统编写一个小型的可移植Shell脚本，Bash无疑是一个不错的选择。例如，我写了一个Bash <a class="ae ky" href="https://github.com/neutralinojs/neutralinojs/blob/main/build_linux.sh" rel="noopener ugc nofollow" target="_blank">脚本</a>来构建基于用户输入架构的开源项目的二进制文件。</li><li id="a0ed" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">如果需要编写跨平台的Shell脚本，在执行一些命令的同时处理一些数据，可以选择Python。例如，电子项目有一些Python <a class="ae ky" href="https://github.com/electron/electron/tree/main/script/release/uploaders" rel="noopener ugc nofollow" target="_blank">脚本</a>来处理和上传文件。然而，不要期望基于Python的Shell脚本有这么高的性能。</li><li id="81ea" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">JavaScript也非常适合Python适用的场景。与Python相比，JavaScript在编写Shell脚本方面有一些额外的优势。JavaScript很快，原生支持JSON，并且有令人印象深刻的内置特性。我从React Native repo的<a class="ae ky" href="https://github.com/facebook/react-native/tree/main/scripts" rel="noopener ugc nofollow" target="_blank">脚本</a>目录中找到了一些基于Javascript的Shell脚本。</li></ul></div></div>    
</body>
</html>