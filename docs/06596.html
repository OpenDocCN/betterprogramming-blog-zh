<html>
<head>
<title>Why You Should Stop Using Flask and Start Using FastAPI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么应该停止使用Flask而开始使用FastAPI</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-you-should-stop-using-flask-and-start-using-fastapi-1a091bfc2fbf?source=collection_archive---------3-----------------------#2020-10-16">https://betterprogramming.pub/why-you-should-stop-using-flask-and-start-using-fastapi-1a091bfc2fbf?source=collection_archive---------3-----------------------#2020-10-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="114d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我发誓你不会后悔的</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/98b71a1bb0d8f087ba0bc17e87c7d6ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VSwsodTe7x8YYt5o"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@pankajpatel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">潘卡杰·帕特尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="f648" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当谈到机器学习产品时，通常我们会将模型包装到rest API中。因为制作机器学习API并不真的需要复杂的东西——只需要<code class="fe lv lw lx ly b">predict()</code>函数——我们通常只用一个简单的框架。而我们通常使用的框架是Flask。</p><p id="5706" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要误会:Flask是好的，但是已经过去了。Flask被广泛使用的一个原因是，在过去，没有多少人将模型部署为实时生产API。对于一些人来说，Flask已经足够好了，因为它很流行，很简洁，而且是用Python编写的。</p><p id="b543" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着时间的推移，机器学习作为一个领域的产生已经成熟。然而，随着这个领域的成熟，原本只是好看的特性已经变得必不可少。而这是Flask没有的特性，所以有时候我们不得不使用第三方依赖，有时候文档也不太清楚。</p><p id="8837" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这促使我寻找其他替代方法来创建实时生产API。最终我找到了一个叫FastAPI的web框架。FastAPI对于Python来说是一个相对较新的web框架，但是功能强大，使用起来也很愉快。以下是一些你应该开始使用FastAPI的理由。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="878c" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">证明文件</h1><p id="0df5" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">FastAPI有非常广泛的文档和丰富的例子，这使得事情变得更容易。如果你需要寻找与FastAPI有关的东西，你通常不需要去别的地方找。</p><p id="c801" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，FastAPI将从我们正在运行的程序中自动生成交互式API文档，因此我们不需要编写我们自己创建的API文档。</p><p id="f7c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">众所周知，编写API文档是很烦人的，不仅因为有很多细节要处理，还因为没有什么比最终用户实现但不符合文档更令人沮丧的了。所以API文档的自动生成很有帮助。</p><p id="45d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是API文档的显示示例(由<a class="ae ky" href="https://github.com/swagger-api/swagger-ui" rel="noopener ugc nofollow" target="_blank"> Swagger UI </a>提供):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/39f3e175a10af1ca22002493565226f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VV0Dr0fNMljmRW_L.png"/></div></div></figure><p id="f468" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还提供了替代的自动文件(由<a class="ae ky" href="https://github.com/Rebilly/ReDoc" rel="noopener ugc nofollow" target="_blank"> ReDoc </a>提供)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/9b1a1dc4b65f70415070869fb568a419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gUfWfIolmCLVplIf.png"/></div></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="d6c5" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">表演</h1><p id="56bb" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">顾名思义，这确实是一个FastAPI。根据来自<a class="ae ky" href="https://www.techempower.com/benchmarks/#section=test&amp;runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&amp;hw=ph&amp;test=query&amp;l=zijzen-7" rel="noopener ugc nofollow" target="_blank"> TechEmpower benchmarks </a>的数据，FastAPI在性能方面击败了所有框架，而最常用的框架，如Flask和Django，则落后了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/8f10b9bdffe05f222420e13c19ac4ea0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VU3prvklaeTbZvDg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">框架性能—T <a class="ae ky" href="https://www.techempower.com/benchmarks/#section=test&amp;runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&amp;hw=ph&amp;test=query&amp;l=zijzen-7" rel="noopener ugc nofollow" target="_blank"> echEmpower </a></p></figure><p id="624e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是啊，非常快。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="f4ff" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">异步的</h1><p id="53d9" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">Flask的缺点之一是缺乏异步I/O支持。异步对于HTTP端点非常重要，因为HTTP端点往往需要等待大量的I/O和网络聊天，这使得它成为使用异步的并发的一个很好的候选对象。</p><p id="6d90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与Flask不同，FastAPI使用<code class="fe lv lw lx ly b">async</code> / <code class="fe lv lw lx ly b">await</code> Python关键字支持开箱即用的异步代码。FastAPI默认支持异步，这意味着我们不需要使用第三方框架来做异步。</p><p id="6736" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你所要做的就是用<code class="fe lv lw lx ly b">async</code>关键字声明端点，就像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">异步代码</p></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="d278" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">完全</h1><p id="dbee" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">Flask的另一个缺点是提供的功能不完整，所以我们经常要安装互不合作的社区的第三方扩展。通常，我们必须手动添加定制代码。</p><p id="dd26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在使用FastAPI的时候没有这种感觉，因为所有东西都是默认安装的。但是如果你不同意我的观点，可以分享一下你的经验。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="c4ca" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">确认</h1><p id="452b" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">除了已经提到的特性，还有另一个很好的特性，即验证。为了定义创建的模式，它使用了<a class="ae ky" href="https://pydantic-docs.helpmanual.io/" rel="noopener ugc nofollow" target="_blank"> pydantic </a>，这是另一个用于数据验证的很棒的Python库。它的目的是验证进入FastAPI的输入。如果输入/请求不正确，则将返回相应的错误代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://gist.github.com/fahmisalman/ec5b6e6a6e20df68e17a365c9428a66d" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/fahmisalman/EC 5b 6 e 6 e 20 df 68 e 17 a 365 c 9428 a 66d</a></p></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="9fb0" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="ff98" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">总之，FastAPI是一个快速的web框架，支持异步代码。此外，它还配有非常完整的文档和集成的验证系统，使其更易于使用。</p><p id="ca8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你对使用FastAPI感兴趣吗？如果你想开始使用FastAPI，这里有一些很好的资源。这里有一些你可以探索。</p><div class="nh ni gp gr nj nk"><a href="https://fastapi.tiangolo.com/tutorial/first-steps/" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd iu gy z fp np fr fs nq fu fw is bi translated">第一步- FastAPI</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">最简单的FastAPI文件可能是这样的:将它复制到main.py文件中</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">fastapi.tiangolo.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny ks nk"/></div></div></a></div><div class="nh ni gp gr nj nk"><a href="https://medium.com/@tiangolo/introducing-fastapi-fdc1206d453f" rel="noopener follow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd iu gy z fp np fr fs nq fu fw is bi translated">FastAPI简介</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">FastAPI是一个现代、快速(高性能)的web框架，用于基于标准Python使用Python 3.6+构建APIs</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">medium.com</p></div></div><div class="nt l"><div class="nz l nv nw nx nt ny ks nk"/></div></div></a></div></div></div>    
</body>
</html>