<html>
<head>
<title>How to Keep Your Dependencies Secure and Up to Date</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何保持您的依赖关系安全和最新</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-keep-your-dependencies-secure-and-up-to-date-92578c7f3c9c?source=collection_archive---------17-----------------------#2020-03-30">https://betterprogramming.pub/how-to-keep-your-dependencies-secure-and-up-to-date-92578c7f3c9c?source=collection_archive---------17-----------------------#2020-03-30</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="7b81" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">使用Dependabot自动更新您的依赖关系</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/57d984f14a0163697c68d08189130ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dJ1mhPOPA1MVEnUfpaCGjA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@lenin33?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">列宁·艾斯特拉达</a>在<a class="ae kz" href="https://unsplash.com/s/photos/robot?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="8f1c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">几周前，我在GitHub上搜索关于<a class="ae kz" href="https://medium.com/better-programming/do-you-use-the-most-crucial-principle-of-object-oriented-design-9045dbd1321e" rel="noopener">开闭原理</a>的最新文章的例子。当我浏览<a class="ae kz" href="https://github.com/dotnet/core" rel="noopener ugc nofollow" target="_blank">的时候。NET核心库</a>，看到一个我不认识的文件夹。</p><p id="21b2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这个文件夹<code class="fe lw lx ly lz b">.dependabot</code>包含一个文件<code class="fe lw lx ly lz b">config.yml</code>。我发现这是GitHub的一个名为<a class="ae kz" href="https://dependabot.com/blog/hello-github/" rel="noopener ugc nofollow" target="_blank">dependent bot</a>的新服务的配置文件。</p><p id="44a0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我不知道这项服务。</p><p id="a220" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">经过一番调查，我发现Dependabot是一种扫描您的存储库的依赖关系的服务。扫描后，Dependabot会验证您的外部依赖项是否是最新的。</p><p id="ea1e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这项服务的真正魅力在于:</p><p id="c29f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><em class="ma">dependent bot自动创建一个pull请求来更新依赖关系。</em></p><p id="4811" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我开始为我的大部分存储库使用Dependabot。在本文中，我将向您展示如何使用和配置Dependabot。</p></div><div class="ab cl mb mc hy md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="in io ip iq ir"><h1 id="2048" class="mi mj iu bd mk ml mm mn mo mp mq mr ms ka mt kb mu kd mv ke mw kg mx kh my mz bi translated">使用依赖机器人</h1><p id="d100" class="pw-post-body-paragraph la lb iu lc b ld na jv lf lg nb jy li lj nc ll lm ln nd lp lq lr ne lt lu lv in bi translated">如果您在GitHub上有一个公共存储库，您可能会看到下面的安全警告。GitHub会自动扫描所有公共存储库，如果检测到安全漏洞，就会发出警报。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nf"><img src="../Images/c88fa52698526f5927b1149f1ef3eef2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0JG50XF4d8nYeLImgp3eoQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">来自Github.com的安全警报</p></figure><p id="5640" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你想让GitHub扫描你的私有库，你必须通过启用安全通知来选择加入。GitHub可以检测到的漏洞来自于<a class="ae kz" href="https://github.com/advisories" rel="noopener ugc nofollow" target="_blank"> GitHub顾问数据库</a>。</p><p id="5907" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">除了警报，GitHub还描述了如何修复它。</p><p id="b54d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Dependabot更进一步，自动为您的存储库创建一个Pull Request (PR)。这个PR解决了安全漏洞。</p><h2 id="5e20" class="ng mj iu bd mk nh ni dn mo nj nk dp ms lj nl nm mu ln nn no mw lr np nq my nr bi translated">从依赖机器人开始</h2><p id="4eca" class="pw-post-body-paragraph la lb iu lc b ld na jv lf lg nb jy li lj nc ll lm ln nd lp lq lr ne lt lu lv in bi translated">想要使用Dependabot，首先需要<a class="ae kz" href="https://app.dependabot.com/auth/sign-up" rel="noopener ugc nofollow" target="_blank">注册</a>。由于GitHub收购了Dependabot，所以是免费的。</p><p id="177f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">注册后，你必须给依赖机器人访问你的仓库。您可以通过Dependabot用户界面或者通过向您的存储库添加一个<code class="fe lw lx ly lz b">config.yml</code>文件来实现这一点。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ns"><img src="../Images/237f77600bdb61ae32a3c42564879388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d3x8R3Zqgrj2LlvJYuzZXQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">让Dependabot访问您的存储库</p></figure><h2 id="5fad" class="ng mj iu bd mk nh ni dn mo nj nk dp ms lj nl nm mu ln nn no mw lr np nq my nr bi translated">配置从属机器人</h2><p id="0a4f" class="pw-post-body-paragraph la lb iu lc b ld na jv lf lg nb jy li lj nc ll lm ln nd lp lq lr ne lt lu lv in bi translated">您可以通过将一个<code class="fe lw lx ly lz b">config.yml</code>文件存储在您的存储库根目录下的文件夹<code class="fe lw lx ly lz b">.dependabot</code>中来配置Dependabot。</p><h2 id="de2c" class="ng mj iu bd mk nh ni dn mo nj nk dp ms lj nl nm mu ln nn no mw lr np nq my nr bi translated">必需选项</h2><p id="2693" class="pw-post-body-paragraph la lb iu lc b ld na jv lf lg nb jy li lj nc ll lm ln nd lp lq lr ne lt lu lv in bi translated">以下配置文件来自我的一个存储库。它只包含必需的选项。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nt nu l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">config.yml</p></figure><p id="5601" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这个配置文件只使用必要的Dependabot选项。因为我在这个存储库中有许多项目，所以我指定了两个更新配置。</p><ul class=""><li id="670b" class="nv nw iu lc b ld le lg lh lj nx ln ny lr nz lv oa ob oc od bi translated"><code class="fe lw lx ly lz b">package_manager</code>指定您使用哪个包管理器。Dependabot支持很多不同的包管理器，比如JavaScript、<a class="ae kz" href="https://bundler.io/" rel="noopener ugc nofollow" target="_blank"> Bundler </a>、<a class="ae kz" href="https://getcomposer.org/" rel="noopener ugc nofollow" target="_blank"> Composer </a>、Python、<a class="ae kz" href="https://maven.apache.org/" rel="noopener ugc nofollow" target="_blank"> Maven </a>等。完整列表见<a class="ae kz" href="https://dependabot.com/docs/config-file/" rel="noopener ugc nofollow" target="_blank">文档</a>。</li><li id="5b37" class="nv nw iu lc b ld oe lg of lj og ln oh lr oi lv oa ob oc od bi translated"><code class="fe lw lx ly lz b">directory</code>指定了您的包配置的位置。通常，这是您的存储库的根目录。如果您在一个存储库中有许多项目，就像我在上面的例子中一样，您可以指定一个子文件夹。</li><li id="7d17" class="nv nw iu lc b ld oe lg of lj og ln oh lr oi lv oa ob oc od bi translated">在<code class="fe lw lx ly lz b">update_schedule</code>中，您可以指定Dependabot检查更新的频率。住的意思是尽快。其他选项包括每日、每周和每月。</li></ul><p id="3a86" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">dependent bot<em class="ma">总是</em>尽快创建安全更新。</p><h2 id="c002" class="ng mj iu bd mk nh ni dn mo nj nk dp ms lj nl nm mu ln nn no mw lr np nq my nr bi translated">可选选项</h2><p id="3a62" class="pw-post-body-paragraph la lb iu lc b ld na jv lf lg nb jy li lj nc ll lm ln nd lp lq lr ne lt lu lv in bi translated">Dependabot有一些额外的选项，用于更改分支、提交消息和pull请求的受托人。完整列表见下文。</p><ul class=""><li id="ae98" class="nv nw iu lc b ld le lg lh lj nx ln ny lr nz lv oa ob oc od bi translated"><code class="fe lw lx ly lz b">target_branch </code> —创建拉取请求的分支。</li><li id="f90d" class="nv nw iu lc b ld oe lg of lj og ln oh lr oi lv oa ob oc od bi translated"><code class="fe lw lx ly lz b">default_reviewers </code> —要在拉式请求上设置的审阅者。</li><li id="0596" class="nv nw iu lc b ld oe lg of lj og ln oh lr oi lv oa ob oc od bi translated"><code class="fe lw lx ly lz b">default_assignees</code> —放置在拉取请求上的工作负责人。</li><li id="3b74" class="nv nw iu lc b ld oe lg of lj og ln oh lr oi lv oa ob oc od bi translated"><code class="fe lw lx ly lz b">default_labels</code> —放在拉取请求上的标签。</li><li id="ed7f" class="nv nw iu lc b ld oe lg of lj og ln oh lr oi lv oa ob oc od bi translated"><code class="fe lw lx ly lz b">default_milestone</code> —在拉请求上设置的里程碑。</li><li id="9799" class="nv nw iu lc b ld oe lg of lj og ln oh lr oi lv oa ob oc od bi translated"><code class="fe lw lx ly lz b">allowed_updates</code> —限制允许哪些更新。</li><li id="d93c" class="nv nw iu lc b ld oe lg of lj og ln oh lr oi lv oa ob oc od bi translated"><code class="fe lw lx ly lz b">ignored_updates</code> —忽略特定的依赖关系或版本。</li><li id="0b61" class="nv nw iu lc b ld oe lg of lj og ln oh lr oi lv oa ob oc od bi translated"><code class="fe lw lx ly lz b">automerged_updates</code>—dependent bot应自动合并的更新。</li><li id="f0c0" class="nv nw iu lc b ld oe lg of lj og ln oh lr oi lv oa ob oc od bi translated"><code class="fe lw lx ly lz b">version_requirement_updates</code> —如何更新您的应用程序版本。</li><li id="01d9" class="nv nw iu lc b ld oe lg of lj og ln oh lr oi lv oa ob oc od bi translated"><code class="fe lw lx ly lz b">commit_message</code> —添加到提交消息中的内容。</li></ul><h2 id="ce6f" class="ng mj iu bd mk nh ni dn mo nj nk dp ms lj nl nm mu ln nn no mw lr np nq my nr bi translated">验证配置文件</h2><p id="420d" class="pw-post-body-paragraph la lb iu lc b ld na jv lf lg nb jy li lj nc ll lm ln nd lp lq lr ne lt lu lv in bi translated">在Dependabot网站上有一个<a class="ae kz" href="https://dependabot.com/docs/config-file/validator/" rel="noopener ugc nofollow" target="_blank">页面</a>，可以验证你的配置文件。确保您的配置文件是正确的。</p></div><div class="ab cl mb mc hy md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="in io ip iq ir"><h1 id="e599" class="mi mj iu bd mk ml mm mn mo mp mq mr ms ka mt kb mu kd mv ke mw kg mx kh my mz bi translated">结论</h1><p id="6f86" class="pw-post-body-paragraph la lb iu lc b ld na jv lf lg nb jy li lj nc ll lm ln nd lp lq lr ne lt lu lv in bi translated">我已经用了几个星期了。我从“实时”更新时间表开始，但由于“实时”产生了太多的警报，所以改为“每周”。</p><p id="619d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我现在每周合并一次来自Dependabot的请求。</p><p id="ef8b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您必须保持您的依赖关系是最新的。如果不这样做，您使用的版本和最新版本之间的差异就会增加。这种不断增加的差异使得更新依赖关系变得更加困难。</p><p id="aaa2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">感谢您的阅读。</p></div></div>    
</body>
</html>