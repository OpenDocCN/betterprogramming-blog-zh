<html>
<head>
<title>Create the Classic Snake Game With Processing Library and Java</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用处理库和Java创建经典的贪吃蛇游戏</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-the-classic-snake-game-with-processing-and-java-18f9db48fac4?source=collection_archive---------7-----------------------#2022-05-01">https://betterprogramming.pub/create-the-classic-snake-game-with-processing-and-java-18f9db48fac4?source=collection_archive---------7-----------------------#2022-05-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b3d3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用Java重新创建游戏</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/a3fe8eb5d12eee9b0028be5d136cf136.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*BBfHX8RM0owePoqg"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">展示文章中贪吃蛇游戏的GIF。</p></figure><p id="20df" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您是否了解Java或处理的基础知识，并希望开始开发自己的游戏，或者只是重现经典游戏之一？本文描述了使用Processing构建经典贪吃蛇游戏的过程。</p><h1 id="c3c1" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">1什么是加工？</h1><p id="9dc6" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">维基百科(2022)将处理描述为图形库和集成开发环境(IDE)。该库建立在Java之上，提供了额外的类和简化(维基百科，2022)。要下载并安装处理程序，请转到<a class="ae mk" href="https://processing.org/download" rel="noopener ugc nofollow" target="_blank">processing.org/download</a>并下载与首选平台匹配的可安装程序。</p><h2 id="3be0" class="ml lo iq bd lp mm mn dn lt mo mp dp lx la mq mr lz le ms mt mb li mu mv md mw bi translated">1.1应用流程</h2><p id="fda5" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">处理提供了许多方法来控制应用程序的流程，例如，控制关键事件、初始化或连续行为。开始处理的两个重要方法是方法<code class="fe mx my mz na b">setup()</code>和<code class="fe mx my mz na b">draw()</code>。另一种内置方法，文章后面介绍的是<code class="fe mx my mz na b">keyPressed()</code>。这三种方法的行为是:</p><ul class=""><li id="5fff" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm ng nh ni nj bi translated"><code class="fe mx my mz na b">setup()</code>在应用程序启动时被调用一次(处理，2022a)。</li><li id="0fb9" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm ng nh ni nj bi translated"><code class="fe mx my mz na b">draw()</code>永远执行，调用次数与帧率匹配(处理，2022b)。</li><li id="4dbd" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm ng nh ni nj bi translated"><code class="fe mx my mz na b">keyPressed()</code>在按键被按下时执行，并且该按键被存储在名为<code class="fe mx my mz na b">key</code>的变量中(处理，2022c)。</li></ul><h2 id="24b1" class="ml lo iq bd lp mm mn dn lt mo mp dp lx la mq mr lz le ms mt mb li mu mv md mw bi translated">1.2图形界面</h2><p id="dea4" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">处理还提供了一个图形界面，其中点(x，y) = (0，0)位于左上角(见图1)。在Processing中绘制形状非常简单，因为该库提供了2D原语方法，如<code class="fe mx my mz na b">rect(x, y, w, h)</code>、<code class="fe mx my mz na b">circle(x, y, r)</code>或<code class="fe mx my mz na b">line(x1, y1, x2, y2)</code>。在processing.org/reference找到更多2D原始方法。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/512f7d441556ccb21462099fa479b7f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:498/format:webp/1*-WmEnrcZqEueHi3NIYve8w.png"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated"><strong class="bd nq">图1: </strong>显示加工图形界面中水平轴(x)和垂直轴(y)的方向。</p></figure><h1 id="60d3" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">2构建游戏</h1><p id="b32a" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">和每个项目一样，建立几个需求来设定方向和概述必要的特性是一个好主意。因此，第2.1节描述了游戏的要求，随后是描述代码的部分。</p><h2 id="2cf9" class="ml lo iq bd lp mm mn dn lt mo mp dp lx la mq mr lz le ms mt mb li mu mv md mw bi translated">2.1要求</h2><p id="8082" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">游戏的要求是:</p><ol class=""><li id="e36e" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm nr nh ni nj bi translated">使用矩形绘制蛇和目标。</li><li id="5289" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">蛇的第一个矩形表示蛇的头部，只有头部可以触发与目标和尾巴的碰撞事件。</li><li id="b8fd" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">当蛇到达屏幕的边界时，它被传送到对面的位置。</li><li id="d329" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">当目标与蛇头碰撞时，它会获得一个新的随机位置。</li><li id="a29d" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">如果蛇头和蛇尾相撞，游戏结束。</li><li id="2f13" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">每当蛇与目标发生碰撞时，分数就会增加。</li></ol><h2 id="7eb1" class="ml lo iq bd lp mm mn dn lt mo mp dp lx la mq mr lz le ms mt mb li mu mv md mw bi translated">2.2游戏编码</h2><p id="ee39" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">为了保持文章简单，下面的部分被分成编码游戏的不同步骤。</p><p id="a0bd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 2.2.1 </strong> <strong class="kt ir">添加属性</strong></p><p id="c70a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第一步是添加可以存储大小、位置等信息的全局属性。要添加的前两个属性是<code class="fe mx my mz na b">gameover</code>和<code class="fe mx my mz na b">s</code>(参见图2)。布尔变量<code class="fe mx my mz na b">gameover</code>用于检查玩家是否输掉了游戏，浮动变量<code class="fe mx my mz na b">s</code>是一个通用大小，指定了代表目标和蛇的矩形的大小。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated"><strong class="ak">图2: </strong>显示游戏的前两个属性。</p></figure><p id="428e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，当常规属性都准备好了，是时候为蛇添加属性了。蛇将需要一个属性来指定代表蛇的尾巴和头部的每个矩形的位置。它还需要一个属性来指定蛇的方向。为了存储蛇的矩形的位置，添加一个类型为<code class="fe mx my mz na b">ArrayList&lt;PVector&gt;</code>的属性<code class="fe mx my mz na b">snakePositions</code>，为了存储关于蛇的方向的信息，添加一个类型为<code class="fe mx my mz na b">PVector</code>的属性<code class="fe mx my mz na b">snakeDirection</code>(参见图3)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated"><strong class="ak">图3: </strong>显示了蛇的属性。</p></figure><p id="2a47" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">游戏要求的最后一个属性是一个指定目标位置的变量。添加一个类型为<code class="fe mx my mz na b">PVector</code>的属性<code class="fe mx my mz na b">objPosition</code>(参见图4)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated"><strong class="ak">图4: </strong>显示物镜的属性。</p></figure><p id="a5e2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 2.2.2属性数据类型</strong></p><p id="9374" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第2.2.1节，添加属性，介绍了一些初学者可能不熟悉的数据类型。<code class="fe mx my mz na b">boolean</code>和<code class="fe mx my mz na b">float</code>是原始数据类型，<code class="fe mx my mz na b">boolean</code>指的是可以是<em class="nu">真</em>或<em class="nu">假</em>的值，<code class="fe mx my mz na b">float</code>指的是与整数不同的可以指定整数和小数部分的数字。<code class="fe mx my mz na b">ArrayList&lt;T&gt;</code>和<code class="fe mx my mz na b">PVector</code>是复合数据类型，<code class="fe mx my mz na b">ArrayList&lt;T&gt;</code>是指可以动态调整大小的其他数据类型的列表，<code class="fe mx my mz na b">PVector</code>是指二维或三维向量。</p><p id="35cd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 2.2.3添加自定义帮助器方法</strong></p><p id="10bf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下一节将介绍几个辅助方法，用于帮助简化游戏的解释。第一种方法用于检查两点的位置是否重叠(见图5)。</p><p id="8602" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">该方法的程序可定义如下:</strong></p><ol class=""><li id="4e59" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm nr nh ni nj bi translated">期望两个向量指定一个矩形的左上角。</li><li id="6ace" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">使用矩形的大小(<code class="fe mx my mz na b">s</code>)找到矩形的中心位置。</li><li id="307b" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">如果中心位置之间的距离小于大小，则返回true。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated"><strong class="ak">图5: </strong>显示了一个方法的实现，如果两个点重叠，则返回true。</p></figure><p id="44c3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下一个方法是给一个向量一个随机的位置(见图6)。</p><p id="849a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">该方法的步骤如下:</strong></p><ol class=""><li id="dec6" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm nr nh ni nj bi translated">将水平属性(<code class="fe mx my mz na b">x</code>)设置为<code class="fe mx my mz na b">a</code>和<code class="fe mx my mz na b">b</code>内的随机浮点数。</li><li id="2fd5" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">将垂直属性(<code class="fe mx my mz na b">y</code>)设置为<code class="fe mx my mz na b">a</code>和<code class="fe mx my mz na b">b</code>内的随机浮点数。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated"><strong class="ak">图6: </strong>展示了一种在给定边界内给一个向量一个随机位置的方法。</p></figure><p id="56dd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后两个辅助方法是<code class="fe mx my mz na b">reset()</code>和<code class="fe mx my mz na b">endgame()</code>。<code class="fe mx my mz na b">reset()</code>用于将游戏属性设置为与应用程序启动时相同的状态，而<code class="fe mx my mz na b">endgame()</code>用于启动结束游戏功能。</p><p id="bc61" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"/><code class="fe mx my mz na b"><strong class="kt ir">endgame()</strong></code><strong class="kt ir">的程序是:</strong></p><ol class=""><li id="2c52" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm nr nh ni nj bi translated">将<code class="fe mx my mz na b">gameover</code>属性设置为<code class="fe mx my mz na b">true</code>，表示游戏结束。</li><li id="6209" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">用黑色背景覆盖当前内容。</li><li id="0e09" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">重置填充颜色，将文本颜色设置为白色。</li><li id="c2bd" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">显示一段文字“Gameover”。</li></ol><p id="9ef8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"/><code class="fe mx my mz na b"><strong class="kt ir">reset()</strong></code><strong class="kt ir">的程序为:</strong></p><ol class=""><li id="68a1" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm nr nh ni nj bi translated">将<code class="fe mx my mz na b">gameover</code>属性设置为<code class="fe mx my mz na b">true</code>,表示游戏<em class="nu">没有</em>结束。</li><li id="ba65" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">从<code class="fe mx my mz na b">snakePositions</code>属性中删除所有保存的位置。</li><li id="f0c2" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">用屏幕中心的位置定义一个向量。</li><li id="c37e" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">将矢量添加到<code class="fe mx my mz na b">snakePositions</code>属性来定义蛇的头部。</li><li id="bd06" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">将物镜的位置设置为屏幕边框内的随机位置。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated"><strong class="ak">图7: </strong>显示了一个用于结束游戏的方法和另一个用于重置游戏属性的方法的实现。</p></figure><p id="cb2a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 2.2.4添加内置方法:设置</strong></p><p id="dc50" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">游戏要求的下一个方法是内置的setup方法，在应用程序启动时调用一次。</p><p id="d682" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">方法的程序如下:</strong></p><ol class=""><li id="6e7e" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm nr nh ni nj bi translated">将屏幕尺寸设置为250x250像素。</li><li id="d631" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">将帧速率设置为每秒25帧。第二。</li><li id="3111" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">使用辅助方法重置游戏的属性:重置</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated"><strong class="ak">图8: </strong>显示了内置方法:setup的实现。</p></figure><p id="0f32" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 2.2.5添加内置方法:绘制</strong></p><p id="8b08" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">内置方法<code class="fe mx my mz na b">draw()</code>一直被调用，直到应用程序停止。<code class="fe mx my mz na b">draw()</code>方法中的代码比本文中介绍的其他方法稍微复杂一点，因此在下面的部分中代码被分成几个部分。</p><p id="dd52" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">图9所示代码的过程可描述如下:</strong></p><ol class=""><li id="2ae4" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm nr nh ni nj bi translated">将屏幕背景设置为黑色。</li><li id="5629" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">如果属性<code class="fe mx my mz na b">gameover</code>为真，表示游戏结束，等待5秒，重置游戏。</li><li id="7f2e" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">将填充颜色设置为白色。</li><li id="5286" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">在(x，y) = (10，20)处显示文本“分数:{x}”。</li><li id="3c78" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">将填充颜色设置为黑色，将描边颜色设置为白色。</li><li id="e1d9" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">画出目标。</li><li id="2209" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">以相反的顺序循环<code class="fe mx my mz na b">snakePositions</code>属性。</li><li id="eb0b" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">获取当前位置。</li><li id="44b6" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">检查当前索引是否等于头部的索引，以定义蛇头的行为，并添加一个用于定义蛇尾行为的else语句。</li><li id="2442" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">在当前位置画一个代表蛇的尾巴或头部的矩形。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated"><strong class="ak">图9: </strong>显示内置方法的实现:draw。</p></figure><p id="42fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为什么把<code class="fe mx my mz na b">snakePositions</code>从结尾循环到开头？原因和蛇的运动有关。每当蛇头向某个方向移动一次，蛇尾的每个矩形也必须移动一次。</p><p id="30b9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">因此，代码设计如下:</strong></p><ol class=""><li id="f791" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm nr nh ni nj bi translated">首先选择最后一个元素，并将其位置设置为倒数第二个元素的位置。</li><li id="6346" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">选择倒数第二个元素，并将其位置设置为倒数第三个元素的位置。</li><li id="0572" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">继续选择一个元素，并将其位置设置为它前面的元素的位置，直到到达第一个元素。</li><li id="b035" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">当到达第一个元素时，将该元素的位置向属性<code class="fe mx my mz na b">snakeDirection</code>中指定的方向移动一次。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated"><strong class="ak">图10: </strong>显示蛇的运动的实现。</p></figure><p id="ac04" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mx my mz na b">draw()</code>方法当前移动蛇的位置，检查游戏是否结束，绘制蛇和目标。但它仍然需要一些功能来处理当蛇到达屏幕边界时应该发生的事情，以及一些其他功能来处理当蛇的头部与目标或它自己的尾巴重叠时。</p><p id="e4a8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">蛇到达屏幕边界的程序(图11，L 14–18):</strong></p><ol class=""><li id="94ee" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm nr nh ni nj bi translated">如果蛇的水平属性(<code class="fe mx my mz na b">x</code>)小于零，则将该属性设置为屏幕的宽度。</li><li id="c8d2" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">如果蛇的水平属性(<code class="fe mx my mz na b">x</code>)大于屏幕的宽度，则将该属性设置为零。</li><li id="a162" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">如果蛇的垂直属性(<code class="fe mx my mz na b">y</code>)小于零，则将该属性设置为屏幕的高度。</li><li id="271c" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">如果蛇的垂直属性(<code class="fe mx my mz na b">y</code>)大于屏幕的高度，则将该属性设置为零。</li></ol><p id="33ac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">蛇头与物镜重叠时的程序(L 22–29，图11): </strong></p><ol class=""><li id="ce92" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm nr nh ni nj bi translated">如果蛇头的位置与目标的位置重叠。</li><li id="1e6e" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">将物镜的位置设置为新的随机位置。</li><li id="5ca3" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">获取蛇的最后一个尾部元素的位置。</li><li id="81eb" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">在最后一个尾部元素后面定义一个位置。</li><li id="d08b" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">添加该位置作为新的最后一个尾部元素。</li></ol><p id="7792" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">当蛇头与它的一个尾部元素重叠时的程序(图11，L 34–39):</strong></p><ol class=""><li id="ff66" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm nr nh ni nj bi translated">如果尾部元素没有直接连接到头部并且与头部重叠。</li><li id="e015" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">结束游戏。</li><li id="91a1" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">停止循环。</li><li id="f6f4" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">如果尾部元素没有重叠，设置尾部元素的位置。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated"><strong class="ak">图11: </strong>显示每当蛇到达屏幕边界时功能处理的实现，以及蛇的头和尾之间的处理重叠。</p></figure><p id="8c13" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 2.2.6增加内置方法:按键</strong></p><p id="da5c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">游戏需要的最后一个功能是处理关键事件。</p><p id="2fc1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">蛇可以移动的方向可以定义如下:</p><ul class=""><li id="47bc" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm ng nh ni nj bi translated"><code class="fe mx my mz na b">Left</code> — <em class="nu"> (x，y) = (-1，0) </em></li><li id="ba2c" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm ng nh ni nj bi translated"><code class="fe mx my mz na b">Right</code> — <em class="nu"> (x，y) = (1，0) </em></li><li id="4b85" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm ng nh ni nj bi translated"><code class="fe mx my mz na b">Up</code> — <em class="nu"> (x，y) = (0，-1) </em></li><li id="6436" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm ng nh ni nj bi translated"><code class="fe mx my mz na b">Down</code> — <em class="nu"> (x，y) = (0，1) </em></li></ul><p id="d384" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mx my mz na b">keyPressed()</code>法的程序是:</p><ol class=""><li id="185e" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm nr nh ni nj bi translated">如果按下“a”键，并且蛇没有移动<code class="fe mx my mz na b">right</code>，则将方向设置为<code class="fe mx my mz na b">left</code>。</li><li id="d96c" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">如果按下“d”键，并且蛇没有移动<code class="fe mx my mz na b">left</code>，则将方向设置为<code class="fe mx my mz na b">right</code>。</li><li id="965c" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">如果按下“s”键，并且蛇没有移动<code class="fe mx my mz na b">up</code>，则将方向设置为<code class="fe mx my mz na b">down</code>。</li><li id="2a75" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm nr nh ni nj bi translated">如果按下“w”键，并且蛇没有移动<code class="fe mx my mz na b">down</code>，则将方向设置为<code class="fe mx my mz na b">up</code>。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated"><strong class="ak">图12: </strong>显示处理按键方法的实现。</p></figure><h1 id="65dc" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">最终代码</h1><p id="0215" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">Github Gist的完整游戏代码示例可以在<a class="ae mk" href="https://gist.github.com/niiicolai/f10e829329ca6f94e6992448c1ed540d" rel="noopener ugc nofollow" target="_blank">这个链接</a>找到。</p><h1 id="46ab" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">摘要</h1><p id="fa65" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">Processing是一个图形库和一个开发环境(IDE)。它提供了一个图形界面，可以用来绘制不同的形状和文本。<code class="fe mx my mz na b">setup()</code>、<code class="fe mx my mz na b">draw()</code>和<code class="fe mx my mz na b">keyPressed()</code>是用于处理初始化、连续行为和按键事件的内置处理方法。<code class="fe mx my mz na b">ArrayList&lt;T&gt;</code>可以用来创建一个动态大小的列表，而<code class="fe mx my mz na b">PVector</code>指定了一个向量，并提供了计算向量之间距离的方法。蛇的移动是通过以相反的顺序循环<code class="fe mx my mz na b">snakePositions</code>并在到达蛇头之前将每个元素的位置分配给该元素的位置而产生的，蛇头向<code class="fe mx my mz na b">snakeDirection</code>中指定的方向移动。</p><h1 id="65c1" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">文献学</h1><p id="829c" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">En.wikipedia.org 2022年。<em class="nu">处理(编程语言)—维基百科</em>。[在线]见:&lt;<a class="ae mk" href="https://en.wikipedia.org/wiki/Processing_(programming_language)" rel="noopener ugc nofollow" target="_blank">https://en . Wikipedia . org/wiki/Processing _(programming _ language)</a>&gt;【2022年4月30日访问】。</p><p id="84fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Processing.org 2022年。[在线]可在:&lt;<a class="ae mk" href="https://processing.org/reference/setup_.html" rel="noopener ugc nofollow" target="_blank">https://processing.org/reference/setup_.html</a>&gt;【2022年4月30日访问】。</p><p id="2fb7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Processing.org。2022b。[在线]可在:&lt;<a class="ae mk" href="https://processing.org/reference/draw_.html" rel="noopener ugc nofollow" target="_blank">https://processing.org/reference/draw_.html</a>T4【2022年4月30日访问】。</p><p id="dfb4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Processing.org 2022 c。[在线]可在:【https://processing.org/reference/keyPressed_.html】&gt;【2022年4月30日进入】。</p></div></div>    
</body>
</html>