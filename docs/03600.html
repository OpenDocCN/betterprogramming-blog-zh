<html>
<head>
<title>Build an API with Live Reloading Using Express and Webpack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Express和Webpack构建具有实时重装功能的API</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-an-app-with-live-reloading-using-express-and-webpack-787ea00c8eb4?source=collection_archive---------8-----------------------#2020-02-20">https://betterprogramming.pub/build-an-app-with-live-reloading-using-express-and-webpack-787ea00c8eb4?source=collection_archive---------8-----------------------#2020-02-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e21d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过实时重载更快地构建API</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7fec45b81cc75c28da52cde7c52d880e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FTYTiuMcCCUegNVO"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">杰西·拉米雷斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="d736" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以前，我使用<a class="ae ky" href="https://nodemon.io/" rel="noopener ugc nofollow" target="_blank"> nodemon </a>来自动重启我的Express服务器，每次我修改开发中的一些文件。它工作了，但我想开始将我的Express应用程序与webpack捆绑在一起，以受益于缩小化，并使用webpack的许多可用插件中的一些。</p><p id="f82c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我花了一段时间让它按照我想要的方式工作，并支持实时重装。这是我找不到的教程。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7a80" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">入门指南</h1><h2 id="74f6" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">设置Express</h2><p id="5e2e" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">注意:如果您已经设置了Express(像我一样)，您可以跳过这一部分。</p><p id="26c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装npm软件包:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="8577" class="mu md it nm b gy nq nr l ns nt">$ npm install --save express</span></pre><p id="bd07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们创建一个简单的服务器向世界问好！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="b90e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太好了！让我们在本地运行它。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="28e7" class="mu md it nm b gy nq nr l ns nt">$ node src/index.js</span></pre><p id="0c32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们设置webpack。</p><h2 id="edee" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">设置webpack</h2><p id="7cda" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">如果您遵循官方的<a class="ae ky" href="https://webpack.js.org/guides/getting-started/" rel="noopener ugc nofollow" target="_blank">入门</a>指南，很容易迷路，因为它假设您正在捆绑一个web应用程序，但我们正在捆绑一个节点应用程序。所以让我们从一些基本的webpack配置开始。不改几个就不行了，还是过一遍吧。</p><p id="54d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，安装所需的软件包:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="342f" class="mu md it nm b gy nq nr l ns nt">$ npm install --save-dev <!-- -->webpack webpack-cli</span></pre><p id="d947" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，让我们创建一个基本的webpack配置文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="5624" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们捆绑它！剧透:会有误差。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="6799" class="mu md it nm b gy nq nr l ns nt">$ npx webpack</span></pre><h2 id="c4c8" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">有一个错误</h2><p id="3eae" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">默认情况下，webpack将为一个<em class="nw"> web </em>环境构建，所以当您开始依赖本机节点模块时，您将会遇到问题，因为这些模块不能被捆绑。</p><p id="678b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以我们需要确保<code class="fe nx ny nz nm b">node</code>就是<code class="fe nx ny nz nm b">target</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="1a94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再次运行<code class="fe nx ny nz nm b">npx webpack</code>,应该会很好——尽管有一个警告:“依赖项的请求是一个表达式”这个警告甚至可能不会出现在你面前…我还没有弄清楚。</p><p id="6dc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您可以运行捆绑的Express应用程序:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="eb5e" class="mu md it nm b gy nq nr l ns nt">$ node dist/main.js</span></pre><p id="914c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太好了！现在，您已经有了一个与webpack捆绑在一起的运行中的Express服务器。</p><p id="6ba2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，webpack的一个很酷的功能是手表模式:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="a05f" class="mu md it nm b gy nq nr l ns nt">$ npx webpack -w</span></pre><p id="4b2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将在每次检测到文件更改时重新捆绑应用程序，让您以更快的速度进行开发。但是，watch开箱不做的，其实是替你运行服务器(它只捆绑它)，所以每次还是需要手动重启……除非我们引入nodemon。</p><p id="75b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如一开始提到的，nodemon会观察文件的变化，并为您重新启动应用程序。</p><p id="a28e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，让我们用webpack开始吧！</p><h2 id="f56e" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">使用nodemon实时重载</h2><p id="07ef" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">您可以单独安装和运行nodemon，但幸运的是有一个webpack插件可以轻松地将两者结合起来。所以让我们安装<code class="fe nx ny nz nm b">nodemon-webpack-plugin</code>:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="96f3" class="mu md it nm b gy nq nr l ns nt">$ npm install --save-dev nodemon-webpack-plugin</span></pre><p id="1551" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们只需要再次修改我们的webpack配置来启用它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="5281" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行<code class="fe nx ny nz nm b">npx webpack -w</code>，你会看到<code class="fe nx ny nz nm b">webpack watch</code>不仅会捆绑应用程序，还会为我们运行服务器！</p><p id="010d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">继续修改您的源代码，当您点击<em class="nw">保存</em>时，您将看到webpack重新捆绑应用程序并自动重启服务器。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3645" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">资源</h1><p id="c6e8" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">这些是官方的入门指南:</p><ul class=""><li id="d661" class="oa ob it lb b lc ld lf lg li oc lm od lq oe lu of og oh oi bi translated"><a class="ae ky" href="https://expressjs.com/en/starter/installing.html" rel="noopener ugc nofollow" target="_blank"> Express.js </a></li><li id="b04c" class="oa ob it lb b lc oj lf ok li ol lm om lq on lu of og oh oi bi translated"><a class="ae ky" href="https://webpack.js.org/guides/getting-started/" rel="noopener ugc nofollow" target="_blank">网络包</a></li><li id="7d7b" class="oa ob it lb b lc oj lf ok li ol lm om lq on lu of og oh oi bi translated"><a class="ae ky" href="https://www.npmjs.com/package/nodemon-webpack-plugin" rel="noopener ugc nofollow" target="_blank"> nodemon-webpack-plugin </a></li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9325" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="44d5" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">我希望这个教程对你有用。如果你有任何不确定的地方，请随时问我，或者提供任何建议！</p></div></div>    
</body>
</html>