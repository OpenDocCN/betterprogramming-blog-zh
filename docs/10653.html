<html>
<head>
<title>Displaying Different Sections and Rows With RxSwift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用RxSwift显示不同的部分和行</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/displaying-different-sections-and-rows-with-rxswift-96a5f73ee8db?source=collection_archive---------5-----------------------#2022-01-20">https://betterprogramming.pub/displaying-different-sections-and-rows-with-rxswift-96a5f73ee8db?source=collection_archive---------5-----------------------#2022-01-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="de0e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过反应式编程增强您的iOS应用</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/48f9b7766132373c4367761bfbc59169.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*f9zB_geugbdl4ZbJ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@sweetmangostudios?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Ricky Kharawala </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="88de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你接到一个项目，为你的客户制作一份食物菜单。这是一个相对简单的应用程序，它显示营业时间以及食物和价格。</p><p id="c287" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，顾客可以从应用程序中购买食物。客户提出的唯一要求是，它需要在RxSwift中完成。</p><p id="0d9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">RxSwift有一个陡峭的学习曲线，这对初学者来说可能很难，但你想交付，所以你继续挑战自己。</p><p id="14a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用RxSwift的第一步当然是通过Swift包管理器(SPM)或Cocoapods导入它们。您决定采用后一种方法，并在<code class="fe lv lw lx ly b">Podfile</code>中插入以下代码</p><h1 id="5954" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">入门指南</h1><pre class="kj kk kl km gt mr ly ms mt aw mu bi"><span id="4b31" class="mv ma it ly b gy mw mx l my mz">pod 'RxSwift'<br/>pod 'RxCocoa'<br/>pod 'RxDataSources'</span></pre><p id="4c9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你<code class="fe lv lw lx ly b">pod install</code>他们，现在你已经准备好投入RxSwift之旅，永不回头。</p><h1 id="7f59" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">模型类型</h1><p id="dd95" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">RxSwift最重要的部分是知道如何定义您的<strong class="lb iu">型号类型</strong>。你知道需要有营业时间和有价格的食物。您将使用<code class="fe lv lw lx ly b">enum</code>,因为它具有易于扩展的灵活性。我的意思是，如果需求增加，你将需要添加不同的部分，如图像，地图等。这种方法可以让您轻松做到这一点。</p><p id="72f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码代表你的<code class="fe lv lw lx ly b">UITableView</code>上的<code class="fe lv lw lx ly b"><strong class="lb iu">Section</strong></code>。您将有一个包含营业时间的部分和另一个包含食物和价格的部分。</p><pre class="kj kk kl km gt mr ly ms mt aw mu bi"><span id="4f51" class="mv ma it ly b gy mw mx l my mz">enum HomeSectionModel {<br/>    case informationSection(title: String, items: [HomeSectionItem])<br/>    case foodSection(title: String, items: [HomeSectionItem])<br/>}</span></pre><p id="7ebe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，您需要在这个部分中创建<code class="fe lv lw lx ly b">Row</code>。每一种都由以下内容表示:</p><pre class="kj kk kl km gt mr ly ms mt aw mu bi"><span id="111e" class="mv ma it ly b gy mw mx l my mz">enum HomeSectionItem {<br/>    case operatingHourItem(time: String)<br/>    case foodItem(title: String, price: String)<br/>}</span></pre><p id="7590" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，您的<strong class="lb iu">型号类型</strong>始终需要符合<code class="fe lv lw lx ly b">SectionModelType</code>。这基本上是锅炉代码，你需要实现初始化你的模型。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h1 id="604c" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">创建您的模型类型</h1><p id="2b78" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">您的<strong class="lb iu">模型类型</strong>可以是硬编码的，也可以是来自API的响应。对于这个例子，它只是一个硬编码的模型。</p><p id="07ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个新类，命名为<code class="fe lv lw lx ly b">ViewModel.swift</code>；这是您创建模型的地方。</p><p id="a2b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您需要导入以下内容:</p><pre class="kj kk kl km gt mr ly ms mt aw mu bi"><span id="b9c7" class="mv ma it ly b gy mw mx l my mz">import RxSwift<br/>import RxCocoa</span></pre><p id="9762" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将使用<code class="fe lv lw lx ly b">BehaviorSubject</code>来存储您的模型，但是不能从任何类访问它。您还将创建另一个类型为<code class="fe lv lw lx ly b">Driver</code>的变量，该变量可通过<code class="fe lv lw lx ly b">ViewController</code>访问。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="89e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你已经准备好了所有的变量，让我们继续在<code class="fe lv lw lx ly b">ViewModel</code>中硬编码我们的模型。在同一个文件中，创建一个允许您对模型进行硬编码的函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h1 id="5d3d" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">填充模型</h1><p id="d047" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">返回到<strong class="lb iu"> ViewController.swift </strong>，这是您将进行<code class="fe lv lw lx ly b">UITableView</code>和绑定的地方。</p><p id="6a12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您需要导入以下内容:</p><pre class="kj kk kl km gt mr ly ms mt aw mu bi"><span id="61b1" class="mv ma it ly b gy mw mx l my mz">import RxDataSources<br/>import RxSwift</span></pre><p id="8eee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将一个接一个地在<code class="fe lv lw lx ly b">viewDidLoad</code>中创建相关的功能。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="048f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您需要实例化您的<code class="fe lv lw lx ly b">ViewModel</code>。让我们这样做:</p><pre class="kj kk kl km gt mr ly ms mt aw mu bi"><span id="8e97" class="mv ma it ly b gy mw mx l my mz">private func configureViewModel() {<br/>   viewModel = ViewModel()<br/>}</span></pre><p id="fdde" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后您将配置您的模型。</p><p id="e6fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码就是你设置单元格的地方。如果是信息模型，可以返回单元格a。如果是食物模型，可以返回单元格b。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="f898" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将需要数据源和模型来生成您在<code class="fe lv lw lx ly b">UITableView</code>上的全部信息。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><ol class=""><li id="fe1b" class="nh ni it lb b lc ld lf lg li nj lm nk lq nl lu nm nn no np bi translated">这是您在<code class="fe lv lw lx ly b">ViewModel</code>中手动生成模型的地方。</li><li id="d7c1" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated">您创建一个变量来获取数据源。</li><li id="af08" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated">本质上，您在这里所做的是，利用从模型中获得的信息，将这些信息填充到下面的单元格中。</li><li id="2cb8" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated">这允许你点击每个单元格，但我真正关心的是，如果用户点击食物，你会显示一个警告。按下信息不会做任何事情，因为它不在这里处理。</li></ol><p id="058b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，您需要注册要使用的<code class="fe lv lw lx ly b">TableViewCell</code>。以及显示警告的功能。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="70d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您已经准备好运行应用程序，并向您的客户展示它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/c087164fc7c47773a7f973a2b03683e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/1*EbYDoGMh8fS4xqxFCGBsvA.gif"/></div></figure></div></div>    
</body>
</html>