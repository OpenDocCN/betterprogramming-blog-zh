<html>
<head>
<title>Recreating a Button in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Android中重新创建按钮</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/recreating-a-button-in-android-97e5eac067bc?source=collection_archive---------5-----------------------#2020-08-25">https://betterprogramming.pub/recreating-a-button-in-android-97e5eac067bc?source=collection_archive---------5-----------------------#2020-08-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="25b8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">创建外观和行为都像按钮的复杂布局</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/83fbcd915f6fbf1aa29f86b6d647c836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ez7he5bXURjBYXJp"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@waldemarbrandt67w?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Waldemar Brandt </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="07aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本教程中，我们将学习如何在Android中通过将任何复杂的布局转换成按钮来创建复杂的按钮。</p><p id="4c08" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“但是我可以给任何视图附加一个<code class="fe ls lt lu lv b">OnClickListener</code>。有什么好学的？”嗯，我们将创建复杂的按钮，不仅功能像按钮，而且在视觉上也像按钮一样。我指的是两件事:</p><ul class=""><li id="7772" class="lw lx iq ky b kz la lc ld lf ly lj lz ln ma lr mb mc md me bi translated">正如<a class="ae kv" href="https://material.io/design/environment/elevation.html" rel="noopener ugc nofollow" target="_blank">材料设计指南</a>所指示的那样，布局会随着您的点击而改变标高。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/a6f0ce2b02680666ae90a3d58c57af70.png" data-original-src="https://miro.medium.com/v2/resize:fit:422/format:webp/1*dscWL7adU7dYLePOMB3Ofg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Android中按钮的预期高度变化</p></figure><ul class=""><li id="1b47" class="lw lx iq ky b kz la lc ld lf ly lj lz ln ma lr mb mc md me bi translated">当你点击它时，布局会显示一个涟漪效果，就像普通的按钮一样。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/6476ccb721db887f2475ebb75afb8998.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*wFdbua4HyBYzVMTnw1KQ3Q.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">连锁反应</p></figure><p id="222c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们深入讨论之前，我将快速确认一下默认按钮是可以稍微定制的。你可以给它添加一个图像或者改变它的背景，但是当你想要更多的自定义它的时候，这变得更加困难。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/26a5d388dc1e6fbf7445a7d03c33d90d.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/1*msKhzYYd5cg_0NiWIOd42Q.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">带图像和不带图像的默认按钮</p></figure><p id="a91d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们需要一个布局。我把那个留给你。你的任何布局都可以。对我来说，我会选择一个角落有两个T2，中间有几个T3的T1。我将XML布局资源文件命名为<code class="fe ls lt lu lv b">custom_button</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/d7e52c21ae3bcb44e17ada1a0a1a1ebb.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*QqFuLjhXrBXV1KWVJrzOgg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">自定义按钮. xml</p></figure><p id="70a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了简单起见，我将把它直接包含到活动的布局中。当然，你可以把它作为<code class="fe ls lt lu lv b">RecyclerView</code>物品或者随便你怎么用。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mj mk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">activity_main.xml</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/3898235ad968f678d80273508b460492.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*9VSgWvApXsPylov41Qsx6A.png"/></div></figure><p id="4e84" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，确保你设置了<code class="fe ls lt lu lv b">custom_button</code>的背景，这样它就不会是透明的。否则，您将看不到我们正在做的更改。稍后我们将再次更改背景属性，但是现在，将其设置为任意颜色。我会选择白色。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mj mk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">custom_button.xml(表头)</p></figure><p id="6ba1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们已经设置好了，让我们来处理高程和涟漪效应。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="4222" class="mt mu iq bd mv mw mx my mz na nb nc nd jw ne jx nf jz ng ka nh kc ni kd nj nk bi translated">海拔</h1><p id="318e" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">你要做的第一件事是给<code class="fe ls lt lu lv b">custom_button</code>添加一些属性，让Android知道它是一个可点击的项目，并且根据材料设计指南，它有一个默认的2dp高度。为此，我们将属性<code class="fe ls lt lu lv b">clickable</code>和<code class="fe ls lt lu lv b">focusable</code>设置为<code class="fe ls lt lu lv b">true</code>并将<code class="fe ls lt lu lv b">elevation</code>设置为<code class="fe ls lt lu lv b">2dp</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mj mk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">custom_button.xml(带有可单击、可聚焦和仰角的标题)</p></figure><p id="205c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的<code class="fe ls lt lu lv b">custom_button</code>现在开始看起来更像一个按钮，但当点击时，它不会在视觉上发生变化。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/c7d913a67f5cd3a9d5534c5ddaf31b65.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*MuQnaL7gtNGqMpIIPkXpGw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">具有2dp仰角的自定义按钮</p></figure><p id="9acc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了基于布局的状态(例如，是否按下)应用立面动画，我们需要利用布局本身的<code class="fe ls lt lu lv b">stateListAnimator</code>属性。在此之前，我们需要添加一个动画师，我们将首先定义动画。</p><p id="30b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要做到这一点，去你的休息区。如果找不到动画师资源目录，可以右键点击res -&gt; New -&gt; Android资源目录添加。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/1fb65b29affa87697d597af76beb2d7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UPBtqjR4M9e_yzhdj3UmJA.png"/></div></div></figure><p id="fbe8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后在“新资源目录”弹出窗口中，在资源类型中选择“animator ”,然后单击“确定”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/8d71ded7f3cae090e86511ebca981ac6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BTRc3OB8ph5hPD-5GMUXAg.png"/></div></div></figure><p id="e4ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你现在应该有一个动画师资源目录。是时候加个动画师了。右键点击动画-&gt;新建-&gt;动画资源文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/f8d59494d041154dc20639724f0755e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4KH5Vw4gu8cZLMJHuuM-tw.png"/></div></div></figure><p id="12b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将文件命名为<code class="fe ls lt lu lv b">button_elevation_animator</code>，选择选择器作为根元素，然后点击确定。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/f46262f15a05b96ba4ba4c1af3fbeabf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9J6xtItQrCQ2DflhdPQJZQ.png"/></div></div></figure><p id="0a11" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">动画师会有物品。每个项目将定义它将应用一些动画的状态。每个项目还将有一个<code class="fe ls lt lu lv b">objectAnimator</code>，它将定义动画的持续时间，它将激活的属性，以及它将应用于该属性的值更改。</p><p id="8094" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">谈到海拔，我们关心的地产是<code class="fe ls lt lu lv b">translationZ</code>。根据材料设计指南，我们希望将其增加6dp(在原始标高的基础上增加),这样总标高为8dp。我们还希望在布局启用并按下时出现动画。否则，将高程值更改设置回0dp(原始高程)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mj mk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">button_elevation_animator.xml</p></figure><p id="83dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随意改变动画的持续时间。不过我选择了一个预定义的<code class="fe ls lt lu lv b">shortAnimTime</code>，200毫秒。</p><p id="f67a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了应用这个状态动画，我们将它设置为之前制作的<code class="fe ls lt lu lv b">custom_button</code>的<code class="fe ls lt lu lv b">stateListAnimator</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mj mk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">custom_button.xml(带有stateListAnimator的标题)</p></figure><p id="f03f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">瞧啊。现在<code class="fe ls lt lu lv b">custom_button</code>将根据它的状态增加和减少仰角(从它的阴影可以看出)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/a58b53da2705bccdfc70a9a84c9b1231.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*ZpAFXlkp6PUYTRiWOeEJxg.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">点击时高度增加到8dp</p></figure></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="5cfc" class="mt mu iq bd mv mw mx my mz na nb nc nd jw ne jx nf jz ng ka nh kc ni kd nj nk bi translated">涟漪效应</h1><p id="00ef" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">添加涟漪效果就像创建一个可应用于<code class="fe ls lt lu lv b">custom_button</code>背景的涟漪效果drawable一样简单。右键点击可绘制- &gt;新建- &gt;可绘制资源文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/9a7e76db680a402c470695f8f2f918a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VXPUH5FchlEIN2GZyuQY4Q.png"/></div></div></figure><p id="cfc7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择ripple作为根元素，命名为<code class="fe ls lt lu lv b">button_ripple</code>，然后点击OK。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/db9c434da3d8a8dbfd0e537500c5361c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XJpr19huZHO0vNaLHDRsxw.png"/></div></div></figure><p id="5643" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">ripple</code>根元素需要有一种颜色(波纹的颜色)，并且它将有一个有形状的项目(它将添加波纹效果的视图的形状)。我们还将在此处将形状的颜色(形状的背景色)设置为白色，因为我们将替换先前直接设置为白色的背景属性。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mj mk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按钮_波纹. xml</p></figure><p id="0926" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们可以回到<code class="fe ls lt lu lv b">custom_button.xml</code>，将背景设置为<code class="fe ls lt lu lv b">button_ripple</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mj mk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">custom_button.xml(带有波纹背景的页眉)</p></figure><p id="7c00" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样！现在你有了一个布局，点击时看起来就像一个按钮！你可以简单地给它添加一个<code class="fe ls lt lu lv b">OnClickListener</code>，它就会像一个按钮一样工作！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/2a1f3c63589bf68dcae7248dd5ae89c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*D5MIcn0sCG5fI1dPxWKimw.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">决赛成绩</p></figure></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="ec69" class="mt mu iq bd mv mw mx my mz na nb nc nd jw ne jx nf jz ng ka nh kc ni kd nj nk bi translated">结论</h1><p id="e44e" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">感谢阅读。我希望这对你有用。直到下一次，这是开发咬签出！</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="a860" class="mt mu iq bd mv mw mx my mz na nb nc nd jw ne jx nf jz ng ka nh kc ni kd nj nk bi translated">资源</h1><ul class=""><li id="5e05" class="lw lx iq ky b kz nl lc nm lf nw lj nx ln ny lr mb mc md me bi translated"><a class="ae kv" href="https://material.io/design/environment/elevation.html" rel="noopener ugc nofollow" target="_blank">立面材料设计指南</a></li></ul></div></div>    
</body>
</html>