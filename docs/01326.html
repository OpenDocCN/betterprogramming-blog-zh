<html>
<head>
<title>How To Build an App to Manage Web App Translations — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何构建管理Web应用翻译的应用程序—第1部分</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-build-and-app-to-manage-web-app-translations-e9a53466d7d2?source=collection_archive---------9-----------------------#2019-09-01">https://betterprogramming.pub/how-to-build-and-app-to-manage-web-app-translations-e9a53466d7d2?source=collection_archive---------9-----------------------#2019-09-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c952" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">消除网络应用翻译的痛苦</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/74b5db0ad5d1e4e96084b6f001327f65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qiLMpHZZ9DHPMceajckxgg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@kmuza?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">卡洛斯·穆扎</a>在<a class="ae ky" href="https://unsplash.com/search/photos/web?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="89b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">管理web应用程序的翻译通常是乏味或痛苦的。你必须找到应用程序中的所有文本，获得翻译，然后将条目转换成键值格式，这样你的应用程序才能理解它们。翻译文本是一项缓慢、乏味但又不可避免的工作。然而，一旦以应用程序可以读取的格式输入，管理和转换它们就很容易了。有一些付费的应用程序来做这件事——但是自己免费做这件事很简单！</p><p id="356a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将构建一个应用程序，它为您的应用程序所需的所有语言提供JSON翻译，然后允许用户将它们转换为YAML或CSV，反之亦然。它还允许您将您的CSV翻译合并成一个大的CSV，以便您可以轻松地管理它们。我们允许人们为多个应用程序添加翻译。</p><h1 id="8fa2" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">前端</h1><p id="c1ce" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">为此，我们需要为我们的应用程序构建一个前端和后端。前端将用有棱角的材料建造，使建造一个好看的，功能性的用户界面变得容易。后端将使用Node.js构建，前端应用将具有接近<a class="ae ky" href="https://medium.com/@hohanga/how-to-make-a-simple-front-end-with-authenticated-routes-35380ae61388" rel="noopener">https://medium . com/@ ho hanga/how-to-make-a-simple-front-end-with-authenticated-routes-35380 AE 61388</a>的用户登录、注册和管理功能，因此本故事将跳过一些细节。</p><p id="114a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要开始构建Angular应用程序，我们需要安装Angular CLI。为此，运行<code class="fe ms mt mu mv b">npm i -g @angular/cli</code>。然后我们需要通过为我们的项目创建一个文件夹并运行<code class="fe ms mt mu mv b">ng new frontend</code>来编写应用程序的样板文件。如果有人询问，请务必包括路由模块和SCSS。之后，我们安装一些库。我们需要安装Lodash以方便对象操作，Ngx-Monaco-Editor以方便富文本编辑器，一个名为Flat的包将所有对象的嵌套键展平到一个级别，以便我们可以将它们存储在CSV的一列中，Angular JWT用于管理我们的auth token，Ngrx Store用于将flux store添加到我们的应用程序以方便状态管理，Angular Material使我们的应用程序看起来更有吸引力。我们通过运行<code class="fe ms mt mu mv b">npm i @angular/cdk @angular/material @auth0/angular-jwt flat lodah ngx-monaco-editor @ngrx/store</code>来做到这一点。</p><p id="40f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们运行<code class="fe ms mt mu mv b">ng add @ngrx/store</code>来添加使用Ngrx store的样板文件。</p><p id="17c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">angular.json</code>中，我们把这段代码:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="3f60" class="na lw it mv b gy nb nc l nd ne">{<br/>  "$schema": "./node_modules/@angular/cli/lib/config/schema.json",<br/>  "version": 1,<br/>  "newProjectRoot": "projects",<br/>  "projects": {<br/>    "frontend": {<br/>      "projectType": "application",<br/>      "schematics": {<br/>        "<a class="ae ky" href="http://twitter.com/schematics/angular" rel="noopener ugc nofollow" target="_blank">@schematics/angular</a>:component": {<br/>          "style": "scss"<br/>        }<br/>      },<br/>      "root": "",<br/>      "sourceRoot": "src",<br/>      "prefix": "app",<br/>      "architect": {<br/>        "build": {<br/>          "builder": "<a class="ae ky" href="http://twitter.com/angular" rel="noopener ugc nofollow" target="_blank">@angular</a>-devkit/build-angular:browser",<br/>          "options": {<br/>            "outputPath": "dist/frontend",<br/>            "index": "src/index.html",<br/>            "main": "src/main.ts",<br/>            "polyfills": "src/polyfills.ts",<br/>            "tsConfig": "tsconfig.app.json",<br/>            "aot": false,<br/>            "assets": [<br/>              "src/favicon.ico",<br/>              "src/assets",<br/>              {<br/>                "glob": "**/*",<br/>                "input": "node_modules/ngx-monaco-editor/assets/monaco",<br/>                "output": "./assets/monaco/"<br/>              }<br/>            ],<br/>            "styles": [<br/>              "src/styles.scss"<br/>            ],<br/>            "scripts": []<br/>          },<br/>          "configurations": {<br/>            "production": {<br/>              "fileReplacements": [<br/>                {<br/>                  "replace": "src/environments/environment.ts",<br/>                  "with": "src/environments/environment.prod.ts"<br/>                }<br/>              ],<br/>              "optimization": true,<br/>              "outputHashing": "all",<br/>              "sourceMap": false,<br/>              "extractCss": true,<br/>              "namedChunks": false,<br/>              "aot": true,<br/>              "extractLicenses": true,<br/>              "vendorChunk": false,<br/>              "buildOptimizer": true,<br/>              "budgets": [<br/>                {<br/>                  "type": "initial",<br/>                  "maximumWarning": "2mb",<br/>                  "maximumError": "5mb"<br/>                }<br/>              ]<br/>            }<br/>          }<br/>        },<br/>        "serve": {<br/>          "builder": "<a class="ae ky" href="http://twitter.com/angular" rel="noopener ugc nofollow" target="_blank">@angular</a>-devkit/build-angular:dev-server",<br/>          "options": {<br/>            "browserTarget": "frontend:build"<br/>          },<br/>          "configurations": {<br/>            "production": {<br/>              "browserTarget": "frontend:build:production"<br/>            }<br/>          }<br/>        },<br/>        "extract-i18n": {<br/>          "builder": "<a class="ae ky" href="http://twitter.com/angular" rel="noopener ugc nofollow" target="_blank">@angular</a>-devkit/build-angular:extract-i18n",<br/>          "options": {<br/>            "browserTarget": "frontend:build"<br/>          }<br/>        },<br/>        "test": {<br/>          "builder": "<a class="ae ky" href="http://twitter.com/angular" rel="noopener ugc nofollow" target="_blank">@angular</a>-devkit/build-angular:karma",<br/>          "options": {<br/>            "main": "src/test.ts",<br/>            "polyfills": "src/polyfills.ts",<br/>            "tsConfig": "tsconfig.spec.json",<br/>            "karmaConfig": "karma.conf.js",<br/>            "assets": [<br/>              "src/favicon.ico",<br/>              "src/assets",<br/>              {<br/>                "glob": "**/*",<br/>                "input": "node_modules/ngx-monaco-editor/assets/monaco",<br/>                "output": "./assets/monaco/"<br/>              }<br/>            ],<br/>            "styles": [<br/>              "src/styles.scss"<br/>            ],<br/>            "scripts": []<br/>          }<br/>        },<br/>        "lint": {<br/>          "builder": "<a class="ae ky" href="http://twitter.com/angular" rel="noopener ugc nofollow" target="_blank">@angular</a>-devkit/build-angular:tslint",<br/>          "options": {<br/>            "tsConfig": [<br/>              "tsconfig.app.json",<br/>              "tsconfig.spec.json",<br/>              "e2e/tsconfig.json"<br/>            ],<br/>            "exclude": [<br/>              "**/node_modules/**"<br/>            ]<br/>          }<br/>        },<br/>        "e2e": {<br/>          "builder": "<a class="ae ky" href="http://twitter.com/angular" rel="noopener ugc nofollow" target="_blank">@angular</a>-devkit/build-angular:protractor",<br/>          "options": {<br/>            "protractorConfig": "e2e/protractor.conf.js",<br/>            "devServerTarget": "frontend:serve"<br/>          },<br/>          "configurations": {<br/>            "production": {<br/>              "devServerTarget": "frontend:serve:production"<br/>            }<br/>          }<br/>        }<br/>      }<br/>    }<br/>  },<br/>  "defaultProject": "frontend"<br/>}</span></pre><p id="243a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这确保了文本编辑器将会出现。最重要的部分是:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="785d" class="na lw it mv b gy nb nc l nd ne">"assets": [<br/>   "src/favicon.ico",<br/>   "src/assets",<br/>   {<br/>      "glob": "**/*",<br/>      "input": "node_modules/ngx-monaco-editor/assets/monaco",<br/>      "output": "./assets/monaco/"<br/>   }<br/>]</span></pre><p id="5484" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将为我们的编辑器加载资产。</p><p id="7748" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装好所有库后，我们现在可以开始构建应用程序了。我们首先通过运行以下代码来构建我们的共享代码:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="09ee" class="na lw it mv b gy nb nc l nd ne">ng g service user<br/>ng g service object<br/>ng g service translation<br/>ng g service app<br/>ng g guard isAuthenticated<br/>ng g class httpReqInterceptor<br/>ng g class translation</span></pre><p id="b473" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些服务用于对后端的HTTP调用。防护是为了防止未经授权的用户访问受保护的路由，HTTP拦截器允许我们将令牌附加到经过身份验证的路由上。我们应该生成<code class="fe ms mt mu mv b">user.service.ts</code>、<code class="fe ms mt mu mv b">translation.service.ts</code>、<code class="fe ms mt mu mv b">object.service.ts</code>、<code class="fe ms mt mu mv b">app.service.ts</code>、<code class="fe ms mt mu mv b">is-authenticated.guard.ts</code>、<code class="fe ms mt mu mv b">translation.ts </code>和<code class="fe ms mt mu mv b">http-req-interceptor.ts</code>。</p><p id="82ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">user.service.ts</code>中，我们把:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="8816" class="na lw it mv b gy nb nc l nd ne">import { Injectable } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { HttpClient } from '<a class="ae ky" href="http://twitter.com/angular/common" rel="noopener ugc nofollow" target="_blank">@angular/common</a>/http';<br/>import { environment } from 'src/environments/environment';<br/>import { Router } from '<a class="ae ky" href="http://twitter.com/angular/router" rel="noopener ugc nofollow" target="_blank">@angular/router</a>';<br/>import { JwtHelperService } from "<a class="ae ky" href="http://twitter.com/auth0/angular-jwt" rel="noopener ugc nofollow" target="_blank">@auth0/angular-jwt</a>";</span><span id="5d05" class="na lw it mv b gy nf nc l nd ne">const helper = new JwtHelperService();</span><span id="eed8" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Injectable" rel="noopener ugc nofollow" target="_blank">@Injectable</a>({<br/>  providedIn: 'root'<br/>})<br/>export class UserService {</span><span id="e0b8" class="na lw it mv b gy nf nc l nd ne">  constructor(<br/>    private http: HttpClient,<br/>    private router: Router<br/>  ) { }</span><span id="407d" class="na lw it mv b gy nf nc l nd ne">signUp(data) {<br/>    return this.http.post(`${environment.apiUrl}/user/signup`, data);<br/>  }</span><span id="3a19" class="na lw it mv b gy nf nc l nd ne">updateUser(data) {<br/>    return this.http.put(`${environment.apiUrl}/user/updateUser`, data);<br/>  }</span><span id="9a03" class="na lw it mv b gy nf nc l nd ne">  updatePassword(data) {<br/>    return this.http.put(`${environment.apiUrl}/user/updatePassword`, data);<br/>  }</span><span id="a0a3" class="na lw it mv b gy nf nc l nd ne">  login(data) {<br/>    return this.http.post(`${environment.apiUrl}/user/login`, data);<br/>  }</span><span id="320e" class="na lw it mv b gy nf nc l nd ne">  logOut() {<br/>    localStorage.clear();<br/>    this.router.navigate(['/']);<br/>  }</span><span id="65ba" class="na lw it mv b gy nf nc l nd ne">  passwordResetRequest(data) {<br/>    return this.http.post(`${environment.apiUrl}/user/passwordResetRequest`, data);<br/>  }</span><span id="fc06" class="na lw it mv b gy nf nc l nd ne">  passwordReset(data) {<br/>    return this.http.post(`${environment.apiUrl}/user/passwordReset`, data);<br/>  }</span><span id="0491" class="na lw it mv b gy nf nc l nd ne">  isAuthenticated() {<br/>    try {<br/>      const token = localStorage.getItem('token');<br/>      const decodedToken = helper.decodeToken(token);<br/>      const isExpired = helper.isTokenExpired(token);<br/>      return !!decodedToken &amp;&amp; !isExpired;<br/>    }<br/>    catch (ex) {<br/>      return false;<br/>    }<br/>  }</span><span id="03a0" class="na lw it mv b gy nf nc l nd ne">  currentUser() {<br/>    return this.http.get(`${environment.apiUrl}/user/currentUser`);<br/>  }</span><span id="bfdd" class="na lw it mv b gy nf nc l nd ne">}</span></pre><p id="f1e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将调用我们的路由来登录、注册、更改或重置密码，我们将在后面使用。<code class="fe ms mt mu mv b">isAuthenticated</code>功能用于确定您的认证令牌是否已经过期或无效。</p><p id="a8d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">translation.ts</code>中，我们把:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="bcc2" class="na lw it mv b gy nb nc l nd ne">export class Translation {<br/>    public id: number;<br/>    public appId: number;<br/>    public language: string;<br/>    public yaml: string;<br/>    public json: string;<br/>    public csv: string;<br/>}</span></pre><p id="13c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们翻译的样板课。后端将具有相同的列名。</p><p id="e690" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">translation.service.ts</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="1ed0" class="na lw it mv b gy nb nc l nd ne">import { Injectable } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { HttpClient } from '<a class="ae ky" href="http://twitter.com/angular/common" rel="noopener ugc nofollow" target="_blank">@angular/common</a>/http';<br/>import { Translation } from './translation';<br/>import { environment } from 'src/environments/environment';</span><span id="c39c" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Injectable" rel="noopener ugc nofollow" target="_blank">@Injectable</a>({<br/>  providedIn: 'root'<br/>})<br/>export class TranslationService {</span><span id="ff12" class="na lw it mv b gy nf nc l nd ne">constructor(<br/>  private http: HttpClient<br/>  ) { }</span><span id="f679" class="na lw it mv b gy nf nc l nd ne">  getTranslationsByAppId(appId: number) {<br/>    return this.http.get(`${environment.apiUrl}/translation/translations/${appId}`);<br/>  }</span><span id="9c9d" class="na lw it mv b gy nf nc l nd ne">  addTranslation(translationData: Translation) {<br/>    return this.http.post(`${environment.apiUrl}/translation/add`, translationData);<br/>  }</span><span id="639f" class="na lw it mv b gy nf nc l nd ne">  editTranslation(translationData: Translation) {<br/>    return this.http.put(`${environment.apiUrl}/translation/update/${translationData.id}`, translationData);<br/>  }</span><span id="14f6" class="na lw it mv b gy nf nc l nd ne">  remove(translationId: number) {<br/>    return this.http.delete(`${environment.apiUrl}/translation/delete/${translationId}`);<br/>  }<br/>}</span></pre><p id="eba6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是为了调用我们的路由来更改翻译，可以是JSON、CSV或YAML格式。</p><p id="8cf7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">app.service.ts</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="d1df" class="na lw it mv b gy nb nc l nd ne">import { Injectable } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { HttpClient } from '<a class="ae ky" href="http://twitter.com/angular/common" rel="noopener ugc nofollow" target="_blank">@angular/common</a>/http';<br/>import { environment } from 'src/environments/environment';</span><span id="f558" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Injectable" rel="noopener ugc nofollow" target="_blank">@Injectable</a>({<br/>  providedIn: 'root'<br/>})<br/>export class AppService {</span><span id="7b00" class="na lw it mv b gy nf nc l nd ne">constructor(<br/>    private http: HttpClient<br/>  ) { }</span><span id="9799" class="na lw it mv b gy nf nc l nd ne">  getApps() {<br/>    return this.http.get(`${environment.apiUrl}/app/get`);<br/>  }</span><span id="12c4" class="na lw it mv b gy nf nc l nd ne">  getApp(id: number) {<br/>    return this.http.get(`${environment.apiUrl}/app/get/${id}`);<br/>  }</span><span id="de57" class="na lw it mv b gy nf nc l nd ne">  addApp(appData) {<br/>    return this.http.post(`${environment.apiUrl}/app/add`, appData);<br/>  }</span><span id="e192" class="na lw it mv b gy nf nc l nd ne">  editApp(appData) {<br/>    return this.http.put(`${environment.apiUrl}/app/update/${appData.id}`, appData);<br/>  }</span><span id="66ea" class="na lw it mv b gy nf nc l nd ne">  removeApp(appId) {<br/>    return this.http.delete(`${environment.apiUrl}/app/delete/${appId}`);<br/>  }</span><span id="c135" class="na lw it mv b gy nf nc l nd ne">  combineIntoOneCsv(appData) {<br/>    return this.http.put(`${environment.apiUrl}/app/combineCsv/${appData.appId}`, appData);<br/>  }<br/>}</span></pre><p id="a99f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将允许我们对App表进行CRUD操作，该表包含属于某个用户的应用程序。</p><p id="1b85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">http-req-interceptor.ts</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="505a" class="na lw it mv b gy nb nc l nd ne">import { Injectable } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import {<br/>    HttpEvent,<br/>    HttpInterceptor,<br/>    HttpHandler,<br/>    HttpResponse,<br/>    HttpErrorResponse,<br/>    HttpRequest<br/>} from '<a class="ae ky" href="http://twitter.com/angular/common" rel="noopener ugc nofollow" target="_blank">@angular/common</a>/http';<br/>import { Observable } from 'rxjs';<br/>import { environment } from '../environments/environment'<br/>import { map, filter, tap } from 'rxjs/operators';<br/>import { Router } from '<a class="ae ky" href="http://twitter.com/angular/router" rel="noopener ugc nofollow" target="_blank">@angular/router</a>';</span><span id="4ad7" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Injectable" rel="noopener ugc nofollow" target="_blank">@Injectable</a>()<br/>export class HttpReqInterceptor implements HttpInterceptor {<br/>  constructor(<br/>        public router: Router<br/>    ) { }</span><span id="dcb7" class="na lw it mv b gy nf nc l nd ne">  intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {<br/>        let modifiedReq = req.clone({});</span><span id="501d" class="na lw it mv b gy nf nc l nd ne">  if (localStorage.getItem('token')) {<br/>            modifiedReq = modifiedReq.clone({<br/>                setHeaders: {<br/>                    authorization: localStorage.getItem('token')<br/>                }<br/>            });<br/>     }</span><span id="ede8" class="na lw it mv b gy nf nc l nd ne">     return next.handle(modifiedReq).pipe(tap((event: HttpEvent&lt;any&gt;) =&gt; {<br/>            if (event instanceof HttpResponse) {</span><span id="9215" class="na lw it mv b gy nf nc l nd ne">            }<br/>        }, (err: any) =&gt; {</span><span id="4ca5" class="na lw it mv b gy nf nc l nd ne">     }));<br/>  }<br/>}</span></pre><p id="7421" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这允许我们附加一个认证令牌来访问我们所有请求的认证路由。</p><p id="0bbb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">is-authenticated.guard.ts</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="1689" class="na lw it mv b gy nb nc l nd ne">import { Injectable } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '<a class="ae ky" href="http://twitter.com/angular/router" rel="noopener ugc nofollow" target="_blank">@angular/router</a>';<br/>import { Observable } from 'rxjs';<br/>import { UserService } from './user.service';</span><span id="bdf3" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Injectable" rel="noopener ugc nofollow" target="_blank">@Injectable</a>({<br/>  providedIn: 'root'<br/>})<br/>export class IsAuthenticatedGuard implements CanActivate {<br/>  constructor(<br/>    private userService: UserService,<br/>    private router: Router<br/>  ) { }</span><span id="1b93" class="na lw it mv b gy nf nc l nd ne">  canActivate(<br/>    next: ActivatedRouteSnapshot,<br/>    state: RouterStateSnapshot<br/>  ): Observable&lt;boolean | UrlTree&gt; | Promise&lt;boolean | UrlTree&gt; | boolean | UrlTree {<br/>    const isAuthenticated = this.userService.isAuthenticated();<br/>    if (!isAuthenticated) {<br/>      localStorage.clear();<br/>      this.router.navigate(['/']);<br/>    }<br/>    return isAuthenticated;<br/>  }</span><span id="8068" class="na lw it mv b gy nf nc l nd ne">}</span></pre><p id="f818" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这使我们能够阻止未经身份验证的用户，即没有有效身份验证令牌的用户。如果用户未被授权，用户将被发送到主页。</p><p id="69a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">object.service.ts</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="c239" class="na lw it mv b gy nb nc l nd ne">import { Injectable } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { Translation } from './translation';<br/>declare const require: any;<br/>declare const YAML: any;<br/>const flatten = require('flat');<br/>const unflatten = require('flat').unflatten;<br/>const _ = require('lodash');</span><span id="4c7a" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Injectable" rel="noopener ugc nofollow" target="_blank">@Injectable</a>({<br/>  providedIn: 'root'<br/>})<br/>export class ObjectService {</span><span id="8894" class="na lw it mv b gy nf nc l nd ne">constructor() { }</span><span id="a5d4" class="na lw it mv b gy nf nc l nd ne">  convertJsonToYaml(json: string): string {<br/>    return YAML.stringify(JSON.parse(json));<br/>  }</span><span id="d01b" class="na lw it mv b gy nf nc l nd ne">  convertYamlToJson(yaml: string): string {<br/>    const obj = YAML.parse(yaml);<br/>    return JSON.stringify(obj);<br/>  }</span><span id="ace3" class="na lw it mv b gy nf nc l nd ne">  convertJsonToCsv(json: string): string {<br/>    let csvString = '';<br/>    const flattenedObj = flatten(JSON.parse(json));<br/>    Object.keys(flattenedObj).forEach(key =&gt; {<br/>      csvString += `${key},${flattenedObj[key]}\n`;<br/>    })<br/>    return csvString;<br/>  }</span><span id="fa63" class="na lw it mv b gy nf nc l nd ne">  convertCsvToJson(csv: string): string {<br/>    let obj = {};<br/>    csv<br/>      .split('\n')<br/>      .forEach(row =&gt; {<br/>        const splitRow = row.split(',');<br/>        const key = splitRow[0];<br/>        const value = splitRow[1];<br/>        row[key] = value;<br/>      })<br/>    return JSON.stringify(obj);<br/>  }</span><span id="537f" class="na lw it mv b gy nf nc l nd ne">  combineIntoOneCsv(translations: Translation[]) {<br/>    const languages = translations.map(t =&gt; t.language);<br/>    const flattenedKeys = Object.keys(flatten(JSON.parse(translations[0].json)));<br/>    let csv = `${['', ...languages].join(',')}\n`;<br/>    flattenedKeys.forEach(fk =&gt; {<br/>      let row = [fk];<br/>      languages.forEach(l =&gt; {<br/>        const jsonObj = JSON.parse(translations.find(t =&gt; t.language == l).json);<br/>        const translation = _.get(jsonObj, fk);<br/>        row.push(translation);<br/>      })<br/>      csv += `${row.join(',')}\n`;<br/>    })<br/>    return csv;<br/>  }<br/>}</span></pre><p id="163f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这项服务完成我们所有的翻译格式转换。对于转换为CSV，使用<code class="fe ms mt mu mv b">flat</code>节点包将所有嵌套的关键点展平到一个级别。例如，如果您有对象:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="e887" class="na lw it mv b gy nb nc l nd ne">{<br/>  foo: {<br/>    bar: 'text"<br/>  }<br/>}</span></pre><p id="64d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后<code class="fe ms mt mu mv b">foo.bar</code>会转换成<code class="fe ms mt mu mv b">"foo.bar"</code>字符串作为键。返回的对象将是:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="2290" class="na lw it mv b gy nb nc l nd ne">{<br/>  'foo.bar': 'text'<br/>}</span></pre><p id="946a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这使得JSON到CSV的转换很容易。</p><p id="d509" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要将YAML转换成CSV，我们首先要转换成JSON，这样我们就可以使用<code class="fe ms mt mu mv b">flat</code>包。</p><p id="c82a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JSON和CSV之间的转换是通过<code class="fe ms mt mu mv b">yamljs</code> JavaScript库完成的，该库位于<a class="ae ky" href="https://cdnjs.cloudflare.com/ajax/libs/yamljs/0.3.0/yaml.min.js" rel="noopener ugc nofollow" target="_blank">https://cdnjs . cloud flare . com/Ajax/libs/YAML js/0 . 3 . 0/YAML . min . js</a>。下载文件并将其放在<code class="fe ms mt mu mv b">assets</code>文件夹中，这样我们就可以在<code class="fe ms mt mu mv b">index.html</code>中引用它。</p><p id="483f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在运行<code class="fe ms mt mu mv b">ng add @ngrx/store</code>得到的<code class="fe ms mt mu mv b">reducers</code>文件夹中，我们创建了<code class="fe ms mt mu mv b">apps-reducer.ts</code>、<code class="fe ms mt mu mv b">menu-reducer.ts</code>和<code class="fe ms mt mu mv b">translations-reducer.ts</code>。</p><p id="baf0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">app-reducer.ts</code>中，我们把这个:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="cfb0" class="na lw it mv b gy nb nc l nd ne">const SET_APPS = 'SET_APPS';</span><span id="0495" class="na lw it mv b gy nf nc l nd ne">function appsReducer(state, action) {<br/>    switch (action.type) {<br/>        case SET_APPS:<br/>            state = action.payload;<br/>            return state;<br/>        default:<br/>            return state<br/>    }<br/>}</span><span id="b546" class="na lw it mv b gy nf nc l nd ne">export { appsReducer, SET_APPS };</span></pre><p id="50b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">menu-reducer.ts</code>中，我们把:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="4c95" class="na lw it mv b gy nb nc l nd ne">const TOGGLE_MENU = 'TOGGLE_MENU';</span><span id="c42a" class="na lw it mv b gy nf nc l nd ne">function menuReducer(state, action) {<br/>    switch (action.type) {<br/>        case TOGGLE_MENU:<br/>            state = action.payload;<br/>            return state;<br/>        default:<br/>            return state<br/>    }<br/>}</span><span id="869c" class="na lw it mv b gy nf nc l nd ne">export { menuReducer, TOGGLE_MENU };</span></pre><p id="6b68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">translation-reducer.ts</code>中，我们把:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="8594" class="na lw it mv b gy nb nc l nd ne">const SET_TRANSLATIONS = 'SET_TRANSLATIONS';</span><span id="6302" class="na lw it mv b gy nf nc l nd ne">function translationsReducer(state, action) {<br/>    switch (action.type) {<br/>        case SET_TRANSLATIONS:<br/>            state = action.payload;<br/>            return state;<br/>        default:<br/>            return state<br/>    }<br/>}</span><span id="3f1a" class="na lw it mv b gy nf nc l nd ne">export { translationsReducer, SET_TRANSLATIONS };</span></pre><p id="d1ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的<code class="fe ms mt mu mv b">reducers</code>文件夹的<code class="fe ms mt mu mv b">index.ts</code>中，也是通过运行<code class="fe ms mt mu mv b">ng add @ngrx/store</code>得到的，我们放入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="82b8" class="na lw it mv b gy nb nc l nd ne">import { menuReducer } from './menu-reducer';<br/>import { appsReducer } from './apps-reducer';<br/>import { translationsReducer } from './translations-reducer';</span><span id="50f8" class="na lw it mv b gy nf nc l nd ne">export const reducers = {<br/>  menu: menuReducer,<br/>  translations: translationsReducer,<br/>  apps: appsReducer<br/>};</span></pre><p id="4a66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">来自<code class="fe ms mt mu mv b">@ngrx/store</code>的<code class="fe ms mt mu mv b">StoreModule</code>将使用这些文件来创建我们的通量库。</p><p id="2c58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们创建组件。他们有很多人。我们运行以下命令来快速创建它们:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="edc2" class="na lw it mv b gy nb nc l nd ne">ng g component addAppDialog<br/>ng g component addTranslationDialog<br/>ng g component AppsPage<br/>ng g component CoversionPage<br/>ng g component EditAppDialog<br/>ng g component HomePage<br/>ng g component LoginPage<br/>ng g component PasswordResetPage<br/>ng g component PasswordResetRequestPage<br/>ng g component SettingsPage<br/>ng g component SignUpPage<br/>ng g component TopBar</span></pre><p id="c782" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">add-app-dialog.ts</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="67ba" class="na lw it mv b gy nb nc l nd ne">import { Component, OnInit, Inject } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { MatDialogRef, MAT_DIALOG_DATA } from '<a class="ae ky" href="http://twitter.com/angular/material" rel="noopener ugc nofollow" target="_blank">@angular/material</a>';<br/>import { NgForm } from '<a class="ae ky" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';<br/>import { AppService } from '../app.service';<br/>import { Store, select } from '<a class="ae ky" href="http://twitter.com/ngrx/store" rel="noopener ugc nofollow" target="_blank">@ngrx/store</a>';<br/>import { SET_APPS } from '../reducers/apps-reducer';</span><span id="0577" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-add-app-dialog',<br/>  templateUrl: './add-app-dialog.component.html',<br/>  styleUrls: ['./add-app-dialog.component.scss']<br/>})<br/>export class AddAppDialogComponent implements OnInit {<br/>  appData: any = &lt;any&gt;{};</span><span id="f625" class="na lw it mv b gy nf nc l nd ne">constructor(<br/>    public dialogRef: MatDialogRef&lt;AddAppDialogComponent&gt;,<br/>    <a class="ae ky" href="http://twitter.com/Inject" rel="noopener ugc nofollow" target="_blank">@Inject</a>(MAT_DIALOG_DATA) public data: any,<br/>    private appService: AppService,<br/>    private store: Store&lt;any&gt;<br/>  ) {<br/>  }</span><span id="9eaf" class="na lw it mv b gy nf nc l nd ne">  ngOnInit() {<br/>  }</span><span id="4aaf" class="na lw it mv b gy nf nc l nd ne">  cancel(): void {<br/>    this.dialogRef.close();<br/>  }</span><span id="eb5d" class="na lw it mv b gy nf nc l nd ne">  save(addAppForm: NgForm) {<br/>    if (addAppForm.invalid) {<br/>      return;<br/>    }<br/>    this.appService.addApp(this.appData)<br/>      .subscribe(res =&gt; {<br/>        this.getApps();<br/>        this.dialogRef.close();<br/>      })<br/>  }</span><span id="3315" class="na lw it mv b gy nf nc l nd ne">  getApps() {<br/>    this.appService.getApps()<br/>      .subscribe(res =&gt; {<br/>        this.store.dispatch({ type: SET_APPS, payload: res });<br/>      })<br/>  }<br/>}</span></pre><p id="d95a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将由应用程序页面打开，这是用户输入应用程序数据的地方。</p><p id="a185" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">add-app-dialog.component.html</code>中，我们把:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="1e25" class="na lw it mv b gy nb nc l nd ne">&lt;h2&gt;Add App&lt;/h2&gt;<br/>&lt;form #addAppForm='ngForm' (ngSubmit)='save(addAppForm)'&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="Name" required #name='ngModel' name='name' [(ngModel)]='appData.name'&gt;<br/>        &lt;mat-error *ngIf="name.invalid &amp;&amp; (name.dirty || name.touched)"&gt;<br/>            &lt;div *ngIf="name.errors.required"&gt;<br/>                Name is required.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;textarea matInput placeholder="Description" #description='ngModel' name='description'<br/>            [(ngModel)]='appData.description'&gt;<br/>            &lt;/textarea&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;div mat-dialog-actions&gt;<br/>        &lt;button mat-button (click)="cancel()"&gt;Cancel&lt;/button&gt;<br/>        &lt;button mat-button cdkFocusInitial&gt;Add&lt;/button&gt;<br/>    &lt;/div&gt;<br/>&lt;/form&gt;</span></pre><p id="1297" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是用户输入应用程序数据的表单。</p><p id="6700" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">add-app-dialog.component.scss</code>中，我们把这个:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="97a1" class="na lw it mv b gy nb nc l nd ne">form {<br/>  mat-form-field {<br/>    width: 95%;<br/>    margin: 0 auto;<br/>  }<br/>}</span></pre><p id="4a0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将改变表单域的宽度以适应对话框。</p><p id="0870" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来在<code class="fe ms mt mu mv b">add-translation-dialog.component.ts</code>中，我们添加了以下内容:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="918e" class="na lw it mv b gy nb nc l nd ne">import { Component, OnInit, Inject } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { MatDialogRef, MAT_DIALOG_DATA } from '<a class="ae ky" href="http://twitter.com/angular/material" rel="noopener ugc nofollow" target="_blank">@angular/material</a>';<br/>import { TranslationService } from '../translation.service';<br/>import { Store } from '<a class="ae ky" href="http://twitter.com/ngrx/store" rel="noopener ugc nofollow" target="_blank">@ngrx/store</a>';<br/>import { NgForm } from '<a class="ae ky" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';<br/>import { Translation } from '../translation';<br/>import { SET_TRANSLATIONS } from '../reducers/translations-reducer';<br/>import { ObjectService } from '../object.service';</span><span id="b549" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-add-translation-dialog',<br/>  templateUrl: './add-translation-dialog.component.html',<br/>  styleUrls: ['./add-translation-dialog.component.scss']<br/>})<br/>export class AddTranslationDialogComponent implements OnInit {<br/>  translationData: Translation = &lt;Translation&gt;{};<br/>  jsonEditorOptions = { language: 'javascript', theme: 'vs-dark' };<br/>  yamlEditorOptions = { language: 'yaml', theme: 'vs-dark' };<br/>  csvEditorOptions = { theme: 'vs-dark' };</span><span id="1270" class="na lw it mv b gy nf nc l nd ne">  constructor(<br/>    public dialogRef: MatDialogRef&lt;AddTranslationDialogComponent&gt;,<br/>    <a class="ae ky" href="http://twitter.com/Inject" rel="noopener ugc nofollow" target="_blank">@Inject</a>(MAT_DIALOG_DATA) public appId: number,<br/>    private translationService: TranslationService,<br/>    private store: Store&lt;any&gt;,<br/>    private objectService: ObjectService<br/>  ) { }</span><span id="104e" class="na lw it mv b gy nf nc l nd ne">ngOnInit() {<br/>  }</span><span id="9043" class="na lw it mv b gy nf nc l nd ne">  cancel(): void {<br/>    this.dialogRef.close();<br/>  }</span><span id="865b" class="na lw it mv b gy nf nc l nd ne">  save(addTranslationForm: NgForm) {<br/>    if (addTranslationForm.invalid) {<br/>      return;<br/>    }<br/>    let translationData = Object.assign({}, this.translationData);<br/>    translationData.appId = this.appId;<br/>    this.translationService.addTranslation(translationData)<br/>      .subscribe(res =&gt; {<br/>        this.getTranslations();<br/>        this.dialogRef.close();<br/>      })<br/>  }</span><span id="c9ba" class="na lw it mv b gy nf nc l nd ne">  getTranslations() {<br/>    this.translationService.getTranslationsByAppId(this.appId)<br/>      .subscribe(res =&gt; {<br/>        this.store.dispatch({ type: SET_TRANSLATIONS, payload: res });<br/>      })<br/>  }</span><span id="4799" class="na lw it mv b gy nf nc l nd ne">  convertJsonToYaml() {<br/>    const yaml = this.objectService.convertJsonToYaml(this.translationData.json);<br/>    this.translationData.yaml = yaml;<br/>  }</span><span id="cda8" class="na lw it mv b gy nf nc l nd ne">  convertYamlToJson() {<br/>    const json = this.objectService.convertYamlToJson(this.translationData.yaml);<br/>    this.translationData.json = json;<br/>  }</span><span id="11f4" class="na lw it mv b gy nf nc l nd ne">  convertJsonToCsv() {<br/>    const csv = this.objectService.convertJsonToCsv(this.translationData.json);<br/>    this.translationData.csv = csv;<br/>  }</span><span id="08d5" class="na lw it mv b gy nf nc l nd ne">  convertCsvToJson() {<br/>    const json = this.objectService.convertCsvToJson(this.translationData.csv);<br/>    this.translationData.json = json;<br/>  }</span><span id="fad6" class="na lw it mv b gy nf nc l nd ne">  convertYamlToCsv() {<br/>    const json = this.objectService.convertYamlToJson(this.translationData.yaml);<br/>    const csv = this.objectService.convertJsonToCsv(json);<br/>    this.translationData.csv = csv;<br/>  }</span><span id="8f1e" class="na lw it mv b gy nf nc l nd ne">  convertCsvToYaml() {<br/>    const json = this.objectService.convertCsvToJson(this.translationData.csv);<br/>    const yaml = this.objectService.convertJsonToYaml(json);<br/>    this.translationData.yaml = yaml;<br/>  }<br/>}</span></pre><p id="1d1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个对话框中，用户可以添加JSON、CSV和YAML格式的译文。</p><p id="a4ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">add-translation-dialog.component.html</code>中，我们这样写道:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="1f5a" class="na lw it mv b gy nb nc l nd ne">&lt;form #addTranslationForm='ngForm' (ngSubmit)='save(addTranslationForm)'&gt;<br/>    &lt;h1 class="center"&gt;Add Language&lt;/h1&gt;<br/>    &lt;div id='language'&gt;<br/>        &lt;mat-form-field&gt;<br/>            &lt;input matInput placeholder="Language" required #language='ngModel' name='language'<br/>                [(ngModel)]='translationData.language'&gt;<br/>            &lt;mat-error *ngIf="language.invalid &amp;&amp; (language.dirty || language.touched)"&gt;<br/>                &lt;div *ngIf="language.errors.required"&gt;<br/>                    Language is required.<br/>                &lt;/div&gt;<br/>            &lt;/mat-error&gt;<br/>        &lt;/mat-form-field&gt;<br/>    &lt;/div&gt;<br/>    &lt;br&gt;</span><span id="6292" class="na lw it mv b gy nf nc l nd ne">&lt;h2 class="center"&gt;JSON&lt;/h2&gt;<br/>    &lt;ngx-monaco-editor [options]="jsonEditorOptions" name='json' [(ngModel)]="translationData.json"&gt;&lt;/ngx-monaco-editor&gt;<br/>    &lt;div class="center"&gt;<br/>        &lt;button mat-raised-button type='button' (click)='convertJsonToYaml()'&gt;JSON to YAML&lt;/button&gt;<br/>        &lt;button mat-raised-button type='button' (click)='convertJsonToCsv()'&gt;JSON to CSV&lt;/button&gt;<br/>    &lt;/div&gt;</span><span id="66dd" class="na lw it mv b gy nf nc l nd ne">&lt;h2 class="center"&gt;YAML&lt;/h2&gt;<br/>    &lt;ngx-monaco-editor [options]="yamlEditorOptions" name='yaml' [(ngModel)]="translationData.yaml"&gt;&lt;/ngx-monaco-editor&gt;<br/>    &lt;div class="center"&gt;<br/>        &lt;button mat-raised-button type='button' (click)='convertYamlToJson()'&gt;YAML to JSON&lt;/button&gt;<br/>        &lt;button mat-raised-button type='button' (click)='convertYamlToCsv()'&gt;YAML to CSV&lt;/button&gt;<br/>    &lt;/div&gt;</span><span id="0007" class="na lw it mv b gy nf nc l nd ne">&lt;h2 class="center"&gt;CSV&lt;/h2&gt;<br/>    &lt;ngx-monaco-editor [options]="csvEditorOptions" name='csv' [(ngModel)]="translationData.csv"&gt;&lt;/ngx-monaco-editor&gt;<br/>    &lt;div class="center"&gt;<br/>        &lt;button mat-raised-button type='button' (click)='convertCsvToJson()'&gt;CSV to JSON&lt;/button&gt;<br/>        &lt;button mat-raised-button type='button' (click)='convertCsvToYaml()'&gt;CSV to YAML&lt;/button&gt;<br/>    &lt;/div&gt;<br/>    &lt;div mat-dialog-actions&gt;<br/>        &lt;button mat-button (click)="cancel()"&gt;Cancel&lt;/button&gt;<br/>        &lt;button mat-button cdkFocusInitial type='submit'&gt;Add Translations&lt;/button&gt;<br/>    &lt;/div&gt;<br/>&lt;/form&gt;</span></pre><p id="a6d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着用户可以输入他们的翻译数据。</p><p id="b18e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">add-translation-dialog.component.scss</code>中，我们把:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="d7f4" class="na lw it mv b gy nb nc l nd ne">form {<br/>  mat-form-field {<br/>    width: 95%;<br/>    margin: 0 auto;<br/>  }<br/>}</span><span id="d8b5" class="na lw it mv b gy nf nc l nd ne">#language {<br/>  width: 100%;<br/>  margin: 0 auto;<br/>}</span></pre><p id="76fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这确保了表单域适合对话框。</p><p id="7631" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，在<code class="fe ms mt mu mv b">apps-page.component.ts</code>中，我们把这个:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="bf59" class="na lw it mv b gy nb nc l nd ne">import { Component, OnInit } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { AppService } from '../app.service';<br/>import { MatDialog } from '<a class="ae ky" href="http://twitter.com/angular/material" rel="noopener ugc nofollow" target="_blank">@angular/material</a>';<br/>import { AddAppDialogComponent } from '../add-app-dialog/add-app-dialog.component';<br/>import { EditAppDialogComponent } from '../edit-app-dialog/edit-app-dialog.component';<br/>import { Store, select } from '<a class="ae ky" href="http://twitter.com/ngrx/store" rel="noopener ugc nofollow" target="_blank">@ngrx/store</a>';<br/>import { SET_APPS } from '../reducers/apps-reducer';</span><span id="1fe6" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-apps-page',<br/>  templateUrl: './apps-page.component.html',<br/>  styleUrls: ['./apps-page.component.scss']<br/>})<br/>export class AppsPageComponent implements OnInit {<br/>  apps: any[] = [];</span><span id="0d26" class="na lw it mv b gy nf nc l nd ne">  constructor(<br/>    private appService: AppService,<br/>    public dialog: MatDialog,<br/>    private store: Store&lt;any&gt;<br/>  ) {<br/>    store.pipe(select('apps'))<br/>      .subscribe(apps =&gt; {<br/>        this.apps = (apps || [])<br/>          .filter(a =&gt; !a.deleted)<br/>          .sort((a, b) =&gt; +a.id - +b.id);<br/>      })<br/>  }</span><span id="ec2d" class="na lw it mv b gy nf nc l nd ne">  ngOnInit() {<br/>    this.getApps();<br/>  }</span><span id="f4a6" class="na lw it mv b gy nf nc l nd ne">  getApps() {<br/>    this.appService.getApps()<br/>      .subscribe(res =&gt; {<br/>        this.apps = res as any[];<br/>        this.store.dispatch({ type: SET_APPS, payload: res });<br/>      })<br/>  }</span><span id="faa6" class="na lw it mv b gy nf nc l nd ne">  openAddAppDialog() {<br/>    const dialogRef = this.dialog.open(AddAppDialogComponent, {<br/>      width: '70vw',<br/>      data: {}<br/>    })</span><span id="eeea" class="na lw it mv b gy nf nc l nd ne">    dialogRef.afterClosed().subscribe(result =&gt; {<br/>      console.log('The dialog was closed');<br/>    });<br/>  }</span><span id="be1a" class="na lw it mv b gy nf nc l nd ne">  openEditAppDialog(index: number) {<br/>    const dialogRef = this.dialog.open(EditAppDialogComponent, {<br/>      width: '70vw',<br/>      data: Object.assign({}, this.apps[index])<br/>    })</span><span id="9327" class="na lw it mv b gy nf nc l nd ne">    dialogRef.afterClosed().subscribe(result =&gt; {<br/>      console.log('The dialog was closed');<br/>    });<br/>  }</span><span id="0ffb" class="na lw it mv b gy nf nc l nd ne">  deleteApp(index: number) {<br/>    this.appService.removeApp(this.apps[index].id)<br/>      .subscribe(res =&gt; {<br/>        this.getApps();<br/>      })<br/>  }<br/>}</span></pre><p id="a5ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该组件的代码获取属于用户的所有应用程序并显示它们，用按钮打开对话框以添加和编辑应用程序数据并删除应用程序。</p><p id="0eab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">apps-page.component.html</code>中，我们有这个:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="4655" class="na lw it mv b gy nb nc l nd ne">&lt;div class="center"&gt;<br/>    &lt;h1&gt;Apps&lt;/h1&gt;<br/>&lt;/div&gt;<br/>&lt;div&gt;<br/>    &lt;h2&gt;Add App&lt;/h2&gt;<br/>    &lt;button mat-raised-button (click)='openAddAppDialog()'&gt;Add App&lt;/button&gt;<br/>&lt;/div&gt;<br/>&lt;div&gt;<br/>    &lt;h2&gt;Apps List&lt;/h2&gt;<br/>    &lt;mat-card *ngFor='let a of apps; let i = index'&gt;<br/>        &lt;mat-card-title&gt;<br/>            {{a.name}}<br/>        &lt;/mat-card-title&gt;<br/>        &lt;mat-card-subtitle&gt;<br/>            {{a.description}}<br/>        &lt;/mat-card-subtitle&gt;<br/>        &lt;mat-card-actions&gt;<br/>            &lt;a mat-button routerLink='/convert/{{a.id}}'&gt;Change Translations&lt;/a&gt;<br/>            &lt;button mat-button (click)='openEditAppDialog(i)'&gt;Edit&lt;/button&gt;<br/>            &lt;button mat-button (click)='deleteApp(i)'&gt;Delete&lt;/button&gt;<br/>        &lt;/mat-card-actions&gt;<br/>    &lt;/mat-card&gt;</span><span id="9592" class="na lw it mv b gy nf nc l nd ne">&lt;/div&gt;</span></pre><p id="0868" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">顶部有标题和一个打开添加应用程序对话框的按钮。底部有显示应用程序及其相应的编辑和删除按钮的卡片，以及一个链接到用户可以输入应用程序翻译的页面。</p><p id="5f59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">conversion-page.component.ts</code>中，我们把:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="bf73" class="na lw it mv b gy nb nc l nd ne">import { Component, OnInit } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { ObjectService } from '../object.service';<br/>import { Translation } from '../translation';<br/>import { MatDialog } from '<a class="ae ky" href="http://twitter.com/angular/material" rel="noopener ugc nofollow" target="_blank">@angular/material</a>';<br/>import { AddTranslationDialogComponent } from '../add-translation-dialog/add-translation-dialog.component';<br/>import { ActivatedRoute } from '<a class="ae ky" href="http://twitter.com/angular/router" rel="noopener ugc nofollow" target="_blank">@angular/router</a>';<br/>import { Store, select } from '<a class="ae ky" href="http://twitter.com/ngrx/store" rel="noopener ugc nofollow" target="_blank">@ngrx/store</a>';<br/>import { TranslationService } from '../translation.service';<br/>import { SET_TRANSLATIONS } from '../reducers/translations-reducer';<br/>import { NgForm } from '<a class="ae ky" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';<br/>import { AppService } from '../app.service';</span><span id="acc4" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-conversion-page',<br/>  templateUrl: './conversion-page.component.html',<br/>  styleUrls: ['./conversion-page.component.scss']<br/>})<br/>export class ConversionPageComponent implements OnInit {<br/>  jsonEditorOptions = { language: 'javascript' };<br/>  yamlEditorOptions = { language: 'yaml' };<br/>  csvEditorOptions = {};<br/>  appTranslations: Translation[] = [];<br/>  appId: number;<br/>  appData: any = &lt;any&gt;{};</span><span id="336a" class="na lw it mv b gy nf nc l nd ne">constructor(<br/>    private objectService: ObjectService,<br/>    public dialog: MatDialog,<br/>    private activeRoute: ActivatedRoute,<br/>    private store: Store&lt;Translation&gt;,<br/>    private translationService: TranslationService,<br/>    private appService: AppService<br/>  ) {<br/>    this.activeRoute.params.subscribe(params =&gt; {<br/>      this.appId = params.appId;<br/>    })</span><span id="7adc" class="na lw it mv b gy nf nc l nd ne">    store.pipe(select('translations'))<br/>      .subscribe(appTranslations =&gt; {<br/>        this.appTranslations = (appTranslations || [])</span><span id="0f03" class="na lw it mv b gy nf nc l nd ne">})<br/>  }</span><span id="dda3" class="na lw it mv b gy nf nc l nd ne">  ngOnInit() {<br/>    this.getTranslations();<br/>    this.getApp();<br/>  }</span><span id="5b83" class="na lw it mv b gy nf nc l nd ne">  getTranslations() {<br/>    this.translationService.getTranslationsByAppId(this.appId)<br/>      .subscribe(res =&gt; {<br/>        this.store.dispatch({ type: SET_TRANSLATIONS, payload: res });<br/>      })<br/>  }</span><span id="bf10" class="na lw it mv b gy nf nc l nd ne">  openAddTranslationDialog() {<br/>    const dialogRef = this.dialog.open(AddTranslationDialogComponent, {<br/>      width: '70vw',<br/>      maxHeight: '90vh',<br/>      data: this.appId<br/>    })</span><span id="6389" class="na lw it mv b gy nf nc l nd ne">dialogRef.afterClosed().subscribe(result =&gt; {<br/>      console.log('The dialog was closed');<br/>    });<br/>  }</span><span id="9dba" class="na lw it mv b gy nf nc l nd ne">  convertJsonToYaml(index: number) {<br/>    const yaml = this.objectService.convertJsonToYaml(this.appTranslations[index].json);<br/>    this.appTranslations[index].yaml = yaml;<br/>  }</span><span id="93cd" class="na lw it mv b gy nf nc l nd ne">  convertYamlToJson(index: number) {<br/>    const json = this.objectService.convertYamlToJson(this.appTranslations[index].yaml);<br/>    this.appTranslations[index].json = json;<br/>  }</span><span id="7e38" class="na lw it mv b gy nf nc l nd ne">  convertJsonToCsv(index: number) {<br/>    const csv = this.objectService.convertJsonToCsv(this.appTranslations[index].json);<br/>    this.appTranslations[index].csv = csv;<br/>  }</span><span id="c523" class="na lw it mv b gy nf nc l nd ne">  convertCsvToJson(index: number) {<br/>    const json = this.objectService.convertCsvToJson(this.appTranslations[index].csv);<br/>    this.appTranslations[index].json = json;<br/>  }</span><span id="9f4f" class="na lw it mv b gy nf nc l nd ne">  convertYamlToCsv(index: number) {<br/>    const json = this.objectService.convertYamlToJson(this.appTranslations[index].yaml);<br/>    const csv = this.objectService.convertJsonToCsv(json);<br/>    this.appTranslations[index].csv = csv;<br/>  }</span><span id="80c3" class="na lw it mv b gy nf nc l nd ne">  convertCsvToYaml(index: number) {<br/>    const json = this.objectService.convertCsvToJson(this.appTranslations[index].csv);<br/>    const yaml = this.objectService.convertJsonToYaml(json);<br/>    this.appTranslations[index].yaml = yaml;<br/>  }</span><span id="c08e" class="na lw it mv b gy nf nc l nd ne">  editTranslation(editTranslationForm: NgForm, translation: Translation) {<br/>    if (editTranslationForm.invalid) {<br/>      return;<br/>    }<br/>    this.translationService.editTranslation(translation)<br/>      .subscribe(res =&gt; {<br/>        this.getTranslations();<br/>      })<br/>  }</span><span id="ed8a" class="na lw it mv b gy nf nc l nd ne">  combineIntoOneCsv() {<br/>    const combinedCsv = this.objectService.combineIntoOneCsv(this.appTranslations);<br/>    this.appService.combineIntoOneCsv({ combinedCsv, appId: this.appId })<br/>      .subscribe(res =&gt; {<br/>        this.getApp();<br/>      })<br/>  }</span><span id="9381" class="na lw it mv b gy nf nc l nd ne">  getApp() {<br/>    this.appService.getApp(this.appId)<br/>      .subscribe(res =&gt; {<br/>        this.appData = res;<br/>      })<br/>  }<br/>}</span></pre><p id="8ee5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们获得用户应用程序的所有翻译并显示出来。此外，我们允许用户将所有翻译的CSV文件合并成一个文件。他们还可以一键转换格式之间的翻译。</p><p id="0dc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">conversion-page.component.ts</code>中，我们有:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="e730" class="na lw it mv b gy nb nc l nd ne">&lt;div class="center"&gt;<br/>    &lt;h1&gt;Convert Translation Formats&lt;/h1&gt;<br/>    &lt;button mat-raised-button (click)='openAddTranslationDialog()'&gt;Add Language&lt;/button&gt;<br/>    &lt;button mat-raised-button (click)='combineIntoOneCsv()'&gt;Combine CSVs into One&lt;/button&gt;<br/>&lt;/div&gt;<br/>&lt;br&gt;<br/>&lt;mat-card&gt;<br/>    &lt;mat-card-title&gt;<br/>        &lt;div class="language"&gt;<br/>            Combined CSV<br/>        &lt;/div&gt;<br/>    &lt;/mat-card-title&gt;<br/>    &lt;mat-card-content&gt;<br/>        &lt;ngx-monaco-editor [options]="csvEditorOptions" name='combinedCsv' [(ngModel)]="appData.combinedCsv"&gt;<br/>        &lt;/ngx-monaco-editor&gt;<br/>    &lt;/mat-card-content&gt;<br/>&lt;/mat-card&gt;</span><span id="31d9" class="na lw it mv b gy nf nc l nd ne">&lt;mat-card *ngFor='let a of appTranslations; let i = index'&gt;<br/>    &lt;mat-card-title&gt;<br/>        &lt;div class="language"&gt;<br/>            {{a.language}}<br/>        &lt;/div&gt;<br/>    &lt;/mat-card-title&gt;<br/>    &lt;mat-card-content&gt;<br/>        &lt;form #editTranslationForm='ngForm'&gt;<br/>            &lt;div class="language"&gt;<br/>                &lt;mat-form-field&gt;<br/>                    &lt;input matInput placeholder="Language" required #language='ngModel' name='language'<br/>                        [(ngModel)]='a.language'&gt;<br/>                    &lt;mat-error *ngIf="language.invalid &amp;&amp; (language.dirty || language.touched)"&gt;<br/>                        &lt;div *ngIf="language.errors.required"&gt;<br/>                            Language is required.<br/>                        &lt;/div&gt;<br/>                    &lt;/mat-error&gt;<br/>                &lt;/mat-form-field&gt;<br/>            &lt;/div&gt;<br/>            &lt;br&gt;</span><span id="9adb" class="na lw it mv b gy nf nc l nd ne">&lt;h2 class="center"&gt;JSON&lt;/h2&gt;<br/>            &lt;ngx-monaco-editor [options]="jsonEditorOptions" name='json' [(ngModel)]="a.json"&gt;&lt;/ngx-monaco-editor&gt;<br/>            &lt;div class="center"&gt;<br/>                &lt;button mat-raised-button type='button' (click)='convertJsonToYaml(i)'&gt;JSON to YAML&lt;/button&gt;<br/>                &lt;button mat-raised-button type='button' (click)='convertJsonToCsv(i)'&gt;JSON to CSV&lt;/button&gt;<br/>            &lt;/div&gt;</span><span id="5229" class="na lw it mv b gy nf nc l nd ne">&lt;h2 class="center"&gt;YAML&lt;/h2&gt;<br/>            &lt;ngx-monaco-editor [options]="yamlEditorOptions" name='yaml' [(ngModel)]="a.yaml"&gt;&lt;/ngx-monaco-editor&gt;<br/>            &lt;div class="center"&gt;<br/>                &lt;button mat-raised-button type='button' (click)='convertYamlToJson(i)'&gt;YAML to JSON&lt;/button&gt;<br/>                &lt;button mat-raised-button type='button' (click)='convertYamlToCsv(i)'&gt;YAML to CSV&lt;/button&gt;<br/>            &lt;/div&gt;</span><span id="5830" class="na lw it mv b gy nf nc l nd ne">&lt;h2 class="center"&gt;CSV&lt;/h2&gt;<br/>            &lt;ngx-monaco-editor [options]="csvEditorOptions" name='csv' [(ngModel)]="a.csv"&gt;&lt;/ngx-monaco-editor&gt;<br/>            &lt;div class="center"&gt;<br/>                &lt;button mat-raised-button type='button' (click)='convertCsvToJson(i)'&gt;CSV to JSON&lt;/button&gt;<br/>                &lt;button mat-raised-button type='button' (click)='convertCsvToYaml(i)'&gt;CSV to YAML&lt;/button&gt;<br/>            &lt;/div&gt;<br/>            &lt;mat-card-actions&gt;<br/>                &lt;button mat-raised-button type='button' (click)='editTranslation(editTranslationForm, a)'&gt;Edit<br/>                    Language&lt;/button&gt;<br/>                &lt;button mat-raised-button type='button'&gt;Delete Language&lt;/button&gt;<br/>            &lt;/mat-card-actions&gt;<br/>        &lt;/form&gt;<br/>    &lt;/mat-card-content&gt;<br/>&lt;/mat-card&gt;</span></pre><p id="d6ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将向用户显示用于输入翻译和语言名称的表单，以及用于编辑和删除翻译的按钮。</p><p id="d699" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">conversion-page.component.scss</code>中，我们把:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="7ac7" class="na lw it mv b gy nb nc l nd ne">form {<br/>  mat-form-field {<br/>    width: 95%;<br/>    margin: 0 auto;<br/>  }<br/>}</span><span id="942b" class="na lw it mv b gy nf nc l nd ne">.language {<br/>  width: 95%;<br/>  margin: 0 auto;<br/>}</span></pre><p id="f08d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将调整我们的表单域组件的宽度。</p><p id="a949" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来在<code class="fe ms mt mu mv b">edit-app-dialog.component.ts</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="6d84" class="na lw it mv b gy nb nc l nd ne">import { Component, OnInit, Inject } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { MatDialogRef, MAT_DIALOG_DATA } from '<a class="ae ky" href="http://twitter.com/angular/material" rel="noopener ugc nofollow" target="_blank">@angular/material</a>';<br/>import { AppService } from '../app.service';<br/>import { Store } from '<a class="ae ky" href="http://twitter.com/ngrx/store" rel="noopener ugc nofollow" target="_blank">@ngrx/store</a>';<br/>import { NgForm } from '<a class="ae ky" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';<br/>import { SET_APPS } from '../reducers/apps-reducer';</span><span id="9f01" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-edit-app-dialog',<br/>  templateUrl: './edit-app-dialog.component.html',<br/>  styleUrls: ['./edit-app-dialog.component.scss']<br/>})<br/>export class EditAppDialogComponent implements OnInit {</span><span id="7e5b" class="na lw it mv b gy nf nc l nd ne">  constructor(<br/>    public dialogRef: MatDialogRef&lt;EditAppDialogComponent&gt;,<br/>    <a class="ae ky" href="http://twitter.com/Inject" rel="noopener ugc nofollow" target="_blank">@Inject</a>(MAT_DIALOG_DATA) public appData: any,<br/>    private appService: AppService,<br/>    private store: Store&lt;any&gt;<br/>  ) { }</span><span id="0a4b" class="na lw it mv b gy nf nc l nd ne">  ngOnInit() {<br/>  }</span><span id="db78" class="na lw it mv b gy nf nc l nd ne">  save(addAppForm: NgForm) {<br/>    if (addAppForm.invalid) {<br/>      return;<br/>    }<br/>    this.appService.editApp(this.appData)<br/>      .subscribe(res =&gt; {<br/>        this.getApps();<br/>        this.dialogRef.close();<br/>      })<br/>  }</span><span id="9de5" class="na lw it mv b gy nf nc l nd ne">  getApps() {<br/>    this.appService.getApps()<br/>      .subscribe(res =&gt; {<br/>        this.store.dispatch({ type: SET_APPS, payload: res });<br/>      })<br/>  }<br/>}</span></pre><p id="4796" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这允许用户编辑和保存他们的应用程序数据。然后在<code class="fe ms mt mu mv b">edit-app-dialog.component.ts</code>，我们有:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="34aa" class="na lw it mv b gy nb nc l nd ne">&lt;h2&gt;Edit App&lt;/h2&gt;<br/>&lt;form #editAppForm='ngForm' (ngSubmit)='save(editAppForm)'&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="Name" required #name='ngModel' name='name' [(ngModel)]='appData.name'&gt;<br/>        &lt;mat-error *ngIf="name.invalid &amp;&amp; (name.dirty || name.touched)"&gt;<br/>            &lt;div *ngIf="name.errors.required"&gt;<br/>                Name is required.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;textarea matInput placeholder="Description" #description='ngModel' name='description'<br/>            [(ngModel)]='appData.description'&gt;<br/>            &lt;/textarea&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;div mat-dialog-actions&gt;<br/>        &lt;button mat-button (click)="cancel()"&gt;Cancel&lt;/button&gt;<br/>        &lt;button mat-button cdkFocusInitial&gt;Edit&lt;/button&gt;<br/>    &lt;/div&gt;<br/>&lt;/form&gt;</span></pre><p id="b9c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这允许用户编辑他们的应用程序的数据。</p><p id="b36e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后在<code class="fe ms mt mu mv b">edit-app-dialog.component.scss</code>中，我们放入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="3faa" class="na lw it mv b gy nb nc l nd ne">form {<br/>  mat-form-field {<br/>    width: 95%;<br/>    margin: 0 auto;<br/>  }<br/>}</span></pre><p id="ca32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将调整表单域的宽度。</p><p id="7e9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">home-page.component.ts</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="f80c" class="na lw it mv b gy nb nc l nd ne">import { Component, OnInit } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { ObjectService } from '../object.service';<br/>declare const require: any;<br/>const flatten = require('flat')</span><span id="0518" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-home-page',<br/>  templateUrl: './home-page.component.html',<br/>  styleUrls: ['./home-page.component.scss']<br/>})<br/>export class HomePageComponent implements OnInit {</span><span id="bc21" class="na lw it mv b gy nf nc l nd ne">constructor(<br/>  ) { }</span><span id="4741" class="na lw it mv b gy nf nc l nd ne">ngOnInit() {}</span><span id="ea57" class="na lw it mv b gy nf nc l nd ne">}</span></pre><p id="4a5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们在主页上没有任何功能。</p><p id="d0a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">home-page.component.html</code>中，我们放入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="6172" class="na lw it mv b gy nb nc l nd ne">&lt;div class="center"&gt;<br/>    &lt;h1&gt;Translation Manager&lt;/h1&gt;<br/>&lt;/div&gt;</span></pre><p id="d94a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这显示了我们的应用程序的标题。</p><p id="c103" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">login-page.component.ts</code>中，我们把:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="f496" class="na lw it mv b gy nb nc l nd ne">import { Component, OnInit } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { UserService } from '../user.service';<br/>import { Router } from '<a class="ae ky" href="http://twitter.com/angular/router" rel="noopener ugc nofollow" target="_blank">@angular/router</a>';<br/>import { NgForm } from '<a class="ae ky" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';</span><span id="60df" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-login-page',<br/>  templateUrl: './login-page.component.html',<br/>  styleUrls: ['./login-page.component.scss']<br/>})<br/>export class LoginPageComponent implements OnInit {<br/>  loginData: any = &lt;any&gt;{};</span><span id="783b" class="na lw it mv b gy nf nc l nd ne">  constructor(<br/>    private userService: UserService,<br/>    private router: Router<br/>  ) { }</span><span id="93ff" class="na lw it mv b gy nf nc l nd ne">  ngOnInit() {<br/>  }</span><span id="c7a1" class="na lw it mv b gy nf nc l nd ne">  login(loginForm: NgForm) {<br/>    if (loginForm.invalid) {<br/>      return;<br/>    }<br/>    this.userService.login(this.loginData)<br/>      .subscribe((res: any) =&gt; {<br/>        localStorage.setItem('token', res.token);<br/>        this.router.navigate(['/apps']);<br/>      }, err =&gt; {<br/>        alert('Invalid username or password');<br/>      })<br/>  }<br/>}</span></pre><p id="5a50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这使得用户可以通过调用我们的函数进行POST请求来登录，发送用户的用户名和密码。</p><p id="7c2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">home-page.component.html</code>中，我们把这个:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="1b4d" class="na lw it mv b gy nb nc l nd ne">&lt;div class="center"&gt;<br/>    &lt;h1&gt;Log In&lt;/h1&gt;<br/>&lt;/div&gt;<br/>&lt;form #loginForm='ngForm' (ngSubmit)='login(loginForm)'&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="Username" required #username='ngModel' name='username'<br/>            [(ngModel)]='loginData.username'&gt;<br/>        &lt;mat-error *ngIf="username.invalid &amp;&amp; (username.dirty || username.touched)"&gt;<br/>            &lt;div *ngIf="username.errors.required"&gt;<br/>                Username is required.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="Password" type='password' required #password='ngModel' name='password'<br/>            [(ngModel)]='loginData.password'&gt;<br/>        &lt;mat-error *ngIf="password.invalid &amp;&amp; (password.dirty || password.touched)"&gt;<br/>            &lt;div *ngIf="password.errors.required"&gt;<br/>                Password is required.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;button mat-raised-button type='submit'&gt;Log In&lt;/button&gt;<br/>    &lt;a mat-raised-button routerLink='/passwordResetRequest'&gt;Reset Password&lt;/a&gt;<br/>&lt;/form&gt;</span></pre><p id="3693" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是登录表单。</p><p id="e32a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">password-reset-page.component.ts</code>中，我们把:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="1a0e" class="na lw it mv b gy nb nc l nd ne">import { Component, OnInit } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { UserService } from '../user.service';<br/>import { NgForm } from '<a class="ae ky" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';<br/>import { ActivatedRoute } from '<a class="ae ky" href="http://twitter.com/angular/router" rel="noopener ugc nofollow" target="_blank">@angular/router</a>';</span><span id="f637" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-password-reset-page',<br/>  templateUrl: './password-reset-page.component.html',<br/>  styleUrls: ['./password-reset-page.component.scss']<br/>})<br/>export class PasswordResetPageComponent implements OnInit {<br/>  passwordResetData: any = &lt;any&gt;{};<br/>  passwordResetToken: string;<br/>  constructor(<br/>    private userService: UserService,<br/>    private route: ActivatedRoute<br/>  ) {<br/>    route.queryParams.subscribe(params =&gt; {<br/>      this.passwordResetToken = params['passwordResetToken'];<br/>    })<br/>  }</span><span id="8f1b" class="na lw it mv b gy nf nc l nd ne">  ngOnInit() {<br/>  }</span><span id="a479" class="na lw it mv b gy nf nc l nd ne">  passwordReset(passwordResetForm: NgForm) {<br/>    if (passwordResetForm.invalid ||<br/>      this.passwordResetData.confirmPassword<br/>      != this.passwordResetData.password) {<br/>      return;<br/>    }<br/>    let data = Object.assign({}, this.passwordResetData);<br/>    data.passwordResetToken = this.passwordResetToken;<br/>    this.userService.passwordReset(data)<br/>      .subscribe(res =&gt; {<br/>        alert('Password reset successful');<br/>      }, err =&gt; {<br/>        alert('Invalid Password Reset Token');<br/>      })<br/>  }<br/>}</span></pre><p id="3bbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将发送HTTP密码重置请求。</p><p id="a8d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">password-reset-page.component.html</code>中，我们把这个:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="b007" class="na lw it mv b gy nb nc l nd ne">&lt;div class="center"&gt;<br/>    &lt;h1&gt;Reset Password&lt;/h1&gt;<br/>&lt;/div&gt;<br/>&lt;form #passwordResetForm='ngForm' (ngSubmit)='passwordReset(passwordResetForm)'&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input type='password' matInput placeholder="Password" required #password='ngModel' name='password'<br/>            [(ngModel)]='passwordResetData.password'&gt;<br/>        &lt;mat-error *ngIf="password.invalid &amp;&amp; (password.dirty || password.touched)"&gt;<br/>            &lt;div *ngIf="password.errors.required"&gt;<br/>                Password is required.<br/>            &lt;/div&gt;&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input type='password' matInput placeholder="Confirm Password" required #confirmPassword='ngModel'<br/>            name='confirmPassword' [(ngModel)]='passwordResetData.confirmPassword'&gt;<br/>        &lt;mat-error *ngIf="confirmPassword.invalid &amp;&amp;<br/>        (confirmPassword.dirty ||<br/>        confirmPassword.touched  ||<br/>        passwordResetData.confirmPassword != passwordResetData.password)"&gt;<br/>            &lt;div *ngIf="confirmPassword.errors.required"&gt;<br/>                Confirm Password is required.<br/>            &lt;/div&gt;<br/>            &lt;div *ngIf="passwordResetData.confirmPassword != passwordResetData.password"&gt;<br/>                Password and Confirm Password must match.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;button mat-raised-button type='submit'&gt;Reset Password&lt;/button&gt;<br/>&lt;/form&gt;</span></pre><p id="0d5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户可以输入他们的密码和确认密码，如果匹配，密码将被提交。</p><p id="9941" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">password-reset-request-page.component.ts</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="c581" class="na lw it mv b gy nb nc l nd ne">import { Component, OnInit } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { NgForm } from '<a class="ae ky" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';<br/>import { UserService } from '../user.service';</span><span id="6751" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-password-reset-request-page',<br/>  templateUrl: './password-reset-request-page.component.html',<br/>  styleUrls: ['./password-reset-request-page.component.scss']<br/>})<br/>export class PasswordResetRequestPageComponent implements OnInit {<br/>  passwordResetData: any = &lt;any&gt;{};</span><span id="3ea5" class="na lw it mv b gy nf nc l nd ne">  constructor(<br/>    private userService: UserService<br/>  ) { }</span><span id="9f78" class="na lw it mv b gy nf nc l nd ne">  ngOnInit() {<br/>  }</span><span id="056e" class="na lw it mv b gy nf nc l nd ne">  passwordResetRequest(passwordResetRequestForm: NgForm) {<br/>    if (passwordResetRequestForm.invalid) {<br/>      return;<br/>    }<br/>    this.userService.passwordResetRequest(this.passwordResetData)<br/>      .subscribe(res =&gt; {<br/>        alert('Password reset email sent');<br/>      }, err =&gt; {<br/>        alert('Email not found');<br/>      })<br/>  }<br/>}</span></pre><p id="d4a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户可以发送他们的密码重置请求，收到一封带有密码重置令牌和密码重置说明的电子邮件。</p><p id="4971" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">password-reset-request-page.component.html</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="9742" class="na lw it mv b gy nb nc l nd ne">&lt;div class="center"&gt;<br/>    &lt;h1&gt;Request Password Reset Email&lt;/h1&gt;<br/>&lt;/div&gt;<br/>&lt;form #passwordResetRequestForm='ngForm' (ngSubmit)='passwordResetRequest(passwordResetRequestForm)'&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input pattern="\S+@\S+\.\S+" matInput placeholder="Email" required #email='ngModel' name='email'<br/>            [(ngModel)]='passwordResetData.email'&gt;<br/>        &lt;mat-error *ngIf="email.invalid &amp;&amp; (email.dirty || email.touched)"&gt;<br/>            &lt;div *ngIf="email.errors.required"&gt;<br/>                Email is required.<br/>            &lt;/div&gt;<br/>            &lt;div *ngIf="email.invalid"&gt;<br/>                Email is invalid.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;button mat-raised-button type='submit'&gt;Get Password Reset Email&lt;/button&gt;<br/>&lt;/form&gt;</span></pre><p id="5ccb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果在用户表中找到电子邮件，用户可以输入他们的电子邮件以获得密码重置电子邮件。</p><p id="ca17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">settings-page.component.ts</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="3648" class="na lw it mv b gy nb nc l nd ne">import { Component, OnInit } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { ActivatedRoute, Router } from '<a class="ae ky" href="http://twitter.com/angular/router" rel="noopener ugc nofollow" target="_blank">@angular/router</a>';<br/>import { NgForm } from '<a class="ae ky" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';<br/>import { UserService } from '../user.service';</span><span id="e828" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-settings-page',<br/>  templateUrl: './settings-page.component.html',<br/>  styleUrls: ['./settings-page.component.scss']<br/>})<br/>export class SettingsPageComponent implements OnInit {<br/>  currentTwitterUser: any = &lt;any&gt;{};<br/>  elements: any[] = [];<br/>  displayedColumns: string[] = ['key', 'value'];<br/>  updateUserData: any = &lt;any&gt;{};<br/>  updatePasswordData: any = &lt;any&gt;{};</span><span id="ba39" class="na lw it mv b gy nf nc l nd ne">constructor(<br/>    private userService: UserService,<br/>  ) { }</span><span id="8bc5" class="na lw it mv b gy nf nc l nd ne">  ngOnInit() {<br/>    this.currentUser();<br/>  }</span><span id="8cc9" class="na lw it mv b gy nf nc l nd ne">  updateUser(updateUserForm: NgForm) {<br/>    if (updateUserForm.invalid) {<br/>      return;<br/>    }<br/>    this.userService.updateUser(this.updateUserData)<br/>      .subscribe(res =&gt; {<br/>        alert('Updated user info successful.');<br/>      }, err =&gt; {<br/>        alert('Updated user info failed.');<br/>      })<br/>  }</span><span id="6166" class="na lw it mv b gy nf nc l nd ne">  updatePassword(updatePasswordForm: NgForm) {<br/>    if (updatePasswordForm.invalid) {<br/>      return;<br/>    }<br/>    this.userService.updatePassword(this.updatePasswordData)<br/>      .subscribe(res =&gt; {<br/>        alert('Updated password successful.');<br/>      }, err =&gt; {<br/>        alert('Updated password failed.');<br/>      })<br/>  }</span><span id="6952" class="na lw it mv b gy nf nc l nd ne">  currentUser() {<br/>    this.userService.currentUser()<br/>      .subscribe(res =&gt; {<br/>        this.updateUserData = res;<br/>      }, err =&gt; {</span><span id="76a6" class="na lw it mv b gy nf nc l nd ne">    })<br/>  }<br/>}</span></pre><p id="0210" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户可以更改他们的用户名、电子邮件和密码。</p><p id="5e58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">settings-page.component.html</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="9dea" class="na lw it mv b gy nb nc l nd ne">&lt;div class="center"&gt;<br/>    &lt;h1&gt;Settings&lt;/h1&gt;<br/>&lt;/div&gt;<br/>&lt;br&gt;<br/>&lt;div&gt;<br/>    &lt;h2&gt;Update User Info&lt;/h2&gt;<br/>&lt;/div&gt;<br/>&lt;br&gt;<br/>&lt;form #updateUserForm='ngForm' (ngSubmit)='updateUser(updateUserForm)'&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="Username" required #userName='ngModel' name='userName'<br/>            [(ngModel)]='updateUserData.userName'&gt;<br/>        &lt;mat-error *ngIf="userName.invalid &amp;&amp; (userName.dirty || userName.touched)"&gt;<br/>            &lt;div *ngIf="userName.errors.required"&gt;<br/>                Username is required.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input pattern="\S+@\S+\.\S+" matInput placeholder="Email" required #email='ngModel' name='email'<br/>            [(ngModel)]='updateUserData.email'&gt;<br/>        &lt;mat-error *ngIf="email.invalid &amp;&amp; (email.dirty || email.touched)"&gt;<br/>            &lt;div *ngIf="email.errors.required"&gt;<br/>                Email is required.<br/>            &lt;/div&gt;<br/>            &lt;div *ngIf="email.invalid"&gt;<br/>                Email is invalid.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;button mat-raised-button type='submit'&gt;Update User Info&lt;/button&gt;<br/>&lt;/form&gt;<br/>&lt;br&gt;</span><span id="7b2e" class="na lw it mv b gy nf nc l nd ne">&lt;div&gt;<br/>    &lt;h2&gt;Update Password&lt;/h2&gt;<br/>&lt;/div&gt;<br/>&lt;br&gt;<br/>&lt;form #updatePasswordForm='ngForm' (ngSubmit)='updatePassword(updatePasswordForm)'&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="Password" type='password' required #password='ngModel' name='password'<br/>            [(ngModel)]='updatePasswordData.password'&gt;<br/>        &lt;mat-error *ngIf="password.invalid &amp;&amp; (password.dirty || password.touched)"&gt;<br/>            &lt;div *ngIf="password.errors.required"&gt;<br/>                Password is required.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;button mat-raised-button type='submit'&gt;Update Password&lt;/button&gt;<br/>&lt;/form&gt;</span></pre><p id="7444" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">人们可以输入并保存他们的用户数据。</p><p id="94e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">sign-up-page.component.ts</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="1934" class="na lw it mv b gy nb nc l nd ne">import { Component, OnInit } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { UserService } from '../user.service';<br/>import { NgForm } from '<a class="ae ky" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';<br/>import { Router } from '<a class="ae ky" href="http://twitter.com/angular/router" rel="noopener ugc nofollow" target="_blank">@angular/router</a>';<br/>import _ from 'lodash';</span><span id="d032" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-sign-up-page',<br/>  templateUrl: './sign-up-page.component.html',<br/>  styleUrls: ['./sign-up-page.component.scss']<br/>})<br/>export class SignUpPageComponent implements OnInit {<br/>  signUpData: any = &lt;any&gt;{};</span><span id="d11c" class="na lw it mv b gy nf nc l nd ne">  constructor(<br/>    private userService: UserService,<br/>    private router: Router<br/>  ) { }</span><span id="5dd6" class="na lw it mv b gy nf nc l nd ne">  ngOnInit() {<br/>  }</span><span id="c43e" class="na lw it mv b gy nf nc l nd ne">  signUp(signUpForm: NgForm) {<br/>    if (signUpForm.invalid) {<br/>      return;<br/>    }<br/>    this.userService.signUp(this.signUpData)<br/>      .subscribe(res =&gt; {<br/>        this.login();<br/>      }, err =&gt; {<br/>        console.log(err);<br/>        if (<br/>          _.has(err, 'error.error.errors') &amp;&amp;<br/>          Array.isArray(err.error.error.errors) &amp;&amp;<br/>          err.error.error.errors.length &gt; 0<br/>        ) {<br/>          alert(err.error.error.errors[0].message);<br/>        }<br/>      })<br/>  }</span><span id="e7e2" class="na lw it mv b gy nf nc l nd ne">  login() {<br/>    this.userService.login(this.signUpData)<br/>      .subscribe((res: any) =&gt; {<br/>        localStorage.setItem('token', res.token);<br/>        this.router.navigate(['/apps']);<br/>      })<br/>  }<br/>}</span></pre><p id="02a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户可以注册并在注册后立即登录。为了简化工作流程，我们在示例中跳过了用户验证。</p><p id="d0f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">sign-up-page.component.html</code>中，我们把:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="f582" class="na lw it mv b gy nb nc l nd ne">&lt;div class="center"&gt;<br/>    &lt;h1&gt;Sign Up&lt;/h1&gt;<br/>&lt;/div&gt;<br/>&lt;br&gt;<br/>&lt;form #signUpForm='ngForm' (ngSubmit)='signUp(signUpForm)'&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="Username" required #username='ngModel' name='username'<br/>            [(ngModel)]='signUpData.username'&gt;<br/>        &lt;mat-error *ngIf="username.invalid &amp;&amp; (username.dirty || username.touched)"&gt;<br/>            &lt;div *ngIf="username.errors.required"&gt;<br/>                Username is required.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input pattern="\S+@\S+\.\S+" matInput placeholder="Email" required #email='ngModel' name='email'<br/>            [(ngModel)]='signUpData.email'&gt;<br/>        &lt;mat-error *ngIf="email.invalid &amp;&amp; (email.dirty || email.touched)"&gt;<br/>            &lt;div *ngIf="email.errors.required"&gt;<br/>                Email is required.<br/>            &lt;/div&gt;<br/>            &lt;div *ngIf="email.invalid"&gt;<br/>                Email is invalid.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="Password" type='password' required #password='ngModel' name='password'<br/>            [(ngModel)]='signUpData.password'&gt;<br/>        &lt;mat-error *ngIf="password.invalid &amp;&amp; (password.dirty || password.touched)"&gt;<br/>            &lt;div *ngIf="password.errors.required"&gt;<br/>                Password is required.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;button mat-raised-button type='submit'&gt;Sign Up&lt;/button&gt;<br/>&lt;/form&gt;</span></pre><p id="2612" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户可以通过输入用户名和密码注册。</p><p id="e423" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">top-bar.component.ts</code>中，我们放入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="c984" class="na lw it mv b gy nb nc l nd ne">import { Component, OnInit } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { Store, select } from '<a class="ae ky" href="http://twitter.com/ngrx/store" rel="noopener ugc nofollow" target="_blank">@ngrx/store</a>';<br/>import { TOGGLE_MENU } from '../reducers/menu-reducer';</span><span id="0126" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-top-bar',<br/>  templateUrl: './top-bar.component.html',<br/>  styleUrls: ['./top-bar.component.scss']<br/>})<br/>export class TopBarComponent implements OnInit {<br/>  menuOpen: boolean;</span><span id="1d5f" class="na lw it mv b gy nf nc l nd ne">  constructor(<br/>    private store: Store&lt;any&gt;<br/>  ) {<br/>    store.pipe(select('menu'))<br/>      .subscribe(menuOpen =&gt; {<br/>        this.menuOpen = menuOpen;<br/>      })<br/>  }</span><span id="03de" class="na lw it mv b gy nf nc l nd ne">  ngOnInit() {<br/>  }</span><span id="4d1f" class="na lw it mv b gy nf nc l nd ne">  toggleMenu() {<br/>    this.store.dispatch({ type: TOGGLE_MENU, payload: !this.menuOpen    });<br/>  }<br/>}</span></pre><p id="a700" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是elts通过更新商店中的菜单状态来切换菜单的逻辑。</p><p id="7333" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">top-bar.component.html</code>中，我们把:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="e3d1" class="na lw it mv b gy nb nc l nd ne">&lt;mat-toolbar&gt;<br/>    &lt;a (click)='toggleMenu()' class="menu-button"&gt;<br/>        &lt;i class="material-icons"&gt;<br/>            menu<br/>        &lt;/i&gt;<br/>    &lt;/a&gt;<br/>    Translation Manager<br/>&lt;/mat-toolbar&gt;</span></pre><p id="6b32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户会看到顶栏。在<code class="fe ms mt mu mv b">top-bar.component.scss</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="0967" class="na lw it mv b gy nb nc l nd ne">.menu-button {<br/>    margin-top: 6px;<br/>    margin-right: 10px;<br/>    cursor: pointer;<br/>}</span></pre><p id="8d83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这给出了菜单图标和文本之间的间距。</p><p id="b35b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">app-routing.module.ts</code>，我们有:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="71c0" class="na lw it mv b gy nb nc l nd ne">import { NgModule } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { Routes, RouterModule } from '<a class="ae ky" href="http://twitter.com/angular/router" rel="noopener ugc nofollow" target="_blank">@angular/router</a>';<br/>import { HomePageComponent } from './home-page/home-page.component';<br/>import { AppsPageComponent } from './apps-page/apps-page.component';<br/>import { ConversionPageComponent } from './conversion-page/conversion-page.component';<br/>import { LoginPageComponent } from './login-page/login-page.component';<br/>import { SignUpPageComponent } from './sign-up-page/sign-up-page.component';<br/>import { SettingsPageComponent } from './settings-page/settings-page.component';<br/>import { PasswordResetRequestPageComponent } from './password-reset-request-page/password-reset-request-page.component';<br/>import { PasswordResetPageComponent } from './password-reset-page/password-reset-page.component';<br/>import { IsAuthenticatedGuard } from './is-authenticated.guard';</span><span id="41ae" class="na lw it mv b gy nf nc l nd ne">const routes: Routes = [<br/>  { path: '', component: HomePageComponent },<br/>  { path: 'apps', component: AppsPageComponent },<br/>  { path: 'convert/:appId', component: ConversionPageComponent },<br/>  { path: 'login', component: LoginPageComponent },<br/>  { path: 'signup', component: SignUpPageComponent },<br/>  { path: 'settings', component: SettingsPageComponent, canActivate: [IsAuthenticatedGuard] },<br/>  { path: 'passwordResetRequest', component: PasswordResetRequestPageComponent },<br/>  { path: 'passwordReset', component: PasswordResetPageComponent },<br/>];</span><span id="08d2" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/NgModule" rel="noopener ugc nofollow" target="_blank">@NgModule</a>({<br/>  imports: [RouterModule.forRoot(routes)],<br/>  exports: [RouterModule]<br/>})<br/>export class AppRoutingModule { }</span></pre><p id="91d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着URL被映射到组件。用户可以通过输入列出的相应URL来访问这些页面。</p><p id="2cdd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">app.component.html</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="8062" class="na lw it mv b gy nb nc l nd ne">&lt;mat-sidenav-container class="example-container"&gt;<br/>    &lt;mat-sidenav mode="side" [opened]='menuOpen'&gt;<br/>        &lt;ul&gt;<br/>            &lt;li&gt;<br/>                &lt;b&gt;<br/>                    Translation Manager<br/>                &lt;/b&gt;<br/>            &lt;/li&gt;<br/>            &lt;li&gt;<br/>                &lt;a routerLink='/login' *ngIf='!isAuthenticated()'&gt;Log In&lt;/a&gt;<br/>            &lt;/li&gt;<br/>            &lt;li&gt;<br/>                &lt;a routerLink='/signup' *ngIf='!isAuthenticated()'&gt;Sign Up&lt;/a&gt;<br/>            &lt;/li&gt;<br/>            &lt;li&gt;<br/>                &lt;a href='#' (click)='logOut()' *ngIf='isAuthenticated()'&gt;Log Out&lt;/a&gt;<br/>            &lt;/li&gt;<br/>            &lt;li&gt;<br/>                &lt;a routerLink='/apps' *ngIf='isAuthenticated()'&gt;Apps&lt;/a&gt;<br/>            &lt;/li&gt;<br/>            &lt;li&gt;<br/>                &lt;a routerLink='/settings' *ngIf='isAuthenticated()'&gt;Settings&lt;/a&gt;<br/>            &lt;/li&gt;<br/>        &lt;/ul&gt;</span><span id="ad82" class="na lw it mv b gy nf nc l nd ne">&lt;/mat-sidenav&gt;<br/>    &lt;mat-sidenav-content&gt;<br/>        &lt;app-top-bar&gt;&lt;/app-top-bar&gt;<br/>        &lt;div id='content'&gt;<br/>            &lt;router-outlet&gt;&lt;/router-outlet&gt;<br/>        &lt;/div&gt;<br/>    &lt;/mat-sidenav-content&gt;<br/>&lt;/mat-sidenav-container&gt;</span></pre><p id="2a7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到上面文件中列出的菜单、顶栏和路线。</p><p id="1761" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">app.component.scss</code>中，我们输入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="3774" class="na lw it mv b gy nb nc l nd ne">#content {<br/>    padding: 20px;<br/>    min-height: 100vh;<br/>  }</span><span id="6703" class="na lw it mv b gy nf nc l nd ne">ul {<br/>    list-style-type: none;<br/>    margin: 0;<br/>    li {<br/>      padding: 20px 5px;<br/>    }<br/>}</span></pre><p id="32e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这给了页面和菜单项一些填充。</p><p id="824b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">app.component.ts</code>中，我们放入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="8343" class="na lw it mv b gy nb nc l nd ne">import { Component, HostListener } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { Store, select } from '<a class="ae ky" href="http://twitter.com/ngrx/store" rel="noopener ugc nofollow" target="_blank">@ngrx/store</a>';<br/>import { TOGGLE_MENU } from './reducers/menu-reducer';<br/>import { UserService } from './user.service';</span><span id="18d1" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-root',<br/>  templateUrl: './app.component.html',<br/>  styleUrls: ['./app.component.scss']<br/>})<br/>export class AppComponent {<br/>  menuOpen: boolean;</span><span id="4ab3" class="na lw it mv b gy nf nc l nd ne">  constructor(<br/>    private store: Store&lt;any&gt;,<br/>    private userService: UserService<br/>  ) {<br/>    store.pipe(select('menu'))<br/>      .subscribe(menuOpen =&gt; {<br/>        this.menuOpen = menuOpen;<br/>      })<br/>  }</span><span id="d59d" class="na lw it mv b gy nf nc l nd ne">  isAuthenticated() {<br/>    return this.userService.isAuthenticated();<br/>  }</span><span id="40af" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/HostListener" rel="noopener ugc nofollow" target="_blank">  @HostListener</a>('document:click', ['$event'])<br/>  public onClick(event) {<br/>    const isOutside = !event.target.className.includes("menu-button") &amp;&amp;<br/>      !event.target.className.includes("material-icons") &amp;&amp;<br/>      !event.target.className.includes("mat-drawer-inner-container")<br/>    if (isOutside) {<br/>      this.menuOpen = false;<br/>      this.store.dispatch({ type: TOGGLE_MENU, payload: this.menuOpen });<br/>    }<br/>  }</span><span id="d800" class="na lw it mv b gy nf nc l nd ne">  logOut() {<br/>    this.userService.logOut();<br/>  }<br/>}</span></pre><p id="3293" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着用户可以注销，菜单只在点击菜单按钮时显示，当URL改变时消失。</p><p id="c116" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后在<code class="fe ms mt mu mv b">app.module.ts</code>中，我们放入:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="3d0f" class="na lw it mv b gy nb nc l nd ne">import { BrowserModule } from '<a class="ae ky" href="http://twitter.com/angular/platform-browser" rel="noopener ugc nofollow" target="_blank">@angular/platform-browser</a>';<br/>import { NgModule } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { MonacoEditorModule } from 'ngx-monaco-editor';<br/>import { BrowserAnimationsModule } from '<a class="ae ky" href="http://twitter.com/angular/platform-browser" rel="noopener ugc nofollow" target="_blank">@angular/platform-browser</a>/animations';<br/>import {<br/>  MatButtonModule,<br/>  MatCheckboxModule,<br/>  MatInputModule,<br/>  MatMenuModule,<br/>  MatSidenavModule,<br/>  MatToolbarModule,<br/>  MatTableModule,<br/>  MatDialogModule,<br/>  MAT_DIALOG_DEFAULT_OPTIONS,<br/>  MatDatepickerModule,<br/>  MatSelectModule,<br/>  MatCardModule,<br/>  MatFormFieldModule<br/>} from '<a class="ae ky" href="http://twitter.com/angular/material" rel="noopener ugc nofollow" target="_blank">@angular/material</a>';</span><span id="8a2f" class="na lw it mv b gy nf nc l nd ne">import { AppRoutingModule } from './app-routing.module';<br/>import { AppComponent } from './app.component';<br/>import { ObjectService } from './object.service';<br/>import { HomePageComponent } from './home-page/home-page.component';<br/>import { LoginPageComponent } from './login-page/login-page.component';<br/>import { SignUpPageComponent } from './sign-up-page/sign-up-page.component';<br/>import { FormsModule } from '<a class="ae ky" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';<br/>import { ConversionPageComponent } from './conversion-page/conversion-page.component';<br/>import { AppsPageComponent } from './apps-page/apps-page.component';<br/>import { SettingsPageComponent } from './settings-page/settings-page.component';<br/>import { StoreModule } from '<a class="ae ky" href="http://twitter.com/ngrx/store" rel="noopener ugc nofollow" target="_blank">@ngrx/store</a>';<br/>import { reducers } from './reducers';<br/>import { HttpClientModule, HTTP_INTERCEPTORS } from '<a class="ae ky" href="http://twitter.com/angular/common" rel="noopener ugc nofollow" target="_blank">@angular/common</a>/http';<br/>import { HttpReqInterceptor } from './http-req-interceptor';<br/>import { UserService } from './user.service';<br/>import { PasswordResetRequestPageComponent } from './password-reset-request-page/password-reset-request-page.component';<br/>import { PasswordResetPageComponent } from './password-reset-page/password-reset-page.component';<br/>import { TopBarComponent } from './top-bar/top-bar.component';<br/>import { TranslationService } from './translation.service';<br/>import { AddAppDialogComponent } from './add-app-dialog/add-app-dialog.component';<br/>import { EditAppDialogComponent } from './edit-app-dialog/edit-app-dialog.component';<br/>import { AddTranslationDialogComponent } from './add-translation-dialog/add-translation-dialog.component';</span><span id="4c60" class="na lw it mv b gy nf nc l nd ne"><a class="ae ky" href="http://twitter.com/NgModule" rel="noopener ugc nofollow" target="_blank">@NgModule</a>({<br/>  declarations: [<br/>    AppComponent,<br/>    HomePageComponent,<br/>    LoginPageComponent,<br/>    SignUpPageComponent,<br/>    ConversionPageComponent,<br/>    AppsPageComponent,<br/>    SettingsPageComponent,<br/>    PasswordResetRequestPageComponent,<br/>    PasswordResetPageComponent,<br/>    TopBarComponent,<br/>    AddAppDialogComponent,<br/>    EditAppDialogComponent,<br/>    AddTranslationDialogComponent,</span><span id="7a32" class="na lw it mv b gy nf nc l nd ne">],<br/>  imports: [<br/>    BrowserModule,<br/>    AppRoutingModule,<br/>    FormsModule,<br/>    MonacoEditorModule.forRoot(),<br/>    MatButtonModule,<br/>    StoreModule.forRoot(reducers),<br/>    BrowserAnimationsModule,<br/>    MatButtonModule,<br/>    MatCheckboxModule,<br/>    MatFormFieldModule,<br/>    MatInputModule,<br/>    MatMenuModule,<br/>    MatSidenavModule,<br/>    MatToolbarModule,<br/>    MatTableModule,<br/>    FormsModule,<br/>    HttpClientModule,<br/>    MatDialogModule,<br/>    MatDatepickerModule,<br/>    MatSelectModule,<br/>    MatCardModule<br/>  ],<br/>  providers: [<br/>    {<br/>      provide: HTTP_INTERCEPTORS,<br/>      useClass: HttpReqInterceptor,<br/>      multi: true<br/>    },<br/>    ObjectService,<br/>    UserService,<br/>    TranslationService,<br/>    {<br/>      provide: MAT_DIALOG_DEFAULT_OPTIONS,<br/>      useValue: { hasBackdrop: false }<br/>    },<br/>  ],<br/>  bootstrap: [AppComponent],<br/>  entryComponents: [<br/>    AddAppDialogComponent,<br/>    EditAppDialogComponent,<br/>    AddTranslationDialogComponent<br/>  ],<br/>})<br/>export class AppModule { }</span></pre><p id="729a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这确保了我们需要的所有组件和库都包含在模块中，因此它们可以在我们的应用程序中使用。</p><p id="9663" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b">environment.ts</code>中，我们把:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="671b" class="na lw it mv b gy nb nc l nd ne">export const environment = {<br/>  production: false,<br/>  apiUrl: '<a class="ae ky" href="http://localhost:8080'" rel="noopener ugc nofollow" target="_blank">http://localhost:8080'</a><br/>};</span></pre><p id="4a85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这允许我们访问我们的后端应用程序。</p></div></div>    
</body>
</html>