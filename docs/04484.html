<html>
<head>
<title>Why I Created Zen (Yet Another Programming Language)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么我创造了Zen(另一种编程语言)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-i-created-zen-yet-another-programming-language-88d2ec878494?source=collection_archive---------18-----------------------#2020-04-15">https://betterprogramming.pub/why-i-created-zen-yet-another-programming-language-88d2ec878494?source=collection_archive---------18-----------------------#2020-04-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3bbe" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Zen是一种通用编程语言，旨在构建简单、可靠、高效的程序</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/30ae368beb1b0fd375ac3b459be515a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pk3YcTxSdUqb40hFmjO-uw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">斯科特·韦伯在<a class="ae kv" href="https://unsplash.com/s/photos/zen-garden?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="cf79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我说简单、可靠和高效时，我是认真的。Zen的语法设计得很清晰，这意味着你写的代码不言自明。此外，运行时的体系结构被设计为无论在什么平台上都能高效可靠地运行您的程序。您可以在几乎任何环境中开发Zen应用程序，并且不管平台如何，部署时几乎没有性能损失。</p><blockquote class="ls lt lu"><p id="0327" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">在撰写本文时，Zen正在开发中。编译器和虚拟机的alpha版本将很快推出。同时，你可以<a class="ae kv" href="https://github.com/itssamuelrowe/zen" rel="noopener ugc nofollow" target="_blank">浏览源代码</a>。</p></blockquote><p id="e1cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我决定创建自己的编程语言，因为我从九年级起就对编译器设计感兴趣。此外，我没有找到任何满足我所有需求的现有语言。在本文中，我将解释一些概念，我认为这些概念对于一种既有趣又高效的动态类型编程语言是必要的。我的目标不是构建一种玩具语言，而是创建一种成熟的编程语言。为什么？因为我认为创造一种每个人都喜欢的编程语言真的很酷。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="fbe9" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">简单的</h1><p id="f725" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">Zen的语法是有意设计来限制完成某项任务的方法数量的。例如，与其他动态类型编程语言不同，方法和属性不能在运行时引入对象。作为一名Zen程序员，你将更多地关注程序的逻辑，而不是处理对象的复杂状态。</p><p id="1dba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">编写代码所需的令牌最少。考虑到这一点，去掉了标记，例如分号来结束简单语句，大括号来括住块，等等——这在类似C的编程语言中很常见。</p><p id="ddf0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Zen提供了良好的可读性和清晰的语法，强调自然语言。乍一看，用Zen写的代码几乎看起来像伪代码。您可以编写代码并快速执行来测试您的想法。</p><p id="671f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于新手和初学者来说，Zen非常容易学习和使用。鉴于学习曲线很简单，你不必成为专家就能在日常生活中应用禅。Zen会自动为您处理垃圾收集和释放资源之类的事情。</p><p id="fc2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还不相信禅是简单的吗？在这种情况下，这里有一个用Zen写的二分搜索法算法的例子:</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="a992" class="ni mh iq ne b gy nj nk l nl nm"><strong class="ne ir">function</strong> search(values, key)<br/>    <strong class="ne ir">var</strong> start = 0<br/>    <strong class="ne ir">var</strong> end = values.size - 1<br/>    <strong class="ne ir">var</strong> result = null<br/>    <strong class="ne ir">while</strong> start &lt;= end<br/>        <strong class="ne ir">var</strong> middle = (end - start) / 2<br/>        <strong class="ne ir">if</strong> values[middle] == key<br/>             result = middle<br/>             <strong class="ne ir">break</strong><br/>        <strong class="ne ir">else</strong> <strong class="ne ir">if</strong> values[middle] &gt; key<br/>            end = middle - 1<br/>        <strong class="ne ir">else</strong><br/>            end = middle + 1<br/>    <strong class="ne ir">return</strong> result</span><span id="fa38" class="ni mh iq ne b gy nn nk l nl nm"><strong class="ne ir">function</strong> main(...arguments)<br/>    <strong class="ne ir">var</strong> values = array(53, 118, 519, 1216)<br/>    <strong class="ne ir">var</strong> result = search(values, 27)<br/>    <strong class="ne ir">if</strong> result != null<br/>        print('Found key 27 at index ' + result + '.')<br/>    <strong class="ne ir">else</strong><br/>        print('Could not find key 27.')</span></pre></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="a0f6" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">动态类型化</h1><p id="8519" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">Zen是动态类型的，这有助于避免编写支持代码。然而，它被设计成在编译时检测许多编程错误，而其他动态类型语言在运行时报告这些错误。这为编译器提供了优化的机会。因此，您可以享受运行时效率的提高和开发人员的体验。</p><p id="0470" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事实上，我创立Zen的前提是创造一种受Python和Java启发的编程语言。采用Python简单明了的语法来改善开发人员的体验。类似地，运行时架构受到Java的启发，以提高运行时效率。</p><p id="d16b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设是通过对语言的某些限制，生产力和效率都可以达到。语言施加的限制允许编译器利用源代码中可用的静态信息。例如，在Zen中，属性和方法不能动态地引入到对象中。此外，如果静态方法不能通过对象(如C#)调用，编译器可以发出一条指令来调用静态函数。类似地，当方法调用同一个类中的其他方法时，编译器可以简单地发出一条指令，通过虚拟方法表调用目标方法。同样的技术可以应用于属性。你明白我想说什么吗？</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="a5bf" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">便携:一次编写，随处运行</h1><p id="e944" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">你用Zen编写的程序被编译成字节码，字节码以一种特殊的二进制格式编码，这种格式被称为<strong class="ky ir">二进制实体格式(FEB) </strong>。当你运行你的程序时，虚拟机解释这些字节码。对于每个平台，都需要虚拟机的特定实现。然而，一旦实现完成，您的程序就可以无缝地在虚拟机上运行。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="23da" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">缺乏含蓄的习语</h1><p id="87a9" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated"><strong class="ky ir">未定义的值、真/假值和许多其他隐含的习惯用法在Zen中是不可用的。这个想法是为了限制你表达某事的方式。例如，布尔值总是从关系表达式和等式表达式中导出。没有对象到布尔值的隐式转换。这种受Java和C#启发的设计选择允许您编写可读且安全的代码。</strong></p><p id="c6a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我个人认为，相比其他类型的错误，更多的bug源于隐式习惯用法。此外，这样的错误很难追踪。例如，当编程语言将不同的对象视为相同时，当程序员试图使用它们时，会导致意外的行为。</p><p id="0949" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里有一个JavaScript的例子。虽然JavaScript在ES6发布之前不允许默认参数，但模拟默认参数是一种常见的模式，如下所示:</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="f0f6" class="ni mh iq ne b gy nj nk l nl nm"><strong class="ne ir">function</strong> example(value) {<br/>    value = value || 1;<br/>}</span></pre><p id="67ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本例中，当没有传递参数时，函数将<code class="fe no np nq ne b">value</code>更新为<code class="fe no np nq ne b">1</code>。然而，如果您试图将<code class="fe no np nq ne b">0</code>作为参数传递，JavaScript中的truthy测试将会失败，导致您的变量保存的是<code class="fe no np nq ne b">1</code>而不是<code class="fe no np nq ne b">0</code>。显然，有一种更好的写法，但是如果语言没有真/假值，我们就不会有这个问题。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="8da8" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">并发</h1><p id="c1bb" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">在Python和Ruby的参考实现CPython和MRuby中，分别存在一个全局解释器锁(GIL)。GIL保护解释器内部免受可能破坏数据的竞争条件的影响。在多线程上下文中，这种锁在任何给定时间只允许一个线程执行代码。例如，如果您有四个线程在四核计算机上工作，那么在任何给定时间，只有一个线程和一个内核是活动的。</p><p id="6288" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Zen中，<strong class="ky ir">虚拟机将线程实现为一等公民</strong>。各种内部组件(包括垃圾收集器、JIT编译器、类加载器)都是线程安全的。因此，全局解释器锁不存在。这意味着你的程序可以充分利用多核系统。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="a33c" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">快速编译时间</h1><p id="7556" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">Zen在语法和语义方面的简单设计允许您快速编译源代码。即使编译器多次通过，这一点仍然成立。</p><p id="6d8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，Zen中的依赖管理非常优雅。编译器只处理直接导入的类。你用Zen编写的程序被编译成一种紧凑的二进制格式，称为<strong class="ky ir">二进制实体格式(FEB) </strong>。当编译后的类从源代码导入时，编译器会使用一个简单的符号加载器，它会丢弃不必要的信息，只加载所需的符号。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="e295" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">结论</h1><p id="2524" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">我知道这篇文章相当长。然而，它对Zen编程语言的一些最重要的特性进行了概述。这里讨论的许多特性现在在Zen中都不可用。然而，本文描述了Zen的整体愿景。</p><p id="84fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我相信创造禅值得一试。在最坏的情况下，我会享受三年学习编写编译器和虚拟机的时光。也许我会创造出一种别人欣赏的编程语言。最后，我最深的希望是，读完这篇文章后，你会有动力去探索禅宗，并发现它如何帮助你自己的项目。</p><p id="fc12" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">需要说明的是，我不是编译器设计专家。我知道我在这篇文章中提出的论点很容易被击败。事实上，我提到的一些事情可能是错的。请在评论区畅所欲言。</p><p id="16bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="cf6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想联系我们或者愿意投稿，这是我的电子邮件地址:samuelrowe1999@gmail.com。</p></div></div>    
</body>
</html>