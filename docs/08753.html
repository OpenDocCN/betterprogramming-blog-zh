<html>
<head>
<title>How To Write Clean Code in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python写干净的代码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-write-clean-code-in-python-5d67746133f2?source=collection_archive---------7-----------------------#2021-06-08">https://betterprogramming.pub/how-to-write-clean-code-in-python-5d67746133f2?source=collection_archive---------7-----------------------#2021-06-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fd73" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Python示例编写干净代码的3个技巧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5c022b220a157f871a1b21d7758713aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S7l8m1iFRMJve25V"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">莎拉·多维勒在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="6450" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“干净代码”到底是什么？虽然有许多定义，但大多数人都同意的最流行的定义是“干净的代码是易于理解、易于更改或维护的代码。”</p><p id="400e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于代码读得比写得多，不断提醒自己练习写干净的代码在我们的职业生涯中是至关重要的。</p><p id="c14c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将与你分享我多年来收集的一些知识，同时也给出一些Python的例子。也就是说，这些原则应该普遍适用于大多数编程语言。</p><h2 id="10fe" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">TL；速度三角形定位法(dead reckoning)</h2><ul class=""><li id="f7c3" class="mo mp it lb b lc mq lf mr li ms lm mt lq mu lu mv mw mx my bi translated">给事物命名时要保持一致</li><li id="3d2e" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">给事物命名时，消除混淆的空间</li><li id="6c2c" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">避免双重否定</li><li id="7993" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">编写不言自明的代码</li><li id="b688" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">不要滥用评论</li></ul></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="5cc2" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">1.恰当地命名事物</h1><h2 id="aa58" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><strong class="ak">消除任何混淆的空间</strong></h2><p id="d58c" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">尽管这是书中最古老的技巧，但却是我们经常忘记的最简单的规则。在给一个文件夹、函数或变量命名之前，一定要问自己这样一个问题:“如果我这样命名，它会不会有别的意思或者让其他人感到困惑？”</p><p id="b1f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里的总体思想是在命名任何事物时，总是消除任何混淆的空间。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="0411" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之所以说<code class="fe ob oc od oe b">expired</code>是一个不太理想的名字，是因为<code class="fe ob oc od oe b">expired</code>本身就有歧义。从事该项目的新开发人员不知道<code class="fe ob oc od oe b">expired</code>是日期还是布尔值。</p><h2 id="fd57" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">与命名保持一致</h2><p id="e8a0" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">在团队中工作时，在整个项目中保持一致性对于避免混乱和怀疑是非常重要的。这适用于变量名、文件名、函数名，甚至目录结构。</p><p id="0f18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">任何东西都不应该仅仅根据你的个人喜好来命名。在修改任何东西之前，一定要检查别人已经写了什么，并进行讨论。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><h2 id="b8ac" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">选择名字时的额外提示</h2><ol class=""><li id="0433" class="mo mp it lb b lc mq lf mr li ms lm mt lq mu lu of mw mx my bi translated">变量是名词(即<code class="fe ob oc od oe b">product_name</code>)。</li><li id="9bbe" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu of mw mx my bi translated">做某事的功能是动词(即<code class="fe ob oc od oe b">def compute_user_score()</code>)。</li><li id="2baa" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu of mw mx my bi translated">布尔变量或返回布尔的函数是疑问句(即<code class="fe ob oc od oe b">def is_valid()</code>)。</li><li id="b984" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu of mw mx my bi translated">名称应该是描述性的，但不要过于冗长(即<code class="fe ob oc od oe b">def compute_fibonacci()</code>而不是<code class="fe ob oc od oe b">def compute_fibonacci_with_dynamic_programming()</code>)。</li></ol></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="2f1f" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">2.避免双重否定</h1><p id="0298" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">"你能确保一会儿别忘了关灯吗？"</p><p id="f45d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">呃。那么，我到底该不该关灯？等等，让我再读一遍。</p><p id="9480" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们承认双重否定只是让人困惑。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="d79c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你不得不多看一遍才能确定，那就臭了。</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="e697" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">3.编写自我解释的代码</h1><p id="1e9a" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">在过去，我记得曾被含糊地告知，工程师应该到处散布注释以“提高代码质量”。</p><p id="00c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那些日子早已过去。相反，工程师需要编写对人们有意义的自我解释的代码。例如，我们应该尝试在一个描述性的自读变量中捕获一个复杂的逻辑。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><h2 id="9b4e" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">不要滥用评论</h2><p id="8602" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">像代码本身一样，注释也会过时。</p><p id="81da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当代码被重构时，人们经常忘记更新注释。当这种情况发生时，评论本身会间接地成为混乱的根源。</p><p id="6da5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每当你觉得有必要写一个注释的时候，你应该总是重新评估你刚刚写的代码，看看如何使它变得更清晰。</p><p id="f0c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这一节，我真的很喜欢阅读下面的文章，它很好地解释了为什么我们在编写代码时不应该滥用注释:</p><div class="og oh gp gr oi oj"><a href="https://medium.com/swlh/stop-adding-comments-to-your-code-80a3575519ad" rel="noopener follow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd iu gy z fp oo fr fs op fu fw is bi translated">停止向代码中添加注释</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">我当时正在教一门计算机编程的入门课程，与我的同事就如何…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">medium.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox ks oj"/></div></div></a></div><h2 id="6a29" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">何时写评论的例子</h2><p id="e64f" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">我会考虑使用注释的场景之一是当我必须使用切片时。这通常会引发类似“我们为什么要这样做？为什么不是其他指数？”诸如此类。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="54c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="966e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您是一名新开发人员，第一次看上面的代码。</p><p id="264e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我首先想到的是“为什么我们对每个请求都要随机等待两秒钟？”</p><p id="ccfa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">原来编写代码的最初开发人员只是希望我们限制发送给第三方API的请求数量。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="1906" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总是站在别人的角度考虑问题(例如，“别人会如何理解我的代码？”).如果你从一个列表中切分或使用一个特定的索引(即<code class="fe ob oc od oe b">array[3]</code>)，没有人会知道你这样做的确切原因。</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="59d5" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">我如何应用这些知识？</h1><p id="0640" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">没有人能够从第一天就写出干净的代码。事实上，每个人都是从编写“糟糕”或“丑陋”的代码开始的。</p><p id="9189" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像生活中的大多数事情一样，要想擅长某件事，你只需要一遍又一遍地练习。你必须投入时间。</p><p id="3965" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了练习，以下是对我有用的事情:</p><ul class=""><li id="1641" class="mo mp it lb b lc ld lf lg li oy lm oz lq pa lu mv mw mx my bi translated">不断问自己类似“有没有更好的写法？这是不是让别人看了很迷惑？”</li><li id="6f4b" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">参与代码评审。</li><li id="dd4a" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">探索其他编写良好的代码库。如果你想要一些写得好的、干净的Python代码的例子，可以去看看Python <a class="ae ky" href="https://github.com/psf/requests" rel="noopener ugc nofollow" target="_blank"> requests </a>库。</li><li id="33a4" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">与人交谈，讨论或交换意见，你会学得更快。</li></ul></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="837a" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">最后的想法</h1><p id="f445" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">对于许多非技术人员来说，编写干净的代码很难解释，因为对他们来说，它对公司的业务影响几乎没有直接价值。</p><p id="922f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编写干净的代码还会占用大量额外的时间和注意力，这两个因素间接转化为企业的成本。</p><p id="d708" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，经过一段时间后，代码库中有干净代码的效果对工程师来说是至关重要的。有了更干净的代码库，工程师将能够更快地交付代码和部署应用程序，以满足业务目标。</p><p id="7874" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最重要的是，拥有干净的代码是至关重要的，这样新的合作者或贡献者可以在开始新项目时更快地进入状态。</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h2 id="75ad" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><a class="ae ky" href="https://jerrynsh.com/how-to-write-clean-code-in-python/" rel="noopener ugc nofollow" target="_blank">最初发表于jerrynsh.com</a></h2><div class="og oh gp gr oi oj"><a rel="noopener  ugc nofollow" target="_blank" href="/3-useful-python-f-string-tricks-you-probably-dont-know-f908f7ed6cf5"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd iu gy z fp oo fr fs op fu fw is bi translated">你可能不知道的3个有用的Python f-string技巧</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">关于Python的格式化字符串(f-string)你需要知道的事情</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">better编程. pub</p></div></div><div class="os l"><div class="pb l ou ov ow os ox ks oj"/></div></div></a></div><div class="og oh gp gr oi oj"><a rel="noopener  ugc nofollow" target="_blank" href="/stop-using-exceptions-like-this-in-python-2bd8ba7d8841"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd iu gy z fp oo fr fs op fu fw is bi translated">在Python中停止使用这样的异常</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">Python中要避免的四个常见错误处理错误</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">better编程. pub</p></div></div><div class="os l"><div class="pc l ou ov ow os ox ks oj"/></div></div></a></div></div></div>    
</body>
</html>