<html>
<head>
<title>Create an Omnitrix watchOS App Using SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SwiftUI创建Omnitrix watchOS应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-an-omnitrix-app-for-your-apple-watch-using-swiftui-d694a9c5fb80?source=collection_archive---------1-----------------------#2022-01-07">https://betterprogramming.pub/create-an-omnitrix-app-for-your-apple-watch-using-swiftui-d694a9c5fb80?source=collection_archive---------1-----------------------#2022-01-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e05b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为你的Apple Watch打造一款应用</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/571c6fe3963039520950882183c437f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hf4nXVGJhzQG-4PdDYYe8w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="38e4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本教程中，我们将为Apple Watch开发一个Omnitrix应用程序。是的，你猜对了。这款app的灵感来源于漫画系列，<code class="fe lr ls lt lu b">Ben 10</code>！！</p><h1 id="583c" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">结构</h1><p id="7916" class="pw-post-body-paragraph kv kw iq kx b ky mn jr la lb mo ju ld le mp lg lh li mq lk ll lm mr lo lp lq ij bi translated">这是由两部分组成的系列。第一部分涵盖了基本的设置，这相对来说比较容易开发。并将为用户提供该应用程序的最简单的实现。而后一部分提供了可选的实现，使应用程序按照系列更加卡通准确。</p><p id="c00e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">项目所需的所有资产都在<a class="ae ms" href="https://www.dropbox.com/sh/p7ua8vcdfymsp48/AAB-7ot14UolnKrHw-KwSYLsa?dl=0" rel="noopener ugc nofollow" target="_blank">链接</a>中提供。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/c29fe5561649a7460f60f65089035438.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gedh8zIOHbeXY_yX5UiyHg.png"/></div></div></figure><h1 id="7f17" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">项目设置</h1><p id="a8b1" class="pw-post-body-paragraph kv kw iq kx b ky mn jr la lb mo ju ld le mp lg lh li mq lk ll lm mr lo lp lq ij bi translated">启动<a class="ae ms" href="https://developer.apple.com/xcode/" rel="noopener ugc nofollow" target="_blank"> Xcode </a>，选择新建Xcode项目，选择watchOS下的Watch App创建项目。我们将跳过另一个选项，因为我们需要为此项目创建一个独立的手表应用程序。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/1b60b97171ffcd0d2a46be6d5c10dc37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uFFQGLp4Nt8MHxo4TUnPNA.png"/></div></div></figure><p id="3065" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在下一个提示中，命名您的项目，并确保将接口设置为SwiftUI。您也可以取消最后两个选项，因为在开发过程中不需要它们。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/8736aeeb1540cd0f578f9c70a2b60430.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L0-PUBkRCizchoJpPX4v-A.png"/></div></div></figure><p id="38b2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">瞧啊。！您刚刚创建了您的SwiftUI项目。要预览它，请单击右侧拆分编辑器中的Resume选项。如果您没有看到它，请确保从调整编辑器选项中启用画布选项。一旦成功构建，您将看到带有Hello World消息的手表预览。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/162070fc498f7adba93af9f9105d38e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qLDdDkBu5ynHgJBlbe5RWg.png"/></div></div></figure><h1 id="bd5a" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">创建手表外观</h1><p id="e126" class="pw-post-body-paragraph kv kw iq kx b ky mn jr la lb mo ju ld le mp lg lh li mq lk ll lm mr lo lp lq ij bi translated">从UI的角度来看，这部分由两层组成。底部是表盘，它会根据数字表冠的输入旋转。上面一个是图像视图，用来存放外星人的图像。所以先从最下面的开始吧。</p><p id="e9ac" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将<a class="ae ms" href="https://www.dropbox.com/home/Omnitrix" rel="noopener ugc nofollow" target="_blank">图像集</a>导入到项目的资产文件中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/551fc536b2b81be02acd50bfdb42206f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TYiu5UOIHs86UIjv016_ow.png"/></div></div></figure><p id="bedf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们回到<code class="fe lr ls lt lu b">ContentView</code>文件来实现表脸层。在文件中，删除<code class="fe lr ls lt lu b">Text</code>元素，添加带有<code class="fe lr ls lt lu b"><a class="ae ms" href="https://developer.apple.com/documentation/SwiftUI/Image/resizable(capInsets:resizingMode:)" rel="noopener ugc nofollow" target="_blank">resizable</a></code>和<code class="fe lr ls lt lu b"><a class="ae ms" href="https://developer.apple.com/documentation/swiftui/view/aspectratio(_:contentmode:)-5ehx6" rel="noopener ugc nofollow" target="_blank">aspect ratio</a></code>修饰符的<code class="fe lr ls lt lu b">Image</code>。</p><pre class="kg kh ki kj gt my lu mz na aw nb bi"><span id="0e9b" class="nc lw iq lu b gy nd ne l nf ng">Image("Watchface")<br/>    .resizable()<br/>    .aspectRatio(contentMode: .fit)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/0fa1ce485c21cf172e41678996347cff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uxK4FkThpMU-NabB7qmkzg.png"/></div></div></figure><h1 id="c3ac" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">向观察面添加旋转动画</h1><p id="a32a" class="pw-post-body-paragraph kv kw iq kx b ky mn jr la lb mo ju ld le mp lg lh li mq lk ll lm mr lo lp lq ij bi translated">我们希望表盘根据数字表冠的输入旋转。相同的读数将存储在<code class="fe lr ls lt lu b">scrollOffset</code>变量中。</p><pre class="kg kh ki kj gt my lu mz na aw nb bi"><span id="2e9d" class="nc lw iq lu b gy nd ne l nf ng">@State var scrollAmount = 0.0</span></pre><p id="9789" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我们将添加<code class="fe lr ls lt lu b"><a class="ae ms" href="https://developer.apple.com/documentation/swiftui/view/digitalcrownrotation(_:)" rel="noopener ugc nofollow" target="_blank">digitalCrownRotation</a></code>修饰符来注册和更新变量。</p><p id="fe05" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">此外，<code class="fe lr ls lt lu b">Image</code>必须放在<code class="fe lr ls lt lu b">ZStack</code>中，因为我们希望在彼此之上实现多个层。然后给<code class="fe lr ls lt lu b">ZStack</code>添加digitalCrownRotation修改器。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="583d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">由于我们想添加10个外星人，我们将设置范围从0到9，步长值为1。</p><p id="b9d9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">之后，我们还会添加一个<code class="fe lr ls lt lu b"><a class="ae ms" href="https://developer.apple.com/documentation/swiftui/view/focusable(_:)" rel="noopener ugc nofollow" target="_blank">focusable</a></code>修饰符。这将使表盘聚焦，无需选择即可响应数字表冠输入。将<a class="ae ms" href="https://developer.apple.com/documentation/swiftui/text/offset(_:)" rel="noopener ugc nofollow" target="_blank">偏移</a>添加到<code class="fe lr ls lt lu b">ZStack</code>修饰符中，将元素平移到稍低的位置，以便利用空的屏幕空间。</p><pre class="kg kh ki kj gt my lu mz na aw nb bi"><span id="50b3" class="nc lw iq lu b gy nd ne l nf ng">.offset(y: 15)<br/>.focusable(true)</span></pre><p id="5cd5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">侦听器被设置，动画可以添加到表盘本身。为此，添加<code class="fe lr ls lt lu b"><a class="ae ms" href="https://developer.apple.com/documentation/swiftui/view/rotationeffect(_:anchor:)" rel="noopener ugc nofollow" target="_blank">rotationEffect</a></code>修改器到图像中。</p><pre class="kg kh ki kj gt my lu mz na aw nb bi"><span id="becc" class="nc lw iq lu b gy nd ne l nf ng">.rotationEffect(.degrees(scrollAmount*90))</span></pre><p id="45b5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这样，图像将在数字表冠的一个进程中旋转90度。完整的代码现在应该是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="dabd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在模拟器或设备上运行应用程序。数字表冠旋转时，表盘会产生动画效果，产生表盘变化的效果。</p><blockquote class="nk nl nm"><p id="feac" class="kv kw nn kx b ky kz jr la lb lc ju ld no lf lg lh np lj lk ll nq ln lo lp lq ij bi translated">在模拟器上，将光标移动到双冠上，并上下滚动以旋转它。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/f466df0ef88e9ee562c1d61c53512487.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_skJVSk_-qMj5Zbqtod6tA.gif"/></div></div></figure><p id="a53e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意:在开发过程中，iPhone和Apple Watch之间的连接丢失是相当常见的。您可以通过在Apple Watch上打开相机应用程序来强制同步过程。</p><h1 id="27a5" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">外星人！</h1><p id="b6a4" class="pw-post-body-paragraph kv kw iq kx b ky mn jr la lb mo ju ld le mp lg lh li mq lk ll lm mr lo lp lq ij bi translated">最后一步，我们将添加外来图像到项目中。为此，创建一个<code class="fe lr ls lt lu b">enum</code>来存放integer作为原始值的数据。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="1397" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在此之后，在表盘下方再加一个<code class="fe lr ls lt lu b">Image</code>。对于图像名称，我们将添加以下逻辑。</p><pre class="kg kh ki kj gt my lu mz na aw nb bi"><span id="4325" class="nc lw iq lu b gy nd ne l nf ng">Image("\(Aliens(rawValue: Int(scrollAmount))!)")</span></pre><p id="d1e5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这里，<code class="fe lr ls lt lu b">scrollOffset</code>变量被用来匹配来自enum的使用原始值的相应alien。由于偏移量是double类型，我们需要将它转换成整数。</p><p id="97c1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，添加下面的修饰符来调整图像的大小，并使其保持在表盘框架内。</p><pre class="kg kh ki kj gt my lu mz na aw nb bi"><span id="c232" class="nc lw iq lu b gy nd ne l nf ng">.resizable()<br/>.padding(.all, 45)<br/>.aspectRatio(contentMode: .fit)</span></pre><p id="9e58" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">到目前为止，您的项目代码必须如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="3ff2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，你已经完成了这个应用程序的第一部分。你可以在实体Apple Watch上运行它，并在你的手腕上体验一个版本的Omnitrix！！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/385b7bca08eeacaa1202b647b1d96b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*l7CZGb8-NJCOlv5NXJK_Eg.gif"/></div></div></figure><p id="bc5d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">项目代码可在<a class="ae ms" href="https://github.com/Rockindash/Omnitrix-Part1" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上获得。</p><h1 id="ae7f" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">下一步是什么</h1><p id="9630" class="pw-post-body-paragraph kv kw iq kx b ky mn jr la lb mo ju ld le mp lg lh li mq lk ll lm mr lo lp lq ij bi translated">你可以跟随本教程的<a class="ae ms" href="https://medium.com/@amol.kmr05/create-an-omnitrix-app-for-your-apple-watch-using-swiftui-part-2-474a3745b713" rel="noopener">第二部分</a>来创建一个更加卡通化的版本。其中包括添加带有打开和关闭动画的附加层。</p></div></div>    
</body>
</html>