<html>
<head>
<title>Tools to Manage the NPM Dependencies in Your Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">管理项目中NPM依赖项的工具</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/tools-to-manage-npm-dependency-in-your-project-as-a-professional-b95c4d35844a?source=collection_archive---------11-----------------------#2020-11-16">https://betterprogramming.pub/tools-to-manage-npm-dependency-in-your-project-as-a-professional-b95c4d35844a?source=collection_archive---------11-----------------------#2020-11-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f36b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">查找项目中缺少或未使用的依赖项等</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7ce2c3f41e33f35da94410029d71badf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VINiIVKBX5H8teRZ"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">费伦茨·阿尔马西在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="44f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为什么我们这么多谈工程质量和技术债？因为这直接或间接地影响了开发的速度、支持的复杂程度、实现新功能的时间以及扩展当前功能的可能性。</p><p id="8148" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">影响项目质量的因素很多。其中一些很难理解，很难检查，需要经验丰富的开发人员或QA工程师进行人工检查。其他的就简单明了。它们可以被自动检查和修复。尽管如此，它们代表了整个项目质量的一个重要部分。</p><p id="17d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，您将发现NPM包可以自动检查项目的一些关键方面，例如NPM依赖项、它们的许可证以及验证安全问题。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="4a80" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">查找遗漏或未使用的依赖关系</strong></h1><p id="d422" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">Depcheck 是一个非常有用的小库，可以检查哪些依赖项没有被使用，哪些依赖项在<code class="fe mw mx my mz b">package.json</code>中没有，但是在你的代码库中使用了。</p><div class="na nb gp gr nc nd"><a href="https://www.npmjs.com/package/depcheck" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd ir gy z fp ni fr fs nj fu fw ip bi translated">深度检查</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">检查节点模块中的依赖关系</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">www.npmjs.com</p></div></div><div class="nm l"><div class="nn l no np nq nm nr kp nd"/></div></div></a></div><p id="9881" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">强烈建议在本地(例如，在预提交挂钩上)或在远程CI中使用它，以避免以下问题:</p><ul class=""><li id="78f6" class="ns nt iq ky b kz la lc ld lf nu lj nv ln nw lr nx ny nz oa bi translated">冗余依赖增加了构建/捆绑包的大小，从而导致以下后果:Docker映像变得更大，AWS Lambda处理程序的冷启动时间也更长，并且事件可能会超过Lambda大小限制。</li><li id="7fed" class="ns nt iq ky b kz ob lc oc lf od lj oe ln of lr nx ny nz oa bi translated">在生产中，缺失的依赖关系会以完全意想不到的方式破坏您的应用程序。此外，如果它们是开发依赖项，它们可能会使您的CI/CD管道崩溃。</li></ul><h2 id="b4f2" class="og ma iq bd mb oh oi dn mf oj ok dp mj lf ol om ml lj on oo mn ln op oq mp or bi translated">安装和使用</h2><pre class="kg kh ki kj gt os mz ot ou aw ov bi"><span id="c436" class="og ma iq mz b gy ow ox l oy oz">npm install -g depcheck<br/>// or<br/>yarn global add depcheck</span></pre><h2 id="5aa5" class="og ma iq bd mb oh oi dn mf oj ok dp mj lf ol om ml lj on oo mn ln op oq mp or bi translated">用法示例</h2><pre class="kg kh ki kj gt os mz ot ou aw ov bi"><span id="e656" class="og ma iq mz b gy ow ox l oy oz">// usage as npm script</span><span id="7bbd" class="og ma iq mz b gy pa ox l oy oz">"dependencies:check": "yarn run depcheck",</span></pre><p id="562d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过运行此命令，您可以看到已发布依赖项的列表:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/3b9472916bc37fba34925b313526586d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j95aTZzhA-5nksp8sjYOhQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">纱线运行深度检查</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="5b49" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">检查依赖关系中的漏洞</strong></h1><p id="58a7" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated"><a class="ae kv" href="https://docs.npmjs.com/cli/v6/commands/npm-audit" rel="noopener ugc nofollow" target="_blank"> npm-audit </a>、<a class="ae kv" href="https://classic.yarnpkg.com/en/docs/cli/audit/" rel="noopener ugc nofollow" target="_blank"> yarn audit </a>、<a class="ae kv" href="https://www.npmjs.com/package/improved-yarn-audit" rel="noopener ugc nofollow" target="_blank"> improved-yarn-audit </a>是可以发现依赖漏洞的工具。此外，它们会自动更新软件包来解决问题。npm审计和yarn审计都预装了包管理器，但我更喜欢改进的yarn审计。它是一个围绕yarn audit的包装器，提供了一些改进——特别是在CI管道中的使用(来自docs ):</p><blockquote class="pc pd pe"><p id="7362" class="kw kx pf ky b kz la jr lb lc ld ju le pg lg lh li ph lk ll lm pi lo lp lq lr ij bi translated">-无法忽略咨询</p><p id="95c9" class="kw kx pf ky b kz la jr lb lc ld ju le pg lg lh li ph lk ll lm pi lo lp lq lr ij bi translated">-无法过滤低严重性问题</p><p id="4ecd" class="kw kx pf ky b kz la jr lb lc ld ju le pg lg lh li ph lk ll lm pi lo lp lq lr ij bi translated">-NPM注册中心的持续网络问题导致误报</p></blockquote><div class="na nb gp gr nc nd"><a href="https://www.npmjs.com/package/improved-yarn-audit" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd ir gy z fp ni fr fs nj fu fw ip bi translated">改进的纱线审计</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">这个项目旨在改善现有的纱线包装经理审计功能。</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">www.npmjs.com</p></div></div><div class="nm l"><div class="pj l no np nq nm nr kp nd"/></div></div></a></div><h2 id="f1c5" class="og ma iq bd mb oh oi dn mf oj ok dp mj lf ol om ml lj on oo mn ln op oq mp or bi translated"><strong class="ak">安装</strong></h2><pre class="kg kh ki kj gt os mz ot ou aw ov bi"><span id="f371" class="og ma iq mz b gy ow ox l oy oz">npm install -g improved-yarn-audit<br/>// or<br/>yarn global add improved-yarn-audit</span></pre><h2 id="e240" class="og ma iq bd mb oh oi dn mf oj ok dp mj lf ol om ml lj on oo mn ln op oq mp or bi translated"><strong class="ak">用法示例</strong></h2><pre class="kg kh ki kj gt os mz ot ou aw ov bi"><span id="c002" class="og ma iq mz b gy ow ox l oy oz">"dependencies:audit": "yarn run improved-yarn-audit — min-severity moderate",</span></pre><p id="0c1a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面，您可以看到在真实项目代码库中使用此命令的结果。该工具也搜索可传递依赖关系中的漏洞:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pk"><img src="../Images/37fa627e83c7f3150917dfe8fac5e328.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9kfacbkwv-6k-TVNP2hMdA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">纱线运行改善-纱线审计-最低-中等严重程度</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="cde5" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">检查依赖关系的许可证</strong></h1><p id="0b50" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">对于实际的生产项目，依赖项许可证的使用是至关重要的，因为您使用依赖项的方式可能会被软件包的许可证所禁止。为了避免这种情况，您应该持续检查您在项目中使用的所有依赖项的许可证。如果你的项目是一个创业公司，根据他们的许可证适当地使用依赖关系是强制性的，这样才能让投资者认可你的产品。<a class="ae kv" href="https://www.npmjs.com/package/license-checker" rel="noopener ugc nofollow" target="_blank">许可证检查器</a>是最好的方法！</p><div class="na nb gp gr nc nd"><a href="https://www.npmjs.com/package/license-checker" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd ir gy z fp ni fr fs nj fu fw ip bi translated">执照检查员</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">从v17.0.0开始，failOn和onlyAllow参数使用分号代替逗号作为分隔符。一些许可证名称…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">www.npmjs.com</p></div></div><div class="nm l"><div class="pl l no np nq nm nr kp nd"/></div></div></a></div><h2 id="8404" class="og ma iq bd mb oh oi dn mf oj ok dp mj lf ol om ml lj on oo mn ln op oq mp or bi translated"><strong class="ak">安装</strong></h2><pre class="kg kh ki kj gt os mz ot ou aw ov bi"><span id="c0de" class="og ma iq mz b gy ow ox l oy oz">npm install -g license-checker <br/>// or <br/>yarn global add license-checker</span></pre><h2 id="fb4c" class="og ma iq bd mb oh oi dn mf oj ok dp mj lf ol om ml lj on oo mn ln op oq mp or bi translated"><strong class="ak">用法示例</strong></h2><pre class="kg kh ki kj gt os mz ot ou aw ov bi"><span id="5342" class="og ma iq mz b gy ow ox l oy oz">"licenses:check": "yarn run license-checker --exclude 'MIT, MIT OR X11, BSD, ISC'",</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pm"><img src="../Images/d7fb19738b98a41c47a3fd7fb1c9b491.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tPaCOCPnojCSA9I0iJr5LA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">纱线运行许可证检查器—不包括'麻省理工学院，麻省理工学院或X11，BSD，ISC '</p></figure><p id="5f2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是对于CI/CD中的用法，我更喜欢下面的变体，因为它要短得多:</p><pre class="kg kh ki kj gt os mz ot ou aw ov bi"><span id="737f" class="og ma iq mz b gy ow ox l oy oz">"licenses:check:ci": "yarn run license-checker — summary",</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pn"><img src="../Images/db870f5ed83bcc709ffea44ae928a8db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3eUwPzV-ELkMZ414U6Y0Vg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">纱线运行许可检查器—摘要</p></figure><p id="01b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇文章能帮助你解决或避免NPM软件包的问题。感谢阅读！</p></div></div>    
</body>
</html>