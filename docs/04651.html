<html>
<head>
<title>5 Custom React Hooks to Make Your Life Easier</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">5个定制的React挂钩，让你的生活更轻松</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-custom-react-hooks-to-make-your-life-easier-a344f7ce4e31?source=collection_archive---------18-----------------------#2020-04-27">https://betterprogramming.pub/5-custom-react-hooks-to-make-your-life-easier-a344f7ce4e31?source=collection_archive---------18-----------------------#2020-04-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5a2e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">今天就把这些放到你的代码库中吧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/52ad8a9e24fb1cdab264c8389c6a0ed4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NyZ3969av1xjfGPhe28zjA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Vishal Jadhav 在<a class="ae ky" href="https://unsplash.com/s/photos/hooks?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="2477" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你好世界！今天我想和你分享我关于React Hooks的笔记。相信从React的16.8版本开始，当Hooks推出的时候，大家就有机会去了解一下了。我也相信这篇文章会帮助你很好地使用钩子。</p><p id="8c95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们开始之前，我应该注意，我使用TypeScript只是因为我的偏好，如果你愿意，你可以使用普通JavaScript的钩子。</p><p id="66ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个部分将有:</p><ol class=""><li id="a46d" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">就绪代码片段</li><li id="35c5" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">说明</li><li id="4382" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">用法示例</li></ol><p id="e219" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，我们不要再浪费时间了！</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="ac89" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">使用输入</h1><p id="4982" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我的建议是从我最喜欢的钩子开始——<code class="fe nn no np nq b">useInput</code>。我估计这个钩子和默认的React钩子一样经常被我使用。SPA中的交互是主要部分之一，<code class="fe nn no np nq b">input</code>就是很好的代表。大多数时候，我们使用受控的<code class="fe nn no np nq b">input</code>。这个钩子将帮助你准确地管理这个案例。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="7595" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一个参数，我们有<code class="fe nn no np nq b">defaultValue = ‘</code>，它设置为本地<code class="fe nn no np nq b">useState</code>。钩子内部只有一个函数。让我们仔细看看。<code class="fe nn no np nq b">data</code>是单个参数，可以是字符串或反应事件。我们有一个类型检查来决定我们是否需要析构这个值，或者可以直接使用它。</p><p id="4f78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的定制钩子从它的状态和函数返回值来处理变化。这个函数可以作为一个钩子的常规设置器，也可以传递给<code class="fe nn no np nq b">input</code>的处理程序<code class="fe nn no np nq b">onChange</code>。</p><p id="2855" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个用法的例子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/9a5d10883cd6dd2945a6546073c129d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AtNKeIIw3z51i9JJ8z0SEw.png"/></div></div></figure><p id="ce75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我之前所说，我们可以使用<code class="fe nn no np nq b">setEmail</code>作为常规设置器:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/b79387f7608ec41a1f21f62305981729.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C9A37Fi4k996R6_yQuQHAg.png"/></div></div></figure><p id="6246" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">行动中:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/ec2a87d97fdc53385042768bd8592902.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*eqUTnm_o1Uyc9wiIVeDilg.gif"/></div></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="8fbc" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">使用开关</h1><p id="14c3" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">下一个钩子是<code class="fe nn no np nq b">useToggle</code>。我们经常需要切换一些东西，那么为什么不在一个钩子中转换一下呢？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="3fb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个钩子有一个<code class="fe nn no np nq b">defaultValue = false</code>参数，我们存储在<code class="fe nn no np nq b">useState</code>中。单个函数接受<code class="fe nn no np nq b">value</code>，可以是<code class="fe nn no np nq b">boolean</code>也可以是<code class="fe nn no np nq b">ClickEvent</code>。</p><p id="a9c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看一些例子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/fcc547f60df51b1155a46ed50a962712.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aeq2rau8eA1wbsKwWQFw3g.png"/></div></div></figure><p id="7467" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是它在用户界面中的样子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/d716ea73e0e92f34db09146203eecd5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*FkMiu6oP3j7u_hc0WiRTKA.gif"/></div></div></figure><p id="3f4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看如何使用设置值的能力，而不是切换它。例如，我们需要两个按钮来打开/关闭每个切换器，而不管它的当前状态。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/5c8f087e04b17007f2d0945be2cdf0fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NuOAEraJER8oHZfQFLi0Aw.png"/></div></div></figure><p id="edc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是它在用户界面上的样子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/f75e34804d47d85609a155aca6ece411.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*dC4DYU5Mw-6VAvOk-2n2IQ.gif"/></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="1b8d" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">useEventListener</h1><p id="95f1" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">有时有必要添加一个事件监听器。这里的主要问题是要记住删除它。同样，我们可以用一个定制的钩子把它包起来。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="11e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这个钩子，我们需要一个处理程序、事件名和一个目标(可选参数，默认情况下，我们使用<code class="fe nn no np nq b">window</code>)。</p><p id="3220" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nn no np nq b">useEffect</code>的帮助下，我们可以在渲染完一个组件后做任何我们想做的事情。首先，我们检查提供的元素是否支持<code class="fe nn no np nq b">addEventListener</code>。然后我们添加一个处理程序，当然，我们从<code class="fe nn no np nq b">useEffect</code>返回函数，在这里我们可以在销毁一个组件之前删除我们的监听器。</p><p id="1373" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法的例子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/2de45c12ddac730bea99ffe53eded5fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8rbFKMBGH9ULs6WXyFnzfQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/39fbf910fa6309d6090fcf619e9692a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Nri0lUrXvriBMyzhRVg4Bw.gif"/></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="9470" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">useWindowScrollBlock</h1><p id="685f" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">这个钩子你不会那么经常用，但还是要学的好。当主窗口的滚动必须被锁定时，如果你有模态窗口或移动菜单，这可能是有用的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="d155" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是目前为止最简单的钩子。我们在第一次渲染时保存初始物体的溢出值，然后将其更改为<code class="fe nn no np nq b">hidden</code>。我们在卸载时给它初始状态。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/668c63a335ec0eb91af575eb762b560d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I3sTTUHNTrLmvJXqGcOS6w.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/08156c710ae3cdf95a631568bcd2fd59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*MPfd6aMbhWhoDm9-uEKMSQ.gif"/></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="a74b" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">使用Fetch</h1><p id="c35c" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">最后一个是最复杂的，但同时，这个钩子是最有用的，从我的角度来看。从它的名字就能明白它的用途。这个钩子用于请求。我通常使用Redux-Saga或Redux-Thunk通过<a class="ae ky" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux </a>进行所有请求，但有时可能会发生某个请求不重要，不需要这种方法的情况。钩子可以处理这种情况。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="44c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">钩子只接受一个参数:将要执行的函数。在我们的情况下，这是一个请求。我们保持商店中流程的当前状态。可以是<code class="fe nn no np nq b">pending</code>、<code class="fe nn no np nq b">resolve</code>或<code class="fe nn no np nq b">reject</code>。来自请求的响应也将存储在<code class="fe nn no np nq b">useState</code>中。响应的类型将取自<code class="fe nn no np nq b">generic</code>。</p><p id="21f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看一些行动:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/0c87f7ecc8d5ee6c344e6be036ac22d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mp6JbMOSSyy0KIWdtQSl6Q.png"/></div></div></figure><p id="064d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我还必须分享<code class="fe nn no np nq b">API</code>的源代码，以便了解全貌:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/9dbc16e1fe77f8ef573951e9cfa07655.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w5ZNL5KSV9abaL1GLW3_Rw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/c04968d6b575413d6f13f2aa32ff44ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*-8PoRGdSfsRxbNrIZcKifQ.gif"/></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="62e3" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">摘要</h1><p id="a3b7" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我希望这篇文章对你有用。也许不是每个钩子都适合你和你的需求，但我相信你现在知道如何创建你自己的了。</p><p id="334d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>