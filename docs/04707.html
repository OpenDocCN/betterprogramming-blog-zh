<html>
<head>
<title>How to Not Need a Private npm Registry</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何不需要私有的国家预防机制登记册</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-not-need-a-private-npm-registry-1327bfbe80c9?source=collection_archive---------4-----------------------#2020-05-01">https://betterprogramming.pub/how-to-not-need-a-private-npm-registry-1327bfbe80c9?source=collection_archive---------4-----------------------#2020-05-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c381" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从git repo安装npm</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0bcacc881587d84f24571a31bc16060e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mxXB-iB6XQVQY1E6"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@dtopkin1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">戴恩·托普金</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="04ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你有没有发现自己和我一样在网上寻找最便宜最简单的方法去做一件事？我花了几个小时研究如何使用npm而不使用npm来托管、部署和安装一个包。我想我找到了最便宜最优雅的解决方案，我希望你能从我学到的东西中受益。</p><p id="057b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简单的回答是:使用Git存储库。用哪个真的不重要。但它甚至可以是一个不公开的存储库。</p><p id="fc75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用npm管理您的包的好处是，您可以用一个命令安装所有的东西，并且它只会提供您需要导入的文件。</p><p id="4951" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成此操作的步骤如下。</p><ol class=""><li id="e266" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">创建一个Git存储库(在本例中，我的存储库在GitHub中)</li><li id="2103" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">在回购上运行<code class="fe mj mk ml mm b">npm init</code></li><li id="9759" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">配置您的<code class="fe mj mk ml mm b">package.json</code></li><li id="983f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">在一个单独的应用程序中配置<code class="fe mj mk ml mm b">package.json</code>,以指向回购协议</li></ol><p id="280e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将在这里跳过一些步骤，因为我将假设您知道如何做其中的一些。</p><p id="fa47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我就直接给你看我的<code class="fe mj mk ml mm b">package.json</code>长什么样。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="87c0" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">配置package.json</h1><p id="b73e" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">下面是我在GitHub 上的组件库中的一个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="0747" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当提交组件库时，还需要确保将<code class="fe mj mk ml mm b">build/index.js</code>文件添加到库中。这是您在<code class="fe mj mk ml mm b">npm install</code>时需要并下载的文件。</p><p id="e599" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我个人喜欢不用担心每次提交时都要构建的想法，所以我添加了<code class="fe mj mk ml mm b"><a class="ae ky" href="https://www.npmjs.com/package/husky" rel="noopener ugc nofollow" target="_blank">husky</a></code>库，并让它在每次提交时都构建。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="97ac" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">自动构建和提交</h1><p id="5ffc" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated"><code class="fe mj mk ml mm b">npm install husky --save-dev</code></p><p id="6fec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者</p><p id="5ade" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mj mk ml mm b">yarn add husky</code></p><p id="f7bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，把这个加到<code class="fe mj mk ml mm b">your package.json</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="cde3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将运行构建<code class="fe mj mk ml mm b">pre-commit</code>。但是它也将确保添加构建文件来提交，而不会弄乱其他任何东西。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="ed8d" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">更新其他项目的package.json依赖项</h1><p id="a048" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">现在，在您的另一个项目(您正在使用组件库)中，您可以将它作为一个依赖项添加，如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="8a17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">GitHub位置可以是任何存储库位置。在这种情况下，回购是公共的，但也可以是私有的存储库。你可以使用HTTPS或者宋承宪。如果您使用的是私有存储库，那么您需要确保所有需要进行<code class="fe mj mk ml mm b">npm install</code>的用户都允许保存在SSH目录中用于HTTPS认证的凭证。</p><p id="1b8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要替换该URL，您需要执行以下操作:</p><pre class="kj kk kl km gt nt mm nu nv aw nw bi"><span id="c98d" class="nx mv it mm b gy ny nz l oa ob">"{library name}": "git+{repository url}"</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="85db" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated"><strong class="ak">结论</strong></h1><p id="a2b2" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">如果你试图创建一个私有的npm包，没有必要支付额外的托管费用——只需要从你的存储库中取出这个包。</p><p id="ccde" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">希望这能帮到某个人！</p><p id="48f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">干杯。</p></div></div>    
</body>
</html>