<html>
<head>
<title>How To Build an NFT Minting Dapp on the Flow Blockchain</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在流量区块链上搭建一个NFT明廷Dapp</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-build-an-nft-minting-dapp-on-the-flow-blockchain-d331a2404cae?source=collection_archive---------5-----------------------#2022-11-30">https://betterprogramming.pub/how-to-build-an-nft-minting-dapp-on-the-flow-blockchain-d331a2404cae?source=collection_archive---------5-----------------------#2022-11-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6e0d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们通过编写和部署一个智能契约、构建一个前端和创建一些NFT，将我以前文章中的所有知识付诸实践</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5f6da1143e12c04c5fb18512fcb527a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LztYPF4tROPG5ykB"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kv" href="https://unsplash.com/@kikisad?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Killian Cartignies </a>拍摄的照片</p></figure><p id="55c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你一直关注Flow系列，那么你已经知道<a class="ae kv" href="https://medium.com/better-programming/an-introduction-to-the-flow-blockchain-60ccc7a35598" rel="noopener"> Flow区块链在处理数字资产</a>方面表现出色，比如NFTs。它是作为以太坊的网络拥塞和高费用问题的一个更好的替代方案而从头开始构建的。</p><p id="24fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，Cadence智能合同语言是一种<a class="ae kv" href="https://medium.com/better-programming/smart-contracts-which-is-better-ethereum-or-flow-39f766c72e5d" rel="noopener">首创的面向资源的编程语言</a>，使创建和管理数字资产变得简单高效。虽然Solidity在通过智能合约促进Web3方面表现出色，但它也有缺点。Cadence改进了Solidity的缺陷，提供了升级智能合同的能力和减少人为错误风险的功能，以及其他改进。</p><p id="a04e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，可供希望开始使用的开发人员使用的工具和库的列表非常广泛。所以，让我们把它们放在一起，在心流上建立一些东西。</p><p id="7340" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这篇文章是关于为Flow区块链创建一个成熟的NFT制造dapp的教程。</p><h1 id="fc9d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">让我们开始吧</h1><p id="c1f8" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在本文的其余部分，我们将介绍在区块链流上创建NFT铸币dapp的过程。</p><p id="7f89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将从设置和部署Cadence智能合同开始。然后，我们将构建一个前端来连接到我们的智能合同，并在用户的帐户中创建一个NFT。</p><p id="4aaa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们建立的功能将允许用户连接他们的流量帐户，如果他们还没有一个帐户，创建一个帐户，然后从三个图像中选择一个来创建一个NFT。然后，dapp将显示用户帐户中我们的收藏中的NFTs。这将是一个非常好的项目，突出了在Flow上创建NFTs是多么容易和高效，以及Flow客户端库(FCL)在与区块链交互方面是多么有效。</p><p id="2129" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要跟随本教程，您需要以下东西:</p><ul class=""><li id="2672" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated"><a class="ae kv" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">节点</a>和<a class="ae kv" href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm" rel="noopener ugc nofollow" target="_blank"> NPM </a></li><li id="970f" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><a class="ae kv" href="https://developers.flow.com/tools/flow-cli/install" rel="noopener ugc nofollow" target="_blank">流程命令行界面</a>(流程CLI)</li><li id="9482" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><a class="ae kv" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank">你最喜欢的IDE </a></li></ul><p id="3960" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装好所有这些之后，让我们开始吧！</p><h1 id="db08" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1.设置流程帐户</h1><p id="c1fb" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在开始构建之前，我们需要在流区块链上设置一个帐户，以便部署我们的智能合约。运行以下命令生成新的公钥和私钥对:</p><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="7504" class="ni lt iq ne b be nj nk l nl nm">flow keys generate</span></pre><p id="4881" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请务必记下您的控制台输出的值，因为我们将在下面的步骤中用到它们。</p><p id="0a4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将前往<a class="ae kv" href="https://testnet-faucet.onflow.org/" rel="noopener ugc nofollow" target="_blank">流量龙头</a>根据我们的密钥创建一个新地址，并向我们的帐户注入一些测试令牌。完成以下步骤来创建您的帐户:</p><ol class=""><li id="25c3" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr nn mv mw mx bi translated">将您的公钥粘贴到指定的输入字段中</li><li id="8598" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr nn mv mw mx bi translated">将签名和哈希算法设置为默认值</li><li id="5056" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr nn mv mw mx bi translated">完成验证码</li><li id="2a0d" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr nn mv mw mx bi translated">点击创建账户</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/354863ab96c10f7a6cf357eb4e42b9f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*C7g_k17hgGjzBACrFTzjBw.png"/></div></figure><p id="6e50" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">成功生成帐户后，我们将与包含1，000个流令牌的新流地址进行对话。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/35374751a41f498c101aa9728e09e1fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rhyoqzmKbCgfDA-QEcEx3w.png"/></div></div></figure><p id="4a34" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">复制地址供下一步使用。</p><h1 id="2246" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">2.设置智能合同</h1><p id="9e87" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在我们构建项目前端之前，让我们创建稍后将与之交互的智能契约。</p><p id="497f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在命令终端中，导航到要使用的文件夹，然后键入以下命令来启动项目:</p><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="b7d4" class="ni lt iq ne b be nj nk l nl nm">flow init</span></pre><p id="988d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该命令在文件夹中创建一个<code class="fe nq nr ns ne b">flow.json</code>文件，我们将在其中放置部署智能合同所需的所有信息。</p><p id="bbe8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在您的代码编辑器中打开<code class="fe nq nr ns ne b">flow.json</code>文件，我们将设置一个testnet帐户。在<code class="fe nq nr ns ne b">accounts</code>部分，我们将添加一个名为<code class="fe nq nr ns ne b">testnet-account</code>的新条目，它包含我们的新地址和之前在<code class="fe nq nr ns ne b">flow keys generate</code>命令中生成的私钥。</p><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="a9dc" class="ni lt iq ne b be nj nk l nl nm">{<br/> "emulators": {<br/>  "default": {<br/>   "port": 3569,<br/>   "serviceAccount": "emulator-account"<br/>  }<br/> },<br/> "contracts": {},<br/> "networks": {<br/>  "emulator": "127.0.0.1:3569",<br/>  "mainnet": "access.mainnet.nodes.onflow.org:9000",<br/>  "testnet": "access.devnet.nodes.onflow.org:9000"<br/> },<br/> "accounts": {<br/>  "emulator-account": {<br/>   "address": "f8d6e0586b0a20c7",<br/>   "key": "2becfbede2fb89796ab68df3ec2a23c3627235ec250a3e5da41df850a8dd4349"<br/>  },<br/>  "testnet-account": {<br/>   "address": "0x8e0dac5df6e8489e",<br/>   "key": "c91f4716a51a66683ccb090ca3eb3e213b90e9f9ae2b1edd12defffe06c57edc"<br/>  }<br/> },<br/> "deployments": {}<br/>}</span></pre><p id="9575" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将创建一个新文件来编写我们的智能合约。</p><p id="0ce1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">编写代码时，您可能会注意到Cadence处理NFT创建的方式与Solidity有所不同。例如，Cadence中的NFT是作为一种资源创建的，并直接注入用户的帐户中。相比之下，Solidity NFTs本质上只是一个ID号，在映射到数字账本上的特定地址时引用。</p><p id="6430" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">记住这一点，在与<code class="fe nq nr ns ne b">flow.json</code>文件相同的文件夹中，创建一个名为<code class="fe nq nr ns ne b">FlowTutorialMint.cdc</code>的新文件，并键入以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="1883" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的智能合同中需要注意的重要事项:</p><ul class=""><li id="89d3" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">我们正在导入<code class="fe nq nr ns ne b">NonFungibleToken</code>和<code class="fe nq nr ns ne b">MetadataViews</code>合同，以使用流标准创建我们的NFT</li><li id="28b7" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">我们在<code class="fe nq nr ns ne b">pub resource NFT</code>函数中定义我们的NFT资源</li><li id="7d04" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><code class="fe nq nr ns ne b">mintNFT</code>函数在调用该函数的账户中铸造一个NFT</li></ul><p id="e92c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们需要回到我们的<code class="fe nq nr ns ne b">flow.json</code>文件中添加一些东西:</p><ul class=""><li id="f4b0" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">在<code class="fe nq nr ns ne b">contracts</code>部分，添加契约及其路径。</li><li id="c682" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">在<code class="fe nq nr ns ne b">deployments</code>部分添加网络(<code class="fe nq nr ns ne b">testnet</code>)、我们将用来执行部署的帐户(<code class="fe nq nr ns ne b">testnet-account</code>)和合同名称(<code class="fe nq nr ns ne b">FlowTutorialMint</code>)。</li></ul><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="3ab0" class="ni lt iq ne b be nj nk l nl nm">{<br/> "emulators": {<br/>  "default": {<br/>   "port": 3569,<br/>   "serviceAccount": "emulator-account"<br/>  }<br/> },<br/> "contracts": {<br/>  "FlowTutorialMint": "./FlowTutorialMint.cdc"<br/> },<br/> "networks": {<br/>  "emulator": "127.0.0.1:3569",<br/>  "mainnet": "access.mainnet.nodes.onflow.org:9000",<br/>  "testnet": "access.devnet.nodes.onflow.org:9000"<br/> },<br/> "accounts": {<br/>  "emulator-account": {<br/>   "address": "f8d6e0586b0a20c7",<br/>   "key": "2becfbede2fb89796ab68df3ec2a23c3627235ec250a3e5da41df850a8dd4349"<br/>  },<br/>  "testnet-account": {<br/>   "address": "0x8e0dac5df6e8489e",<br/>   "key": "c91f4716a51a66683ccb090ca3eb3e213b90e9f9ae2b1edd12defffe06c57edc"<br/>  }<br/> },<br/> "deployments": {<br/>  "testnet": {<br/>   "testnet-account": [<br/>    "FlowTutorialMint"<br/>   ]<br/>  }<br/> }<br/>}</span></pre><p id="23db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">设置智能合约的最后一步是将其部署到testnet。为此，请在终端的项目文件夹中键入以下命令:</p><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="2457" class="ni lt iq ne b be nj nk l nl nm">flow project deploy -n=testnet</span></pre><p id="38a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们应该会收到一个输出，声明合同已成功部署:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/db25542406e7e62516945c163a6bec50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TDLQtMd43FRRCVVHRWNnkw.jpeg"/></div></div></figure><p id="67df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里需要注意的是，Cadence智能合约存在于部署它们的账户的存储中，而Solidity智能合约存在于区块链上自己的地址中。</p><p id="4599" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然帐户的存储容量有限制，但这些限制是相对于帐户中保留的流令牌数而言的。您可以在<a class="ae kv" href="https://developers.flow.com/learn/concepts/storage" rel="noopener ugc nofollow" target="_blank"> Flow Developer Portal </a>中了解更多关于账户存储的信息。</p><p id="61fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">厉害！现在让我们构建一个简单的前端来与我们的契约交互。</p><h1 id="4402" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3.创建前端</h1><p id="a062" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">对于这个项目的前端，我们将使用React。首先，导航到一个新文件夹并运行以下命令来创建一个React项目:</p><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="0977" class="ni lt iq ne b be nj nk l nl nm">npx create-react-app flow-tutorial</span></pre><p id="1235" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，导航到flow-tutorial文件夹并安装<a class="ae kv" href="https://developers.flow.com/tools/fcl-js" rel="noopener ugc nofollow" target="_blank">流客户端库</a> (FCL):</p><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="0998" class="ni lt iq ne b be nj nk l nl nm">npm i -S @onflow/fcl</span></pre><p id="d4cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">FCL将允许我们与区块链流通信，调用交易，并集成所有其他FCL兼容的钱包，而无需添加自定义集成。完成后，我们将安装一些额外的依赖项:</p><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="b01d" class="ni lt iq ne b be nj nk l nl nm">npm i elliptic sha3 styled-components</span></pre><p id="0dad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装完所有的依赖项后，我们就可以开始dapp前端的工作了。</p><h2 id="2ace" class="nw lt iq bd lu nx ny dn ly nz oa dp mc lf ob oc me lj od oe mg ln of og mi oh bi translated"><strong class="ak"> 3.a .配置FCL </strong></h2><p id="3a84" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在我们开始结构化和样式化之前，让我们创建一个FCL配置文件，我们将在其中定义重要的设置，比如我们是否将与testnet或mainnet交互。</p><p id="0e48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe nq nr ns ne b">src</code>目录中，创建一个名为<code class="fe nq nr ns ne b">flow</code>的新文件夹。在这个新文件夹中，创建一个名为<code class="fe nq nr ns ne b">config.js</code>的文件。</p><p id="ae84" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个<code class="fe nq nr ns ne b">config.js</code>文件中，我们将导入FCL，调用<code class="fe nq nr ns ne b">fcl.config</code>函数并为我们的dapp创建一些设置，例如:</p><ul class=""><li id="bd19" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated"><code class="fe nq nr ns ne b">app.detail.title</code></li><li id="a413" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><code class="fe nq nr ns ne b">accessNode.api</code></li><li id="8181" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><code class="fe nq nr ns ne b">discovery.wallet</code></li></ul><p id="65f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe nq nr ns ne b">config.js</code>文件，用下面的代码填充它:</p><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="09a9" class="ni lt iq ne b be nj nk l nl nm">const fcl = require("@onflow/fcl");<br/><br/>fcl.config({<br/>  "app.detail.title": "Flow Mint Page Tutorial", // this adds a custom name to our wallet<br/>  "accessNode.api": "https://rest-testnet.onflow.org", // this is for the local emulator<br/>  "discovery.wallet": "https://fcl-discovery.onflow.org/testnet/authn", // this is for the local dev wallet<br/>})</span></pre><p id="f812" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以为我们的dapp配置附加设置，但是现在，这是我们所需要的。</p><p id="5256" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">配置完成后，让我们继续构建！</p><h2 id="ca55" class="nw lt iq bd lu nx ny dn ly nz oa dp mc lf ob oc me lj od oe mg ln of og mi oh bi translated"><strong class="ak"> 3.b .初始结构</strong></h2><p id="e0a5" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">首先，导航到<code class="fe nq nr ns ne b">src</code>文件夹中的<code class="fe nq nr ns ne b">App.js</code>文件，将代码替换为:</p><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="df9b" class="ni lt iq ne b be nj nk l nl nm">import './App.css';<br/><br/>function App() {<br/>  <br/>  return (<br/>    &lt;div className="App"&gt;<br/>        &lt;h1&gt;Mint Your Dog!&lt;/h1&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}<br/><br/>export default App;</span></pre><p id="cae0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将为我们提供dapp的初始结构，我们将在此基础上进行扩展。</p><p id="0e37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将设计这个结构的样式。打开<code class="fe nq nr ns ne b">index.css</code>文件，将代码替换为以下内容:</p><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="8758" class="ni lt iq ne b be nj nk l nl nm">@import url('https://fonts.googleapis.com/css2?family=Michroma&amp;family=Montserrat:wght@200;300;600;700&amp;display=swap');<br/><br/>body {<br/>  margin: 0;<br/>  font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',<br/>    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',<br/>    sans-serif;<br/>  -webkit-font-smoothing: antialiased;<br/>  -moz-osx-font-smoothing: grayscale;<br/>}<br/><br/>code {<br/>  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',<br/>    monospace;<br/>}</span></pre><p id="9c27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你运行npm start，你会看到一个空白页，标题是Mint Your Dog！</p><p id="a27c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，让我们创建一些组件！</p><h2 id="0f85" class="nw lt iq bd lu nx ny dn ly nz oa dp mc lf ob oc me lj od oe mg ln of og mi oh bi translated"><strong class="ak"> 3.c .导航组件</strong></h2><p id="961e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在<code class="fe nq nr ns ne b">src</code>目录中，创建一个名为<code class="fe nq nr ns ne b">components</code>的新文件夹，在这里我们将构建所有的自定义React组件。</p><p id="4661" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将创建的第一个组件是Navbar，如果用户没有连接，它将显示登录按钮，或者如果用户连接，则显示用户地址旁边的注销按钮和帐户拥有的流令牌数。</p><p id="f022" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建一个名为<code class="fe nq nr ns ne b">Navbar.jsx</code>的文件，并用以下代码填充它:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="13c0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们浏览一下代码，看看这里发生了什么。</p><ul class=""><li id="858a" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">首先，我们正在导入流客户端库，它将为我们提供<code class="fe nq nr ns ne b">authenticate</code>、<code class="fe nq nr ns ne b">unauthenticate</code>和确定<code class="fe nq nr ns ne b">currentUser</code>的函数。</li><li id="b01e" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">接下来，我们导入我们需要的其他依赖项，然后使用<code class="fe nq nr ns ne b">styled-components</code>在<code class="fe nq nr ns ne b">Wrapper</code>变量中创建Navbar的基本样式。</li><li id="0800" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">然后，我们定义一些反应状态变量(<code class="fe nq nr ns ne b">user</code>和<code class="fe nq nr ns ne b">flow</code>)。</li><li id="1f00" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">接下来是dapp的功能，比如<code class="fe nq nr ns ne b">logOut</code>、<code class="fe nq nr ns ne b">logIn</code>、<code class="fe nq nr ns ne b">getFlow</code>(获取关联账户的流量余额)。</li><li id="415f" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">在那之后，我们返回<code class="fe nq nr ns ne b">html</code>用于我们样式中包装的导航条。</li></ul><p id="8e2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了一个完整的<code class="fe nq nr ns ne b">Navbar</code>组件，我们现在可以将它导入到<code class="fe nq nr ns ne b">App.js</code>文件中:</p><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="85b9" class="ni lt iq ne b be nj nk l nl nm">import './App.css';<br/>import Navbar from './components/Navbar.jsx';<br/><br/>function App() {<br/>  <br/>  return (<br/>    &lt;div className="App"&gt;<br/>        &lt;Navbar /&gt;<br/>        &lt;h1&gt;Mint your Dog!&lt;/h1&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}<br/><br/>export default App;</span></pre><p id="e65f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，如果我们用<code class="fe nq nr ns ne b">npm start</code>运行项目，我们会看到<code class="fe nq nr ns ne b">Navbar</code>提供了我们在代码中定义的功能。厉害！</p><p id="2507" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，让我们建立我们的NFT铸造组件！</p><h2 id="3ba4" class="nw lt iq bd lu nx ny dn ly nz oa dp mc lf ob oc me lj od oe mg ln of og mi oh bi translated"><strong class="ak">3 . d . NFT造币部件</strong></h2><p id="ec31" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在<code class="fe nq nr ns ne b">components</code>文件夹中，创建一个名为<code class="fe nq nr ns ne b">MintComponent.jsx</code>的新文件，然后复制以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="d5eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，让我们遍历代码，以确保我们理解发生了什么。</p><ul class=""><li id="25ae" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">我们需要在这个组件中导入FCL，以访问让我们铸造我们的NFT的函数。</li><li id="4d1d" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">同样，我们使用<code class="fe nq nr ns ne b">styled-components</code>来添加一些样式。</li></ul><p id="e306" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nq nr ns ne b">mintNFT</code>函数使用<code class="fe nq nr ns ne b">fcl.mutate</code>函数通过以下方式执行实际的mint:</p><ul class=""><li id="a0f6" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">验证用户的帐户中是否有流量教程薄荷NFT集合，如果没有，则创建一个。</li><li id="37e7" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">在FlowTutorialMint协定内调用现有的mint函数并传递参数。</li><li id="04f3" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">该函数返回资源(NFT)，我们将它存入用户的帐户。</li><li id="94ee" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">在<code class="fe nq nr ns ne b">fcl.mutate</code>函数中，我们正在导入使用行<code class="fe nq nr ns ne b">import FlowTutorialMint from 0x8e0dac5df6e8489e</code>部署的智能契约</li><li id="6eca" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">我们还引进了<code class="fe nq nr ns ne b">NonFngibleToken</code>和<code class="fe nq nr ns ne b">MetadataViews</code>标准。</li><li id="9cf0" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">在事务中，我们指定图像的NFT <code class="fe nq nr ns ne b">type</code>和<code class="fe nq nr ns ne b">url</code>。</li></ul><p id="141b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Cadence交易有两个阶段:<code class="fe nq nr ns ne b">prepare</code>和<code class="fe nq nr ns ne b">execute</code></p><ul class=""><li id="f7c2" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated"><code class="fe nq nr ns ne b">prepare</code>–我们要求用户签名以访问他们的帐户并执行私人功能。在这种情况下，创建一个新的<code class="fe nq nr ns ne b">FlowTutorial</code>薄荷系列，如果他们还没有一个。我们还初始化了一个只限于<code class="fe nq nr ns ne b">NonFungibleToken.CollectionPublic</code>的公共<code class="fe nq nr ns ne b">Capability</code>。有关功能的更多信息，请点击链接。</li><li id="187f" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><code class="fe nq nr ns ne b">execute</code>–在testnet上调用我们合同内部的<code class="fe nq nr ns ne b">mintNFT</code>函数。</li><li id="b5b5" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">在代码的<code class="fe nq nr ns ne b">html</code>部分，我们显示了三张图片，用户可以从中铸造一个NFT。</li></ul><p id="752f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成<code class="fe nq nr ns ne b">MintComponent</code>后，我们可以将其导入到<code class="fe nq nr ns ne b">App.js</code>文件中:</p><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="46a4" class="ni lt iq ne b be nj nk l nl nm">import './App.css';<br/>import Navbar from './components/Navbar.jsx';<br/>import MintComponent from './components/MintComponent.jsx';<br/><br/>function App() {<br/>  <br/>  return (<br/>    &lt;div className="App"&gt;<br/>        &lt;Navbar /&gt;<br/>        &lt;h1&gt;Mint your Dog!&lt;/h1&gt;<br/>        &lt;MintComponent /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}<br/><br/>export default App;</span></pre><p id="e379" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，用户可以登录到dapp和薄荷NFT到他们的帐户！</p><p id="d79e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">难题的最后一部分是创建一个组件来获取用户的NFT并显示它们。</p><h2 id="01bb" class="nw lt iq bd lu nx ny dn ly nz oa dp mc lf ob oc me lj od oe mg ln of og mi oh bi translated"><strong class="ak"> 3.e .显示用户的NFTs </strong></h2><p id="e1ed" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在<code class="fe nq nr ns ne b">components</code>文件夹中，创建一个名为<code class="fe nq nr ns ne b">ShowNfts.jsx</code>的新文件，我们将使用以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="078e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本质上，我们在这段代码中所做的是使用FCL查询流区块链，并从我们的<code class="fe nq nr ns ne b">FlowTutorialMint</code>集合中收集连接帐户中的NFT。</p><p id="7e4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们只需要将这个组件添加到我们的<code class="fe nq nr ns ne b">App.js</code>中，就万事俱备了！</p><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="094e" class="ni lt iq ne b be nj nk l nl nm">import './App.css';<br/>import Navbar from './components/Navbar.jsx';<br/>import MintComponent from './components/MintComponent.jsx';<br/>import ShowNfts from './components/ShowNfts';<br/><br/>function App() {<br/> <br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Navbar /&gt;<br/>      &lt;h1&gt;Mint your Dog!&lt;/h1&gt;<br/>      &lt;MintComponent /&gt;<br/>      &lt;ShowNfts /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}<br/><br/>export default App;</span></pre><p id="f2f9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就这些了！现在，让我们测试我们的dapp，确保我们可以创建一些NFT。</p><h2 id="743b" class="nw lt iq bd lu nx ny dn ly nz oa dp mc lf ob oc me lj od oe mg ln of og mi oh bi translated">4.让我们铸造一些NFT！</h2><p id="4db1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">所以首先，让我们用<code class="fe nq nr ns ne b">npm start</code>启动应用程序，然后打开浏览器到<code class="fe nq nr ns ne b"><a class="ae kv" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/</a></code>。</p><p id="ca81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果一切顺利，您的屏幕应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/df3516fa82d1af1b788d5731f5fdd4f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QEzqQSSfMqemHV7-vokCVA.png"/></div></div></figure><p id="5444" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的登录序列中使用FCL的美妙之处在于，它让我们的用户只需使用一个电子邮件地址就可以轻松地当场创建一个帐户。让我们走一遍这个过程，以确保它正常工作。点击登录按钮，会弹出一个对话框，给我们两个登录选项。我们会选择Blocto。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/b36c206db9b6526cde15145e4956a5eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*kWffHiB_OdlWkbhkUT8P_Q.png"/></div></figure><p id="1c99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Blocto将提示我们输入一个电子邮件地址，这样做后，我们就可以注册一个新的帐户。然后，一旦我们输入通过电子邮件发送到我们地址的代码，Blocto就会为我们提供一个闪亮的新地址！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/33a89007b78948e076060cf31e1e3fc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*R1pIcmUN7E_DsGdmsxEnHA.png"/></div></figure><p id="b1f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从这里，我们可以选择哪个狗的形象，我们想薄荷作为一个NFT。我选择了流浪狗，因为它让我想起了自己！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/c7bf33a760a02203ee74ca24ad069abb.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/format:webp/1*k2n-4Bs8DhL9mlyFXmimeg.png"/></div></figure><p id="c592" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">按下Mint按钮将弹出另一个对话框，告诉我们将要执行的交易。我们可以看到Blocto慷慨地支付了铸造费用，如果我们想看看我们调用的脚本，我们可以这样做。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/6f7ea77a87c7c6cbead0421fbc9446fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*-8oJUrVK87ngEjG5JQEhew.png"/></div></figure><p id="030d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击Approve几秒钟后，我们应该会收到一条消息，表明我们的mint成功了，我们新铸造的Swag Dog将显示在dapp的My NFTs部分下。</p><p id="b8cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是我们的dapp行动链接:</p><p id="f6d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://s1.gifyu.com/images/flow_tutorial-min.gif" rel="noopener ugc nofollow" target="_blank">https://s1.gifyu.com/images/flow_tutorial-min.gif</a></p><p id="9b01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个项目的完整源代码可以在这个库中找到。</p><h1 id="669d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="e4ae" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">正如你所看到的，一旦你理解了它是如何一起工作的，在Flow Blockchain上构建一个NFT minting dapp就很简单了。此外，流客户端库是我们可以使用的强大工具，它让我们可以访问大量内置功能，并帮助我们的dapp获得更好的用户体验。</p><p id="b4f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与以太坊相比，Flow处理NFT的创建和管理更加高效和安全。这是通过部署智能合同并将NFT直接注入用户账户来实现的，而不是创建对存储在数字账本上的地址或映射的引用。</p><p id="0714" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要了解更多关于构建流程的信息，请查看<a class="ae kv" href="https://developers.flow.com/" rel="noopener ugc nofollow" target="_blank">流程开发者门户</a>。</p><p id="3081" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">祝你今天过得愉快！</p></div></div>    
</body>
</html>