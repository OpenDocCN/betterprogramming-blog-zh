<html>
<head>
<title>Intro to Apache Kafka</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">阿帕奇卡夫卡简介</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/intro-to-apache-kafka-72bb3cb43d2e?source=collection_archive---------15-----------------------#2020-01-28">https://betterprogramming.pub/intro-to-apache-kafka-72bb3cb43d2e?source=collection_archive---------15-----------------------#2020-01-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4fda" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解流行的消息系统</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/35fc6175912b64b1c629e24dac38e78f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D0Xk8hmBB3zuyhGl1TDu3A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">阿帕奇卡夫卡标志</p></figure><p id="09a2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这篇文章是关于一个被称为Kafka的流行信息系统。如果你不知道卡夫卡是什么，那你来对地方了。</p><p id="5589" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您熟悉一种编程语言而不熟悉另一种，您不必担心，因为这是独立于语言的。我们将讲述基础知识，它是如何工作的，以及系统中组件的术语。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="4f15" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">卡夫卡是什么？</h1><p id="3a8a" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">Kafka是一个分布式信息系统。它遵循发布-订阅模式。</p><p id="7dd3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在发布-订阅模式中，被称为<em class="my">发布者的发送者</em>在接收者不知情的情况下将消息发布到队列或类中。<em class="my"/>接收者被称为订阅者或消费者，在发送者/发布者不知情的情况下订阅某一类别的消息。</p><p id="7d95" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用Kafka，我们可以在进程、应用程序、服务等之间发送消息。在Kafka中，发布者将消息推入队列，而消费者通过保持偏移量来收听消息。偏移量通常是递增的。消息会在队列中保留一段配置中定义的时间，因此订户可以重置偏移量并再次读取之前的消息。</p><p id="fe4a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">卡夫卡的一个重要特点是容错。它跨数据中心维护队列中消息的多个副本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/76b8d646fab1ed4be720553c69de352d.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*FFcZs7jhZRXqKy4dVGymRg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图1:卡夫卡系统的基本示意图</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="9354" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">消息的组成部分</h1><p id="f768" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">该消息也被一些网站称为<em class="my">记录</em>。该信息由三个主要部分组成:</p><ol class=""><li id="b37a" class="na nb it la b lb lc le lf lh nc ll nd lp ne lt nf ng nh ni bi translated"><strong class="la iu">时间戳</strong>:消息的时间戳。</li><li id="33f5" class="na nb it la b lb nj le nk lh nl ll nm lp nn lt nf ng nh ni bi translated"><strong class="la iu"> Key </strong>:这是一个可选参数，包含关于分区的信息(我们将在下一段详细讨论)。</li><li id="2aa3" class="na nb it la b lb nj le nk lh nl ll nm lp nn lt nf ng nh ni bi translated"><strong class="la iu">值</strong>:这是实际要传输的消息。数据是字节数组的形式，所以可以包含任何对象。</li></ol></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="03bb" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">主题和分区</h1><p id="590c" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">卡夫卡的信息可以分为多个类别，称为<em class="my">主题</em>。所有信息都被组织成主题。发布者将消息推送到一个或多个主题，消费者从他们想要收听的一个或多个主题中消费消息。</p><p id="f708" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每个主题又进一步划分为<em class="my">个分区。</em>每个分区<em class="my"> </em>包含的消息顺序不变。分区内的每条消息都由唯一的偏移量来分配和标识。一个主题中的多个分区允许多个使用者并行使用来自单个主题的消息。生产者还可以在消息中发送分区信息，即消息应该被分配到的分区。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/6b2101713ec184038190e3adce69fc88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*ovsMr9uL_ek9d7Jxi0VKtg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图2:卡夫卡的主题</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="43b2" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">消费者群体</h1><p id="cf1a" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">消费者可以从任何偏移量开始读取消息，因此他们可以随时加入Kafka集群。消费者也可以成为消费者群体的一部分。组中的每个消费者可以从特定分区读取消息，Kafka确保一条消息只被组中的一个消费者读取。</p><p id="913f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这在需要监听Kafka的服务有多个服务器的情况下很有帮助，并且它还提高了性能，因为单个主题的多个分区被并行读取。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/0ff82862de4df42cfea268cd09983010.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*KUBB95qWwUQ65y18GuHbXA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图3:消费者群体</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="a161" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">经纪人</h1><p id="9675" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">Kafka <em class="my">代理</em>是Kafka服务器的同义词。</p><p id="3d81" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Kafka集群由一个或多个Kafka代理组成。每个代理包含来自一个或多个主题的分区。</p><p id="e749" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它从生成器接收的消息通过分配一个偏移量存储在分区中。它允许消费者通过偏移量和主题来阅读消息。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="feec" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">动物园管理员</h1><p id="beb4" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated"><em class="my">动物园管理员</em>是最重要的组成部分之一，充当着经纪人和消费者之间的一层中介。</p><p id="07f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于代理，它存储关于每个代理可以处理多少请求的信息，并基于此将请求路由到代理。它还维护每个代理的状态——即它是否活动。除此之外，它还保持每个主题的副本同步。</p><p id="1303" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于使用者，它存储每个使用者的偏移量，即每个使用者使用了多少条消息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/11d46c370bb3a9657a60d1afd3f12737.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*IPKF6_BX4HziITq9ZyMxiw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图4:动物园管理员</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="14be" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">结论</h1><p id="3892" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">卡夫卡有很多优点。它提供高吞吐量、低延迟和容错能力。除此之外，它还具有可扩展性，因为添加新的代理/节点非常容易。它还允许以高并发性读取和写入消息。</p><p id="2adc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于像微服务这样的东西，Kafka是一个非常好的架构选择，在微服务中有许多应用程序/服务需要相互交互。</p></div></div>    
</body>
</html>