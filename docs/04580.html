<html>
<head>
<title>Git Rebase For Nested Branches</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">嵌套分支的Git Rebase</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/git-rebase-for-nested-branches-7a6bbb4a6688?source=collection_archive---------15-----------------------#2020-04-22">https://betterprogramming.pub/git-rebase-for-nested-branches-7a6bbb4a6688?source=collection_archive---------15-----------------------#2020-04-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d47d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如果重置基础变得乏味，你可能做错了</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c03edb80f2d1f9d988c083319d3ffdeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FIYjsOjrmfNX8PrU"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">大卫·科瓦连科在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="fbd2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">理解Git rebase花了我一些时间。就在我对自己的技能建立信心的时候，我发现，有时候，有些人会感觉不舒服。我经历了痛苦的冲突。有些甚至不应该发生！</p><p id="3581" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更糟糕的是，我不知道为什么特别是那些rebases。很有可能，我做错了什么。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="4b84" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">嵌套分支问题</h1><p id="f88b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">首先，我建议查看我以前的文章，以便更熟悉Git rebase:</p><div class="na nb gp gr nc nd"><a href="https://medium.com/better-programming/dont-fret-with-git-rebase-75fe3ed5ca8f" rel="noopener follow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">不要为Git Rebase烦恼</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">无论你的队友会告诉你什么，重新构建Git分支都是一件轻而易举的事情</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">medium.com</p></div></div><div class="nm l"><div class="nn l no np nq nm nr ks nd"/></div></div></a></div><p id="e904" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将借此机会扩展那篇文章的例子。假设我的下一个任务需要<code class="fe ns nt nu nv b">awesome_branch</code>的内容，我将需要从它创建一个分支。我把它叫做<code class="fe ns nt nu nv b"><em class="lv">nested_branch</em></code> <em class="lv">。</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/86ef81ee22f5dd1952bb53ab49e67a0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x0_jJ5H_ZszltDuJEhKxEA.png"/></div></div></figure><p id="556c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的目标是把<code class="fe ns nt nu nv b">awesome_branch</code>和<code class="fe ns nt nu nv b">nested_branch</code>合并成<code class="fe ns nt nu nv b">develop</code>。在我这样做之前，我的其他分支可能已经转移了。我可能会面临以下情况之一:</p><ul class=""><li id="8526" class="nx ny it lb b lc ld lf lg li nz lm oa lq ob lu oc od oe of bi translated"><code class="fe ns nt nu nv b">develop</code>进化了，使得<code class="fe ns nt nu nv b">awesome_branch</code>和<code class="fe ns nt nu nv b">nested_branch</code>都落后于<code class="fe ns nt nu nv b">develop</code>。</li><li id="dfc7" class="nx ny it lb b lc og lf oh li oi lm oj lq ok lu oc od oe of bi translated">在<code class="fe ns nt nu nv b">awesome_branch</code>上发生了一些事情，需要新的提交。</li></ul><div class="kj kk kl km gt ab cb"><figure class="ol kn om on oo op oq paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/3e4178970b8f8a4025712e4bdfc4e980.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*Dt69Q_HW5DL0dYvHh9PneQ.png"/></div></figure><figure class="ol kn or on oo op oq paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/e1be7a60cc5950564fc632b1faf13e9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*owNQ9K0akAN2kOVsKZZHOw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk os di ot ou translated">(1)对(2)</p></figure></div><p id="dff2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(1)要求我在进一步操作之前将<code class="fe ns nt nu nv b">awesome_branch</code>重置为<code class="fe ns nt nu nv b">develop</code> <em class="lv"> </em>。与<code class="fe ns nt nu nv b">nested_branch</code>和<code class="fe ns nt nu nv b">awesome_branch</code>之间的(2)相同。</p><p id="abef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这两种情况最终都不会成为合并<code class="fe ns nt nu nv b">awesome_branch</code>的问题。合并<code class="fe ns nt nu nv b">awesome_branch</code>后再跟进(1):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/45780a2ed4a943381aae470e9d89da90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a1-mRVtaIsLxFIctxGmkXQ.png"/></div></div></figure><p id="e682" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我想将<code class="fe ns nt nu nv b">nested_branch</code>合并到<code class="fe ns nt nu nv b">develop</code>中，我必须首先对其进行重组:</p><pre class="kj kk kl km gt ow nv ox oy aw oz bi"><span id="7788" class="pa me it nv b gy pb pc l pd pe">$ git fetch --all<br/>$ git rebase origin/develop nested_branch</span></pre><p id="bb45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我正在解决我的矛盾时，感觉有些奇怪。我怀疑我必须修复在<code class="fe ns nt nu nv b">develop</code>上重置<code class="fe ns nt nu nv b">awesome_branch</code>时遇到的相同问题。</p><p id="6112" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我可以再次解决它们，把事情做好。但是如果你像我一样珍惜时间，就和我在一起吧。结果是我在Git rebase失败了，而不是相反。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="f894" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">重新基于任何分支</h1><p id="dbc0" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">把<code class="fe ns nt nu nv b">nested_branch</code>换成<code class="fe ns nt nu nv b">develop</code><em class="lv"/>你可能注意到了<code class="fe ns nt nu nv b">nested_branch</code>离开<code class="fe ns nt nu nv b">awesome_branch</code>。简单地重新设定<code class="fe ns nt nu nv b">develop</code>可能会产生意想不到的结果。</p><p id="8055" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，Git提供了一个将分支<strong class="lb iu">转换为任意分支的选项。您只需要找到一个特定的提交散列。</strong></p><p id="c42c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">记住:重置基础仅仅是将一堆提交转移到一个特定的目标。</em></p><p id="592c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仔细看看上面的树。我们在寻找第一次提交，在这里<code class="fe ns nt nu nv b">nested_branch</code> <em class="lv"> </em>开始。它匹配提交散列<code class="fe ns nt nu nv b">e6f6d41</code>。</p><p id="01a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果像我一样，您喜欢使用命令行，您可以使用<code class="fe ns nt nu nv b">git log —-graph</code>。该命令为您提供了一个可视化的彩色图表。您可以发现您的分支离开的位置，以及选择提交散列。</p><p id="5485" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们使用<code class="fe ns nt nu nv b">--onto</code>选项再试一次:</p><pre class="kj kk kl km gt ow nv ox oy aw oz bi"><span id="8f5b" class="pa me it nv b gy pb pc l pd pe">$ git fetch --all<br/>$ git rebase --onto origin/develop e6f6d41 nested_branch</span></pre><p id="86bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该命令将把提交散列<code class="fe ns nt nu nv b">e6f6d41</code>中的<code class="fe ns nt nu nv b">nested_branch</code> <em class="lv"> </em>重置为<code class="fe ns nt nu nv b">develop</code>。</p><p id="b027" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行它，祝贺你自己！不再有以前修复的冲突！现在我可以把<code class="fe ns nt nu nv b">nested_branch</code>合并成<code class="fe ns nt nu nv b">develop</code>。</p><p id="65d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看最后一棵树:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/31694bebc78a5c9747952442be0c663c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SkN8Fo4ZKuQyurJNhsuwRQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由嵌套的树枝构成的线形树</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="9243" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">技巧</h1><p id="78f7" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">有了<a class="ae ky" href="https://github.com/ohmyzsh/ohmyzsh/wiki/Cheatsheet" rel="noopener ugc nofollow" target="_blank"> ohmyzsh </a>别名，重设基础甚至更快:</p><pre class="kj kk kl km gt ow nv ox oy aw oz bi"><span id="c51a" class="pa me it nv b gy pb pc l pd pe">$ gco nested_branch                  // checkout your branch<br/>$ gfa                                // fetch all branches<br/>$ glgg                               // retrieve the hash commit<br/>$ grb --onto origin/develop 849b03a  // rebase onto develop<br/>$ gp -f                              // push force your local branch</span></pre><p id="4da9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！我希望我已经为你节省了一些时间和痛苦！</p></div></div>    
</body>
</html>