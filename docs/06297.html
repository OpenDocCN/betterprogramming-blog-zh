<html>
<head>
<title>An A-to-Z Guide to iOS Activity Indicators</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS活动指标全面指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/an-a-to-z-guide-to-ios-activity-indicators-43c8a3da39c2?source=collection_archive---------15-----------------------#2020-09-17">https://betterprogramming.pub/an-a-to-z-guide-to-ios-activity-indicators-43c8a3da39c2?source=collection_archive---------15-----------------------#2020-09-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0457" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">看看iOS 13和14中的不同选项</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/24107deddfc66106118e40b247f65e23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*FQtgbXi_YHpe00iwNRe-zw.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">伊利亚·巴甫洛夫在<a class="ae ku" href="https://unsplash.com/s/photos/computer-menu?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="68a4" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">顶部有一个工具条，不同应用程序有相同的菜单选项的标准界面的想法可以追溯到几十年前。事实上，我还记得买了一台苹果麦金塔电脑，并在上面运行画图应用。它使用的酒吧(那是在1984年)看起来几乎和今天出现的酒吧一模一样。是的，差不多35年了，读者们——难以置信。</p><p id="6f89" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这是一个非常好的想法，它经得起时间的考验，不会错过任何一个节拍。当然，今天苹果发布了大量的文档，这些文档被称为<em class="lr">人机界面指南(HIG)。</em>苹果称之为<em class="lr">指导方针，</em>尽管实际上有些是要求——因为如果你不遵守，苹果保留拒绝你的应用的权利。</p><p id="25bf" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我想着重谈谈这些指导方针的一个实际方面。我们都在应用中使用的一个方面是活动指示器。以下是苹果公司的HIG对活动指标的简要总结:</p><ul class=""><li id="1d86" class="ls lt it kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">清楚地表明什么时候有东西在加载(也就是使用一个活动指示器)</li><li id="ae0d" class="ls lt it kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">尽快显示内容(确保使用GCD实用程序/后台线程来实际加载数据)</li><li id="2f8f" class="ls lt it kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">教育和娱乐用户你为什么这么做(吸引眼球是好的)</li><li id="1f9c" class="ls lt it kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">如果你有时间做得更好，就不要使用标准指标</li></ul><p id="ea60" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这都是很好的建议，尽管最后一点需要更多的解释。我认为，苹果在这里说的是，无论你提出什么样的解决方案，都要考虑到环境。所以如果加载需要两秒钟，用苹果指示器也是可以的。但是，如果它需要10秒钟来加载，那么你最好想出更好的东西…否则。</p><p id="5696" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">好了，代码:让我们在SwiftUI 1.0 (Xcode 11.7)项目中使用一个UIKit <code class="fe mg mh mi mj b">ActivityIndicator</code>。一个非常基本、无聊的问题——只是从温和的角度开始。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">SwiftUI 1.0活动指示器</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mm"><img src="../Images/4385dfbc4a979cd1a35dbc083ec277de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*t7uBA-WFVftKehoRnn6IPw.gif"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">标准iOS活动指示器，带基本定制</p></figure><p id="46bd" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这很好——但是等等——深入研究苹果文档，他们说你应该更喜欢进度条而不是活动指示器。你至少应该给用户一个提示，告诉他们要等多久。我们也来一个吧。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">SwiftUI 1.0进度条</p></figure><p id="3d75" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这段代码将生成一个填充栏，就像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mr"><img src="../Images/afbc5e5be0449d17fc1c6f3dd690e422.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*YlSf0f6JZnSsGfOGaUU20w.gif"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">iOS中的基本进度条</p></figure><p id="21e9" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">太好了，我们进展顺利。但是等一下——停止新闻报道——刚刚有消息！iOS 14对进度条有原生支持。看起来像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="9e84" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">很明显，它看起来和iOS13版本完全一样，所以这次我就不展示动画GIF了。</p><p id="dbe8" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">至此，我们已经完成了所有的模板代码。那么第四点呢？我的负载需要超过10秒钟。一些自定义活动/百分比指标呢？让我们试着编写一些代码。</p><p id="a57b" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们有两种类型:一种<em class="lr">不确定型</em>用于未知长度的延迟，另一种<em class="lr">确定型</em>用于当你知道有多少负载时。就像标准的苹果指标一样，使用圆形对这两种情况都很有效——但希望能更巧妙一些。</p><p id="2de2" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这是一个自定义确定负载指示器的基本代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="93e9" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">当这段代码运行时，看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mr"><img src="../Images/14f24903544e74a79535bbbd42ad1151.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zJMF_NvR0jiXy3HvP70WTQ.gif"/></div></div></figure><p id="07fc" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">现在，要使这成为一个不确定的类型，你只需要改变这一行中的一个参数，当然，删除文本标签。</p><pre class="kj kk kl km gt ms mj mt mu aw mv bi"><span id="ebfc" class="mw mx it mj b gy my mz l na nb">piePath.addArc(center: CGPoint(x: rect.width/2, y:rect.height/2), radius: 64, startAngle: .degrees(0), endAngle: .degrees(pieSlice+60), clockwise: false)</span></pre><p id="4299" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这些变化将使您的指示器看起来像这样。显然，你会想让这个运行快一点，让它看起来更快一点。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mr"><img src="../Images/ed6e5762599152fcebe4a56fdefab365.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*4ralQCEEo1cVDIITpJMaNw.gif"/></div></div></figure><p id="7553" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">不过，在我走之前，让我们再做一次。让我们做一个使用图像和一些形状的指示器。这真是赏心悦目。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="da1e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这是马克·希格登画的纽约的卡通形象。我添加了一个背景和一个动画月亮——以及底部的一个加载栏来显示进度。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nc"><img src="../Images/ed675e21b804492979824f0d117fd506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*e8CTP-y7NtlZ3nMwh28xxQ.gif"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">纽约的马克·希格登。他的网址:【markhigden.com T4】</p></figure><p id="6ee6" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这让我想到了这篇文章的结尾。我希望你喜欢读它，就像我喜欢写它一样。</p><p id="b751" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">保持冷静，继续编码。</p></div></div>    
</body>
</html>