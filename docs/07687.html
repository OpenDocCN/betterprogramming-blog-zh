<html>
<head>
<title>Build a Dogecoin Price Tracker With SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SwiftUI构建Dogecoin价格跟踪器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-dogecoin-price-tracker-with-swiftui-7552bfbb078b?source=collection_archive---------12-----------------------#2021-02-09">https://betterprogramming.pub/build-a-dogecoin-price-tracker-with-swiftui-7552bfbb078b?source=collection_archive---------12-----------------------#2021-02-09</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="2c6a" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">加密货币硬币可能是一个迷因。所以让我们用CoinGecko API来享受它的乐趣吧</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/05af33d0d6f5a2a5186afe86549961ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jsC7zjEzuk3s1I2u"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@claybanks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">粘土银行</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="10fc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">加密货币<a class="ae kz" href="https://www.coindesk.com/price/dogecoin" rel="noopener ugc nofollow" target="_blank"> Dogecoin </a>本周经历了令人难以置信的运行，这完全是由炒作和名人代言推动的。与GameStop不同，在GameStop上可以提出公司被低估的论点，Dogecoin确实没有提供任何新的实用工具。也许这并不重要，但我们可能很快就会知道了。不管你是否相信这种宣传，你可能会有兴趣知道如何使用API来检查价格。</p><p id="ddc7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这是该应用程序的两个屏幕的外观:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj lw"><img src="../Images/1b940df1b13e405c934132a3bbc32cf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CvNXteeSDIQFsKpM.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">一个被删除的Reddit用户的Dogecoin标志</p></figure><p id="aa88" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们将从为我们关心的数据创建<a class="ae kz" href="https://developer.apple.com/documentation/swift/codable" rel="noopener ugc nofollow" target="_blank">可编码</a>结构开始。菜单中的每个选项代表一个滚动条，每个滚动条都有一对关联的加密货币。一个是基础货币，一个是目标货币。最后一个是硬币的最新价值，而数量是货币当前移动的数量。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj lx"><img src="../Images/9bbd77b8280799046078bef28b9f7e14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_0aN2M5cufyTQh3N.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">源代码:<a class="ae kz" href="https://gist.github.com/67194f07a965db5d7e7271c38e0d097b" rel="noopener ugc nofollow" target="_blank"> TickerData.swift </a></p></figure><p id="1057" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们将从<a class="ae kz" href="https://www.coingecko.com/en/api" rel="noopener ugc nofollow" target="_blank"> CoinGecko API </a>获取数据，这是免费的，不需要创建凭证。我将带回一个URL扩展，它允许您设置一个<code class="fe ly lz ma mb b">Published</code>属性来解码来自API的JSON响应。我也扩展了<code class="fe ly lz ma mb b">Date</code>,因为稍后我将需要当前时间作为接口的字符串。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj lw"><img src="../Images/bd36d2c5778f15d9cc93ad4cf26f74b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Y7lAiUOAv--v-3yp.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">源代码:<a class="ae kz" href="https://gist.github.com/1b254ac182e3518ab8a7612c549aeca4" rel="noopener ugc nofollow" target="_blank"> CryptoTrackerExtensions，swift </a></p></figure><p id="4b46" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们将使用一个<code class="fe ly lz ma mb b">EnvironmentObject</code>来存储SwiftUI视图之间共享的数据。当这个<code class="fe ly lz ma mb b">DataModel</code>类被创建时，我们试图从web上获取一个图像，从CoinGecko上获取我们的ticker数据。有一个空字符串作为名为<code class="fe ly lz ma mb b">lastRefreshed</code>的<code class="fe ly lz ma mb b">Published</code>属性，我们在刷新函数中更改它。现在，我们可以刷新应用程序中的数据，并确保它更新成功。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj lw"><img src="../Images/0c9850c19bdb920146326f680f2ddc2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5v_TjX22CfrthREM.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">源代码:<a class="ae kz" href="https://gist.github.com/95a3214c98e34f1096ade8038bf581d1" rel="noopener ugc nofollow" target="_blank">cryptotrackerdatamodel . swift</a></p></figure><p id="055d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们需要一个详细视图，显示每个交易所和每个包含Dogecoin的加密货币对的价值。我们从API得到的<code class="fe ly lz ma mb b">TickerData</code>结构有一组<code class="fe ly lz ma mb b">Ticker</code>实例，我们需要做的就是访问那里的值。我们只需要中间两行中的一行很大，这就是为什么我使用了一个多行字符串来组合它们，并给它们一个特定的字体大小和对齐方式。</p><p id="b2d1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们还有一个刷新按钮，这将显示来自<code class="fe ly lz ma mb b">DataModel</code>的<code class="fe ly lz ma mb b">lastRefreshed</code>字符串。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mc"><img src="../Images/4a6ac6cb26f4556059ff56455d74ff62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AJbIV2-2nWujGbct.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">源代码:<a class="ae kz" href="https://gist.github.com/d813db9bc7800f88dcbb03bcd3ce053d" rel="noopener ugc nofollow" target="_blank">tickertextrefreshview . swift</a></p></figure><p id="4793" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当我们把这些观点结合在一起，我们就有了<code class="fe ly lz ma mb b">TickerDetailView</code>。这是一个单独的页面，当用户从菜单中选择一个加密货币对时，将导航到该页面。我提供的图像只是Reddit上某个人设计的Dogecoin徽标，我认为加载图像比请求您事先将它添加到Xcode项目更容易。这将内容隔开，因为我们将屏幕上显示的数据量保持在最小。我们对图像和滚动条使用可选的绑定，因为在用户导航到这个视图之前，可能两者都没有从网上下载。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj md"><img src="../Images/8c91dc90cae7586d12ae5a6489a649c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FHGk2Yd4VRmWYNlt.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">源代码:<a class="ae kz" href="https://gist.github.com/a0d6cc8bfc95215aa964603e8c3fae7e" rel="noopener ugc nofollow" target="_blank"> TickerDetailView.swift </a></p></figure><p id="b3e3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在我们只需要显示主菜单，这很简单。我不确定API如何对tickers数组进行排序，但它不是按字母顺序排列的。我想按字母顺序对我的加密货币进行排序，因为这将把一个给定交易所的所有加密货币对放在同一个地方。之后，只需要显示一个链接到<code class="fe ly lz ma mb b">TickerDetailView</code>的<code class="fe ly lz ma mb b">NavigationLink</code>按钮的<code class="fe ly lz ma mb b">List</code>，并作为<code class="fe ly lz ma mb b">environmentObject</code>传递<code class="fe ly lz ma mb b">DataModel</code>实例。虽然我们需要用<code class="fe ly lz ma mb b">NavigationLink</code>来做这件事，但是对于我们在<code class="fe ly lz ma mb b">TickerDetailView</code>上的后续子视图来说，这是不必要的，因为对象已经可以从那里访问了。</p><p id="19f0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这允许包含在<code class="fe ly lz ma mb b">TickerDetailView</code>中的刷新按钮刷新菜单中的所有内容，以及更新它自己。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj lw"><img src="../Images/94942f70aac2ebf806af2720f62501b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IzEgcN_cDqUuXzMI.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">源代码:<a class="ae kz" href="https://gist.github.com/aa9b1176ba70e44553eea76fcae8712f" rel="noopener ugc nofollow" target="_blank">cryptotrackercontentview . swift</a></p></figure><h1 id="e49d" class="me mf iu bd mg mh mi mj mk ml mm mn mo ka mp kb mq kd mr ke ms kg mt kh mu mv bi translated">后续步骤</h1><p id="fc60" class="pw-post-body-paragraph la lb iu lc b ld mw jv lf lg mx jy li lj my ll lm ln mz lp lq lr na lt lu lv in bi translated">CoinGecko API有许多有趣的端点，您不需要将自己限制为只显示当前价格。你可以研究历史数据，绘制图表，或者比较加密货币。每分钟100个请求的API有一个合理的限制，但如果您只是使用本教程来试验加密货币API，那么您不太可能遇到问题。</p></div></div>    
</body>
</html>