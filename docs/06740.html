<html>
<head>
<title>A Deep Dive Into Linux Permissions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">深入探究Linux权限</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-deep-dive-into-linux-permissions-6e5a5a640160?source=collection_archive---------2-----------------------#2020-10-30">https://betterprogramming.pub/a-deep-dive-into-linux-permissions-6e5a5a640160?source=collection_archive---------2-----------------------#2020-10-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="92fa" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解Linux权限模型及其对系统安全性的影响</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4bfd766ad1453e666275a67437f04726.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z1w_2dfCggdf4BCG"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">丹·尼尔森在Unsplash<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拍摄的照片</a></p></figure><p id="fec1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">欢迎来到Linux安全系列！在本系列中，我将探讨Linux安全性的基础知识以及攻击者如何攻击Linux机器。</p><p id="373f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们深入研究Linux系统安全性之前，理解Linux机器的权限模型是非常重要的。理解如何管理Linux系统上的权限将有助于理解利用权限系统的攻击，就像大多数权限提升技术一样。让我们开始吧。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f1f1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Linux文件权限</h1><p id="4222" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Linux继承了Unix的文件所有权和权限模型。系统上的每个文件和文件夹都有一组<em class="mz">权限</em>，指定谁被允许对该特定文件做什么。</p><p id="5609" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">权限有三种:<em class="mz">读</em>、<em class="mz">写</em>、<em class="mz">执行</em>。对文件的<em class="mz">读取</em>权限允许用户读取文件的内容。<em class="mz">写</em>权限允许用户修改或删除文件。并且<em class="mz">执行</em>许可允许用户将文件作为脚本或可执行文件运行。</p><p id="f138" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在目录中使用<code class="fe na nb nc nd b">ls -l</code>命令查看文件或目录的权限。您应该会看到这样一行。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="d645" class="ni md it nd b gy nj nk l nl nm">-rwxrwxrwx<br/>drwxrwxrwx</span></pre><p id="12cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个字符指示该项是文件还是目录。破折号表示该项是一个文件，而<em class="mz"> d </em>表示它是一个目录。接下来的三个字符是文件所有者的权限。所有者通常是创建文件并对其拥有最大控制权的用户。<em class="mz"> R </em>表示<em class="mz">读</em>，<em class="mz"> w </em>表示<em class="mz">写</em>，<em class="mz"> X </em>表示<em class="mz">执行</em>。破折号表示没有该权限。让我们看一个例子。在这里，所有者可以读取、写入和执行文件。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="0bd0" class="ni md it nd b gy nj nk l nl nm">-rwxr--r--</span></pre><p id="d2c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并且在Linux中，用户被分类到用户组<em class="mz">中</em>，这些组经常共享文件权限。接下来的三个字符是所有者组的权限。最后三个是其他人的权限。该文件的权限表明每个人都可以读取该文件，但只有所有者可以写入或执行该文件。</p><p id="80dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用<code class="fe na nb nc nd b">chmod</code>命令设置文件权限。在该命令中，使用字符<em class="mz"> u </em>、<em class="mz"> g </em>和<em class="mz"> o </em>来表示<em class="mz">所有者用户</em>、<em class="mz">所有者组</em>和<em class="mz">其他</em>。例如，要为文件的所有者组添加执行权限，可以使用以下命令:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="674d" class="ni md it nd b gy nj nk l nl nm">chmod g+x filepath</span></pre><p id="d42f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要为每个人设置执行权限，您可以使用以下命令:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="e8cf" class="ni md it nd b gy nj nk l nl nm">chmod +x filepath</span></pre><p id="5ef1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，当您想要删除权限时，可以将加号替换为减号。例如，该命令将删除所有人的执行权限。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="69c1" class="ni md it nd b gy nj nk l nl nm">chmod -x filepath</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="86ff" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">特殊许可模式</h1><p id="a2eb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">对于文件的权限，您还可以做一些特殊的事情。</p><p id="ab05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以做的第一件事是设置setUID或SUID位。当<code class="fe na nb nc nd b">SUID</code>位被置位时，文件将总是以拥有该文件的用户身份运行，而不是以启动该程序的用户身份运行。例如，如果一个可执行文件归root所有，那么该文件将始终以root用户身份运行，而不管是谁开始执行的。如果在所有者权限中有一个<em class="mz"> s </em>字符，而不是一个<em class="mz"> x </em>或一个破折号，您就可以知道一个文件是否有SUID权限。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="a895" class="ni md it nd b gy nj nk l nl nm">-rwsrwxrwx</span></pre><p id="abe6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SUID钻头有许多常见的使用案例。例如，由于<code class="fe na nb nc nd b">ping</code>命令需要以root权限执行，如果你想让普通用户使用<code class="fe na nb nc nd b">ping</code>，你需要为<code class="fe na nb nc nd b">ping</code>可执行文件设置SUID位。也可以使用<code class="fe na nb nc nd b">chmod</code>命令设置SUID位。此命令将设置文件的SUID位。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="b989" class="ni md it nd b gy nj nk l nl nm">chmod u+s filepath</span></pre><p id="a05c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SetGID，或SGID，工作类似于SUID。当在文件上设置了setGID位时，所有用户都可以使用所有者组的权限执行该文件。如果在目录上设置了SGID，则父目录的所有者组中的所有用户都可以访问在该目录中创建的所有文件。如果在所有者组的权限中有一个<em class="mz"> s </em>字符而不是一个<em class="mz"> x </em>或一个破折号，您就可以判断一个文件或目录是否有SGID权限。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="760f" class="ni md it nd b gy nj nk l nl nm">-rwxrwsrwx</span></pre><p id="4b8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也可以使用<code class="fe na nb nc nd b">chmod</code>设置SGID位。此命令将设置文件的SGID位。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="31f4" class="ni md it nd b gy nj nk l nl nm">chmod g+s filepath</span></pre><p id="67ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在文件权限中还有一个叫做<em class="mz">粘滞位</em>的东西。如果在常规文件上设置粘滞位，它会使程序的后续执行更快。然而，sticky位更常用于目录。这意味着该目录中的文件或目录只能由文件或目录的所有者或超级用户移动或删除。这通常用于临时目录(<code class="fe na nb nc nd b">/tmp</code>)，用于存储个人用户创建的临时文件。您可以通过查看权限字符串的最后一个字符中是否有<em class="mz"> t </em>字符而不是<em class="mz"> x </em>或破折号来判断文件或目录是否设置了粘性位。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="cd40" class="ni md it nd b gy nj nk l nl nm">-rwxrwxrwt</span></pre><p id="8313" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用这个命令将粘性位添加到文件或目录中。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="4d60" class="ni md it nd b gy nj nk l nl nm">chmod +t filepath</span></pre><p id="a49a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这能帮助你更清楚地理解Linux权限是如何管理的。下一次，我们将深入探讨一些权限提升技术，这些技术允许攻击者在没有权限的情况下访问或执行文件。下次见！</p></div></div>    
</body>
</html>