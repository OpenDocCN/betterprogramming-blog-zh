<html>
<head>
<title>Running Desktop Apps in Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Docker中运行桌面应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/running-desktop-apps-in-docker-43a70a5265c4?source=collection_archive---------0-----------------------#2019-10-13">https://betterprogramming.pub/running-desktop-apps-in-docker-43a70a5265c4?source=collection_archive---------0-----------------------#2019-10-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="f870" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">学习如何运行桌面应用程序，如GIMP、Eclipse IDE、Firefox等。在码头</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/63ff725d3cf4e4cb4dc449be3233212e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BD65i52b8xYY3k0lV4JRSQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Docker中运行的GIMP、Eclipse IDE和xeyes</p></figure><p id="16d5" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">如今，Docker是运行容器化应用程序的事实标准。从简单的Hello Worlds到复杂的多容器设置，您的应用程序的部署再简单不过了。</p><p id="f92c" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">但是那些需要图形前端的应用程序呢？Docker是一种服务器端技术——当然，你不能有图形，对吗？还是可以？接下来我们来了解一下(TL；大卫:是的，你可以。</p></div><div class="ab cl lv lw hy lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="in io ip iq ir"><h1 id="f814" class="mc md iu bd me mf mg mh mi mj mk ml mm ka mn kb mo kd mp ke mq kg mr kh ms mt bi translated">Docker没有图形</h1><p id="c5b3" class="pw-post-body-paragraph kz la iu lb b lc mu jv le lf mv jy lh li mw lk ll lm mx lo lp lq my ls lt lu in bi translated">术语<em class="mz"> graphics </em>可以表示计算机科学和软件开发世界中的各种事物，当然，我不会在这里尝试定义它。有了一些诗意的许可，让我们笼统地称桌面应用程序为图形应用程序:一个需要<em class="mz">画布</em>和<em class="mz">在其用户界面上绘制</em>的软件。</p><p id="a779" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">显然，您不希望Docker为您的容器提供这样的画布，事实也的确如此，它确实没有。事实上，很多时候你被要求在<a class="ae na" href="https://en.wikipedia.org/wiki/Headless_software" rel="noopener ugc nofollow" target="_blank">无头模式</a>下运行Docker容器，正是因为如此。那么如何在Docker中运行桌面应用程序呢？让我们弄清楚。</p></div><div class="ab cl lv lw hy lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="in io ip iq ir"><h1 id="7e67" class="mc md iu bd me mf mg mh mi mj mk ml mm ka mn kb mo kd mp ke mq kg mr kh ms mt bi translated">x窗口</h1><p id="a987" class="pw-post-body-paragraph kz la iu lb b lc mu jv le lf mv jy lh li mw lk ll lm mx lo lp lq my ls lt lu in bi translated">X窗口系统(X11，或简称X)是一个用于位图显示的窗口系统，常见于类Unix操作系统。x为GUI环境提供了基本框架:在显示设备上绘制和移动窗口，与鼠标和键盘交互。</p><p id="6003" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">x需要一个服务器组件，允许应用程序内的交互来绘制内容并从用户的输入设备获得输入。作为X客户端，应用程序完全不知道它们的输出将实际呈现在哪里。</p><p id="8b79" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">要进一步尝试下面的例子，您需要在您的PC上运行一个X服务器。如果你在桌面Linux上，你已经有一个了。macOS可以下载<a class="ae na" href="https://www.xquartz.org/" rel="noopener ugc nofollow" target="_blank"> XQuartz </a>，Windows可以试试<a class="ae na" href="https://sourceforge.net/projects/vcxsrv/" rel="noopener ugc nofollow" target="_blank"> VcXsrv </a>。</p></div><div class="ab cl lv lw hy lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="in io ip iq ir"><h1 id="0979" class="mc md iu bd me mf mg mh mi mj mk ml mm ka mn kb mo kd mp ke mq kg mr kh ms mt bi translated">x和Docker交互场景</h1><p id="ab8e" class="pw-post-body-paragraph kz la iu lb b lc mu jv le lf mv jy lh li mw lk ll lm mx lo lp lq my ls lt lu in bi translated">桌面应用程序将在Docker中运行，并试图与您在PC上运行的X服务器通信。这可以在您的主机上运行的Docker引擎中发生，也可以在远程机器上运行的Docker引擎中发生。对于X来说，除了引入一些网络延迟之外，这并没有什么不同。</p><p id="6f6e" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">下图描述了交互场景:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nb"><img src="../Images/adda943f2a784276b07f8a20c1dd8159.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RrJY_XAwFr1kRR6_WCLLpg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">x窗口和Docker交互</p></figure><p id="521f" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">x客户机(您的桌面应用程序)并不真的需要知道太多信息来进行这种通信。</p><p id="ce05" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">实际上，除了X服务器的位置和一个可选的目标显示器之外，他们不需要知道任何东西。</p><p id="2899" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这由一个名为DISPLAY的环境变量表示，语法如下:<code class="fe nc nd ne nf b">DISPLAY=xserver-host:0</code>。你在<code class="fe nc nd ne nf b">:</code>后面看到的数字就是显示号；出于本文的意图和目的，我们将认为这等同于“0是连接到X服务器的主显示器”</p></div><div class="ab cl lv lw hy lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="in io ip iq ir"><h1 id="ce3b" class="mc md iu bd me mf mg mh mi mj mk ml mm ka mn kb mo kd mp ke mq kg mr kh ms mt bi translated">让欢乐开始吧</h1><p id="0883" class="pw-post-body-paragraph kz la iu lb b lc mu jv le lf mv jy lh li mw lk ll lm mx lo lp lq my ls lt lu in bi translated">是时候运行我们的桌面应用程序了。</p><p id="55d3" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">因为我们将在Docker容器中运行桌面应用程序，而X服务器将在主机上运行，所以我们需要一种方式让这两者进行通信。</p><p id="f4cc" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">不幸的是，目前还没有通用的、开箱即用的Docker方法来做到这一点。因此，请记住macOS、Windows和Linux的以下设置:</p><p id="51ab" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">MAC OS:<code class="fe nc nd ne nf b">-e DISPLAY=docker.for.mac.host.internal:0<br/></code>Windows:<code class="fe nc nd ne nf b">-e DISPLAY=host.docker.internal:0<br/></code>Linux:<code class="fe nc nd ne nf b">--net=host -e DISPLAY=:0</code></p><p id="fd6d" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">另外，记得让你的X服务器允许远程连接。对于Mac和Windows，这应该是X server应用程序上的一个设置，而在Linux中，您可以使用<code class="fe nc nd ne nf b">xhosts +</code>(暂时)启用来自所有主机的访问。</p><h2 id="714f" class="ng md iu bd me nh ni dn mi nj nk dp mm li nl nm mo lm nn no mq lq np nq ms nr bi translated">xeyes</h2><p id="2075" class="pw-post-body-paragraph kz la iu lb b lc mu jv le lf mv jy lh li mw lk ll lm mx lo lp lq my ls lt lu in bi translated">没有一篇关于X Windows的文章不提到空前经典的xeyes:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ns"><img src="../Images/b12e547b29721cb8c953fb09766a1f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*xPBReuwWAHI11mK-f34juw.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">xeyes在Docker中运行</p></figure><p id="7a77" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">苹果电脑:<code class="fe nc nd ne nf b">docker run --rm -ti -e DISPLAY=docker.for.mac.host.internal:0 fr3nd/xeyes</code></p><p id="fa51" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">windows:<br/><code class="fe nc nd ne nf b">docker run --rm -ti -e DISPLAY=host.docker.internal:0 fr3nd/xeyes</code><br/>Linux:<br/><code class="fe nc nd ne nf b">docker run --rm -ti --net=host -e DISPLAY=:0 fr3nd/xeyes</code></p><h2 id="2fc3" class="ng md iu bd me nh ni dn mi nj nk dp mm li nl nm mo lm nn no mq lq np nq ms nr bi translated">瘸子</h2><p id="674e" class="pw-post-body-paragraph kz la iu lb b lc mu jv le lf mv jy lh li mw lk ll lm mx lo lp lq my ls lt lu in bi translated">Gimp允许在没有其他工具可用时快速编辑照片或绘图:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nt"><img src="../Images/ceb67fe49897d9528fce155be72cc130.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QAX1IFFyyqmo-lgYQhq-uw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">GIMP在Docker中运行</p></figure><p id="f866" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">macOS: <code class="fe nc nd ne nf b">docker run --rm -ti -e DISPLAY=docker.for.mac.host.internal:0 jamesnetherton/gimp</code></p><p id="df6a" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">视窗:<code class="fe nc nd ne nf b">docker run --rm -ti -e DISPLAY=host.docker.internal:0 jamesnetherton/gimp</code></p><p id="cfb6" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">Linux: <code class="fe nc nd ne nf b">docker run --rm -ti --net=host -e DISPLAY=:0 jamesnetherton/gimp</code></p><h2 id="206b" class="ng md iu bd me nh ni dn mi nj nk dp mm li nl nm mo lm nn no mq lq np nq ms nr bi translated">Eclipse IDE</h2><p id="24b9" class="pw-post-body-paragraph kz la iu lb b lc mu jv le lf mv jy lh li mw lk ll lm mx lo lp lq my ls lt lu in bi translated">快速启动一个IDE:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nu"><img src="../Images/c90af24e4320c1721a7e206be4034487.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_NoLd6nTwJY0V9m51qt2Nw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">运行在Docker中的Eclipse IDE</p></figure><p id="fa4f" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">苹果电脑:<code class="fe nc nd ne nf b">docker run --rm -ti -e DISPLAY=docker.for.mac.host.internal:0 psharkey/eclipse</code></p><p id="9218" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">视窗:<code class="fe nc nd ne nf b">docker run --rm -ti -e DISPLAY=host.docker.internal:0 psharkey/eclipse</code></p><p id="a887" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">Linux: <code class="fe nc nd ne nf b">docker run --rm -ti --net=host -e DISPLAY=:0 psharkey/eclipse</code></p><h2 id="5a6f" class="ng md iu bd me nh ni dn mi nj nk dp mm li nl nm mo lm nn no mq lq np nq ms nr bi translated">自由办公室</h2><p id="6049" class="pw-post-body-paragraph kz la iu lb b lc mu jv le lf mv jy lh li mw lk ll lm mx lo lp lq my ls lt lu in bi translated">文字处理器、电子表格编辑器、演示工具和数据库编辑器:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nv"><img src="../Images/0825f4307ceefef423a88258ec1ba6f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xDsGGNmWPROCz3J8Efgd4A.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Docker中运行的Libre Office</p></figure><p id="284b" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">苹果电脑:<code class="fe nc nd ne nf b">docker run --rm -ti -e DISPLAY=docker.for.mac.host.internal:0 woahbase/alpine-libreoffice:x86_64</code></p><p id="f774" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">视窗:<code class="fe nc nd ne nf b">docker run --rm -ti -e DISPLAY=host.docker.internal:0 woahbase/alpine-libreoffice:x86_64</code></p><p id="a9ee" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">Linux: <code class="fe nc nd ne nf b">docker run --rm -ti --net=host -e DISPLAY=:0 woahbase/alpine-libreoffice:x86_64</code></p><h2 id="c285" class="ng md iu bd me nh ni dn mi nj nk dp mm li nl nm mo lm nn no mq lq np nq ms nr bi translated">XMind</h2><p id="b8e4" class="pw-post-body-paragraph kz la iu lb b lc mu jv le lf mv jy lh li mw lk ll lm mx lo lp lq my ls lt lu in bi translated">XMind是一个思维导图和头脑风暴工具:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nw"><img src="../Images/c21b607241f6a586773419c71441c82c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2nEGtcov3ghmLoRseSsseg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Docker中运行的XMind</p></figure><p id="6c25" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">苹果电脑:<code class="fe nc nd ne nf b">docker run --rm -ti -e DISPLAY=docker.for.mac.host.internal:0 mdwheele/xmind</code></p><p id="895a" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">Windows: <br/> <code class="fe nc nd ne nf b">docker run --rm -ti -e DISPLAY=host.docker.internal:0 mdwheele/xmind</code></p><p id="c7cc" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">Linux: <br/> <code class="fe nc nd ne nf b">docker run --rm -ti --net=host -e DISPLAY=:0 mdwheele/xmind</code></p><h2 id="cca7" class="ng md iu bd me nh ni dn mi nj nk dp mm li nl nm mo lm nn no mq lq np nq ms nr bi translated">火狐浏览器</h2><p id="c283" class="pw-post-body-paragraph kz la iu lb b lc mu jv le lf mv jy lh li mw lk ll lm mx lo lp lq my ls lt lu in bi translated">启动一次性浏览器，这样就没人能跟踪你了:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nx"><img src="../Images/5dd22760adf8d81f4fc53ac34590a59f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dL-G3ffl8JTbIfcq8Smc5g.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Firefox在Docker中运行</p></figure><p id="63bf" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">苹果电脑:<code class="fe nc nd ne nf b">docker run --rm -ti -e DISPLAY=docker.for.mac.host.internal:0 jess/firefox</code></p><p id="e313" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">视窗:<code class="fe nc nd ne nf b">docker run --rm -ti -e DISPLAY=host.docker.internal:0 jess/firefox</code></p><p id="af35" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">Linux: <code class="fe nc nd ne nf b">docker run --rm -ti --net=host -e DISPLAY=:0 jess/firefox</code></p></div><div class="ab cl lv lw hy lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="in io ip iq ir"><p id="f1d6" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">在本文中，我们看到了桌面应用程序如何利用X Windows的能力在Docker中运行。设置非常简单，只需要在您的主机上运行一个X服务器。</p><p id="cf99" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">对Docker感兴趣？这里有一些附加的帖子，希望你会觉得有启发性和趣味性:<br/> <a class="ae na" href="https://medium.com/swlh/build-push-to-docker-with-maven-eea7c4b8cfa2" rel="noopener">用Maven构建并推送Docker</a><br/><a class="ae na" href="https://medium.com/better-programming/how-to-recover-from-a-failed-automated-docker-hub-build-8b6c1cc3d7d4" rel="noopener">如何从失败的自动化Docker Hub构建中恢复</a> <br/> <a class="ae na" href="https://medium.com/better-programming/how-to-test-your-automated-builds-on-docker-hub-e40879f35d1e" rel="noopener">如何在Docker Hub上测试你的自动化构建</a> <br/> <a class="ae na" href="https://medium.com/better-programming/build-your-docker-images-automatically-when-you-push-on-github-18e80ece76af" rel="noopener">当你推送GitHub时自动构建你的Docker镜像</a></p></div></div>    
</body>
</html>