<html>
<head>
<title>Responsive Layout Grid Using Jetpack Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Jetpack Compose的响应式布局网格</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/responsive-layout-grid-363aa1fb7a8b?source=collection_archive---------5-----------------------#2022-02-27">https://betterprogramming.pub/responsive-layout-grid-363aa1fb7a8b?source=collection_archive---------5-----------------------#2022-02-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="66b9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">构建一致的布局</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e67a0ad0a24d1feb76b6ad6bc3729496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sQ3MY5x4stoKQiWE"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@sharonmccutcheon?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">莎伦·麦卡琴</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="7546" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">自从<strong class="ky ir">响应式布局网格</strong>模式被引入到基于设备宽度和方向来设计应用以确保布局的一致性以来，已经有很长时间了。</p><p id="eb1a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">响应式布局网格由三个元素组成:列、装订线和边距。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/7aec9137b892f128d0b5a9d5c5e5b999.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9V9KzZMOOmNDLyVZwANFZw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">1.第二栏。排水沟3。边缘</p></figure><ul class=""><li id="a646" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">列:内容放在包含列的屏幕区域中。</li><li id="e35a" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">装订线:装订线是帮助分隔内容的栏间空间。</li><li id="643e" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">边距:边距是内容和屏幕左右边缘之间的距离。</li></ul><blockquote class="mh mi mj"><p id="5118" class="kw kx mk ky b kz la jr lb lc ld ju le ml lg lh li mm lk ll lm mn lo lp lq lr ij bi translated">不同设备的分栏、装订线、边距值不同，这些也可以为应用程序定制。检查<a class="ae kv" href="https://material.io/archive/guidelines/layout/responsive-ui.html#responsive-ui-breakpoints" rel="noopener ugc nofollow" target="_blank">断点系统</a>中所有设备类型的元素值。</p></blockquote><p id="8433" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Jetpack Compose比其他方法更容易实现。<br/>使用<code class="fe mo mp mq mr b"><a class="ae kv" href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/package-summary#CompositionLocalProvider(kotlin.Array,kotlin.Function0)" rel="noopener ugc nofollow" target="_blank">CompositionLocalProvider</a></code>为<code class="fe mo mp mq mr b"><a class="ae kv" href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/CompositionLocal" rel="noopener ugc nofollow" target="_blank">CompositionLocal</a></code>提供一个值。这通常在树的“根”处，但也可以在任何地方，并且也可以在多个地方使用来覆盖为子树提供的值。</p><p id="1a3b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以我们创建了一个数据类<code class="fe mo mp mq mr b">GridConfiguration</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="2f72" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mo mp mq mr b">layoutWidth</code>:将应用网格配置的布局宽度。<br/> <code class="fe mo mp mq mr b">columnWidth</code>:以页边距和装订线后留出的空间计算的栏间距宽度</p><p id="6a2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于<code class="fe mo mp mq mr b">columnWidth</code>需要计算，我们编写了一个预定义的计算器函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="a352" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它将从一个可记忆的函数中调用，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="c40b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要一个复合局部变量来通过<code class="fe mo mp mq mr b">CompositionLocalProvider</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="69e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mo mp mq mr b">CompositionLocalProvider</code>中被忽略的最后一项是布局宽度。这可以从<code class="fe mo mp mq mr b"><a class="ae kv" href="https://developer.android.com/reference/android/content/res/Configuration#screenWidthDp" rel="noopener ugc nofollow" target="_blank">LocalConfiguration#ScreenWidthDp</a></code>获得，它是应用在任何时间点的宽度(单个应用、分割模式、窗口模式、方向改变或未来的任何其他)。</p><blockquote class="mh mi mj"><p id="0d65" class="kw kx mk ky b kz la jr lb lc ld ju le ml lg lh li mm lk ll lm mn lo lp lq lr ij bi translated"><strong class="ky ir">注意</strong>:布局宽度不一定是应用程序的完整宽度，它也可以是屏幕的一部分，如双窗格布局、滑动窗格等。,</p></blockquote><p id="354f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一切都完成了，只需在<code class="fe mo mp mq mr b">CompositionLocalProvider</code>中传递形成的<code class="fe mo mp mq mr b">GridConfiguration</code>值就可以开始编码了。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div></figure></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><p id="a208" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">网格<code class="fe mo mp mq mr b">Configuration</code>已经设置好了，现在我们该怎么办！</p><p id="352c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">响应式网格布局用于根据列数设置内容的宽度，并将其在屏幕上对齐。现在，自适应部分是基于<code class="fe mo mp mq mr b">columnSpan</code> / <code class="fe mo mp mq mr b">columnCount</code>(可能因设备而异)的宽度。</p><p id="eb62" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">借助column-span/count使用网格配置可以计算宽度。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="2814" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除此之外，我们将有一个修改器来简化工作。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="6569" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于谁看起来像最终输出和完整的代码样本应用程序可在<a class="ae kv" href="https://github.com/sahruday/ResponsiveGrid" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/305b78e1fe8ec07b9161a9aa06220d29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*jknAYQc2lhPeld5x7ESDOg.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用网格配置和自定义布局覆盖的示例应用程序。</p></figure><p id="ad2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">快乐的编码人们使用响应式布局网格。</p></div></div>    
</body>
</html>