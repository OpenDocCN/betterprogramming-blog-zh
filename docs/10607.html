<html>
<head>
<title>Understanding Android’s Build Variants, Types, and Flavors</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解Android的构建变体、类型和风格</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/understanding-androids-build-variants-types-and-flavors-66753340e4df?source=collection_archive---------2-----------------------#2022-01-18">https://betterprogramming.pub/understanding-androids-build-variants-types-and-flavors-66753340e4df?source=collection_archive---------2-----------------------#2022-01-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c619" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">构建白色标签应用</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3e2cc32c32038143a86ed66030c6cd30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jtC6qf1QYYxyPjdS"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@altumcode?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">替代码</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="f3c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个指南将帮助你理解术语，为什么我们需要一个应用程序有多种风格，它还将提供一个创建一切所涉及的过程的逐步分解。</p><p id="44c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时，我们需要能够构建应用程序的两个版本:开发版本和生产版本。它们中的每一个都有自己的包名，并且知道哪个是它需要连接的正确的后端。此外，开发人员和测试人员将能够在设备上同时安装这两个应用程序。</p><p id="2a8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我上面提到的代表了一个<strong class="lb iu">构建变体。</strong>简单来说:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="af6d" class="ma mb it lw b gy mc md l me mf">Build variant = build type + product flavor</span></pre><ol class=""><li id="dd3c" class="mg mh it lb b lc ld lf lg li mi lm mj lq mk lu ml mm mn mo bi translated">一个<strong class="lb iu">构建类型</strong>要么是<strong class="lb iu">调试</strong>要么是<strong class="lb iu">发布</strong>。当你从Android Studio运行应用程序时，你运行的是该应用程序的调试版本。然而，如果你将你的应用程序发布到任何类型的门户网站(Firebase/PlayStore ),你需要生成一个发布版本。你可以从Android Studio&gt;Build&gt;Generate signed bundle/APK中完成。您将使用发布证书来签署此应用程序-稍后将详细介绍。</li><li id="1bed" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated">一个<strong class="lb iu">产品风味</strong>的例子可以是我在介绍中提到的:一种风味可以是<code class="fe mu mv mw lw b">dev</code>，另一种可以是<code class="fe mu mv mw lw b">prod</code>。还有其他的情况，比如创建一个<code class="fe mu mv mw lw b">demo</code>版本的应用或者一个<code class="fe mu mv mw lw b">paid</code>版本的应用。第三个例子:一个类似优步的应用程序可能有一个<code class="fe mu mv mw lw b">driver</code>版本和一个<code class="fe mu mv mw lw b">client</code>版本。</li></ol><p id="bdad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在最后一个例子的基础上，你将拥有这个类似优步的应用程序的4个版本:</p><ol class=""><li id="3857" class="mg mh it lb b lc ld lf lg li mi lm mj lq mk lu ml mm mn mo bi translated"><code class="fe mu mv mw lw b">driverDebug</code></li><li id="69a0" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated"><code class="fe mu mv mw lw b">driverRelease</code></li><li id="c980" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated"><code class="fe mu mv mw lw b">clientDebug</code></li><li id="c8c1" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated"><code class="fe mu mv mw lw b">clientRelease</code></li></ol><p id="5740" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在dev/prod示例的基础上，我们还可以添加第三种产品风格(姑且称之为<code class="fe mu mv mw lw b">test</code>)，它将连接到登台环境，并且也将具有不同的包名。这将导致6个构建变体:</p><ol class=""><li id="38fd" class="mg mh it lb b lc ld lf lg li mi lm mj lq mk lu ml mm mn mo bi translated"><code class="fe mu mv mw lw b">devDebug</code></li><li id="21ed" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated"><code class="fe mu mv mw lw b">devRelease</code></li><li id="3a5b" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated"><code class="fe mu mv mw lw b">testDebug</code></li><li id="a2e7" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated"><code class="fe mu mv mw lw b">testRelease</code></li><li id="c6ef" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated"><code class="fe mu mv mw lw b">prodDebug</code></li><li id="3d63" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated"><code class="fe mu mv mw lw b">prodRelease</code></li></ol><p id="5885" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为开发人员，您将从IDE中运行调试变体。您可以从Android studio中选择构建变体。如果您是React本地开发人员，您可以从命令行提供所需的变体。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="d578" class="ne mb it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">如何配置口味</h1><p id="5e17" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">转到你的应用程序的<code class="fe mu mv mw lw b">build.gradle</code>。在<code class="fe mu mv mw lw b">buildTypes</code>下，你会看到这个:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="aeef" class="ma mb it lw b gy mc md l me mf">buildTypes <strong class="lw iu">{<br/>    </strong>debug <strong class="lw iu">{<br/>      ...</strong><br/>    <strong class="lw iu">}<br/>    </strong>release <strong class="lw iu">{<br/>      </strong>...<br/>    <strong class="lw iu">}<br/>}</strong></span></pre><p id="92c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下配置生成类型。我们需要配置我们的自定义风格。在与<code class="fe mu mv mw lw b">buildTypes</code>相同的层次上，您需要将以下内容添加到您的<code class="fe mu mv mw lw b">build.gradle</code>文件中:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="56cc" class="ma mb it lw b gy mc md l me mf">flavorDimensions "default"<br/>productFlavors <strong class="lw iu">{<br/>  </strong>myApp <strong class="lw iu">{<br/>    </strong>dimension "default"<br/>  <strong class="lw iu">}<br/>  </strong>myAppDev<strong class="lw iu"> {<br/>    </strong>dimension "default"<br/>    applicationIdSuffix ".dev"<br/>  <strong class="lw iu">}<br/>  </strong>myAppTest<strong class="lw iu"> {<br/>    </strong>dimension "default"<br/>    applicationIdSuffix ".test"<br/>  <strong class="lw iu">}<br/>}</strong></span></pre><p id="7258" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">风味维度只不过是一组产品风味。你需要一个——否则，你会遇到这个错误:<code class="fe mu mv mw lw b">Error: All flavors must now belong to a named flavor dimension.</code>。Gradle需要一个风味维度来指定每种产品的风味。</p><p id="5b3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还为你的应用程序的每种风格添加了自定义后缀，这样你就可以在你的设备上同时安装所有3种版本。</p><p id="8d1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您的基础包名称是<code class="fe mu mv mw lw b">com.example</code>，那么您将得到<code class="fe mu mv mw lw b">com.example</code>的产品版本、<code class="fe mu mv mw lw b">com.example.dev</code>的开发版本和<code class="fe mu mv mw lw b">com.example.test</code>的测试版本。</p><h1 id="20bb" class="ne mb it bd nf ng oa ni nj nk ob nm nn jz oc ka np kc od kd nr kf oe kg nt nu bi translated">配置资源</h1><p id="d49a" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">你还需要进入Android Studio，在app &gt; src下创建一个<code class="fe mu mv mw lw b">myAppDev</code>和一个<code class="fe mu mv mw lw b">myAppTest</code>目录。在那里，您将从<code class="fe mu mv mw lw b">main</code>目录复制并粘贴<code class="fe mu mv mw lw b">res</code>目录。</p><p id="ff24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe mu mv mw lw b">values</code>中，你只需要<code class="fe mu mv mw lw b">strings.xml</code>一个——你可能需要为你的应用程序的每个变体定制一个<code class="fe mu mv mw lw b">app_name</code>。</p><h1 id="de05" class="ne mb it bd nf ng oa ni nj nk ob nm nn jz oc ka np kc od kd nr kf oe kg nt nu bi translated">火基分布</h1><p id="7f9f" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">您需要为每个构建变体创建一个单独的应用程序。<code class="fe mu mv mw lw b">myApp dev</code>、<code class="fe mu mv mw lw b">myApp test</code>和<code class="fe mu mv mw lw b">myApp</code>。</p><p id="7186" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，您将分发3个应用程序的发布版本。对于每个包，确保输入正确的包名(考虑后缀)。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="8fe6" class="ne mb it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">结论</h1><p id="c86d" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">我们回顾了在开始配置同一个应用程序的多个变体之前必须掌握的原则。希望这篇教程对你有所帮助。感谢您的阅读，不要犹豫，开始对话吧！</p></div></div>    
</body>
</html>