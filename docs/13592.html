<html>
<head>
<title>How to Add Makefile to Your iOS Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将Makefile添加到您的iOS项目中</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/adding-makefile-to-your-ios-project-802ac98fbe71?source=collection_archive---------1-----------------------#2022-09-10">https://betterprogramming.pub/adding-makefile-to-your-ios-project-802ac98fbe71?source=collection_archive---------1-----------------------#2022-09-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="86f3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过创建Makefile来增加项目终端命令的可读性。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/90cb6bd6e185e55797d6392d1eba968a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VEojtKB1EjPKCJCjh1Zdfg.png"/></div></div></figure><p id="27bd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">作为一名软件开发人员，您总是有一些可以通过脚本自动化的例行任务。无论是为相同类型的模块创建文件、版本控制操作，还是收集一些性能统计数据，所有这些操作都可以放入一个特定调用下的一组命令中。这样做，你可以避免重复做同样的事情，从而节省大量时间。</p><p id="8c58" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在iOS开发中，最常见的脚本语言是Shell和Ruby——它们已经默认安装在Mac上，因此很容易集成到项目中。所以，要创作一个剧本，你需要制作。rb或者。sh文件。然而，由于本文不是关于创建和编写脚本，而是关于通过向您的项目添加Makefile来使它的使用变得有用，所以我们不会触及脚本主题本身。</p><p id="3476" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们深入一个例子，这样我们可以看到它是如何工作的。</p><p id="710b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们从一个普通的Xcode项目开始:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ln"><img src="../Images/de2b918527da64f66bbd64e2cad00a76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hfVFsAsoEulNEXCgw-jXNg.png"/></div></div></figure><p id="b936" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们假设您有一个Ruby程序，它只是在您的项目文件夹中创建一个目录，不多也不少。它采用您想要创建的文件夹的名称，然后生成它。当然，在现实生活中你不需要遇到这样的脚本，因为这个任务非常简单，只有一个步骤。但是为了简单起见，我们将把它作为一个例子来运行:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lo"><img src="../Images/da28539e840e3409faf2d0e4282a5adb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I5k-HAD5qW_95vjm-NkanQ.png"/></div></div></figure><p id="25f4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，要使用您的脚本生成一个文件夹，您需要进入程序所在的项目目录，并使用“ruby”命令调用文件夹创建者:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lp"><img src="../Images/92e3c69084f62d9e45b7da75f5382c1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UC2vKaeN9HnPKKhXhveYTg.png"/></div></div></figure><p id="9946" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在<code class="fe lq lr ls lt b">UserImages</code>文件夹生成如下图所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lo"><img src="../Images/c32d92207e2d9bb54ad53260869b3b6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f7XiuELwpFt-5BVtyNJauQ.png"/></div></div></figure><p id="fdd1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我知道，一个脚本调用看起来并不复杂，也不难实现，但是如果你有一个很长的脚本文件夹路径，想象一下记住并输入这个路径中的所有目录，同时还会出现拼写错误和巨大的伤害。</p><p id="d314" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了避免上面提到的所有情况，可以将<code class="fe lq lr ls lt b">Makefile</code>添加到您的项目中。它将帮助您结构化您的脚本调用，并使它更容易，用户友好，和人类可读。你需要做的只是创建一个名为<code class="fe lq lr ls lt b">Makefile</code>的文件(就像那样！)放在您的。xcodeproj文件位于:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lp"><img src="../Images/dede3794a58585dff71a3c7444e78841.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-R7TA8BNfjM7uj3CgilEyw.png"/></div></div></figure><p id="9ca9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在一切都准备好了:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ln"><img src="../Images/c1eb2b300598c4c6ea7eb359fcd560b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xf56AO3dsEX3Gk_4LAFkgQ.png"/></div></div></figure><p id="dd72" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如您所见，它的大小为零字节。所以是全新的，完全是空的。将它添加到项目中后，您需要对其进行配置。Makefile只理解Shell语言，所以您必须使用它来做所有的安排。但是不要担心，搜索您的流程可能需要的任何命令一点也不困难。</p><p id="a764" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这个特殊的例子中，我们有一个单独的Ruby脚本，把我们需要的所有东西放在一起。我们需要做的就是调用这个脚本。为了做到这一点，您必须按照以下方式配置Makefile(tab键很重要):</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lu"><img src="../Images/0b42d4d3611e2155d41584c79cd8ad6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lqaLfKpu5qhflP79GFbUWw.png"/></div></div></figure><p id="e556" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我解释一下那里发生了什么。</p><p id="ee09" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在第1行中，我们只是在注释中加入了命令的作用。我们总是在Makefile中用##表示注释(类似于Swift中的//)。</p><p id="b466" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在第2行中，我们给出了执行命令的名称。我建议总是检查你的命令名是否与“make”字兼容，这样当你键入你的调用时，它会看起来很好并且可读。您和您的同事将从终端运行这个命令，所以请尽可能将其命名为有意义的名称。在我们的例子中,“创建文件夹”说明了这个指令的所有功能。</p><p id="d11d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第3行包含Shell命令本身。Makefile“监听”该命令，以便执行所需的操作。让我们把它分成几部分:</p><ul class=""><li id="0efb" class="lv lw iq kt b ku kv kx ky la lx le ly li lz lm ma mb mc md bi translated"><code class="fe lq lr ls lt b">@ruby</code> -要执行的终端命令</li><li id="e228" class="lv lw iq kt b ku me kx mf la mg le mh li mi lm ma mb mc md bi translated"><code class="fe lq lr ls lt b">$(PWD)</code> -返回Makefile所在文件夹的路径。这是一个Shell命令，为了正确构建脚本的路径，需要执行这个命令。</li><li id="2872" class="lv lw iq kt b ku me kx mf la mg le mh li mi lm ma mb mc md bi translated"><code class="fe lq lr ls lt b">…/scripts/folder_creator.rb</code> —脚本的剩余路径(可以更深，但应该指出Makefile所在文件夹的路径，因为我们有一个由上面的命令生成的路径)。</li></ul><p id="8eef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，从现在开始，为了用脚本创建一个文件夹，您需要进入您的项目文件夹(Makefile所在的位置)并调用“make folder”命令:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lp"><img src="../Images/78fceaf03ec0124353f3a1c76a1be14b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eV7v9LvOp6O6iAkpEa5Gmg.png"/></div></div></figure><p id="6957" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">而且，正如我们所看到的，<code class="fe lq lr ls lt b">Localization</code>文件夹已经被创建:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ln"><img src="../Images/53b539a31ad2d865c286b2253d40adf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JCe1tIfKzwivMFBZ0niEdw.png"/></div></div></figure></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><p id="7179" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在Makefile中还可以做很多改进。它还可以用于直接在其中执行Shell代码，而不是调用另一个脚本，所以我建议您深入研究这个主题，并将所有的例行操作转换成自动化的方式。使用上面的方法，你的项目的所有终端命令将是人类可读和易于理解的。</p><p id="9b69" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢您的阅读。</p></div></div>    
</body>
</html>