<html>
<head>
<title>Normalization vs. Denormalization</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">规范化与反规范化</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/normalization-vs-denormalization-7470bb20618d?source=collection_archive---------5-----------------------#2019-10-12">https://betterprogramming.pub/normalization-vs-denormalization-7470bb20618d?source=collection_archive---------5-----------------------#2019-10-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2203" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">什么时候各合适？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9b77fe48d430292c6915de7ef69f823e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vCtaRQ6PhNeuZr95"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">卡斯帕·卡米尔·鲁宾在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="9661" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">一个地方或许多地方</h1><p id="c325" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">规范化和反规范化之间的区别很简单。当数据被规范化时，它存在于且仅存在于一个真实来源位置。非规范化数据存在于多个汇总位置。</p><p id="2733" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">存储在一个或多个位置的数据对<em class="ms">的准确性和速度</em>有着重要的影响。如果数据位于一个源位置(即被规范化)，则必须将其与其他数据汇总才能使用。如果数据在多个位置汇总(即反规范化)，当数据更新时，在每个位置可以更改之前，它将有一段时间不同步。</p><p id="7046" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下面是每种方法的一个例子:</p><h2 id="2576" class="mt la it bd lb mu mv dn lf mw mx dp lj ma my mz ll me na nb ln mi nc nd lp ne bi translated"><strong class="ak">归一化数据:</strong></h2><p id="2803" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">下面我们可以看到三个用户:Patrick、Eric和Robert。帕特里克是其他人的朋友。埃里克和罗伯特彼此不认识。</p><p id="ebbb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">用户表:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="7f9c" class="mt la it ng b gy nk nl l nm nn">ID NAME    EMAIL<br/>1  Patrick patrick@somewebsite.com<br/>2  Eric    eric@somewebsite.com<br/>3  Robert  robert@somewebsite.com</span></pre><p id="ecad" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">友谊连接表:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="0662" class="mt la it ng b gy nk nl l nm nn">Friendship join table:<br/>USER_A_ID USER_B_ID<br/>1         1<br/>1         2</span></pre><p id="26d4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这里需要注意的重要一点是，每个人的姓名和电子邮件地址只列出一次。如果Eric的电子邮件地址发生变化，它只需在其存在的位置进行更新。然而，如果Patrick登录到系统中，并想知道他的朋友是谁以及他们的电子邮件地址，数据库将需要使用一些计算时间来将所有这些联系在一起，并将结果传递给Patrick。</p><h2 id="2432" class="mt la it bd lb mu mv dn lf mw mx dp lj ma my mz ll me na nb ln mi nc nd lp ne bi translated"><strong class="ak">非规范化数据:</strong></h2><p id="0644" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">下面是彼此关系相同的三个用户。</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="c7ac" class="mt la it ng b gy nk nl l nm nn">{<br/>  name: "Patrick",<br/>  email: "patrick@somewebsite.com",<br/>  friends: [<br/>    {<br/>      name: "Eric",<br/>      email: "eric@somewebsite.com"<br/>    },<br/>    {<br/>      name: "Robert",<br/>      email: "robert@somewebsite.com"<br/>    },<br/>  ]<br/>},<br/>{<br/>  name: "Robert",<br/>  email: "robert@somewebsite.com",<br/>  friends: [<br/>    {<br/>      name: "Patrick",<br/>      email: "patrick@somewebsite.com"<br/>    }<br/>  ]<br/>},<br/>{<br/>  name: "Eric",<br/>  email: "eric@somewebsite.com",<br/>  friends: [<br/>    {<br/>      name: "Patrick",<br/>      email: "patrick@somewebsite.com"<br/>    }<br/>  ]<br/>}</span></pre><p id="e840" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这里需要注意的重要一点是，每个人的姓名和电子邮件地址都被多次列出。</p><p id="36a4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果Patrick登录系统并想知道他的朋友是谁以及他们的电子邮件地址，他可以很快获得信息，因为数据已经准备好了，不需要额外的计算时间来收集这些信息。但是，如果Eric的电子邮件地址发生变化，它必须在多个位置进行更新，并且可能需要一些时间来传播，从而导致一些数据不同步。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="342c" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">正常化</h1><p id="c29a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">规范化的好处是准确。</p><p id="3d61" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">使用规范化，一段数据存在于系统中的一个且仅一个位置。数据不可能在一个位置正确而在另一个位置不正确，因为它只存在于一个位置。如果数据在某一时刻是不正确的，通过在一个位置更新它，现在它在任何地方都是正确的。</p><p id="cdd4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">规范化的缺点是一段数据不会立即有用。计算时间必须花在总结它的飞行，它是一个像样的形式。这种计算时间导致访问有用数据的速度变慢。</p><p id="f5f0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">数据是完美的，但可能需要一些时间。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="9aff" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">反规格化</h1><p id="18f8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">反规范化的好处是速度。</p><p id="983d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">通过反规范化，数据可以立即呈现出来。数据已经与其他相关数据一起作为一个包收集，可以作为一个整体一起交付。因为打包数据不需要额外的计算，所以反规范化的数据很快就可以提供。</p><p id="0548" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">反规范化的缺点是数据可能会不同步。一条数据可以存在于同一系统中的多个位置。因为它存在于多个位置，所以有可能一个位置被更新而另一个位置不被更新。如果某一时刻的数据不正确，则必须在所有位置进行纠正。</p><p id="a427" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">数据很快，但可能并不完美。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="e292" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">两者都用</h1><p id="eb1e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">规范化和反规范化针对不同的事情进行了优化。两个都用是个好主意。</p><p id="21e5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于您的真实来源，最好将您的数据标准化，这样当它需要更新时，您只需在一个位置更改它，它就会在整个系统中得到完美的更新。</p><p id="8c86" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了快速交付数据，最好获取规范化的数据，并从中派生出非规范化的现成表单。这种反规格化的形式不需要完美，只要快就行。完美性仍然保持在规范化的形式中。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="2640" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">摘要</h1><p id="20a7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">总是规格化，但是为了速度而反规格化。</p></div></div>    
</body>
</html>