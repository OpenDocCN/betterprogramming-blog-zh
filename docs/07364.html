<html>
<head>
<title>Create Android App Shortcuts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建Android应用快捷方式</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-android-app-shortcuts-9d50866c429f?source=collection_archive---------9-----------------------#2021-01-07">https://betterprogramming.pub/create-android-app-shortcuts-9d50866c429f?source=collection_archive---------9-----------------------#2021-01-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8768" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解静态、动态和锁定快捷方式</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/07687f106708717affc1d2652a2dfe76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5YjHieYZPau8ijn4"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">普通技术人员在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@the_average_tech_guy?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拍摄的照片。</a></p></figure><p id="36aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Android生态系统中，快捷方式是一种快速向用户提供特定功能或特性的方式。每个快捷方式可以引用多个目的。应用程序的快捷方式类型通常取决于应用程序的核心用例。</p><p id="f486" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果您使用Gmail应用程序，“撰写电子邮件”作为静态快捷方式之一是有意义的。如果你使用Chrome应用程序，“导航到最常访问的网站”可以被认为是一个理想的动态快捷方式。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f0e0" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">快捷方式类型</h1><p id="6983" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Android中的快捷方式主要分为三种:静态、动态和钉住快捷方式。让我们了解一下每一种类型。</p><h2 id="e926" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">静态快捷方式</h2><p id="2859" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这些类型的快捷方式在应用程序的整个生命周期中为用户提供一致的行为，并且它们不是上下文相关的。正如上一节所讨论的，“撰写电子邮件”是静态快捷方式的最好例子。</p><h2 id="2641" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">动态快捷方式</h2><p id="f612" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">动态快捷方式用于执行上下文相关的操作。这些类型的快捷方式可以在运行时基于用户行为动态创建。动态快捷方式确保用户可以快速访问应用程序中他们喜欢的功能。</p><h2 id="0ff0" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">锁定快捷方式</h2><p id="b414" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">锁定快捷方式用于执行特定的用户驱动的操作。这些快捷方式将确保用户只需在主屏幕上点击一下，就可以访问特定的功能或特性。</p><p id="39c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，用户可以通过Chrome等浏览器应用程序将特定网站作为固定快捷方式添加到他们的主屏幕上，只需点击一下即可访问该网站。我个人使用固定快捷方式在手机上启动Roam Research网站。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3544" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">限制</h1><ul class=""><li id="5cff" class="nl nm it lb b lc mu lf mv li nn lm no lq np lu nq nr ns nt bi translated">开发者在结合静态和动态快捷方式时，最多只能发布五个快捷方式。</li><li id="c4f9" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">虽然开发人员可以创建五个快捷方式，但大多数启动器只显示四个快捷方式。</li><li id="590a" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">与静态和动态快捷方式不同，固定快捷方式没有限制。但是，我们不能删除锁定的快捷方式。</li><li id="fe02" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">只能在Android 8及以上版本的设备上创建固定快捷方式。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="40cc" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建静态快捷方式</h1><p id="116a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如前所述，静态快捷方式用于在应用程序中执行特定的操作，这些操作在应用程序的整个生命周期中都是一致的。要创建静态快捷方式，请按照下列步骤操作。</p><h2 id="e309" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">第一步</h2><p id="b6bf" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，我们需要通过引用XML资源文件将元数据添加到活动中(我们将在下面的步骤中讨论这个文件):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><h2 id="dabe" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">第二步</h2><p id="3405" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在<code class="fe ob oc od oe b">res/xml</code>目录下创建一个名为<code class="fe ob oc od oe b">shortcuts.xml</code>的资源文件。</p><h2 id="bf1c" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">第三步</h2><p id="58fd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在这个资源文件中，我们可以定义一个或多个快捷方式。文件应该以一个<code class="fe ob oc od oe b">shortcuts</code>标签开始，在里面，我们可以添加多个快捷方式:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="147e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大多数属性，像<code class="fe ob oc od oe b">shortcutId</code>、<code class="fe ob oc od oe b">icon</code>、<code class="fe ob oc od oe b">shortLabel</code>、<code class="fe ob oc od oe b">LongLabel</code>和<code class="fe ob oc od oe b">DisableMessage</code>，不需要任何解释就有意义。最棒的是我们可以使用资源文件中的字符串。同时，<code class="fe ob oc od oe b">targetClass</code>是一个重要的属性，我们可以用它来定义当用户点击这个快捷方式时要启动的活动。</p><p id="aad6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅此而已。我们创建了静态快捷方式。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="85e8" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建动态快捷方式</h1><p id="0dca" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">动态快捷方式提供了一种执行上下文相关操作的方式，这意味着操作会因用户而异，甚至会因同一用户而异。</p><p id="e289" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe ob oc od oe b">ShortcutManager</code> API创建发布、更新和删除动态快捷方式。如<a class="ae ky" href="https://developer.android.com/guide/topics/ui/shortcuts/creating-shortcuts" rel="noopener ugc nofollow" target="_blank">所述，文件</a>:</p><blockquote class="of og oh"><p id="accd" class="kz la oi lb b lc ld ju le lf lg jx lh oj lj lk ll ok ln lo lp ol lr ls lt lu im bi translated">发布:使用<code class="fe ob oc od oe b">setDynamicShortcuts()</code>重新定义动态快捷方式的完整列表，或者使用<code class="fe ob oc od oe b">addDynamicShortcuts()</code>扩充现有的动态快捷方式列表。</p><p id="2ca8" class="kz la oi lb b lc ld ju le lf lg jx lh oj lj lk ll ok ln lo lp ol lr ls lt lu im bi translated">更新:使用<code class="fe ob oc od oe b">updateShortcuts()</code>功能。</p><p id="72c4" class="kz la oi lb b lc ld ju le lf lg jx lh oj lj lk ll ok ln lo lp ol lr ls lt lu im bi translated">移除:<strong class="lb iu"> </strong>使用<code class="fe ob oc od oe b">removeDynamicShortcuts()</code>移除一组动态快捷方式或使用<code class="fe ob oc od oe b">removeAllDynamicShortcuts()</code>移除所有动态快捷方式。"</p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="db26" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建固定快捷方式</h1><p id="28bf" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">锁定快捷方式用于执行特定的用户驱动的操作。它们可以方便地提供对这些特性的快速访问。与静态和动态快捷方式不同，锁定的快捷方式在启动器中显示为不同的图标。</p><blockquote class="of og oh"><p id="f20b" class="kz la oi lb b lc ld ju le lf lg jx lh oj lj lk ll ok ln lo lp ol lr ls lt lu im bi translated">"注意:当您尝试将快捷方式固定到支持的启动器上时，用户会收到一个确认对话框，询问他们是否允许固定快捷方式。如果用户不允许锁定快捷方式，启动器将取消请求。— <a class="ae ky" href="https://developer.android.com/guide/topics/ui/shortcuts/creating-shortcuts" rel="noopener ugc nofollow" target="_blank">安卓开发者</a></p></blockquote><p id="f499" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">类似于创建动态快捷方式，我们也必须为固定快捷方式使用<code class="fe ob oc od oe b">ShortcutManager</code> API。首先，为了检查启动器是否支持固定快捷方式，我们需要使用<code class="fe ob oc od oe b">isRequestPinShortcutSupported</code>。</p><p id="cf44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果启动器支持固定快捷方式，那么我们需要创建一个<code class="fe ob oc od oe b">ShortcutInfo</code>对象，我们必须在其中提供快捷方式ID和意图。之后，我们必须创建一个挂起的意图，并将<code class="fe ob oc od oe b">ShortcutInfo</code>和挂起的意图传递给<code class="fe ob oc od oe b">ShortcutManager</code>实例上的<code class="fe ob oc od oe b">requestPinShortcut</code>函数。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><blockquote class="of og oh"><p id="d2ed" class="kz la oi lb b lc ld ju le lf lg jx lh oj lj lk ll ok ln lo lp ol lr ls lt lu im bi translated">“注意:另请参见支持库API，<code class="fe ob oc od oe b"> isRequestPinShortcutSupported()</code>和<code class="fe ob oc od oe b"> requestPinShortcut()</code>，它们在Android 7.1 (API级别25)和更低版本上工作。支持库回退到已弃用的<code class="fe ob oc od oe b"> EXTRA_SHORTCUT_INTENT</code>extra来尝试锁定过程。— <a class="ae ky" href="https://developer.android.com/guide/topics/ui/shortcuts/creating-shortcuts" rel="noopener ugc nofollow" target="_blank">苹果开发者</a></p></blockquote></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ff86" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">禁用快捷方式</h1><p id="1cd8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">有时快捷方式会将用户引导到你的应用程序中已经过时或不再存在的操作。为了处理这样的快捷方式，我们可以在<code class="fe ob oc od oe b">ShortcutManager</code>实例上调用<code class="fe ob oc od oe b">disableShortcuts</code>函数。我们必须传递一个字符串列表，其中包含您想要禁用的快捷方式的id，以删除快捷方式。</p><p id="9628" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们调用<code class="fe ob oc od oe b">disableShortcuts</code>时，静态和动态快捷键列表中的快捷键被移除，而固定快捷键只能被禁用。如果您在更新应用程序时移除了一些应用程序的静态快捷方式，系统会自动禁用这些快捷方式。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c533" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">更新快捷方式</h1><p id="bfbb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果在清单文件中添加了<code class="fe ob oc od oe b">android:allowBackup=” true”</code>属性，当用户在设备之间切换时，它将有助于恢复某些快捷方式。</p><ul class=""><li id="4d90" class="nl nm it lb b lc ld lf lg li om lm on lq oo lu nq nr ns nt bi translated">当用户在新设备上重新安装应用程序时，静态快捷方式将被重新发布。</li><li id="575d" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">动态快捷方式不会恢复。我们需要编写最适合重新发布它们的逻辑。</li><li id="e8b1" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">锁定的快捷方式会自动恢复到设备的启动器中，但系统不会备份与锁定的快捷方式相关联的图标。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="2511" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>