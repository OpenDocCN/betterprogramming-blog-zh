<html>
<head>
<title>How to Add Authentication to a Vue.js App Using AWS Amplify</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用AWS Amplify向Vue.js应用程序添加身份验证</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-add-authentication-to-a-vue-app-using-aws-amplify-f10fbeef04d0?source=collection_archive---------0-----------------------#2021-01-03">https://betterprogramming.pub/how-to-add-authentication-to-a-vue-app-using-aws-amplify-f10fbeef04d0?source=collection_archive---------0-----------------------#2021-01-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/7672e9b72965d10fb9548cbb803744bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QrOUXeTdCaxjv6o_"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://unsplash.com/@fhanspach?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">菲利克斯·汉斯帕奇</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><div class=""/><div class=""><h2 id="c710" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">AWS Amplify是一个为前端应用程序添加身份验证的工具。了解将其添加到您的Vue应用程序有多简单。</h2></div><h1 id="f0cd" class="ky kz jj bd la lb lc ld le lf lg lh li kp lj kq lk ks ll kt lm kv ln kw lo lp bi translated">我们将创造什么</h1><p id="fbc3" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我们将使用Vue CLI创建一个非常简单的Vue应用程序。我们将修改默认的scaffolded应用程序，以便它提供一个注册为新用户的表单、一个登录页面和一个只显示给已登录用户的仪表板页面。</p><p id="2712" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">用户将能够使用电子邮件和密码注册。一旦他们注册并登录，就会看到仪表板页面。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="022a" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated">创建我们的项目</h1><p id="0105" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我将使用Vue CLI为我们搭建一个项目。为此，您需要在系统上安装Vue CLI。如果没有安装，可以使用以下命令进行全局安装:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="6223" class="nm kz jj ni b gy nn no l np nq">npm install -g @vue/cli</span></pre><p id="1a86" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在我们可以使用Vue CLI来创建我们的项目。使用以下命令创建一个新项目:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="3698" class="nm kz jj ni b gy nn no l np nq">vue create vue-amplify-auth-tutorial</span></pre><p id="9b1e" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">你将被要求选择一个预置。选取“手动选择功能”，然后选择“babel”、“Router”和“Linter / Formatter”</p><p id="7ff8" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">系统会询问您是否要对路由器使用历史模式。选择“是”(应该是默认值)。</p><p id="f459" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">对于linter，我选择“仅带有错误预防的ESLint”</p><p id="f167" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">在Vue CLI完成之后，它会给你一些命令来切换到刚刚创建的新目录，并给你一些命令来启动服务器。遵循这些指示。一旦服务器启动，您就可以打开浏览器进入<code class="fe nr ns nt ni b">localhost:8080</code>。您应该看到这个:</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nu"><img src="../Images/55fdcebd3af9d64ff36c531a31642551.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S9E-Jj_1zY76iZBj"/></div></div></figure></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="62e0" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated">AWS Amplify是什么？</h1><p id="3542" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">AWS Amplify是由Amazon创建的开源框架，包含一组工具和服务，可以一起使用或单独使用。其中一个工具是Amplify Auth。Amplify Auth允许您快速设置安全认证，并控制用户在您的应用程序中可以访问的内容。</p><p id="0918" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">Amplify框架使用Amazon Cognito作为主要的身份验证提供者。Amazon Cognito是一个健壮的用户目录服务，处理用户注册、认证、帐户恢复和其他操作。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="f1e3" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated">创建AWS帐户</h1><p id="cb2c" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">首先，您需要在这里创建一个AWS帐户。如果您没有AWS帐户，<a class="ae jg" href="https://aws.amazon.com/premiumsupport/knowledge-center/create-and-activate-aws-account/" rel="noopener ugc nofollow" target="_blank">请按照这里的说明创建一个</a>。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="a29a" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated">安装和配置Amplify CLI</h1><p id="fdb3" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">Amplify CLI是一个统一的工具链，用于为您的应用程序创建AWS云服务。您可以使用以下命令进行全局安装:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="188b" class="nm kz jj ni b gy nn no l np nq">npm install -g @aws-amplify/cli</span></pre><p id="8b8a" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">接下来，我们需要通过运行以下命令来配置Amplify:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="5ea7" class="nm kz jj ni b gy nn no l np nq">amplify configure</span></pre><p id="d19d" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">该命令将打开一个新的浏览器窗口，并要求您登录AWS控制台。登录后，返回终端，按<code class="fe nr ns nt ni b">Enter</code>。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nv"><img src="../Images/d8f259d5a881cda12639f261de08c21a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SBiQgDy2bw0OGeX3"/></div></div></figure><p id="6562" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">您将被要求指定AWS区域。选择离你最近的地区。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nw"><img src="../Images/acb910b8c9b34e74e5cfd6af04994729.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Wx3wr2Ohnd7_2RAG"/></div></div></figure><p id="a6bc" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">您需要指定新IAM用户的用户名。它会提供一个默认的名字，你可以按enter键使用，或者你可以指定你自己的名字。我将调用我的用户<code class="fe nr ns nt ni b">auth-demo</code>。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nw"><img src="../Images/17d4f634d7bcec4c2ecfe900c70d6a48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z0qKKxKSjp_1K98H"/></div></div></figure><p id="4a1f" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">当你点击<code class="fe nr ns nt ni b">Enter</code>，你将被带回到你的浏览器。</p><p id="1fec" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">单击下一步:权限按钮。</p><p id="eec4" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">单击下一个:标签按钮。</p><p id="afad" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">单击下一步:查看按钮。</p><p id="bb02" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">单击创建用户按钮。</p><p id="2519" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在回到您的终端，按<code class="fe nr ns nt ni b">Enter</code>继续。</p><p id="4653" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">输入您刚创建的用户的<code class="fe nr ns nt ni b">accessKeyId</code>，然后按<code class="fe nr ns nt ni b">Enter</code>。</p><p id="1e6f" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">键入您刚刚创建的用户的<code class="fe nr ns nt ni b">secretAcessKey</code>，然后按<code class="fe nr ns nt ni b">Enter</code>。</p><p id="c1bb" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">您将被要求输入一个配置文件名。我将通过按下<code class="fe nr ns nt ni b">Enter</code>来接受所提供的值(默认值)。</p><p id="7740" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">当一切完成后，您应该会在终端中收到一条消息，表明新用户已经成功设置。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="9150" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated">初始化新的后端</h1><p id="685a" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">现在我们有了一个运行的Vue应用程序，是时候设置Amplify了，这样我们就可以创建必要的后端服务来支持这个应用程序。从Vue应用程序的根目录运行:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="84ef" class="nm kz jj ni b gy nn no l np nq">amplify init</span></pre></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="730b" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated">创建身份验证服务</h1><p id="74d7" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我们需要向我们的Vue应用程序添加一个认证服务。在Vue应用程序的根目录中，输入以下命令:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="ef38" class="nm kz jj ni b gy nn no l np nq">amplify add auth</span></pre><p id="638c" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">初始化Amplify时，会提示您输入一些关于应用程序的信息。输入项目名称。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nx"><img src="../Images/c85faf86c627ffc9c83fb600228b6df8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0Q7RiIPnBCAo90Kf"/></div></div></figure><p id="1611" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">将后端环境名设置为<code class="fe nr ns nt ni b">dev</code>。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/f41f49114af65cd6a49b790e9359a78c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SMbI1iNM5XELFdfp"/></div></div></figure><p id="2854" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">有时CLI会提示您编辑文件，它会使用这个编辑器打开这些文件。选择您喜欢的代码编辑器软件。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nz"><img src="../Images/725e36ed50a9d578c01823d69fe0fd4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*juPUaS2SIkR0UnxL"/></div></div></figure><p id="a867" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">Amplify将为您的前端应用程序提供连接到这个后端环境的配置文件。因为Vue是基于JavaScript的，所以我们在这里选择它。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oa"><img src="../Images/42f2d35c632ca03f29dc7ac44dc3f9cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*enPauC_uAMYzoDFV"/></div></div></figure><p id="a304" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我们使用Vue，所以选择它作为我们的JavaScript框架。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ob"><img src="../Images/981069d92c1e3ef592ca2c9070035bf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xOxbC5xEGdudv-ej"/></div></div></figure><p id="3d84" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">Vue CLI在<code class="fe nr ns nt ni b">./src</code>文件夹下为您的项目设置源文件。选择<code class="fe nr ns nt ni b">src</code>作为源目录路径。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/df65f045f94cd327e2e77af59a5a1deb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iLN4pnHKGUGB3tCz"/></div></figure><p id="bb87" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">当您的项目准备好托管时，Vue会将您的网站生成到一个名为<code class="fe nr ns nt ni b">dist</code>的文件夹中，供公众使用。这是默认设置，所以您可以按下<code class="fe nr ns nt ni b">Enter</code>继续。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi od"><img src="../Images/46c2a1d26c7279f8c38b78e2f5a64610.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u1tw63qKuNAsPJ9B"/></div></div></figure><p id="2c09" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">Amplify的自动化部署需要知道构建发布应用程序需要哪些步骤。在这里，我们将它设置为Vue CLI的默认构建脚本。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oe"><img src="../Images/3f3d87634ed49c854687911c6fb11ce5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SqFEoy03S2eingpb"/></div></div></figure><p id="3d94" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果Amplify需要在开发模式下运行应用程序，它需要知道如何启动开发服务器。同样，我们将使用Vue CLI的默认脚本。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi of"><img src="../Images/af466846f3ad606baadc103b89a9f3a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WR5XjxUw9TmYlTUv"/></div></div></figure><p id="574d" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">最后，Amplify需要一个AWS帐户来连接，这样我们就可以开始创建后端服务。这是您之前用<code class="fe nr ns nt ni b">amplify configure</code>命令创建的配置文件。通过输入<code class="fe nr ns nt ni b">y</code>并按下<code class="fe nr ns nt ni b">Enter</code>选择“是”。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi og"><img src="../Images/d85e040ad34106df07f80f82b5589e6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oTD19eyWt9KdCb6J"/></div></div></figure><p id="2a4f" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">继续从列表中选择您的个人资料，然后按<code class="fe nr ns nt ni b">Enter</code>。Amplify现在将开始部署您的后端框架。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oh"><img src="../Images/708a12a8505ad9d42bdd72f471cd1e45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fX2wHxziZZil6sJ3"/></div></div></figure><p id="c6c0" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">当您初始化一个新的Amplify项目时，会发生一些事情:</p><ul class=""><li id="9792" class="oi oj jj ls b lt mm lw mn lz ok md ol mh om ml on oo op oq bi translated">它创建了一个名为<code class="fe nr ns nt ni b">amplify</code>的顶级目录来存储您的后端定义。在本教程中，您将添加一些功能，如身份验证、GraphQL API、存储和API的授权规则。随着您添加特性，<code class="fe nr ns nt ni b">amplify</code>文件夹将随着定义您的后端堆栈的基础设施即代码模板而增长。基础设施即代码是创建可复制后端堆栈的最佳实践方式。</li><li id="4751" class="oi oj jj ls b lt or lw os lz ot md ou mh ov ml on oo op oq bi translated">它在<code class="fe nr ns nt ni b">src</code>目录中创建了一个名为<code class="fe nr ns nt ni b">aws-exports.js</code>的文件，其中保存了您用Amplify创建的服务的所有配置。这就是Amplify客户端能够获得关于您的后端服务的必要信息的方式。</li><li id="40db" class="oi oj jj ls b lt or lw os lz ot md ou mh ov ml on oo op oq bi translated">它修改了<code class="fe nr ns nt ni b">.gitignore</code>文件，将一些生成的文件添加到忽略列表中</li><li id="cffa" class="oi oj jj ls b lt or lw os lz ot md ou mh ov ml on oo op oq bi translated">在AWS Amplify控制台中为您创建了一个云项目，可以通过运行<code class="fe nr ns nt ni b">amplify console</code>来访问它。该控制台提供了后端环境列表、指向每个Amplify类别所调配资源的深层链接、最近部署的状态，以及有关如何升级、克隆、拉入和删除后端资源的说明</li></ul><p id="a5c5" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">要部署服务，运行<code class="fe nr ns nt ni b">push</code>命令。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="cf20" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated">安装放大器库</h1><p id="b74c" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我们需要在Vue应用程序中安装Amplify依赖项。您可以使用以下命令安装它们:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="b256" class="nm kz jj ni b gy nn no l np nq">npm install aws-amplify</span></pre></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="3140" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated">配置我们的应用程序</h1><p id="d303" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我们需要在Vue应用中添加Amplify。打开<code class="fe nr ns nt ni b">main.js</code>文件，在最后一个导入行后添加以下内容。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="e0a7" class="nm kz jj ni b gy nn no l np nq">import Amplify from 'aws-amplify';<br/>import awsconfig from './aws-exports'; <br/>Amplify.configure(awsconfig);</span></pre><p id="4083" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">上面的代码成功地配置了Amplify。当您使用Amplify CLI添加或删除类别并更新后端配置时，<code class="fe nr ns nt ni b">aws-exports.js</code>中的配置将自动更新。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="0f32" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated">创建注册页面</h1><p id="9a41" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我们需要一个页面，允许新用户注册我们的应用程序。在views文件夹中，创建一个名为<code class="fe nr ns nt ni b">Register.vue</code>的新文件。</p><p id="39c3" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我们需要将这个新页面添加到我们的路线中，然后在导航中显示它。打开<code class="fe nr ns nt ni b">router</code>文件夹中的<code class="fe nr ns nt ni b">index.js</code>文件。将此添加到routes数组中。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="4cc5" class="nm kz jj ni b gy nn no l np nq">{<br/>    path: '/register',<br/>    name: 'Register',<br/>    component: () =&gt;<br/>        import(/* webpackChunkName: "register" */ '../views/Register.vue'),<br/>},</span></pre><p id="4bb7" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在把这个加到我们的导航中。打开<code class="fe nr ns nt ni b">App.vue</code>文件，在导航中添加一个<code class="fe nr ns nt ni b">Register</code>条目。你的导航应该是这样的:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="7abf" class="nm kz jj ni b gy nn no l np nq">&lt;div id="nav"&gt;<br/>    &lt;router-link to="/"&gt;Home&lt;/router-link&gt; |<br/>    &lt;router-link to="/about"&gt;About&lt;/router-link&gt; |<br/>    &lt;router-link to="/register"&gt;Register&lt;/router-link&gt;<br/>&lt;/div&gt;</span></pre><p id="15ca" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">回到你的<code class="fe nr ns nt ni b">Register.vue</code>文件中去。这一页将有一个用户把他们的电子邮件和密码注册为新用户的形式。下面是您需要放入模板部分的代码。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="2d26" class="nm kz jj ni b gy nn no l np nq">&lt;div class="container"&gt;<br/>    &lt;form <a class="ae jg" href="http://twitter.com/submit" rel="noopener ugc nofollow" target="_blank">@submit</a>.prevent="register"&gt;<br/>        &lt;h2&gt;Register&lt;/h2&gt;<br/>        &lt;input<br/>            type="email"<br/>            v-model="email"<br/>            placeholder="Email address..."<br/>        /&gt;<br/>        &lt;input<br/>            type="password"<br/>            v-model="password"<br/>            placeholder="password..."<br/>        /&gt;<br/>        &lt;button&gt;Register&lt;/button&gt;<br/>    &lt;/form&gt;<br/>&lt;/div&gt;</span></pre><p id="03b0" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果您查看我们的表单，两个输入字段和按钮就在旁边。</p><p id="8ead" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">想要在三个字段之间增加一些间距吗？我可以在这个页面上添加CSS，但是它只适用于这个页面。我们将在接下来创建的登录页面中再次使用该表单。为了获得在两个页面上都有效的样式，让我们将下面的CSS放到<code class="fe nr ns nt ni b">App.vue</code>文件中。打开<code class="fe nr ns nt ni b">App.vue</code>文件，添加如下样式:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="1f8f" class="nm kz jj ni b gy nn no l np nq">input { <br/>  margin-right: 10px; <br/>}</span></pre><p id="3c7c" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">返回到<code class="fe nr ns nt ni b">Register.vue</code>文件。我们正在捕获用户输入的电子邮件和密码的值，所以我们需要将它们添加到数据对象中。将它们添加到数据对象中，如下所示:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="7621" class="nm kz jj ni b gy nn no l np nq">data() { <br/>  return { <br/>    email: '', <br/>    password: '', <br/>  }; <br/>},</span></pre><p id="dc6e" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">当用户提交表单时，它调用<code class="fe nr ns nt ni b">register</code>方法。下面是该方法的代码:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="ec94" class="nm kz jj ni b gy nn no l np nq">async register() {<br/>    try {<br/>        await Auth.signUp({<br/>            username: this.email,<br/>            password: this.password,<br/>        });<br/>        alert('User successfully registered. Please login');<br/>    } catch (error) {<br/>        alert(error.message);<br/>    }<br/>},</span></pre><p id="a8a2" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这个方法使用我们安装的<code class="fe nr ns nt ni b">aws-amplify</code>包中的<code class="fe nr ns nt ni b">Auth</code>。在脚本部分的开头为它添加这个导入。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="2951" class="nm kz jj ni b gy nn no l np nq">import { Auth } from 'aws-amplify';</span></pre><p id="5071" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在打开您的应用程序，注册一个新用户。如果成功，您将收到一条提示，提示用户已注册。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="5688" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated">创建登录页面</h1><p id="5ad4" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">一旦用户在我们的应用程序中注册了帐户，他们需要一个页面来登录。在<code class="fe nr ns nt ni b">views</code>文件夹中，创建名为<code class="fe nr ns nt ni b">Login.vue</code>的新文件。</p><p id="d3b5" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我们需要将这个新页面添加到我们的路线中，然后在导航中显示它。打开<code class="fe nr ns nt ni b">router</code>文件夹中的<code class="fe nr ns nt ni b">index.js</code>文件。将此添加到routes数组中。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="3555" class="nm kz jj ni b gy nn no l np nq">{<br/>    path: '/login',<br/>    name: 'Login',<br/>    component: () =&gt;<br/>        import(/* webpackChunkName: "login" */ '../views/Login.vue'),<br/>},</span></pre><p id="f2b4" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在把这个加到我们的导航里。打开<code class="fe nr ns nt ni b">App.vue</code>文件，在导航中为<code class="fe nr ns nt ni b">Register</code>添加一个条目。你的导航应该是这样的:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="3437" class="nm kz jj ni b gy nn no l np nq">&lt;div id="nav"&gt;<br/>    &lt;router-link to="/"&gt;Home&lt;/router-link&gt; |<br/>    &lt;router-link to="/about"&gt;About&lt;/router-link&gt; |<br/>    &lt;router-link to="/register"&gt;Register&lt;/router-link&gt; |<br/>    &lt;router-link to="/login"&gt;Login&lt;/router-link&gt; <br/>&lt;/div&gt;</span></pre><p id="298a" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">回到你的<code class="fe nr ns nt ni b">Login.vue</code>文件。您可以复制<code class="fe nr ns nt ni b">Register.vue</code>文件模板部分的HTML代码，并将其粘贴到这个新文件中。将<code class="fe nr ns nt ni b">Register</code>的所有引用更改为<code class="fe nr ns nt ni b">Login</code>。您的模板部分应该如下所示:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="fe1c" class="nm kz jj ni b gy nn no l np nq">&lt;div class="container"&gt;<br/>    &lt;form <a class="ae jg" href="http://twitter.com/submit" rel="noopener ugc nofollow" target="_blank">@submit</a>.prevent="login"&gt;<br/>        &lt;h2&gt;Login&lt;/h2&gt;<br/>        &lt;input type="email" v-model="email" placeholder="Email address..." /&gt;<br/>        &lt;input type="password" v-model="password" placeholder="password..." /&gt;<br/>        &lt;button&gt;Login&lt;/button&gt;<br/>    &lt;/form&gt;<br/>&lt;/div&gt;</span></pre><p id="5728" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">在脚本部分，添加对<code class="fe nr ns nt ni b">Auth</code>的导入以及电子邮件和密码的数据对象。您的脚本部分应该如下所示:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="4b91" class="nm kz jj ni b gy nn no l np nq">&lt;script&gt;<br/>import { Auth } from 'aws-amplify';<br/>export default {<br/>  name: 'Login',<br/>  data() {<br/>    return {<br/>      email: '',<br/>      password: ''<br/>    }<br/>  },<br/>}<br/>&lt;/script&gt;</span></pre><p id="2d99" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我们需要实现的最后一件事是登录方法。代码如下:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="5bb7" class="nm kz jj ni b gy nn no l np nq">async login() {<br/>    try {<br/>        await Auth.signIn(this.email, this.password);<br/>        alert('Successfully logged in');<br/>    } catch (error) {<br/>        alert(error.message);<br/>    }<br/>},</span></pre><p id="9c83" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在，如果您打开您的应用程序，您将能够使用之前注册的用户登录。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="1511" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated">添加注销方法</h1><p id="ae2e" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我们需要添加一个按钮，以便用户可以注销我们的应用程序。打开<code class="fe nr ns nt ni b">App.vue</code>文件。在导航中添加一个注销按钮。你的导航应该是这样的:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="613f" class="nm kz jj ni b gy nn no l np nq">&lt;div id="nav"&gt;<br/>    &lt;router-link to="/"&gt;Home&lt;/router-link&gt; |<br/>    &lt;router-link to="/about"&gt;About&lt;/router-link&gt; |<br/>    &lt;router-link to="/register"&gt;Register&lt;/router-link&gt; |<br/>    &lt;router-link to="/login"&gt;Login&lt;/router-link&gt; |<br/>    &lt;button <a class="ae jg" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="logout"&gt;Logout&lt;/button&gt;<br/>&lt;/div&gt;</span></pre><p id="ea3c" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">在脚本部分，添加一个<code class="fe nr ns nt ni b">methods</code>对象，并包含<code class="fe nr ns nt ni b">logout</code>方法。它应该是这样的:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="acdb" class="nm kz jj ni b gy nn no l np nq">methods: {<br/>    async logout() {<br/>        try {<br/>            await Auth.signOut();<br/>        } catch (error) {<br/>            alert(error.message);<br/>        }<br/>    },<br/>},</span></pre><p id="207f" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">恭喜您，您已成功将AWS Amplify身份验证添加到您的Vue应用程序中。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="94e1" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated">获取代码</h1><p id="9132" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我的GitHub账户上有<a class="ae jg" href="https://github.com/ratracegrad/Vue-Amplify-Auth-Tutorial" rel="noopener ugc nofollow" target="_blank">的完整代码。</a></p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="dfbd" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated">使用其他身份验证方法</h1><p id="9214" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我写过几篇后续文章，介绍如何使用其他身份验证方法向Vue应用程序添加身份验证。</p><ul class=""><li id="2139" class="oi oj jj ls b lt mm lw mn lz ok md ol mh om ml on oo op oq bi translated"><a class="ae jg" href="https://www.jenniferbland.com/how-to-add-authentication-to-a-vue-app-using-firebase/" rel="noopener ugc nofollow" target="_blank">使用Firebase进行认证</a></li><li id="d061" class="oi oj jj ls b lt or lw os lz ot md ou mh ov ml on oo op oq bi translated"><a class="ae jg" href="https://www.jenniferbland.com/how-to-add-authentication-to-a-vue-app-using-auth0/" rel="noopener ugc nofollow" target="_blank">使用Auth0进行认证</a></li></ul></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="face" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated">结论</h1><p id="fc04" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">AWS Amplify是一个很棒的工具，它允许您在应用程序中添加身份验证。</p><p id="7821" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">希望你喜欢这篇文章。感谢阅读。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><p id="4db6" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated"><em class="ow">原载于2020年12月31日https://www.jenniferbland.com</em><a class="ae jg" href="https://www.jenniferbland.com/how-to-add-authentication-to-a-vue-app-using-aws-amplify/" rel="noopener ugc nofollow" target="_blank"><em class="ow"/></a><em class="ow">。</em></p></div></div>    
</body>
</html>