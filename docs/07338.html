<html>
<head>
<title>7 Essential Linux Commands for Managing Users</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">管理用户的7个基本Linux命令</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/7-essential-linux-commands-for-managing-users-4407cff0ccb6?source=collection_archive---------9-----------------------#2021-01-05">https://betterprogramming.pub/7-essential-linux-commands-for-managing-users-4407cff0ccb6?source=collection_archive---------9-----------------------#2021-01-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f34f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Linux用户管理命令</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5757c3c4141ed84c758f8cf1d8c88f0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X-M6BsYVMb7nspRPtBIGEg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/@joshsorenson?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">乔希·索伦森</a>从<a class="ae ky" href="https://www.pexels.com/photo/black-flat-screen-computer-monitor-1714208/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>拍摄。</p></figure><p id="8af0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从一开始，Linux操作系统就被设计成一个多用户操作系统。因此，在Linux机器上执行的最常见的管理任务之一是管理用户帐户。这是保持健康和安全的Linux机器的关键部分。</p><p id="f4cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能会认为从命令行管理用户是一件令人不知所措的事情。反之，则完全不是。您只需要知道几个基本命令，我将在本文中介绍它们。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="24cc" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">背景</h1><p id="6863" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Linux中的用户帐户是获得系统访问权限的主要方式——无论是本地还是远程。</p><p id="c38c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Linux系统上有三种主要类型的用户帐户:</p><ol class=""><li id="78c8" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">Root帐户—可以无限制地修改Linux系统的用户。</li><li id="a8e4" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">系统帐户—用于运行服务或特定程序。一些最常见的包括MySQL、mail、daemon、bin等。</li><li id="f2a7" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">用户帐户—对系统具有有限访问权限的普通用户。</li></ol><p id="ee91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Linux中，大多数用户信息可以在位于<code class="fe nn no np nq b">/etc/passwd</code>、<code class="fe nn no np nq b">/etc/shadow</code>和<code class="fe nn no np nq b">/etc/group</code>的三个文件中找到。</p><p id="d5b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nr">注意:您需要提升权限才能运行本指南中指定的一些命令。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9dc3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.列出所有用户</h1><p id="1801" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要列出计算机上的所有可用用户，可以运行以下命令:</p><pre class="kj kk kl km gt ns nq nt nu aw nv bi"><span id="613c" class="nw md it nq b gy nx ny l nz oa">$ compgen -u</span></pre><p id="2616" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，您可以使用以下命令直接从<code class="fe nn no np nq b">/etc/passwd</code>文件中输出用户:</p><pre class="kj kk kl km gt ns nq nt nu aw nv bi"><span id="4fb4" class="nw md it nq b gy nx ny l nz oa">$ cat /etc/passwd</span></pre><p id="404f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您从输出中注意到的，您的列表将包含根用户、几个系统用户和一般用户帐户。输出如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/eb6628265a313360b7b51ab973fb0f63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*djLQlx3RFU4hEdkRurBN-A.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7575" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.创建用户帐户</h1><p id="dce2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">最常见的管理任务之一是向系统添加用户。简单的命令就是<code class="fe nn no np nq b">useradd</code>。例如，要添加名为Marion的用户，我们可以运行以下命令:</p><pre class="kj kk kl km gt ns nq nt nu aw nv bi"><span id="1e19" class="nw md it nq b gy nx ny l nz oa">$ sudo useradd -c "audit consultant" marion</span></pre><p id="0a63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">-c</code>是一个可选参数，允许您添加与您正在创建的用户相关联的注释。</p><p id="14ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">useradd</code>命令也接受其他可选参数。您可以通过运行以下命令来查看它们:</p><pre class="kj kk kl km gt ns nq nt nu aw nv bi"><span id="367f" class="nw md it nq b gy nx ny l nz oa">man useradd</span></pre><p id="0475" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nr">提示:</em> <strong class="lb iu"> <em class="nr"> </em> </strong> <em class="nr">基于Debian的系统有</em> <code class="fe nn no np nq b"><em class="nr">adduser</em></code> <em class="nr">命令作为替代。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c5a4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.更改用户密码</h1><p id="aff8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要为我们刚刚创建的用户添加默认密码，我们可以使用<code class="fe nn no np nq b">passwd</code>命令。<code class="fe nn no np nq b">passwd</code>命令也可用于修改任何用户的密码，如下所示:</p><pre class="kj kk kl km gt ns nq nt nu aw nv bi"><span id="0aa9" class="nw md it nq b gy nx ny l nz oa">$ sudo passwd marion</span></pre><p id="2f36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后会提示您输入想要设置的密码。输出如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/7899781609893e316802b5391af20ebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ujblOz6tgxlhYSCF6f945g.png"/></div></div></figure><p id="2be7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nr">注意:当您输入密码时，终端上不会显示任何内容。只能说这是Unix的做事方式。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3e37" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.切换用户帐户</h1><p id="ef28" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">正如我前面提到的，Linux是真正的多用户操作系统。您可以随意从终端切换用户帐户(只要您被允许这样做)。</p><p id="9fee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要切换到我们刚刚在上面创建的<code class="fe nn no np nq b">marion</code>用户帐户，我们可以使用如下的<code class="fe nn no np nq b">su</code>命令:</p><pre class="kj kk kl km gt ns nq nt nu aw nv bi"><span id="8b86" class="nw md it nq b gy nx ny l nz oa">$ su marion</span></pre><p id="b8e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后会提示您输入要切换到的用户的密码。</p><p id="041c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您成功切换了用户，您可以通过运行以下命令来确认您的新身份:</p><pre class="kj kk kl km gt ns nq nt nu aw nv bi"><span id="8cd4" class="nw md it nq b gy nx ny l nz oa">$ whoami</span></pre><p id="ddf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您的输出应该类似于下面的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/cd5e84f7524480c8374613fbe971bf62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4TozUDCVZ7xtAIihJIQtMw.png"/></div></div></figure><p id="d973" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要切换回之前的账户，只需输入<code class="fe nn no np nq b">exit</code>命令。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d72b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">5.修改用户帐户</h1><p id="e9b1" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><code class="fe nn no np nq b">usermod</code>命令允许您更改用户帐户。它采用与<code class="fe nn no np nq b">useradd</code>命令相似的可选参数。</p><p id="9360" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，要修改我们上面创建的<code class="fe nn no np nq b">marion</code>用户帐户的注释，您可以执行以下操作:</p><pre class="kj kk kl km gt ns nq nt nu aw nv bi"><span id="18a6" class="nw md it nq b gy nx ny l nz oa">$ sudo usermod -c "New audit consulant comment" marion</span></pre><p id="ae22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了检查注释是否确实被修改，我们可以使用以下命令在<code class="fe nn no np nq b">/etc/passwd</code>文件中搜索用户帐户名称:</p><pre class="kj kk kl km gt ns nq nt nu aw nv bi"><span id="0742" class="nw md it nq b gy nx ny l nz oa">$ grep 'marion' /etc/passwd</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/49dec9edc169e8dd320224b7ff0992b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fjz_qu0_wBBxpL7kdzzvRw.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2e19" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">6.删除用户帐户</h1><p id="5314" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">从命令行删除用户帐户非常容易。因此，你需要谨慎行事。</p><p id="94d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">userdel</code>命令用于删除用户账户。它只需要一个可选参数:<code class="fe nn no np nq b">-r</code>。当指定了<code class="fe nn no np nq b">-r</code>参数时，您将删除用户的主目录和邮件假脱机。</p><p id="3af3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要删除我们在本指南中创建的用户帐户，请执行以下操作:</p><pre class="kj kk kl km gt ns nq nt nu aw nv bi"><span id="4613" class="nw md it nq b gy nx ny l nz oa">$ sudo userdel -r marion</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="eaca" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">7.以超级用户身份运行命令</h1><p id="2397" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们已经使用了我们现在要看的命令，但是我没有真正解释它。<code class="fe nn no np nq b">sudo</code>(超级用户do)命令允许您作为根用户运行命令。将提示您输入用户密码来运行此命令。</p><p id="0a9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您不能以root用户的身份运行命令，将通过终端通知您不能在系统上运行<code class="fe nn no np nq b">sudo</code>。</p><p id="dccd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要运行提升的命令，使用<code class="fe nn no np nq b">sudo</code>命令，后跟您想要运行的提升的命令。例如，要添加用户，您可以这样做:</p><pre class="kj kk kl km gt ns nq nt nu aw nv bi"><span id="52ae" class="nw md it nq b gy nx ny l nz oa">$ sudo useradd newuser</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="222e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">最后的想法</h1><p id="c454" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，您已经有了:一些强大的命令允许您在Linux系统上管理用户帐户。</p><p id="8c8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢其他的用户管理命令，请在评论区发表。</p></div></div>    
</body>
</html>