<html>
<head>
<title>Can You Reverse a Python String Containing a Flag Emoji?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可以反转包含旗帜表情符号的Python字符串吗？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/can-you-reverse-a-python-string-containing-a-flag-emoji-de3306b27c0e?source=collection_archive---------23-----------------------#2022-01-27">https://betterprogramming.pub/can-you-reverse-a-python-string-containing-a-flag-emoji-de3306b27c0e?source=collection_archive---------23-----------------------#2022-01-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b87c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">答案可能会让你吃惊</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f9e06f90dd856f9970a4c356de3edd15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ty8a9Q0ZD3lDF84r"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@farzadme?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Farzad Mohsenvand </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="f189" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你认为以下Python代码的输出是什么？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="a923" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">诸如此类的问题让我想立即打开Python REPL，尝试一下代码，因为我认为我知道答案是什么，但我对这个答案不是很有信心。</p><p id="7d76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我第一次看到这个问题时的思路:</p><ul class=""><li id="c035" class="ly lz it lb b lc ld lf lg li ma lm mb lq mc lu md me mf mg bi translated"><code class="fe mh mi mj mk b">flag</code>字符串包含一个字符。</li><li id="f858" class="ly lz it lb b lc ml lf mm li mn lm mo lq mp lu md me mf mg bi translated"><code class="fe mh mi mj mk b">[::-1]</code>片反转<code class="fe mh mi mj mk b">flag</code>串。</li><li id="2eb0" class="ly lz it lb b lc ml lf mm li mn lm mo lq mp lu md me mf mg bi translated">单字符字符串的反转与原字符串相同。</li><li id="2d24" class="ly lz it lb b lc ml lf mm li mn lm mo lq mp lu md me mf mg bi translated">因此，<code class="fe mh mi mj mk b">reversed_flag</code>必然是<code class="fe mh mi mj mk b">”🇺🇸”</code>。</li></ul><p id="c4da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个完全有效的论点。但是结论是真的吗？看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="7649" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这到底是怎么回事？</p><h1 id="e565" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated"><code class="fe mh mi mj mk b">”🇺🇸”</code>真的包含单个字符吗？</h1><p id="1558" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">当一个有效论点的结论为假时，它的前提之一<em class="lx">必然</em>也为假。让我们从头开始:</p><p id="63ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lx"/><code class="fe mh mi mj mk b"><em class="lx">flag</em></code><em class="lx">字符串包含单个字符。</em></p><p id="a38b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是这样吗？你怎么知道一个字符串有多少个字符？</p><p id="830a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Python中，可以使用内置的<code class="fe mh mi mj mk b">len()</code>函数来获取字符串中的字符总数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="519e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">哦。</p><p id="d16d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太奇怪了。你只能在字符串<code class="fe mh mi mj mk b">”🇺🇸”</code>中<em class="lx">看到</em>一个单独的<em class="lx">东西</em>——也就是美国国旗——但是一个长度的<code class="fe mh mi mj mk b">2</code>与<code class="fe mh mi mj mk b">flag[::-1]</code>的结果相结合。由于<code class="fe mh mi mj mk b">”🇺🇸”</code>的反义词是<code class="fe mh mi mj mk b">”🇸🇺”</code>，这似乎暗示着不知何故<code class="fe mh mi mj mk b">”🇺🇸” == “🇺 🇸”</code>。</p><h1 id="f392" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">你怎么知道一个字符串中有哪些字符？</h1><p id="3764" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">使用Python可以通过几种不同的方式查看字符串中的所有字符:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="d967" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">美国国旗表情符号并不是唯一包含两个字符的国旗表情符号:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="248d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后是苏格兰国旗:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="35a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好的，<em class="lx">这是怎么回事？</em></p><blockquote class="nn no np"><p id="84a9" class="kz la lx lb b lc ld ju le lf lg jx lh nq lj lk ll nr ln lo lp ns lr ls lt lu im bi translated"><strong class="lb iu">挑战:</strong>你能找到任何看起来像单个字符，但实际上包含两个或更多字符的非表情符号字符串吗？</p></blockquote><p id="3bc0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于这些例子令人不安的是，它们暗示你不能仅仅通过看你的屏幕来辨别字符串中的字符。</p><p id="fe7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，也许更深一层，它让你质疑你对性格这个术语的理解。</p><h1 id="2dc6" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">到底什么是角色？</h1><p id="f51b" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">计算机科学中的术语<strong class="lb iu">人物</strong>可能会令人困惑。它往往与单词<strong class="lb iu">符号</strong>混为一谈，公平地说，它是单词<a class="ae ky" href="https://en.wikipedia.org/wiki/Character_(symbol)" rel="noopener ugc nofollow" target="_blank">字符的同义词，因为它在英语方言中使用</a>。</p><p id="3503" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实上，当我谷歌<code class="fe mh mi mj mk b">character computer science</code>时，我得到的第一个结果是一篇Technopedia文章的链接，这篇文章将一个角色定义为:</p><blockquote class="nt"><p id="87b6" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">"[A]相当于一个字母或符号的信息显示单位."</p><p id="eb0c" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">——Technopedia，<a class="ae ky" href="https://www.techopedia.com/definition/940/character-char" rel="noopener ugc nofollow" target="_blank">“字符(Char)”</a></p></blockquote><p id="c4f9" class="pw-post-body-paragraph kz la it lb b lc od ju le lf oe jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">这个定义似乎是错误的，特别是考虑到美国国旗的例子表明一个单一的符号可能由至少两个字符组成。</p><p id="f3cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我得到的第二个谷歌结果是维基百科。在那篇文章中，角色的定义更加自由:</p><blockquote class="nt"><p id="d0a3" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">"[一个]字符是一个信息单位，大致对应于一个T11字形T12、字形单位或符号，例如自然语言书面形式中的字母表或音节表。"</p><p id="a2e8" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">—维基百科，<a class="ae ky" href="https://en.wikipedia.org/wiki/Character_(computing)" rel="noopener ugc nofollow" target="_blank">“字符(计算)”</a></p></blockquote><p id="7804" class="pw-post-body-paragraph kz la it lb b lc od ju le lf oe jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">嗯……在定义中使用“大致”这个词会让定义感觉，我应该说，<em class="lx">不确定</em>。</p><p id="8e05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但维基百科的文章继续解释说，字符这个术语在历史上一直被用来“表示特定数量的连续位”</p><p id="a3a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，一个关于一个只有一个符号的字符串如何包含两个或更多字符的问题的重要线索是:</p><blockquote class="nt"><p id="602b" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">“如今，一个字符通常被认为是指8位(一个字节)……<strong class="ak">所有的[符号]都可以用一个或多个8位代码单位来表示，这些代码单位就是UTF-8 </strong>。”</p><p id="50b7" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">—维基百科，<a class="ae ky" href="https://en.wikipedia.org/wiki/Character_(computing)" rel="noopener ugc nofollow" target="_blank">“字符(计算)”</a></p></blockquote><p id="179a" class="pw-post-body-paragraph kz la it lb b lc od ju le lf oe jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">好吧！也许事情开始变得更有意义了。一个<strong class="lb iu">字符</strong>是<em class="lx">一个字节的信息</em>代表一个文本单元。我们在一个字符串中看到的<strong class="lb iu">符号</strong>可以由多个8位(1字节)<em class="lx"> UTF-8码单元</em>组成。</p><p id="df1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lx">字符</em>与<em class="lx">符号</em>不同。现在看来，一个符号可以由多个字符组成是合理的，就像国旗表情符号一样。</p><p id="abd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是什么是UTF 8码单位呢？</p><p id="3c9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在维基百科关于字符的文章中，有一个叫做<em class="lx">编码</em>的部分解释道:</p><blockquote class="nt"><p id="8546" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">计算机和通信设备使用字符编码来表示字符，这种编码将每个字符分配给某种东西——通常由一系列数字表示的整数——可以存储或通过网络传输。常用编码的两个例子是ASCII和Unicode的UTF-8编码</p><p id="64d6" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">—维基百科，<a class="ae ky" href="https://en.wikipedia.org/wiki/Character_(computing)" rel="noopener ugc nofollow" target="_blank">“字符(计算)”</a></p></blockquote><p id="d9b1" class="pw-post-body-paragraph kz la it lb b lc od ju le lf oe jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">还有一次提到UTF-8！但是现在我需要知道什么是字符编码。</p><h1 id="0262" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">到底什么是字符编码？</h1><p id="43eb" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">根据维基百科，一个<strong class="lb iu">字符编码</strong>给每个字符分配一个数字。那是什么意思？</p><p id="c063" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不是说每个字符都可以和一个数字配对吗？所以，你可以这样做，把英文字母表中的每个大写字母和一个0到25的整数配对。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/5d1e0e5be8d00d3844fb58ee26925d74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GOOHNvN-S-2i7QHIu3rjzA.png"/></div></div></figure><p id="d85e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用Python中的元组来表示这种配对:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="22b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">停下来问自己:<em class="lx">“我能创建一个像上面这样的元组列表，而不用显式地写出每一对吗？”</em></p><p id="ea97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一种方法是使用<a class="ae ky" href="https://docs.python.org/3/library/functions.html#enumerate" rel="noopener ugc nofollow" target="_blank"> Python的</a> <code class="fe mh mi mj mk b"><a class="ae ky" href="https://docs.python.org/3/library/functions.html#enumerate" rel="noopener ugc nofollow" target="_blank">enumerate()</a></code> <a class="ae ky" href="https://docs.python.org/3/library/functions.html#enumerate" rel="noopener ugc nofollow" target="_blank">函数</a>。<code class="fe mh mi mj mk b">enumerate()</code>接受一个名为<em class="lx"> iterable </em>的参数，并返回一个元组，该元组包含一个默认为0的计数和通过迭代<em class="lx"> iterable </em>获得的值。</p><p id="6464" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看<code class="fe mh mi mj mk b">enumerate()</code>的行动:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="0771" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有一种更简单的方法来制作所有的字母。</p><p id="77f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python的<code class="fe mh mi mj mk b"><a class="ae ky" href="https://docs.python.org/3/library/string.html" rel="noopener ugc nofollow" target="_blank">string</a></code> <a class="ae ky" href="https://docs.python.org/3/library/string.html" rel="noopener ugc nofollow" target="_blank">模块</a>有一个名为<code class="fe mh mi mj mk b">ascii_uppercase</code>的变量，它指向一个包含英语字母表中所有大写字母的字符串:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="2dac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，我们已经把字符和整数联系起来了。这意味着我们得到了一个字符编码！</p><p id="4b54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，怎么用呢？</p><p id="d30c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要将字符串<code class="fe mh mi mj mk b">”PYTHON”</code>编码为整数序列，您需要一种方法来查找与每个字符相关的整数。但是，在元组列表中查找东西是困难的。也确实效率不高。(为什么？)</p><p id="1288" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">字典有助于查找资料。如果我们将<code class="fe mh mi mj mk b">enumerated_letters</code>转换成一个字典，我们可以快速查找与一个整数相关的字母:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="699d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，要对字符串<code class="fe mh mi mj mk b">”PYTHON”</code>进行编码，您需要能够查找与字符相关的整数。你需要的是<code class="fe mh mi mj mk b">int_to_char</code>的反义词。</p><p id="f045" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如何在Python字典中交换键和值？</p><p id="01ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一种方法是使用<code class="fe mh mi mj mk b">reversed()</code>函数从<code class="fe mh mi mj mk b">int_to_char</code>字典中反转键值对:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="1db0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以编写一个<a class="ae ky" href="https://docs.python.org/3/howto/functional.html#generator-expressions-and-list-comprehensions" rel="noopener ugc nofollow" target="_blank">生成器表达式</a>来反转<code class="fe mh mi mj mk b">int_to_char.items()</code>中的所有对，并使用该生成器表达式来填充一个字典:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="278a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你把每个字母和一个唯一的整数配对，这很好。否则，这种字典颠倒是不会起作用的。(为什么？)</p><p id="2af5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在您可以使用<code class="fe mh mi mj mk b">char_to_int</code>字典和<a class="ae ky" href="https://docs.python.org/3/howto/functional.html#generator-expressions-and-list-comprehensions" rel="noopener ugc nofollow" target="_blank">列表理解</a>将字符串编码为整数列表:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="81b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用Python的<a class="ae ky" href="https://docs.python.org/3/library/stdtypes.html#str.join" rel="noopener ugc nofollow" target="_blank"> string `.join()`方法</a>在生成器表达式中使用<code class="fe mh mi mj mk b">int_to_char</code>将整数列表转换为大写字符串:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="74b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，有一个问题。</p><p id="e91d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您的编码不能处理包含标点符号、小写字母和空格的字符串:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="66df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">解决这个问题的一种方法是使用包含所有小写字母、标点符号和空白字符的字符串创建编码。</p><p id="085a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，在Python中，几乎总是有更好的方法。Python的<code class="fe mh mi mj mk b">string</code>模块包含一个名为<code class="fe mh mi mj mk b">printable</code>的变量，该变量给你一个包含一整串可打印字符的字符串:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="e386" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您从头开始创建自己的字符串，您会包括所有这些字符吗？</p><p id="db18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在您可以创建新的字典来编码和解码<code class="fe mh mi mj mk b">string.printable</code>中的字符:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="a5e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用这些字典来编码和解码更复杂的字符串:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="594d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您现在已经创建了两种不同的字符编码！而且他们<em class="lx">真的</em>不一样。看看使用两种编码解码同一个整数列表会发生什么:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="a6dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">差远了！</p><p id="fd82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们知道了一些关于字符编码的事情:</p><ul class=""><li id="c101" class="ly lz it lb b lc ld lf lg li ma lm mb lq mc lu md me mf mg bi translated">字符编码将字符与唯一的整数配对。</li><li id="6398" class="ly lz it lb b lc ml lf mm li mn lm mo lq mp lu md me mf mg bi translated">某些字符编码不包括其他字符编码中包含的字符。</li><li id="cba8" class="ly lz it lb b lc ml lf mm li mn lm mo lq mp lu md me mf mg bi translated">两种不同的字符编码可以将相同的整数解码成两个不同的字符串。</li></ul><p id="d3e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些和UTF八号有什么关系？</p><h1 id="ee93" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">什么是UTF-8？</h1><p id="1a75" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">维基百科关于字符的文章提到了两种不同的字符编码:</p><blockquote class="nt"><p id="03ed" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">"常用编码的两个例子是ASCII和Unicode的UTF-8编码."</p><p id="b5ae" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">—维基百科，<a class="ae ky" href="https://en.wikipedia.org/wiki/Character_(computing)" rel="noopener ugc nofollow" target="_blank">“字符(计算)”</a></p></blockquote><p id="9e32" class="pw-post-body-paragraph kz la it lb b lc od ju le lf oe jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">好的，所以ASCII和UTF-8是特定种类的字符编码。</p><p id="f104" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据维基百科关于ASCII的文章:</p><blockquote class="nt"><p id="9593" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">“ASCII是万维网上最常用的字符编码，直到2007年12月，UTF-8编码超越了它；UTF-8向后兼容ASCII。”</p><p id="b40b" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">—维基百科，<a class="ae ky" href="https://en.wikipedia.org/wiki/ASCII#Use" rel="noopener ugc nofollow" target="_blank">“ASCII”</a></p></blockquote><p id="95bc" class="pw-post-body-paragraph kz la it lb b lc od ju le lf oe jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">UTF 8不仅仅是网络上占主导地位的字符编码。它也是Linux和macOS操作系统的主要字符编码，甚至是Python代码的<a class="ae ky" href="https://docs.python.org/3/howto/unicode.html#python-s-unicode-support" rel="noopener ugc nofollow" target="_blank">默认编码。</a></p><p id="b4eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实上，您可以看到UTF-8如何在Python string对象上使用<code class="fe mh mi mj mk b"><a class="ae ky" href="https://docs.python.org/3/library/stdtypes.html#str.encode" rel="noopener ugc nofollow" target="_blank">.encode()</a></code> <a class="ae ky" href="https://docs.python.org/3/library/stdtypes.html#str.encode" rel="noopener ugc nofollow" target="_blank">方法</a>将字符编码为整数。但是<code class="fe mh mi mj mk b">.encode()</code>不返回整数列表。相反，<code class="fe mh mi mj mk b">encode()</code>返回一个<code class="fe mh mi mj mk b"><a class="ae ky" href="https://docs.python.org/3/library/stdtypes.html#bytes-objects" rel="noopener ugc nofollow" target="_blank">bytes</a></code> <a class="ae ky" href="https://docs.python.org/3/library/stdtypes.html#bytes-objects" rel="noopener ugc nofollow" target="_blank">对象</a>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="523d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python文档将<code class="fe mh mi mj mk b">bytes</code>对象描述为“范围<code class="fe mh mi mj mk b">0 &lt;= x &lt; 256</code>内不可变的整数序列”考虑到<code class="fe mh mi mj mk b">encoded_string</code>对象显示的是字符串<code class="fe mh mi mj mk b">“PYTHON”</code>中的字符而不是一堆整数，这看起来有点奇怪。</p><p id="a212" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是让我们接受这一点，看看我们是否能以某种方式梳理出整数。</p><p id="f235" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python文档说<code class="fe mh mi mj mk b">bytes</code>是一个“序列”，而<a class="ae ky" href="https://docs.python.org/3/glossary.html#term-sequence" rel="noopener ugc nofollow" target="_blank"> Python的词汇表</a>将序列定义为“一个支持使用整数索引的高效元素访问的可迭代序列。”</p><p id="0d36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，听起来您可以像索引Python <code class="fe mh mi mj mk b">list</code>对象一样索引<code class="fe mh mi mj mk b">bytes</code>对象。让我们试一试:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="ca5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">啊哈！</p><p id="864b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你把<code class="fe mh mi mj mk b">encoded_string</code>转换成一个列表时会发生什么？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="92e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">答对了。看起来UTF-8将字母<code class="fe mh mi mj mk b">”P”</code>分配给整数<code class="fe mh mi mj mk b">80</code>，<code class="fe mh mi mj mk b">”Y”</code>分配给整数<code class="fe mh mi mj mk b">89</code>，<code class="fe mh mi mj mk b">”T”</code>分配给整数<code class="fe mh mi mj mk b">84</code>，以此类推。</p><p id="b5c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看当我们使用UTF-8编码字符串<code class="fe mh mi mj mk b">”🇺🇸”</code>时会发生什么:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="5aad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">哼。你期望<code class="fe mh mi mj mk b">”🇺🇸”</code>被编码成八个整数吗？</p><p id="4fd9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mh mi mj mk b">”🇺🇸”</code>由两个字符组成，即<code class="fe mh mi mj mk b">“🇺”</code>和<code class="fe mh mi mj mk b">”🇸”</code>。让我们看看这些是如何编码的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="9cd0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧，现在事情越来越有意义了。<code class="fe mh mi mj mk b">“🇺”</code>和<code class="fe mh mi mj mk b">”🇸”</code>都被编码为四个整数，对应于<code class="fe mh mi mj mk b">“🇺”</code>的四个整数出现在对应于<code class="fe mh mi mj mk b">”🇺🇸”</code>的整数列表的第一位，对应于<code class="fe mh mi mj mk b">”🇸”</code>的四个整数出现在第二位。</p><p id="fa08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不过，这提出了一个问题。</p><h1 id="7424" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">为什么UTF-8将一些字符编码为四个整数，而将另一些字符编码为一个整数？</h1><p id="da17" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在UTF 8中，字符<code class="fe mh mi mj mk b">“🇺”</code>被编码为四个整数的序列，而字符<code class="fe mh mi mj mk b">”P”</code>被编码为单个整数。这是为什么呢？</p><p id="0044" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在维基百科UTF-8文章的顶部有一个提示:</p><blockquote class="nt"><p id="e0c8" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">“UTF-8能够使用一到四个单字节(8位)代码单元对Unicode中的所有1，112，064个有效字符代码点进行编码。具有较低数值的代码点往往出现得更频繁，使用较少的字节进行编码。</p><p id="ea4a" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">——维基百科，<a class="ae ky" href="https://en.wikipedia.org/wiki/UTF-8" rel="noopener ugc nofollow" target="_blank">“UTF-8”</a></p></blockquote><p id="0fef" class="pw-post-body-paragraph kz la it lb b lc od ju le lf oe jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">好的，这听起来像是UTF-8没有将字符编码为整数，而是作为一种叫做Unicode码位的东西。并且每个代码单元显然可以是一到四个字节。</p><p id="f30f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们需要回答几个问题:</p><ol class=""><li id="65b6" class="ly lz it lb b lc ld lf lg li ma lm mb lq mc lu oj me mf mg bi translated">什么是字节？</li><li id="80bc" class="ly lz it lb b lc ml lf mm li mn lm mo lq mp lu oj me mf mg bi translated">什么是Unicode码位？</li></ol><p id="521f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">byte这个词已经出现了很多次，所以让我们给它一个合适的定义。</p><p id="8f03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个<strong class="lb iu">位</strong>是信息的最小单位。一个比特有两种状态，开或关，通常分别用整数<code class="fe mh mi mj mk b">0</code>和<code class="fe mh mi mj mk b">1</code>来表示。一个<strong class="lb iu">字节</strong>是一个八位序列。</p><p id="b801" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以将字节解释为整数，方法是将它们的组成位视为用<a class="ae ky" href="https://en.wikipedia.org/wiki/Binary_number" rel="noopener ugc nofollow" target="_blank">二进制表示法</a>来表示一个数字。</p><p id="b355" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一次看到二进制符号时，它可能看起来很奇怪。不过，这很像你用来写数字的通常的十进制表示法。不同的是，每个数字只能是0或1，数字中每一位的值都是2的幂，而不是10的幂:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/8699902790c6e472da090dab4fbf7c92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DbaK3jMnXCdsaui7kM5LOw.png"/></div></div></figure><p id="fd83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为一个字节包含八位，所以用一个字节表示的最大数是二进制的<code class="fe mh mi mj mk b">11111111</code>或十进制的<code class="fe mh mi mj mk b">255</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/dd5150fa0210cab8ca7acb366846b563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p7XpOdr9XX5GtmtevhSK0w.png"/></div></div></figure><p id="3468" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个字符使用一个字节的字符编码最多可以编码256个字符，因为最大8位整数是<code class="fe mh mi mj mk b">255</code>，可能的值从<code class="fe mh mi mj mk b">0</code>开始。</p><p id="11bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">256个字符可能足以编码英语中的所有内容。然而，它不可能处理全世界书面和电子交流中使用的所有字符和符号。</p><p id="59d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那你是做什么的？允许字符编码为多个字节似乎是一个合理的解决方案，这正是UTF-8所做的。</p><p id="39ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">UTF-8是<em class="lx"> Unicode转换格式的首字母缩写——8位</em>。又是Unicode这个词。</p><p id="a208" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据Unicode网站:</p><blockquote class="nt"><p id="30b5" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">“Unicode为每个字符提供了一个唯一的编号，无论是什么平台、什么程序、什么语言。”</p><p id="2f67" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">— Unicode网站，<a class="ae ky" href="https://unicode.org/standard/WhatIsUnicode.html" rel="noopener ugc nofollow" target="_blank">“Unicode是什么？”</a></p></blockquote><p id="2b7b" class="pw-post-body-paragraph kz la it lb b lc od ju le lf oe jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">Unicode是海量的。Unicode的目标是为所有书面语言提供一个通用的表示。每个字符都被分配到一个<a class="ae ky" href="https://en.wikipedia.org/wiki/Code_point" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">代码点</strong></a>——一个带有一些附加组织的“整数”的花哨词——总共有1112064个可能的代码点。</p><p id="0648" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不过，Unicode码位实际上是如何编码的取决于。UTF-8只是实现Unicode标准的一种字符编码。它将码位分成一至四个8位整数的组。</p><p id="690c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Unicode还有其他编码方式。UTF-16将Unicode码位分成一个或两个16位数字，并且是微软Windows 使用的<a class="ae ky" href="https://docs.microsoft.com/en-us/windows/win32/intl/unicode" rel="noopener ugc nofollow" target="_blank">默认编码。UTF-32可以将每个Unicode码位编码为单个32位整数。</a></p><p id="7bd9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是等等，UTF 8使用一到四个字节将符号编码为代码点。那么，为什么🇺🇸符号用八个字节编码呢？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="17ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">记住，两个角色组成了美国国旗表情符号:🇺和🇸.这些字符被称为区域指示符号。在Unicode标准中有26个区域指示器代表A-Z英文字母。它们被用来编码<a class="ae ky" href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" rel="noopener ugc nofollow" target="_blank">ISO 3166-1两个字母的国家代码</a>。</p><p id="4321" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是维基百科对地区指示符号的看法:</p><blockquote class="nt"><p id="dcca" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">“这些是在2010年10月定义的，作为Unicode 6.0对表情符号的支持的一部分，作为对每个国家国旗的单独字符进行编码的替代方法。虽然它们可以显示为罗马字母，但这意味着实现可以选择以其他方式显示它们，例如通过使用国旗。<strong class="ak"/><a class="ae ky" href="https://www.unicode.org/faq/emoji_dingbats.html" rel="noopener ugc nofollow" target="_blank"><strong class="ak">Unicode FAQ</strong></a><strong class="ak">表示应该使用这种机制，国旗的符号不会被直接编码。</strong></p><p id="0af0" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">—维基百科，<a class="ae ky" href="https://en.wikipedia.org/wiki/Regional_indicator_symbol#cite_note-3" rel="noopener ugc nofollow" target="_blank">“地区指示符号”</a></p></blockquote><p id="6f08" class="pw-post-body-paragraph kz la it lb b lc od ju le lf oe jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">换句话说，Unicode并不直接支持🇺🇸符号——实际上是任何国家国旗的符号。操作系统、网络浏览器和其他使用数字文本的地方，可以<em class="lx">选择</em>到<em class="lx">呈现</em>对区域指示符作为标志。</p><p id="7995" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来盘点一下到目前为止我们所知道的:</p><ul class=""><li id="e104" class="ly lz it lb b lc ld lf lg li ma lm mb lq mc lu md me mf mg bi translated">通过字符编码，通常是UTF-8，符号串被转换成整数序列。</li><li id="ebd4" class="ly lz it lb b lc ml lf mm li mn lm mo lq mp lu md me mf mg bi translated">UTF-8将一些字符编码为单个8位整数，而其他字符需要两个、三个或四个8位整数。</li><li id="d9e7" class="ly lz it lb b lc ml lf mm li mn lm mo lq mp lu md me mf mg bi translated">一些符号，如国旗表情符号，不是直接用Unicode编码的。相反，它们是Unicode字符序列的呈现，可能被也可能不被每个平台支持。</li></ul><p id="ca36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，当你反转一个字符串时，会反转什么呢？在编码中，你是否颠倒了整数的整个序列，或者你是否颠倒了码位的顺序，或者其他什么？</p><h1 id="ae36" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">你如何反转一个字符串呢？</h1><p id="6930" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">你能想出一种方法用代码实验来回答这个问题，而不是试图去查找答案吗？</p><p id="9685" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您之前已经看到，UTF-8将字符串<code class="fe mh mi mj mk b">”PYTHON”</code>编码为六个整数的序列:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="731c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果对字符串<code class="fe mh mi mj mk b">”PYTHON”</code>的反转进行编码会发生什么？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="75b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，列表中整数的顺序颠倒了。但是其他符号呢？</p><p id="0b45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">前面，您已经看到了<code class="fe mh mi mj mk b">“🇺”</code>符号被编码为一个由四个整数组成的序列。当你对它的反转进行编码时会发生什么？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="e368" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">哼。两个列表中整数的顺序是相同的！</p><p id="0a4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们试试用美国国旗反过来串:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="8761" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">整数的顺序没有颠倒！相反，代表🇺and 🇸get的Unicode码位的四个整数组被交换了。每个码位中整数的顺序保持不变。</p><h1 id="13ef" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">所有这些意味着什么？</h1><p id="10d7" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">这篇文章题目的答案是:是的！你<em class="lx">可以</em>用国旗表情符号反串。但是反转由多个码位组成的符号可能会产生令人惊讶的结果。尤其是如果您以前从未听说过字符编码和代码点之类的东西。</p><p id="aee8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，像Python那样颠倒代码点的顺序是正确的方法吗？保持由多个码位完整表示的符号是否更有意义？答案是:看情况。至少据我所知，没有一种规范的方法来反转一个字符串。</p><blockquote class="nn no np"><p id="9f6a" class="kz la lx lb b lc ld ju le lf lg jx lh nq lj lk ll nr ln lo lp ns lr ls lt lu im bi translated"><strong class="lb iu">挑战:</strong>你将如何编写一个函数来反转一个字符串，同时保持编码为码点序列的符号不变？你能从头开始做吗？有没有用你的语言编写的软件包可以帮你做到这一点？那个包是怎么解决问题的？</p></blockquote><h1 id="3506" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">为什么这些都很重要？</h1><p id="7b9a" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">从这次调查中可以吸取一些重要的教训。</p><p id="4edb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，如果您不知道使用了哪种字符编码来编码某些文本，您就不能保证解码后的文本准确地表示原始文本。</p><p id="42f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其次，尽管UTF-8被广泛采用，但仍有许多系统使用不同的字符编码。当从文件中读取文本时，请记住这一点，特别是当从不同的操作系统或跨国界共享时。要明确，并且总是指出使用哪种编码来编码或解码文本。</p><p id="a131" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，Python的<code class="fe mh mi mj mk b">open()</code>函数<a class="ae ky" href="https://docs.python.org/3/library/functions.html#open" rel="noopener ugc nofollow" target="_blank">有一个</a> <code class="fe mh mi mj mk b"><a class="ae ky" href="https://docs.python.org/3/library/functions.html#open" rel="noopener ugc nofollow" target="_blank">encoding</a></code> <a class="ae ky" href="https://docs.python.org/3/library/functions.html#open" rel="noopener ugc nofollow" target="_blank">参数</a>，它指定在读取或写入文本到文件时使用的字符编码。好好利用它。</p><h1 id="e306" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">你从这里去哪里？</h1><p id="f9dc" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我们已经讨论了很多领域，但仍有许多问题没有得到解答。因此，写下你仍然存在的一些问题，并使用你在本文中看到的调查技术来尝试回答它们。</p><blockquote class="nn no np"><p id="ea13" class="kz la lx lb b lc ld ju le lf lg jx lh nq lj lk ll nr ln lo lp ns lr ls lt lu im bi translated">这篇文章的灵感来自于Will McGugan在Twitter上提出的一个问题。<a class="ae ky" href="https://twitter.com/willmcgugan/status/1484295045603897347" rel="noopener ugc nofollow" target="_blank">看看威尔的帖子</a>一大堆字符编码的疯狂。</p></blockquote><p id="30f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">这里有一些你可能想探究的问题:</strong></p><ul class=""><li id="0443" class="ly lz it lb b lc ld lf lg li ma lm mb lq mc lu md me mf mg bi translated">当您将<code class="fe mh mi mj mk b">”🏴󠁧󠁢󠁳󠁣󠁴󠁿”</code>转换成一个列表时，您最终会得到一串以<code class="fe mh mi mj mk b">”\U”</code>开头的字符串。这些字符串是什么，它们代表什么？</li><li id="3059" class="ly lz it lb b lc ml lf mm li mn lm mo lq mp lu md me mf mg bi translated"><code class="fe mh mi mj mk b">”🏴󠁧󠁢󠁳󠁣󠁴󠁿”</code>的UTF-8编码包含了多达28字节的信息。🏴󠁧󠁢󠁳󠁣󠁴󠁿和🇺🇸有什么不同？还有哪些标志被编码为28字节？</li><li id="ae97" class="ly lz it lb b lc ml lf mm li mn lm mo lq mp lu md me mf mg bi translated">有没有被编码成一个代码点的旗帜表情符号？</li><li id="b701" class="ly lz it lb b lc ml lf mm li mn lm mo lq mp lu md me mf mg bi translated">当你反转🇦🇬时会发生什么？根据你对国旗表情符号的了解，你如何解释这种逆转？还有其他旗帜有类似的逆转吗？</li><li id="14cf" class="ly lz it lb b lc ml lf mm li mn lm mo lq mp lu md me mf mg bi translated">许多平台都支持彩色表情符号，比如竖起大拇指的表情符号，可以用不同的肤色渲染。不同颜色的相同符号是如何被编码的？</li><li id="d0fe" class="ly lz it lb b lc ml lf mm li mn lm mo lq mp lu md me mf mg bi translated">如何检查包含表情符号的字符串是否是<a class="ae ky" href="https://en.wikipedia.org/wiki/Palindrome" rel="noopener ugc nofollow" target="_blank">回文</a>？</li></ul><p id="b996" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！保持好奇心！</p></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><p id="9808" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lx">订阅我的免费周刊</em> <a class="ae ky" href="https://davidamos.dev/curious-about-code-newsletter" rel="noopener ugc nofollow" target="_blank"> <em class="lx">【好奇的代码】newslette</em></a><a class="ae ky" href="https://davidamos.dev/curious-about-code-newsletter" rel="noopener ugc nofollow" target="_blank"><em class="lx">r</em></a><em class="lx">每周五在你的收件箱里获取一剂引发好奇心的内容。</em></p></div></div>    
</body>
</html>