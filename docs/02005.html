<html>
<head>
<title>How To Safely Create Nested Directories in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python中安全地创建嵌套目录</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-safely-create-nested-directories-in-python-333a0ff40db9?source=collection_archive---------5-----------------------#2019-10-30">https://betterprogramming.pub/how-to-safely-create-nested-directories-in-python-333a0ff40db9?source=collection_archive---------5-----------------------#2019-10-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8a43" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用文件系统可能很棘手，因为存在不确定因素</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ebca265b4849c86765e9b76bb6ba6af3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o2WrazrcRGDAfNKpR1RaNw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">里卡多·克鲁兹在<a class="ae ky" href="https://unsplash.com/s/photos/directory?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="e48d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建嵌套目录(尤其是从绝对路径创建)是不稳定的，因为该命令的成功依赖于嵌套在其中的父目录。</p><p id="00c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">pathlib</code>库及其<code class="fe lv lw lx ly b">.mkdir()</code>方法提供了一种安全创建嵌套目录的技术。</p><p id="e86a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们从从<code class="fe lv lw lx ly b">pathlib</code>导入<code class="fe lv lw lx ly b">Path</code>类开始。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="1e86" class="md me it ly b gy mf mg l mh mi">from pathlib import Path</span></pre><p id="d044" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建<code class="fe lv lw lx ly b">Path</code>对象时，包含要创建的目录路径。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="45a1" class="md me it ly b gy mf mg l mh mi">p = Path("/nested/directory")</span></pre><p id="1b0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将使用<code class="fe lv lw lx ly b">.mkdir()</code>方法来创建目录。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="55ee" class="md me it ly b gy mf mg l mh mi">p.mkdir()</span></pre><p id="ef37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将工作，假设目录不存在。</p><p id="39c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，我们需要一种安全的机制来创建目录，而不会导致异常和错误。为此，让我们给<code class="fe lv lw lx ly b">mkdir()</code>添加<code class="fe lv lw lx ly b">exist_ok</code>标志，这样如果目录已经存在，它就不会引发<code class="fe lv lw lx ly b">FileExistsError</code> <em class="mj"> </em>。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="3c81" class="md me it ly b gy mf mg l mh mi">p.mkdir(<!-- -->exist_ok=True<!-- -->)</span></pre><p id="ad45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们的目录也需要父目录呢？</p><p id="4ae8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">类似于<code class="fe lv lw lx ly b">exist_ok</code>标志，<code class="fe lv lw lx ly b">parents</code>标志将修改默认行为，根据需要递归地创建目录。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="183c" class="md me it ly b gy mf mg l mh mi">p.mkdir(exists_ok=True, parents=True)</span></pre><p id="5e51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们想把所有东西打包成一个整齐的函数，我们可以这样做:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="f122" class="md me it ly b gy mf mg l mh mi">def makeDirectory(path_to_directory):<br/>   p = Path(path_to_directory)<br/>   p.mkdir(exists_ok=True, parents=True)</span></pre></div></div>    
</body>
</html>