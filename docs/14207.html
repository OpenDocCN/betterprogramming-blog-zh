<html>
<head>
<title>How I Used Render to Scale My Microservices App With Ease</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何使用Render轻松扩展我的微服务应用</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-i-used-render-to-scale-my-microservices-app-with-ease-1e8962f66b53?source=collection_archive---------13-----------------------#2022-11-16">https://betterprogramming.pub/how-i-used-render-to-scale-my-microservices-app-with-ease-1e8962f66b53?source=collection_archive---------13-----------------------#2022-11-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="eb22" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">当需要扩大/缩小规模时，时间就是金钱。了解使用Render扩展您的应用和服务有多简单</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c17e78a245f75f4f0b9a8b5e1b6bfe96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_0-P118pc7h0Pj2c"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@imgix?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> imgix </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="52f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为一名软件主管和特性开发人员，我见证了一个团队学到了关于资源扩展和云的重要一课。剧透:教训是，如果你不小心，扩展可能会变得昂贵！</p><p id="0ed3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">团队认为他们别无选择，只能在高负载下不断增加给定服务的实例数量。当他们完成纵向扩展时，实例的数量比默认配置的实例数量多几倍。他们当时没有意识到——尽管负载恢复到正常状态——他们的额外实例仍然存在。</p><p id="bad0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每个人似乎都接受这种“按需扩展”的方法……直到他们收到云提供商的下一张发票。</p><p id="022a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种情况让我想到了<a class="ae kv" href="https://render.com/" rel="noopener ugc nofollow" target="_blank"> Render </a>，一个我越来越多地在我的一些项目中采用的平台。这让我想知道使用Render在基于云的应用程序和服务中实现扩展有多容易。另一个剧透:很简单。</p><h1 id="920b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">基于云的扩展概念</h1><p id="23f0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">您的应用程序或服务的消费者有一个共同的期望:他们的所有请求都应该在合理的时间内得到处理。</p><p id="67dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与此同时，解决方案所有者也有期望，包括:</p><ul class=""><li id="7cf3" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">确保满足客户的期望</li><li id="474e" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">将成本控制在计划预算内</li><li id="8dad" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">最大限度地减少停机和停机，尤其是与性能相关的停机和停机</li></ul><p id="ba7e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当需求水平低于用于处理每个请求的技术的最大能力时，所有这些期望都很容易满足。当需求开始超过这些水平时，事情就变得有趣了。</p><p id="7a23" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">挑战在于找到一个既能满足预期又能保持成本合理的最佳点。这就是基于云的扩展概念发挥作用的地方。对于基于云的扩展，重点是扩大服务实例的数量以满足当前需求，但当需求减弱时，再缩小规模。</p><h1 id="5bdf" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">三种场景</h1><p id="874c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们将讨论自动缩放的三种使用情形:</p><ol class=""><li id="5a8c" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr nd mv mw mx bi translated">手动缩放</li><li id="3667" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr nd mv mw mx bi translated">自动扩展</li><li id="0f9b" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr nd mv mw mx bi translated">自动缩小</li></ol><p id="6f5b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们通过一个场景示例来探究每个用例。</p><h1 id="ec4a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">手动缩放</h1><p id="67b6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">手动伸缩的概念适用于对其应用程序或服务的需求有深刻理解的团队。</p><p id="436f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，考虑一个与所得税相关的服务，它在客户填写纳税申报表时回答客户的问题。支持此服务的团队可能有几十年的使用模式信息，这使他们能够确定全年需要多少服务实例。</p><p id="49f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了这些信息，手动缩放方法将会满足消费者，因为团队总是知道应该有多少实例可用。解决方案所有者很高兴，因为他们的每月支出完全在预算之内。</p><p id="7fcd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，这些信息不考虑预期使用模式的重大变化。例如，关于服务的新闻稿可能会突然对需求产生积极或消极的影响。</p><h1 id="e775" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">自动扩展</h1><p id="fcbc" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">自动扩展方法将实例数量置于由服务所有者创建但由云提供商强制实施的预定义阈值之下。当超过这些阈值时，实例的数量将会增加，直到需求下降到预期水平。大多数提供者允许用户设置最大实例数来限制可以产生的实例数。</p><p id="3fa5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然对每月预算的影响存在一些不确定性，但解决方案所有者可能会使用这样的理由:对其服务需求的增加通常与新的或升级的订阅有关，这会带来额外的收入。</p><p id="c7eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是“你必须花钱才能赚钱”这个概念发挥作用的地方。</p><p id="8760" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当实现自动向上扩展策略时，我总是建议对自动向下扩展也这样做。</p><h1 id="1eeb" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">自动缩小</h1><p id="1648" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">自动向下扩展的方法类似于自动向上扩展，只是服务数量会随着需求的减少而减少。虽然自动扩大功能可以很快引入新实例，但自动缩小通常会延迟，以避免过早缩小。</p><p id="b8a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回想一下我在引言中提到的团队，如果他们为我提到的服务采用了自动缩减，他们就不会遇到在高峰需求消退后让所有这些实例正常运行的巨大冲击。</p><p id="e415" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">提供自动扩展的云提供商现在将自动扩展与自动缩减相结合，因为这是该功能更常见的实现方式。</p><h1 id="daad" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">渲染时缩放</h1><p id="79ad" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">今年我已经写了几次关于渲染平台的文章。以下是我关于这个主题的一些其他出版物的链接:</p><ul class=""><li id="73a4" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated"><a class="ae kv" href="https://medium.com/better-programming/how-to-create-a-web-service-using-render-and-go-75d211421a00" rel="noopener">第一次使用Render and Go</a></li><li id="3cf3" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><a class="ae kv" href="https://medium.com/better-programming/render-unified-cloud-under-the-hood-940d097cede8" rel="noopener">遮光罩下:渲染统一云</a></li><li id="b42d" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><a class="ae kv" href="https://medium.com/better-programming/purpose-driven-microservice-design-c25fa2a3ad0e" rel="noopener">目的驱动的微服务设计</a></li><li id="7bf4" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><a class="ae kv" href="https://medium.com/better-programming/launch-your-startup-idea-in-a-day-using-the-render-platform-e28b736e7535" rel="noopener">在一天内启动你的创业想法</a></li></ul><p id="1729" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我了解到他们非常重视零债务的承诺。正如所料，使用Render进行缩放很容易，并且由一个简单的用户界面驱动。</p><p id="f1d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于在启动计划(或更高计划)下运行的服务，手动缩放实例数量的能力就像在渲染面板的缩放菜单中滑动到所需级别一样简单:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/7eb48472d7222c93aee2fe4a1e7fd249.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iZoUVnPGBsI5DFcQdWYJ-g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者的所有剩余图像</p></figure><p id="bb80" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您对在渲染中使用自动缩放感兴趣，请启用自动缩放，然后:</p><ul class=""><li id="f16a" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">选择实例的数量</li><li id="bb47" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">启用并设置目标CPU利用率</li><li id="81b9" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">启用并设置目标内存利用率</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/64c1854a737f93562c27c1d8d5333634.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OJG6c-Ma5ggr8i9st0fkHg.png"/></div></div></figure><p id="da93" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请记住，可以将自动伸缩限制为仅依赖于CPU或内存利用率(而不是两者)。</p><p id="1872" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">实现自动缩放后，渲染面板会在运行的实例数量发生变化时进行通信:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/51b68ada253908d4c82f135c0abb34e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*syqD_-Q0smlHSzOPErRXwg.png"/></div></div></figure><p id="9220" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，还提供了一些指标来证明自动扩展实施的合理性:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/82385e186c82bee38430f616339f1527.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qrFSvD7dQiggV68ppFDFDg.png"/></div></div></figure><p id="51e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从计费的角度来看，对成本结构的更改是基于新实例在给定月份中就位的时间。这意味着，如果您在计费周期的某一天的七个小时内将实例数量翻倍，那么该计费周期的成本不会翻倍；相反，它只会在实例数量翻倍的那七个小时内翻倍。</p><h1 id="ef37" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">其他可用的集成</h1><p id="cac8" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">使用Render部署的服务还可以与以下解决方案集成:</p><ul class=""><li id="6a42" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated"><a class="ae kv" href="https://www.datadoghq.com/" rel="noopener ugc nofollow" target="_blank"> Datadog </a> —向Datadog观测平台提供Postgres指标和日志流。</li><li id="1a43" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><a class="ae kv" href="https://scoutapm.com/" rel="noopener ugc nofollow" target="_blank"> Scout APM </a> —为Ruby、PHP、Python、Node.js和基于Elixir的服务提供应用性能监控(APM)。</li></ul><p id="fbdf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些集成提供了见解，有助于运行在渲染平台上的大型企业级应用程序和解决方案。</p><h1 id="4c61" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="0037" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">工作不到13年的技术专家很幸运，不用担心全球经济衰退的副作用。当代经济学家认为，下一次衰退将很快开始，一些经济指标已经证实了这种说法。</p><p id="41a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这意味着企业可能会更保守地支出，以保持他们的底线。企业审查的一个领域是云支出。</p><p id="2afe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我仍然相信基于云的产品和服务可以大大超过在专用数据中心内支持和维护类似配置的成本。也就是说，某些方面会显著影响与基于云的技术相关的周期性成本:</p><ul class=""><li id="5771" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">很好地理解每一项发生的成本</li><li id="a753" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">了解如何以及何时扩展应用和服务以满足需求</li></ul><p id="b763" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于那些使用亚马逊、谷歌或微软云服务的人来说，像CleanSlate技术集团这样的公司提供服务来帮助你解决这些问题。</p><p id="9e57" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">自2021年以来，我一直试图按照以下使命宣言生活，我觉得这可以适用于任何技术专业人士:</p><blockquote class="nf ng nh"><p id="a58a" class="kw kx ni ky b kz la jr lb lc ld ju le nj lg lh li nk lk ll lm nl lo lp lq lr ij bi translated">“将您的时间集中在提供扩展您知识产权价值的特性/功能上。将框架、产品和服务用于其他一切。”— <em class="iq"> J. Vester </em></p></blockquote><p id="ab40" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我为自己的应用和服务使用Render的这段时间里，我能够专注于提供强大的功能，因为它的零DevOps模型。对于那些希望简化其云架构的人来说，Render提供了任务关键型可扩展性，而无需成为其竞争对手所采用技术的专家。</p><p id="43c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">祝你今天过得愉快！</p></div></div>    
</body>
</html>