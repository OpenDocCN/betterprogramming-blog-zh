<html>
<head>
<title>How To Add Custom Types to the Window With TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用TypeScript向窗口添加自定义类型</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-add-custom-types-to-the-window-with-typescript-8a5408da9e12?source=collection_archive---------10-----------------------#2022-05-20">https://betterprogramming.pub/how-to-add-custom-types-to-the-window-with-typescript-8a5408da9e12?source=collection_archive---------10-----------------------#2022-05-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1752" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">创造完美环境的简要指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d42d418ecf4f203288802e63a12fc955.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZwY2NTsoLSRsbAyheLerg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://stock.adobe.com/contributor/205006394/olllinka2?load_type=author&amp;prev_url=detail" rel="noopener ugc nofollow" target="_blank"> olllinka2 </a></p></figure><p id="cedd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">几周前，我受命将一个第三方模块与我们的一个应用程序集成在一起。这是一个需要通过HTML中的脚本标签加载的应用程序，类似于如何加载Google analytics。一旦加载了页面并获取了脚本，我们可以在窗口对象上看到一个新的属性。</p><p id="d4ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该对象具有连接服务所需的可调用方法。我们可以很容易地在JavaScript应用程序的窗口中调用这些方法。TypeScript项目内部的事情变得有点棘手。</p><p id="fd84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将介绍如何向您的应用程序添加窗口类型，以及如何扩充窗口以包含自定义属性。</p><p id="41e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先要做的是添加基本窗口类型。通过将“DOM”添加到tsconfig <code class="fe lv lw lx ly b">lib</code>数组中，可以将窗口对象添加到您的项目中。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="c258" class="md me it ly b gy mf mg l mh mi">"lib": ["DOM"]</span></pre><p id="9a80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里阅读更多关于包含选项<a class="ae ky" href="https://www.typescriptlang.org/docs/handbook/dom-manipulation.html" rel="noopener ugc nofollow" target="_blank">所得到的类型。这样，您就可以访问窗口对象上可用的内容了。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/aa34fb0e7bb96f0b1ec6c4c13f390bb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4LqTKeglSaxDuPZEVqj_Yw.png"/></div></div></figure><p id="301f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了合适的窗口类型后，接下来要做的事情是向我们的IDE将要选择的窗口对象添加一个自定义类型。</p><p id="70f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在您的项目中创建一个名为<code class="fe lv lw lx ly b">globals.d.ts</code>的新文件。我选择把它放在我的<code class="fe lv lw lx ly b">src</code>文件夹中一个叫做<code class="fe lv lw lx ly b">types</code>的文件夹下。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="7561" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的语句将使用<code class="fe lv lw lx ly b">profitwell</code>函数增加现有的窗口对象。</p><p id="7506" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">TypeScript需要使用<code class="fe lv lw lx ly b">export {}</code>将该文件分类为外部模块。</p><p id="e025" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我的例子中，我扩展的对象是一个函数。如果您正在模仿第三方服务，您需要阅读任何可用的文档，以确保您的类型匹配。</p><p id="36cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文件准备就绪后，最后要做的事情是在应用程序的顶层导入文件，以便TypeScript可以拾取它。我正在使用React，所以我将这一行添加到我的根文件<code class="fe lv lw lx ly b">index.tsx</code>中。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="30ed" class="md me it ly b gy mf mg l mh mi">import "./types/globals"</span></pre><p id="c7fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重新启动IDE，您应该可以访问Window对象上的新类型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/3e7daf2d502a579b65cb0e29099e264d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bHBbIDvLoW4el-qosxiHnw.png"/></div></div></figure><p id="d18b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您应该已经准备好了所有的工具，可以根据您的选择来扩充窗口对象。</p><p id="f0a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。</p><p id="319d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">敬请关注更多内容！</p></div></div>    
</body>
</html>