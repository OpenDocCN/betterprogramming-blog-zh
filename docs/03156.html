<html>
<head>
<title>What’s So Special About JavaScript Functions?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript函数有什么特别之处？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/whats-so-special-about-javascript-functions-791202b93a21?source=collection_archive---------14-----------------------#2020-01-23">https://betterprogramming.pub/whats-so-special-about-javascript-functions-791202b93a21?source=collection_archive---------14-----------------------#2020-01-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2acc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我们看JavaScript函数声明、表达式和第一类函数</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/113e9c9fd0d9e9330d0373ad994537e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4K4Rdk0b5hWtnTa9"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">米哈伊尔·瓦西里耶夫在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="45ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在JavaScript中，有多种方法来声明函数。一种方法是用function关键字声明它。另一种方法是将其声明为箭头函数。</p><p id="174b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实上，用<code class="fe lw lx ly lz b">function</code>关键字声明函数有两种<em class="lv">方式。一种方法是使用函数声明，也称为函数语句，另一种方法是使用函数表达式。</em></p><p id="e5ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在JavaScript中，函数是一级的，这意味着它们是我们可以动态定义的对象。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="de67" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">函数声明</h1><p id="80c5" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">函数声明，也称为函数语句，是我们定义函数的方式——关键字<code class="fe lw lx ly lz b">function</code>后跟函数名。</p><p id="8b10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以编写以下代码，用函数声明来定义函数:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="d555" class="ni mi it lz b gy nj nk l nl nm">function foo(){<br/>  return 'foo';<br/>}</span></pre><p id="45b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在执行程序之前，函数声明存储在内存中。这意味着我们可以在代码中的任何地方引用它，甚至在声明它之前。在执行程序之前在内存中存储一个变量在JavaScript中称为“提升”<strong class="lb iu"> </strong>。</p><p id="2c1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们编写以下内容:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="5032" class="ni mi it lz b gy nj nk l nl nm">console.log(foo());</span><span id="99c7" class="ni mi it lz b gy nn nk l nl nm">function foo() {<br/>  return 'foo'<br/>}</span><span id="02ee" class="ni mi it lz b gy nn nk l nl nm">console.log(foo());</span></pre><p id="6ee6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们从两个函数调用中获取<code class="fe lw lx ly lz b">foo</code>日志。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="c961" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">函数表达式</h1><p id="4145" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">函数表达式是存储为变量值的函数。</p><p id="04d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，要将函数定义为函数表达式，我们编写:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="b324" class="ni mi it lz b gy nj nk l nl nm">const foo = function() {<br/>  return 'foo'<br/>}</span></pre><p id="aa38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除非是函数声明或语句，否则函数表达式不会在程序运行前存储在内存中。函数是在运行时定义的，所以我们只能在声明后引用它们。</p><p id="2b55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果写出如下内容:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="3bfd" class="ni mi it lz b gy nj nk l nl nm">console.log(foo());</span><span id="5501" class="ni mi it lz b gy nn nk l nl nm">const foo = function() {<br/>  return 'foo'<br/>}</span><span id="a0be" class="ni mi it lz b gy nn nk l nl nm">console.log(foo());</span></pre><p id="bd73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们会得到下面的错误:<code class="fe lw lx ly lz b">Uncaught ReferenceError: Cannot access ‘foo’ before initialization’</code>。</p><p id="815b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，当程序最初运行时，我们有变量声明，但是我们还没有给它分配函数，所以我们不能访问它。此外，用<code class="fe lw lx ly lz b">let</code>或<code class="fe lw lx ly lz b">const</code>关键字定义的任何东西在定义之前都不能与这些变量或常量一起使用，这也阻止了它的运行。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="e5f9" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">什么时候应该使用函数声明或表达式？</h1><p id="d656" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">看个人风格了。函数声明更方便——它们在脚本的任何部分都可用——而函数表达式让我们可以将函数赋给变量，并以各种方式引用变量，比如它拥有的调用方法。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/45d0f543b3ebdab1345eb5f4c424b081.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UOHziaaqdBj3L4Cl"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@wexor?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Wexor Tmg </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="baad" class="mh mi it bd mj mk np mm mn mo nq mq mr jz nr ka mt kc ns kd mv kf nt kg mx my bi translated">一流的功能</h1><p id="cdd4" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">正如我们在函数表达式示例中看到的，我们可以在JavaScript中将函数赋给变量。这个术语叫做一级函数。一级函数是在程序运行时动态定义的函数。</p><p id="3e38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是因为在JavaScript中，函数和其他东西一样都是对象。函数有自己的方法和其他属性，可以像对象一样使用。</p><p id="db1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，所有的函数都有<code class="fe lw lx ly lz b">toString</code>方法，用定义函数的代码将它们转换成一个字符串。</p><p id="0d75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数中的其他方法是调用具有不同<code class="fe lw lx ly lz b">this</code>值的函数的方法，比如<code class="fe lw lx ly lz b">bind</code>、<code class="fe lw lx ly lz b">call</code>和<code class="fe lw lx ly lz b">apply</code>。</p><p id="6d69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过编写以下代码来使用<code class="fe lw lx ly lz b">toString</code>方法:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="0424" class="ni mi it lz b gy nj nk l nl nm">function foo() {<br/>  return 'foo'<br/>}</span><span id="4964" class="ni mi it lz b gy nn nk l nl nm">console.log(foo.toString());</span></pre><p id="4bac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们从<code class="fe lw lx ly lz b">console.log</code>中得到以下内容:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="0f6e" class="ni mi it lz b gy nj nk l nl nm">function foo() {<br/>  return 'foo'<br/>}</span></pre><p id="c71b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lw lx ly lz b">bind</code>、<code class="fe lw lx ly lz b">call</code>和<code class="fe lw lx ly lz b">apply</code>方法类似。它们都将函数中的关键字<code class="fe lw lx ly lz b">this</code>的一个对象作为第一个参数。<code class="fe lw lx ly lz b">bind</code>和<code class="fe lw lx ly lz b">call</code>采用逗号分隔的参数列表作为其他参数，<code class="fe lw lx ly lz b">apply</code>采用一个参数数组作为第二个参数。</p><p id="e59e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以通过编写以下代码，用<code class="fe lw lx ly lz b">call</code>方法更改函数中<code class="fe lw lx ly lz b">this</code>的值:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="3c94" class="ni mi it lz b gy nj nk l nl nm">let obj = {<br/>  firstName: 'Joe',<br/>  lastName: 'Smith'<br/>}</span><span id="0d91" class="ni mi it lz b gy nn nk l nl nm">let person  = {<br/>  firstName: 'Jane',<br/>  lastName: 'Smith',<br/>  getFullName()  {<br/>    return `${this.firstName} ${this.lastName}`<br/>  }<br/>}</span><span id="653b" class="ni mi it lz b gy nn nk l nl nm">console.log(person.getFullName());<br/>console.log(person.getFullName.call(obj));</span></pre><p id="bd40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个例子是一样的，除了我们将<code class="fe lw lx ly lz b">call</code>改为<code class="fe lw lx ly lz b">apply</code>，因为我们没有传入第二个或后续的参数:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="c582" class="ni mi it lz b gy nj nk l nl nm">let obj = {<br/>  firstName: 'Joe',<br/>  lastName: 'Smith'<br/>}</span><span id="fcf3" class="ni mi it lz b gy nn nk l nl nm">let person  = {<br/>  firstName: 'Jane',<br/>  lastName: 'Smith',<br/>  getFullName()  {<br/>    return `${this.firstName} ${this.lastName}`<br/>  }<br/>}</span><span id="e9df" class="ni mi it lz b gy nn nk l nl nm">console.log(person.getFullName());<br/>console.log(person.getFullName.apply(obj));</span></pre><p id="9f34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们得到第一个<code class="fe lw lx ly lz b">console.log</code>的<code class="fe lw lx ly lz b">Jane Smith</code>，因为我们还没有用<code class="fe lw lx ly lz b">apply</code>改变值，但是我们在第二个<code class="fe lw lx ly lz b">console.log</code>中用<code class="fe lw lx ly lz b">apply</code>方法把<code class="fe lw lx ly lz b">this</code>的值改成了<code class="fe lw lx ly lz b">obj</code>，这样我们就得到<code class="fe lw lx ly lz b">Joe Smith</code>。</p><p id="09db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以用传入的对象调用<code class="fe lw lx ly lz b">bind</code>，如下面的代码所示:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="01de" class="ni mi it lz b gy nj nk l nl nm">let person = {<br/>  firstName: 'Jane',<br/>  lastName: 'Smith',<br/>  getName() {<br/>    return `${this.firstName} ${this.lastName}`<br/>  }<br/>}</span><span id="6ea4" class="ni mi it lz b gy nn nk l nl nm">const joe = {<br/>  firstName: 'Joe',<br/>  lastName: 'Smith'<br/>}</span><span id="bec6" class="ni mi it lz b gy nn nk l nl nm">console.log(person.getName.bind(joe)());</span></pre><p id="9fe4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们得到了<code class="fe lw lx ly lz b">'Joe Smith'</code>,因为我们将<code class="fe lw lx ly lz b">joe</code>对象传递给了<code class="fe lw lx ly lz b">bind</code>方法的第一个参数，它将<code class="fe lw lx ly lz b">getName</code>方法中的<code class="fe lw lx ly lz b">this</code>对象设置为<code class="fe lw lx ly lz b">joe</code>对象。</p><p id="9b74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在JavaScript中，有两种方法可以用<code class="fe lw lx ly lz b">function</code>关键字声明一个函数。一种方法是使用函数声明，也称为函数语句，另一种方法是使用函数表达式。</p><p id="13c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数声明用关键字<code class="fe lw lx ly lz b">function</code>后跟函数名来定义函数。它们在程序中的任何地方都可用。</p><p id="0d7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数表达式是赋给变量的函数。它们只有在声明并赋给变量后才可用。</p><p id="6c6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在JavaScript中，函数是一级的，这意味着它们是我们可以动态定义的对象。</p><p id="43f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑到这些特性，我们可以以不同于Java等语言的方式使用，在Java中，函数只能在类内部。</p></div></div>    
</body>
</html>