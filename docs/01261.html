<html>
<head>
<title>ML.NET vs. Create ML: Toxic Text</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ML.NET vs .创建ML:有毒文本</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/ml-net-vs-create-ml-toxic-text-de1293f3a89c?source=collection_archive---------14-----------------------#2019-08-27">https://betterprogramming.pub/ml-net-vs-create-ml-toxic-text-de1293f3a89c?source=collection_archive---------14-----------------------#2019-08-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d819" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">基于文本的快速低级比较</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5eb40b904afb6fc9c1798eea6633ffbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xs_A0mCrvYJkz0cFlwl27A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">免责声明:这张图片比实际对比更加强烈</p></figure><p id="6144" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最近，我大肆宣传苹果的新<a class="ae lu" href="https://developer.apple.com/documentation/createml/mlimageclassifier" rel="noopener ugc nofollow" target="_blank"> Create ML </a> GUI工具，并给了它一个<a class="ae lu" href="https://medium.com/better-programming/shoehorning-swiftui-and-create-ml-part-2-a8932075e09a" rel="noopener">快速旋转</a>。归根结底，输入训练数据并让它给出实际工作模型是多么简单，这给我留下了深刻的印象。</p><p id="c6df" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我发现，用操场做一个模型，真的没有那么多工作。但是，我认为新工具是为了让机器学习变得更加容易，即使它看起来是这样。</p><p id="22d8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">很明显，这对我很有效。</p><p id="cc1d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以，在处理完图像之后，我的下一个逻辑测试是尝试弄乱文本。</p><p id="0156" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">考虑如何测试这一点，我想起了我找到的一个简单的<a class="ae lu" href="https://dotnet.microsoft.com/learn/ml-dotnet/get-started-tutorial/intro" rel="noopener ugc nofollow" target="_blank">ML.NET教程</a>，它贯穿了一个简单的二进制分类模型。教程带你经历的<a class="ae lu" href="https://meta.wikimedia.org/wiki/Research:Detox" rel="noopener ugc nofollow" target="_blank">维基百科排毒</a>用例实际上很棒。</p><p id="4e88" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">采用苹果自己的<a class="ae lu" href="https://developer.apple.com/documentation/createml/creating_a_text_classifier_model" rel="noopener ugc nofollow" target="_blank">文本分类器模型教程</a>并把detox用例放入其中要简单得多。</p><p id="ee11" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">突然，我灵光一现，意识到这也提供了一个机会，在另一场真正史诗般的苹果与微软对决中比较和对比这两个框架！</p><p id="c5a2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有趣的是，这是一个比较和评价他们在这方面的入门教程的机会。因此，稍作修改后，我创建了自己的测试数据，在两个实现中运行它们，并比较结果。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="de47" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">模型自我分析</h1><p id="d4d9" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">我比较的第一件事是每个框架告诉我的他们自己的信心水平。模特给自己的自信水平真的很有趣也很好奇。</p><p id="b124" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">统计数据总是受欢迎的，但我的怀疑在于我想知道测试数据是否真的值得信赖，以及机器学习假设在人为错误面前有多脆弱。</p><p id="b7b0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是我跑题了。我们要结果！首先，ML.NET CLI:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/d4210e7b4d45bcde73d16fa492fed931.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*irTk7yGlHQGRWj3Y4sMN4A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ML。净准确率:70.37%</p></figure><p id="98a2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，通过Playgrounds创建ML(注意:我将训练和测试数据的默认随机拆分保持在80%):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi na"><img src="../Images/e673b01224776a3b5a8f321c9f6adc9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:844/format:webp/1*er8S9ghevQzs92g5ijTZpg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建ML(验证)准确率:70.59%</p></figure><p id="53db" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">乍一看，这些数字表明这是一场势均力敌的比赛，苹果略有领先。</p><p id="1c6e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不过，这其中有一些变数。首先，这是基于苹果的验证准确性，输出承认是从10%的数据中自动生成的。</p><p id="43bf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是不可靠的，因为我已经将250行数据分成了训练数据(80%的数据)和测试数据(20%)。如果我要改变随机分割百分比，精确度在技术上也会随之改变。</p><p id="6c86" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这不一定是我吹毛求疵。我的选择是基于各个教程中立即向我展示的内容。这意味着，虽然可能有配置ML.NET模型的方法，但我选择放弃任何<code class="fe nb nc nd ne b">auto-train</code>建议。</p><p id="50c6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果这是任何其他项目，我可能会更仔细地考虑各自的参数和选项，但这本质上是相同用例下初学者教程的比较。考虑这个实验中的另一个“松散控制”。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="398c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">我自己的测试</h1><p id="bcbe" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">现在，对我来说真正的考验是基于我自己的输入，这些模型是否真的有效。诚然，数据集有一些非常混乱的评论，我的模型现在经过训练。</p><p id="bb5a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">写简单的句子不一定能得到我想要的结果(这使得微软选择这个有限的集合作为介绍教程变得很有趣)。</p><p id="8b60" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有10个语句。在我看来，关键在于:</p><ol class=""><li id="a50c" class="nf ng it la b lb lc le lf lh nh ll ni lp nj lt nk nl nm nn bi translated">我讨厌你|有毒。</li><li id="8f0d" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">我爱你|无毒。</li><li id="7547" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">太感谢了|无毒。</li><li id="72b0" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">非常感谢！|无毒(测试标点符号)。</li><li id="ce15" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">这篇文章很烂|有毒。</li><li id="5707" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">去自残|有毒。</li><li id="2443" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">给自己找些帮助。|无毒(取自数据集)。</li><li id="4085" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">看集之前看到的。哦好吧。|无毒(取自数据集)。</li><li id="ebbd" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">我同意|无毒(摘自数据集)。</li><li id="1847" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">这是粗鲁的|有毒的(来自教程的例子，虽然没有预期的结果，所以这是我自己的分类)。</li></ol><p id="a447" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于ML来说。网络:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/553a39f11d0a52f44880298c5aade0fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*agdDWAynnRwuxE0jU_4t6Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ML。最终结果:三次失误</p></figure><p id="4f79" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">并创建ML:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/f7bf77fe0d7adbc3c2e02fab165fec0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*mozj55F_l8dU6CkgNUBNFA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建ML结果:四次未命中</p></figure><p id="2bf1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有趣的是，根据我的计算，ML.NET少了一个，但可以说，Create ML有两个“非常感谢”的单词，有和没有“！”。所以实际上，数字的准确性是相似的。</p><p id="988a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，还有未命中的背景。两个模特显然都不喜欢“爱情”。此外，当ML.NET说关于这篇文章的评论是无毒的时候，他是个混蛋。</p><p id="242f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">至于“寻求帮助”的说法，没有更多的上下文，实际上可能是任何一种方式。Core ML对这句话更乐观，但被“谢谢你”和“我同意”这两句话绊倒了，这两句话似乎更容易理解(我可以说，我不知道这个模型在这方面教了什么，但ML.NET正确地理解了它们)。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a8cd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">获胜者</h1><p id="a522" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">很难宣布谁是赢家。我们在这里真正陈述的是谁在最基础、入门和教程级别上有更好的框架。</p><p id="9199" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">而且，虽然这可能会使结论容易被忽略，但这是一个有效的判断角度。</p><p id="b999" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我得把它给ML.NET。原因是，最终，在几乎没有背景的基础测试中，它似乎做得更好。</p><p id="59c8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">“谢谢”和“同意”在数据集中可能是讽刺性的，反过来，ML可能会选择这些。但是，那不是他们被陈述的背景，而且ML.NET同意没有更多证据证明他们是有毒的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9688" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">意义</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/918080b8223e17d62661531e42352a4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/1*7GjNKQXOJSaN_MR7bx9OTA.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在应用程序中演示如何创建ML模型</p></figure><p id="cca1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">尽管这是一个真正基础的比较测试，但它能说明很多问题。这些教程可能是好奇的开发人员接触这两种框架的第一步。</p><p id="9038" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当决定在我的项目中使用哪一个时，我想在指导教程结束时确定一个置信度。最终，这将在决定它是否会在我的项目中落地时承担很大的分量。</p><p id="3481" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当然，还有更多因素需要决定，比如ML.NET是否对我的模型提供了更好的微调，或者我是否更喜欢在我的原生iOS应用程序中使用Create ML？</p><p id="cc12" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">举个例子，我快速创建了一个iOS应用程序，它使用了测试中的Create ML模型。它仅用了21行代码(大部分是SwiftUI)在几分钟内就创建好了(见上面的gif以查看它的运行)。</p><p id="00a3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，俗话说，第一印象是持久的。</p><p id="0dc4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">也许这就是苹果使用不同数据集/场景的原因。这也可能是为什么微软建议你尝试一个短语(“这是粗鲁的”)，而不给你一个预期的结果。</p><p id="e40c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">总而言之，机器学习已经给我留下了深刻的印象，但我还有很多东西要学。</p></div></div>    
</body>
</html>