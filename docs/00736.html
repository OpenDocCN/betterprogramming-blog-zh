<html>
<head>
<title>Using CSS Modules With Create-React-App Without Ejecting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在不弹出的情况下使用CSS模块</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/using-css-modules-with-create-react-app-without-ejecting-6ceef85194e?source=collection_archive---------3-----------------------#2019-07-08">https://betterprogramming.pub/using-css-modules-with-create-react-app-without-ejecting-6ceef85194e?source=collection_archive---------3-----------------------#2019-07-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fbe1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">利用CSS模块避免类名冲突</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e4efe9c3a9beb9a4c6449f45205a0cff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iEWQVaYmEWroX7ld"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@freestocks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">freestocks.org</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="62b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">"你如何在一个大项目中组织你的CSS？"</p><p id="48c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我面试初级前端开发者时经常问的问题。你会惊讶有多少开发人员没有这个问题的答案。</p><p id="5bf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着应用程序的增长，类名冲突的风险也在增加。</p><p id="02dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们来看一个具体的例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="6d4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我们在两个不同的CSS文件中使用了类名<code class="fe lx ly lz ma b"><strong class="lb iu">container</strong></code>。现在，我们赋予<code class="fe lx ly lz ma b"><strong class="lb iu">container</strong></code> className的元素将这些样式混合在一起，这不是我们想要的。</p><p id="129a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个小例子中，它看起来很琐碎，很容易避免。但是当你和多个团队成员一起做一个大项目时，就不那么容易避免了。</p><h2 id="6a0f" class="mb mc it bd md me mf dn mg mh mi dp mj li mk ml mm lm mn mo mp lq mq mr ms mt bi translated">在大型项目中，我们应该如何组织CSS？</h2><p id="804f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">过去，开发人员依靠命名约定来处理CSS的全局性质。<a class="ae ky" href="http://getbem.com/" rel="noopener ugc nofollow" target="_blank"> BEM </a>(块元素修改器)是最流行的解决方案。</p><p id="1f89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，所有这些解决方案都有相同的限制:它们依赖开发人员的勤奋来避免命名冲突。</p><p id="ee44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果不依赖开发人员使用唯一的类名，而是依赖一个在构建时由<em class="mz">为我们生成</em>类名的工具，会怎么样？幸运的是，这个工具已经存在了，它叫做<a class="ae ky" href="https://github.com/css-modules/css-modules" rel="noopener ugc nofollow" target="_blank"> CSS模块</a>。</p><p id="4167" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CSS模块是一个CSS文件，默认情况下，所有的类名和动画名都在本地范围内</p><h2 id="8f01" class="mb mc it bd md me mf dn mg mh mi dp mj li mk ml mm lm mn mo mp lq mq mr ms mt bi translated">用<code class="fe lx ly lz ma b">create-react-app</code>使用CSS模块</h2><p id="b335" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">幸运的是，CSS模块支持开箱即用的<code class="fe lx ly lz ma b">create-react-app</code>。我们所要做的就是正确命名我们的CSS文件。如果我们导入一个扩展名为<code class="fe lx ly lz ma b">.module.css</code>的文件，那么<code class="fe lx ly lz ma b">create-react-app</code>会自动把它当作一个CSS模块。</p><pre class="kj kk kl km gt na ma nb nc aw nd bi"><span id="242b" class="mb mc it ma b gy ne nf l ng nh">npx create-react-app css-modules-app</span></pre><p id="6c27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在您最喜欢的编辑器中打开项目。将文件<code class="fe lx ly lz ma b">App.css</code>重命名为<code class="fe lx ly lz ma b">App.module.css</code>。接下来，将从<code class="fe lx ly lz ma b">import './App.css'</code>的导入重命名为<code class="fe lx ly lz ma b">import styles from './App.modules.css</code>。最后，在任何使用类名的地方，一定要访问<code class="fe lx ly lz ma b">styles</code>对象，而不是直接访问字符串类名。</p><p id="e875" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以你应该写<code class="fe lx ly lz ma b">className={styles['App']}</code>，而不是写<code class="fe lx ly lz ma b">className="App"</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="5127" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，运行您的应用程序并检查输出。你会注意到CSS模块已经为我们生成了类名。</p><p id="caea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">类名<code class="fe lx ly lz ma b">App-header</code>现在是<code class="fe lx ly lz ma b">App_App-header__xLkWl</code>。前缀是文件名<code class="fe lx ly lz ma b"><strong class="lb iu">App</strong>.module.css.</code>，然后添加一个下划线和我们原来的类名:<code class="fe lx ly lz ma b">App-header.</code>，最后添加生成的散列<code class="fe lx ly lz ma b">xLkWl</code>。这有助于确保我们的类名保持唯一。</p><h2 id="7638" class="mb mc it bd md me mf dn mg mh mi dp mj li mk ml mm lm mn mo mp lq mq mr ms mt bi translated">编写全局样式</h2><p id="89da" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">有时候你需要写全局风格。当您需要覆盖外部组件的样式时，这一点尤其重要。用CSS模块做到这一点非常容易。只需使用<code class="fe lx ly lz ma b">:global</code>选择器从局部范围切换到全局范围。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><h2 id="668c" class="mb mc it bd md me mf dn mg mh mi dp mj li mk ml mm lm mn mo mp lq mq mr ms mt bi translated">撰写条件样式</h2><p id="8f96" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">CSS模块非常适合条件样式。我们经常需要根据道具创建不同外观的组件。让我们以一个简单的<code class="fe lx ly lz ma b">TextInput</code>组件为例。</p><p id="9270" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了让我们的生活更轻松，安装依赖项<code class="fe lx ly lz ma b">classnames</code></p><p id="6bf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lx ly lz ma b">yarn add classnames</code></p><p id="2e27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们创建两个新文件<code class="fe lx ly lz ma b">text-input.js</code>和<code class="fe lx ly lz ma b">text-input-module.css</code>。</p><p id="db9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="6fa3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当属性<code class="fe lx ly lz ma b">hasWarning</code>或<code class="fe lx ly lz ma b">hasError</code>被传递给<code class="fe lx ly lz ma b">TextInput</code>时，它会添加适当的类名。</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="1060" class="np mc it bd md nq nr ns mg nt nu nv mj jz nw ka mm kc nx kd mp kf ny kg ms nz bi translated">结论</h1><p id="af60" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">使用CSS模块允许我们编写本地范围的样式。这有助于我们防止类名之间的命名冲突。由于对CSS模块的支持被嵌入到<code class="fe lx ly lz ma b">create-react-app</code>中，我们甚至不需要弹出来利用CSS模块。</p></div></div>    
</body>
</html>