<html>
<head>
<title>How to Make a Perfect Pull Request</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何提出完美的拉动式请求</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-make-a-perfect-pull-request-3578fb4c112?source=collection_archive---------2-----------------------#2020-06-22">https://betterprogramming.pub/how-to-make-a-perfect-pull-request-3578fb4c112?source=collection_archive---------2-----------------------#2020-06-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="dfea" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">完美的代码是不够的。帮助人们复习它</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/646ec2fb98ed6f379083e0b80aa90beb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_mxAq5O5leAqgODiNMg7Sw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@chuttersnap?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> chuttersnap </a>在<a class="ae kv" href="/s/photos/future?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="5c8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我决定提高团队的绩效，第一步是找到瓶颈。</p><p id="7c7c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事实证明，编码速度不是限制因素——代码审查才是。因此，为了加快审查速度，我比较了两种类型的拉式请求:</p><ul class=""><li id="a9ee" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">那些收到很少评论并很快被合并的网站。</li><li id="7e3e" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">那些得到很多评论并需要几轮审核的。</li></ul><p id="3dc4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是结果:九种让拉取请求更容易审核的方法。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="8cd6" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">1.添加“为什么”代码注释</h1><p id="4801" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">当你写一个新的特性时，你有很多关于它的信息。需求、第三方系统的限制、与遗留代码库的交互——您编写代码时会考虑所有这些因素。然而，当有人阅读该代码时，他们没有上下文，所以他们会问“它为什么在这里？”以及“你为什么选择这种方法？”。</p><p id="c2a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过添加解释性注释，提前给他们“为什么”的答案。</p><p id="f539" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有些人宣扬评论是有害的，应该避免，我不同意这种观点。</p><p id="2e42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有不同类型的评论。那些描述代码做什么的确实是多余的。提取一个具有精心挑选的名称的方法可以消除它们。</p><p id="3498" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一方面，当你解释为什么用一种特殊的方式编写代码时，你给了读者额外的信息。这些评论提高了认识水平，理想情况下达到与作者相同的水平。他们帮助人们理解代码。</p><p id="a8d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我通常在里面放一个类存在的理由，相关资源的链接，或者一些历史背景。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="85fb" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">2.让你的PRs变小</h1><p id="ddaf" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">这是一项如此强大的技术，以至于Google甚至创建了一篇单独的文章<a class="ae kv" href="https://google.github.io/eng-practices/review/developer/small-cls.html" rel="noopener ugc nofollow" target="_blank">,介绍小型拉取请求的好处。以下是我最喜欢的四个。<br/>小型PRs包括:</a></p><ul class=""><li id="96f6" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">复习得更彻底了。</li><li id="4cfc" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">复习得更快。</li><li id="5ed5" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">更容易合并(频繁的合并导致更少的冲突)。</li><li id="d6fd" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">如果被拒绝，浪费的工作会更少。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/d07f123e03888c9227956df9f41a0295.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MwudSnXMR6ZxcsH4hhWz_A.png"/></div></div></figure><p id="2d59" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是一些使制作小型PRs更容易的方法:</p><ul class=""><li id="f78e" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">将重构提取到一个单独的PR。</li><li id="91f1" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">将大功能分割成小部分(即使它们不是面向用户的)。</li><li id="d68c" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">学习一些git技巧是有帮助的。让<code class="fe nn no np nq b">git add --patch</code>和<code class="fe nn no np nq b">git rebase --interactive</code>成为你的朋友。</li><li id="b39c" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">对于长期运行的特性分支，将该分支设置为您的PRs的目标，而不是<code class="fe nn no np nq b">master</code>:</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/e9275e56125a7c0f1daebe660c48b783.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rJfomHEWQnomHjwqlAjKEA.png"/></div></div></figure></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="51ec" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">3.做一个清晰的描述</h1><p id="bb0e" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">PR的描述为审查者提供了任务的初始背景。包括:</p><ul class=""><li id="c7a4" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">票证的链接。</li><li id="3ea9" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">已经完成的工作的总结(如果从PR的标题看不明显的话)。</li><li id="e3ec" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">相关拉请求的链接(例如，另一个服务中的相关变更)。</li></ul><p id="353b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你认为理解代码需要一些信息，不要把它放在公关的描述中。相反，做一个代码注释:它们更突出，会帮助未来的读者。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="2d13" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">4.注释您自己的拉动式请求</h1><p id="ccc3" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">为某些变更(例如删除和重构)添加解释性代码注释是没有意义的。考虑对您自己的拉请求进行注释，以便为审阅者提供额外的上下文。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="2569" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">5.在实现整个特性之前，先讨论整体方法</h1><p id="c103" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">这是一个巨大的时间节省。当你准备开始一个更大的重构或特性时，事先和同事讨论你的方法。与几个开发伙伴聊天，解释任务和你的想法。他们可能会赞同你的方法，或者推荐一个更好的方法。</p><p id="1a10" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很多次我都面临缺乏初步协调的情况，导致几天工作的浪费。想象一下，你连续做了五天的事情，却听到“对不起，但我们实际上不需要那个，因为…”。</p><p id="d2fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让自己免于失望。尽早获得反馈。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/6c4b6d2ed3babf4c613c8fc34ac8bbfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AoGNYb91_xVXUwQA0ypclg.png"/></div></div></figure></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="efab" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">6.在创建PR之前，重新基于新的母版</h1><p id="0ace" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">这有几个好处:</p><ul class=""><li id="8f39" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">测试可能在您的本地分支中通过，但在应用最新更新时会失败。</li><li id="4ec4" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">您将能够使用最近添加的功能(例如，一个新的实用程序类)。</li><li id="ba69" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">如果审阅者没有发现最近的更改，他们可能会感到困惑。</li></ul><p id="66b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">比起合并，我更喜欢rebases，因为rebases的分支只包含相关的提交。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="0831" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">7.快速回复评论</h1><p id="ddf1" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">通常，处理评审意见需要一些时间。修复一个错别字，添加一个缺失的测试用例，重命名一个方法。如果你做得很快，你的同事就不必花太多时间去记住公关的内容。更少的合并时间意味着更快乐的同事，这意味着更多的利润！</p><p id="4a51" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种方法的缺点是增加了上下文切换的次数。一个变通的办法是使用<a class="ae kv" href="https://en.wikipedia.org/wiki/Pomodoro_Technique" rel="noopener ugc nofollow" target="_blank">番茄工作法</a>:每25分钟工作一次，中间有短暂的休息。这项技术的主要目标是变得更专注、更有效率、更健康、更少疲劳。但是也有一个好的副作用:在休息之后，上下文切换会更自然地发生。它们不会消失，但它们的负面破坏性作用会大大降低。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="8da0" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">8.不要修改已审核的提交—发送新的提交</h1><p id="a5bb" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">在单独的提交中处理评审意见，而不是修改或压缩您的更改。这使得审阅者更容易检查自上次审阅以来发生了什么变化:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/a75b06b13ef9198bb0b688ba70c3b77b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NQn7bM8PFmjki-PJYEBrqw.png"/></div></div></figure><h1 id="f423" class="mn mo iq bd mp mq nv ms mt mu nw mw mx jw nx jx mz jz ny ka nb kc nz kd nd ne bi translated">9.感谢评论者的建议</h1><p id="844b" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">深入理解他人的变化并提出有用的建议<a class="ae kv" href="https://medium.com/swlh/a-code-review-your-colleagues-would-thank-you-for-b569fea0e3e1" rel="noopener">需要付出巨大的努力</a>——欣赏这一事实并与他人交流。</p><p id="964d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">记住:代码变更是短暂的——与队友的关系才是最重要的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/816f5bb97b5f8c0de0a3131cfe662f47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tjHMA4O1vauQUB2QoEEnvA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我的猫Ryzhik在紧张的复习后累了。我用一盘他最喜欢的食物来感谢他</p></figure><p id="868b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">名单到此为止。总结一下:</p><p id="42bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ns">通过减少花在代码评审上的时间来提高团队的绩效。将这些建议应用到你的下一个拉动请求中，你很可能会立即得到积极的结果。</em></p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="6f19" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你喜欢这篇文章，你可能想看看我最近写的另一篇:<a class="ae kv" href="https://medium.com/swlh/a-code-review-your-colleagues-would-thank-you-for-b569fea0e3e1" rel="noopener">你的同事会感谢你的代码评审:更好的代码评审的11个技巧。</a></p><p id="5df6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">资源:</p><ul class=""><li id="403c" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><a class="ae kv" href="https://google.github.io/eng-practices/review/developer/small-cls.html" rel="noopener ugc nofollow" target="_blank">小CLs </a>。谷歌关于小拉请求好处的文章。</li><li id="64f8" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="https://en.wikipedia.org/wiki/Pomodoro_Technique" rel="noopener ugc nofollow" target="_blank">番茄_技术</a>。时间管理技巧:将工作分成由休息时间隔开的间隔。</li></ul></div></div>    
</body>
</html>