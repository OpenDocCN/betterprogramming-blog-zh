<html>
<head>
<title>How to Make Automatic Trigonometry Calculations in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Swift中进行自动三角计算</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-make-automatic-trigonometry-calculations-on-swift-e8a49f68879c?source=collection_archive---------14-----------------------#2022-05-23">https://betterprogramming.pub/how-to-make-automatic-trigonometry-calculations-on-swift-e8a49f68879c?source=collection_archive---------14-----------------------#2022-05-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="be1e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">利用这一简单的Swift功能改进您的代码！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f2ea636f377dbf4661b2cc3fff1b507b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IvnmjuTJhoMpPCMjHFDcow.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">感谢<a class="ae ky" href="https://unsplash.com/@leladesign" rel="noopener ugc nofollow" target="_blank"> Lea </a>这张可爱的照片！</p></figure><p id="ea6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没有人喜欢数学，这是事实。那么我们能做些什么把它从我们的生活中彻底消除呢？不，不是机器人。也许有一天我也会写这些。谁知道呢！但是现在，你必须用函数和公式来解决。</p><p id="470e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">准备让计算器成为过去吗？让我们看看如何使我们的项目中的三角学变得简单。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="5af9" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">原则</h2><p id="c005" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">对于那些不太熟悉三角学的人，让我引用一下<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/design-dribbble-like-floating-buttons-for-your-uitabbar-for-ios-using-swift-5-8bf5eb71f79a">这另一个教程</a>中我自己的话，像一个绝对以自我为中心的书呆子(虽然真的只是懒惰):</p><blockquote class="na nb nc"><p id="3052" class="kz la nd lb b lc ld ju le lf lg jx lh ne lj lk ll nf ln lo lp ng lr ls lt lu im bi translated">基本上，在一个直角三角形中，你可以计算你的三角形的边长，只要你至少有:<br/> -一个角的度数(在我们的例子中，我用黄色突出显示的那个)，<br/> -和三条边中的一条边的大小(在我们的例子中，蓝色虚线)。<br/>从图中可以看出，这个逻辑可以应用到我们中间按钮周围的一个看不见的圆圈上，通过用图中的公式计算x和y值来定义三个按钮(绿色)的位置。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/6ffd75c6871352186344a5250c639221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2PZl4Xu6hiDmBsGA.png"/></div></div></figure><p id="695d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个理论对任何包含圆的建筑都是有用的。例如，在那个教程中，我正在解释如何使用圆心作为起点来确定图片中绿点的位置，这样我就可以使用它们作为三个<code class="fe ni nj nk nl b">UIButton</code>的位置的中心。</p><p id="4687" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">三角学教导我们:</p><ul class=""><li id="9bfa" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated">sin θ =对边/斜边</li><li id="d50d" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">cos θ =邻边/斜边</li><li id="3bb6" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">tan θ =相对/相邻侧</li></ul><p id="bcda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你看上面的图片，“θ”将是黄色的角，“x”将是相邻的边，“y”将是相反的，这使得剩下的边，如果你愿意，半径，斜边。</p><p id="acd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们已经知道了角的度数和三条边中的至少一条边，通常是斜边，我们可以将公式反过来求出其余边的边，通常是x和y。</p><p id="77b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要做的就是反转我们的公式:</p><blockquote class="oa"><p id="ea29" class="ob oc it bd od oe of og oh oi oj lu dk translated">y = sin θ * h</p><p id="8aa2" class="ob oc it bd od oe of og oh oi oj lu dk translated">y = tan θ * x</p><p id="fc9a" class="ob oc it bd od oe of og oh oi oj lu dk translated">x = cos θ * h</p><p id="9291" class="ob oc it bd od oe of og oh oi oj lu dk translated">x = y / tan θ</p><p id="5086" class="ob oc it bd od oe of og oh oi oj lu dk translated">h = x / cos θ</p><p id="0783" class="ob oc it bd od oe of og oh oi oj lu dk translated">h = y / sin θ</p></blockquote><p id="42cc" class="pw-post-body-paragraph kz la it lb b lc ok ju le lf ol jx lh li om lk ll lm on lo lp lq oo ls lt lu im bi translated">用弧度表示的度数代替θ，使用以下公式:</p><blockquote class="oa"><p id="3e07" class="ob oc it bd od oe of og oh oi oj lu dk">θ * π / 180</p></blockquote><p id="497b" class="pw-post-body-paragraph kz la it lb b lc ok ju le lf ol jx lh li om lk ll lm on lo lp lq oo ls lt lu im bi translated">对弧度感到困惑？我在这里解释了一些关于那个<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-create-a-nice-uitabbar-for-your-ios-app-using-swift-5-pt-2-9285466846c8">的事情</a> …这就是我承诺的自我推销(但真的很节能)。</p><p id="9db9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你感到困惑，不要担心。我只是需要解释这一点来证明我多少知道我在做什么，但你不需要理解所有这些。这个函数将为您完成所有的计算，因此您不必像我一样经历学习所有这些内容的痛苦。过会儿谢谢我。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="5aa2" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">公式</h2><p id="d8fc" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">可能是我找的不够努力，但是我一直没有找到自动计算三角学的函数，我觉得很可惜。我喜欢节省我一些精力的东西(比如引用我自己…)，所以我决定写一个！</p><p id="929f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">跳到最后一部分看完整的代码，但这是我的思考过程:</p><p id="382c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我首先创建一个名为segment的枚举，取h为斜边，y为对边，x为邻边，作为值:</p><pre class="kj kk kl km gt op nl oq or aw os bi"><span id="e642" class="mc md it nl b gy ot ou l ov ow">enum <strong class="nl iu">segment</strong> {</span><span id="4ccf" class="mc md it nl b gy ox ou l ov ow">case <strong class="nl iu">x</strong><br/>case <strong class="nl iu">y<br/></strong>case <strong class="nl iu">h</strong></span><span id="ff81" class="mc md it nl b gy ox ou l ov ow">}</span></pre><p id="7cc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我用Swift语言翻译了我上面提到的公式:</p><pre class="kj kk kl km gt op nl oq or aw os bi"><span id="fd46" class="mc md it nl b gy ot ou l ov ow">y = tan(angle * .pi/180) * x<br/>y = sin(angle * .pi/180) * h<br/>x = cos(angle * .pi/180) * h<br/>x = y / tan(angle * .pi/180)<br/>h = x / cos(angle * .pi/180)<br/>h = y / sin(angle * .pi/180)</span></pre><p id="630e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将发送给该函数的参数是:</p><ul class=""><li id="25c4" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><code class="fe ni nj nk nl b">segment</code>，其中我定义了我拥有的段是x，y还是h；</li><li id="5d0f" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe ni nj nk nl b">size</code>，这里我声明给定的线段有多长；</li><li id="44da" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe ni nj nk nl b">angle</code>，这是我角度的度数。</li></ul><p id="9152" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该函数将返回<code class="fe ni nj nk nl b">[segment : CGFloat]</code>。</p><p id="f4c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe ni nj nk nl b">switch</code>语句，我可以定义使用哪些公式:</p><pre class="kj kk kl km gt op nl oq or aw os bi"><span id="823b" class="mc md it nl b gy ot ou l ov ow">switch segment {<br/>   case .x: (...)<br/>   case .y: (...)<br/>   case .h: (...)<br/>}</span></pre><p id="1208" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是完整的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oy oz l"/></div></figure><p id="d8ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很漂亮，对吧？让我们看看它是否有效。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="719a" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">测试</h2><p id="496f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">一切都需要测试，所以让我们确保这个函数确实能节省时间，而不只是弄乱我们的代码。</p><p id="328e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们有一个大小如下的三角形:</p><ul class=""><li id="6395" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated">十点十分</li><li id="025e" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">y: 10</li><li id="3f93" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">14.14小时</li><li id="bdb4" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">角度:45度</li></ul><p id="8d1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们应该测试:</p><ul class=""><li id="6567" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated">如果我们运行<code class="fe ni nj nk nl b">calcTrig(segment: .x, size: 10, angle: 45)</code>，或者</li><li id="0f52" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">如果我们运行<code class="fe ni nj nk nl b">calcTrig(segment: .y, size: 10, angle: 45)</code>，或者</li><li id="bf0a" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">如果我们运行<code class="fe ni nj nk nl b">calcTrig(segment: .h, size: 14.14, angle: 45)</code></li></ul><p id="ac1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果应该是<code class="fe ni nj nk nl b">[.x: 10, .y: 10, .h: 14.14...]</code>。</p><p id="b761" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为计算可以给出类似于<code class="fe ni nj nk nl b">9.99</code>而不是<code class="fe ni nj nk nl b">10</code>的结果，或者<code class="fe ni nj nk nl b">14.14</code>将比两位小数更长，我们应该使用<code class="fe ni nj nk nl b">round(CGFloat)</code>来测试我们的结果至少非常类似于预期的数字。</p><p id="4ac0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个类似下面的单元测试，并运行所有的测试:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oy oz l"/></div></figure><p id="d22e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果测试成功，恭喜你！你成功地为未来的自己省去了很多头疼的事情。太棒了。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="a965" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你喜欢这个教程吗？它和你的项目合作得好吗？</p><pre class="kj kk kl km gt op nl oq or aw os bi"><span id="e7f6" class="mc md it nl b gy ot ou l ov ow"><strong class="nl iu">Want to Connect? </strong></span><span id="5aed" class="mc md it nl b gy ox ou l ov ow">Follow me on…<br/>❤️ <a class="ae ky" href="https://www.youtube.com/channel/UC5hqYiHxie458KSO1PAnA8Q" rel="noopener ugc nofollow" target="_blank">YouTube</a><br/>💖 <a class="ae ky" href="https://dribbble.com/margelss" rel="noopener ugc nofollow" target="_blank">Dribbble</a><br/>💜 <a class="ae ky" href="https://www.instagram.com/itsmargels/" rel="noopener ugc nofollow" target="_blank">Instagram</a><br/>💙 <a class="ae ky" href="https://ko-fi.com/margelss" rel="noopener ugc nofollow" target="_blank">Ko-Fi</a><br/>🖤 <a class="ae ky" href="https://github.com/Margels" rel="noopener ugc nofollow" target="_blank">GitHub</a></span></pre></div></div>    
</body>
</html>