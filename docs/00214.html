<html>
<head>
<title>How to Build a Twitter Sentiment Analyzer in Python Using TextBlob</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用TextBlob在Python中构建Twitter情感分析器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-build-a-twitter-sentiments-analyzer-in-python-using-textblob-948e1e8aae14?source=collection_archive---------0-----------------------#2018-10-24">https://betterprogramming.pub/how-to-build-a-twitter-sentiments-analyzer-in-python-using-textblob-948e1e8aae14?source=collection_archive---------0-----------------------#2018-10-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="313b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何检查推文是正面还是负面</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/45baea132752e9435f4c260c89910d31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6zDrFfE7gE4IIoeiR3IJiw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@faustogarmen?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">福斯托·加西亚</a>在<a class="ae ky" href="https://unsplash.com/search/photos/emoticons?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="78f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章基于Siraj Raval的视频<a class="ae ky" href="https://www.youtube.com/watch?v=T5pRlIbr6gg&amp;list=PL2-dafEMk2A6QKz1mrk1uIGfHkC1zZ6UU" rel="noopener ugc nofollow" target="_blank"> Twitter情绪分析——学习Python数据科学#2 </a>。在这个挑战中，我们将构建一个情感分析器，检查关于某个主题的推文是负面的还是正面的。为此，我们将使用Python库<a class="ae ky" href="https://textblob.readthedocs.io/en/dev/" rel="noopener ugc nofollow" target="_blank"> TextBlob </a>。</p><p id="e9d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">情感分析，也称为意见挖掘或情感人工智能，是确定一篇文章是积极的、消极的还是中性的过程。这项技术的一个常见用例是发现人们对某个特定话题的感受。情感分析被广泛应用于评论和社交媒体的各种应用中。</p><p id="cf32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">情感分析可以用许多不同的方式来执行。许多品牌和营销人员使用基于关键字的工具对数据进行分类(如社交、新闻、评论、博客等)。)为正/负/中性。</p><p id="af84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自动情感标记通常通过单词列表来实现。例如，提到“仇恨”会被贴上负面标签。</p><p id="2339" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有两种方法可以进行情感分析。</p><p id="2fc8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">1.基于词典的方法<br/> 2。基于机器学习的方法。</p><p id="ac8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个问题中，我们将使用基于词典的方法。</p><p id="7721" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于词典的方法定义了一个正面和负面单词的列表，带有一个化合价——(例如‘好’:+2，‘好’:+1，‘糟糕’:-1.5等等)。该算法在文本中查找所有已知单词。然后，它通过求和或求平均值来组合它们各自的结果。一些扩展可以检查一些语法规则，如否定或情感修饰符(如单词“but”，它对文本中的情感值进行不同的加权，以强调文本的结尾)。</p><p id="0ed0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们来构建分析器。</p><h2 id="f5a8" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">Twitter API</h2><p id="e241" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在我们开始编码之前，我们需要<a class="ae ky" href="https://apps.twitter.com/" rel="noopener ugc nofollow" target="_blank">注册Twitter API </a>。这里我们需要注册一个应用程序来生成与我们的API相关联的各种密钥。Twitter API可以用来执行许多操作，比如创建和搜索。</p><p id="5766" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，创建应用程序后，我们可以开始编码。</p><p id="cfc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要安装两个软件包:</p><p id="0ad2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mt mu mv mw b">pip install tweepy</code></p><p id="14c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个包将用于处理Twitter API:</p><p id="3bbb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mt mu mv mw b">pip install textblob</code></p><p id="56f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个包将用于情感分析。</p><p id="6f57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mt mu mv mw b">sentiment_analyzer.py</code></p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="7bb0" class="lv lw it mw b gy nb nc l nd ne">import tweepy<br/>from textblob import TextBlob</span></pre><p id="e6ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要声明变量来存储与Twitter API相关的各种键。</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="1744" class="lv lw it mw b gy nb nc l nd ne">consumer_key = ‘[consumer_key]’</span><span id="585e" class="lv lw it mw b gy nf nc l nd ne">consumer_key_secret = ‘[consumer_key_secret]’</span><span id="7897" class="lv lw it mw b gy nf nc l nd ne">access_token = ‘[access_token]’</span><span id="7ec0" class="lv lw it mw b gy nf nc l nd ne">access_token_secret = ‘[access_token_secret]’</span></pre><p id="3321" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是使用带有这些令牌的<a class="ae ky" href="https://www.tweepy.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> tweepy </strong> </a>创建与Twitter API的连接。</p><h2 id="ee3c" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><strong class="ak">十二周</strong></h2><p id="6b51" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Tweepy支持OAuth认证。认证由<code class="fe mt mu mv mw b">tweepy.OAuthHandler</code>类处理。</p><p id="936e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">必须通过传递消费者令牌和密码来创建一个<code class="fe mt mu mv mw b">OAuthHandler</code>实例。</p><p id="e077" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个auth实例中，我们将通过传递<code class="fe mt mu mv mw b">access_token</code>和<code class="fe mt mu mv mw b">access_token_secret</code>来调用函数<code class="fe mt mu mv mw b">set_access_token</code>。</p><p id="ec85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们通过将这个auth实例传递给tweepy的API函数来创建我们的tweepy API实例。</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="ecac" class="lv lw it mw b gy nb nc l nd ne">auth = tweepy.OAuthHandler(consumer_key, consumer_key_secret)</span><span id="21a4" class="lv lw it mw b gy nf nc l nd ne">auth.set_access_token(access_token, access_token_secret)</span><span id="a386" class="lv lw it mw b gy nf nc l nd ne">api = tweepy.API(auth)</span></pre><p id="7bbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在可以使用API的搜索方法在Twitter上搜索任何主题。</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="a90d" class="lv lw it mw b gy nb nc l nd ne">public_tweets = api.search(‘Dogs’)</span></pre><p id="e5f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们将获得所有与话题“狗”相关的推文。我们可以使用库TextBlob执行情感分析。</p><h2 id="ba0a" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">文本Blob</h2><p id="c217" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">TextBlob是一个用于处理文本数据的Python (2和3)库。它提供了一个简单的API，用于处理常见的自然语言处理(NLP)任务，如词性标注、名词短语提取、情感分析、分类、翻译等。</p><p id="b5b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以通过以下方式创建textblob(示例，不是原始代码的一部分):</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="c175" class="lv lw it mw b gy nb nc l nd ne">example = TextBlob("Python is a high-level, general-purpose programming language.")</span></pre><p id="eac7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ng">标记化</em>可以通过以下方法进行:</p><p id="634a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">单词</strong>:返回文本的单词</p><p id="b777" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">用法</strong>:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="4936" class="lv lw it mw b gy nb nc l nd ne">example.words</span></pre><p id="d045" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">句子:</strong>返回文本的句子</p><p id="fcda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">用法</strong>:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="a497" class="lv lw it mw b gy nb nc l nd ne">example.sentences</span></pre><p id="2af6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">词性标注:</strong>词性标注可以通过<code class="fe mt mu mv mw b">tags </code>属性访问。</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="dcaa" class="lv lw it mw b gy nb nc l nd ne">wiki.tags<br/>[('Python', 'NNP'), ('is', 'VBZ'), ('a', 'DT'), ('high-level', 'JJ'), ('general-purpose', 'JJ'), ('programming', 'NN'), ('language', 'NN')]</span></pre><h2 id="ab32" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><strong class="ak">情绪分析</strong></h2><p id="3d63" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">情感属性返回情感(极性，主观性)形式的命名元组。极性分数是[-1.0，1.0]范围内的浮点数。主观性是在[0.0，1.0]范围内的浮动，其中0.0非常客观，1.0非常主观。</p><p id="925e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在回到代码。</p><p id="3f8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以迭代<code class="fe mt mu mv mw b">publice_tweets</code>数组，根据极性检查每条tweet的文本的情绪。</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="6019" class="lv lw it mw b gy nb nc l nd ne">for tweet in public_tweets:<br/>    print(tweet.text)<br/>    analysis = TextBlob(tweet.text)<br/>    print(analysis.sentiment)<br/>    if analysis.sentiment[0]&gt;0:<br/>       print 'Positive'<br/>    elif analysis.sentiment[0]&lt;0:<br/>       print 'Negative'<br/>    else:<br/>       print 'Neutral'</span></pre><p id="9dd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们使用以下代码运行代码:</p><p id="2f63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mt mu mv mw b">python sentiment_analyzer.py</code></p><p id="1367" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们得到了输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/69720842a0b1f662dd65702ba3966321.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iauQgK0cVY-PdOAC17nggQ.png"/></div></div></figure><p id="ed96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到，推文的情绪显示出来了。</p><p id="91b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个如何对来自Twitter等社交媒体的数据进行情感分析的例子。希望你觉得有用！</p><p id="2a74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" href="https://github.com/amkurian/twitter_sentiment_challenge" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到代码。</p></div></div>    
</body>
</html>