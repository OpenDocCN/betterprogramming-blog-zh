<html>
<head>
<title>React-Select Makes Creating Selectable Menus Easy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React-Select使创建可选菜单变得容易</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/react-select-makes-creating-selectable-menus-easy-5d9dffc7e0d9?source=collection_archive---------3-----------------------#2020-06-04">https://betterprogramming.pub/react-select-makes-creating-selectable-menus-easy-5d9dffc7e0d9?source=collection_archive---------3-----------------------#2020-06-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cd3c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">react-select简介，开箱即用，高度可定制</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fb79294d4da8f8a0549652f5bbe82f56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ft3HgOHLFehX8oFRZ8DZBA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jaredrossarango?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">贾里德·阿兰戈</a>在<a class="ae ky" href="https://unsplash.com/s/photos/future?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="b36b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">HTML的<code class="fe lv lw lx ly b">select</code>并不容易。需要两种类型的标签来定义:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="e111" class="md me it ly b gy mf mg l mh mi">&lt;select&gt;<br/>  &lt;option value="apple"&gt;Apple&lt;/option&gt;<br/>  &lt;option value="banana"&gt;Banana&lt;/option&gt;<br/>  &lt;option value="orange"&gt;Orange&lt;/option&gt;<br/>  &lt;option value="berry"&gt;Berry&lt;/option&gt;<br/>&lt;/select&gt;</span></pre><p id="e9b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React的<code class="fe lv lw lx ly b">select</code>与此类似，只是它使用了JSX (JavaScript + XML)，这是JavaScript的一个扩展，直接在JavaScript内编写HTML。在许多方面，JSX类似于HTML，但是它需要转换成标准的ECMAScript，然后再转换成HTML。</p><p id="9055" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我会推荐使用<a class="ae ky" href="https://github.com/JedWatson/react-select" rel="noopener ugc nofollow" target="_blank"> React Select </a>，这样选择就容易了。这个开源代码从2014年8月开始，现在已经有几百个贡献者，上万个明星。它提供了一个单独的组件<code class="fe lv lw lx ly b">Select</code>，具有常用的选择功能、简单的样式、异步加载、动态创建的选项、固定选项和许多其他特性。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="ef34" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">选择功能</h1><p id="b79e" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">一如既往，我们使用<a class="ae ky" href="https://medium.com/better-programming/10-fun-facts-about-create-react-app-eb7124aa3785" rel="noopener"> Create React App </a>作为起点。首先，用命令<code class="fe lv lw lx ly b">npm i react-select</code>安装React Select。然后这个包在<code class="fe lv lw lx ly b">package.json</code>成为<code class="fe lv lw lx ly b"><a class="ae ky" href="https://medium.com/better-programming/package-jsons-dependencies-in-depth-a1f0637a3129" rel="noopener">dependencies</a></code>的一部分。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="efe2" class="md me it ly b gy mf mg l mh mi">"dependencies": {<br/>  "react-select": "^3.1.0"<br/>}</span></pre><p id="5cba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将<code class="fe lv lw lx ly b">src/App.css</code>改为最小样式:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="8e01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">开箱即用，我们可以轻松地编写以下用户界面:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/98a695d1b44fae826566adf4f54415f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YfgxGa9ZMjQOD0a9vfrBgQ.png"/></div></div></figure><p id="fa8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是<code class="fe lv lw lx ly b">src/App.js</code>的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><ul class=""><li id="43f8" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">第18行:默认<code class="fe lv lw lx ly b">Select</code>。</li><li id="d612" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">第20行:显示了设置了<code class="fe lv lw lx ly b">isLoading</code>的加载动画。</li><li id="a439" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">第22行:显示预选值<code class="fe lv lw lx ly b">“Apple”</code>。由于<code class="fe lv lw lx ly b">isClearable</code>已设置，它允许我们使用退格键或字段右侧的“x”按钮清除所选值。</li><li id="43fd" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">第24行:显示禁用的<code class="fe lv lw lx ly b">Select</code>和设置的<code class="fe lv lw lx ly b">isDisabled</code>。</li><li id="be3d" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">第26行:显示设置了<code class="fe lv lw lx ly b">isMulti</code>的多个值的<code class="fe lv lw lx ly b">Select</code>。每个选定的值都可以单独删除，或者使用字段右侧的“x”按钮删除所有选定的值。</li><li id="8385" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">第28行:最初打开<code class="fe lv lw lx ly b">Select</code>菜单。</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="d06b" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">样式选择组件</h1><p id="b230" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">我们如何设计<code class="fe lv lw lx ly b">Select</code>组件的样式？首先，我们需要知道<code class="fe lv lw lx ly b">Select</code>组件是如何转换成HTML元素的。</p><p id="a186" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一行代码<code class="fe lv lw lx ly b">&lt;Select options={options} /&gt;</code>生成以下HTML元素:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/2eedcf9331f52b2b60a7cb544893631f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kme51ejZY6L8tuELUW9Bww.png"/></div></div></figure><p id="51f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最顶层是一个<code class="fe lv lw lx ly b">container</code>，里面包含一个<code class="fe lv lw lx ly b">control</code>，由一个<code class="fe lv lw lx ly b">valueContainer</code>和一个<code class="fe lv lw lx ly b">indicatorsContainer</code>组成。</p><p id="e069" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">valueContainer</code>有一个<code class="fe lv lw lx ly b">placeholder</code>和一个<code class="fe lv lw lx ly b">input</code>。</p><p id="1359" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">indicatorsContainer</code>为右侧的下拉箭头等。</p><p id="ac02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">Select</code>组件可以为<code class="fe lv lw lx ly b">Select</code>元素取一个<code class="fe lv lw lx ly b">className</code>，为带有给定前缀的内部元素取一个<code class="fe lv lw lx ly b">classNamePrefix</code>。</p><p id="2065" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将<code class="fe lv lw lx ly b">className</code>设置为<code class="fe lv lw lx ly b">“top”</code>，将<code class="fe lv lw lx ly b">classNamePrefix</code>设置为<code class="fe lv lw lx ly b">&lt;Select options={options} className=”top” classNamePrefix=”inner” /&gt;</code>内的<code class="fe lv lw lx ly b">“inner”</code>。这些是转换后的HTML元素:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/284d9e41166422b0ec7fd8f49c5ec800.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H7hymjGg_eqqBzVCI6FRrA.png"/></div></div></figure><p id="0acb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了特定的类名，可以使用CSS规则来设计元素的样式。</p><p id="5f72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，<code class="fe lv lw lx ly b">Select</code>组件提供了一种更好的方式来覆盖每个部分的内置样式。它使用<code class="fe lv lw lx ly b">styleFn</code>函数，该函数有两个参数:</p><ul class=""><li id="1d27" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">provided</code>:组件的默认内置样式。</li><li id="1415" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">state</code>:组件的当前状态，可以用来生成新的样式。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="477f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的代码定制了一个<code class="fe lv lw lx ly b">Select</code>组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="c7f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">记得传播原版<code class="fe lv lw lx ly b">provided</code>风格。否则，你会对缺少的基本造型的外观和感觉感到惊讶。</p><p id="f789" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是<code class="fe lv lw lx ly b">provided</code>物体:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/f53e64aec91fbb5b38874c415ab04c12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ydE4vAwkePIKpEb7FFaLZg.png"/></div></div></figure><p id="947c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是<code class="fe lv lw lx ly b">state</code>物体:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/8b2e3fafb3098722f2348c1694cc5feb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*llW6jbp_eActTwO8ruemyA.png"/></div></div></figure><p id="571e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中:</p><ul class=""><li id="aa4d" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">第17-23行在打开的<code class="fe lv lw lx ly b">menu</code>中样式化每个<code class="fe lv lw lx ly b">option</code>的边框、颜色、不透明度和填充。</li><li id="74e6" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">第24 - 28行显示了选择<code class="fe lv lw lx ly b">control</code>框的样式。</li><li id="ac04" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">第29 - 32行对选中的<code class="fe lv lw lx ly b">singleValue</code>进行样式化。</li></ul><p id="4689" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是样式化的<code class="fe lv lw lx ly b">Select</code>组件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/c98bf236af90891bf0d0d9b14f3c38b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*46lW_vDWyKkpoQpavqbQEg.png"/></div></div></figure><p id="1469" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些零件可以设计成:</p><ul class=""><li id="43a0" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">clearIndicator</code></li><li id="660c" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">container</code></li><li id="5906" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">control</code></li><li id="a261" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">dropdownIndicator</code></li><li id="5f66" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">group</code></li><li id="37a4" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">groupHeading</code></li><li id="f313" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">indicatorsContainer</code></li><li id="0eef" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">indicatorSeparator</code></li><li id="43ee" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">input</code></li><li id="d81e" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">loadingIndicator</code></li><li id="9760" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">loadingMessage</code></li><li id="aa77" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">menu</code></li><li id="54e0" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">menuList</code></li><li id="49b9" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">menuPortal</code></li><li id="9222" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">multiValue</code></li><li id="2c15" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">multiValueLabel</code></li><li id="98b5" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">multiValueRemove</code></li><li id="e338" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">noOptionsMessage</code></li><li id="d94f" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">option</code></li><li id="5877" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">placeholder</code></li><li id="b040" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">singleValue</code></li><li id="d194" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">valueContainer</code></li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="3c68" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">异步选择</h1><p id="34a4" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">我们可以通过设置<code class="fe lv lw lx ly b">isSearchable</code>使<code class="fe lv lw lx ly b">Select</code>组件可搜索:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="949e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果<code class="fe lv lw lx ly b">options</code>列表是远程的怎么办？</p><p id="2c4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React <code class="fe lv lw lx ly b">Select</code>提供了一个组件<code class="fe lv lw lx ly b">AsyncSelect</code>，根据用户输入动态加载选项:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="5f75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第26行调用<code class="fe lv lw lx ly b">loadOptions</code>，在第12-21行定义。该功能有两个参数，<code class="fe lv lw lx ly b">inputValue</code>和<code class="fe lv lw lx ly b">callback</code>。在上面的例子中，返回了一个承诺。或者，可以将检索到的选项传入<code class="fe lv lw lx ly b">callback</code>。这里，三秒钟的延迟清楚地显示了加载过程:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/87e19e291c46315c41b146c5ecbce3f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vCJNVZYDfNIdSTq02wBIAw.png"/></div></div></figure><p id="c8a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">三秒钟后，带有字母<code class="fe lv lw lx ly b">a</code>的选项显示在打开菜单中:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/41039edee3c4d9bd4ce068cc84579627.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K9seM-QM9gqRtvn2I6lEQw.png"/></div></div></figure><p id="c62d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">键入<code class="fe lv lw lx ly b">aa</code>，没有选项:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/c49b9f5ddd0fb98beae2979c30471e9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VKH1jG_-geeWgXsH3fEMig.png"/></div></div></figure><p id="1e63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">退格在<code class="fe lv lw lx ly b">Select</code>组件中有一个<code class="fe lv lw lx ly b">a</code>，我们可以在第26行看到<code class="fe lv lw lx ly b">cacheOptions</code>的效果。</p><p id="4ebc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用<code class="fe lv lw lx ly b">cacheOptions</code>，立即显示之前的选项。否则，又要花三秒钟来取回它们。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="6fff" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">可创建选择</h1><p id="5de8" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">如果选择不在Select的选项里呢？</p><p id="3907" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React Select提供了一个组件<code class="fe lv lw lx ly b">CreatableSelect</code>，用于根据用户输入动态创建一个选项:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="9fd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第27-33行构建了<code class="fe lv lw lx ly b">CreatableSelect</code>组件。当创建一个新项目时，它调用<code class="fe lv lw lx ly b">handleCreate</code>，这在第16-23行中定义。该函数将新创建的值添加到选项列表中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/d14230d85a50f065727c6cfb81a523ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WXRLW__dThlRd_rIfrFYXQ.png"/></div></div></figure><p id="c07b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，<code class="fe lv lw lx ly b">CreatableSelect</code>可以和Async配合使用。React Select提供了一个组件<code class="fe lv lw lx ly b">AsyncCreatableSelect</code>，用于动态加载选项并允许基于用户输入创建选项。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="ddfd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在<code class="fe lv lw lx ly b">AsyncCreatableSelect</code>组件过滤了现有的选项，并提供了一个创建选项。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/1de7b927549cd3e0641cbf6bfdb1ef6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yNKs2RwJq-65GbAm53Ua2g.png"/></div></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="8138" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">固定选项</h1><p id="9f5d" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">具有多个值的反应选择可以有一些固定的值，即它们总是被选中。</p><p id="28a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该用户界面将<code class="fe lv lw lx ly b">Banana</code>和<code class="fe lv lw lx ly b">Oranges</code>显示为固定选项。<code class="fe lv lw lx ly b">Apple</code>和<code class="fe lv lw lx ly b">Berry</code>可以删除和添加。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/a3575b75c83e8eacccc1e39035295c54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bldhIJgMfa3Ql7-YQqjUKQ.png"/></div></div></figure><p id="a040" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的代码展示了它是如何实现的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="1025" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第74 - 82行定义了带有固定选项的选择组件。</p><p id="8957" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第76行使组件动画化。当删除一个值时，该项目在动画模式下消失。</p><p id="254e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第77行定义了clear按钮，该按钮仅在有一些可删除选项时显示。</p><p id="fcc8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第78行定义了区分固定选项和可删除选项的样式。</p><p id="1c16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第52 - 70行显示了使固定选项不可删除的算法。<code class="fe lv lw lx ly b">handleChange</code>通过两个参数传入:</p><ul class=""><li id="8a44" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">inputValue</code>:当前选项</li><li id="09b7" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">被析构的<code class="fe lv lw lx ly b">{ action, removedValue }</code>:允许我们根据<code class="fe lv lw lx ly b">action</code>和<code class="fe lv lw lx ly b">removedValue</code>修改选项。</li></ul><p id="946f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是<code class="fe lv lw lx ly b">action</code>的可用值:</p><ul class=""><li id="db57" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">select-option</code>:从列表中选择一个选项。</li><li id="751e" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">deselect-option</code>:(多个)从列表中取消选择一个选项。</li><li id="958d" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">remove-value</code>:(多个)用移除按钮移除所选选项。</li><li id="e223" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">pop-value</code>:使用退格键删除选项。</li><li id="d2f0" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">set-value</code>:从没有<code class="fe lv lw lx ly b">action</code>的组件调用<code class="fe lv lw lx ly b">setValue</code>。</li><li id="445f" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">clear</code>:使用清除按钮删除所有选择的选项。</li><li id="b10c" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">create-option</code>:(可创建)创建一个新选项。</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="751a" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">结论</h1><p id="a98d" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">你感受到反应选择的力量了吗？用几行代码组成一个选择组件似乎很容易。是时候让你尝试一下了吗？</p><p id="34c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了让事情变得更有趣，你还可以在<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/understanding-the-ant-design-system-a-ui-design-for-enterprises-39afdb188b06"> Ant设计系统</a>中查看Select。</p><p id="5658" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。我希望这有所帮助。你可以在这里看到我的其他媒体出版物<a class="ae ky" href="https://medium.com/@jenniferfubook/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener"/>。</p></div></div>    
</body>
</html>