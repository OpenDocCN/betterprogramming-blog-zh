<html>
<head>
<title>JavaScript Clean Code: Emergent Design</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript干净代码:紧急设计</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/javascript-clean-code-emergent-design-c3703c79fcb6?source=collection_archive---------13-----------------------#2020-03-12">https://betterprogramming.pub/javascript-clean-code-emergent-design-c3703c79fcb6?source=collection_archive---------13-----------------------#2020-03-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a230" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">看看紧急设计的4个原则</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8fd028ba3a8357e18fe0c5a581815861.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qIxTTM8UyNHRqwn8"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@josefandiaz?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Josefa nDiaz </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="a27a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">紧急设计是系统变革的框架。它专注于交付具有商业价值的小块工作代码。它是敏捷软件开发的一部分，比传统软件开发更灵活。</p><p id="2a5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我们将看看紧急设计软件开发的四个原则。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8cee" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">紧急设计的四个规则是什么？</h1><p id="65a2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">紧急设计的四个规则很简单。他们是:</p><ul class=""><li id="cf95" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">做所有的测试。</li><li id="afa6" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">消除重复。</li><li id="b421" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">表达程序员的意图。</li><li id="0500" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">最小化类和方法的数量。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2672" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">运行所有的测试</h1><p id="bbf8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">运行测试确保我们的系统在我们做出改变后仍然按照预期运行。这个设计在理论上可能是完美的，但是在工作之后，我们可能会在系统中发现意想不到的缺陷。所以我们必须运行测试来确保我们的改变是好的。</p><p id="1939" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们必须编写易于测试的代码。这意味着代码应该是松散耦合的，这样就可以很容易地通过单元测试进行测试。松散耦合还意味着代码可以更容易地修改，因为它不会影响代码的其他部分。</p><p id="e2a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用依赖注入和抽象等依赖倒置工具来最小化JavaScript代码中的耦合。</p><p id="912d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编写测试需要低耦合和高内聚，因为编写易于测试的代码需要具备这两个特征的代码。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f2bb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">重构</h1><p id="a484" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">一旦我们有了测试，我们就可以重构而不用考虑太多破坏的事情，因为我们有测试来确保我们不会破坏任何东西。</p><p id="75d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以在重构代码时应用SOLID等优秀软件设计的原则。</p><p id="bc51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们重构时，是时候选择更好的名字，编写更小的类和方法，减少类和方法的数量，编写更具表达力的代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/f4d2d05981b9a88ced91d3dad3817345.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2veC3xX7Hgx71wZ1"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@miinyuii?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Duy Pham </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a56c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">删除重复代码</h1><p id="f64f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">当我们重构代码时，应该删除重复的代码。更少的重复代码意味着需要维护的代码更少，我们忘记更改的地方也更少。</p><p id="6747" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重复不仅仅是完全相同的代码。它们的实现也可以被复制。例如，我们可以有一个<code class="fe no np nq nr b">size</code>和<code class="fe no np nq nr b">isEmpty</code>方法用于我们自己的数据结构。</p><p id="e22b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它们如此相似，以至于我们实际上并不需要两者。我们可以只让<code class="fe no np nq nr b">isEmpty</code>返回<code class="fe no np nq nr b">size() === 0;</code>。</p><p id="8057" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以将具有重复实现的代码提取到一个公共位置。任何违反单一责任原则的东西都必须提取到它自己的类中。</p><p id="32a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，假设我们有一个邮政费率计算器来计算国际邮件费率，如下所示:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="00c4" class="nw md it nr b gy nx ny l nz oa">class PostalRateCalculator {<br/>  calculateUSRates() {</span><span id="1275" class="nw md it nr b gy ob ny l nz oa">  }</span><span id="6847" class="nw md it nr b gy ob ny l nz oa">  calculateEURates() {</span><span id="bacd" class="nw md it nr b gy ob ny l nz oa">  }<br/>}</span></pre><p id="eb40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们真的不需要两个函数，因为这两种方法之间的唯一区别是邮政费率。因此，我们可以将它们合并为一种方法，并使用不同国家的不同汇率来计算汇率，如下所示:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="fe44" class="nw md it nr b gy nx ny l nz oa">class PostalRateCalculator {<br/>  calculateRates(country) {<br/>    if (country === 'US') {</span><span id="07c4" class="nw md it nr b gy ob ny l nz oa">    } else if (country === 'UK') {</span><span id="71f9" class="nw md it nr b gy ob ny l nz oa">    }<br/>    //...<br/>  }<br/>}</span></pre><p id="c117" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，我们就不会有两个做类似事情的方法来搞乱代码。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="aa2c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">表达代码</h1><p id="5fac" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">表达性代码意味着代码易于理解。我们的代码必须清楚地传达我们的意图，这样读者就不会误解我们的意图。</p><p id="9e9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过为一切事物选择好的名字来表达。</p><p id="8618" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，为所有东西保持一个标准的命名法减少了当其他人阅读我们的代码时我们被误导的机会。</p><p id="2fab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">写得好的单元测试也很有表现力。他们应该告诉我们很多关于程序做了什么，因为我们把输入和输出都放在一个地方。此外，每个测试都有自己的描述来告诉我们更多关于它所测试的系统部分的信息。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="aa6e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">最小类和方法</h1><p id="5731" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果我们不需要代码，那么我们就不应该写它。无用或重复的代码是不好的。</p><p id="d7a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它们使我们的程序变得混乱，同时几乎没有提供任何价值。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c5cb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="5326" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">没有一种明确的方法可以使用emergent来编写我们的程序。然而，这主要归结于使用干净代码原则进行重构，然后使用单元测试来确保一切仍然正确运行。</p><p id="e1bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，我们必须像写文档一样写测试。就像普通代码一样，它们必须具有表现力。</p><p id="72b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重复代码或具有相似实现的代码可以合并成一个。</p></div></div>    
</body>
</html>