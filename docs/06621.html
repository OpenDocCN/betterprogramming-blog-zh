<html>
<head>
<title>The Right Way to Deal With Responsive Images in Web Development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Web开发中处理响应图像的正确方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-right-way-to-deal-with-responsive-images-in-web-development-3ed5b2f426e2?source=collection_archive---------10-----------------------#2020-10-19">https://betterprogramming.pub/the-right-way-to-deal-with-responsive-images-in-web-development-3ed5b2f426e2?source=collection_archive---------10-----------------------#2020-10-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7f84" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">提升您的图像处理水平</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9d6a6377d564614bf07fd07243f7ed32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UeWCxUo3cwHhrzXX"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@wx1993?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Raychan </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="26b4" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">心爱的<img/>标签</h1><p id="f88e" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">在网页中嵌入图像最简单的方法是使用经典的<code class="fe mu mv mw mx b">&lt;img&gt;</code> HTML标签:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/f183acd845e57f8bf7e6939179e7008d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AqMJCTorCreb4lSltm6Ugg.png"/></div></div></figure><p id="bfb1" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">这个管用。然而，它有一个重要的问题:无论屏幕大小如何，它都加载相同的图像。这可能会有问题，因为你不会想在一个小手机和8K屏幕上使用同一个巨大的4000 x 5120的图片。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="25d6" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">源设置到救援</h1><p id="3f5a" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">元素有一个超级有用的属性:<code class="fe mu mv mw mx b">srcset</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/61a26ad1ada3a1674779f494fee6e529.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*66iqYr3aiXTUlKv5gmtZNg.png"/></div></div></figure><p id="4f22" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated"><code class="fe mu mv mw mx b">srcset</code>属性让我们为图像定义多个来源。它可以基于固定宽度图像的设备像素密度(接下来的第一个示例)或通过媒体查询(如果您的布局是动态的，接下来的第二个示例)来工作。</p><p id="ed5c" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">在这里，<code class="fe mu mv mw mx b">src</code>是在浏览器不支持<code class="fe mu mv mw mx b">srcset</code>的情况下的后备，T5只是Internet Explorer。</p><h2 id="8992" class="ng lh it bd li nh ni dn lm nj nk dp lq mh nl nm ls ml nn no lu mp np nq lw nr bi translated">例1。</h2><p id="6616" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">如果我们知道一个图像的宽度总是320 CSS像素，可能通过<code class="fe mu mv mw mx b">width: 320px</code>在CSS中设置，那么我们可以使用下面的简单语法:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/9f184d314aced6c1ad7c28f78e9288b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tjey9Lwqlqj0dS_CZ3uj0g.png"/></div></div></figure><p id="976a" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">这是如何工作的？如果一个屏幕的物理像素值等于一个CSS像素值，那么<code class="fe mu mv mw mx b">image-320w.jpg</code>就会被加载。简单。</p><p id="62a9" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">然而，现在的显示器往往分辨率很高，所以很多像素被塞进了一英寸(每英寸像素)。在这种情况下，一切都会放大(即，显示得比它们应该占据的实际物理像素更大)。根据缩放比例，CSS像素可能不等于物理像素。</p><p id="9946" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">从上面看我们的<code class="fe mu mv mw mx b">srcset</code>就知道了。对于物理像素和CSS像素之间的2x差异，我们采用更大的图像，为最终用户提供更多细节，因此图像将显示得更好、更清晰。</p><h2 id="3d08" class="ng lh it bd li nh ni dn lm nj nk dp lq mh nl nm ls ml nn no lu mp np nq lw nr bi translated">例2。</h2><p id="3393" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">如果图像的尺寸不是静态的，您还可以通过使用<code class="fe mu mv mw mx b">srcset</code>和<code class="fe mu mv mw mx b">sizes</code>属性的组合来明确地告诉浏览器以何种视窗尺寸加载哪些图像。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/1e29ccdd00a1a10164bd481cc0a4717b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E9OTf3wGqkpJGXRJEuZKbA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/57b2be1a992ad7cded4410392b7f877d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iJm51tWilf178zAeyAvMzw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">小型设备:100%的视口</p></figure><p id="303e" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">这是如何工作的？浏览器检查来自<code class="fe mu mv mw mx b">sizes</code>属性的每一个条件。第一个匹配的将作为参考宽度，最接近该宽度的图像将从<code class="fe mu mv mw mx b">srcset</code>中获取。</p><p id="83d9" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">基于上面的例子，直到视窗宽度的<code class="fe mu mv mw mx b">40em</code>(例如，在移动电话上)，浏览器将选择<code class="fe mu mv mw mx b">100vw</code>作为参考宽度，并将基于该值从<code class="fe mu mv mw mx b">srcset</code>中选择图像。</p><p id="02cc" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">在<code class="fe mu mv mw mx b">40em</code>以上，浏览器将只占用50%的视窗宽度(<code class="fe mu mv mw mx b">50vw</code>，并以此为基础选择图像。你可能会问，“这为什么有用？”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/54248832ea3e127610aaeff8914fd876.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M7jUb59qBuOR3t3ZBL5cqQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">较大的设备:50%的视口</p></figure><p id="1e4b" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">嗯，想想不同设备上的不同布局。也许在手机上，你想显示覆盖整个视窗的图像，但在平板电脑和大显示器上，你想让它只覆盖50%。</p><p id="7699" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">我认为这是一个非常典型的用例。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="884a" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated"><picture>标签</picture></h1><p id="75d2" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">HTML标签可以用来提供不同的图片来源，根据一些条件选择最好的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/da433cbdb31f62d776e2daad4c871e26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JrdzgBGEbtd4XLFZv_r3YA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><picture> HTML标签</picture></p></figure><p id="5f38" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">如果视口至少是<code class="fe mu mv mw mx b">300px</code>，上面的例子将显示<code class="fe mu mv mw mx b">image1.jpg</code>；否则，它会显示<code class="fe mu mv mw mx b">image2.jpg</code>。</p><p id="4bb7" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">值得注意的是，<code class="fe mu mv mw mx b">&lt;picture&gt;</code>标签用于艺术指导，不应仅用于根据屏幕分辨率/像素密度切换图像。为此，我们有带有<code class="fe mu mv mw mx b">srcset</code>属性的标准<code class="fe mu mv mw mx b">&lt;img&gt;</code>标签，如上所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/54248832ea3e127610aaeff8914fd876.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M7jUb59qBuOR3t3ZBL5cqQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">iPad的正常拍摄</p></figure><h2 id="a954" class="ng lh it bd li nh ni dn lm nj nk dp lq mh nl nm ls ml nn no lu mp np nq lw nr bi translated">艺术指导</h2><p id="b3ea" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">术语<em class="ne">艺术指导</em>是指完全切换画面，从而不再显示相同的图像。</p><p id="a93b" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">苹果在iPad发布会上使用了这一技术。在较大的屏幕上，他们会显示iPad的标准照片，但在较小的屏幕上，他们会显示从<em class="ne"> </em>不同角度拍摄的iPad照片。因此，它会显示旋转，占用更少的垂直屏幕空间。聪明！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/604323e930e7a2efa2ae8a4bd32bca90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YmHe2APXcuemhWHaewcShQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">旋转的iPad。这比另一张图的高度要小！</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="5508" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">WebP和图像格式的未来</h1><p id="4159" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">使用JPG、JPEG或PNG图像是很常见的。目前，大多数图像都是以这些格式存储的。然而，在文件大小方面，我们可以做得更好，从而隐式地改善页面加载时间。</p><p id="76e8" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">我们以WebP格式为例。它由谷歌开发，提供有损和无损压缩，因此是JPG(有损)和PNG(无损)图像的绝佳替代品。</p><p id="dfa4" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">优势？速度。将JPG或PNG转换为WebP可以节省大量文件大小(在少数情况下高达50%，但通常是20%到30%)，而图像质量不会受到影响。</p><p id="cd65" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">这意味着网站可以加载得更快，从而带来更快的用户体验。</p><p id="d9d6" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">问题可能是浏览器支持。在写这篇文章的时候，几乎所有的浏览器都支持WebP格式，除了IE(反正我们也不是很在意)和Safari。</p><p id="ded8" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">通过使用<code class="fe mu mv mw mx b">picture</code>标签和<code class="fe mu mv mw mx b">type</code>属性来支持WebP和PNG/JPG，我们可以很容易地解决这个问题。</p><p id="f874" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">让我们看看代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="a3e8" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">上面的代码展示了一个具体的例子，涵盖了我们到目前为止讨论的所有内容。</p><p id="4558" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">基于浏览器对WebP的支持(或缺乏支持)，它在更大的设备上根据视窗的100%宽度或50%宽度呈现不同大小的图像(正如我们在<code class="fe mu mv mw mx b">50em</code>上面进入两列布局)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">响应和WebP支持演示</p></figure><p id="f098" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">你可以在GitHub上找到这个演示的<a class="ae ky" href="https://github.com/adamkss/responsive-images" rel="noopener ugc nofollow" target="_blank">源代码，这里是</a><a class="ae ky" href="https://responsive-images.vercel.app/" rel="noopener ugc nofollow" target="_blank">托管的网站</a>，所以你可以看到它的运行。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="b98a" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">关键要点</h1><ol class=""><li id="ada8" class="nz oa it ma b mb mc me mf mh ob ml oc mp od mt oe of og oh bi translated">为你的图像使用一个<code class="fe mu mv mw mx b">srcset</code>总是很重要的，这样你就可以在不需要获取大图像的时候节省重要的加载时间。</li><li id="a689" class="nz oa it ma b mb oi me oj mh ok ml ol mp om mt oe of og oh bi translated">HTML标签<code class="fe mu mv mw mx b">&lt;img&gt;</code>是最常被使用的，因为它支持开箱即用的<code class="fe mu mv mw mx b">srcset</code>。</li><li id="f10a" class="nz oa it ma b mb oi me oj mh ok ml ol mp om mt oe of og oh bi translated">小心使用<code class="fe mu mv mw mx b">&lt;picture&gt;</code> HTML标签。它主要用于艺术指导。然而，如果你想同时支持新旧文件格式(比如WebP ),你可以使用<code class="fe mu mv mw mx b">&lt;picture&gt;</code>标签的<code class="fe mu mv mw mx b">type</code>功能。</li><li id="f614" class="nz oa it ma b mb oi me oj mh ok ml ol mp om mt oe of og oh bi translated">Web性能优化很重要！减少资产大小(如图像)是一个完美的低挂水果，可以大大提高速度。</li><li id="31d7" class="nz oa it ma b mb oi me oj mh ok ml ol mp om mt oe of og oh bi translated">有一些很棒的SaaS(或者我应该称之为PaaS——图片即服务)产品可以动态地提供图像大小调整和格式转换，比如Cloudinary。不再需要手动调整大小和存储所有图像。这是2021年的方式！</li></ol><p id="9bcb" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">感谢您从头到尾阅读这篇文章。</p><p id="45bf" class="pw-post-body-paragraph ly lz it ma b mb mz ju md me na jx mg mh nb mj mk ml nc mn mo mp nd mr ms mt im bi translated">请记住，如果你的网站不能在三秒钟内加载，人们(从统计上来说)会放弃你的网站。优化图像尺寸是一个很好的开始。</p></div></div>    
</body>
</html>