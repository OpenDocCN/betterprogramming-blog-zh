<html>
<head>
<title>Compiling vs. Polyfilling in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的编译与多填充</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/compiling-vs-polyfilling-in-javascript-6bbc5707a253?source=collection_archive---------4-----------------------#2019-09-08">https://betterprogramming.pub/compiling-vs-polyfilling-in-javascript-6bbc5707a253?source=collection_archive---------4-----------------------#2019-09-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="48db" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">区别是什么，为什么重要？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c889a30624b35689f401a7c181890813.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mTdPlh3HjohtD7zO"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">斯科特·韦伯在Unsplash<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拍摄的照片</a></p></figure><blockquote class="kz"><p id="7406" class="la lb it bd lc ld le lf lg lh li lj dk translated">“巴别塔的目的是让你的代码使用浏览器可能还不支持的新功能，并把它转换成你所关心的任何浏览器都能理解的代码。”—<a class="ae ky" href="https://tylermcginnis.com/compiling-polyfills/" rel="noopener ugc nofollow" target="_blank">编译vs Polyfills </a>中的<a class="lk ll ep" href="https://medium.com/u/c52389e3ee63?source=post_page-----6bbc5707a253--------------------------------" rel="noopener" target="_blank">泰勒·麦金尼斯</a></p></blockquote><h1 id="aecd" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">什么是编译JavaScript？</h1><p id="8664" class="pw-post-body-paragraph me mf it mg b mh mi ju mj mk ml jx mm mn mo mp mq mr ms mt mu mv mw mx my lj im bi translated">Babel 用于编译你的代码以兼容旧版本的JavaScript(因此可以在旧版本的浏览器中工作)。</p><p id="6e69" class="pw-post-body-paragraph me mf it mg b mh mz ju mj mk na jx mm mn nb mp mq mr nc mt mu mv nd mx my lj im bi translated">编译意味着编译器(Babel)执行语法转换，但它不添加任何新的JavaScript原语。</p><p id="5d14" class="pw-post-body-paragraph me mf it mg b mh mz ju mj mk na jx mm mn nb mp mq mr nc mt mu mv nd mx my lj im bi translated">当你编译你的代码时，你正在转换它。</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="d6bf" class="lm ln it bd lo lp nl lr ls lt nm lv lw jz nn ka ly kc no kd ma kf np kg mc md bi translated">什么是JavaScript聚合填充？</h1><p id="07fa" class="pw-post-body-paragraph me mf it mg b mh mi ju mj mk ml jx mm mn mo mp mq mr ms mt mu mv mw mx my lj im bi translated">当您添加一个<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Glossary/Polyfill" rel="noopener ugc nofollow" target="_blank"> polyfill </a>时，您正在向您的JavaScript代码添加以前不存在的全新功能。</p><p id="d7e2" class="pw-post-body-paragraph me mf it mg b mh mz ju mj mk na jx mm mn nb mp mq mr nc mt mu mv nd mx my lj im bi translated">对于添加到JavaScript中的新功能，聚合填充是必需的，这些新功能不能在普通JavaScript代码中复制。</p><p id="ffba" class="pw-post-body-paragraph me mf it mg b mh mz ju mj mk na jx mm mn nb mp mq mr nc mt mu mv nd mx my lj im bi translated">对于添加到全局JavaScript名称空间中的新属性，聚合填充是必需的，因为编译器不会解释这些属性。</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="be9b" class="lm ln it bd lo lp nl lr ls lt nm lv lw jz nn ka ly kc no kd ma kf np kg mc md bi translated">你什么时候用哪个？</h1><p id="c42f" class="pw-post-body-paragraph me mf it mg b mh mi ju mj mk ml jx mm mn mo mp mq mr ms mt mu mv mw mx my lj im bi translated">归根结底是语法和属性的问题。例如，箭头函数是语法编译的，但是<code class="fe nq nr ns nt b">Array.from</code>是多填充的。</p><p id="ce00" class="pw-post-body-paragraph me mf it mg b mh mz ju mj mk na jx mm mn nb mp mq mr nc mt mu mv nd mx my lj im bi translated">通常，您需要使用聚合填充和编译来使您的代码向后兼容旧的浏览器。</p><p id="0dea" class="pw-post-body-paragraph me mf it mg b mh mz ju mj mk na jx mm mn nb mp mq mr nc mt mu mv nd mx my lj im bi translated">当支持现代浏览器时，这两者对于ES6特性都不是必需的，但是一旦下一个优秀的JavaScript特性发布，知道如何使用它是一个很好的实践；编译和/或多填充新特征。</p><h2 id="a4b4" class="nu ln it bd lo nv nw dn ls nx ny dp lw mn nz oa ly mr ob oc ma mv od oe mc of bi translated">头韵记忆法</h2><blockquote class="kz"><p id="d0b1" class="la lb it bd lc ld og oh oi oj ok lj dk translated">" C<!-- -->compile<strong class="ak"/>你干净的代码，<strong class="ak">但polyfill </strong>你漂亮的属性."——<a class="lk ll ep" href="https://medium.com/u/e5294c417caf?source=post_page-----6bbc5707a253--------------------------------" rel="noopener" target="_blank">德里克·奥斯丁·🥳博士</a></p></blockquote><figure class="om on oo op oq kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/bc227135a5a72af9f0c0d2ad67c33584.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EbtTYTGN45CM4v3D"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(照片由<a class="ae ky" href="https://unsplash.com/@samuelzeller?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">塞缪尔·泽勒</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄)</p></figure></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="6f98" class="lm ln it bd lo lp nl lr ls lt nm lv lw jz nn ka ly kc no kd ma kf np kg mc md bi translated">示例:聚合填充或编译</h1><h2 id="ba22" class="nu ln it bd lo nv nw dn ls nx ny dp lw mn nz oa ly mr ob oc ma mv od oe mc of bi translated">箭头功能</h2><p id="6156" class="pw-post-body-paragraph me mf it mg b mh mi ju mj mk ml jx mm mn mo mp mq mr ms mt mu mv mw mx my lj im bi translated">Babel可以用function关键字将箭头函数转换成常规函数，也就是说<strong class="mg iu">箭头函数可以编译</strong>。</p><h2 id="d7c6" class="nu ln it bd lo nv nw dn ls nx ny dp lw mn nz oa ly mr ob oc ma mv od oe mc of bi translated">班级</h2><p id="5196" class="pw-post-body-paragraph me mf it mg b mh mi ju mj mk ml jx mm mn mo mp mq mr ms mt mu mv mw mx my lj im bi translated">像箭头函数一样，类可以转换成常规函数(通过使用原型)，所以<strong class="mg iu">类也可以编译</strong>。</p><h2 id="55b7" class="nu ln it bd lo nv nw dn ls nx ny dp lw mn nz oa ly mr ob oc ma mv od oe mc of bi translated">承诺</h2><p id="d32b" class="pw-post-body-paragraph me mf it mg b mh mi ju mj mk ml jx mm mn mo mp mq mr ms mt mu mv mw mx my lj im bi translated">Babel无法将承诺转换成旧浏览器能够理解的原生JavaScript语法。</p><p id="e269" class="pw-post-body-paragraph me mf it mg b mh mz ju mj mk na jx mm mn nb mp mq mr nc mt mu mv nd mx my lj im bi translated">更重要的是，编译不会向全局名称空间添加像<code class="fe nq nr ns nt b">Promise</code>这样的新属性。这意味着<strong class="mg iu">承诺需要多填。</strong></p><h2 id="a4c7" class="nu ln it bd lo nv nw dn ls nx ny dp lw mn nz oa ly mr ob oc ma mv od oe mc of bi translated">解构</h2><p id="a118" class="pw-post-body-paragraph me mf it mg b mh mi ju mj mk ml jx mm mn mo mp mq mr ms mt mu mv mw mx my lj im bi translated">因为Babel可以用点(<code class="fe nq nr ns nt b">.</code>)符号将每一个结构化对象转换成正规变量，所以<strong class="mg iu">析构将被编译</strong>。</p><h2 id="5d28" class="nu ln it bd lo nv nw dn ls nx ny dp lw mn nz oa ly mr ob oc ma mv od oe mc of bi translated">包含</h2><p id="6f00" class="pw-post-body-paragraph me mf it mg b mh mi ju mj mk ml jx mm mn mo mp mq mr ms mt mu mv mw mx my lj im bi translated">Includes可以被转换成使用<code class="fe nq nr ns nt b">indexof</code>，但是编译不会添加任何新的关键字、属性或原语，所以<strong class="mg iu"> includes需要被多填充</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/5dd5334d73114255823abee5f2ac2af1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xD1sH1APcTWnJIsP"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(照片由<a class="ae ky" href="https://unsplash.com/@eskandthewood?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">西尔维奥·昆特</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄)</p></figure></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="f224" class="lm ln it bd lo lp nl lr ls lt nm lv lw jz nn ka ly kc no kd ma kf np kg mc md bi translated">大列表:多填充还是编译</h1><p id="724e" class="pw-post-body-paragraph me mf it mg b mh mi ju mj mk ml jx mm mn mo mp mq mr ms mt mu mv mw mx my lj im bi translated">这个列表只包括ES6特性，不包括像<code class="fe nq nr ns nt b">flatMap</code>这样更新的ECMAScript特性，它们也需要编译或填充。</p><h2 id="3a22" class="nu ln it bd lo nv nw dn ls nx ny dp lw mn nz oa ly mr ob oc ma mv od oe mc of bi translated">能够被编译</h2><ul class=""><li id="a369" class="os ot it mg b mh mi mk ml mn ou mr ov mv ow lj ox oy oz pa bi translated">箭头功能</li><li id="8c2b" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">异步函数</li><li id="f9c1" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">块范围的函数</li><li id="7a91" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">班级</li><li id="8a9f" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">类别属性</li><li id="84ba" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">计算属性名</li><li id="50b4" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">常数</li><li id="e1ec" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">装修工</li><li id="9ba8" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">默认参数</li><li id="22eb" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">解构</li><li id="1d63" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">模块</li><li id="e5a7" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">对象静止/展开</li><li id="8e4d" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">属性方法赋值</li></ul><h2 id="1e68" class="nu ln it bd lo nv nw dn ls nx ny dp lw mn nz oa ly mr ob oc ma mv od oe mc of bi translated">需要多填充</h2><ul class=""><li id="2651" class="os ot it mg b mh mi mk ml mn ou mr ov mv ow lj ox oy oz pa bi translated">数组缓冲器</li><li id="a276" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">数组. from</li><li id="fb19" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">数组. of</li><li id="fc20" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">数组#find</li><li id="ffb0" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">数组#findIndex</li><li id="e115" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">函数#名称</li><li id="b2d6" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">地图</li><li id="20eb" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">号码.伊斯南</li><li id="4540" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">对象.分配</li><li id="686e" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">对象.条目</li><li id="b787" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">对象.值</li><li id="5de0" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">承诺</li><li id="5ff7" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">一组</li><li id="55dc" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">字符串#包含</li><li id="aa78" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">标志</li><li id="c61b" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">WeakMap</li><li id="4dc3" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">WeakSet</li></ul><p id="f661" class="pw-post-body-paragraph me mf it mg b mh mz ju mj mk na jx mm mn nb mp mq mr nc mt mu mv nd mx my lj im bi translated"><em class="pg">来源</em>:了不起的<a class="lk ll ep" href="https://medium.com/u/c52389e3ee63?source=post_page-----6bbc5707a253--------------------------------" rel="noopener" target="_blank">泰勒·麦金尼斯</a>在他的在线课程<a class="ae ky" href="https://learn.tylermcginnis.com/courses/51206" rel="noopener ugc nofollow" target="_blank">现代Javascript </a>中，具体来说<a class="ae ky" href="https://learn.tylermcginnis.com/courses/modern-javascript/lectures/3167447" rel="noopener ugc nofollow" target="_blank">这个讲座</a>(可以在他的博客上免费<a class="ae ky" href="https://tylermcginnis.com/compiling-polyfills/" rel="noopener ugc nofollow" target="_blank">获得)在3:54。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/269c9986448ef19885af14243df5b334.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZAMyj2lxewf5fLDQ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(塞缪尔·泽勒在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄)</p></figure></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="17ac" class="lm ln it bd lo lp nl lr ls lt nm lv lw jz nn ka ly kc no kd ma kf np kg mc md bi translated">太多记不住？</h1><p id="abed" class="pw-post-body-paragraph me mf it mg b mh mi ju mj mk ml jx mm mn mo mp mq mr ms mt mu mv mw mx my lj im bi translated">如果在JavaScript中需要新的属性或原语，您就会知道有些东西需要polyfill。</p><p id="5499" class="pw-post-body-paragraph me mf it mg b mh mz ju mj mk na jx mm mn nb mp mq mr nc mt mu mv nd mx my lj im bi translated">但是，如果变化是简单的语法糖(如箭头函数)，可以使用Babel之类的工具进行编译。</p><p id="6994" class="pw-post-body-paragraph me mf it mg b mh mz ju mj mk na jx mm mn nb mp mq mr nc mt mu mv nd mx my lj im bi translated">当你有疑问时，你总是可以简单地用谷歌搜索你想做的事情和关键字polyfill，例如<a class="ae ky" href="https://www.google.com/search?q=arrow+functions+polyfill" rel="noopener ugc nofollow" target="_blank">箭头函数polyfill </a>或<a class="ae ky" href="https://www.google.com/search?q=array.from+polyfill" rel="noopener ugc nofollow" target="_blank"> array.from polyfill </a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/6626496aafb013fd37164a7bfe9aafc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y0-1_QZdfGWoPVva"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk">(Photo by <a class="ae ky" href="https://unsplash.com/@danist07?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">贝莉儿 NG</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a>)</p></figure></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="8780" class="lm ln it bd lo lp nl lr ls lt nm lv lw jz nn ka ly kc no kd ma kf np kg mc md bi translated">额外资源</h1><ul class=""><li id="327f" class="os ot it mg b mh mi mk ml mn ou mr ov mv ow lj ox oy oz pa bi translated"><a class="lk ll ep" href="https://medium.com/u/f735d3b0f2f3?source=post_page-----6bbc5707a253--------------------------------" rel="noopener" target="_blank"> David Gilbertson </a> <a class="ae ky" href="https://medium.com/hackernoon/polyfills-everything-you-ever-wanted-to-know-or-maybe-a-bit-less-7c8de164e423" rel="noopener">深入探讨了</a> polyfills和transpiling(编译)。</li><li id="1f94" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated">官方<a class="ae ky" href="https://babeljs.io/docs/en/" rel="noopener ugc nofollow" target="_blank">巴别塔文档</a>对理解编译很有用。</li><li id="d03c" class="os ot it mg b mh pb mk pc mn pd mr pe mv pf lj ox oy oz pa bi translated"><a class="lk ll ep" href="https://medium.com/u/f0cddc899d04?source=post_page-----6bbc5707a253--------------------------------" rel="noopener" target="_blank"> Remy Sharp </a> <a class="ae ky" href="https://remysharp.com/2010/10/08/what-is-a-polyfill" rel="noopener ugc nofollow" target="_blank">早在2010年就创造了polyfill </a>这个术语，他是这样解释的:</li></ul><blockquote class="pj pk pl"><p id="5a7d" class="me mf pg mg b mh mz ju mj mk na jx mm pm nb mp mq pn nc mt mu po nd mx my lj im bi translated">把浏览器想象成一堵有裂缝的墙。这些聚合填充物有助于消除裂缝，给我们提供一个光滑的浏览器界面。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pp"><img src="../Images/867f6473ad27cd78989d9f5b4e9a9fe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lyr6b-a-7pPckS75"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(Pierre chtel-Innocenti在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片)</p></figure></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><p id="50f4" class="pw-post-body-paragraph me mf it mg b mh mz ju mj mk na jx mm mn nb mp mq mr nc mt mu mv nd mx my lj im bi translated"><a class="ae ky" href="https://www.linkedin.com/in/derek-austin/" rel="noopener ugc nofollow" target="_blank">Derek Austin</a>博士是《职业编程:如何在6个月内成为一名成功的6位数程序员 》一书的作者，该书现已在亚马逊上架。</p></div></div>    
</body>
</html>