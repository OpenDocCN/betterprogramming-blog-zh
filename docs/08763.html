<html>
<head>
<title>Write Clean Code Using JavaScript Object Destructuring</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript对象析构编写干净的代码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/write-clean-code-using-javascript-object-destructuring-3551302130e7?source=collection_archive---------2-----------------------#2021-06-09">https://betterprogramming.pub/write-clean-code-using-javascript-object-destructuring-3551302130e7?source=collection_archive---------2-----------------------#2021-06-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cef5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">比较传统的和ES6的析构来解包JavaScript中的值</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/84a54d83690419ea35d3c761311f55da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3sYBDntKaXLOAG44-KgbGA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@shauste" rel="noopener ugc nofollow" target="_blank">肖斯特</a>在<a class="ae ky" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="5326" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将使用ES6的析构赋值语法来比较传统方法和新方法。该语法允许您从复杂的对象和数组中解包值。这可以用来编写干净的代码，肯定会为您节省一些行。</p><p id="d0f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们将讨论对象析构。然后我们将继续讨论数组。</p><blockquote class="lv"><p id="e8c5" class="lw lx it bd ly lz ma mb mc md me lu dk translated"><em class="mf">"</em><strong class="ak"><em class="mf">析构赋值</em> </strong> <em class="mf">语法是一个JavaScript表达式，它可以将数组中的值或对象中的属性解包到不同的变量中。"— </em> <a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" rel="noopener ugc nofollow" target="_blank"> <em class="mf"> MDN网络文档</em> </a></p></blockquote></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="fa31" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">对象析构</h1><p id="c510" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">让我们以客户为例。<code class="fe nk nl nm nn b">customer</code>对象有类似<code class="fe nk nl nm nn b">name</code>的属性和类似<code class="fe nk nl nm nn b">address</code>的嵌套属性:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">客户对象</p></figure><h2 id="1755" class="nq mo it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">基本变量赋值</h2><p id="4266" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">在传统方法中，我们会使用<code class="fe nk nl nm nn b">.(dot)</code>符号或<code class="fe nk nl nm nn b">user[key-name]</code>来检索数据:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">无析构赋值的基本变量赋值</p></figure><p id="43d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个两行的工作，但是我们可以用下面的一行来完成:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带析构赋值的基本变量赋值</p></figure><p id="52f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想用一个不同的名字解包变量，这也是可能的。请注意，属性名称总是在左侧:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">分配给新的变量名</p></figure><h2 id="54f8" class="nq mo it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">为声明的变量赋值</h2><p id="186e" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">几乎是同样的过程，但是语法有点不同。我们必须在赋值语句周围使用<code class="fe nk nl nm nn b">()</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">为声明的变量赋值</p></figure><p id="bc88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为什么要加<code class="fe nk nl nm nn b">()</code>？<strong class="lb iu"> </strong>因为左边的<code class="fe nk nl nm nn b">{</code>被认为是块而不是对象文字。如果您省略<code class="fe nk nl nm nn b">()</code>，您将得到一个错误:</p><pre class="kj kk kl km gt oc nn od oe aw of bi"><span id="213f" class="nq mo it nn b gy og oh l oi oj">{ name, email } = customer;<br/>                ^</span><span id="02e2" class="nq mo it nn b gy ok oh l oi oj">SyntaxError: Unexpected token '='</span></pre><h2 id="0591" class="nq mo it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">嵌套对象</h2><p id="3e31" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">很方便，对吧？这是基本的用例。如果您想访问像<code class="fe nk nl nm nn b">city</code>和<code class="fe nk nl nm nn b">country</code>这样的属性，您必须一次检查一个键:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">无析构赋值的嵌套对象赋值</p></figure><p id="1ea0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是如果你使用对象析构，你可以写在一行中。要访问嵌套对象，我们必须在根键后使用另一个<code class="fe nk nl nm nn b">{}</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带有析构赋值的嵌套对象赋值</p></figure><h2 id="6c3e" class="nq mo it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">使用默认值进行析构</h2><p id="9faa" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">想象一下这样一种情况，<code class="fe nk nl nm nn b">customer</code>对象有一个名为<code class="fe nk nl nm nn b">married</code>的属性。选项有<code class="fe nk nl nm nn b">yes</code>或<code class="fe nk nl nm nn b">no</code>，但是有些客户不提供该字段的值。所以我们必须给它赋值。否则，它将成为<code class="fe nk nl nm nn b">undefined</code>。在没有析构的情况下，将按以下方法处理这种情况:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在不析构赋值的情况下赋值默认值</p></figure><p id="d8d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是有了析构赋值，我们可以在一行中处理它。可读性更好，我们可以删除代码中的<code class="fe nk nl nm nn b">if</code>语句:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用析构赋值来赋值默认值</p></figure><h2 id="4b20" class="nq mo it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">在对象析构中使用rest</h2><p id="f2ea" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated"><code class="fe nk nl nm nn b">rest</code>语法将收集析构模式尚未挑选出的剩余可枚举属性键。注意<code class="fe nk nl nm nn b">rest</code>不是一个关键字。您可以使用任何带三个点的变量名。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在对象析构中使用rest</p></figure><h2 id="ade2" class="nq mo it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">处理空对象</h2><p id="5984" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">如果那个对象是<code class="fe nk nl nm nn b">null</code>，如果我们破坏它，它会产生一个错误。但这也是可以避免的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">处理空对象</p></figure><pre class="kj kk kl km gt oc nn od oe aw of bi"><span id="a46a" class="nq mo it nn b gy og oh l oi oj">let { name, email } = getCustomer();<br/>      ^<br/><br/>TypeError: Cannot destructure property `name` of 'undefined' or 'null'.</span></pre><p id="7436" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了处理这样的情况，我们可以使用<code class="fe nk nl nm nn b">OR</code>操作符(<code class="fe nk nl nm nn b">||</code>)让<code class="fe nk nl nm nn b">null</code>对象返回到一个空对象:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">处理空对象—错误</p></figure><h2 id="8a37" class="nq mo it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">析构函数参数</h2><p id="60e8" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">我们可以析构传递给函数的对象。首先，让我们看看如何在不破坏的情况下完成:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">函数参数</p></figure><p id="fe3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用析构，我们可以编写如下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">析构函数参数</p></figure></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="19f5" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">数组析构</h1><p id="d3fb" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">对象析构中的所有语法也可以应用于数组。除此之外，数组析构还有一些很酷的特性。让我们通过定义一个<code class="fe nk nl nm nn b">fruits</code>数组来讨论它们:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">水果阵列</p></figure><h2 id="346d" class="nq mo it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">基本数组析构</h2><p id="4472" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">在没有析构赋值的情况下，我们需要像这样通过索引来访问它们:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按索引赋值</p></figure><p id="4877" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是使用析构赋值，我们可以在一行中轻松地声明和赋值变量:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用析构赋值来赋值</p></figure><h2 id="12f3" class="nq mo it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">跳过项目并分配休息</h2><p id="ac1d" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">想象一下，如果第一项是你最喜欢的水果，第三和第四项是你朋友最喜欢的水果。你需要把它们赋给两个变量。所以我们需要跳过数组中的第二项。在这种情况下，<code class="fe nk nl nm nn b">,</code>开始发挥作用:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">跳过项目并分配休息</p></figure><p id="71d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用<code class="fe nk nl nm nn b">,</code>跳过数组中任意数量的项目。</p><h2 id="ed7a" class="nq mo it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">使用析构赋值交换值</h2><p id="3fae" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">好，现在你想交换这些变量。在没有析构赋值的情况下，我们必须声明第三个变量并交换值。但是有了析构赋值，就很容易了。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">交换值</p></figure></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="247c" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">结论</h1><p id="080e" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">感谢阅读。我相信这篇文章可以让你的代码更简单，可读性更好。</p><h2 id="d894" class="nq mo it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">参考</h2><ul class=""><li id="410d" class="ol om it lb b lc nf lf ng li on lm oo lq op lu oq or os ot bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" rel="noopener ugc nofollow" target="_blank">销毁作业</a></li><li id="63f7" class="ol om it lb b lc ou lf ov li ow lm ox lq oy lu oq or os ot bi translated"><a class="ae ky" href="https://www.freecodecamp.org/news/array-and-object-destructuring-in-javascript/" rel="noopener ugc nofollow" target="_blank">如何在JavaScript中使用数组和对象析构</a></li><li id="0eaa" class="ol om it lb b lc ou lf ov li ow lm ox lq oy lu oq or os ot bi translated"><a class="ae ky" href="https://www.javascripttutorial.net/es6/javascript-object-destructuring/" rel="noopener ugc nofollow" target="_blank"> JavaScript对象析构</a></li></ul></div></div>    
</body>
</html>