<html>
<head>
<title>The Ultimate TypeScript Development Configuration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">最终的TypeScript开发配置</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/ultimate-typescript-development-configuration-4ecf9f22686?source=collection_archive---------4-----------------------#2019-07-31">https://betterprogramming.pub/ultimate-typescript-development-configuration-4ecf9f22686?source=collection_archive---------4-----------------------#2019-07-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="36e2" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">一个好的起点</h2><div class=""/><div class=""><h2 id="7023" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">如何使用ts-node-dev、ESLint with Airbnb style guide、Prettier和TypeScript进行开发配置</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/a344fa2c0a62b17f08d0cdeea3b78c21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4oFpzzAu_bvQHAkfiTovbA.png"/></div></div></figure><p id="9fa0" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><a class="ae lw" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> TypeScript </a>正迅速成为最常用、最受喜爱以及<a class="ae lw" href="https://redmonk.com/sogrady/2019/07/18/language-rankings-6-19/?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=language-rankings-6-19" rel="noopener ugc nofollow" target="_blank">最流行的</a>语言之一。</p><p id="b79d" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">然而，为TS开发建立一个高效的工作空间可能是一件麻烦的事情。本指南揭示了使用TypeScript进行现代编程的最令人沮丧却又最重要的部分之一。</p><p id="e4e3" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">本指南中使用的所有代码都可以在<a class="ae lw" href="https://gitlab.com/colegawin/ts-ultimate" rel="noopener ugc nofollow" target="_blank"> GitLab </a>上获得。</p><p id="7150" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在本指南中，我将使用<a class="ae lw" href="https://yarnpkg.com/" rel="noopener ugc nofollow" target="_blank">纱线</a>。与<a class="ae lw" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm </a>相比，它的多功能性、速度和性能是我选择的软件包管理器。</p><p id="ee18" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我使用<a class="ae lw" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>作为我的IDE，所以我将首先设置用于TypeScript开发的VS代码。可以跳过这一部分，继续第2部分。</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="e836" class="me mf iq bd mg mh mi mj mk ml mm mn mo kf mp kg mq ki mr kj ms kl mt km mu mv bi translated">第1部分:VS代码设置</h1><p id="ab2d" class="pw-post-body-paragraph la lb iq lc b ld mw ka lf lg mx kd li lj my ll lm ln mz lp lq lr na lt lu lv ij bi translated">这些是我在VS代码中用于TypeScript开发的扩展:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nb nc l"/></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">让我知道，如果你认为我错过了什么，或者有任何扩展“添加”😃。</p></figure><p id="c802" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我在VS代码中使用的一些个人选择:</p><ul class=""><li id="85b2" class="nh ni iq lc b ld le lg lh lj nj ln nk lr nl lv nm nn no np bi translated"><a class="ae lw" href="https://marketplace.visualstudio.com/items?itemName=monokai.theme-monokai-pro-vscode" rel="noopener ugc nofollow" target="_blank"> Monokai Pro </a>:“专业的主题和匹配的图标，来自Monokai原始配色方案的作者。”(最佳色彩主题imo。)</li><li id="d228" class="nh ni iq lc b ld nq lg nr lj ns ln nt lr nu lv nm nn no np bi translated"><a class="ae lw" href="https://marketplace.visualstudio.com/items?itemName=vscode-icons-team.vscode-icons" rel="noopener ugc nofollow" target="_blank">vs Code-Icons</a>:Visual Studio代码的图标。(VS代码imo的最佳图标集。)</li><li id="2fb7" class="nh ni iq lc b ld nq lg nr lj ns ln nt lr nu lv nm nn no np bi translated"><a class="ae lw" href="https://marketplace.visualstudio.com/items?itemName=natqe.reload" rel="noopener ugc nofollow" target="_blank">重新加载</a>:在状态栏的右下角增加一个重新加载按钮。(当VS代码决定是时候变得时髦时。)</li></ul><p id="489a" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">将这些行添加到您的VS代码<code class="fe nv nw nx ny b">settings.json</code>:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="4490" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这使得<a class="ae lw" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a>自动修复和<a class="ae lw" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">更漂亮</a>自动格式化。</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="1744" class="me mf iq bd mg mh mi mj mk ml mm mn mo kf mp kg mq ki mr kj ms kl mt km mu mv bi translated">第2部分:项目配置</h1><p id="3a30" class="pw-post-body-paragraph la lb iq lc b ld mw ka lf lg mx kd li lj my ll lm ln mz lp lq lr na lt lu lv ij bi translated">让我们首先创建一个目录。为此，我们称之为<code class="fe nv nw nx ny b">ts-ultimate</code>。</p><pre class="kp kq kr ks gt nz ny oa ob aw oc bi"><span id="c9ad" class="od mf iq ny b gy oe of l og oh">mkdir ts-ultimate</span></pre><p id="305c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">当我们在做的时候，运行<code class="fe nv nw nx ny b">npm init</code>。</p><p id="21eb" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在该目录中，创建一个<code class="fe nv nw nx ny b">src</code>文件夹。这是您的TS/JS文件将要存放的地方。在里面创建一个<code class="fe nv nw nx ny b">index.ts</code>文件。</p><h2 id="60dc" class="od mf iq bd mg oi oj dn mk ok ol dp mo lj om on mq ln oo op ms lr oq or mu iw bi translated">安装TypeScript和ts-node-dev</h2><p id="749f" class="pw-post-body-paragraph la lb iq lc b ld mw ka lf lg mx kd li lj my ll lm ln mz lp lq lr na lt lu lv ij bi translated">接下来，我们将安装TypeScript(当然)和<a class="ae lw" href="https://github.com/TypeStrong/ts-node" rel="noopener ugc nofollow" target="_blank"> ts-node </a>。</p><pre class="kp kq kr ks gt nz ny oa ob aw oc bi"><span id="af1a" class="od mf iq ny b gy oe of l og oh">yarn add typescript ts-node-dev —-dev</span></pre><p id="94c1" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><code class="fe nv nw nx ny b">ts-node-dev</code>为TypeScript启用REPL，自动重启，这使我们能够看到我们的TypeScript代码实时工作，无需编译(想想<a class="ae lw" href="https://www.npmjs.com/package/nodemon" rel="noopener ugc nofollow" target="_blank"> nodemon </a>或<a class="ae lw" href="https://www.npmjs.com/package/node-dev" rel="noopener ugc nofollow" target="_blank"> node-dev </a>，但用于TypeScript)。</p><p id="c948" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">将这些包保存到<code class="fe nv nw nx ny b">devDependencies</code>,因为它们仅用于开发目的。</p><h2 id="351f" class="od mf iq bd mg oi oj dn mk ok ol dp mo lj om on mq ln oo op ms lr oq or mu iw bi translated">ESLint、扩展和插件</h2><p id="0e2a" class="pw-post-body-paragraph la lb iq lc b ld mw ka lf lg mx kd li lj my ll lm ln mz lp lq lr na lt lu lv ij bi translated">我们还需要ESLint和一些扩展和插件</p><pre class="kp kq kr ks gt nz ny oa ob aw oc bi"><span id="2465" class="od mf iq ny b gy oe of l og oh">yarn add eslint <!-- -->@typescript-eslint/eslint-plugin @typescript-eslint/parser eslint-config-airbnb eslint-config-prettier eslint-plugin-prettier prettier <!-- -->—-dev</span></pre><p id="18d8" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">将这些添加到一个<code class="fe nv nw nx ny b">.eslintrc.js</code>文件中，如下所示:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nb nc l"/></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">**准系统示例，请注意* *</p></figure><h2 id="686a" class="od mf iq bd mg oi oj dn mk ok ol dp mo lj om on mq ln oo op ms lr oq or mu iw bi translated">配置更漂亮</h2><p id="1063" class="pw-post-body-paragraph la lb iq lc b ld mw ka lf lg mx kd li lj my ll lm ln mz lp lq lr na lt lu lv ij bi translated">这是我个人配置的比较漂亮的:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nb nc l"/></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">不要想入非非。请使用分号。</p></figure><p id="6987" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">现在，打开你原来的<code class="fe nv nw nx ny b">package.json</code>。</p><p id="2f4d" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">加一个<code class="fe nv nw nx ny b">script</code>叫<code class="fe nv nw nx ny b">lint</code>。我们将使用这个脚本来lint我们的TS/JS文件。</p><pre class="kp kq kr ks gt nz ny oa ob aw oc bi"><span id="133f" class="od mf iq ny b gy oe of l og oh">"lint": "eslint --fix ./src/*"</span></pre><p id="8a79" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这告诉ESLint CLI lint位于<code class="fe nv nw nx ny b">src</code>目录中的所有文件，并修复它能够修复的任何问题。请注意，<em class="os">大多数问题你必须自己解决。</em></p><p id="afdf" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在您的<code class="fe nv nw nx ny b">ts-ultimate</code>目录中运行<code class="fe nv nw nx ny b">yarn lint</code>，应该不会发现任何错误！</p><p id="1f99" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">但是，如果您在<code class="fe nv nw nx ny b">src</code>目录中没有文件，您可能会得到一个错误消息:“没有匹配该模式的文件”。这是预期的行为，因此您可以忽略此错误。</p><p id="7657" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如果你使用的是VS代码，这将被自动集成到ESLint和更漂亮的插件中，所以大多数错误会在编辑时显示在你的工作区中。</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="8130" class="me mf iq bd mg mh mi mj mk ml mm mn mo kf mp kg mq ki mr kj ms kl mt km mu mv bi translated">第3部分:不编译的实时更新</h1><p id="3b37" class="pw-post-body-paragraph la lb iq lc b ld mw ka lf lg mx kd li lj my ll lm ln mz lp lq lr na lt lu lv ij bi translated">为了完成这个并不令人畏惧的任务，我们将使用ts-node-dev。</p><p id="d619" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">根据其npm自述文件，ts-node-dev“在任何所需文件发生更改时重新启动目标节点进程，但在重新启动之间共享TypeScript编译进程。”</p><p id="b30c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">基本上，这意味着我们将能够自动重新加载我们的类型脚本文件，而不需要等待<code class="fe nv nw nx ny b">tsc</code>来编译它。</p><p id="b6ae" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">让我们创建一个使用nodemon的开发脚本:</p><pre class="kp kq kr ks gt nz ny oa ob aw oc bi"><span id="3ad9" class="od mf iq ny b gy oe of l og oh">"dev": "ts-node-dev --respawn --transpileOnly src/index.ts"</span></pre><p id="f7d8" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">…和一个<code class="fe nv nw nx ny b">dev:debug</code>脚本:</p><pre class="kp kq kr ks gt nz ny oa ob aw oc bi"><span id="5b87" class="od mf iq ny b gy oe of l og oh">"dev:debug": "ts-node-dev --inspect=4321 --respawn --transpileOnly src/index.ts"</span></pre><p id="8679" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><code class="fe nv nw nx ny b">inspect</code>标志通知ts-node-dev将一个<em class="os">调试器</em>附加到VS代码将监听的端口<code class="fe nv nw nx ny b">4321</code>(这个数字无关紧要)上的进程。</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="d342" class="me mf iq bd mg mh mi mj mk ml mm mn mo kf mp kg mq ki mr kj ms kl mt km mu mv bi translated">第4部分:Visual Studio代码调试</h1><p id="1488" class="pw-post-body-paragraph la lb iq lc b ld mw ka lf lg mx kd li lj my ll lm ln mz lp lq lr na lt lu lv ij bi translated">使用VS代码，我们可以向我们的TypeScript代码添加断点，以便在这些点检查和调试我们的代码。</p><p id="d622" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">转到你的<code class="fe nv nw nx ny b">ts-ultimate</code>目录，在里面创建一个名为<code class="fe nv nw nx ny b">launch.json</code>的文件。</p><pre class="kp kq kr ks gt nz ny oa ob aw oc bi"><span id="e443" class="od mf iq ny b gy oe of l og oh">mkdir .vscode<br/>cd .vscode<br/>touch launch.json</span></pre><p id="e7b1" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">将以下内容粘贴到您的<code class="fe nv nw nx ny b">launch.json</code>中:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="6e46" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这创建了一个调试配置，它将在运行时附加到<code class="fe nv nw nx ny b">dev:debug</code>脚本。</p><p id="53ca" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">为此，首先运行<code class="fe nv nw nx ny b">dev:debug</code>脚本。</p><pre class="kp kq kr ks gt nz ny oa ob aw oc bi"><span id="6fc9" class="od mf iq ny b gy oe of l og oh">yarn dev:debug</span></pre><p id="e79f" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">运行这个脚本后，打开debug选项卡，在顶部导航栏中，单击<em class="os"> Node: Nodemon </em>旁边的play按钮。</p><p id="1238" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">当您添加断点时，VS代码现在应该能够调试您的脚本了。</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="03b9" class="me mf iq bd mg mh mi mj mk ml mm mn mo kf mp kg mq ki mr kj ms kl mt km mu mv bi translated">结论</h1><p id="bdb1" class="pw-post-body-paragraph la lb iq lc b ld mw ka lf lg mx kd li lj my ll lm ln mz lp lq lr na lt lu lv ij bi translated">恭喜你走到这一步！现在，您已经拥有了一个超级强大的TypeScript开发环境，其中包含ESLint和Airbnb风格指南以及更漂亮的集成、实时重新加载和动态VS代码调试。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ot"><img src="../Images/c1268fcf8cf130c826c2ee2e22345e8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eRSBSnKslszUIwdzOLMQ7Q.png"/></div></div></figure></div></div>    
</body>
</html>