<html>
<head>
<title>Introducing A New Cross-Cutting Architecture Diagram: The Critical Path</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">引入一个新的横切架构图:关键路径</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/introducing-a-new-cross-cutting-architecture-diagram-the-critical-path-62d75980bd1f?source=collection_archive---------4-----------------------#2022-05-04">https://betterprogramming.pub/introducing-a-new-cross-cutting-architecture-diagram-the-critical-path-62d75980bd1f?source=collection_archive---------4-----------------------#2022-05-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ee12" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这个新的体系结构图跨越了C4模型的1-3级，为您提供了最快的系统视图</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5f250281379c668a366b35cdc8e5a9cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dDOEYkrsx-MKW88Sx5LL-Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/s/photos/diagram?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae ky" href="https://unsplash.com/@charlesdeluvio?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> charlesdeluvio </a>拍摄的照片</p></figure><p id="ea0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">架构图是一个奇迹。它们有助于在您和您的应用程序的利益相关者之间创建关于应用程序架构、业务流程和数据流的共同理解。</p><p id="2fe3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大约一年前，我写了一篇关于<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/solutions-architect-tips-the-5-types-of-architecture-diagrams-eb0c11996f9e"> 5种架构图</a>的文章，描述了我们今天使用的许多图。它向您展示了您应该如何以及为什么创建类似于<em class="lv">流程</em>、<em class="lv">服务</em>、<em class="lv">角色</em>、<em class="lv">基础设施</em>和<em class="lv">开发人员</em>图表的图表。</p><p id="c3f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它们松散地适应于用于绘制软件架构的c4模型。有细微的差异，两者都有助于以不同的方式推动你的应用程序的重要信息。</p><p id="cb01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有一天，我正在为一个准备上线的应用程序准备桌面练习，我正在通读我的架构图列表。但是缺少了一些东西。</p><p id="1727" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我需要一张显示系统关键路径的图表，这样我就可以准备一个真实的灾难场景。概括架构的东西，但也足够具体，给我足够的细节来知道我的应用程序中的断点在哪里。</p><p id="61cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在另一篇文章中提到的图表都没有涵盖这种情况。我需要一种新的类型。</p><p id="b667" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我需要关键路径图。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1ec7" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">概观</h1><p id="3817" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">关键路径图是你整个生态系统的地图。它从一个系统到另一个系统跟踪主要业务流程的数据流。所有的跳跃、扇出、网钩等都被记录下来，这样你就可以很容易地识别故障点。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/419ca901ec74aa79953b1fb05078a0e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*q4U1c430rx9rqFsK.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><em class="nb">关键路径图示例</em></p></figure><p id="7626" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这个图表，您可以跟踪整个系统的数据。它跟踪数据在应用程序内部是如何传输的，并跟踪系统之间的所有跳跃。如果一个主要的业务流程导致3或4个应用程序被更新，这是一个完美的图表来说明它。</p><h2 id="d52c" class="nc me it bd mf nd ne dn mj nf ng dp mn li nh ni mp lm nj nk mr lq nl nm mt nn bi translated"><strong class="ak">观众</strong></h2><p id="719c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这种类型的图表对每个人都有点意义。它从上到下都有细节，这对支持人员、您的产品团队和开发人员来说是无价的。</p><h2 id="224c" class="nc me it bd mf nd ne dn mj nf ng dp mn li nh ni mp lm nj nk mr lq nl nm mt nn bi translated"><strong class="ak">注意事项</strong></h2><p id="93ba" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">您不需要将每个API的所有细节都放在关键路径图中。您应该对相似的端点进行归纳和分组。如果您有一组端点在技术上遵循相同的流程(例如，<em class="lv">，API Gateway to Lambda to dynamo db to dynamo db streams</em>)，您可以一次性包含该模式。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1e3f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">数据流</h1><p id="d51b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">当谈到数据流时，我指的是<em class="lv">业务流程在系统中遵循的路径。</em>如果我们以<a class="ae ky" href="https://github.com/allenheltondev/gopher-holes-unlimited" rel="noopener ugc nofollow" target="_blank"> Gopher Holes Unlimited </a>为例，我们可以看到当一个新的Gopher被添加到系统中时会发生什么。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/97f22669c95ed59e1d66c2ed4c719ef1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*K7QCrLOVkUal-hnn.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><em class="nb">添加新地鼠的数据流</em></p></figure><h2 id="a531" class="nc me it bd mf nd ne dn mj nf ng dp mn li nh ni mp lm nj nk mr lq nl nm mt nn bi translated">成分</h2><ul class=""><li id="6a3b" class="np nq it lb b lc mv lf mw li nr lm ns lq nt lu nu nv nw nx bi translated"><strong class="lb iu">发起方</strong> —业务流程或数据流开始的地方。在图中表示为<em class="lv">星</em></li><li id="1b6c" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><strong class="lb iu">应用</strong> —在生态系统中发挥作用的独特独立应用<br/> - <strong class="lb iu">已知应用</strong> —您拥有或知道其内部结构的应用。在图中表示为<em class="lv">空心框<br/>-</em>-<strong class="lb iu">第三方应用</strong>-你不拥有也不知道它们如何工作的应用。在图中表示为<em class="lv">黑盒</em></li><li id="7833" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><strong class="lb iu">数据流</strong> —一系列连接的线条，显示数据通过系统的进程。由用于异步调用的<em class="lv">虚线</em>和用于同步调用的<em class="lv">实线</em>表示。当显示多个数据流时，最好按颜色组织它们。</li><li id="80b0" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><strong class="lb iu">基础设施</strong> —对于已知的应用程序，这显示了关于应用程序如何构建以及当数据流经系统时哪些服务操纵数据的一般细节。由<em class="lv">所涉及的服务的图像</em>表示。</li><li id="9448" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><strong class="lb iu"> UI交互</strong>——填写表格或执行搜索等通常会启动数据流的操作。由带有标签的<em class="lv">矩形表示</em></li></ul><p id="e010" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们上面的例子中，数据流的<em class="lv">发起者</em>开始于“添加新的地鼠<strong class="lb iu">”</strong><em class="lv">UI交互</em>。对于这个业务流程，交互是UI中的一个向导，引导用户为一个gopher添加所有必要的数据元素。当我们追踪箭头时，我们从星星开始。</p><p id="274a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该流程使用搜索机制来寻找现有的地鼠。该搜索端点使用<a class="ae ky" href="https://aws.amazon.com/appsync/" rel="noopener ugc nofollow" target="_blank"> AppSync </a>从DynamoDB(一个辅助Lambda函数)中查找地鼠，并调用国家啮齿动物登记处的API。</p><p id="50db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦数据被提交，它将通过主要的数据接收流程，从API Gateway到DynamoDB，再到DynamoDB流，再到Step函数(这种模式在本文的<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/build-better-serverless-apis-by-going-storage-first-597784f8f399">中有所描述)。</a></p><p id="52ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦完成，一个SNS主题就会发布一条消息，这条消息被<a class="ae ky" href="https://zapier.com/" rel="noopener ugc nofollow" target="_blank">扎皮尔</a>接收，然后将数据传递给<em class="lv">第三方应用</em>恶意猎人集体和小动物保护协会。它还向国家啮齿动物登记处发布数据，后者通过自动扩展的EC2车队上的ALB接收数据。</p><p id="4a29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦数据通过社交网络到达集成商，我们的数据流就完成了。通过追踪箭头，我们看到当添加一个新的gopher时，四个系统被更新。<em class="lv">听起来像是一个重要的数据流！</em></p><p id="7374" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个业务流程是为什么关键路径图很重要的一个很好的例子。它确保您可以看到最重要的数据流。还是最脆弱的。还是最忙的。构建关键路径图将向您展示每个服务数据经过的地方，从而更容易在问题变成问题之前隔离问题区域。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b7d4" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">让它互动</h1><p id="06bc" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">将所有的主要数据流放在同一个图上会使它看起来密集而复杂。这会让你很难理解，并且显得过于复杂。这可能会让人们不再试图弄清楚到底发生了什么。</p><p id="b1e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，它也有助于显示应用程序中复杂、高流量或<a class="ae ky" href="https://aws.amazon.com/getting-started/fundamentals-core-concepts/#Reliability" rel="noopener ugc nofollow" target="_blank">大爆炸半径</a>的区域。表明数据密度很重要，<em class="lv">但并不总是</em>。</p><p id="227b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也就是说，让你的关键路径图具有交互性是让它看起来更简单、更容易理解的关键。</p><p id="a137" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在一个名为<a class="ae ky" href="https://www.diagrams.net/" rel="noopener ugc nofollow" target="_blank">diagrams.net</a>(以前的draw.io)的免费应用程序中绘制我所有的图表。当构建关键路径图时，我将每个数据流放在它自己的层中。然后，我在键中添加按钮来切换层的可见性，使得显示/隐藏整个流变得容易。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/d078dee34d1361f4296d1b2f4003dad7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gxvPOS5skuQ0eL_m.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><em class="nb">关键路径图关键点</em></p></figure><p id="f5e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些按钮位于<em class="lv">键</em>中，因此它们被合并在一个地方。图表的使用者可以单击一个按钮来隐藏所有的数据流线，或者再次单击它来恢复。Diagrams.net提供了一个<a class="ae ky" href="https://www.diagrams.net/blog/interactive-diagram-layers" rel="noopener ugc nofollow" target="_blank">完整的一步一步的教程</a>，教你如何创建图层以及制作显示和隐藏图层的按钮。</p><p id="dcf3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要查看互动版的地鼠洞无限关键路径图，<a class="ae ky" href="https://readysetcloud.s3.amazonaws.com/GHU+-+Critial+Data+Paths.html" rel="noopener ugc nofollow" target="_blank">点击这里</a>。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="cdda" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">用例</h1><p id="f4fa" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">关键路径图有几个用例。</p><ul class=""><li id="9061" class="np nq it lb b lc ld lf lg li oe lm of lq og lu nu nv nw nx bi translated"><strong class="lb iu">系统图</strong> —列出您的生态系统中涉及的所有应用程序，以及它们是如何耦合的</li><li id="e018" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><strong class="lb iu">灾难规划</strong> —如果发生灾难，识别潜在的瓶颈和高爆炸半径区域</li><li id="cfbd" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><strong class="lb iu">架构图Lite </strong> —显示了正在使用的架构类型。Gopher Holes Unlimited是一个无服务器应用程序，国家啮齿动物登记处是一个容器化的自动缩放ec2应用程序，等等…</li></ul><p id="2100" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些用例中的每一个对于构建生产准备计划都至关重要。有了关键路径图，所有的部分都摆在你面前，并以一种既概括又详述数据如何从A点到b点的方式呈现。</p><blockquote class="oh"><p id="d61b" class="oi oj it bd ok ol om on oo op oq lu dk translated">没有所有的碎片，你无法完成一个拼图。</p></blockquote><p id="9387" class="pw-post-body-paragraph kz la it lb b lc or ju le lf os jx lh li ot lk ll lm ou lo lp lq ov ls lt lu im bi translated">与C4模型相比，这种类型的架构图包含了前三个层次的元素(<em class="lv">上下文</em>、<em class="lv">容器</em>和<em class="lv">组件</em>)。这提供了一个有趣的、交叉的细节组合，一目了然。但是关键路径图应该用其他类型的图来补充。袖手旁观本身并不能描绘出全貌。</p><p id="df4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你需要最后一层细节。您需要更详细的图表的细微差别来显示依赖关系或关于事物如何连接的细节。当你经历灾难场景时，如果你需要的话，一张<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/solutions-architect-tips-the-5-types-of-architecture-diagrams-eb0c11996f9e#36df">基础设施图</a>提供了深入的细节。在C4模型中，这是第4级(<em class="lv">代码</em>)。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="a164" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">最后的想法</h1><p id="bd2a" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">关键路径图是放在你背后口袋里的一个很好的工具。它是一个“集合”图，意味着它将其他类型的图中的重要部分组合成一个图。</p><p id="f3a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它用于获得整个生态系统的全景。通过提供足够的细节来发现瓶颈和痛点，但将细节抽象到足够远以使您远离杂草，这对于与组织中的每个人共享来说是非常好的。关键路径图对于开发人员、支持人员、技术支持人员和您的SRE团队来说是非常宝贵的。</p><p id="ace2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该图不会取代工具箱中的其他图，但在构建系统图时，它应该用作增强和起点。</p><p id="2cd0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你是一个解决方案架构师，你工作的一个重要部分就是<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-switch-from-software-developer-to-solutions-architect-5e0c12bdc4b1">与你的应用程序的涉众建立一个共同的理解</a>。构建一个关键路径图或任何类型的图都会大大增加你理解的机会。</p><p id="f195" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">试试看，让我知道你的想法，并分享你的建设！</p><p id="6911" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！</p></div></div>    
</body>
</html>