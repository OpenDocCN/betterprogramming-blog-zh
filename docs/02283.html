<html>
<head>
<title>Deploying a React App to Google Cloud Platform using App Engine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用应用引擎将React应用部署到Google云平台</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/deploy-a-react-app-to-google-cloud-platform-using-google-app-engine-3f74fbd537ec?source=collection_archive---------1-----------------------#2019-11-19">https://betterprogramming.pub/deploy-a-react-app-to-google-cloud-platform-using-google-app-engine-3f74fbd537ec?source=collection_archive---------1-----------------------#2019-11-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7a7e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在不到五分钟的时间内，从零开始创建React应用并将其部署到Google云平台</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/78e98fea33bf1e3f9ce294975835ea7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c-Xfv0QoBdhA4AqW7_xxRA.png"/></div></div></figure><p id="743c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">先决条件:<br/> - <a class="ae lq" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">节点</a> <br/> -一个激活的<a class="ae lq" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌云平台</a>账号<br/> - <a class="ae lq" href="https://cloud.google.com/sdk/docs/quickstarts" rel="noopener ugc nofollow" target="_blank"> gcloud CLI </a></p><p id="6df0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，使用npx生成一个新的React应用程序，使用<a class="ae lq" href="https://reactjs.org/docs/create-a-new-react-app.html" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="39d3" class="lw lx it ls b gy ly lz l ma mb">npx create-react-app &lt;app-name&gt;</span></pre><p id="e3a3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦npx为您的React应用程序生成了所有必需的文件，让我们通过执行以下操作来确保它运行良好:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="8414" class="lw lx it ls b gy ly lz l ma mb">cd &lt;app-name&gt;<br/>npm start</span></pre><p id="04e8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在您最喜欢的浏览器中，导航到<a class="ae lq" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a><br/>您应该会看到与此类似的屏幕:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mc"><img src="../Images/37c3bcc03efbf6083db34519a2c478f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*92-63jU0rmXF4GNVKdkasw.png"/></div></div></figure><p id="d24c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在您的应用程序已经启动并运行，让我们用它来创建一个生产版本。为此，只需运行:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="b54f" class="lw lx it ls b gy ly lz l ma mb">npm run build</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi md"><img src="../Images/919bfa12e0987c874efbb5ffee6eb931.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NbrxYfQBxRlAkX2b1mKRUQ.png"/></div></div></figure><p id="d636" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这一点上，从React的角度来看没有什么可做的了。下一步是在App Engine中配置一个新项目。然后，剩下要做的就是使用Google Cloud SDK将我们新构建的React应用程序部署到GCP。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi me"><img src="../Images/b17510512a094090503ad0cbc02a84ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*o__gY5sTjT5rfwoPVH6Riw.gif"/></div></figure><p id="338d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是一系列截图，将带你完成第一部分:在GCP应用引擎中配置一个新项目。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mf"><img src="../Images/f54ba80cc6250d333a8833c398b92887.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*46fGFBCOdvEosOQq5phYEQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mc"><img src="../Images/50a3b1237fc3ae3e9e064a585afb2a5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1jNxJZxEZLeDssaB3pcG4w.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mg"><img src="../Images/75c8e8d61c074ce2e8016f368577475d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5lQqTq7ravnapETw-N_qDQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/616a7e5a499bdf3ccec01974f8a922c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sfnfeNbVVFGecXGg24u4vQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mg"><img src="../Images/bbe67ac7ce3a52e122fdd7cc69d92698.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VPWOKC_RhyD-4waF_O3srA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/1a8850e24432c290df6fa197e649232f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B092x2CdK7rHTZ-t2ztjWw.png"/></div></div></figure><p id="55d0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您成功地遵循了这些步骤，您应该能够看到您的Google App Engine仪表盘，如上图所示。这是我们对App Engine web控制台做的最后一件事。现在，我们将重点介绍如何使用gcloud CLI。通过执行以下命令来验证您是否拥有它:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="0859" class="lw lx it ls b gy ly lz l ma mb">gcloud -v</span></pre><p id="70d9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你在安装时遇到问题，<a class="ae lq" href="https://cloud.google.com/sdk/docs/quickstarts" rel="noopener ugc nofollow" target="_blank">这里是你的官方指南</a>。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="135e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在导航到您的React应用程序文件夹。我们需要在项目文件夹的根目录下创建一个新的app.yaml文件，gcloud CLI将使用该文件将我们的应用部署到应用引擎。创建文件后，将此内容添加到文件中<a class="ae lq" href="https://cloud.google.com/appengine/docs/flexible/nodejs/configuring-your-app-with-app-yaml" rel="noopener ugc nofollow" target="_blank">(官方来源)</a>:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="066e" class="lw lx it ls b gy ly lz l ma mb">runtime: nodejs<br/>env: flex<br/><br/># This sample incurs costs to run on the App Engine flexible environment.<br/>  # The settings below are to reduce costs during testing and are not appropriate<br/># for production use. For more information, see:<br/># https://cloud.google.com/appengine/docs/flexible/nodejs/configuring-your-app-with-app-yaml<br/>manual_scaling:<br/>  instances: 1<br/>resources:<br/>  cpu: 1<br/>  memory_gb: 0.5<br/>  disk_size_gb: 10</span></pre><p id="8c2c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">确保保存文件，现在我们终于可以使用CLI了:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="5360" class="lw lx it ls b gy ly lz l ma mb">gcloud init</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/c0af2efab6c9100e14482f298a235ddc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*DrAdPZSPwXjtGi8L8MPx6A.png"/></div></figure><p id="3116" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">按照步骤添加您的帐户、地区，并确保选择您刚刚创建的项目。</p><p id="90d3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦成功初始化，我们就可以运行最终的部署命令:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="15d3" class="lw lx it ls b gy ly lz l ma mb">gcloud app deploy</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/ba7a92706d55fd87198737b4178eedc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cSWqlwGhUQGHnW5xRghu9Q.png"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated">gcloud应用部署的结果</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi me"><img src="../Images/f1e8e9856aaa4e6aca7057783dbd6f79.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*7JCKyDO2uxKtO5j7pgIrTA.gif"/></div></figure><p id="077b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">几分钟后，您应该会在“Deployed service [default] to”中看到链接:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mw"><img src="../Images/a765f8c7bff3d7863433acc12460b87e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bST5ewS6MIsoBmQz-J9fAA.png"/></div></div></figure><p id="b566" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在您的浏览器中访问它，找到您部署的React应用程序。这里是<a class="ae lq" href="https://aqueous-choir-259416.appspot.com/" rel="noopener ugc nofollow" target="_blank">矿</a>。</p><p id="08dc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">恭喜冠军！你做到了！🎉🎉🎉</p><p id="4430" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里有一个git repo 的链接，它包含React应用程序和本文使用的YAML文件。感谢您的阅读！💟📖</p></div></div>    
</body>
</html>