<html>
<head>
<title>Sidebar and NavigationView on macOS in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI中macOS上的侧边栏和导航视图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/sidebar-and-navigationview-on-macos-in-swiftui-a8b4a074a651?source=collection_archive---------0-----------------------#2019-07-18">https://betterprogramming.pub/sidebar-and-navigationview-on-macos-in-swiftui-a8b4a074a651?source=collection_archive---------0-----------------------#2019-07-18</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="4190" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">在通用iOS/iPadOS/macOS目标中</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/8495d88ebc604440a89c5def40899f35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HjZsFwCJgxEhK08_v52Ehg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">在macOS上运行时MovieSwiftUI上的主窗口。</p></figure><p id="aedc" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">随着SwiftUI最终在Xcode 11 beta 4的macCatalyst项目中编译，我可以在我的共享<a class="ae lv" href="https://github.com/Dimillian/MovieSwiftUI" rel="noopener ugc nofollow" target="_blank"> MovieSwiftUI </a>代码库中分享一个我如何在iOS/iPadOS和macOS上做不同home视图的例子。</p><p id="c2d6" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">从Xcode 11 beta 3开始，苹果在<a class="ae lv" href="https://developer.apple.com/documentation/swiftui/navigationview" rel="noopener ugc nofollow" target="_blank"> NavigationView </a>中增加了<code class="fe lw lx ly lz b"><a class="ae lv" href="https://developer.apple.com/documentation/swiftui/navigationview/3339591-navigationviewstyle" rel="noopener ugc nofollow" target="_blank"><em class="ma">.navigationViewStyle(style:)</em></a></code> <em class="ma"> </em>。在iOS上，它默认设置为<code class="fe lw lx ly lz b">stacked</code>，这是一个单列<code class="fe lw lx ly lz b">NavigationView</code>，所有推送的视图相互堆叠。或者，可以设置为<code class="fe lw lx ly lz b">doubleColumn</code>。通过这个选项，它仍然可以堆叠在iOS上，但在iPadOS和macOS上使用<code class="fe lw lx ly lz b">Master/Detail</code>双栏显示屏。除此之外，如果你愿意，你可以在边上添加你自己的<code class="fe lw lx ly lz b">outlineView</code> / <code class="fe lw lx ly lz b">sidebar</code>。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mb"><img src="../Images/ab5781a6aa7b932105cd33c73d130ac2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N5ydRxDyne1UBWzntf0zgA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">来自苹果iOS 13 beta 4发行说明。</p></figure><p id="480d" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated"><em class="ma">注意:如果你正在做一个macOS特定的目标，你将有机会使用许多API，这些API可以使你的应用程序在macOS上更加得心应手。就像</em> <code class="fe lw lx ly lz b"><em class="ma">.sidebar </em></code> <em class="ma">样式上的</em> <code class="fe lw lx ly lz b"><em class="ma">List</em></code> <em class="ma">(其中把好看的轮廓视图模糊化的样式)，下的</em> <code class="fe lw lx ly lz b"><em class="ma">HSplitView</em></code> <em class="ma">，还有自动工具条样式为</em> <code class="fe lw lx ly lz b"><em class="ma">NavigationView</em></code> <em class="ma">。但是本文的目的是演示在iOS、iPadOS和macOS应用程序中使用单一目标可以实现什么。</em></p><p id="72db" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">我们先来看看<code class="fe lw lx ly lz b">HomeView</code>:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mc md l"/></div></figure><p id="fa29" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这是我的应用程序中仅有的使用<code class="fe lw lx ly lz b">#if targetEnvironment</code>的地方之一，但是这是我所需要的，根据我是在iOS/iPadOS还是macOS上提供一个非常不同的UI。</p><p id="745e" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">正如你在macOS实现中所看到的，主视图基本上是一个定制的<code class="fe lw lx ly lz b">SplitView</code>，用一个<code class="fe lw lx ly lz b">HStack</code>和一个<code class="fe lw lx ly lz b">ScrollView</code>实现，侧边栏有一个固定的框架宽度。然后，其主体中的第二个视图是实际的内容视图，将根据侧边栏中选择的项目来显示。</p><p id="94c3" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">让我们来看看<code class="fe lw lx ly lz b">OutlineMenu</code>是如何做到的:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mc md l"/></div></figure><p id="7645" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这只是一个<code class="fe lw lx ly lz b">enum</code>，它为每个案例(菜单项)定义了一个标题、一个图像和当项目被选中时使用的<code class="fe lw lx ly lz b">contentView</code>。注意大部分都嵌套在一个<code class="fe lw lx ly lz b">NavigationView</code>里。</p><p id="6c0c" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">默认情况下,<code class="fe lw lx ly lz b">NavigationView</code>在macOS上运行你的应用时会使用两栏样式。因此，它将根视图显示为一列，然后在为详细视图保留的第二个更大的列中显示使用<code class="fe lw lx ly lz b">NavigationLink</code>从这个根视图呈现的任何视图。如果你来自iOS，你不需要修改你的<code class="fe lw lx ly lz b">NavigationLink</code>中的任何代码。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mc md l"/></div></figure><p id="b382" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">在上述电影列表中使用的代码中，它只是一个普通的<code class="fe lw lx ly lz b">NavigationLink</code>。</p><p id="de00" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">你还可以使用一些其他的技巧。例如，如果您使用<code class="fe lw lx ly lz b">.sheet() </code>呈现方法呈现一个嵌套在<code class="fe lw lx ly lz b">NavigationView</code>中的视图，不要忘记将您的<code class="fe lw lx ly lz b">NavigationView</code>样式设置为<code class="fe lw lx ly lz b">.stack</code>，以实现下面截图中的结果:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/024b252245c1436f1aefa6695bdd88eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wq1SQY7nyuJcW12IjdeHzw.png"/></div></div></figure><p id="7fea" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这是你在屏幕上看到的模态代码:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mc md l"/></div></figure><p id="3cce" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">如果不将其设置为<code class="fe lw lx ly lz b">.stack</code>，默认情况下，它将在工作表中显示为双栏。这可能是有用的，但不是在这种情况下。</p><p id="c2fd" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">该应用程序还缺少一些东西，无法真正在macOS上显示。我还不能为outline/sidebar视图获得模糊的样式，因为SwiftUI本身没有公开API来做这件事。我的窗口也有一个我想删除的标题栏，但是由于我使用了一个<code class="fe lw lx ly lz b">UIWindow</code>和一个<code class="fe lw lx ly lz b">UIHostingController</code>，我不知道如何才能做到。</p><p id="2bcd" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">我希望您喜欢这篇短文，它将允许您在单个目标上构建强大的跨平台应用程序。如果你有点冒险精神，我鼓励你建立一个专门的macOS目标。即使我相信未来是统治他们所有人的一个目标，并希望苹果会朝着那个方向发展。</p><p id="4101" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">感谢阅读！</p></div></div>    
</body>
</html>