<html>
<head>
<title>What Is a UUID and How Are They Generated?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是UUID，它们是如何产生的？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/what-is-a-uuid-and-how-are-they-generated-17f0acbd7233?source=collection_archive---------3-----------------------#2020-01-29">https://betterprogramming.pub/what-is-a-uuid-and-how-are-they-generated-17f0acbd7233?source=collection_archive---------3-----------------------#2020-01-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cd69" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">看看通用唯一标识符</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d0f40b8323dd54a03cad7383fb7c6e25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Rz6rP8YlvOdZkrcf"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="b48f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通用唯一标识符(UUID)是一个128位的数字，用于标识计算机系统中的信息。它也被称为全球唯一标识符(GUID)。UUID的标准表示通常由十六进制数字组成:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="9c0d" class="ma mb it lw b gy mc md l me mf">e5d520d8-d06e-4bc2-9bb9-a28e47014884</span></pre><p id="d38b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总共有32个字符，中间有四个连字符。为了不辜负他们的名字，UUID的期望是独一无二的。这通常是不正确的——它们的唯一性取决于用来生成它们的方法或算法。然而，尽管这是可能的，UUID被复制的概率接近于零，可以忽略不计。</p><p id="02cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有多种方法可以计算UUID。我将解释它们的区别，并提供一些关于实现的见解。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="a019" class="mn mb it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">版本一</h1><p id="68b6" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">第一版UUID是使用电脑的MAC地址和生成时间生成的通用唯一标识符。</p><p id="c7e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是否意味着第一版UUID是独一无二的？嗯，他们差不多是。为了确保唯一性，一台计算机(或节点)的速度限制在每秒163亿，但作为开发人员，你不会经常遇到这种情况。</p><p id="babb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个版本还有其他问题需要担心。几乎保证的唯一性是以匿名为代价的。因为这个版本考虑了时间和唯一的MAC地址，所以可以识别电脑的地址和时间。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="c60f" class="mn mb it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">版本二</h1><p id="2112" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">我会尽量缩短我们对第二版的讨论。第二版UUIDs与第一版相似，并且不经常实现，因为<a class="ae ky" href="https://tools.ietf.org/html/rfc4122" rel="noopener ugc nofollow" target="_blank"> RFC 4122 </a>没有提供太多细节。实际上，你根本不会用到它们。它们也被称为DCE安全UUIDs。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="5455" class="mn mb it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">版本三</h1><p id="294c" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">在第三版中，使用加密哈希和应用程序提供的文本字符串来生成UUID。在这个版本中，使用MD5散列。UUID氏症是由名字产生的。我们现在可以使用名称和命名空间来创建一系列的UUID。MD5哈希算法是一种广泛使用的哈希函数，可以产生128位的哈希值。</p><p id="d4a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最初MD5被设计用作加密哈希函数，但现在它似乎有漏洞问题。很容易找到两个散列值相同的不同消息。因此，这不是您希望在应用程序中使用的版本。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="53c3" class="mn mb it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">版本四</h1><blockquote class="nj nk nl"><p id="7529" class="kz la nm lb b lc ld ju le lf lg jx lh nn lj lk ll no ln lo lp np lr ls lt lu im bi translated">伪随机数发生器，也称为确定性随机位发生器，是一种用于生成数字序列的算法，该数字序列的属性近似于随机数序列的属性。— <a class="ae ky" href="https://en.wikipedia.org/wiki/Pseudorandom_number_generator" rel="noopener ugc nofollow" target="_blank">维基百科</a></p></blockquote><p id="5f8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个版本使用伪随机数发生器来产生UUID。用起来很简单。字符串的每一位都是完全“随机”生成的。UUID仍有可能被复制，但可能性很小，因为可能的组合数量很多。可能性的确切数字是关于⁸.的</p><p id="bbad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">到目前为止，第四版在大多数编程语言中都有实现。非常好用。我用Java举个例子:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="07ad" class="ma mb it lw b gy mc md l me mf">UUID uuid = UUID.randomUUID();</span></pre></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="71f0" class="mn mb it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">版本五</h1><p id="2582" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">第三版和第五版的唯一区别是使用了不同的哈希算法。第五版使用SHA-1而不是MD5。虽然它在技术上是一个优秀的哈希算法，但它也可能遇到第三版所遇到的相同问题。不推荐用。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="ee4e" class="mn mb it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">结论</h1><p id="bce0" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">UUID的最大好处是它实际上是独一无二的(与保证独一无二相反)，这对于日常使用来说仍然是完全可以接受的。</p><p id="f450" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是UUID的主要缺点:</p><ul class=""><li id="99e8" class="nq nr it lb b lc ld lf lg li ns lm nt lq nu lu nv nw nx ny bi translated">例如，需要生成UUID，而不是使用每次在数据库中插入记录时都会上升的索引。这可能需要更长时间。它没有说任何关于创造的顺序。如果你需要排序，考虑不要使用UUID排序法来排序标识符以外的东西。</li><li id="fd0d" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated">和他们一起工作可能有点奇怪。UUID也没有说任何关于它所属的实体的事情。这使得调试更加困难，尤其是在测试中。</li><li id="acb3" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated">这是一个相当长的值，会影响性能。然而，现在空间更便宜了。</li></ul><p id="57dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是它也有一些重要的好处:</p><ul class=""><li id="2b08" class="nq nr it lb b lc ld lf lg li ns lm nt lq nu lu nv nw nx ny bi translated">UUID的主要优势在于它的独特性。例如，用户几乎不可能猜到它是一个URL参数(开放讨论，因为这可能是一个安全问题)。它们在不同的应用中是独一无二的。</li><li id="aab8" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated">它与环境无关。您可以在任何地方(甚至离线)生成它，并且不依赖于数据库来生成标识符。当您有多个包含数据段(碎片)的数据库时，UUID在所有数据库中都是唯一的，而不仅仅是您当前所在的数据库。这使得在数据库之间移动数据更加安全。</li></ul></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><p id="d8e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然几乎每个版本都有自己的优点，但它们也有明显的弱点，这会在应用程序设计中给你带来伤害。</p><p id="8a4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第四版是完全随机和不可预测的，这是我现在推荐使用的版本。</p><p id="3075" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您不想在多个数据库实例上发生冲突，不想让IDs具有可预测性或给出有关系统的信息，可以考虑使用UUIDs。</p></div></div>    
</body>
</html>