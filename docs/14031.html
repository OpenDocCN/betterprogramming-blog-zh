<html>
<head>
<title>Three Ways to Scale Your Apps With Render</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Render缩放应用程序的三种方式</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/three-ways-to-scale-your-apps-with-render-42f5a6d1b9cf?source=collection_archive---------10-----------------------#2022-10-27">https://betterprogramming.pub/three-ways-to-scale-your-apps-with-render-42f5a6d1b9cf?source=collection_archive---------10-----------------------#2022-10-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3084" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用蓝图规范、渲染API和仪表板</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ab71c3760a2d5a7c78c49abbeb9fe606.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L7acBhpN1gqZjFLx"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">应用程序渲染面板中的缩放选项</p></figure><p id="aa4c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当您的应用程序遇到高流量或高利用率时，您需要扩展您的服务来处理该负载。</p><p id="55f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">可以垂直或水平扩展，也可以两者兼而有之！垂直扩展意味着让单个资源变得更大或更强大。例如，您可以向服务器添加更多的CPU或RAM。水平扩展意味着创建同一服务的多个实例。例如，您可以部署三个服务器副本，而不是一个，然后将它们都放在一个负载平衡器后面，该负载平衡器负责将流量路由到每个副本。这两种缩放都可以手动或自动完成(自动缩放)。</p><p id="fab8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通常，公司不会在自己的服务器上托管应用程序，而是选择在云中托管。<a class="ae lu" href="https://render.com/" rel="noopener ugc nofollow" target="_blank"> Render </a>是一个统一的全栈开发平台，可以轻松托管您的应用，无论是静态网站、web服务还是cron作业。此外，使用渲染进行缩放轻而易举。在这篇文章中，我们将探索三种方法来<a class="ae lu" href="https://render.com/docs/scaling" rel="noopener ugc nofollow" target="_blank">用Render </a>扩展你的应用。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f3be" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">选项#1:使用渲染面板</h1><p id="e9d2" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">第一个选项是使用渲染面板缩放服务。创建web服务后，您可以导航到缩放选项卡来配置缩放设置。</p><p id="5790" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当自动缩放关闭时，您可以通过指定实例的数量来手动放大或缩小UI中的应用程序。例如，您可能通常只需要服务的一个实例，但是本周您预计由于即将到来的事件，流量会出现高峰。您可以选择将服务扩展到三个实例来处理增加的负载。当事件结束时，您可以将服务缩减到一个实例。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f0c1d7ad0f0112f63753f28b9b1a6e49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*l1YaKAzJr0jXvIqU"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">手动缩放选项</p></figure><p id="44ad" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您可以预见到负载即将发生的变化，手动伸缩会很有效，但是您可能并不总是正确地知道您需要多少个实例。猜测过高或过低都可能导致服务利用不足或过度利用，这两种情况都不理想。</p><p id="1f88" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">自动扩展通过基于CPU和/或内存利用率在最小和最大实例数量范围内自动扩展，消除了猜测。</p><p id="987d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在渲染面板中，可以使用切换开关启用自动缩放。然后，您可以设置最小和最大实例数，以及CPU和/或内存利用率的目标。然后，基于这些目标，你的应用将根据需要自动放大或缩小。多好啊！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ab71c3760a2d5a7c78c49abbeb9fe606.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L7acBhpN1gqZjFLx"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">自动缩放选项</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6f72" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">选项2:使用渲染API</h1><p id="332c" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">扩展服务的第二个选择是使用<a class="ae lu" href="https://render.com/docs/api" rel="noopener ugc nofollow" target="_blank">渲染API </a>。一旦您在帐户设置中生成了API令牌，您就可以开始使用Render API进行请求了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d3370729499869ff9c3141ae6eb35639.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ntSM2PNmmg6YUCTz"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用于扩展的API端点</p></figure><p id="bafb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一个<a class="ae lu" href="https://api-docs.render.com/reference/scale-service" rel="noopener ugc nofollow" target="_blank"> API端点</a>允许您将服务扩展到指定数量的实例。您需要做的就是向端点发出POST请求，提供您的API令牌和<code class="fe mz na nb nc b">serviceID</code>和<code class="fe mz na nb nc b">numInstances</code>参数，如下所示:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="6755" class="nh md it nc b gy ni nj l nk nl">curl --request POST \<br/> --url https://api.render.com/v1/services/{serviceId}/scale \<br/> --header 'accept: application/json' \<br/> --header 'authorization: Bearer {API_Token}' \<br/> --header 'content-type: application/json' \<br/> --data '{"numInstances":2}'</span></pre><p id="bce1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">手动发出API请求显然是一个手动缩放的过程，但是API应该以编程方式使用。如果您设置了一些额外的<a class="ae lu" href="https://render.com/docs/datadog" rel="noopener ugc nofollow" target="_blank">监控或警报</a>，您可以通过编程调用这个API端点来根据需要放大或缩小您的应用程序，而无需任何人工干预。然而，这可能有些矫枉过正，因为Render已经有了监控和自动缩放基础设施来为您完成这项工作。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="63c6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">选项3:使用蓝图规范</h1><p id="a051" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">我们将考虑的第三个选项是使用<a class="ae lu" href="https://render.com/docs/blueprint-spec" rel="noopener ugc nofollow" target="_blank">蓝图规范</a>来扩展您的服务。蓝图规格是使用YAML文件编写的代码 (IaC)的<a class="ae lu" href="https://render.com/docs/infrastructure-as-code" rel="noopener ugc nofollow" target="_blank">基础设施，这些文件包含用于配置的键值对。IaC的主要好处是它允许您通过代码而不是通过仪表板来创建和管理服务。这样，您可以将您的配置保持在源代码控制之下，标准化您的设置，并轻松地部署新的基础设施变更。</a></p><p id="c0a5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Render的蓝图规格提供了两个选项来缩放您的应用程序。如果你不想使用自动缩放，你可以指定一个<code class="fe mz na nb nc b">numInstances</code>键和一个数值，如下所示:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="2d47" class="nh md it nc b gy ni nj l nk nl">numInstances: 3</span></pre><p id="3f92" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您确实想在您的服务中利用自动伸缩，您可以像这样配置<code class="fe mz na nb nc b">scaling</code>属性:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="0ac2" class="nh md it nc b gy ni nj l nk nl">scaling:<br/>  minInstances: 1<br/>  maxInstances: 3<br/>  targetMemoryPercent: 60<br/>  targetCPUPercent: 60</span></pre><p id="eb33" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些选项与您在渲染面板中看到的选项相同，但现在您不是在UI中手动设置它们，而是将基础架构编写为代码。整洁！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a622" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="bd03" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">使用Render缩放应用程序非常简单。无论您喜欢通过API或蓝图规范在Render Dashboard中扩展应用程序，Render都能满足您的需求。</p><p id="964d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢您的阅读，祝您编码愉快！</p></div></div>    
</body>
</html>