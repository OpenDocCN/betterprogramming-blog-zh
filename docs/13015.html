<html>
<head>
<title>Exploring AnimatedVisibility in Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索Compose中的动画可视性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/jetpack-compose-animation-notes-1-30f130189159?source=collection_archive---------10-----------------------#2022-07-19">https://betterprogramming.pub/jetpack-compose-animation-notes-1-30f130189159?source=collection_archive---------10-----------------------#2022-07-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dfbc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">喷气背包撰写-动画说明:01</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/88e0790bb9ffb4c861b6c5e7cea4f74c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*alDPIjO_szWr096S"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@claybanks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">粘土堤</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">防溅板</a>上拍照</p></figure><p id="4e57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Jetpack Compose是构建android应用程序UI的革命性更新。它利用了声明式UI的概念，并带来了用Kotlin构建UI的乐趣——这是许多Android开发人员的梦想。如果您不熟悉Jetpack Compose，我建议您阅读以下文章:</p><ul class=""><li id="8633" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/jetpack-compose-components-part-1-a80717dbfb59">喷气背包构成组件(第一部分)</a></li><li id="6494" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/build-android-layouts-in-jetpack-compose-bda2e0837f5e">在JetPack Compose中构建Android布局</a></li></ul><p id="daca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">话虽如此，我们还是开始吧。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="db37" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">Compose中动画介绍</h1><p id="08f6" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">作为对Compose中动画的介绍，android团队提供了一个树形图来选择在哪里使用哪些API。看一看:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/16ad9aa72e4e0083c9b5d7fb5b851a2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t2GF8pMR2xtMYIiJUmotUw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://developer.android.com/jetpack/compose/animation" rel="noopener ugc nofollow" target="_blank">https://developer.android.com/jetpack/compose/animation</a></p></figure><p id="466e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在这篇文章中的意图是当可见性发生变化时，动画化可组合组件。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="1908" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">简单的可组合设计</h1><p id="4de7" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">让我们从创建一个简单的可组合图标开始，我们将有一个简单的圆形图标，使用<code class="fe no np nq nr b">Box</code> &amp; <code class="fe no np nq nr b">Icon</code>可组合和一个简单的<code class="fe no np nq nr b">Button</code>来设计。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="2e38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看一下预览:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/6ad36368801be51b2d7474733426bdc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*nDzKQOZXT3sEr-oT7NrAEQ.jpeg"/></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="01e1" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">没有动画的可见性变化</h1><p id="8677" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">为此，我们需要向<code class="fe no np nq nr b">VisibilityAnimationSample</code> composable添加几个参数。</p><ol class=""><li id="1bd9" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu nv mb mc md bi translated"><code class="fe no np nq nr b">show</code>:决定可见性的布尔值。</li><li id="2343" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu nv mb mc md bi translated"><code class="fe no np nq nr b">updateVisibility</code> : Kotlin函数更新可见性。</li></ol><p id="7232" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看一看:</p><pre class="kj kk kl km gt nw nr nx ny aw nz bi"><span id="f1f7" class="oa mr it nr b gy ob oc l od oe">@Composable<br/>fun VisibilityAnimationSample(<br/>    <strong class="nr iu">show : Boolean,<br/>    updateVisibility : () -&gt; Unit</strong><br/>){<br/>    <br/>      ...</span><span id="2039" class="oa mr it nr b gy of oc l od oe">}</span></pre><p id="847a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看看参数的用法来显示/隐藏图标&amp;更新按钮的显示文本并触发按钮上的<code class="fe no np nq nr b"><strong class="lb iu">updateVisibility</strong></code> <strong class="lb iu"> </strong>点击，看看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="47e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从主可组合函数中触发<code class="fe no np nq nr b">VisibilityAnimationSample</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="b830" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看一下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/9da29b36d78d7d6defb6be1145045ea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/1*wdSBztz0UA10nXVMdyL4QA.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">没有动画的可见性变化</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="c9b8" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">救援的动态可见性</h1><p id="a9e5" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">AnimatedVisibility是<code class="fe no np nq nr b">ColumnScope</code>上的扩展函数，看看函数签名:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><ul class=""><li id="7d87" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe no np nq nr b">visible</code>:决定内容是显示还是隐藏。</li><li id="7526" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">modifier</code>:修改布局以包含创建的内容。</li><li id="02c5" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">enter</code>:在屏幕上呈现可组合内容时使用的动画。</li><li id="f555" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">exit</code>:隐藏可组合的动画。</li><li id="39c5" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">content</code>:出现和消失的可组合物。</li></ul><p id="dcd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">回到我们的用例，我们可以用<code class="fe no np nq nr b">AnimatedVisibility</code>代替if语句来显示或隐藏图标，看看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="81ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅用一行改变，我们就在可见性改变上添加了渐强的垂直扩展和渐弱的垂直收缩动画。看一看:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/f4adf1eb382daea0bb67132001ffd66f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/1*SP4FD24yJ0_PdFwyCoSSpA.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">可见性通过动画可见性随默认动画而变化</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="b2bc" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">自定义动画</h1><h2 id="54a1" class="oa mr it bd ms oh oi dn mw oj ok dp na li ol om nc lm on oo ne lq op oq ng or bi translated">更改默认动画</h2><p id="e500" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">AnimatedVisibility compose可以灵活地使用各自的参数更改默认的<code class="fe no np nq nr b">enter</code>和<code class="fe no np nq nr b">exit</code>动画。例如，如果我们想将默认动画更改为放大和缩小，我们只需在函数调用中传递它们。看一看:</p><pre class="kj kk kl km gt nw nr nx ny aw nz bi"><span id="03dd" class="oa mr it nr b gy ob oc l od oe">AnimatedVisibility(<br/>    visible = show,<br/>    <strong class="nr iu">enter = <em class="os">scaleIn</em>(),<br/>    exit = <em class="os">scaleOut</em>()</strong><br/>){</span><span id="e26f" class="oa mr it nr b gy of oc l od oe">   ...</span><span id="bea6" class="oa mr it nr b gy of oc l od oe">}</span></pre><p id="ee37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看一下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/cf197dc7c2913500047172c8140b1137.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/1*gLG4J_iDQVqSQ2CdsVCWMA.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">可见性随着放大和缩小动画而变化</p></figure><h2 id="bc1b" class="oa mr it bd ms oh oi dn mw oj ok dp na li ol om nc lm on oo ne lq op oq ng or bi translated">动画持续时间</h2><p id="f60c" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我们也可以通过<code class="fe no np nq nr b">animationSpec</code>参数自定义动画的持续时间。这里我们用补间<code class="fe no np nq nr b">animationspec</code>来决定时长。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="f649" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看一下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/d3e135c2bce273d8caf59c4247515f1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/1*B4FBr7BD8t8Kt_nHTZI6rA.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">自定义时长的动画</p></figure><h2 id="7ea4" class="oa mr it bd ms oh oi dn mw oj ok dp na li ol om nc lm on oo ne lq op oq ng or bi translated">更多定制</h2><p id="1ed6" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">除了<code class="fe no np nq nr b">durationMillis</code>之外，<code class="fe no np nq nr b"><strong class="lb iu"><em class="os">tween</em></strong></code> <code class="fe no np nq nr b">animationSpec</code>还有一个参数叫做<code class="fe no np nq nr b">easing</code>。它用于缓和将用于在起点和终点之间插值的曲线。我们可以添加一些副作用，比如现有转场的弹跳，请看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="c080" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而<code class="fe no np nq nr b">toEasing</code>是我们添加到<code class="fe no np nq nr b">TimeInterpolator</code>动画中的一个扩展函数，将它转换成<code class="fe no np nq nr b"><em class="os">Easing</em></code> <em class="os">。</em>看一看:</p><pre class="kj kk kl km gt nw nr nx ny aw nz bi"><span id="8b90" class="oa mr it nr b gy ob oc l od oe">fun TimeInterpolator.toEasing() = <em class="os">Easing </em><strong class="nr iu">{<br/>     </strong>x <strong class="nr iu">-&gt; </strong>getInterpolation(x) <br/><strong class="nr iu">}</strong></span></pre><p id="c39b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看一下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/9904698975e09e3f43422b9f2d8c1e9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/1*v3uRRoFNhdSzccGUjD5tgg.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带弹跳效果的动画</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="64b1" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">结束注释</h1><p id="439a" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">仅此而已，我们已经在短短10行代码中添加了多个自定义时长和副作用的动画。<a class="ae ky" href="https://gist.github.com/SG-K/0e9dddb8d0e8a9afd0c794ed5dd124de" rel="noopener ugc nofollow" target="_blank">请点击此处查看完整代码</a>。动画是一个有趣的话题，可以在Jetpack Compose中探索，为UI带来更流畅的特性。请继续关注Jetpack Compose中关于动画的更多文章。</p><h1 id="ed24" class="mq mr it bd ms mt ot mv mw mx ou mz na jz ov ka nc kc ow kd ne kf ox kg ng nh bi translated">更新</h1><h2 id="dac9" class="oa mr it bd ms oh oi dn mw oj ok dp na li ol om nc lm on oo ne lq op oq ng or bi translated">2022年9月2日</h2><p id="82de" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">构建Fab菜单，具有合成动画可视性和动画效果:</p><div class="oy oz gp gr pa pb"><a href="https://sgkantamani.medium.com/jetpack-compose-animation-notes-2-aef3428af6a6" rel="noopener follow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">Jetpack撰写-动画注释:2</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">构建Fab菜单，具有合成动画可视性和动画效果</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">sgkantamani.medium.com</p></div></div><div class="pk l"><div class="pl l pm pn po pk pp ks pb"/></div></div></a></div><h2 id="5d83" class="oa mr it bd ms oh oi dn mw oj ok dp na li ol om nc lm on oo ne lq op oq ng or bi translated">2022年9月21日</h2><div class="oy oz gp gr pa pb"><a rel="noopener  ugc nofollow" target="_blank" href="/exploring-launchedeffect-and-infinitetransition-in-jetpack-compose-5a82ba948a15"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">探索Jetpack合成中的LaunchedEffect和InfiniteTransition</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">Jetpack撰写-动画注释</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">better编程. pub</p></div></div><div class="pk l"><div class="pl l pm pn po pk pp ks pb"/></div></div></a></div></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="572f" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">奖金</h1><div class="oy oz gp gr pa pb"><a rel="noopener  ugc nofollow" target="_blank" href="/matured-constraint-layout-in-jetpack-compose-86665a974683"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">Jetpack合成中的成熟约束布局</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">与我一起在Jetpack中开发</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">better编程. pub</p></div></div><div class="pk l"><div class="pq l pm pn po pk pp ks pb"/></div></div></a></div><p id="c8b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这些了，希望你能学到一些有用的东西，感谢阅读。</p></div></div>    
</body>
</html>