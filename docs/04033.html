<html>
<head>
<title>Flutter Internationalization (i18n) 101</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤振国际化(i18n) 101</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/flutter-internationalization-i18n-101-8985259b735d?source=collection_archive---------9-----------------------#2020-03-19">https://betterprogramming.pub/flutter-internationalization-i18n-101-8985259b735d?source=collection_archive---------9-----------------------#2020-03-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="baca" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">详细的步骤和潜在的陷阱</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/780dd539cd51e9be95736e026d478cb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7v5y36iGBQiboqiIF7fNVw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@hannahwrightdesigner?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">汉娜·赖特</a>在<a class="ae ky" href="https://unsplash.com/s/photos/languages?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="0514" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2020年，随着中国和美国成为最大的智能手机市场，支持i18n对移动应用程序开发者来说变得至关重要。</p><p id="11a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我发现大多数关于<a class="ae ky" href="https://flutter.dev/docs/development/accessibility-and-localization/internationalization" rel="noopener ugc nofollow" target="_blank"> Flutter i18n </a>的教程都遗漏了说明和详细步骤，让人很难理解。</p><p id="b512" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在努力将i18n支持集成到我的Flutter应用程序中几天后，我决定写一个循序渐进的教程，试图澄清所有的设计决策。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cc89" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">属国</h1><ul class=""><li id="c44e" class="mu mv it lb b lc mw lf mx li my lm mz lq na lu nb nc nd ne bi translated">是支持i18n的Flutter框架，它为我们的i18n实现提供了一个API。</li><li id="4555" class="mu mv it lb b lc nj lf nk li nl lm nm lq nn lu nb nc nd ne bi translated"><code class="fe nf ng nh ni b">intl</code>是一个写i18n抽象接口的框架。</li><li id="fa7f" class="mu mv it lb b lc nj lf nk li nl lm nm lq nn lu nb nc nd ne bi translated"><code class="fe nf ng nh ni b">intl_translation</code>是一个用于i18n代码数据分离的CLI，从数据文件中生成代码，从代码中提取数据文件。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4bab" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">目标</h1><p id="cfca" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">i18n的目标是:</p><ul class=""><li id="8bf8" class="mu mv it lb b lc ld lf lg li nr lm ns lq nt lu nb nc nd ne bi translated">将消息从UI中分离出来，让前端开发者不需要接触i18n相关代码。</li><li id="947a" class="mu mv it lb b lc nj lf nk li nl lm nm lq nn lu nb nc nd ne bi translated">将数据和代码分开，这样翻译人员就不需要接触代码了。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="eaa5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结构</h1><p id="29c9" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">为了实现这一目标，我们需要:</p><ul class=""><li id="3dc7" class="mu mv it lb b lc ld lf lg li nr lm ns lq nt lu nb nc nd ne bi translated">一个从其他UI代码中抽象出i18n的<code class="fe nf ng nh ni b">dart</code>接口。</li><li id="a0b0" class="mu mv it lb b lc nj lf nk li nl lm nm lq nn lu nb nc nd ne bi translated">数据文件，<code class="fe nf ng nh ni b">JSON</code>像<code class="fe nf ng nh ni b">arb</code>文件，用于翻译。</li><li id="1316" class="mu mv it lb b lc nj lf nk li nl lm nm lq nn lu nb nc nd ne bi translated">每个本地化版本的实现。</li><li id="666a" class="mu mv it lb b lc nj lf nk li nl lm nm lq nn lu nb nc nd ne bi translated">将数据文件转换为本地化实现的转换器。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/b41d049dac875a8423bb0432f5f49e00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yNX5Pl5Cs9cazBCjQa12fQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">信用:<a class="ae ky" href="https://medium.com/minidonkey101" rel="noopener">迷你驴</a></p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fe6e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">让我们一步一步地构建i18n</h1><p id="21e1" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">最终结果一瞥:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/7c40d360e2573d880b8e1619a0952ec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-QwYRCAj1QA_dt2wOAxW-Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">信用:<a class="ae ky" href="https://medium.com/minidonkey101" rel="noopener">迷你驴</a></p></figure><p id="b516" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我借用了<a class="ae ky" href="https://medium.com/minidonkey101" rel="noopener"> Mini Donkey </a>的代码，这是一款使用加密隐写术来保护社交媒体隐私的应用。如果您对源代码感兴趣，请查看:</p><div class="nw nx gp gr ny nz"><a href="https://github.com/tianhaoz95/photochat" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd iu gy z fp oe fr fs of fu fw is bi translated">天昊95/照片</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">迷你驴携带加密(AES)和隐写术(的技术)安全和秘密的私人信息</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">github.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on ks nz"/></div></div></a></div></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ce36" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第一步。安装依赖项</h1><p id="e09b" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">我们首先需要安装三个软件包:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="9b99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你的IDE没有为你做这件事，那么之后再做一件。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7cd5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第二步。编写一个存根接口</h1><p id="3a41" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">这里有一个来自Flutter文档的i18n接口存根，它应该足以满足90%的用例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="947b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于使用未定义方法的存根接口，您可能会感到有悖常理。</p><p id="1b72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不用担心，第6步会从数据文件中生成缺失的方法。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9404" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第三步。从存根接口生成数据文件</h1><p id="d420" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated"><code class="fe nf ng nh ni b">intl_translation</code>收集来自接口的<code class="fe nf ng nh ni b">intl</code>消息，并生成相应的数据文件；</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="edb6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第四步。翻译生成的数据文件</h1><p id="ed93" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">每个数据文件代表一个地区。我们可以通过添加新的数据文件来添加新的语言环境:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e91b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第五步。从数据文件生成接口实现</h1><p id="bbc7" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">翻译完数据文件后，我们可以使用以下代码生成代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9a5c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第六步。增强界面</h1><p id="b3a6" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">既然接口的实现已经增强了语言环境，我们需要在<code class="fe nf ng nh ni b">i18n.dart</code>中向接口添加方法来使用它们:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="d4c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，方法的名称必须与消息ID相同，在本例中是“title”。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9791" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第七步。将接口和实现注入Material应用程序</h1><p id="fa2a" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">几乎所有Flutter应用都使用的<a class="ae ky" href="https://api.flutter.dev/flutter/material/MaterialApp-class.html" rel="noopener ugc nofollow" target="_blank">材质应用</a>为我们注入i18n接口提供了一个简洁的接口:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="43ca" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第八步。在材料应用程序中使用本地化信息</h1><p id="2be1" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">以下是如何在应用程序中使用本地化信息的示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="66d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">万岁！用i18n黑客快乐！</p></div></div>    
</body>
</html>