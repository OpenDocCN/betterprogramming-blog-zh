<html>
<head>
<title>A More Efficient Implementation of an Animated Pie Chart in SwiftUI 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI 2中动画饼图的更高效实现</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/an-animated-self-sorting-pie-chart-in-swiftui-2-0-final-revision-1a9038996322?source=collection_archive---------11-----------------------#2020-10-26">https://betterprogramming.pub/an-animated-self-sorting-pie-chart-in-swiftui-2-0-final-revision-1a9038996322?source=collection_archive---------11-----------------------#2020-10-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e508" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我的图表系列的第6部分</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/facf6635441f9f39c0924f0fcc1cf062.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*plEPKNe06GrvqMK5S8LOfg.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SwiftUI 2.0动画饼图</p></figure><p id="cc11" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我对我吃的最后一个馅饼很满意。这是一个很大的改进，有一个迷人的外观，但我仍然觉得还有改进的空间。想到我做过的另一个项目，我突然意识到我应该使用<a class="ae lu" href="https://developer.apple.com/documentation/combine" rel="noopener ugc nofollow" target="_blank">组合</a>框架作为主要驱动程序。考虑到这一点，我想出了这个解决方案。尽管等等——在你读这篇文章之前，你应该快速浏览一下前两篇。</p><div class="lv lw gp gr lx ly"><a href="https://medium.com/better-programming/an-animated-self-sorting-pie-chart-in-swiftui-2-0-revised-f3c277f3118e" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">SwiftUI 2.0修订版中的动画自动排序饼图</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">那么我们在这里得到了什么呢？我从版本1后退了一步，非常仔细地思考了一下，也许这是一个…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">medium.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><div class="lv lw gp gr lx ly"><a href="https://medium.com/better-programming/an-animated-self-sorting-pie-chart-in-swiftui-2-0-24db465f9413" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">SwiftUI 2.0中的一个动画的、自动排序的饼图</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">在这篇文章中，我想建立一个动画自动着色饼图，其中有一个可视化排序。换句话说，我…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">medium.com</p></div></div><div class="mh l"><div class="mn l mj mk ml mh mm ks ly"/></div></div></a></div><p id="6a17" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我开始之前，这里有一份简单的沙拉来说明我要去哪里。下面是一张GIF图，显示了屏幕上的五个绿点。这是一个通过使用Combine框架发送的消息进行外部管理的转换。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a698981ed8ba861a1127c57eb6510f64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*VajnjsyzfIqVcHb7B5f_FA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SwiftUI中使用Combine和DispatchQueues的颜色远程动画</p></figure><p id="989d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">代码的工作方式是画五个圆，并在每个圆上添加可寻址的标签。然后，我可以将一条组合信息聚焦在一个圆圈上——在我们的例子中，这条信息会改变颜色。</p><p id="6cc3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一个简单的解决办法，不是吗？好的，这是总体规划。我像以前一样把圆画成一系列馅饼，每个馅饼都是可寻址的。画完圆后，我会指示各个部分按照预先计算好的百分比改变颜色。它看起来很像上一篇文章，除了我不会不断地重画屏幕。我只会改变已经绘制好的饼图中各部分的颜色。这是一个将这一概念应用于饼图的动画GIF，在整个色谱中使用2度切片——一个有180个切片的饼图。显然这里没有标签的空间。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6497b495c7a533ebb30b0f674b7a0509.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*kXfgqi-HzPWm-b0innQFQg.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">包含180个切片的SwiftUI2.0饼图</p></figure><p id="acb0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">事实上，它不清除屏幕和重画自己是一个很大的奖励。这种差异应该意味着我们最终可以建立一个饼图，看起来就像条形图比赛一样，可以平滑地改变其中的分段。</p><p id="fddc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然我必须承认我正在重画白色的切片和文字，这就是为什么你会看到它们出现在屏幕上。也许还有改进的余地。</p><p id="64fb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是这篇文章开头的代码。请注意，被注释掉的订户例程是我用来构建上述多色圆圈的方法。我把它留在这里是因为它是一个很好的例子，说明了如何在您的纯Swift代码(相对于SwiftUI代码)中捕获一个组合发布者。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="8dae" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">关于开头的动画GIF，我应该承认这不是完整的代码。我随后添加了这个例程，因为我想要更多的标签。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mo mp l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">增加了一些小功能，以在饼图中获得更多标签</p></figure><p id="ea30" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">整个app是怎么运作的？我借用了以前pie版本的数据结构，以及一些更新它的函数。这些功能在很大程度上没有什么变化。我使用所述数据结构应用一些数学计算出他们可以声称的每个饼的大小。我用这些数据完成了一个360个盒子的矩阵，一个绘图程序随后会引用它。</p><p id="9a9b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我调用Combine框架来重画馅饼和改变所用的颜色时，它就出现了。它使用的是360度的数据结构。它没有我希望的那么快，也没有我希望的那么平滑，但感觉比以前的版本好一点，白色闪光更少。</p><p id="ad52" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所有这些也把我带到了这篇文章的结尾。我希望你和我写这篇文章时一样喜欢阅读，并且确实学到了一些东西。</p><p id="9ceb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">保持冷静，继续编码。</p></div></div>    
</body>
</html>