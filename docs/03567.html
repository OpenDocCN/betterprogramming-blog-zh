<html>
<head>
<title>Everything You Should Know About ViewBinding in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于Android中的ViewBinding你应该知道的一切</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/everything-you-should-know-about-viewbinding-in-android-52552af9e8ba?source=collection_archive---------6-----------------------#2020-02-18">https://betterprogramming.pub/everything-you-should-know-about-viewbinding-in-android-52552af9e8ba?source=collection_archive---------6-----------------------#2020-02-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1a89" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">没有findViewById，是时候升级了</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/977d056f4e19c45e1cb9aff0da687e8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nshYgB60clKq3QiH7c8bdA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Benjamin Lizardo 在<a class="ae ky" href="https://unsplash.com/s/photos/maths?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="f851" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="0b20" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在现有环境中，每当我们创建一个新的屏幕时，我们都必须使用<code class="fe mn mo mp mq b">findViewById()</code>手动将布局中的视图与Java/Kotlin文件链接起来。这很耗时，容易出错，并且意味着我们使用了更多的样板代码。</p><p id="67ca" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">如果我们更深入地研究这个过程，我们可以找到一个可以自动化的模式。例如，我们所做的是在Java/Kotlin文件中声明一个视图，并用来自膨胀布局的适当视图<code class="fe mn mo mp mq b">id</code>初始化该视图(将布局中带有<code class="fe mn mo mp mq b">id</code>的每个视图引用到Java/Kotlin文件)。</p><p id="37ff" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">Android团队的<code class="fe mn mo mp mq b">ViewBinding</code> <strong class="lt iu"> </strong>背后的想法是为每个布局创建一个绑定类，保存布局中视图的引用。这减少了组件(activity和fragment)中的样板代码，我们可以通过为该类创建一个实例来访问视图，您将很快了解到这一点。</p><p id="fb88" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><em class="mw">视图绑定取代了</em> <code class="fe mn mo mp mq b"><em class="mw">findViewById</em></code> <em class="mw">。</em></p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="eaa5" class="kz la it bd lb lc ne le lf lg nf li lj jz ng ka ll kc nh kd ln kf ni kg lp lq bi translated">综合</h1><p id="f399" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><strong class="lt iu"> <em class="mw">注:</em> </strong> <em class="mw">视图绑定在</em> <a class="ae ky" href="https://developer.android.com/studio/preview" rel="noopener ugc nofollow" target="_blank"> <em class="mw"> Android Studio 3.6金丝雀11+ </em> </a> <em class="mw">中可用。</em></p><p id="8fc8" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">可以在模块级别启用视图绑定。因此，您的项目中有多个模块，您必须为每个模块启用它。要在模块中启用视图绑定，您需要在模块级<code class="fe mn mo mp mq b">build.gradle</code>文件中的<code class="fe mn mo mp mq b">android</code>标签下添加以下几行:</p><pre class="kj kk kl km gt nj mq nk nl aw nm bi"><span id="b1cb" class="nn la it mq b gy no np l nq nr">viewBinding {<br/>    enabled = true<br/>}</span></pre></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="42c4" class="kz la it bd lb lc ne le lf lg nf li lj jz ng ka ll kc nh kd ln kf ni kg lp lq bi translated">使用</h1><p id="c1a4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">启用视图绑定后，每当我们创建新布局时，都会生成一个引用布局中视图的绑定文件。布局的根在绑定文件中用名为<code class="fe mn mo mp mq b">root </code>的视图表示。我们可以使用<code class="fe mn mo mp mq b">setContentView </code>中的<code class="fe mn mo mp mq b">root</code>来膨胀UI组件中的布局。</p><p id="1c26" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">让我们创建一个布局文件，并用视图绑定来扩展它。看一下布局文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="d581" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">现在让我们创建一个布局的绑定实例:</p><pre class="kj kk kl km gt nj mq nk nl aw nm bi"><span id="454d" class="nn la it mq b gy no np l nq nr">private lateinit var activityMainBinding: <strong class="mq iu">ActivityMainBinding</strong></span></pre></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="48c9" class="kz la it bd lb lc ne le lf lg nf li lj jz ng ka ll kc nh kd ln kf ni kg lp lq bi translated">查看活动中的绑定</h1><p id="2e58" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">要在活动中使用绑定类的实例，请在活动的<code class="fe mn mo mp mq b"><a class="ae ky" href="https://developer.android.com/reference/kotlin/android/app/Activity#oncreate" rel="noopener ugc nofollow" target="_blank">onCreate()</a></code>方法中执行以下步骤:</p><ol class=""><li id="2390" class="nu nv it lt b lu mr lx ms ma nw me nx mi ny mm nz oa ob oc bi translated">调用生成的绑定类中的静态<code class="fe mn mo mp mq b">inflate()</code>方法。这创建了一个我们可以使用的绑定类的实例。</li><li id="4c97" class="nu nv it lt b lu od lx oe ma of me og mi oh mm nz oa ob oc bi translated">如上所述，通过调用<code class="fe mn mo mp mq b">getRoot()</code>函数或者使用<a class="ae ky" href="https://kotlinlang.org/docs/reference/properties.html#declaring-properties" rel="noopener ugc nofollow" target="_blank"> Kotlin属性语法</a>来获得对根视图的引用。</li><li id="6f92" class="nu nv it lt b lu od lx oe ma of me og mi oh mm nz oa ob oc bi translated">将根视图传递给<code class="fe mn mo mp mq b"><a class="ae ky" href="https://developer.android.com/reference/kotlin/android/app/Activity#setcontentview_1" rel="noopener ugc nofollow" target="_blank">setContentView()</a></code>方法，以在屏幕上呈现布局。</li></ol><p id="2840" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="1a74" class="kz la it bd lb lc ne le lf lg nf li lj jz ng ka ll kc nh kd ln kf ni kg lp lq bi translated">在片段中查看绑定</h1><p id="4009" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">要在片段中使用绑定类的实例，请在片段的<code class="fe mn mo mp mq b">onCreateView()</code>方法中执行以下步骤:</p><ol class=""><li id="9803" class="nu nv it lt b lu mr lx ms ma nw me nx mi ny mm nz oa ob oc bi translated">调用生成的绑定类中的静态<code class="fe mn mo mp mq b">inflate()</code>方法。这将创建一个在片段中使用的绑定类的实例。</li><li id="3741" class="nu nv it lt b lu od lx oe ma of me og mi oh mm nz oa ob oc bi translated">通过调用<code class="fe mn mo mp mq b">getRoot()</code>方法或者使用<a class="ae ky" href="https://kotlinlang.org/docs/reference/properties.html#declaring-properties" rel="noopener ugc nofollow" target="_blank"> Kotlin属性语法</a>获得对根视图的引用。</li><li id="4df7" class="nu nv it lt b lu od lx oe ma of me og mi oh mm nz oa ob oc bi translated">从<code class="fe mn mo mp mq b">onCreateView()</code>方法返回根视图，在屏幕上呈现布局。</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="5ad1" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">现在，您可以使用此实例来引用布局中的视图并执行操作:</p><pre class="kj kk kl km gt nj mq nk nl aw nm bi"><span id="93c9" class="nn la it mq b gy no np l nq nr">binding.greetings.text = viewModel.msg</span></pre></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="24f7" class="kz la it bd lb lc ne le lf lg nf li lj jz ng ka ll kc nh kd ln kf ni kg lp lq bi translated">优势</h1><h2 id="207a" class="nn la it bd lb oi oj dn lf ok ol dp lj ma om on ll me oo op ln mi oq or lp os bi translated">零安全</h2><p id="db59" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">有了视图绑定，在对视图执行操作时，不再需要对视图进行空检查。作为直接从布局文件生成的绑定类，它只包含布局内的视图。</p><h2 id="6a57" class="nn la it bd lb oi oj dn lf ok ol dp lj ma om on ll me oo op ln mi oq or lp os bi translated">类型安全</h2><p id="6115" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">类型安全是视图绑定中最重要的优势之一。如果您尝试将文本观察器分配给按钮，它不会接受，因为绑定类包含具有适当视图类型的引用。</p><h2 id="df62" class="nn la it bd lb oi oj dn lf ok ol dp lj ma om on ll me oo op ln mi oq or lp os bi translated">易用性</h2><p id="00a0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">查看装订的唯一目的是替代使用<code class="fe mn mo mp mq b">findviewbyId</code>。与数据绑定不同，它是轻量级的，所以编译不会花费太多时间。同时，它不支持像数据绑定那样的双向绑定。使用视图绑定，不需要像在数据绑定中那样在每个布局文件中提到layout-tag。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="91c1" class="kz la it bd lb lc ne le lf lg nf li lj jz ng ka ll kc nh kd ln kf ni kg lp lq bi translated">更新</h1><p id="7927" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">阅读下面的文章，了解更多关于查看投标</p><div class="ot ou gp gr ov ow"><a href="https://medium.com/better-programming/android-view-binding-components-dialogs-and-adapters-7628f6ce6ff7" rel="noopener follow" target="_blank"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd iu gy z fp pb fr fs pc fu fw is bi translated">Android视图绑定组件:对话框和适配器</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">不再有findViewById。是时候升级了</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">medium.com</p></div></div><div class="pf l"><div class="pg l ph pi pj pf pk ks ow"/></div></div></a></div><p id="1e51" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">感谢阅读！</p></div></div>    
</body>
</html>