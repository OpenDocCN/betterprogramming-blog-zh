<html>
<head>
<title>ScrollView With Paging in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI中带分页的ScrollView</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/scrollview-with-paging-in-swiftui-5948a9d5875d?source=collection_archive---------0-----------------------#2022-09-25">https://betterprogramming.pub/scrollview-with-paging-in-swiftui-5948a9d5875d?source=collection_archive---------0-----------------------#2022-09-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="232f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">本文将帮助您在UIKit中构建看起来像UIPageViewController的SwiftUI元素。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6b3274f23c20731d131fa7f2ebfe6ac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*gACyUEafffr2ZZs3criw-A.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">这是我在SwiftUI项目中实现的元素</p></figure><p id="4eb8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">“SwiftUI中分页的ScrollView”正是我在SwiftUI项目中尝试实现分页的水平滚动时输入到Google中的查询。然而，我在网上冲浪了几个小时，才发现这个在UIKit中相当简单的任务在SwiftUI中并不明显。</p><p id="9a56" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">到处都有开发人员在创建过于复杂的视图来模仿SwiftUI中的<code class="fe lr ls lt lu b">UIPageViewController</code>。他们中的一些人建议使用SwiftUI内部API的方式毕竟不能被认为是安全的。事不宜迟，让我们研究一下在ScrollView中重新创建分页的方法。</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h1 id="79f1" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated"><strong class="ak"> UIScrollView.appearance()。ispaginagenabled</strong></h1><p id="4112" class="pw-post-body-paragraph kv kw iq kx b ky mu jr la lb mv ju ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">如果项目中的所有ScrollViews都将被分页(意味着您将不再需要经典的滚动视图)，最简单的方法是设置<code class="fe lr ls lt lu b">UIScrollView.appearance().isPagingEnabled = true</code>。</p><p id="a21b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是，记住<code class="fe lr ls lt lu b">UIScrollView.appearance()</code>应该设置一次。</p><p id="0951" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">而在<code class="fe lr ls lt lu b">UIScrollView.appearance().isPagingEnabled</code> <strong class="kx ir"> </strong>上不断切换真假，终究不是最好的选择。</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h1 id="d9ae" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated"><strong class="ak">选项卡视图</strong></h1><p id="fcdb" class="pw-post-body-paragraph kv kw iq kx b ky mu jr la lb mv ju ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">用分页制作ScrollView最方便最正确的方法其实根本不用ScrollView，而是用<code class="fe lr ls lt lu b">TabView</code>！</p><p id="1577" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">尽管SwiftUI <code class="fe lr ls lt lu b">TabView</code>与UIKit的<code class="fe lr ls lt lu b">UITabViewController</code>相似，但它有一些额外的内部功能。</p><p id="1a66" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从iOS 14开始，你现在可以使用带有<code class="fe lr ls lt lu b">.tabViewStyle modifier</code>的TabView来创建分页UI元素。让我们深入一些代码。首先，让我们创建基本的卡片模型，它将包含我们的视图使用的数据(<code class="fe lr ls lt lu b">title</code>、<code class="fe lr ls lt lu b">subtitle</code>、<code class="fe lr ls lt lu b">description</code>、<code class="fe lr ls lt lu b">card</code>、<code class="fe lr ls lt lu b">background color</code>和<code class="fe lr ls lt lu b">id</code>)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="6a40" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">静态函数<code class="fe lr ls lt lu b">getExampleModels(count: Int)</code>的存在只是为了说明，所以我可以快速创建一些具有不同背景颜色的模拟模型。</p><p id="4b5a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在切换到内容视图并添加<code class="fe lr ls lt lu b">TabView()</code>。这个结构有两个初始化器:<code class="fe lr ls lt lu b">TabView(selection: Binding&lt;Hashable&gt;?, content: () -&gt; View) or TabView(content: () -&gt; View)</code>。</p><p id="29ca" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将选择第二个选项，因为在本教程中，我们不需要知道现在选择了哪张卡片。随着<code class="fe lr ls lt lu b">ForEach</code>的推出，我们将增加所有的模拟模型。</p><p id="92ad" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后添加<code class="fe lr ls lt lu b">.tabViewStyle</code>修改器，创造出漂亮的翻页效果(第23行)。你可能也注意到了我使用了<code class="fe lr ls lt lu b">indexDisplayMode: .never.</code></p><p id="341c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是故意使用的，因为我不想让经典的圆点在卡片下面显示页面索引。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="2900" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你可能想显示点，然后你应该坚持<code class="fe lr ls lt lu b">.tabViewStyle(PageTabViewStyle(indexDisplayMode: .always)<strong class="kx ir">.</strong></code></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/da9ac3fda476abeee858d54974336275.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FwV_ijjktRRMpjrgAUzvFw.png"/></div></div></figure><p id="911a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">给您现在你可以添加自定义字体，图像，按钮等。重新创建您需要的页面。GitHub上的这个例子:<code class="fe lr ls lt lu b"><a class="ae nc" href="https://github.com/sashamyshkina/tabViewExample" rel="noopener ugc nofollow" target="_blank">git@github.com:sashamyshkina/tabViewExample.git</a></code></p></div></div>    
</body>
</html>