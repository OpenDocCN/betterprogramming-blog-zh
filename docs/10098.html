<html>
<head>
<title>My Haskell VS Code Setup in 2021</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2021年我的Haskell VS代码设置</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/haskell-vs-code-setup-in-2021-6267cc991551?source=collection_archive---------0-----------------------#2021-11-29">https://betterprogramming.pub/haskell-vs-code-setup-in-2021-6267cc991551?source=collection_archive---------0-----------------------#2021-11-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="da66" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用调试、自动完成和其他Haskell特性来启动您的IDE</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/df873ad5ef1b029831194cf98155f005.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PBq0oZ-L7kY_oIxu.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">只是一个随机的哈斯克尔迷因(来源:<a class="ae kv" href="https://habr.com/en/post/441350/" rel="noopener ugc nofollow" target="_blank">https://habr.com/en/post/441350/</a></p></figure><p id="afef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最近开始学习Haskell。在涉猎一门新语言时，你要做的第一件事就是开发环境配置。我喜欢VS代码，主要从事这方面的工作。因此，在我的学习过程中，我毫不怀疑我将使用哪个编辑器。</p><p id="5493" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我做的第一件事是快速搜索Medium上的文章，这将帮助我配置编辑器。Matthew Doig的用VS代码设置Haskell是一个很好的起点，但是有点过时了。因此，我决定写一些类似的东西，但有更多的最新信息。</p><p id="85c2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一点我想预先说明一下，我用的是macOS，所以键盘快捷键和其他东西都是在MAC OS上测试的。它在您的笔记本电脑或个人电脑上可能会有所不同。</p><p id="8150" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，主要问题是默认情况下VS代码没有显示出支持Haskell的迹象。然而，只要遵循几个简单的步骤，这个问题就很容易解决。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/28477e5817075bc50f4686c5dc30984a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RIjNlHGlPfcFjbQm"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">初出茅庐的Haskeller首先看到的是缺乏语法突出</p></figure><p id="0a14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好吧，那我们就从这里开始吧。</p><h1 id="a517" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">步骤0。让你自己VS代码</h1><p id="f522" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">转到<a class="ae kv" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VS代码主页</a>并为您选择的操作系统下载安装程序。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/200e5aa68307e4d92317e529e1887fb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T1sDrgz1sgQh7-mC"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">是的，就像这样简单</p></figure><p id="8ec0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从现在开始，我假设您已经安装了VS代码，所以让我们继续实际配置它:)</p><h1 id="132d" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">第一步。GHCUp It</h1><blockquote class="mr ms mt"><p id="2ad3" class="kw kx mu ky b kz la jr lb lc ld ju le mv lg lh li mw lk ll lm mx lo lp lq lr ij bi translated"><a class="ae kv" href="https://www.haskell.org/ghcup/" rel="noopener ugc nofollow" target="_blank"> GHCup </a>是通用语言<a class="ae kv" href="https://www.haskell.org/" rel="noopener ugc nofollow" target="_blank"> Haskell </a>的安装程序。</p></blockquote><p id="80eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">GHCup是安装启动Haskell之旅所需的一切的最简单方法:编译器、打包和分发系统等等。听起来很棒，我们应该试试吗？毫无疑问。</p><p id="9e9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在VS代码内部或者作为独立程序打开终端，并在其中运行以下命令:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="4328" class="nd lu iq mz b gy ne nf l ng nh">$ curl --proto '=https' --tlsv1.2 -sSf https://get-ghcup.haskell.org | sh</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/882023cadd7b4005736de88ae09cfd16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*p57GR-isLjmekqIg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">只要按下回车键</p></figure><p id="9dab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该程序将询问您是否想要将所有需要的内容添加到您的<code class="fe ni nj nk mz b">.zshrc</code>或其他shell配置文件中。我更喜欢附加选项，尽管您可以自由选择:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/034d1c81dfb7bdfdb448d6802c94051c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zUzQZqh8DYfe_nlX"/></div></div></figure><p id="c3f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">之后，GHCup会提出安装<a class="ae kv" href="https://haskell-language-server.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Haskell语言服务器</a>和<a class="ae kv" href="https://docs.haskellstack.org/en/stable/README/" rel="noopener ugc nofollow" target="_blank">栈</a>。这两个以后肯定会派上用场，所以答案是<strong class="ky ir">“是”</strong>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/791ccabf68dcafc28dcedaa1766f134c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7oau6LfRR8CHnHaC"/></div></div></figure><p id="059a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦我们选择了我们需要的所有选项，安装过程应该开始:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/30ff8c3617fd75e7ba9bfe0b9abb9003.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rJNNYjeGpI8SKFrl"/></div></div></figure><p id="1cea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">按下<strong class="ky ir">进入</strong>继续，等待整个过程完成。只是一个建议:给自己拿杯茶，因为这可能需要一段时间。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/3b0b67870b6a8b3d704a6b52edc4f632.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RbpQceKKstYwjrY5"/></div></div></figure><p id="fa49" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">太好了，我们都准备好了。现在让我们配置我们的VS代码。我们需要为此创建一个新项目。对于这个目标，我更喜欢使用<strong class="ky ir">堆栈</strong>。因此，打开终端窗口并键入以下命令:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="b012" class="nd lu iq mz b gy ne nf l ng nh">$ stack new vscode-haskell-config<br/>$ cd vscode-haskell-config<br/>$ stack setup</span></pre><h1 id="27cc" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">第二步。语法突出显示</h1><p id="a11b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们想从文本编辑器或IDE中得到的第一件东西是彩色代码。通过安装专用的扩展，很容易实现这一点:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/ed30caa3a697bff98ba95d1fd9fd0d36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HnpNaA4FEX9nYhTl"/></div></div></figure><p id="401f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，可能需要重新加载编辑器，所以要注意。安装完成后，你一开始看到的<code class="fe ni nj nk mz b">app/Main.hs</code> <em class="mu"> </em>应该是这样的，这取决于你的配色方案:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/fa49d2ca67406544641b1bf5ef6abcb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tHpC6rfA5GOfHSgJ"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">啊，现在好多了</p></figure><p id="a8a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这无疑是一个进步，但离IDE的功能还差得很远。在上一节中，我们已经添加了<strong class="ky ir"> Haskell语言服务器(HLS) </strong>，在VS代码中启用它的功能会很好。</p><h1 id="59c1" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">第三步。泵与代码上升</h1><p id="9411" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">配置<strong class="ky ir"> HLS </strong>的过程真的很复杂，除了它不是。你需要遵循两个简单的步骤来实现它:</p><p id="702b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">̶̶̶1̶̶̶.̶̶̶̶̶̶i̶̶̶n̶̶̶s̶̶̶t̶̶̶a̶̶̶l̶̶̶l̶̶̶̶̶̶h̶̶̶a̶̶̶s̶̶̶k̶̶̶e̶̶̶l̶̶̶l̶̶̶̶̶̶s̶̶̶y̶̶̶n̶̶̶t̶̶̶a̶̶̶x̶̶̶̶̶̶h̶̶̶i̶̶̶g̶̶̶h̶̶̶l̶̶̶i̶̶̶g̶̶̶h̶̶̶t̶̶̶i̶̶̶n̶̶̶g̶̶̶̶̶̶e̶̶̶x̶̶̶t̶̶̶e̶̶̶n̶̶̶s̶̶̶i̶̶̶o̶̶̶n̶̶̶.̶̶̶̶̶̶w̶̶̶a̶̶̶i̶̶̶t̶̶̶̶̶̶a̶̶̶̶̶̶s̶̶̶e̶̶̶c̶̶̶…̶̶̶̶̶̶w̶̶̶e̶̶̶̶̶̶f̶̶̶i̶̶̶n̶̶̶i̶̶̶s̶̶̶h̶̶̶e̶̶̶d̶̶̶̶̶̶i̶̶̶t̶̶̶̶̶̶j̶̶̶u̶̶̶s̶̶̶t̶̶̶̶̶̶a̶̶̶̶̶̶f̶̶̶e̶̶̶w̶̶̶̶̶̶m̶̶̶i̶̶̶n̶̶̶u̶̶̶t̶̶̶e̶̶̶s̶̶̶̶̶̶a̶̶̶g̶̶̶o̶̶̶…̶̶̶̶̶̶c̶̶̶o̶̶̶o̶̶̶l̶̶̶,̶̶̶̶̶̶h̶̶̶u̶̶̶h̶̶̶？̶̶̶̶̶̶t̶̶̶h̶̶̶u̶̶̶s̶̶̶,̶̶̶̶̶̶t̶̶̶h̶̶̶e̶̶̶̶̶̶s̶̶̶i̶̶̶n̶̶̶g̶̶̶l̶̶̶e̶̶̶̶̶̶s̶̶̶t̶̶̶e̶̶̶p̶̶̶̶̶̶l̶̶̶e̶̶̶f̶̶̶t̶̶̶.̶̶̶</p><p id="4303" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">1.安装HLS支持扩展:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/11a2ba8eff8ed969a01596748783b53c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XH31se0RW_x9cgkF"/></div></div></figure><p id="0d3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击<strong class="ky ir">“安装”</strong>按钮，等待编辑器完成剩下的魔术。给你。安装后，我们的目标IDE在我们的<code class="fe ni nj nk mz b">app/Main.hs</code>中显示一条红色曲线:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/73df718d2d9ac5256f47bef1c783b0d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*begMnOWrkZ5h8jx6"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">它还活着！</p></figure><p id="1e31" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要解决这个问题，我们需要进入终端中的项目目录，并键入以下命令:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="18e4" class="nd lu iq mz b gy ne nf l ng nh">$ stack clean --full<br/>$ stack build</span></pre><p id="df85" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在一切都应该是彩色的了:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/4fe199c7c23291ef9fd7acf9543039d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6jQGr5Rmpkjr-iHz"/></div></div></figure><p id="5d64" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">HLS 是一个非常有用的工具。它为我们的VS代码(和我们，ofc)提供了:</p><ul class=""><li id="dffb" class="nn no iq ky b kz la lc ld lf np lj nq ln nr lr ns nt nu nv bi translated">悬停时的类型信息和文档</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/744cb46ff6247f3724639359a07147e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jkGO9yCSVz5P8Pch"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">太棒了，对吧？</p></figure><ul class=""><li id="2158" class="nn no iq ky b kz la lc ld lf np lj nq ln nr lr ns nt nu nv bi translated">自动完成</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/75f8b70df451ec3e91060c31e27f2aa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YhmF70EC4YKX8GAE"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">虽然不太理想</p></figure><ul class=""><li id="d344" class="nn no iq ky b kz la lc ld lf np lj nq ln nr lr ns nt nu nv bi translated">来自<code class="fe ni nj nk mz b"><a class="ae kv" href="https://github.com/ndmitchell/hlint" rel="noopener ugc nofollow" target="_blank">hlint</a></code>的重构和代码风格建议</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/5e25c891a19bb4b7de5570746be4c4e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6v1yNB4bm4r395-8"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">免费的熟练同行评审员:)</p></figure><ul class=""><li id="2ba3" class="nn no iq ky b kz la lc ld lf np lj nq ln nr lr ns nt nu nv bi translated">IDE有望带来的其他便利特性</li></ul><h1 id="8c46" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">有代码格式化吗？</h1><p id="16be" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这是个很好的问题。实际上，<strong class="ky ir"> HLS </strong>为你提供了那些能力，虽然我没有故意告诉你。有几个缺省的格式提供程序叫做<strong class="ky ir">或moru</strong>。我强烈建议你把它们都尝一尝，选择一个能满足你的需求和口味的。</p><p id="8a12" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管如此，我个人的偏好是<strong class="ky ir">布列塔尼</strong>。这是我的文章，因此，如果期望在这里看到一些不同的东西，你就不走运了:)</p><p id="3761" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我将展示如何轻松地将格式提供者更改为<strong class="ky ir"> Brittany </strong>。</p><p id="5c8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，在键盘上按下此组合键<code class="fe ni nj nk mz b">Cmd + ,</code>或点击<strong class="ky ir">代码- &gt;首选项- &gt;设置</strong>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/1cf3a7e3940b85bc7eca9e0f6211d8e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UWfEG9_I40yHMakl"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">为方便起见，仅举一个例子</p></figure><p id="4cf9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">准备好了吗？很好，继续前进。现在在设置的搜索栏中输入<strong class="ky ir"> "Haskell" </strong>，并找到<strong class="ky ir">"格式提供者"</strong>部分，在那里你会看到<strong class="ky ir">或</strong>被选中:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/563fd4c6171056c092cb22c972377672.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Lr56xpFynJUIuBKB"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仅为了方便起见，请举例说明(2)</p></figure><p id="ad9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们实际上选择一个不同的，这是<strong class="ky ir">布列塔尼</strong>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/3778506ae3093ee954b38fa986baf2c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L-rnxE9Dd3FqL1II"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">一个布列塔尼格式化他们，可以这么说</p></figure><p id="d6de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好吧，如果我们想确保它实际工作，因为我们不相信那些花哨的编辑？首先，我们需要添加一些代码来查看实际的格式化。</p><p id="7c8a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们打开<code class="fe ni nj nk mz b">./src/Lib.hs</code>文件，因为我们将在那里放置我们全新的函数。你可以删除文件的全部内容，不用担心。</p><blockquote class="mr ms mt"><p id="16c9" class="kw kx mu ky b kz la jr lb lc ld ju le mv lg lh li mw lk ll lm mx lo lp lq lr ij bi translated">请重新输入有这些不一致的例子，因为我们会自动格式化它。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/85217c65a3ceb2e34fafd0691cf546b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xacxClpbq5_SNBPuPe2qrg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">"之前"</p></figure><p id="2ae3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">等等……我们到底该如何使用格式化程序呢？按下<code class="fe ni nj nk mz b">Opt + Shift + F</code>，布列塔尼会做重物。</p><p id="4d00" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请不要担心，如果你不明白发生了什么，重点是测试自动格式化。好像工作的挺好的:)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/ee70073bc04f62e699d788606fd31d54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ne5dYi8sxCi5UheRXn2uxg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">"之后"</p></figure><h1 id="0c99" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">Haskell代码调试</h1><p id="d7e3" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">尽管有这样的想法，如果Haskell代码按预期编译，调试功能可能是有用的。遗憾的是，<strong class="ky ir"> HLS </strong>似乎没有带调试器(至少截至2021年11月。)</p><p id="6de6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">幸运的是，这个“弱点”很容易通过安装另一个很酷的扩展来解决。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/8241bad9a8d46f06793cc0f671bf99d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GlcBUSrV8OX92Q5I"/></div></div></figure><p id="b16a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你刚刚安装它吗？太棒了。我们差不多可以开始调试了。在实际开始之前，我们必须a)添加测试和b)配置调试器。</p><h2 id="3bef" class="nd lu iq bd lv nz oa dn lz ob oc dp md lf od oe mf lj of og mh ln oh oi mj oj bi translated">a)添加测试</h2><p id="a3fd" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">如果我们试图在没有任何测试的情况下运行调试器，它会退出并说“测试套件尚未实现”。</p><p id="780b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这正是我们从跑步中得到的东西</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="420e" class="nd lu iq mz b gy ne nf l ng nh">$ stack test</span></pre><p id="375d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以在<code class="fe ni nj nk mz b">test/Spec.hs</code>中观察到这个字符串:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/e68c41ef74a2649d1f92e14cb2438666.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uplkbS7Ol8tU6ZJl"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">啊，给你</p></figure><p id="7863" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好吧，好吧。似乎我们只需要实现一些测试。听起来很合理。</p><p id="1312" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，我们将使用<a class="ae kv" href="https://hackage.haskell.org/package/QuickCheck" rel="noopener ugc nofollow" target="_blank"> QuckCheck </a> <em class="mu"> </em>。这是一个很棒的库，允许我们做一些基于属性的测试。我们将只为<code class="fe ni nj nk mz b">pal</code>函数编写一个测试，因为我们需要测试调试器，而不是编写一个合适的测试套件。</p><p id="2671" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，让我们将<code class="fe ni nj nk mz b">QuickCheck</code>添加到我们的项目中。转到<code class="fe ni nj nk mz b">package.yaml</code>，在<code class="fe ni nj nk mz b">tests</code>部分找到<code class="fe ni nj nk mz b">dependencies</code>小节。随意添加库作为依赖项:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/91098c58bb6a86e7cb61a7207bf9685e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wHTx5HJ4gp2y5E8L"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">见第49行，补充？package.yaml现在看起来更大了</p></figure><p id="5ad7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">无聊的部分几乎结束了，我们即将进入基于属性的测试的可怕世界。请再次打开<code class="fe ni nj nk mz b">./test/Spec.hs</code>文件。开始时需要决定的重要事情是:要测试什么？因为我们没有太多的选项，只需导入<code class="fe ni nj nk mz b">pal</code>:)</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="322d" class="nd lu iq mz b gy ne nf l ng nh">import Lib (pal)</span></pre><p id="6d00" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步是添加另一个导入，这次是QuickCheck。在这之后，你的<code class="fe ni nj nk mz b">Spec.hs</code>有以下内容:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="5d85" class="nd lu iq mz b gy ne nf l ng nh">import Test.QuickCheck<br/>import Lib (pal)</span></pre><p id="f639" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们编写我们的第一个属性测试。我们将它命名为<code class="fe ni nj nk mz b">prop_reverseInvariant</code>，它检查应用于反向回文的<code class="fe ni nj nk mz b">pal</code>函数是否也应该返回<code class="fe ni nj nk mz b">True</code>。</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="230c" class="nd lu iq mz b gy ne nf l ng nh">import Test.QuickCheck<br/>import Lib (pal)</span><span id="7c59" class="nd lu iq mz b gy om nf l ng nh">prop_reverseInvariant :: String -&gt; Bool<br/>prop_reverseInvariant text = pal text == pal (reverse text)</span></pre><p id="372e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用<strong class="ky ir">布列塔尼</strong>格式化后，文件内容如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/c6a804ab530cee7626e1e455865633de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OqNBdxbrvwlBeMZ-5QFz6A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">不是咩咩…一点也不差</p></figure><p id="59f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注。</strong>您可能遇到过以下问题:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="1fd4" class="nd lu iq mz b gy ne nf l ng nh">Warning: Installation path /Users/&lt;username&gt;/.local/bin not found on the PATH environment variable.</span></pre><p id="9535" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要解决这个问题，您需要做的就是将它添加到您的<code class="fe ni nj nk mz b">.zshrc</code>或其他shell配置文件中:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="5224" class="nd lu iq mz b gy ne nf l ng nh">export PATH=$PATH:~/.local/bin</span></pre><h2 id="51a6" class="nd lu iq bd lv nz oa dn lz ob oc dp md lf od oe mf lj of og mh ln oh oi mj oj bi translated">b)配置调试器</h2><p id="3962" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在VS代码中选择<strong class="ky ir">“运行和调试”</strong>侧边栏按钮:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/8062b4ece1fb810460a8817bd79eb5ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NJHK6-pvz5YKDgPf"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">播放按钮上有个小窃听器的那个</p></figure><p id="81dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步是什么？我们需要首先创建一个<code class="fe ni nj nk mz b">launch.json</code>文件，以便配置与“IDE应该如何运行我们的调试器”相关的所有内容为此，请单击“创建一个launch . JSON’文件。在下拉菜单中选择<code class="fe ni nj nk mz b">haskell-debug-adapter</code>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/182f9bf1ce04b4ea8b7525f489c920fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*l2kdhSLR4mPxRlkh"/></div></div></figure><p id="01bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">恭喜，带有各自配置的<code class="fe ni nj nk mz b">.vscode</code>目录被创建在项目的根目录下。但是…我们感兴趣的是实际运行调试器，而不是做那些无聊的事情。请耐心等待:)</p><p id="e75b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe ni nj nk mz b">test/Spec.hs</code>文件中添加几行:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="f271" class="nd lu iq mz b gy ne nf l ng nh">main :: IO ()<br/>main = do<br/>  quickCheck prop_reverseInvariant</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/fd6f2f4c6142174e58d2e0c419e1a58a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2gkV7LSmsn9v7M-zb3qB1Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Spec.hs现在看起来足够接近这个了</p></figure><p id="9b85" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在第9行插入一个断点，用<code class="fe ni nj nk mz b">haskell(stack)</code> <em class="mu"> </em>选项运行调试器。确保它实际上停止了执行，因为这是重点:)</p><h1 id="d315" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">拥有一个配置好的IDE的Haskell之旅</h1><p id="98ed" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">当我们谈论为Haskell设置VS代码时，这就是大部分了。现在，您已经拥有了所有的语法突出显示和IDE功能，以及调试代码的工具。</p><p id="4b6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">开发中可能还有其他有用的东西，比如<a class="ae kv" href="https://github.com/ndmitchell/ghcid" rel="noopener ugc nofollow" target="_blank"> ghcid </a>。尽管它与VS代码没有关系，因此，您可以自己随意探索这些工具:)</p><p id="726a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你还在等什么？享受学习Haskell的乐趣吧！:)</p><p id="bcdd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> UPD。</strong>我在LinkedIn和Reddit上收到了一些反馈，我认为这些反馈相当有用，但我不想邀功。</p><p id="3d3b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可能会在<code class="fe ni nj nk mz b"><a class="ae kv" href="https://www.reddit.com/r/haskell/comments/r4j1y8/haskell_vs_code_setup_in_2021/" rel="noopener ugc nofollow" target="_blank">r/haskell</a></code> <strong class="ky ir"> </strong>线程上发现一些有趣的评论。看看这个。</p><p id="05b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想补充的另一点是由<a class="ae kv" href="https://www.linkedin.com/in/ramonsotomathiesen/" rel="noopener ugc nofollow" target="_blank">Ramon Soto mathie sen</a>(非常感谢)在LinkedIn上概述的，关于<code class="fe ni nj nk mz b">-with-rtsopts=-N -qg</code> GHC国旗。这个<a class="ae kv" href="https://paste.tomsmeding.com/vSQYan1j" rel="noopener ugc nofollow" target="_blank">粘贴</a>可能会让你更清楚为什么你可能需要添加那个。</p></div></div>    
</body>
</html>