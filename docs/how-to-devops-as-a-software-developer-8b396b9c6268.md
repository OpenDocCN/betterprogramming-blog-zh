# 作为软件开发人员如何“开发”

> 原文：<https://betterprogramming.pub/how-to-devops-as-a-software-developer-8b396b9c6268>

## 安全性、负载平衡器、网络、内存分配、连接管理等等

![](img/62c70e7afd72ed1833e689f74da7741a.png)

Joshua Woroniecki 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

术语 *DevOps* 已经席卷了 IT 行业。从建立 [CICD](https://en.wikipedia.org/wiki/CI/CD) 管道到管理您的云和 Kubernetes 基础设施，DevOps 的工程师一直站在完成这些任务的最前沿。但是 DevOps 到底是什么？

阐明 DevOps 是什么是我们理解软件和系统的核心。因此，让我们从强调这两个基本术语的含义开始:

*   软件——我们编写、构建和部署的代码
*   系统——有助于我们代码运行的一切，如基础设施、安全性、网络等。

在过去的三年里，在我完全不知道的情况下，我从被称为*软件开发人员*变成了被业界称为 *DevOps 工程师*、*云工程师*或*系统工程师*。但是当我回头看的时候，我从来没有真正做过任何软件工程师可以做的事情，我认为，应该做的事情。我只是简单地承担了一些任务，这些任务不仅有趣，而且对我自己的代码和软件的运行也是必不可少的。在这个过程中，我发现对我的代码和它运行的平台有了新的理解。这最终改进了组织的软件交付。

这就是 DevOps。

这不是一个新的角色或新的技能；它只需要工程师——在过道的两边，软件和系统——从整体上用系统的意识和复杂性来装备自己，而不是各自为政。

这是 AWS 对 DevOps 的定义的一个很好的摘录，与我的观点非常吻合。

> “DevOps 是文化理念、实践和工具的组合，它提高了组织高速交付应用程序和服务的能力:以比使用传统软件开发和基础架构管理流程的组织更快的速度发展和改进产品。”

这本质上意味着工程师应该打破常规，从整体上理解软件和系统。这缓解了许多工程问题。

因此，没有进一步的事情要做，这里有一些软件开发人员绝对应该知道的系统工程的核心概念。最终，他们会帮助你写出更好的代码。

# 1.了解你的操作系统

你的软件或代码只有在与底层系统和谐工作时才是有效的。

构建软件的非生产环境可能与生产机器的设置有很大不同。您的代码需要事先考虑这些。尽管 Docker 缓解了一些问题，但了解以下内容仍然至关重要:

## 1.1 磁盘 I/O

如果您的软件读写文件系统，请注意 [fs 类型](https://en.wikipedia.org/wiki/File_system)及其底层磁盘 I/O 限制。例如，如果您的磁盘是 NFS 装载的，I/O 操作将会相对较慢。

作为一个安全的规则，总是考虑 I/O 操作的批处理请求。

## 1.2 内存分配

应用程序将使用多少操作系统的物理内存？根据您可用的用例和硬件资源，确定您是需要将它作为独立应用程序还是微服务来运行。

这将决定您可以在代码中同时执行多少操作。你的`thread count`*`I/O buffer size,`*`in-memory caching`都是靠这个。**

## **1.3 处理外部连接**

**大多数现代应用程序通过公开 HTTP APIs 来工作。处理这个问题的 web 服务器需要对重要的参数进行限制，比如`incoming_payload_size`、`max_conncurrent_connections`和`connection-timeout`值。**

**在更低的层次上，操作系统内核跟踪连接状态和逻辑流。例如，在 Linux 上，连接跟踪是由`conntrack`完成的，它定义了连接限制。在 RHEL，你可以这样检查:**

```
**$  sysctl net.netfilter.nf_conntrack_count net.netfilter.nf_conntrack_maxnet.netfilter.nf_conntrack_count = 167012
net.netfilter.nf_conntrack_max = 262144**
```

## **1.4 操作系统信号**

**操作系统向正在运行的进程发出各种[类型的信号](https://en.wikipedia.org/wiki/Signal_(IPC))，以维持整个系统的稳定性。**

**最重要的是`SIGNINT`、`SIGKILL`和`SIGHUP`，它们在出现任何故障时发出终止进程的信号。这些信号让您的代码有机会优雅地关闭并处理任何关键的正在进行的事务。**

**未能处理这些信号通常是诸如陈旧文件句柄、幽灵进程、内存泄漏和数据损坏等问题的根本原因。**

# **2.了解网络和安全的基础知识**

**在将应用程序部署到集成环境中时，有多个因素将决定应用程序的连接性。**

## **2.1 网络政策**

**理解 IP 子网、路由策略、防火墙和 DNS 规则等关键概念。这些决定了与应用程序之间的外部连接。**

## **2.2 SSL 证书**

**您的应用程序可能需要在计算机上安装客户端证书来连接和信任远程 HTTPS 终结点。或者，如果您是服务器，您可能需要由您组织的根 CA 签名的服务器证书。**

**这些通常由您组织中的安全团队强制实施。意识到这些并预先评估你的软件可能需要什么。**

**如果您的应用程序运行在 Docker 上，那么这些证书必须被加载到您的容器中。**

# **3.构建和部署(CICD)**

**软件的构建过程和部署涉及重复的任务，这些任务可以使用现代工具自动化，如[詹金斯](https://www.jenkins.io/)和[特拉维斯 CI](https://travis-ci.org/) 。这些是开源的 CICD(持续部署和持续集成)工具，它们通过创建管道来协调您的构建和部署事件。**

**目标是能够检入您的代码更改，并让系统自动触发构建、运行测试，并无缝地部署到集成环境中。这大大降低了上市时间成本，并提高了组织的整体生产力。**

# **4.了解您的基础架构(或云)**

**你的代码在哪里运行？**

**了解应用运行的基础架构环境。这可以极大地改进你的软件代码和设计。**

## **4.1 数据中心/区域/VPC**

**为了实现高可用性，现代应用程序部署通常分布在多个地理位置或地区。这意味着您需要设计软件来支持这样的体系结构，以便在数据中心之间以主动-主动方式运行。**

## **4.2 无服务器架构**

**无服务器架构允许您的应用程序代码作为功能在云中运行，而无需为其提供服务器和虚拟机。例如，你的用例可能更适合在 AWS 上运行 Lamda 函数(或者在 GCP 上运行云函数)，而不是一个新的微服务。**

## **4.3 负载平衡器**

**LBs(负载平衡器)在决定外部流量如何路由到您的应用程序方面起着关键作用。它们通常位于所有 API 的前面，以便在应用程序实例之间分配负载。**

**但是为了有效地执行负载平衡，它们需要由您的应用程序公开一个健康检查端点(例如，`https://my-app-1:5601/health`)。这是为了评估实例是死的还是活的。请务必为您的应用程序提供快速有效的健康检查逻辑。**

**两种最常见的负载平衡算法是:**

*   **循环调度—通过将请求分散到所有工作负载来工作**
*   **最少连接数—通过将请求转发到具有较少打开连接的实例来工作。这样，如果您的应用程序实例负载过重，就不太可能收到新的请求。**

# **DevOps 让你成为更好的开发者**

**如果有一件事我想让你从这一切中吸取教训，那就是 DevOps 不是一个新角色。这是你拓宽视野的一种方式，可以打破行业经常给我们设置的严格角色和责任的框框。**

**DevOps 允许您超越代码，考虑生命周期中面临的操作挑战。这不仅提高了整体生产力，还改善了软件设计和代码质量，减少了故障。**

**最终结果是一个高度可用的容错软件。**