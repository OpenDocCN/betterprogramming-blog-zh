<html>
<head>
<title>How To Display Multiple Android Bottom Sheets in Jetpack Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Jetpack Compose中显示多个Android底部表单</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-display-multiple-android-bottom-sheets-in-jetpack-compose-6c46e3536ab?source=collection_archive---------3-----------------------#2021-08-25">https://betterprogramming.pub/how-to-display-multiple-android-bottom-sheets-in-jetpack-compose-6c46e3536ab?source=collection_archive---------3-----------------------#2021-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4e06" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">构建可定制的Android应用</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/35318f6eeaf894d46a389384021c3b00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*y__LoyEMzTsakg3j"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@xps?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> XPS </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="e6d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我们将学习如何基于用户交互显示多个底部表单。要学习compose中底层工作表的基础知识，我强烈建议您阅读先决条件一节中的文章。</p><h1 id="b756" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">介绍</h1><p id="0033" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Jetpack Compose是谷歌最近试图让Android开发者轻松构建UI的尝试之一。</p><blockquote class="ms mt mu"><p id="1ed4" class="kz la mv lb b lc ld ju le lf lg jx lh mw lj lk ll mx ln lo lp my lr ls lt lu im bi translated"><em class="it">“Jetpack Compose是一个用于构建原生Android UI的现代工具包。Jetpack Compose以更少的代码、强大的工具和直观的Kotlin APIs简化并加速了Android上的UI开发。”— </em> <a class="ae ky" href="https://developer.android.com/jetpack/compose/tutorial" rel="noopener ugc nofollow" target="_blank"> <em class="it">安卓开发者</em> </a></p></blockquote><p id="1746" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Jetpack Compose的稳定版本1.0最近发布，这意味着它的生产就绪。因此，这将是学习如何使用下一代UI套件进行Android开发的大好时机。</p><p id="e247" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您需要安装Android Studio —北极狐(2020.3.1) <strong class="lb iu"> </strong>版本才能使用Jetpack Compose。</p><h1 id="e4f3" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">先决条件</h1><p id="4aac" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在进一步学习之前，您必须具备如何使用Jetpack Compose的基本知识。如果你是作曲新手，我强烈推荐阅读以下文章:</p><ul class=""><li id="d0bd" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/jetpack-compose-components-part-1-a80717dbfb59">喷气背包构成组件(第一部分)</a></li><li id="d62d" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/explore-android-bottom-sheets-in-jetpack-compose-50eff0257231">探索Jetpack Compose中的Android底部表单</a></li><li id="b198" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/build-android-layouts-in-jetpack-compose-bda2e0837f5e">在JetPack Compose中构建Android布局</a></li><li id="cb18" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/android-bottom-navigation-bar-with-jetpack-compose-8c2aa02b933d"> Android底部导航栏与Jetpack组合</a></li></ul><h1 id="fd09" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">设计多重交互</h1><p id="b1b2" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在探索了compose中的底部表单之后，我在这里记录了<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/explore-android-bottom-sheets-in-jetpack-compose-50eff0257231">，我非常兴奋地尝试如何基于用户交互显示多个底部表单。为了做到这一点，我们首先需要在实际的布局中添加多个交互，在我们的例子中只是三个按钮。看一看:</a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><h1 id="b867" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">底部板材类型</h1><p id="d728" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">让我们通过使用一个枚举类来定义我们所有的底部表单类型。看一看:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="e335" class="nu lw it nq b gy nv nw l nx ny">enum class BottomSheetType() {<br/>    TYPE1, TYPE2, TYPE3<br/>}</span></pre><p id="4f86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是在<code class="fe nz oa ob nq b">BottomSheetType</code>的主布局中定义一个记忆变量。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="4b11" class="nu lw it nq b gy nv nw l nx ny">var currentBottomSheet: BottomSheetType? by remember{<br/>        mutableStateOf(null)<br/>    }</span></pre><h1 id="165e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><code class="fe nz oa ob nq b">BottomSheetScaffold</code></h1><p id="13c6" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><code class="fe nz oa ob nq b">ModalBottomSheetLayout</code>是一个简单的可组合函数，类似于<code class="fe nz oa ob nq b">BottomSheetScaffold</code>，用于显示模态底部表单。现在我们需要将<code class="fe nz oa ob nq b">mainScreen</code>中的脚手架更新到<code class="fe nz oa ob nq b">ModalBottomSheetLayout</code>。</p><p id="582c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种改变需要三个方面的改变:</p><ol class=""><li id="2a3c" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu oc nf ng nh bi translated">ModalBottomSheetValue，用于在重新组合过程中保持底部工作表状态的变化。</li><li id="af6d" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu oc nf ng nh bi translated"><code class="fe nz oa ob nq b">ModalBottomSheetLayout</code>的<code class="fe nz oa ob nq b">sheetContent</code>参数，用于绘制底层表内容。</li><li id="2b77" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu oc nf ng nh bi translated">我们需要用<code class="fe nz oa ob nq b">ExperimentalMaterialApi</code> <strong class="lb iu">来注释<code class="fe nz oa ob nq b">MainScreen</code>可组合函数。</strong></li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="f9f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在为了简单起见，我们将创建Kotlin lambda函数来关闭和打开底部的工作表。这些功能将通过点击主屏幕上的按钮和底部工作表中的关闭按钮来调用。在调用<code class="fe nz oa ob nq b">openSheet</code>之前，我们将为<code class="fe nz oa ob nq b">currentBottomSheet</code>类型分配适当的值，以便调用预期的底部表单。看一下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h1 id="7a50" class="lv lw it bd lx ly ok ma mb mc ol me mf jz om ka mh kc on kd mj kf oo kg ml mm bi translated">多层底板</h1><p id="ce90" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">首先，我们需要创建三个底层的可组合函数，它们将在主应用程序的各个交互中被调用。它们有一个简单的框布局，用简单的文本显示底部工作表的类型，用一个按钮关闭工作表。看看这段代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="ba02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们需要基于<code class="fe nz oa ob nq b">BottomSheetType</code>触发适当的底层可组合函数。看一下代码:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="e3fa" class="nu lw it nq b gy nv nw l nx ny">@Composable<br/>fun SheetLayout(<br/>    bottomSheetType: BottomSheetType,<br/>    closeSheet : () -&gt; Unit<br/>){<br/><br/>    when(bottomSheetType){<br/>        BottomSheetType.<em class="mv">TYPE1 </em>-&gt; Screen1(closeSheet)<br/>        BottomSheetType.<em class="mv">TYPE2 </em>-&gt; Screen2(closeSheet)<br/>        BottomSheetType.<em class="mv">TYPE3 </em>-&gt; Screen3(closeSheet)<br/>    }<br/><br/>}</span></pre><h1 id="6752" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">将事情整合在一起</h1><p id="2f18" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在我们只需要将我们的<code class="fe nz oa ob nq b">SheetLayout</code> <strong class="lb iu"> </strong>可组合函数赋给<code class="fe nz oa ob nq b"><em class="mv">ModalBottomSheetLayout</em></code> <em class="mv">的<code class="fe nz oa ob nq b">sheetContent</code>参数。</em>剩下的事情通过重组来处理。看一下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="3519" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在只需从您的活动中触发它，看看代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="c11d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看看最终的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/c4afeb0f6998e719eb9cfb5174b64522.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*CpnUrb1tNZ2q8ATl3uxwiw.gif"/></div></figure><h1 id="371c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">奖金</h1><p id="f6a2" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我最近看到了Satya Pavan Kantamani发表的这篇关于Kotlin代表的优秀文章。强烈建议:</p><div class="oq or gp gr os ot"><a href="https://pavan-careers5208.medium.com/kotlin-delegates-19d0445848eb" rel="noopener follow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd iu gy z fp oy fr fs oz fu fw is bi translated">科特林代表</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">了解科特林的不同代表</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">pavan-careers5208.medium.com</p></div></div><div class="pc l"><div class="pd l pe pf pg pc ph ks ot"/></div></div></a></div><p id="533c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前就这些。希望你学到了有用的东西。快乐作曲！</p><p id="a28c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。</p></div></div>    
</body>
</html>