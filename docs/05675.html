<html>
<head>
<title>Functional Programming Series (2): What Is a Monoid?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">函数式编程系列(二):什么是幺半群？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/functional-programming-series-2-what-is-a-monoid-75fb23af4319?source=collection_archive---------9-----------------------#2020-07-27">https://betterprogramming.pub/functional-programming-series-2-what-is-a-monoid-75fb23af4319?source=collection_archive---------9-----------------------#2020-07-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c100" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">幺半群是函数编程世界的基础</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5d516a698df7af29dca28e949b577d7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FmxNRFSS29fju3hF"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@estherrj?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Esther Jiao </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="ea90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于那些对函数式编程感兴趣的人，我将谈谈<em class="lv">幺半群</em>以及为什么提前理解它们非常重要。</p><p id="0fdb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要混淆:这不是<em class="lv">单子</em>——这是<em class="lv">单子。我很肯定你已经知道幺半群，并且你几乎每天都在使用它们——你只是不知道它们的术语。</em></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="5a95" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">阅读前</h1><p id="8b9f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这是一个关于函数式编程的系列，所以如果你没有看过前面的帖子，你可能不明白这篇文章要讲什么。</p><h2 id="a40e" class="na me it bd mf nb nc dn mj nd ne dp mn li nf ng mp lm nh ni mr lq nj nk mt nl bi translated">你可以看看与这个话题相关的其他帖子</h2><ul class=""><li id="f7fb" class="nm nn it lb b lc mv lf mw li no lm np lq nq lu nr ns nt nu bi translated"><a class="ae ky" href="https://medium.com/better-programming/functional-programming-series-what-is-a-semigroup-c1ff987db8c" rel="noopener">《函数编程系列(一):什么是半群？</a></li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="50fc" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">身份功能</h1><p id="1153" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">让我们假设有一个名为<code class="fe nv nw nx ny b">identity</code>的函数，它接受<code class="fe nv nw nx ny b">A</code>并返回<code class="fe nv nw nx ny b">A</code>。</p><pre class="kj kk kl km gt nz ny oa ob aw oc bi"><span id="ed22" class="na me it ny b gy od oe l of og">const identity: &lt;A&gt;(a: A): A =&gt; a;</span><span id="1da9" class="na me it ny b gy oh oe l of og">interface Student {<br/>  name: string;<br/>  age: number;<br/>}</span><span id="97d3" class="na me it ny b gy oh oe l of og">identity&lt;number&gt;(3) // 3<br/>identity&lt;string&gt;('hello') // hello<br/>identity&lt;Student&gt;({ <br/>  name: 'Bincent',<br/>  age: 5<br/>}); // { name: 'Bincent', age: 5 }</span></pre><p id="e9e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在函数式编程中，这个无用的函数(看起来是无用的)是我们将要讨论的许多其他概念(比如幺半群)的重要因素。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/e6428b02b0a64658e34bf63a9bd4387a.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*KP6HXiTwPKL0zRjL.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://commons.wikimedia.org/wiki/User:RupertMillard" rel="noopener ugc nofollow" target="_blank">鲁珀特·米勒德</a>在<a class="ae ky" href="https://en.wikipedia.org/wiki/Magma_%28algebra%29#/media/File:Magma_to_group2.svg" rel="noopener ugc nofollow" target="_blank">维基媒体</a>上提供</p></figure><p id="6603" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基本上，幺半群是保持半群的<a class="ae ky" href="https://medium.com/better-programming/functional-programming-series-what-is-a-semigroup-c1ff987db8c" rel="noopener">规则和单位元规则的元素集合。</a></p><p id="a355" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果<code class="fe nv nw nx ny b">S</code>是元素的集合，<code class="fe nv nw nx ny b">a</code>是<code class="fe nv nw nx ny b">S</code>的成员，<code class="fe nv nw nx ny b">·</code>是真二元运算，<code class="fe nv nw nx ny b">a·e = e·a ∈ S</code>必须满足是幺半群。</p><pre class="kj kk kl km gt nz ny oa ob aw oc bi"><span id="e073" class="na me it ny b gy od oe l of og">Identity: a ∈ S, a·e = e·a = a ∈ S</span></pre><p id="1602" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一些文档使用数字1和下标中的任何字母来调用它——例如，<em class="lv"> 1x </em>引用变量<em class="lv"> x </em>上的标识。或者有些文档只使用一个字母，如<em class="lv"> i </em>或<em class="lv"> e. </em></p><p id="6f3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是关于幺半群的所有知识，让我们用一些简单的例子来练习。</p><h1 id="7e62" class="md me it bd mf mg oj mi mj mk ok mm mn jz ol ka mp kc om kd mr kf on kg mt mu bi translated">幺半群例子</h1><p id="a27a" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这里有一个类<code class="fe nv nw nx ny b">Monoid</code>可以帮助你理解它的概念。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="6e19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个类有三个方法:</p><ul class=""><li id="ca58" class="nm nn it lb b lc ld lf lg li oq lm or lq os lu nr ns nt nu bi translated"><code class="fe nv nw nx ny b">concat</code>:接受两个参数并返回参数之和</li><li id="15bc" class="nm nn it lb b lc ot lf ou li ov lm ow lq ox lu nr ns nt nu bi translated"><code class="fe nv nw nx ny b">identity</code>:接受一个参数，不做任何事情就返回该参数</li><li id="f42a" class="nm nn it lb b lc ot lf ou li ov lm ow lq ox lu nr ns nt nu bi translated"><code class="fe nv nw nx ny b">pick</code>:接受一个参数，该参数表示要从集合中选取的元素数量的计数值——这只是为了选取随机元素</li></ul><p id="8a87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">和两个断言函数:</p><ul class=""><li id="7f7b" class="nm nn it lb b lc ld lf lg li oq lm or lq os lu nr ns nt nu bi translated"><code class="fe nv nw nx ny b">assertNumber</code>:检查参数是否为数字类型。否则，它会抛出一个错误。</li><li id="7a3e" class="nm nn it lb b lc ot lf ou li ov lm ow lq ox lu nr ns nt nu bi translated"><code class="fe nv nw nx ny b">assertTrue</code>:检查参数是否为<code class="fe nv nw nx ny b">boolean</code>类型和<code class="fe nv nw nx ny b">true</code>。否则，它会抛出一个错误。</li></ul><pre class="kj kk kl km gt nz ny oa ob aw oc bi"><span id="158a" class="na me it ny b gy od oe l of og">const set = new Monoid([1, 2, 3, 4, 5]);</span></pre><p id="b006" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我定义了一个只由数字组成的集合，所以集合<code class="fe nv nw nx ny b">set</code>是一个数字的集合(即使我只放了五个数字，就假设它有无数个数字)。</p><h2 id="bb59" class="na me it bd mf nb nc dn mj nd ne dp mn li nf ng mp lm nh ni mr lq nj nk mt nl bi translated">问题1:这是否满足了岩浆加法运算的规则？</h2><pre class="kj kk kl km gt nz ny oa ob aw oc bi"><span id="42f7" class="na me it ny b gy od oe l of og">const [a, b] = set.pick(2);<br/>assertNumber(a);<br/>assertNumber(b);<br/>assertNumber(a + b);</span></pre><p id="3d2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的。用集合中的两个随机数，每个元素都是一个数类型，把它们相加也是一个数类型。</p><h2 id="d988" class="na me it bd mf nb nc dn mj nd ne dp mn li nf ng mp lm nh ni mr lq nj nk mt nl bi translated">问题2:这满足半群的加法运算规则吗？</h2><pre class="kj kk kl km gt nz ny oa ob aw oc bi"><span id="65c4" class="na me it ny b gy od oe l of og">const [x, y, z] = set.pick(3);<br/>assertNumber(set.concat(set.concat(x, y), z));<br/>assertNumber(set.concat(x, set.concat(y, z)));<br/>assertTrue(<br/>  set.concat(set.concat(x, y), z) === <br/>  set.concat(x, set.concat(y, z))<br/>);</span></pre><p id="5851" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有，是的。对于集合中的三个随机数，<code class="fe nv nw nx ny b">(x+y)+z</code>和<code class="fe nv nw nx ny b">x+(y+z)</code>是一个数字类型，它们给出相同的结果——运算的顺序无关紧要(结合性)。</p><h2 id="5e9b" class="na me it bd mf nb nc dn mj nd ne dp mn li nf ng mp lm nh ni mr lq nj nk mt nl bi translated">问题3:这满足加法运算的幺半群规则吗？</h2><pre class="kj kk kl km gt nz ny oa ob aw oc bi"><span id="915f" class="na me it ny b gy od oe l of og">const [r] = set.pick(1);<br/>assertNumber(r);<br/>assertNumber(set.identity(r));<br/>assertTrue(set.identity(r) === r);</span></pre><p id="07c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是啊！无论<code class="fe nv nw nx ny b">r</code>选择一个随机数是什么，<code class="fe nv nw nx ny b">identity</code>都返回参数，什么都不做。好吧，它给论点加了零，但它根本没有改变论点。</p><h2 id="c063" class="na me it bd mf nb nc dn mj nd ne dp mn li nf ng mp lm nh ni mr lq nj nk mt nl bi translated">结果是…</h2><p id="9c61" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">集合<code class="fe nv nw nx ny b">set</code>是幺半群。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="bfd3" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">下一步是什么？</h1><p id="c21f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">理解什么是magmas、半群和幺半群并不是函数式编程中最重要的学习内容，但是如果你提前知道这些概念，它也会帮助你理解其他理论，比如范畴理论。</p><p id="97cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本系列的下一个主题可能是范畴理论和函子。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="49aa" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">资源</h1><ul class=""><li id="8f0c" class="nm nn it lb b lc mv lf mw li no lm np lq nq lu nr ns nt nu bi translated">维基百科上的<a class="ae ky" href="https://en.wikipedia.org/wiki/Monoid" rel="noopener ugc nofollow" target="_blank">幺半群</a></li></ul></div></div>    
</body>
</html>