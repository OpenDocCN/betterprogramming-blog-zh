<html>
<head>
<title>How To Convert Objects to Arrays and Vice Versa in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中将对象转换成数组，反之亦然</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-convert-objects-to-arrays-and-vice-versa-in-javascript-7776b5843948?source=collection_archive---------1-----------------------#2019-11-20">https://betterprogramming.pub/how-to-convert-objects-to-arrays-and-vice-versa-in-javascript-7776b5843948?source=collection_archive---------1-----------------------#2019-11-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2b70" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">学习使用Object.entries()和Object.fromEntries()</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/30f746d7fe359a540853a677dfcebfda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jnENcJwCQnw8PXwTpZ0g8Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@tormius?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Adri Tormo </a>在<a class="ae ky" href="https://unsplash.com/s/photos/arrows?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="5a78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您曾经使用过数据集，尤其是基于web的API，那么我相信您一定遇到过JavaScript Object Notation (JSON)。作为XML和MongoDB等基于文档的数据库中使用的符号的轻量级替代，JSON无处不在。</p><p id="e5b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本教程将演示如何使用<code class="fe lv lw lx ly b">Object</code>类中的内置方法将一个对象转换成数组，反之亦然。在我们开始之前，让我们回顾一下JSON，以确保我们清楚基本语法以及使用这两种转换技术时会发生什么。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="46ce" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">JSON概述</h1><p id="5b5d" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">使JSON如此灵活的两种数据类型是对象和数组。这些是保存多个值的复杂数据类型，与保存单个值的原始数据类型相反。</p><ul class=""><li id="14af" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated">对象是一组无序的键值对。键是一个文本标识符，它在对象中必须是唯一的，值可以是原始数据值，也可以是复杂数据值。</li><li id="dcf9" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">数组是值的有序列表，不需要唯一，可以是各种数据类型。列表中的位置称为索引，从零开始，这意味着数组中的第一项的索引为<code class="fe lv lw lx ly b">0</code>。</li></ul><p id="2a83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">复杂的数据集可能会看到对象的数组或值是数组的对象(甚至是另一个对象)。每当你在一个数据结构中包含一个复杂的数据结构时，我们称之为嵌套。</p><p id="4b08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，现在我们已经对JSON做了一分钟的介绍，接下来是解决方案！</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="6e78" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">将对象转换为数组</h1><p id="0406" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">当将一个对象转换成数组时，我们将使用来自<code class="fe lv lw lx ly b">Object</code>类的<code class="fe lv lw lx ly b">.entries()</code>方法。这将把我们的对象转换成数组的数组。每个嵌套数组都是一个双值列表，其中第一项是键，第二项是值。</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="493f" class="nv mh it ly b gy nw nx l ny nz">let character = {<br/>   "first_name": "Locke",<br/>   "last_name": "Cole",<br/>   "job": "Treasure Hunter"<br/>}</span><span id="8f49" class="nv mh it ly b gy oa nx l ny nz">let arr = Object.entries(character);<br/>console.log(arr);<br/>/*<br/>[<br/>  ["first_name","Locke"],<br/>  ["last_name","Cole"],<br/>  ["job","Treasure Hunter"]<br/>]<br/>*/</span></pre><p id="546d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有嵌套对象和/或数组的复杂对象怎么办？找出答案的唯一方法就是测试！</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="ac53" class="nv mh it ly b gy nw nx l ny nz">let obj = {<br/>  "name": "Rean Schwarzer",<br/>  "occupations": [<br/>    "Student (graduated)",<br/>    "Resistance Leader",<br/>    "New Class VII Instructor"<br/>  ],<br/>  "parents": {<br/>    "father": "Teo",<br/>    "mother": "Lucia"<br/>  }<br/>}</span><span id="7f7f" class="nv mh it ly b gy oa nx l ny nz">let entries = Object.entries(obj);<br/>console.log(entries);</span><span id="248b" class="nv mh it ly b gy oa nx l ny nz">/*<br/>[<br/>  ["name", "Rean Schwarzer"],<br/>  [<br/>    "occupations", [<br/>      "Student (graduated)",<br/>      "Resistance Leader",<br/>      "New Class VII Instructor"<br/>    ]<br/>  ],<br/>  [<br/>    "parents", {<br/>      father: "Teo",<br/>      mother: "Lucia"<br/>    }<br/>  ]<br/>]<br/>*/</span></pre><p id="b900" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，嵌套的数组或对象只是成为适当的两项列表中的第二个值。该方法不会将嵌套对象递归转换为数组。仅转换顶层。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="3849" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">将数组转换为对象</h1><p id="902a" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">以前，从对象到数组的转换是<code class="fe lv lw lx ly b">Object</code>类内置方法的唯一方向。然而，从ES2019/ES10开始，引入了<code class="fe lv lw lx ly b">.fromEntries()</code>方法，该方法将两项数组转换为一个对象——实际上是<code class="fe lv lw lx ly b">.entries()</code>方法的逆过程。</p><p id="f951" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要了解这一点，让我们从一个简单的例子开始。结果应该是可以预见的。</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="32b8" class="nv mh it ly b gy nw nx l ny nz">let scores = [<br/>  ["Tim", 90],<br/>  ["Joe", 88],<br/>  ["Kelly", 95],<br/>  ["Jesse", 77]<br/>]</span><span id="dcbe" class="nv mh it ly b gy oa nx l ny nz">let obj = Object.fromEntries(scores);<br/>console.log(obj);<br/>/*<br/>{<br/>  Jesse: 77,<br/>  Joe: 88,<br/>  Kelly: 95,<br/>  Tim: 90<br/>}<br/>*/</span></pre><p id="c248" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，那么复杂数据呢？</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="44a6" class="nv mh it ly b gy nw nx l ny nz">let arr = [<br/>  ["name", "Rean Schwarzer"],<br/>  [<br/>    "occupations", [<br/>      "Student (graduated)",<br/>      "Resistance Leader",<br/>      "New Class VII Instructor"<br/>    ]<br/>  ],<br/>  [<br/>    "parents", {<br/>      father: "Teo",<br/>      mother: "Lucia"<br/>    }<br/>  ]<br/>];</span><span id="2e8f" class="nv mh it ly b gy oa nx l ny nz">let obj = Object.fromEntries(arr);<br/>console.log(obj);</span><span id="ff95" class="nv mh it ly b gy oa nx l ny nz">/*<br/>{<br/>  name: "Rean Schwarzer",<br/>  occupations: [<br/>    "Student (graduated)",<br/>    "Resistance Leader",<br/>    "New Class VII Instructor"<br/>  ],<br/>  parents: {<br/>    father: "Teo",<br/>    mother: "Lucia"<br/>  }<br/>}<br/>*/</span></pre><p id="3b08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与<code class="fe lv lw lx ly b">entries()</code>方法一样，这只转换顶级数组。更深的数组和对象被传递。</p><p id="e938" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们的数组没有正确格式化会发生什么？如果数组有一个原始值或者一个对象呢？如果嵌套数组中的元素少于两个怎么办？如果一个嵌套的数组有两个以上的条目呢？</p><p id="b729" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们尝试几个场景…</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="228b" class="nv mh it ly b gy nw nx l ny nz">// Non-array value<br/>let arr = [<br/>  ["first_name","Jonathan"],<br/>  "Arthur",<br/>  ["last_name","Hsu"]<br/>]</span><span id="3782" class="nv mh it ly b gy oa nx l ny nz">let obj = Object.fromEntries(arr);<br/>console.log(obj);<br/>// "TypeError: Iterator value Arthur is not an entry object</span></pre><p id="1e5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们传入一个被描述为<em class="ob">非入口对象</em>时，该方法将返回一个TypeError。</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="1b74" class="nv mh it ly b gy nw nx l ny nz">// Nested array item has less than two items<br/>let arr = [<br/>  ["first_name","Jonathan"],<br/>  ["middle_name"],<br/>  ["last_name","Hsu"],<br/>  []<br/>]</span><span id="6fae" class="nv mh it ly b gy oa nx l ny nz">let obj = Object.fromEntries(arr);<br/>console.log(obj);<br/>/*<br/>{<br/>  first_name: "Jonathan",<br/>  last_name: "Hsu",<br/>  middle_name: undefined,<br/>  undefined: undefined<br/>}<br/>*/</span></pre><p id="9c94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果一个嵌套数组是空的(没有条目)，那么得到的键值对是<code class="fe lv lw lx ly b">undefined: undefined</code>，而只有一个条目的嵌套数组将被视为一个没有定义值的键值对。</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="6e45" class="nv mh it ly b gy nw nx l ny nz">// Nested array item has more than two items<br/>let arr = [<br/>  ["first_name","Jonathan"],<br/>  ["middle_name","Arthur","Jones"],<br/>  ["last_name","Hsu"]<br/>]</span><span id="a805" class="nv mh it ly b gy oa nx l ny nz">let obj = Object.fromEntries(arr);<br/>console.log(obj);<br/>/*<br/>{<br/>  first_name: "Jonathan",<br/>  last_name: "Hsu",<br/>  middle_name: "Arthur"<br/>}<br/>*/</span></pre><p id="292c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当嵌套数组有两个以上的项时，多余的项将被忽略。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="2080" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你以前用过<code class="fe lv lw lx ly b">.entries()</code>把对象转换成数组吗？你看到自己用<code class="fe lv lw lx ly b">.fromEntries()</code>转换到另一个方向了吗？在下面分享你的评论和问题吧！</p></div></div>    
</body>
</html>