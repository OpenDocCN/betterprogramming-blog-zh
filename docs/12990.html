<html>
<head>
<title>What’s New in MapKit for iOS 16?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS 16的MapKit有什么新功能？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/whats-new-in-mapkit-for-ios-16-7b2904693c4d?source=collection_archive---------3-----------------------#2022-07-18">https://betterprogramming.pub/whats-new-in-mapkit-for-ios-16-7b2904693c4d?source=collection_archive---------3-----------------------#2022-07-18</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="3337" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">混合模式、叠加改进等等</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/aa283d208aa0d0f22d483c74f68d3019.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wdwWv0g8r_uIwR0o7zLHnQ.jpeg"/></div></div></figure><p id="627a" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">MapKit是苹果的一个框架，用于在你的应用程序上显示苹果地图。它帮助开发者提供导航支持和现场指导，并在地图上为用户提供一个区域。WWDC22发生在几个月前。什么变了？什么是新的？让我们开始吧。</p></div><div class="ab cl lo lp hv lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ik il im in io"><p id="7369" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">苹果在开发苹果地图的同时，有一段时间并没有给开发者提供太多。他们提供的最后一个会话可以追溯到WWDC19。然而，今年苹果为他们引入的每个功能都提供了API，新的MapKit功能也可供开发者使用。让我们看看我们现在有哪些功能。</p><h1 id="7ca1" class="lv lw ir bd lx ly lz ma mb mc md me mf jx mg jy mh ka mi kb mj kd mk ke ml mm bi translated">新用户界面</h1><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj mn"><img src="../Images/2112f5b3d96a0c1799f74fbe18ed1d59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kHAiGEDr7wrs05wxBA86zw.jpeg"/></div></figure><p id="c2f0" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">首先，苹果终于给了我们新的3D体验地图，可以在我们的应用上使用。你不需要添加一行代码来激活它，但简单地用新的iOS 16/macOS 13 SDK构建应用程序就足够了。当然，3D映射也有局限性，只有A12及以后的芯片iPhone才有M1，后来的Mac用户也能从中受益。如果您有这些设备，让我们看看新的布局是如何显示的。</p><p id="258e" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">它正确地显示了新的3D地图体验，包括地形、3D建筑等。</p><p id="77f2" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">然而，所有新的地图体验在每个国家都不可用；因此，你需要跟随苹果的页面去了解<a class="ae mo" href="https://www.apple.com/ios/feature-availability/#maps-standard" rel="noopener ugc nofollow" target="_blank">可用的国家和城市</a>。</p><h1 id="e6dd" class="lv lw ir bd lx ly lz ma mb mc md me mf jx mg jy mh ka mi kb mj kd mk ke ml mm bi translated">地图配置</h1><p id="a86c" class="pw-post-body-paragraph ks kt ir ku b kv mp js kx ky mq jv la lb mr ld le lf ms lh li lj mt ll lm ln ik bi translated">在iOS 15上，我们曾经用以下方式操作地图的外观:</p><ul class=""><li id="4fc2" class="mu mv ir ku b kv kw ky kz lb mw lf mx lj my ln mz na nb nc bi translated">禁用/启用地图类型</li><li id="45b1" class="mu mv ir ku b kv nd ky ne lb nf lf ng lj nh ln mz na nb nc bi translated">禁用/启用显示建筑</li><li id="b165" class="mu mv ir ku b kv nd ky ne lb nf lf ng lj nh ln mz na nb nc bi translated">禁用/启用显示流量</li></ul><p id="50cd" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">这些现在都被弃用了。我们现在可以用什么？满足配置。</p><p id="71ee" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">地图配置是一个新提供的类，它将地图类型与其子功能分开。有三种配置类型:</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/8cb524689e558a2fdbef5cac27439078.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iEpESwB0cwFI31G4f6PZsw.jpeg"/></div></div></figure><ul class=""><li id="a022" class="mu mv ir ku b kv kw ky kz lb mw lf mx lj my ln mz na nb nc bi translated"><code class="fe ni nj nk nl b">MKStandardMapConfiguration</code></li><li id="6ba2" class="mu mv ir ku b kv nd ky ne lb nf lf ng lj nh ln mz na nb nc bi translated"><code class="fe ni nj nk nl b">MKHybridMapConfiguration</code></li><li id="6e97" class="mu mv ir ku b kv nd ky ne lb nf lf ng lj nh ln mz na nb nc bi translated"><code class="fe ni nj nk nl b">MKImageryMapConfiguration</code></li></ul><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nm nn l"/></div></figure><h2 id="2e7b" class="no lw ir bd lx np nq dn mb nr ns dp mf lb nt nu mh lf nv nw mj lj nx ny ml nz bi translated">MKStandardMapConfiguration</h2><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj oa"><img src="../Images/5dc43eefccd6fa5eb4ca333f745b6c0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:818/format:webp/1*X3zM1vd2CfZwGJ-CtW6MeQ.jpeg"/></div></figure><p id="2b1c" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">这是你在苹果看到的标准地图视图，提供了带有标记的3D体验。您可以使用两个配置选项来创建此样式。</p><p id="8bf6" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">一个是强调风格，可以设置为“默认”或“静音”。静音显示为灰色。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj ob"><img src="../Images/8c3c1e161b6185e0491061fb8bd2316c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kGQEN1jXKAf3MI5X5OLUyQ.jpeg"/></div></div></figure><p id="632a" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">另一种是立面风格，可以选择“平面”或“真实”。“平坦”是默认设置，将山区显示为“平坦”，而“真实”将提升地图上的山景。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj ob"><img src="../Images/c7468b604d1bf2804f47f660c0da1638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U3Mx72PtJn1XNt3Cg1BzMA.jpeg"/></div></div></figure><h2 id="bef0" class="no lw ir bd lx np nq dn mb nr ns dp mf lb nt nu mh lf nv nw mj lj nx ny ml nz bi translated">MKHybridMapConfiguration</h2><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj oc"><img src="../Images/642068428acc64ca1cd5edf98f27d9e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*PGARfd54y7zddzSyAr6kzg.jpeg"/></div></figure><p id="574c" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">该配置将显示带有标准格式的路线和标记的卫星视图。您可以在地图上选择加入/退出流量和兴趣点可见性。</p><h2 id="b4dd" class="no lw ir bd lx np nq dn mb nr ns dp mf lb nt nu mh lf nv nw mj lj nx ny ml nz bi translated">mkimagerymap配置</h2><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj od"><img src="../Images/97360e885fadadc77ba399a45882e5fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*W0nL9Q-5NV0PMmEQrJhyKg.jpeg"/></div></figure><p id="7515" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">这是基本卫星视图，没有可用的配置选项。</p><h1 id="466b" class="lv lw ir bd lx ly lz ma mb mc md me mf jx mg jy mh ka mi kb mj kd mk ke ml mm bi translated">覆盖改进</h1><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj oe"><img src="../Images/64359fee5ac309b53a439eb81dd4ec3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/1*RcSmAntk4X5nXpsqnXDgWw.jpeg"/></div></figure><p id="2f09" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">叠加有助于在地图中用颜色绘制区域，以区别于地图。它在应用程序上是有效的，你可以向用户显示你可以服务的区域或属于土地所有者的房间。在iOS 16中，叠加层现在还可以在捏到一定程度时显示底层的3D建筑，并且在2D观看时会被隐藏。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nm nn l"/></div></figure><h1 id="0721" class="lv lw ir bd lx ly lz ma mb mc md me mf jx mg jy mh ka mi kb mj kd mk ke ml mm bi translated">混合模式</h1><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj of"><img src="../Images/20b7c15a1f3430bc923d0264b94e7950.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*48imMULsKoDmO0fsocftpA.png"/></div></div></figure><p id="66fd" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">混合模式有助于将覆盖图与地图的其他部分区分开来。您可以将该区域的其余部分变暗，以将注意力集中在叠加上。</p><h1 id="7a72" class="lv lw ir bd lx ly lz ma mb mc md me mf jx mg jy mh ka mi kb mj kd mk ke ml mm bi translated">可选地图要素</h1><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj og"><img src="../Images/954e21f72887628bc4e5a4b0a4440775.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/1*vcUAdM9FDj_U_zty5qtsmg.jpeg"/></div></figure><p id="9ab5" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">该地图包含许多注释，但您只能点击和管理注释的触摸，而不是来自餐馆、地标或其他要素的注释。现在，你也可以设法使用它们。您可以在<code class="fe ni nj nk nl b">MKMapFeatureOptions</code>属性下订购它们。现在，您可以在viewer delegate方法中使用<code class="fe ni nj nk nl b">MapFeatureAnnotation</code>,以不同于注释的方式与它们进行交互。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nm nn l"/></div></figure><h1 id="39d8" class="lv lw ir bd lx ly lz ma mb mc md me mf jx mg jy mh ka mi kb mj kd mk ke ml mm bi translated">环视视图</h1><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj oh"><img src="../Images/3193eb2b29313cee7b62851fc402b5b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*c-rYafj1IhC5L_riGGFwXw.jpeg"/></div></figure><p id="3fa6" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">苹果最终提供了它的环视API用于我们的应用程序。它给出了一个<code class="fe ni nj nk nl b">MKLookAroundSceneRequest</code>，它需要一个坐标来搜索环视场景。找到后，可以用一个位置初始化<code class="fe ni nj nk nl b">MKLookAroundViewController</code>。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nm nn l"/></div></figure><p id="2876" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">让我们看看我们可以用一个演示应用程序实现什么。</p><h1 id="3d70" class="lv lw ir bd lx ly lz ma mb mc md me mf jx mg jy mh ka mi kb mj kd mk ke ml mm bi translated">高级地图</h1><p id="0dec" class="pw-post-body-paragraph ks kt ir ku b kv mp js kx ky mq jv la lb mr ld le lf ms lh li lj mt ll lm ln ik bi translated"><code class="fe ni nj nk nl b">AdvancedMap</code>是一个显示地图工具包中WWDC22变化的应用程序。三个选项卡中有三张地图。</p><p id="4ebd" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">在第一个选项卡上，您可以使用地图和搜索/查找您周围的地方。您还可以将布局从标准切换到影像或混合。当你找到一个家庭时，你可以点击它来查看它的地址和在苹果地图中打开网站的选项。</p><p id="6c78" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">在第二个选项卡上，您会看到您周围的附近商店，市场呈圆形。您可以平移以查看3D地图以及叠加图如何位于建筑物下方。</p><p id="9fae" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">在最后一个选项卡上，您会看到一张英国地图。那是因为LookAround不是每个城市都有。我展示了一个随机的城镇。您所需要做的就是点击任何特征注释，例如注释，以检查它是否具有环视特征。如果有，它会给你一个按钮，让你点击，看看周围的地方和它的邻居。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oi nn l"/></div></figure><p id="7335" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">你可以在这里找到完整的代码。</p></div><div class="ab cl lo lp hv lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ik il im in io"><p id="9e57" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">MapKit是一个健壮的API，它让开发者可以使用苹果最新的地图UI来工作。与谷歌地图或市场上的其他第三方SDK相比，3D地图和带有覆盖功能的环视选项能够提供更加丰富的体验。您可能想知道为什么我选择UIKit来提供这些支持。所有被分享的工具都是为UIKit设计的，并以此进行演示。</p><p id="a330" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">然而，这是你的游戏，使所有这些<code class="fe ni nj nk nl b">UIViewControllerRepresentable</code>和使用SwiftUI。我选择了更快的选项来显示。</p><p id="7b1b" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">如果你有任何问题，欢迎在评论区提问。</p><p id="c896" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">祝你有愉快的一天。</p></div></div>    
</body>
</html>