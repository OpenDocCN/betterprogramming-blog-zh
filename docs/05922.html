<html>
<head>
<title>Use Python to Power Up Your Day Job</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python来增强您的日常工作</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-python-to-power-up-your-day-job-c6cd835a7c92?source=collection_archive---------5-----------------------#2020-08-18">https://betterprogramming.pub/how-to-use-python-to-power-up-your-day-job-c6cd835a7c92?source=collection_archive---------5-----------------------#2020-08-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bc5c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">有两个真实的例子</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/348001ce6558da61e1ffa3212baa4f00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xuV3oLJTfAIUJw9220PDVA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@marius?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">马里乌斯·马萨拉尔</a>在<a class="ae ky" href="https://unsplash.com/s/photos/digital?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="6baf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们不可能都是程序员——那会是一个奇怪的世界！然而，<em class="lv">任何人</em>都可以从一些基本的编程技能中受益。</p><p id="e66d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从事会计工作？编程可以帮助你。你是设计师吗？编程可以帮助你。你用电脑工作吗？编程可以帮助你。</p><p id="f8ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你看到这里的模式了吗？如果你不止一次地做过同样的任务，一个有用的程序就等着被制作出来。</p><p id="af23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你在开发环境中编写代码时，你必须遵循一定的规则。这很好，因为它使程序保持有序，并使项目中的每个人都容易处理代码。</p><p id="097a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是当你写你自己的程序时，你不需要遵守所有这些规则。它可能只是一小段代码，帮助你完成只有你才能完成的小任务。一些公司有一个开发部门，他们会清理你的代码，让其他人也可以使用。可能别人一直在抱怨你刚刚解决的问题。</p><h2 id="4e1b" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">我们将编写以下工具</h2><ul class=""><li id="74c5" class="mp mq it lb b lc mr lf ms li mt lm mu lq mv lu mw mx my mz bi translated"><strong class="lb iu">一个发布工具</strong>。发布工作文件，让你的同事知道工作已经完成，他们可以拿起文件。</li><li id="ca1d" class="mp mq it lb b lc na lf nb li nc lm nd lq ne lu mw mx my mz bi translated"><strong class="lb iu">一个摄取工具</strong>。保管好从客户那里收到的文件，并将其内容分发给你的同事。</li></ul><p id="91b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">注意:我在本文中使用的是Python 3.8，但是大多数编程语言都可以完成类似的任务。您还可以看到这两个工具的编码水平略有不同。第一个有点手动，而第二个试图更加专业</em></p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="c2d9" class="nm lx it bd ly nn no np mb nq nr ns me jz nt ka mh kc nu kd mk kf nv kg mn nw bi translated"><span class="l nx ny nz bm oa ob oc od oe di">一个</span>发布工具</h1><p id="a796" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">发布工具会将一个<code class="fe oi oj ok ol b">work-file</code>提升为一个<code class="fe oi oj ok ol b">publish-file</code>。一个<code class="fe oi oj ok ol b">publish-file</code>是一个准备好供下一个部门使用的文件。它的出版表明你已经完成了这项工作(至少现在是这样)。该文件位于预定义的位置，其名称不会改变。因此，当您发布新版本时，任何以此为参考的软件都将获得自动更新。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/c387ad249c164d5465ea5a83de3a68ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wRkiSJegcvk7sMnhXu0wow.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">v003是我们当前发布的版本。员工可以开始使用发布的“male_icon.ai”文件</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/d28c4d378be9f8d8fa3642c18fbc4a7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7p01fPc53192r8U2Djrcug.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">v005是我们当前发布的版本。使用该文件的软件也将获得更新</p></figure><p id="7edd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我所在行业的大多数公司——VFX和动画公司——都有自己的出版系统。如果你是一名自由职业者，或者是另一家随机公司的员工，你可能还没有这方面的设置。</p><p id="98f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的示例中，您正在为公司的Q1报表处理各种文件。可以是图标，可以是文案，可以是任何东西。重要的是，当你的文件准备好了，你就发布它们。</p><p id="5545" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您完成工作后，演示者将接管并在他们的演示中使用您发布的文件。如果演示者需要问你文件存储在哪里，你已经失败了。但是如果你发布了这些文件，下一个排队的人总是知道去哪里找。</p><p id="a176" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设这是您的文件和文件夹结构:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/be8dd12eb008c116f4d41455e4d9bc71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F96o1sVTzYWIMZ8pPjumYg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">潜在文件夹结构</p></figure><p id="f62d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它看起来很有条理，文件也很好地保存在各自的文件夹中。现在，让我们确保演示者确切地知道他们将为演示选取哪个<code class="fe oi oj ok ol b">male_icon ai</code>文件。</p><p id="2d6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是我们要找的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/45284a58e7843e01c07112f2a76a58a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Yajf8uA34gTrYEtWchNPA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">史蒂文刚刚被公共汽车撞了！没问题，我知道他发布的文件在哪里…</p></figure><h2 id="da87" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated"><strong class="ak">我们来码！</strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="6d7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该程序使用两个程序:<code class="fe oi oj ok ol b">publish()</code>和<code class="fe oi oj ok ol b">main()</code></p><h2 id="a2e0" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated"><strong class="ak">发布(搜索路径):</strong></h2><p id="c61b" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">发布过程要求搜索路径。在此路径中，它将查找工作文件夹和发布文件夹。如果工作文件夹存在并且包含任何文件，我们就可以开始工作了。</p><p id="a616" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oi oj ok ol b">scan_search_path</code>使用list comprehension来存储我们传递的项目文件夹中的所有文件夹。</p><p id="7ca6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oi oj ok ol b">if folder.name != ‘.DS_Store’</code>确保我们不会列出<code class="fe oi oj ok ol b">.DS_Store</code>文件夹——我们只对“真正的”文件夹感兴趣。</p><p id="eabd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oi oj ok ol b">scan_work_files</code>做类似的事情。它列出了不以<code class="fe oi oj ok ol b">.</code>开头的文件。</p><p id="9396" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">发布文件是指向最新工作文件的符号链接。我们假设我们的命名约定有v001、v002、v003等。这样，最新的数字就是我们工作的最新文件——我们想要发布的文件。您还可以使用日期戳来查找最新的文件，或者让用户定义要发布的文件。</p><p id="02db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，发布文件不需要版本号，如果您将该文件引用到另一个软件中，它会自动更新。这意味着发布的文件可以在星期一符号链接到v001，在星期五符号链接到v005。发布的文件名不会改变。</p><p id="810b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码从发布的文件中删除了版本控制:</p><pre class="kj kk kl km gt or ol os ot aw ou bi"><span id="85b2" class="lw lx it ol b gy ov ow l ox oy">file_data = list(os.path.splitext(source_file))<br/>remove_version = '_'.join(file_data[0].split('_')[0:-1])<br/>publish_file = remove_version + file_data[1]</span></pre><h2 id="ec0b" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated"><strong class="ak"> main() </strong></h2><p id="9046" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">因为这是帮助您发布文件的内部脚本，所以在本例中,<code class="fe oi oj ok ol b">root_path</code>是硬编码的(查看下面的摄取工具以获得处理文件路径的更好方法)。</p><p id="55f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oi oj ok ol b">root_path</code>是我们的项目文件夹。我们想浏览里面的文件夹，看看我们想发布什么。</p><p id="d8b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们为自己创建了一个菜单，这样我们就可以发布我们想要的内容。该代码只是寻找可用的文件夹，并要求输入。我们可以使用逗号来选择多个文件夹。<code class="fe oi oj ok ol b">split_input</code>会处理好的</p><p id="a3ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在for循环中使用<code class="fe oi oj ok ol b">index+1</code>的原因是提供一个从<code class="fe oi oj ok ol b">1</code>到多个的选项。<code class="fe oi oj ok ol b">0</code>作为第一指数不是一般用户会认为正常的东西。</p><p id="fe81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在实际发布时使用正确的索引:</p><pre class="kj kk kl km gt or ol os ot aw ou bi"><span id="f29b" class="lw lx it ol b gy ov ow l ox oy">publish(root_path+folder_list[int(current_folder)-1])</span></pre><p id="d304" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是与用户的互动</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/bbcbc3b9ead6ea50a12c900b6ebca332.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_rzc1KZgGPUBpGFuuyICUQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建一份菜单对他人和你自己都有好处</p></figure><p id="60b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，我会考虑这个项目的更多选项</p><ul class=""><li id="1c0c" class="mp mq it lb b lc ld lf lg li pa lm pb lq pc lu mw mx my mz bi translated">添加一个元数据文件，该文件共享发布的时间戳和以前使用过的文件的历史记录，以防出现文件损坏等错误。</li><li id="da6f" class="mp mq it lb b lc na lf nb li nc lm nd lq ne lu mw mx my mz bi translated">一个选择所有文件夹的选项，这样你可以一次发布所有内容。</li></ul></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="dfc0" class="nm lx it bd ly nn no np mb nq nr ns me jz nt ka mh kc nu kd mk kf nv kg mn nw bi translated">摄取工具</h1><p id="2d89" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">摄取工具处理您从工作室外部收到的文件。必须有人对客户文件进行解包，并确保它们位于磁盘上的正确位置，以便所有参与该项目的员工使用。</p><p id="c8de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您负责客户端文件，您会希望有一个可以解压缩文件并很好地对它们进行排序的设置。这些文件通常会被压缩。然后解压zip文件(我们的例子只支持zip)并对材料进行分类。</p><p id="10bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们假设我们仍然为同一家公司工作。这是客户将发送给我们的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/cd4fc27e1182aeeeb954b9c91c45b62e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XrnTOY4jkowvSBq0n0uRLQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这些文件将以zip文件的形式发送给我们。</p></figure><p id="02fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有些文件我们马上就能认出来。PDF文件是包含书面信息的文档。客户简报、便条或我们想看的东西。然后，我们有几个图像文件，最后，我们有一个Autodesk Maya文件。ma)和一个我们需要运行的Python脚本。</p><p id="fa6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是时候拉上拉链，假装是客户寄来的了:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/ee3954403c6d6df26d692baad56b1f1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*19UXuoTuruF9kFpUZyebkg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这还差不多！</p></figure><p id="a80a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是我们的伪代码，解释了我们需要采取的步骤:</p><pre class="kj kk kl km gt or ol os ot aw ou bi"><span id="461a" class="lw lx it ol b gy ov ow l ox oy"># unzip the file</span><span id="3d62" class="lw lx it ol b gy pf ow l ox oy"># create a folder for the current date</span><span id="c3d2" class="lw lx it ol b gy pf ow l ox oy"># create folders for the files based on pre-defined filetypes</span><span id="4f1d" class="lw lx it ol b gy pf ow l ox oy"># move the files into the correct folders</span><span id="da1e" class="lw lx it ol b gy pf ow l ox oy"># archive the zip file</span></pre><p id="1734" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是最终的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="9e03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个大问题，我们有很多要讨论的。让我们直接开始吧。</p><h2 id="bcaf" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated"><strong class="ak"> def摄取()</strong></h2><p id="06ab" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">如果我们先看最后一个过程，我们可以看到我们定义了工作文件:<code class="fe oi oj ok ol b">sys.argv[1]</code></p><p id="a49a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着我们可以从终端执行Python脚本，并在执行程序时直接传递参数。您应该很快就会发现，这是一种比硬编码根路径更好的方法，就像我们对发布工具所做的那样。</p><p id="dc5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们决定将Python文件放在<code class="fe oi oj ok ol b">from_client</code>文件夹之外:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/fe3a5ede61397bda98d1b5c2982afb12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WgbZHPXvd2PQxUyephzq4w.png"/></div></div></figure><p id="d7f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以从终端运行这个命令来执行来自<code class="fe oi oj ok ol b">client_files</code>文件夹的脚本，并处理所选的zip文件(<code class="fe oi oj ok ol b">from_client/inconsistentNaming_convensionFromclient13.zip</code>)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/d1ff07df2cb1c8915c453c569417eeb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gwYOQo64SsEZx5zVsDFUYQ.png"/></div></div></figure><p id="0716" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用<code class="fe oi oj ok ol b">sys.argv[1]</code>的原因是<code class="fe oi oj ok ol b">[0]</code>是为文件名本身保留的。</p><pre class="kj kk kl km gt or ol os ot aw ou bi"><span id="117f" class="lw lx it ol b gy ov ow l ox oy">import sys</span><span id="6ad6" class="lw lx it ol b gy pf ow l ox oy">print(sys.argv[0])<br/>&gt;&gt;&gt; main.py</span></pre><p id="736f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，我们可以将文件的任何路径作为参数传递给程序，非常聪明！</p><p id="0521" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们将想要处理的文件存储在变量中时，我们就可以开始执行各种命令了。<code class="fe oi oj ok ol b">working_file</code>是传递给几个函数和程序的。我们将逐一查看它们。</p><h2 id="a4c0" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated"><strong class="ak">解包_文件(zipfile) </strong></h2><p id="c7e5" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">这很简单。我们向过程传递一个文件名，这样它就可以解包我们的文件。</p><p id="b6a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它使用了一些支持功能，<code class="fe oi oj ok ol b">get_directory_path(zipfile)</code>、<code class="fe oi oj ok ol b">get_date_path()</code>和<code class="fe oi oj ok ol b">get_file_path()</code>。让我们看看这些。</p><ul class=""><li id="855e" class="mp mq it lb b lc ld lf lg li pa lm pb lq pc lu mw mx my mz bi translated"><code class="fe oi oj ok ol b">get_directory_path(filename)</code> <strong class="lb iu"> : </strong>这个函数返回我们正在工作的路径。</li><li id="b97f" class="mp mq it lb b lc na lf nb li nc lm nd lq ne lu mw mx my mz bi translated"><code class="fe oi oj ok ol b">get_date_path()</code> : <strong class="lb iu"> </strong>该函数使用<code class="fe oi oj ok ol b">datetime</code>库返回今天的日期。</li><li id="4c67" class="mp mq it lb b lc na lf nb li nc lm nd lq ne lu mw mx my mz bi translated"><code class="fe oi oj ok ol b">get_file_path()</code>:该函数返回文件的完整路径，包括文件名。</li></ul><h2 id="0ce1" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">定义位置文件(输入文件)</h2><p id="5f85" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">既然zip文件已经解压缩，我们可以开始处理我们的文件了。我们希望根据文件类型放置文件，因此我们需要定义这些文件。我们不希望扩展名是文件夹名，因为我们需要几个文件类型存在于同一个文件夹中。</p><p id="a323" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个过程还使用了几个支持函数。当我们列出文件和文件夹时，我们同时使用<code class="fe oi oj ok ol b">list_files_in_dir(scan_dir)</code>和<code class="fe oi oj ok ol b">list_folders_in_dir(scan_dir)</code>。</p><h2 id="7450" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">定义目录中的列表文件夹(扫描目录)</h2><p id="6ba1" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">列表理解用于返回您选择的文件夹中的文件夹。在我们的例子中，它是我们将文件解压到的文件夹。</p><h2 id="41a7" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">定义目录中的文件列表(扫描目录)</h2><p id="ad02" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">你能猜到这是干什么的吗？</p><p id="1fd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经将所有的文件和文件夹存储在变量中，我们开始循环排序它们。所有文件都被发送到分类文件夹中。如果你特别注意，你可以看到在文件循环内部有一个字典循环。这是因为我们使用字典来定义我们的文件类型。我们使用函数<code class="fe oi oj ok ol b">filetype()</code>来获得文件应该放在哪里的概述。</p><h2 id="5f17" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">定义文件类型()</h2><p id="0e67" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">Filetype是一种保持对排序控制的聪明方法。在这个例子中，我选择定义三个类别:<code class="fe oi oj ok ol b">documents</code>、<code class="fe oi oj ok ol b">project_files</code>、<em class="lv">、</em>和<code class="fe oi oj ok ol b">reference</code>、<em class="lv">。</em></p><p id="d8ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以随时更新该词典，根据自己的喜好添加或删除扩展名。我排除了。txt向您展示我们对未列出的文件做了什么。</p><p id="8bff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">清理完所有定义的文件类型后，程序会查看剩余的文件。这些文件没有归宿，所以它们都被发送到一个叫做<code class="fe oi oj ok ol b">_not_defined</code>的文件夹(或者你想叫它什么都行。)</p><p id="cc2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我的例子中，我还想从解包中删除__MACOSX文件夹，所以我添加了代码的最后一部分来处理这个问题。这是可选的，会因您的软件而异</p><h2 id="da8c" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">def archive_zip(zipfile)</h2><p id="213b" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">在这种情况下，我希望在解压缩zip文件时对其进行归档。这样，它总是可以转到存档文件夹删除或备份原始zip文件。</p><p id="1a59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里没有魔法。它使用前面的函数来处理路径，并去掉参数中的任何破折号，将文件移动到正确的位置。</p><p id="371e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能已经注意到我正在用<code class="fe oi oj ok ol b">os.rename()</code>移动文件。你也可以用<code class="fe oi oj ok ol b">shutil.move()</code>来做同样的事情。<code class="fe oi oj ok ol b">os.rename()</code>需要目标和源中的文件名，而<code class="fe oi oj ok ol b">shutil.move()</code>不需要移动到的路径中的文件名。我没有个人偏好，我只是想试试<code class="fe oi oj ok ol b">os.rename()</code></p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h2 id="190d" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">定义创建元文件(源文件)</h2><p id="d126" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">我经常谈论元文件，但我很少向您展示它的任何代码。这样做的目的是将我们解压文件的文件名添加到一个文本文件中。这样我们可以回溯文件的来源。记住，我们存档了我们的zip文件来清理东西。</p><p id="3882" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用<code class="fe oi oj ok ol b">os.path.join()</code>来创建我们想要使用的路径。然后我们使用<code class="fe oi oj ok ol b">with</code>创建一个文件。比起<code class="fe oi oj ok ol b">file.open</code> → <code class="fe oi oj ok ol b">do things</code> → <code class="fe oi oj ok ol b">file.close</code>，我更喜欢这种方法，因为动作以一种更漂亮的方式封装，并且它在完成后自动关闭。对我来说，这更像是Pythonic式的:</p><pre class="kj kk kl km gt or ol os ot aw ou bi"><span id="811b" class="lw lx it ol b gy ov ow l ox oy">with open (full_path , 'w') as metafile:<br/>    metafile.write(source_file)</span></pre></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><p id="253f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">反馈在终端中为用户打印出来</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/d694e4485f798af0ca7b410f980a9a9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cegcBpj0L4K_HKmj2Im0jw.png"/></div></div></figure><p id="2fcd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们刚刚从一个zip文件变成了这个:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pj"><img src="../Images/26456ee44586757a918c89edec0783ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SeSWjdN93iQCM3SPT8M5vw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">文件被很好地解包和分类</p></figure><p id="777e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文件被送到他们家里:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/05a9c3e0290cb6e6dd06153be556d35c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yt5G8vL9t56aj45kxJJglQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">png和jpg都位于此文件夹中，因为它们都被定义为引用</p></figure><p id="754f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">元文件包含zip的名称:</p><pre class="kj kk kl km gt or ol os ot aw ou bi"><span id="e76f" class="lw lx it ol b gy ov ow l ox oy">from_client/inconsistentNaming_convensionFromclient13.zip</span></pre><p id="834a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">拍拍自己的肩膀——你刚刚花了一个小时编写了一个程序，它将为你节省几天时间。当前版本不支持解压缩目录中的文件夹，但是现在你应该能够写入了。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="6d23" class="nm lx it bd ly nn no np mb nq nr ns me jz nt ka mh kc nu kd mk kf nv kg mn nw bi translated">最后</h1><p id="454a" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">编程是一件你可以让别人为你做的事情，或者你可以学着做一些小的片段——就像我们今天看到的。</p><p id="b7c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你自己写程序，它会当场发生。当你面对一个问题时，你会马上去做，你不会被任何规则所束缚。但是要小心——这也意味着你会犯开发团队不会犯的错误。仅仅因为你不知道你在做什么而删除整个项目是非常可怕的！</p><p id="6986" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大多数时候你会感觉很好，你的工作日会感觉好很多。相信我，我已经数周没工作了！</p><p id="b8b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一件很酷的事情是，从理论上讲，你现在是一名职业程序员，因为你写程序是有报酬的——很酷的奖励！</p><p id="1d36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谢谢你的时间。</p></div></div>    
</body>
</html>