<html>
<head>
<title>Why and How To Squash Git Commits</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么以及如何挤压Git提交</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-and-how-to-squash-git-commits-b508b3b0dba?source=collection_archive---------12-----------------------#2020-01-02">https://betterprogramming.pub/why-and-how-to-squash-git-commits-b508b3b0dba?source=collection_archive---------12-----------------------#2020-01-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e680" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">简单的指导性指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/235552f344ae0055918c7bd5c6a55481.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*de1uiBsZ5_pYdZ-srTD47w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">挤压一名骑士——照片由<a class="ae ky" href="https://unsplash.com/@jamesponddotco?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">詹姆斯·庞德</a>在<a class="ae ky" href="https://unsplash.com/s/photos/crush?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="92fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你是一名开发人员，你可能有过这样的经历:你试图修复一个bug，在这个过程中，你最终会多次提交——通常会出现诸如“修复”、“真正修复”和“最终修复，我保证”这样的消息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/f399fb436026d22071cc9f21b6287488.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PpyQYI89m3hDN94sPZ8kYg.png"/></div></div></figure><p id="1a6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您的Git历史包含大量这类消息时，找到相关的提交就变得更加困难。</p><p id="212b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">清理混乱的一种方法是在一次提交中压缩多次提交。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="f6c9" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">挤压Git提交</h1><p id="c66c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">使用命令<code class="fe na nb nc nd b">git log</code>，您可以看到您最近的提交。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/11f45e0a40cee5052dff0ee621ef2358.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9rhJKWd4SH_6LZB_htDt_Q.png"/></div></div></figure><p id="ad44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，我想将“这次修复”和“小修复”提交压缩到“添加更好的标题”提交中。</p><p id="bc49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，我告诉Git我想对最近的三次提交进行重新排序。</p><pre class="kj kk kl km gt nf nd ng nh aw ni bi"><span id="b84d" class="nj me it nd b gy nk nl l nm nn">git rebase -i HEAD~3</span></pre><p id="9682" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">-i</code>标志让我在交互模式下重设基础。</p><p id="e45d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输入该命令时，将打开默认的终端文本编辑器。在这里，您可以选择要保留的提交。</p><p id="a509" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，我为最后两次提交输入<code class="fe na nb nc nd b">squash</code>。</p><pre class="kj kk kl km gt nf nd ng nh aw ni bi"><span id="fbdc" class="nj me it nd b gy nk nl l nm nn">pick   f222ad3 Add a better title<br/>squash dda06af Small fix<br/>squash 0f5c7ef Fix forreal this time</span></pre><p id="f2fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想保留“添加一个更好的标题”提交，所以我为该提交输入了<code class="fe na nb nc nd b">pick</code>。</p><p id="b345" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外两个提交将被压缩到那个提交中，保留我的所有代码，但是将Git历史从三个提交转换为一个。我们将在我们的终端中点击<code class="fe na nb nc nd b">:wq</code>来写-退出以继续。</p><p id="2ca3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下一个屏幕中，我们可以编辑和更改挤压提交的提交消息。在这种情况下，我只需输入相同的消息。</p><pre class="kj kk kl km gt nf nd ng nh aw ni bi"><span id="d229" class="nj me it nd b gy nk nl l nm nn">Add a better title</span></pre><p id="921f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦完成，您就可以使用<code class="fe na nb nc nd b">git log</code>来验证提交是否已经被终止。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/c4bf5d119669eb11a19cba1e48bb4746.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gZuVMoq1BoU2ztzJ48BKrA.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="0843" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">推动变革</h1><p id="2cc4" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">好了，提交已经被压缩了，让我们将更改推送到远程分支。</p><p id="a999" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，当执行<code class="fe na nb nc nd b">git push</code>时，命令失败。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/8c160bd66cd455de0f727a3455c07377.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EIVaXA_n9oImjJUj82DhaQ.png"/></div></div></figure><p id="78b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">出现此错误是因为我们在本地更改了Git历史记录。试图推动这一新的历史会导致冲突。</p><p id="8017" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了克服这一点，您可以强制推送至远程分支。</p><pre class="kj kk kl km gt nf nd ng nh aw ni bi"><span id="015e" class="nj me it nd b gy nk nl l nm nn">git push origin +master</span></pre><p id="c3ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果只有两次提交。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/5667dad52990bf431ccdc4c4fc800d9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pDdsHVHXw0xDJadbnSUoOA.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="3c05" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">提醒一句</h1><p id="265e" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">您应该只挤压本地分支上的Git提交。因为您更改了Git历史，所以您可能会给在同一个分支上工作的队友带来严重的问题！</p><p id="987f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这样，祝你愉快粉碎Git提交！</p></div></div>    
</body>
</html>