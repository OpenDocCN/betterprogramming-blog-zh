<html>
<head>
<title>How to Use SwiftUI View Inside a UIKit View</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在UIKit视图中使用SwiftUI视图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/using-swiftui-view-inside-a-uikit-view-efd44e06f10c?source=collection_archive---------3-----------------------#2022-06-12">https://betterprogramming.pub/using-swiftui-view-inside-a-uikit-view-efd44e06f10c?source=collection_archive---------3-----------------------#2022-06-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3b8f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">看一看有前途的iOS 16新功能</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a87a2c52e0e13fdaa1e7607e1722d2eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U3S25YWrN120FOd7IHqejg.png"/></div></div></figure><p id="a6da" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">自从SwiftUI随iOS 13推出以来，它就开始在iOS开发者中流行起来。</p><p id="4117" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">许多应用程序已经开始采用它。除了SwiftUI，还有很多应用程序主要是使用传统的UIKit框架编写的。</p><p id="1a51" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">可能无法很快用SwiftUI取代这些应用。但是有可能在现有UIKit代码的基础上实现一些新特性，让团队获得信心并熟悉SwiftUI。</p><p id="c174" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是一个简单的概述，介绍了如何在一个<strong class="kt ir"> UIKit </strong>视图中使用一个<strong class="kt ir"> SwiftUI </strong>视图，旁边还有一个非常简单的例子，可以在Xcode游乐场运行(上面的Xcode 13 &amp;)</p><h1 id="9750" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">结果呢</h1><p id="e918" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">代码片段的最终结果如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mk"><img src="../Images/d747764b367b4be54a58e8efdd8c6b78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JKLhBY_iHFrFmW5EfKoozg.png"/></div></div></figure><p id="2518" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">外部视图(UIKit)为系统蓝色，内嵌SwiftUI视图！</p><h1 id="08a5" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">创建UIKit视图</h1><p id="6005" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">首先创建一个<code class="fe ml mm mn mo b">UIKit</code>视图，其中包含一个占位符子视图。<code class="fe ml mm mn mo b">UIKit</code>视图有一个系统蓝色背景。我们在中心插入一个子视图，作为显示SwiftUI视图的占位符视图。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div></figure><h1 id="a129" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">创建SwiftUI视图</h1><p id="4b07" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">接下来，定义一个SwiftUI视图。该视图在一个<code class="fe ml mm mn mo b">ZStack</code>视图内的堆栈中呈现了一个<code class="fe ml mm mn mo b">LinearGradient</code>、<code class="fe ml mm mn mo b">Text</code>、<code class="fe ml mm mn mo b">Divider</code>视图组件和一些系统映像。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div></figure><h1 id="7b4d" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">使用UIHostingViewController作为桥</h1><p id="b274" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">最后，通过将SwiftUI视图包含在UIKit视图中，将所有这些整合在一起。这里的关键是使用SwiftUI提供的<code class="fe ml mm mn mo b">UIHostingViewController</code>作为UIKit和SwiftUI之间的桥梁。我们用一个<code class="fe ml mm mn mo b">rootView</code>来初始化它。</p><p id="f0f0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ml mm mn mo b">UIHostingViewController</code>可以直接使用，如果需要更好的控制，也可以将其子类化。然后它将允许访问API，在那里我们可以控制视图生命周期方法，如<code class="fe ml mm mn mo b">viewWillAppear</code>、<code class="fe ml mm mn mo b">viewDidAppear</code>等等。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="c9db" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">完整的例子可以在这里找到<a class="ae mr" href="https://gist.github.com/mvemjsun/72b3c9834c2be76a53720d6efbc93119" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="bf24" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">参考</h1><p id="0cb8" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated"><a class="ae mr" href="https://developer.apple.com/xcode/swiftui/" rel="noopener ugc nofollow" target="_blank">https://developer.apple.com/xcode/swiftui/</a></p><p id="6681" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae mr" href="https://developer.apple.com/documentation/swiftui/uihostingcontroller" rel="noopener ugc nofollow" target="_blank">https://developer . apple . com/documentation/swift ui/uihostingcontroller</a></p><p id="b071" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">【https://developer.apple.com/tutorials/swiftui】</p><h1 id="fb79" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">结论</h1><p id="7a4b" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">即使您一直在使用Swift和UIKit进行开发，SwiftUI中也有很多东西需要学习。对诸如函数式反应式编程(FRP)、数据绑定和视图状态等思想和概念的理解是需要探索的一部分。</p><p id="fd2b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">来自苹果的教程是一个很好的入门资源，将会覆盖很多领域。在课程结束时，您将能够理解SwiftUI所提供的功能以及如何实施其中的许多知识。</p></div></div>    
</body>
</html>