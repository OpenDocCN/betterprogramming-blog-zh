# 停止在循环中使用 i++

> 原文：<https://betterprogramming.pub/stop-using-i-in-your-loops-1f906520d548>

## 为什么++i 通常比 i++好(前增量与后增量)

![](img/01b09e23d92b9f5f45613db48273ff5b.png)

由[萨法尔·萨法罗夫](https://unsplash.com/@codestorm?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

# 介绍

如果你以前写过 for 循环，那么你几乎肯定以前使用过`i++`来增加循环变量。

但是，你有没有想过*为什么*你选择那样做？

显然，`i++`的最终结果是`i`比以前高了一级——这正是我们想要的。但是，有很多方法可以做到这一点，比如`++i`、`i++`，甚至`i = i + 1`。

在本文中，我将介绍加 1、`++i`和`i++`的两种方法，并解释为什么在大多数情况下`++i`可能比`i++`更好。

# 后增量(i++)

`i++`方法，或称后增量，是最常见的方法。

在 psuedocode 中，变量`i`的后递增运算符大致如下:

```
int j = i;
i = i + 1;
return j;
```

因为后递增运算符必须返回原始值`i`，而不是递增值`i + 1`，所以它必须存储旧版本的`i`。

这意味着它通常会不必要地使用额外的内存来存储该值，因为在大多数情况下，我们实际上并不使用旧版本的`i`，而是简单地将其丢弃。

# 前增量(++i)

`++i`方法，或称预增量，不太常见，通常由 C 和 C++等语言中的老程序员使用。

在 psuedocode 中，变量`i`的前递增运算符大致如下:

```
i = i + 1;
return i;
```

值得注意的是，在这里，我们不需要保存旧的值`i`——我们可以简单地增加它并返回。这更符合 for 循环中的典型用例，因为我们很少需要旧的`i`值。

# 警告

在看到后增量和前增量之间的区别后，人们可能会注意到，由于缓存的值`i`在后增量中从不使用，编译器会优化掉那一行，使两个操作符等价。

对于基本类型(如整数)来说，这很可能是正确的。

然而，对于更复杂的类型，比如用户定义的类型或者重载了`+`操作的迭代器，编译器可能无法安全地优化缓存操作。

因此，似乎在大多数情况下，前递增操作符比后递增操作符更好，或者等于后递增操作符，只要您不需要正在递增的任何内容的前一个值。