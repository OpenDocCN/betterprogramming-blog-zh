<html>
<head>
<title>How To Make Changes to Objects in a Cleaner, Immutable Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何以更干净、不可变的方式对对象进行更改</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-make-changes-to-objects-in-a-cleaner-immutable-way-3f8a2691e1f0?source=collection_archive---------17-----------------------#2019-09-26">https://betterprogramming.pub/how-to-make-changes-to-objects-in-a-cleaner-immutable-way-3f8a2691e1f0?source=collection_archive---------17-----------------------#2019-09-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1eba" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在不更改数据的情况下添加和删除属性</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7f2fad0bf0f5105aae2863526ad9fdc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NwdxTJ67hB3EkLBgSSvfjw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@juricakoletic?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">尤里察·科莱蒂</a>在<a class="ae ky" href="https://unsplash.com/s/photos/transformation?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="cc53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文将为您提供一些关于如何在JavaScript程序中使用ES6语法以更简洁的方式改变状态的技巧。</p><p id="746b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我假设您对JavaScript及其ES6语法有基本的了解，或者有一点使用JavaScript的经验。在您的应用程序<em class="lv">中使状态<strong class="lb iu"> <em class="lv"> </em> </strong>不可变总是一个好主意。<em class="lv">不可变数据</em> <strong class="lb iu"> <em class="lv"> </em> </strong>表示不变的数据。JavaScript中的字符串就是一个例子。一旦你创建了一个字符串，它永远不会改变。</em></p><p id="ea35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不可变的数据更简单。通过这样做，您可以确保您的数据不会在代码库中的其他地方被更改。这是件好事。你更有信心不会发生意想不到的事情。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7857" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak">什么是状态？</strong></h1><p id="318a" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">是你的程序记住的事情，还是你的程序跟踪的随时间发生的事情。以<strong class="lb iu"> </strong>为例，在一个待办事项列表中，app需要记住的事情有:什么时候添加新的待办事项，什么时候更新待办事项，什么时候从列表中删除。跟踪这些变化就是所谓的在应用程序中维护状态。</p><p id="fc3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，我们如何在不改变数据的情况下以不可变的方式处理数据呢？每个程序都需要一种跟踪这些变化的方法，如果你不能修改状态，那么我们如何在程序中维护状态呢？</p><p id="9733" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我会告诉你怎么做。</p><p id="c986" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个具有两个属性的对象:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="46b1" class="nf me it nb b gy ng nh l ni nj">const person = {<br/>     id: 1,<br/>     name: 'Adjoa'<br/>};<br/>console.log(person); // returns { id:1, name: 'Adjoa'};</span></pre><p id="30de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我该如何获取<code class="fe nk nl nm nb b">person</code>中的所有属性并添加另一个属性，比如性别，而不改变它呢？让我给你介绍一下对象传播操作符。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="d64c" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak">对象传播算子</strong></h1><p id="91ce" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">对象扩展操作符允许我们将一个对象的属性扩展或展开到一个新对象中。它将所有属性从一个对象复制到另一个对象。这在很多方面都很有用！</p><p id="cd5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">举例:</em> </strong></p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="a1f0" class="nf me it nb b gy ng nh l ni nj">const newPerson = {<br/>      ...person,<br/>      gender: 'female'<br/>};</span><span id="8a52" class="nf me it nb b gy nn nh l ni nj">console.log(newPerson); //{ id:1, name: 'Adjoa', gender: 'female'};</span><span id="cd56" class="nf me it nb b gy nn nh l ni nj">// Includes all properties from the person object.</span></pre><p id="b9d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们不需要手动创建一个新对象，将第一个对象中的所有属性写入第二个对象，然后添加新属性。这种方式超级简单容易！</p><p id="e348" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你知道同样的操作符也可以用来覆盖对象的属性吗？让我展示给你看。</p><p id="9c9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">示例:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="2acb" class="nf me it nb b gy ng nh l ni nj">const updatedPerson = {<br/>      ...newPerson,<br/>      gender: 'male'<br/>};<br/><br/>console.log(updatedPerson); // returns { id: 1, name: 'Adjoa', gender: 'male' };</span></pre><p id="31a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">性别的价值从男性变成了女性。</p><p id="6db7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经看到了如何通过添加新属性而不修改其内容来更新对象。有人可能会问，那么我如何以不可变的方式移除元素呢？毁灭和休息来了。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="cc27" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">用destructing+Rest从对象中移除字段</h1><h2 id="bc54" class="nf me it bd mf no np dn mj nq nr dp mn li ns nt mp lm nu nv mr lq nw nx mt ny bi translated">什么是解构？</h2><p id="7535" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">析构只是允许我们给变量赋值。</p><p id="1377" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">示例:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="8d36" class="nf me it nb b gy ng nh l ni nj">// using our earlier example</span><span id="7cb7" class="nf me it nb b gy nn nh l ni nj">const { name } = updatedPerson;</span><span id="246a" class="nf me it nb b gy nn nh l ni nj">console.log(name); // returns 'Adjoa';</span></pre><p id="4996" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从上面的例子中可以看出，我们对变量使用了与对<code class="fe nk nl nm nb b">updatedPerson</code>属性相同的名称。但是您也可以用不同于对象属性的名称替换变量。</p><p id="597a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">示例:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="c97e" class="nf me it nb b gy ng nh l ni nj">const { name: title } = updatePerson;</span><span id="ea0c" class="nf me it nb b gy nn nh l ni nj">console.log(title); // returns 'Adjoa';</span></pre><h2 id="92d3" class="nf me it bd mf no np dn mj nq nr dp mn li ns nt mp lm nu nv mr lq nw nx mt ny bi translated">什么是休息？</h2><p id="c014" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Rest允许我们将对象的所有剩余参数或属性解包到一个变量中。</p><p id="b72b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">示例:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="87c9" class="nf me it nb b gy ng nh l ni nj">// using the earlier person object<br/>const {id, ...rest} = person;</span><span id="e6d4" class="nf me it nb b gy nn nh l ni nj">console.log(id); // 1<br/>console.log(rest); // {name: 'Adjoa')</span></pre><h2 id="c682" class="nf me it bd mf no np dn mj nq nr dp mn li ns nt mp lm nu nv mr lq nw nx mt ny bi translated">如何使用destructing+rest移除字段:</h2><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="9aaf" class="nf me it nb b gy ng nh l ni nj">const { id, ...updatedPersonWithoutId } = updatedPerson;</span></pre><p id="0c00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面发生了什么？我们把<strong class="lb iu"><em class="lv"/></strong><code class="fe nk nl nm nb b">id</code><strong class="lb iu"><em class="lv"/></strong>抽出来变成它自己的常数，然后把<code class="fe nk nl nm nb b">updatedPerson</code>中剩余的任何属性都收集到<code class="fe nk nl nm nb b">updatedPersonWithoutId</code> <strong class="lb iu"> <em class="lv"> </em> </strong>常数中。换句话说，我们正在将除了T5之外的T4的所有属性复制到T6常量中。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="a161" class="nf me it nb b gy ng nh l ni nj"><br/>console.log(updatedPersonWithoutId); // returns { name: 'Adjoa', gender: 'male' }<br/>//id was not included in the object returned.</span><span id="def1" class="nf me it nb b gy nn nh l ni nj">console.log(updatedPerson); // { id:1, name: 'Adjoa', gender: 'male' }</span><span id="c3d9" class="nf me it nb b gy nn nh l ni nj">// original object hasn't mutated but retains its old properties.</span></pre><p id="3b60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们以一种更干净、不可变的方式有效地添加和删除了对象的属性！</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="926d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我将写在JavaScript中修改数组。</p><p id="e82d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果你觉得这篇文章有帮助，请留下评论。</p></div></div>    
</body>
</html>