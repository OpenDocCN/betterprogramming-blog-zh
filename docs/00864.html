<html>
<head>
<title>Shoehorning SwiftUI and Create ML — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Shoehorning SwiftUI和创建ML —第2部分</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/shoehorning-swiftui-and-create-ml-part-2-a8932075e09a?source=collection_archive---------13-----------------------#2019-07-22">https://betterprogramming.pub/shoehorning-swiftui-and-create-ml-part-2-a8932075e09a?source=collection_archive---------13-----------------------#2019-07-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5f55" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">第一部分的“史诗”结论</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2098afd14dfa55770cb982669631829c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uh-UQSafmvGXsKS-GI4eqg.png"/></div></div></figure><p id="a54e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对<a class="ae lq" href="https://medium.com/@dbolella/e517be035ed0?source=your_stories_page---------------------------" rel="noopener">推销SwiftUI和创建ML的“史诗”总结—第1部分</a>。</p><p id="472c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">同样，这不是一步一步来的，但我确实指出了我引用的代码和项目的回购。</p><p id="2a45" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">受我在WWDC 2019年追赶的启发，我创建了一个项目，将两个吸引我眼球的东西结合起来，<a class="ae lq" href="https://developer.apple.com/xcode/swiftui/" rel="noopener ugc nofollow" target="_blank"> SwiftUI </a>和<a class="ae lq" href="https://developer.apple.com/documentation/createml" rel="noopener ugc nofollow" target="_blank"> Create ML </a>。</p><p id="b3c5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在第1部分中，我基本上创建了一个自定义的floral版本的教程，在SwiftUI会议的<a class="ae lq" href="https://developer.apple.com/videos/play/wwdc2019/204/" rel="noopener ugc nofollow" target="_blank">介绍中演示。</a></p><p id="ecc2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在我试图同时学习两件事情的过程中，我使用了Create ML，这也是我对核心ML的介绍。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="87b4" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">跳上ML列车</h1><p id="d857" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">我对机器学习、人工智能、统计学、概率等并不是完全没有兴趣。</p><p id="fcdd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">事实上，当我还在金融行业的时候，我曾尝试涉猎过一些，但从未深入到足以说服任何人我们应该把注意力从工作上移开，进行更深入的研究。</p><p id="c779" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">尽管如此，每个人似乎都在谈论ML/AI，它显然很大。</p><p id="e89d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">直到几年前，将ML作为应用程序的一部分的最有价值的解决方案似乎必须使用远程服务来做任何事情，这意味着必须使用移动应用程序的数据，这对我来说是一个障碍。</p><p id="cf70" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是随着API在设备上思考并利用移动硬件，这种情况开始改变。而且，自从几年前Core ML问世以来，苹果一直在大力推广它，就其广泛的受众而言，这似乎只是一个开始。</p><p id="d00e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">具体来说，当苹果开始将ML优化的硬件纳入iPhone X系列时，我相信主流ML旗帜被放弃了，市场竞争开始了。</p><p id="885e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是为什么我对新的Create ML感到兴奋。最初是作为一个框架在去年发布的，每个人都疯狂地把它塞进了一个Swift Playground。</p><p id="43f1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">老实说，我并不总是一个GUI势利小人(我在终端中使用Git，而不是使用<a class="ae lq" href="https://www.sourcetreeapp.com/" rel="noopener ugc nofollow" target="_blank"> Sourcetree </a>)，但这最终引起了我的注意。</p><p id="cfdd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我看到演示时，它看起来非常简单，任何人都可以使用。我是说，<a class="ae lq" href="https://developer.apple.com/videos/play/wwdc2019/430/" rel="noopener ugc nofollow" target="_blank">时段</a>本身不到15分钟！我没有借口了。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="4dc9" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">入门指南</h1><p id="adb4" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">再说一次，我正在使用flower应用程序，它的灵感来自于一个原始的Create ML教程。而且我们肯定还需要<a class="ae lq" href="https://www.apple.com/au/macos/catalina-preview/" rel="noopener ugc nofollow" target="_blank"> macOS Catalina </a>和<a class="ae lq" href="https://developer.apple.com/xcode/whats-new/" rel="noopener ugc nofollow" target="_blank"> Xcode 13 </a>。</p><p id="2ab0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">至于我们的花卉数据集，我应该过一遍为什么这将工作。数据集有五个子目录，用于五种花卉类别(雏菊、蒲公英、郁金香、向日葵、玫瑰)。</p><p id="1da1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这些目录中的每一个都有数百张它们各自花朵的图片。</p><p id="a2c1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们期望Create ML做的是分析每张带有各自标签的图片，以及该标签内的其他图片，并与其他花卉类别的所有其他图片进行比较，注意差异。</p><p id="447d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所有这些，实际上，所有我们需要提供的是已经预先分类到分别标记的目录中的图像。</p><p id="959e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，为了测试我们的模型，Create ML允许您输入另一个包含测试数据的目录。</p><p id="bf01" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，我还创建了另一个具有相同子结构的目录，但每个类别中只有一个相应的图像(我从Google中提取并加载到我的应用程序资产中的相同图像)。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="5cbb" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">模特:准备好我们的特写镜头了吗</h1><p id="4099" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">要打开新的Create ML，请打开Xcode并进入Xcode下拉菜单→打开开发者工具→创建ML。</p><p id="b4ec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后选择一个图像分类项目，命名，然后，我们就成功了！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/5135ce566d7b3edce36f7f1cd82b2fa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ty4WV-KmvK7RzeKXEYwJDw.png"/></div></div></figure><p id="b1f8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你会看到一个相当普通的屏幕。但令人难以置信的是，它已经为您准备好了您需要的一切。</p><p id="dea4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，我抓取了包含所有花卉数据的文件夹，并将其拖到训练数据区域。我立即加载并准备好了我的训练数据。</p><p id="9f28" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，我把我的测试数据文件夹拖到测试数据区。我现在有了我的测试设置。</p><p id="d27f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，这很棘手…我按了播放键。</p><p id="08e2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">就是这样！它现在将进行训练，并在训练完成后，提供关于其自身信心的细节，以及根据测试数据运行模型的结果(我们计划最终在我们的应用程序中实现这一点)。</p><p id="d766" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我确保保存了模型，并把它放在我以后可以访问的地方。</p><p id="953a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，培训可能需要一点时间，并将推动您的机器。我建议插上你的笔记本电脑。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/683a9ac1605be47e997db9646a69f9de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kZbrvLdCnPJUWrFttz2H0g.png"/></div></div></figure><p id="aced" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以，我有我的模型。我简直疯了，我打开一个应用程序，拖放两个文件夹，点击播放按钮，我现在有一个可以识别五种花卉的模型。</p><p id="59ca" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当然，这是一个相当狭窄的分类，但是因为它非常简单，我已经可以想象如何处理更复杂的模型。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="086a" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">让我的应用变得智能</h1><p id="0f91" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">最后，我将主持我一直着迷的两个主题的婚礼。</p><p id="5495" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，我打开我的项目，简单地将我的模型拖放到其中。</p><p id="a0eb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您从项目视图中单击模型，您将看到我们模型的详细信息，模型的Swift类可用于我们的项目，甚至有一个实验区来进一步测试您的模型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/4e9186850f91ea6b0c4d63d474a1b850.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rc-tO_jY_fur2immL_CP6Q.png"/></div></div><p class="mw mx gj gh gi my mz bd b be z dk translated">这向我们展示了模型中的可用内容以及进一步测试它的地方。</p></figure><p id="1998" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">既然我们的模型已经存在，我们可以跳回到FlowerDetail结构中。</p><p id="484f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我在这里引用了<a class="ae lq" href="https://developer.apple.com/documentation/vision/training_a_create_ml_model_to_classify_flowers" rel="noopener ugc nofollow" target="_blank">的例子</a>，取我需要的，把它拆下来，放入我的模型中。</p><p id="1c68" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">长话短说，我不需要条形码扫描仪，因此只需要处理一个视觉请求。</p><p id="9654" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了放入我的模型，而不是对我的文件进行URL引用，我能够只调用我的模型的类来引用它本身。</p><p id="a635" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，我将结果与我们当前的花卉分类进行比较，三元组决定我们的状态<code class="fe na nb nc nd b">matchResult</code>是否应该变成“匹配！”或者“不匹配”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/78c411a44a707909707d3191eb7e1c25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oZji5ZJUmM4AvloqcOKRkw.png"/></div></div><p class="mw mx gj gh gi my mz bd b be z dk translated">尽管名为向日葵，但它与模型预测相符！</p></figure></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="9a0c" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">开花还是枯萎</h1><p id="f577" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">就是这样。我已经到了关键时刻。模型会开花还是我的项目会枯萎？</p><p id="1859" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">记住，我将文本视图设置为<code class="fe na nb nc nd b">matchResult</code>状态。因此，一旦模型做出预测并设置了<code class="fe na nb nc nd b">matchResult</code>，SwiftUI会自动同步并刷新我们的视图。我要做的就是点击“识别”按钮。</p><p id="4a67" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我这么做的时候，我得到了那个甜蜜的，美丽的胜利的截图。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="7742" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">结论</h1><p id="1ac1" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">虽然不是最漂亮的应用程序，但我对最终结果感到自豪。</p><p id="0f0c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">老实说，最难的部分是安装Catalina和Xcode Beta。</p><p id="1a9f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">用SwiftUI构建应用程序非常简单。在这个过程中，我确实发现了一些很棒的SwiftUI工具和Xcode提供的服务，我希望很快在另一个故事中发布。</p><p id="0657" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">至于Create ML，这肯定只是触及了表面。</p><p id="c941" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我本来可以对图像做更多的事情，我真的很好奇如何使用文本分类模型。但是用于构建模型的新GUI已经把我推到了边缘，抓住了我的全部注意力。</p><p id="7440" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于代码，包括我的模型，去<a class="ae lq" href="https://github.com/dbolella/FlowerPower" rel="noopener ugc nofollow" target="_blank">回购</a>。</p><div class="nf ng gp gr nh ni"><a href="https://github.com/dbolella/FlowerPower" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd iu gy z fp nn fr fs no fu fw is bi translated">dbolella/FlowerPower</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">使用SwiftUI和使用新的Create ML GUI生成的mlmodel进行实验。运行样本花卉图像，并确保…</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">github.com</p></div></div></div></a></div></div></div>    
</body>
</html>