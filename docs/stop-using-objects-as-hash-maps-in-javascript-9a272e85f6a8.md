# 停止在 JavaScript 中使用对象作为哈希映射

> 原文：<https://betterprogramming.pub/stop-using-objects-as-hash-maps-in-javascript-9a272e85f6a8>

## 有一种更好的方法可以做到这一点

![](img/78e540818f2768b30e3c9f6b43063b0b.png)

[斯蒂夫·约翰森](https://unsplash.com/@steve_j?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍照。

地图是日常编程中最常用的数据结构之一。它保存了键-值对，这些键-值对可以很容易地被它们的键访问。在 Java 中，使用 HashMap 来实现这一点是很明显的。然而，在 JavaScript 中，只使用一个普通对象来实现这个目的是非常方便的:

但是 JavaScript 中有一个内置的数据结构就是为了这个目的而设计的:Map。让我给你一些喜欢地图胜过普通物体的理由。

# 1.更多关键类型

对象只能有符号或字符串。映射可以有任何类型的值作为键:对象、函数或原语。

# 2.更好的尺寸测定

虽然地图提供了尺寸属性，但是普通对象的尺寸必须通过艰苦的方式来确定。在 *O(1)* 时间内确定地图的大小是可能的，而对于一个普通的对象则需要 *O(n)* 步。

# 3.更好的性能

映射针对条目的频繁添加和删除进行了优化。

而且一张地图的条目数可以在常数时间内检索出来，而一个平原物体的条目数必须统计出来，这需要 *O(n)* 时间。

以我的 Macbook Pro 为例，这是一张包含 1000 万个条目的地图确定大小的平均持续时间:

*   普通 JS 对象:~1.6 s
*   地图:< 1 毫秒

此外，没有必要将任何键转换为字符串，这可以节省大量时间。

# 4.直接迭代

必须通过获取键并遍历它们来迭代对象。另一方面，地图是可迭代的，这意味着它可以被直接迭代。

# 5.关键订单

在 ECMAScript 2015 之前，不保证对象的键按任何特定顺序排列。对映射进行迭代可以保证键按照插入的顺序出现。

# 6.没有键覆盖

由于原型的原因，一个普通对象已经包含了一些键。您的键和对象已经包含的键之间可能会有冲突。地图在创建时不包含任何键。

注意:从 ECMAScript 2015 开始，您可以通过使用`Object.create(null)`创建您的普通对象映射来避免意外的键覆盖。

# 结论

使用对象作为哈希映射缺失实现的变通方法的时代已经过去了。对象非常有用，但是当面对典型的哈希映射用例时，它们不再是首选。