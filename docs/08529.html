<html>
<head>
<title>Speed Up Your Angular Projects by 10x With GPU.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用GPU.js将您的角度项目加速10倍</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/speed-up-your-angular-projects-by-10x-with-gpu-js-92c4b2bad4e3?source=collection_archive---------5-----------------------#2021-05-11">https://betterprogramming.pub/speed-up-your-angular-projects-by-10x-with-gpu-js-92c4b2bad4e3?source=collection_archive---------5-----------------------#2021-05-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3bf8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何在Angular中使用GPU编程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b8a6712aabc2bff3f80e2b818cd80fe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rDxYRR86genkrPIK"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">卢卡斯·凯普纳在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="befb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为开发人员，我们总是寻找机会来增强我们构建的应用程序的性能。但是当涉及到计算繁重的任务时，我们的选择很少，这些任务取决于CPU的性能。</p><p id="8fef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，如果我们将GPU的能力与我们的web应用程序结合起来，会发生什么呢？</p><p id="a735" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将向您展示使用<a class="ae ky" href="https://github.com/gpujs/gpu.js" rel="noopener ugc nofollow" target="_blank"> GPU.js </a>将GPU编程集成到您的Angular项目中的步骤。我还会做一个性能对比，讨论什么时候该用GPU，什么时候不该用。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="324d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">将GPU.js与Angular一起使用</h1><p id="f57c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果你对GPU.js一无所知，也不用担心。随着进程的进行，我会提供相关的细节。让我们从创建一个新的Angular项目开始。</p><h2 id="8d03" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">1.初始化新的角度项目</h2><p id="9f99" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要创建一个新的Angular项目，只需运行<code class="fe nl nm nn no b">new</code>命令:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="91ce" class="mz md it no b gy nt nu l nv nw">ng new &lt;project-name&gt;</span></pre><p id="a4d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你之前没有在你的机器上配置Angular，我建议你遵循他们的<a class="ae ky" href="https://angular.io/docs" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="aae3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，您可以运行<code class="fe nl nm nn no b">ng serve</code>命令并在浏览器中打开<code class="fe nl nm nn no b"><a class="ae ky" href="http://localhost:4200/" rel="noopener ugc nofollow" target="_blank">http://localhost:4200/</a></code>来测试项目。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/85684ccba71b68e28fd6ca77e7861126.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ae4A5eiYOynQNWqNdr9aSg.png"/></div></div></figure><h2 id="a0c4" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">2.安装GPU.js</h2><p id="2b32" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">正如我最初提到的，GPU.js是一个JavaScript加速库，可用于通用计算目的。</p><p id="3103" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果运行设备中没有GPU，使用GPU.js不会使您的应用程序过时。如果设备中没有GPU，它可以退回到常规的JavaScript引擎。所以，用GPU.js不会有什么坏处。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/f548d35d88a3f141cac77008b1fe61d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gxIob58_QAXfYe3a.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://gpu.rocks/#/" rel="noopener ugc nofollow" target="_blank"> GPU.js </a></p></figure><p id="aeb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像任何其他JavaScript库一样，GPU.js也可以在npm或yarn中使用。您可以使用其中任何一个来安装GPU.js:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="5275" class="mz md it no b gy nt nu l nv nw">npm install gpu.js — save<br/>or<br/>yarn add gpu.js</span></pre><p id="31ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以开始处理我们的第一个GPU.js函数了。</p><h2 id="dad6" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">3.用GPU.js编写内核函数</h2><p id="62d5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我将让这个应用程序编写一个函数来计算两个数字的乘法，并向它们提供不同大小的数字数组，以查看它们的执行时间。</p><p id="6f0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">先说GPU函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="7e20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在函数开始的时候，我已经初始化了一个新的GPU对象。然后我使用GPU.js中的内置函数<code class="fe nl nm nn no b">gpu.createKernel()</code>创建了一个名为<code class="fe nl nm nn no b">multiplyMatirx</code>的内核函数。</p><p id="2e72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">两个数字数组和矩阵大小作为输入参数传递给该函数，乘法将在其中发生。</p><p id="8314" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JavaScript performance API函数用于计算时间，而<code class="fe nl nm nn no b">performance.now()</code>函数将记录GPU执行的开始和结束时间。</p><h2 id="b787" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">4.编写CPU函数</h2><p id="567b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在我们要为CPU执行写一个等价的函数。为此，我使用了<code class="fe nl nm nn no b">for</code>循环，想出了这个小函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="e4ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除此之外，我还使用了一个名为<code class="fe nl nm nn no b">generateMatrices()</code>的函数来生成两个包含随机数的数组:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><h2 id="558d" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">5.创建简单的用户界面</h2><p id="fc4c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在我将实现一个简单的UI，用户可以在其中输入数组的大小并查看执行时间。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/a21ff16105e1fd82a487df76b11cfffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*2nHeMQvrijEV_4sb99Andw.png"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><h2 id="168b" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">6.运行应用程序并查看性能</h2><p id="ebcc" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在一切都设置好了，完整的代码如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f1ca" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">让我们看看性能差异</h1><p id="5420" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，是时候检查我们可以从GPU.js获得的性能提升，看看我们是否可以将它用于所有事情，或者是否有任何限制。</p><p id="bf6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，我用不同的数组大小多次执行该程序，结果非常有趣:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/a94ef1a10860ea2472bf6ef5561fe2ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ur_7EfLMeJAVMvOu9GV_WQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">执行时间</p></figure><p id="4a06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如你所看到的，当任务的规模很小时，CPU表现很好。对于所有200以下的数组大小，CPU显示出最佳的执行时间，而GPU则需要相当长的时间来完成任务。</p><p id="53b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，CPU适用于不太复杂或计算量不大的任务。</p><p id="6c0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是当数组大小增加时，GPU的性能开始比CPU好得多。当数组大小为1，000时，GPU的性能大约是CPU的十倍。</p><p id="56e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当任务的重量很重且更复杂时，GPU表现良好。</p><p id="1579" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用GPU时，您应该注意为GPU选择最佳任务并充分利用它。因此，我邀请大家在下一个Angular应用程序中尝试一下GPU.js，看看性能的提升。</p><p id="7022" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读！</p></div></div>    
</body>
</html>