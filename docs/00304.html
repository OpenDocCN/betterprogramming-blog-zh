<html>
<head>
<title>Clean Up Unused Localized Strings From a .strings File</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从. Strings文件中清除未使用的本地化字符串</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/unused-localized-strings-clean-up-from-a-strings-file-4e70dd97b177?source=collection_archive---------1-----------------------#2019-03-12">https://betterprogramming.pub/unused-localized-strings-clean-up-from-a-strings-file-4e70dd97b177?source=collection_archive---------1-----------------------#2019-03-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/0ec46c3f7962a0ad0588489659a7bae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i7CJaciXHSExpR9xibkgNA.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@philipestrada" rel="noopener ugc nofollow" target="_blank"> Philip Estrada </a>在<a class="ae kf" href="https://unsplash.com/photos/vJr3t39a0xw" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="da84" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">字符串文件用于iOS和macOS应用程序中的本地化。这些文件会随着时间的推移而增长，使其难以维护。很容易导致大量未使用的本地化字符串。虽然这不是性能问题，但是保持资源文件的整洁还是不错的。</p><p id="2e95" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Xcode没有为此提供现成的解决方案。然而，我们有一个很好的社区，有很多工具可以解决这个问题。我一头扎进去，看了看<a class="ae kf" href="https://github.com/samdmarshall/nslocalizer" rel="noopener ugc nofollow" target="_blank"> NSLocalizer </a>、<a class="ae kf" href="https://github.com/ijoshsmith/abandoned-strings" rel="noopener ugc nofollow" target="_blank">弃弦</a>，还有<a class="ae kf" href="https://buildingvts.com/clean-ios-localizable-files-8b910413b985" rel="noopener ugc nofollow" target="_blank">这篇</a>中的博文。在这两个GitHub项目中，来自约什·史密斯的项目给出了最好的结果。</p><p id="f147" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们开始之前，值得一提的是Gino Wu的Medium博客文章提供了一种将它集成到Xcode构建过程中的好方法。然而，在我看来，这并不是你需要经常集成和运行的东西，因为它会减慢你每次运行的构建过程。不太可能经常出现未使用的字符串，所以偶尔手动运行它就足够了。</p><p id="81b2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，让我们深入研究一下废弃的字符串终端工具。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="1b10" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">废弃的琴弦</h1><p id="a49f" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">运行该命令后，该工具将显示未使用的本地化字符串列表。</p><h2 id="7cf3" class="mo lm it bd ln mp mq dn lr mr ms dp lv kr mt mu lz kv mv mw md kz mx my mh mz bi translated">查找未使用的资源字符串</h2><p id="c826" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">第一步是从GitHub项目创建一个可执行文件。从<a class="ae kf" href="https://github.com/ijoshsmith/abandoned-strings" rel="noopener ugc nofollow" target="_blank">github.com/ijoshsmith/abandoned-strings</a>下载项目。然后使用Xcode构建它，并在products文件夹中找到可执行文件。</p><figure class="nb nc nd ne gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/78a682c2257bb610121c8797bb1f5a5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dX61VexnWBf4iPel.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">用于查找未使用的本地化字符串的可执行文件</p></figure><p id="a51b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">右键单击可执行文件并选择“在Finder中显示”,打开包含该文件的文件夹。这将是您在终端中使用的基本路径。您可以使用<code class="fe nf ng nh ni b">cd</code>命令来更改终端目录。之后，运行以下命令:</p><p id="91e3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe nf ng nh ni b">$ ./AbandonedStrings /Users/your-username/path/to/source/code</code></p><h2 id="b981" class="mo lm it bd ln mp mq dn lr mr ms dp lv kr mt mu lz kv mv mw md kz mx my mh mz bi translated">移除未使用的本地化字符串</h2><p id="be04" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">运行命令后，该工具将显示未使用的本地化字符串列表:</p><figure class="nb nc nd ne gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nj"><img src="../Images/c7defbbbaa9cc146116a9dab7e01cca7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Rtk4jbzjZZDPa6N7.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">运行命令后，结果中未使用的本地化字符串的列表</p></figure><p id="12f1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以使用此列表将它们从项目中移除。不幸的是，这仍然是一个手动的过程，如果您有许多未使用的字符串，这将是一个相当大的工作量。但是，如果您更频繁地运行该工具，这种情况会有所改善。</p><h2 id="33f5" class="mo lm it bd ln mp mq dn lr mr ms dp lv kr mt mu lz kv mv mw md kz mx my mh mz bi translated">结果包括哪些内容？</h2><p id="437e" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">该工具获取项目中的<code class="fe nf ng nh ni b">.strings</code>文件，并遍历所有已定义的键。假设字符串文件包含一个名为<code class="fe nf ng nh ni b">home.button.title</code>的键。该工具将获取该密钥，并验证是否有任何<code class="fe nf ng nh ni b">.h</code>、<code class="fe nf ng nh ni b">.m</code>、<code class="fe nf ng nh ni b">.swift</code>或<code class="fe nf ng nh ni b">.jsbundle</code>包含引用。如果没有，它将认为该密钥未被使用。</p><h2 id="ebc7" class="mo lm it bd ln mp mq dn lr mr ms dp lv kr mt mu lz kv mv mw md kz mx my mh mz bi translated">还有什么？</h2><p id="80a1" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">虽然这个工具可以很好地保持字符串文件的整洁，但是您必须自己手动运行它，并不时提醒自己运行它。然而，由于您不太可能经常引入未使用的字符串，所以不每天运行它会更好。</p></div></div>    
</body>
</html>