# 高度简化的 SSL/TLS 概述

> 原文：<https://betterprogramming.pub/a-highly-simplified-overview-of-ssl-tls-dc4068543253>

## 使用现实生活中的类比来理解网络通信

![](img/7f87b9dfd1c713015e314993d3b5eacd.png)

马库斯·温克勒在 [Unsplash](https://unsplash.com/s/photos/secure?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的照片

对于那些刚接触互联网的人来说，理解互联网上的交流是很困难的。尤其是有这么多复杂的缩写，如 SSL、密码学、HTTPS 等。我自己很长一段时间都是无知的，因为我从未真正致力于此。所以，我理解这对某些人来说是无法承受的。

在本文中，我的目标是让这变得更容易。用简单的例子，希望灌输一些安全连接如何建立，一些数据如何安全发送的基础知识。

# 安全通信的真实类比

一个晴朗的日子，当你从办公室回来时，你看到水不断地从浴室的水龙头滴下。这是需要调查的事情，但没有那么紧急。

所以，就在睡觉前，你在网上问几家公司是否有人能帮你。你也分享你的家庭住址。然后安详的睡去。

第二天早上，你看到一些人在你家门前排队，询问他们是否可以解决你的问题。现在你进退两难。你不知道如何信任他们。你不知道你家的地址是否被人黑了，并且冒充公司来抢劫你。

所以你问他们是否可以通过打电话给实际的公司并要求他们验证他们的姓名和出生日期来验证他们的真实性。如果公司不批准他们，那么你阻止这个人进入你的家。如果公司同意，你就给这个人一张签有今天日期的小卡片，让他在一个月内不受限制地进出房子。如果他们一个月后回来，他们需要再次被批准。

虽然上面是一个非常简单的安全网络通信的模拟，但是实际的要复杂一些。但是有了它是什么的知识，文章的下一部分应该是非常相关的。

# 为什么我们需要安全的连接？

这就是互联网上正常交流的样子。

![](img/2dd1d939e1980bdf34232c075aa167ef.png)

作者图片

大量信息通过互联网从一台计算机发送到另一台计算机，然后到达目的服务器。任何人都可以窃取这些信息来获取你的个人数据。这可能会给你和公司带来很多麻烦。

![](img/d28e8ef3574f52b83173ceda1dbfcf14.png)

作者图片

# 互联网上的安全连接

现在，让我们进入正题。

SSL(安全套接字层)是我们安全互联网的主干，当您的敏感信息从一台计算机传输到另一台计算机到达目的服务器时，它会保护您的敏感信息。一个安全的网站会有一个 HTTPS 地址，其中“S”代表安全。

那么，让我们看看 SSL 是如何工作的。

通过安全连接进行数据传输涉及两个主要步骤

## **SSL 握手**

这用于启动客户端和服务器之间的连接(或信任)。这一步使用非对称加密来验证 web 服务器。非对称加密使用数学上相关的密钥对来加密和解密数据。在密钥对中，一个密钥(称为公钥)与任何对通信感兴趣的人共享。密钥对中的另一个密钥(称为私钥)是保密的。数学公式的工作方式是数据可以用私钥加密，而私钥只能用相关的公钥解密。

![](img/89ca02e0d3d0c8656fcebf78ba2e5a06.png)

不对称加密。作者图片

在我们之前的例子中，这将是当我们要求该人通过打电话给公司来验证他们的真实性。

**数据传输，**连接建立后传输加密数据的实际过程。这使用对称加密。在这种情况下，只有一个密钥对数据进行加密和解密。发送者和接收者都应该拥有这个密钥，以便成功地进行通信。在初始握手完成后，SSL 使用会话密钥进行对称加密。

![](img/a0baea4f99eaf6a7cc3c5ce177e7b3a8.png)

对称加密。作者图片

# 逐步流程

现在让我们看看整个过程是如何工作的:

1.  客户端通过发送“*客户端你好*”消息发起通信。这包括客户端的 SSL 版本号、会话数据、密码设置等。
2.  服务器回复一个“*服务器你好*”消息。与客户端消息类似，这包括服务器的 SSL 版本号、会话数据、密码设置、带有公钥的附加 SSL 证书。SSL 证书只是一个包含公钥的数据文件，需要它来确保网站所有者就是他们所说的那个人。可以从证书颁发机构获得 SSL 证书。
3.  客户端验证来自证书颁发机构的服务器 SSL 证书，并对服务器进行身份验证。如果身份验证失败，客户端将拒绝 SSL 连接并抛出异常。
4.  如果上一步中的授权成功，客户端将创建一个会话密钥，用服务器的公钥对其进行加密，并将其发送给服务器。请记住，实际的数据传输需要会话密钥。
5.  服务器用自己的私钥解密会话密钥，并将确认发送给用会话密钥加密的客户端。这标志着首次握手的结束。
6.  握手成功后，客户端将实际数据发送到服务器，并用会话密钥加密。如前所述，这里的数据使用相同的密钥(对称加密)进行加密和解密，因为与非对称加密相比，这很容易并且占用较少的 CPU
7.  服务器接收数据，使用之前收到的会话密钥解密。

我希望这篇文章能够阐明如何在客户机和服务器之间建立安全连接。所以，下次你看到你的浏览器警告你连接不安全时，你就知道它为什么这么说了。