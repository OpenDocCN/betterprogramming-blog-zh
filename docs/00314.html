<html>
<head>
<title>5 Steps to Build a Node.js Mock Server and API With Random Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用随机数据构建Node.js模拟服务器和API的5个步骤</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-nodejs-mock-server-api-with-random-data-86303db9156a?source=collection_archive---------0-----------------------#2019-03-27">https://betterprogramming.pub/build-a-nodejs-mock-server-api-with-random-data-86303db9156a?source=collection_archive---------0-----------------------#2019-03-27</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="3128" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">创建一个模拟API进行开发</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/19b01faa6ad34fb25dd095ecbc9b9b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sVo_MmeKqfEkaKJi"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@tvick?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">泰勒·维克</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="b332" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">作为前端开发人员，您经常需要来自API的数据。但是有时候你的团队还没有建立后端。为了让您继续模拟您的数据，最好不要将您的数据结构存储在内存中。</p><p id="6905" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">尽快开始与数据来源的外部API对话是一个好主意。在本教程中，我想通过一个最小的设置来模拟你的数据。之后，您应该能够根据需要用自己的数据扩展它。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="d232" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">1.属国</h1><p id="0708" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">为了使用Node，您需要在计算机上安装它。对于Mac用户来说，我强烈建议安装nvm，因为它会让以后更新Node.js更容易。还有一个Windows版本。</p><p id="84bc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为此项目创建一个新文件夹。运行<code class="fe na nb nc nd b">npm init -y</code>用Node初始化文件夹，它会自动为你创建一个<code class="fe na nb nc nd b">package.json</code>。</p><p id="b4f0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为了创建模拟服务器，我们需要两个npm依赖项:<code class="fe na nb nc nd b"><a class="ae kz" href="https://www.npmjs.com/package/json-server" rel="noopener ugc nofollow" target="_blank">json-server</a></code>和<code class="fe na nb nc nd b"><a class="ae kz" href="https://www.npmjs.com/package/casual" rel="noopener ugc nofollow" target="_blank">casual</a></code>。我们在项目中运行<code class="fe na nb nc nd b">npm install json-server casual — save-dev</code>。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="c57a" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">2.模拟服务器的基础</h1><p id="9e45" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">创建一个<code class="fe na nb nc nd b">index.js</code>，并将这段代码粘贴到其中。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div></figure><p id="9133" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们包括<code class="fe na nb nc nd b">json-server</code>是为了使用它。然后我们在<code class="fe na nb nc nd b">const server</code>中创建一个服务器实例。有了中间件，我们可以设置一些选项——比如静态文件的路径、CORS等等。但是这里我们只是使用它，没有任何特定的选项。</p><p id="2e16" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">港口非常重要。如果你想让它在一个服务器上运行，它会首先搜索是否有一个节点服务器的默认端口；否则，它会选择端口<code class="fe na nb nc nd b">3000</code>。</p><p id="1106" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们通过使用<code class="fe na nb nc nd b">server.user()</code>来包含<code class="fe na nb nc nd b">bodyParse</code>和中间件。之后，我们做一个控制台日志，这样您就知道模拟服务器正在运行。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="e429" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">3.为100个用户生成数据</h1><p id="e679" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">创建一个名为<code class="fe na nb nc nd b">/users</code>的文件夹，并在其中创建一个<code class="fe na nb nc nd b">index.js</code>。</p><p id="221f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">首先，包含npm包<code class="fe na nb nc nd b">casual</code>以便使用它。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div></figure><p id="9f0d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">对于特定语言，如果您不想使用英语默认值，请键入:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div></figure><p id="246a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然后在它下面，我们需要导出一个模块，以便以后在根中的<code class="fe na nb nc nd b">index.js</code>中使用。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div></figure><p id="ed36" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这种情况下，我们使用<code class="fe na nb nc nd b">server.get()</code>作为<code class="fe na nb nc nd b">GET</code>请求。但是我们也可以选择<code class="fe na nb nc nd b">post</code>、<code class="fe na nb nc nd b">put</code>、<code class="fe na nb nc nd b">delete</code>等等。</p><p id="4a44" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在内部，我们检查请求是否是一个<code class="fe na nb nc nd b">GET</code>请求。如果是这样，我们需要用户的脚本并调用响应中的函数，这样您将看到随机生成的用户数组。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="01fd" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">4.创建/用户端点</h1><p id="015f" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">为了获得100个用户的数据，我们需要为模拟服务器创建一个端点。将下面的代码粘贴到<code class="fe na nb nc nd b">root index.js</code>中，就在<code class="fe na nb nc nd b">server.listen()</code>函数之前。</p><pre class="kk kl km kn gu ng nd nh ni aw nj bi"><span id="866c" class="nk me iu nd b gz nl nm l nn no">server.get(‘/users’, (request, response) =&gt; {<br/> if (request.method === ‘GET’) {<br/>   const users = require(‘./users/index’)<br/>   response.status(200).jsonp(users())<br/> }<br/>})</span></pre><p id="16ed" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这种情况下，我们对一个<code class="fe na nb nc nd b">GET</code>请求使用<code class="fe na nb nc nd b">server.get()</code>。但是我们也可以选择<code class="fe na nb nc nd b">post</code>、<code class="fe na nb nc nd b">put</code>、<code class="fe na nb nc nd b">delete</code>等等。</p><p id="2c75" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在里面。我们检查请求是否是一个<code class="fe na nb nc nd b">GET</code>请求。如果是这样，我们需要用户的脚本并调用响应中的函数，这样您将看到随机生成的用户数组。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="0167" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">5.运行模拟服务器</h1><p id="0f7f" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">现在，我们能够运行这个模拟服务器，并在我们的前端应用程序中获取数据。</p><p id="b353" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在项目的根文件夹中运行<code class="fe na nb nc nd b">node index.js</code>。访问<code class="fe na nb nc nd b"><a class="ae kz" href="http://localhost:3000/users" rel="noopener ugc nofollow" target="_blank">localhost:3000/users</a></code>，您将看到用户数组中有100个用户。</p><p id="92c2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我希望本教程为您生成更多随机数据和扩展您的模拟服务器奠定了基础。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="7597" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">阅读更多</h1><div class="np nq gq gs nr ns"><a href="https://medium.com/dev-together/frontend-development-on-a-budget-raspberry-pi-4-4c917124d348" rel="noopener follow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">预算上的前端开发:树莓Pi 4</h2><div class="nz l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">medium.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of kt ns"/></div></div></a></div><div class="np nq gq gs nr ns"><a href="https://medium.com/dev-together/5-tips-for-healthier-developers-ea21d1e826f" rel="noopener follow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">给健康开发者的5个建议</h2><div class="og l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">你的身体和大脑需要关注</h3></div><div class="nz l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">medium.com</p></div></div><div class="oa l"><div class="oh l oc od oe oa of kt ns"/></div></div></a></div><div class="np nq gq gs nr ns"><a href="https://medium.com/dev-together/what-tech-i-use-in-2020-as-developer-f3269f857f0e" rel="noopener follow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">作为开发者，我将在2020年使用什么技术</h2><div class="og l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">我在工作中使用的软件、硬件和其他东西</h3></div><div class="nz l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">medium.com</p></div></div><div class="oa l"><div class="oi l oc od oe oa of kt ns"/></div></div></a></div><div class="np nq gq gs nr ns"><a href="https://medium.com/dev-together/javascript-concepts-you-need-before-starting-w-frameworks-libraries-25a325312b5c" rel="noopener follow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">开始使用框架和库之前需要的JavaScript概念</h2><div class="og l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">在你熟悉它们之前不要开始</h3></div><div class="nz l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">medium.com</p></div></div><div class="oa l"><div class="oj l oc od oe oa of kt ns"/></div></div></a></div></div></div>    
</body>
</html>