<html>
<head>
<title>Working With Astro — The Super Fast Web Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Astro——超快速Web框架</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/working-with-astro-the-super-fast-web-framework-5dadd98f8e39?source=collection_archive---------4-----------------------#2022-10-24">https://betterprogramming.pub/working-with-astro-the-super-fast-web-framework-5dadd98f8e39?source=collection_archive---------4-----------------------#2022-10-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4dc2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">提供最少的JavaScript</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/28eb38f198781a24fe04af5d00dc673a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oDgPd01FKboRjQA19CZYIw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Astro js标志。作者图片</p></figure><p id="b9d9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Astro 是一个一体化的网络框架，用于构建快速、专注于内容的网站。Astro是为构建内容丰富的网站而设计的。这包括大多数营销、出版和文档网站、博客、作品集和一些电子商务网站。</p><p id="cbfc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与此同时，Astro可能不是一些复杂应用程序的正确选择，如管理仪表板、收件箱、社交网络、待办事项列表等。</p><p id="fcb3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Astro在客户端渲染上利用了<a class="ae lu" href="https://javascript.plainenglish.io/a-hands-on-guide-for-a-server-side-rendering-react-18-app-4e630aae274c" rel="noopener ugc nofollow" target="_blank">服务器端渲染</a>，它是一个多页面应用(MPA)框架。MPA网站由多个用HTML、CSS、JavaScript(或TypeScript)编写的HTML页面组成。MPA与单页应用程序(SPA)不同，后者使用客户端渲染，并直接在浏览器中动态渲染每条路线。</p><p id="78ff" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Astro在快速初始加载和短时间交互(TTI)方面优于SPA，TTI衡量一个页面完全交互需要多长时间。</p><p id="90f3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Astro是UI不可知的。Astro官方支持react、Preact、Solid、Svelte、Vue和Lit。不同框架编写的代码可以混合在同一个页面上。</p><p id="c837" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这听起来像是一个令人惊叹的web框架吗？</p><p id="07de" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">事不宜迟，让我们看看Astro是如何工作的。</p><h1 id="e267" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">安装并运行Astro</h1><p id="1b41" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">Astro需要<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/5-major-features-of-node-js-18-5f4a164cc9fc"> Node.js </a>版本“<code class="fe ms mt mu mv b">^14.18.0 || &gt;=16.12.0</code>”。运行以下命令安装Astro:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="6791" class="na lw it mv b gy nb nc l nd ne">% yarn create astro<br/>yarn create v1.22.10<br/>[1/4] 🔍  Resolving packages...<br/>[2/4] 🚚  Fetching packages...<br/>[3/4] 🔗  Linking dependencies...<br/>[4/4] 🔨  Building fresh packages...<br/>success Installed "create-astro@1.1.0" with binaries:<br/>      - create-astro<br/>[##################################################################################################################] 114/114<br/>Welcome to Astro! (create-astro v1.1.0)<br/>Lets walk through setting up your new Astro project.</span><span id="9555" class="na lw it mv b gy nf nc l nd ne">✔ Where would you like to create your new project? … ./my-astro-site<br/>✔ Which template would you like to use? <br/>❯   Just the basics (recommended)<br/>    Blog<br/>    Portfolio<br/>    Documentation Site<br/>    Empty project<br/>✔ Template copied!<br/>✔ Would you like to install yarn dependencies? (recommended) … yes<br/>✔ Packages installed!<br/>✔ Would you like to initialize a new git repository? (optional) … no<br/>ℹ Sounds good! You can come back and run git init later.<br/>✔ How would you like to setup TypeScript?<br/>    Relaxed<br/>❯   Strict (recommended)<br/>    Strictest<br/>    I prefer not to use TypeScript<br/>✔ TypeScript settings applied!<br/>✔ Setup complete.<br/>✔ Ready for liftoff!</span><span id="4ee5" class="na lw it mv b gy nf nc l nd ne">Next steps</span><span id="63b7" class="na lw it mv b gy nf nc l nd ne">You can now cd into the my-astro-site project directory.<br/>Run yarn dev to start the Astro dev server. CTRL-C to close.<br/>Add frameworks like react and tailwind to your project using astro add</span><span id="3486" class="na lw it mv b gy nf nc l nd ne">Stuck? Come join us at <a class="ae lu" href="https://astro.build/chat" rel="noopener ugc nofollow" target="_blank">https://astro.build/chat</a><br/>Good luck out there, astronaut.</span><span id="8513" class="na lw it mv b gy nf nc l nd ne">✨  Done in 88.00s.</span></pre><p id="6cc3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">项目创建在文件夹中，<code class="fe ms mt mu mv b">my-astro-site</code>，<code class="fe ms mt mu mv b">package.json</code>位于根目录。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="d9cd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在<code class="fe ms mt mu mv b">package.json</code>中有两种类型的依赖关系:<code class="fe ms mt mu mv b"><a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/package-jsons-dependencies-in-depth-a1f0637a3129">dependencies</a></code> <a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/package-jsons-dependencies-in-depth-a1f0637a3129">和</a> <code class="fe ms mt mu mv b"><a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/package-jsons-dependencies-in-depth-a1f0637a3129">devDependencies</a></code>。这两个依赖项在Astro中的工作方式基本相同，因为在构建时都需要。建议将所有依赖项放在<code class="fe ms mt mu mv b">dependencies</code>中启动，仅在特殊需要时使用<code class="fe ms mt mu mv b">devDependencies</code>。</p><p id="ae1e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用安装期间的<code class="fe ms mt mu mv b">Just the basics</code>选项，只有一个依赖项<code class="fe ms mt mu mv b">astro</code>(上面代码中的第14行)。</p><p id="4201" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">执行<code class="fe ms mt mu mv b">yarn astro</code>，我们看到所有的Astro命令:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="8cdf" class="na lw it mv b gy nb nc l nd ne">% yarn astro  <br/>yarn run v1.22.17<br/>$ astro</span><span id="d3ea" class="na lw it mv b gy nf nc l nd ne">astro  v1.5.2 Build faster websites.</span><span id="05b2" class="na lw it mv b gy nf nc l nd ne">astro [command] [...flags]</span><span id="9434" class="na lw it mv b gy nf nc l nd ne">Commands <br/>              add  Add an integration.<br/>            build  Build your project and write it to disk.<br/>            check  Check your project for errors.<br/>              dev  Start the development server.<br/>             docs  Open documentation in your web browser.<br/>          preview  Preview your build locally.<br/>        telemetry  Configure telemetry settings.</span><span id="af07" class="na lw it mv b gy nf nc l nd ne">Global Flags <br/>  --config &lt;path&gt;  Specify your config file.<br/>    --root &lt;path&gt;  Specify your project root folder.<br/>        --verbose  Enable verbose logging.<br/>         --silent  Disable all logging.<br/>        --version  Show the version number and exit.<br/>           --help  Show this help message.</span><span id="c18d" class="na lw it mv b gy nf nc l nd ne">✨  Done in 1.21s.</span></pre><p id="66e1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在开发模式下启动Astro:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="0f9d" class="na lw it mv b gy nb nc l nd ne">% yarn dev<br/>yarn run v1.22.17<br/>$ astro dev<br/>  🚀  astro  v1.5.0 started in 52ms<br/>  <br/>  ┃ Local    http://127.0.0.1:3000/<br/>  ┃ Network  use --host to expose</span></pre><p id="8953" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">默认网站在<code class="fe ms mt mu mv b">http://localhost:3000/</code>可用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/65af779255793c455718ce365d93da6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H4aYfWch_uka8ZRTgmu6Qg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="887e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">各大ide都有Astro插件。以下是<code class="fe ms mt mu mv b">.astro</code>文件的<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/10-useful-plugins-for-visual-studio-code-6ab62c0b14ee"> VS代码扩展</a>，支持语法和语义高亮、诊断消息、快速修复、排序导入、代码格式化等。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/5e7e708ffe244f18c64abe1ca927cad7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wIXlo4gaxVgfXINNvSEdlA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="f965" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">Astro源文件夹</h1><p id="b14a" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">安装完成后，文件夹<code class="fe ms mt mu mv b">my-astro-site</code>如下所示:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="4935" class="na lw it mv b gy nb nc l nd ne">my-astro-site<br/>├── README.md<br/>├── public<br/>│   └── favicon.svg<br/>├── src<br/>│   ├── components<br/>│   ├── layouts<br/>│   ├── pages<br/>│   └── <!-- -->env.d.ts<br/>├── astro.config.mjs<br/>├── package.json<br/>├── tsconfig.json<br/>└── <!-- -->.gitignore</span></pre><ul class=""><li id="ca6b" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">my-astro-site</code>:包含Astro web框架的目录。</li><li id="0247" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">README.md</code>:描述项目结构和脚本。</li><li id="ea14" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">public</code>:静态资产的目录，包括<code class="fe ms mt mu mv b">favicon.svg</code>。</li><li id="2b52" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">src/components</code>:Astro组件推荐目录。</li><li id="163a" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">src/layouts</code>:创建可重用页面模板的推荐目录。</li><li id="e931" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">src/pages</code>:为Astro页面提供基于目录的路由。<code class="fe ms mt mu mv b">src/pages</code>目录中的每个文件都成为网站的一个端点。</li><li id="97ca" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">src/env.d.ts</code>:它引用了Astro项目特有的TypeScript类型声明。</li><li id="3952" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">astro.config.mjs</code>:Astro配置文件。</li><li id="dfa4" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">tsconfig.json</code>:TypeScript配置文件。</li></ul><h1 id="a117" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">Astro组件</h1><p id="06b4" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">组件是一个天文项目的基本构件。它们是没有客户端运行时的纯HTML模板组件。</p><p id="75ce" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Astro组件语法是HTML的超集，类似于JSX。每个Astro组件都有一个文件扩展名<code class="fe ms mt mu mv b">.astro</code>，它们在构建过程中被呈现为HTML。Astro组件包括两个主要部分:组件脚本和组件模板。</p><p id="9677" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">组件脚本类似React，用JavaScript或TypeScript编写。它可以导入其他Astro组件、框架组件和JSON数据，从API或数据库获取内容，并创建要在组件模板中引用的变量。</p><p id="43cf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Astro使用代码栅栏(<code class="fe ms mt mu mv b">---</code>)来绑定组件脚本的开头和结尾。</p><p id="6ac9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">组件模板在组件脚本的下面。它决定组件的HTML输出。它支持JavaScript表达式、导入组件和特殊的Astro指令。组件脚本中定义的数据和值可以在模板中使用，以生成动态创建的HTML。</p><p id="b4b2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">开箱后，文件夹<code class="fe ms mt mu mv b">src/components</code>带有一个组件<code class="fe ms mt mu mv b">Card.astro</code>。</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="2096" class="na lw it mv b gy nb nc l nd ne">components<br/>└── Card.astro</span></pre><p id="2972" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe ms mt mu mv b">Card</code>是一个有道具的组件——<code class="fe ms mt mu mv b">href</code>、<code class="fe ms mt mu mv b">title</code>、<code class="fe ms mt mu mv b">body</code>。当点击标题组件时，页面被重定向到<code class="fe ms mt mu mv b">href</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/d2afac337758de2f92749285d913a155.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*N-Xiv01qhjIqA5XsLBMSnA.png"/></div></figure><p id="a623" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里是<code class="fe ms mt mu mv b">src/components/Card.astro</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="4c9b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">由第1行和第9行的代码栏界定，它定义了组件脚本。</p><ul class=""><li id="0a7d" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated">在第2–6行，定义了接口<code class="fe ms mt mu mv b">Props</code>。</li><li id="956c" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">在第8行，三个常量变量<code class="fe ms mt mu mv b">href</code>、<code class="fe ms mt mu mv b">title</code>和<code class="fe ms mt mu mv b">body</code>从props中被析构。</li></ul><p id="8b77" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从第11行到第63行，它定义了组件模板。</p><ul class=""><li id="bebf" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated">在第11-21行，JSX模板由<code class="fe ms mt mu mv b">href</code>、<code class="fe ms mt mu mv b">title</code>和<code class="fe ms mt mu mv b">body</code>的插值定义。</li><li id="e4cb" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">第22–63行定义了模板样式。</li><li id="cc72" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">在第28行，使用CSS变量将卡片的<code class="fe ms mt mu mv b">background-image</code>定义为渐变颜色。如果浏览器窗口足够宽，它会显示为四张卡片中每三张卡片的一个重音符号(见下图中的红框)。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/9e90fd120baa15fa759dbbd2a566068d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-bU8qEcZ6qasnTxxSqZEEg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="f9f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可能想知道第四张卡上的红心是什么。这只是一个表情符号，❤️.</p><h1 id="269e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">天文布局</h1><p id="506b" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">布局是一个特殊的Astro组件，用于创建具有通用设置的可重用页面模板，如页眉和页脚。这些公共部分被实现为页面可以重用的布局组件。布局组件通常以扩展名<code class="fe ms mt mu mv b">.astro</code>或<code class="fe ms mt mu mv b">.md</code>命名。</p><p id="67d5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">开箱后，文件夹<code class="fe ms mt mu mv b">src/layouts</code>带有一个组件<code class="fe ms mt mu mv b">Layout.astro</code>。</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="b474" class="na lw it mv b gy nb nc l nd ne">layouts<br/>└── Layout.astro</span></pre><p id="5bd7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe ms mt mu mv b">Layout</code>是一个同时提供页面外壳(<code class="fe ms mt mu mv b">&lt;html&gt;</code>、<code class="fe ms mt mu mv b">&lt;head&gt;</code>和<code class="fe ms mt mu mv b">&lt;body&gt;</code>元素)和<code class="fe ms mt mu mv b">&lt;slot /&gt;</code>的组件。<code class="fe ms mt mu mv b">&lt;slot /&gt;</code>用于指定一个子组件应该被注入到布局页面的什么地方。</p><p id="7f18" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里是<code class="fe ms mt mu mv b">src/layouts/Layout.astro</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="3e94" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">由第1行和第7行的代码栏界定，它定义了组件脚本。</p><ul class=""><li id="7044" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated">在第2–4行，定义了接口<code class="fe ms mt mu mv b">Props</code>。</li><li id="481c" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">在第6行，常量变量<code class="fe ms mt mu mv b">title</code>从props中被析构。</li></ul><p id="acea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从第9行到第40行，它定义了组件模板。</p><ul class=""><li id="820e" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated">在第11–17行，定义了文档<code class="fe ms mt mu mv b">&lt;head&gt;</code>元素。标题设置为<code class="fe ms mt mu mv b">title</code>的插值(第16行)。</li><li id="e6b3" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">在第19行，一个<code class="fe ms mt mu mv b">&lt;slot /&gt;</code>被用来放置一个子组件。</li><li id="af26" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">第20–38行定义了模板样式。</li><li id="b696" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">在第20行，<code class="fe ms mt mu mv b">is:global</code>是一个Astro指令，它将样式范围设置为全局。</li></ul><p id="f22a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面的布局中没有可见的组件，除了<code class="fe ms mt mu mv b">&lt;slot /&gt;</code>。常见的布局部分是head元素和全局样式。</p><p id="7750" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于默认网站，<code class="fe ms mt mu mv b">View Page Source</code>浏览器显示转换后的标题内容，其中标题设置为<code class="fe ms mt mu mv b">Welcome to Astro.</code>(下面代码中的第6行)，以及全局样式(下面代码中的第7–19行)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><h1 id="589c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">天文页面</h1><p id="17e8" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">页面是放置在<code class="fe ms mt mu mv b">src/pages</code>目录中的文件。他们负责处理网站上每个页面的路由、数据加载和整体页面布局。路由基于索引文件或索引文件的目录名。支持的文件类型有:</p><ul class=""><li id="ae69" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">.astro</code></li><li id="70c8" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">.md</code></li><li id="2f63" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">.mdx</code>(安装了MDX集成)</li><li id="0f7f" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">.html</code></li><li id="4f79" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">[ <code class="fe ms mt mu mv b">.js</code> / <code class="fe ms mt mu mv b">.ts</code> ](作为端点)</li></ul><p id="2ed0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">开箱后，文件夹<code class="fe ms mt mu mv b">src/pages</code>带有一个组件<code class="fe ms mt mu mv b">index.astro</code>。</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="8e20" class="na lw it mv b gy nb nc l nd ne">pages<br/>└── index.astro</span></pre><p id="0427" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe ms mt mu mv b">index.astro</code>定义了当URL为<code class="fe ms mt mu mv b">/</code>时要显示的UI。这里是<code class="fe ms mt mu mv b">src/pages/index.astro</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="4bfd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">由第1行和第4行的代码栏界定，它定义了组件脚本。</p><ul class=""><li id="ad7a" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated">在第2行，<code class="fe ms mt mu mv b">Layout</code>被导入。</li><li id="00a2" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">在第3行，<code class="fe ms mt mu mv b">Card</code>被导入。</li></ul><p id="7394" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从第6行到第82行，它定义了组件模板。</p><ul class=""><li id="0d7e" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated">在第6行，<code class="fe ms mt mu mv b">Layout</code>被指定的标题调用，它的孩子(第7-36行)将被放入<code class="fe ms mt mu mv b">Layout</code>的<code class="fe ms mt mu mv b">&lt;slot /&gt;</code>中。</li><li id="e3ee" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">在第8行，定义了<code class="fe ms mt mu mv b">h1</code>标题<code class="fe ms mt mu mv b">Welcome to Astro</code>。</li><li id="320b" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">第9–13行定义了指令段落。</li><li id="c39e" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">在第16–19行，创建了标题为<code class="fe ms mt mu mv b">Documentation</code>的<code class="fe ms mt mu mv b">Card</code>。</li><li id="ce72" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">在第20–24行，创建了标题为<code class="fe ms mt mu mv b">Integrations</code>的<code class="fe ms mt mu mv b">Card</code>。</li><li id="c6c7" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">在第25–29行，创建了标题为<code class="fe ms mt mu mv b">Themes</code>的<code class="fe ms mt mu mv b">Card</code>。</li><li id="9546" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">在第30–34行，创建了标题为<code class="fe ms mt mu mv b">Community</code>的<code class="fe ms mt mu mv b">Card</code>，其中正文包括表情符号❤️(第33行)。</li><li id="08f0" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">在第39–82行，定义了模板样式。</li></ul><h1 id="c25f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">Astro模板指令</h1><p id="9192" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">模板指令是Astro组件模板(<code class="fe ms mt mu mv b">.astro</code>文件)中一种特殊的HTML属性，有些也可以在<code class="fe ms mt mu mv b">.mdx</code>文件中使用。它们用于控制一个元素或组件的行为，但是它们从不直接包含在最终的HTML输出中。</p><p id="57a2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">模板指令的名称中包含一个冒号(<code class="fe ms mt mu mv b">:</code>)，格式为<code class="fe ms mt mu mv b">X:Y</code>，并且它必须对编译器可见，也就是说，它没有隐藏在<code class="fe ms mt mu mv b">&lt;X {...attr}&gt;</code>格式中。</p><p id="6eef" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">大多数模板指令没有值，比如<code class="fe ms mt mu mv b">&lt;X client:load /&gt;</code>。但是有些模板指令采用自定义值，比如<code class="fe ms mt mu mv b">&lt;X class:list={['some-css-class']} /&gt;</code>。</p><h1 id="5f30" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">通用指令</h1><p id="1fa5" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">Astro组件中使用通用指令:</p><ul class=""><li id="7f6f" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">class:list={...}</code>:它接受一个类值数组，并将它们转换成一个类字符串。该列表由字符串、对象的所有真值键、扁平数组和扁平集组成。重复的值会自动删除。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><ul class=""><li id="749a" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">set:html={string}</code>:将一个HTML字符串注入到一个元素中，类似于设置<code class="fe ms mt mu mv b">el.innerHTML</code>。Astro不会自动转义该值。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><ul class=""><li id="0fe5" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">set:text={string}</code>:它将一个文本字符串注入到一个元素中。与<code class="fe ms mt mu mv b">set:html</code>不同的是，<code class="fe ms mt mu mv b">string</code>值由Astro自动转义。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><h1 id="edc8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">客户指令</h1><p id="a51d" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">客户端指令控制组件如何在页面上被水合。默认情况下，客户端中的组件不会被水合。如果没有提供<code class="fe ms mt mu mv b">client:*</code>指令，它的HTML将在没有JavaScript的情况下呈现在页面上。</p><ul class=""><li id="6cc7" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">client:load</code>:页面加载时立即加载并融合组件JavaScript。</li></ul><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="1e0e" class="na lw it mv b gy nb nc l nd ne">&lt;BuyButton client:load /&gt;</span></pre><ul class=""><li id="3399" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">client:idle</code>:当页面完成初始加载并且<code class="fe ms mt mu mv b">requestIdleCallback</code>事件触发后，它加载并合并组件JavaScript。</li></ul><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="12a5" class="na lw it mv b gy nb nc l nd ne">&lt;ShowHideButton client:idle /&gt;</span></pre><ul class=""><li id="a143" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">client:visible</code>:一旦组件进入用户的视口，它就加载并合并组件JavaScript。这在内部使用了一个<code class="fe ms mt mu mv b">IntersectionObserver</code>来跟踪可见性。</li></ul><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="9cc6" class="na lw it mv b gy nb nc l nd ne">&lt;HeavyImageCarousel client:visible /&gt;</span></pre><ul class=""><li id="572c" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">client:media={string}</code>:一旦遇到特定的CSS媒体查询，它就加载并合并组件JavaScript。</li></ul><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="b0c9" class="na lw it mv b gy nb nc l nd ne">&lt;SidebarToggle client:media="(max-width: 50em)" /&gt;</span></pre><ul class=""><li id="4223" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">client:only={string}</code>:跳过HTML服务器端渲染，只在客户端渲染。它的行为类似于<code class="fe ms mt mu mv b">client:load</code>,在页面加载时立即加载、呈现和合并组件。</li></ul><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="ccd2" class="na lw it mv b gy nb nc l nd ne">&lt;SomeReactComponent client:only="react" /&gt;</span></pre><h1 id="8686" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">脚本和样式指令</h1><p id="8c95" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">脚本和样式指令只能在HTML <code class="fe ms mt mu mv b">&lt;script&gt;</code>和<code class="fe ms mt mu mv b">&lt;style&gt;</code>标签上使用，以控制客户端JavaScript和CSS在页面上的处理方式。</p><ul class=""><li id="7ea1" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">is:global</code>:当包含组件时，它使<code class="fe ms mt mu mv b">&lt;style&gt;</code>标签的内容在页面上全局应用。这将禁用Astro的CSS作用域系统，该系统将<code class="fe ms mt mu mv b">&lt;style&gt;</code> CSS规则作用于组件。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><ul class=""><li id="b9aa" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">is:inline</code>:它告诉Astro在最终的输出HTML中保持<code class="fe ms mt mu mv b">&lt;script&gt;</code>或<code class="fe ms mt mu mv b">&lt;style&gt;</code>标签不变。否则，Astro将处理、优化和捆绑它在页面上看到的任何<code class="fe ms mt mu mv b">&lt;script&gt;</code>和<code class="fe ms mt mu mv b">&lt;style&gt;</code>标签。限制一些Astro特性，比如导入一个npm包或者使用一种编译成CSS的语言，比如SASS。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><ul class=""><li id="92a6" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated"><code class="fe ms mt mu mv b">define:vars={...}</code>:可以将组件前端的服务器端变量传入客户端<code class="fe ms mt mu mv b">&lt;script&gt;</code>或<code class="fe ms mt mu mv b">&lt;style&gt;</code>标签。支持任何JSON可序列化的前台事务变量，包括通过<code class="fe ms mt mu mv b">Astro.props</code>传递的<code class="fe ms mt mu mv b">props</code>。值用<code class="fe ms mt mu mv b">JSON.stringify()</code>序列化。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="3056" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它显示以下文本:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/f227ae3c75f358c76c94213d596149de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*m4H_p9A39MnVMhpQoLhSKg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="9bad" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">高级指令</h1><p id="2b6e" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated"><code class="fe ms mt mu mv b">is:raw</code>是高级指令。它指示Astro编译器将该元素的任何子元素视为文本。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><h1 id="e58e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">阿斯特罗群岛</h1><p id="6beb" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated"><a class="ae lu" href="https://jasonformat.com/islands-architecture/" rel="noopener ugc nofollow" target="_blank">群岛建筑</a>最初是由Etsy的前端建筑师凯蒂·塞勒-米勒在2019年创造的，并在2020年由Preact的创造者杰森·米勒进一步扩展。Astro采用了islands架构，这种架构鼓励在服务器呈现的网页中进行小规模、集中的交互。默认情况下，它向客户端发送纯HTML，并为交互式小部件注入占位符。在静态内容的海洋中，每个页面都几乎没有互动的孤岛。它最大限度地减少了页面加载时间，并最大限度地减少了在客户端执行的工作。当出现错误时，它也会优雅地降级。</p><p id="8e9e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Astro默认用零客户端JavaScript生成每个网站。它使用由React、Preact、Svelte、Vue、SolidJS、AlpineJS、Lit和Astro构建的前端UI组件。这些组件会提前自动呈现HTML，并去掉所有JavaScript。通过从页面中删除所有未使用的JavaScript，默认情况下保持每个站点的速度。</p><h1 id="7828" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="3197" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">Astro是一个一体化的web框架，用于构建快速、以内容为中心的网站。Astro是为构建内容丰富的网站而设计的。这包括大多数营销网站、发布网站、文档网站、博客、作品集和一些电子商务网站。</p><p id="1cfd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Astro在客户端渲染上利用了服务器端渲染，这是一个MPA框架。Astro提供了快速的初始加载和较短的交互时间。</p><p id="7f9c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在某种程度上，Astro类似于Qwik，我们在之前的一篇文章中介绍了Qwik。由于Astro专注于基于内容的网站，所以从目录结构到<code class="fe ms mt mu mv b">package.json</code>都比Qwik简单。</p><p id="d0f8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Astro采用的是岛式架构，这也是<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/the-comprehensive-guide-on-fresh-a-new-web-framework-by-deno-b1ebc94007cb"> Fresh </a>所采用的。</p><p id="8645" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">网站是从服务器端渲染开始的，然后SPA，客户端渲染，流行了一段时间。现在，是时候重新审视MPA了。是不是很有意思？</p><p id="8630" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读。</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="3310" class="na lw it mv b gy nb nc l nd ne"><strong class="mv iu">Want to Connect?</strong></span><span id="0c21" class="na lw it mv b gy nf nc l nd ne">If you are interested, check out <a class="ae lu" href="https://jenniferfubook.medium.com/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">my directory of web development articles</a>.</span></pre></div></div>    
</body>
</html>