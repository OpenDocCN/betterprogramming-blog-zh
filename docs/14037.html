<html>
<head>
<title>Animating 3D Models Using PyWeb3D</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用PyWeb3D制作3D模型动画</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/animating-3d-models-using-pyweb3d-ca5ad462235a?source=collection_archive---------5-----------------------#2022-10-28">https://betterprogramming.pub/animating-3d-models-using-pyweb3d-ca5ad462235a?source=collection_archive---------5-----------------------#2022-10-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b82c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">将three.js与Python语法结合使用</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c063226b8c21ca4636804311f893ae68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VJMAATS1RSxp4e0jbeq_uA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="f52a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">欢迎回来！今天的文章将指导你如何使用<a class="ae lr" href="https://www.pyweb3d.org/" rel="noopener ugc nofollow" target="_blank"> pyWeb3D </a>制作3d模型动画。如果您错过了上一篇关于如何使用pyWeb3D 加载3D模型的文章，请查看一下。</p><p id="1016" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是我们将在本文结束时创建的内容的一个简短剪辑:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/563dd2fc2400c4fc3b820e413736bbd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*VMrn-3DlUjULsQnKb4cagg.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者的视频剪辑</p></figure><h2 id="3e1e" class="lt lu iq bd lv lw lx dn ly lz ma dp mb le mc md me li mf mg mh lm mi mj mk ml bi translated">你需要什么</h2><p id="192c" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le mo lg lh li mp lk ll lm mq lo lp lq ij bi translated">下载一个你选择的3D模型，这个模型已经装配好并且有动画(你可以从<a class="ae lr" href="https://sketchfab.com/3d-models?features=downloadable+animated" rel="noopener ugc nofollow" target="_blank">sketchfab.com</a>下载),或者如果你是一个3D艺术家，你可以使用你最喜欢的软件创建你的角色并将其导出。GLTF或者。GLB格式。</p><p id="170e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以下是我们将使用的资源:</p><ul class=""><li id="70fc" class="mr ms iq kx b ky kz lb lc le mt li mu lm mv lq mw mx my mz bi translated"><a class="ae lr" href="https://sketchfab.com/3d-models/passive-marker-man-walking-4b1ef9a1d8814e4c9ff4fe668d62bff1" rel="noopener ugc nofollow" target="_blank">三维模型</a></li><li id="aa1c" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated"><a class="ae lr" href="https://hdstockimages.com/wp-content/plugins/image-downloader-custom/temp/HDStockImages_premium_lbTzoB.jpg" rel="noopener ugc nofollow" target="_blank">地面纹理</a></li></ul><h2 id="9c4a" class="lt lu iq bd lv lw lx dn ly lz ma dp mb le mc md me li mf mg mh lm mi mj mk ml bi translated">HTML样板文件</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="eb9a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面的所有代码都将放入HTML文件主体的内联<code class="fe nh ni nj nk b">&lt;script type=”text/python”&gt;</code>标签中。</p><h2 id="6d7b" class="lt lu iq bd lv lw lx dn ly lz ma dp mb le mc md me li mf mg mh lm mi mj mk ml bi translated">导入必要的模块和函数</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h2 id="ebc2" class="lt lu iq bd lv lw lx dn ly lz ma dp mb le mc md me li mf mg mh lm mi mj mk ml bi translated">变量设置</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="c139" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们声明了稍后将在代码中使用的全局变量</p><h2 id="8749" class="lt lu iq bd lv lw lx dn ly lz ma dp mb le mc md me li mf mg mh lm mi mj mk ml bi translated">创建我们的场景和动画模型</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="33aa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们一行一行地检查上面代码片段的内容</p><ul class=""><li id="47a8" class="mr ms iq kx b ky kz lb lc le mt li mu lm mv lq mw mx my mz bi translated">从第<code class="fe nh ni nj nk b">2–7</code>行开始，我们从<strong class="kx ir">变量设置</strong>代码片段的第<code class="fe nh ni nj nk b">1–3</code>行创建了可修改的变量。如果您是python的新手，那么需要使用global关键字来修改我们在<strong class="kx ir">变量设置</strong>代码片段的第<code class="fe nh ni nj nk b">1–3</code>行中声明的变量的全局副本。</li><li id="938b" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">从台词<code class="fe nh ni nj nk b">10 — 12</code>，我们创造了一个摄像机，定位摄像机，给它一个可以看的地方。</li><li id="9646" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">在第<code class="fe nh ni nj nk b">15</code>行，我们创建了一个时钟。当我们制作场景动画时，时钟将在我们的代码中使用。</li><li id="3fad" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">从第<code class="fe nh ni nj nk b">17 — 19</code>行，我们创建了一个场景，给它一个天蓝色的背景颜色，和一个雾。</li><li id="15f9" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">从第<code class="fe nh ni nj nk b">22 — 35</code>行开始，我们添加了两个光源，一个半球光源和一个平行光，并将它们添加到场景中。</li><li id="1d8e" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">从第<code class="fe nh ni nj nk b">38 — 42</code>行，我们为地面加载了一个图像纹理，并调整了默认设置。</li><li id="526b" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">从第<code class="fe nh ni nj nk b">44 — 49</code>行开始，我们创建了一个网格，它将几何图形(本例中为平面)和材质作为参数。素材对于网格就像CSS对于HTML一样。然后我们调整了默认设置，并将其添加到场景中。</li><li id="5c17" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">在第<code class="fe nh ni nj nk b">52</code>行，我们实例化了我们的。GLB模型装载机</li><li id="c42a" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">从第<code class="fe nh ni nj nk b">54 — 75</code>行，我们创建了一个回调函数来加载和动画我们的模型。<br/>我们来过一遍函数:<br/> <strong class="kx ir"> - </strong>从第<code class="fe nh ni nj nk b">56 — 58</code>行开始，我们实例化了模型，缩小了一点，添加到场景中。<br/> <strong class="kx ir"> - </strong>来自<code class="fe nh ni nj nk b">60 — 65</code>的线条，如果是网格物体，给模型添加阴影。<br/> <strong class="kx ir"> - </strong>在第<code class="fe nh ni nj nk b">68</code>行，我们从模型中获取所有的动画片段。<br/> <strong class="kx ir"> - </strong>在第<code class="fe nh ni nj nk b">70</code>行，我们为动画创建了一个播放器。<br/> <strong class="kx ir"> - </strong>在第<code class="fe nh ni nj nk b">72</code>行，我们使用<code class="fe nh ni nj nk b">animation[0]</code>选择了一个特定的动画剪辑。根据模型有多少动画剪辑，我们可以通过改变索引来选择剪辑。<br/> <strong class="kx ir"> - </strong>在第<code class="fe nh ni nj nk b">73</code>行，我们使用<code class="fe nh ni nj nk b">.play()</code>方法播放动画片段。<br/> <strong class="kx ir"> - </strong>在第<code class="fe nh ni nj nk b">75</code>行，我们调用了我们的<code class="fe nh ni nj nk b">animate</code>函数(我们还没有定义它)</li><li id="7d5a" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">在第<code class="fe nh ni nj nk b">77</code>行，我们加载了模型。</li><li id="a961" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">从第<code class="fe nh ni nj nk b">79 — 86</code>行开始，我们创建了一个webgl渲染器，调整了设置并将其添加到HTML文件的主体中。<code class="fe nh ni nj nk b">renderer.domElement</code>是<code class="fe nh ni nj nk b">canvas</code></li><li id="e55f" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">在第<code class="fe nh ni nj nk b">88</code>行，我们初始化了控件。</li><li id="5d3d" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">在第<code class="fe nh ni nj nk b">90</code>行，我们为窗口调整大小添加了一个事件监听器。</li></ul><h2 id="87b5" class="lt lu iq bd lv lw lx dn ly lz ma dp mb le mc md me li mf mg mh lm mi mj mk ml bi translated">处理窗口大小</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="86d9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这个代码片段中，我们定义了窗口大小调整处理程序</p><h2 id="f9d0" class="lt lu iq bd lv lw lx dn ly lz ma dp mb le mc md me li mf mg mh lm mi mj mk ml bi translated">为我们的场景制作动画</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="4b11" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，我们创建了<code class="fe nh ni nj nk b">animate</code>函数</p><ul class=""><li id="4a0b" class="mr ms iq kx b ky kz lb lc le mt li mu lm mv lq mw mx my mz bi translated">在第<code class="fe nh ni nj nk b">2</code>行，我们告诉浏览器我们想要执行一个动画。</li><li id="f455" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">在<code class="fe nh ni nj nk b">3</code>线上，我们得到了自时间开始以来经过的秒数。</li><li id="e556" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">从线<code class="fe nh ni nj nk b">4 — 6</code>开始，我们向后移动地面。</li><li id="1096" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">在第<code class="fe nh ni nj nk b">7</code>行，我们更新了动画播放器</li><li id="adb1" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">在第<code class="fe nh ni nj nk b">8</code>行，我们渲染了场景和摄像机。</li></ul><h1 id="4bf6" class="nl lu iq bd lv nm nn no ly np nq nr mb jw ns jx me jz nt ka mh kc nu kd mk nv bi translated">现在运行代码</h1><p id="b0d3" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le mo lg lh li mp lk ll lm mq lo lp lq ij bi translated">在浏览器中打开HTML文件。:)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/563dd2fc2400c4fc3b820e413736bbd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*VMrn-3DlUjULsQnKb4cagg.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者的视频剪辑</p></figure><p id="fe68" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">看现场<a class="ae lr" href="https://www.pyweb3d.org/examples/#webgl_3D_model_animation" rel="noopener ugc nofollow" target="_blank">版这里</a>。</p><p id="ce25" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我希望你喜欢这篇文章。感谢阅读。</p><h2 id="74b8" class="lt lu iq bd lv lw lx dn ly lz ma dp mb le mc md me li mf mg mh lm mi mj mk ml bi translated">源代码</h2><div class="nw nx gp gr ny nz"><a href="https://github.com/Bruno-Odinukweze/PyWeb3D/blob/main/examples/webgl_3D_model_animation.html" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ir gy z fp oe fr fs of fu fw ip bi translated">pyweb 3D/web GL _ 3D _ model _ animation . html位于主Bruno-Odinukweze/PyWeb3D</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">github.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on kp nz"/></div></div></a></div><h2 id="88c0" class="lt lu iq bd lv lw lx dn ly lz ma dp mb le mc md me li mf mg mh lm mi mj mk ml bi translated">学分和参考</h2><ul class=""><li id="a4bf" class="mr ms iq kx b ky mm lb mn le oo li op lm oq lq mw mx my mz bi translated">灵感来自<a class="ae lr" href="https://threejs.org/" rel="noopener ugc nofollow" target="_blank"> three.js </a></li><li id="1c16" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated"><a class="ae lr" href="https://brython.info/" rel="noopener ugc nofollow" target="_blank">布里森</a></li><li id="1d6c" class="mr ms iq kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">P <a class="ae lr" href="https://python.org/" rel="noopener ugc nofollow" target="_blank"> ython </a></li></ul><pre class="kg kh ki kj gt or nk os ot aw ou bi"><span id="dad2" class="lt lu iq nk b gy ov ow l ox oy"><strong class="nk ir">Want to contribute?</strong></span><span id="5fcf" class="lt lu iq nk b gy oz ow l ox oy">Would you like to contribute to PyWeb3D? Join me, and let’s create something awesome together. Join me <a class="ae lr" href="https://github.com/Bruno-Odinukweze/PyWeb3D" rel="noopener ugc nofollow" target="_blank">here</a>.</span></pre></div></div>    
</body>
</html>