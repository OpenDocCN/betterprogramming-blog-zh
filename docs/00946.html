<html>
<head>
<title>Rapid Prototyping of a Chrome Browser Using Cloudflare’s Argo Tunnel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Cloudflare的Argo隧道快速制作Chrome浏览器原型</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/rapid-prototyping-of-a-chrome-browser-using-cloudflares-argo-tunnel-ceddd6c88764?source=collection_archive---------11-----------------------#2019-07-30">https://betterprogramming.pub/rapid-prototyping-of-a-chrome-browser-using-cloudflares-argo-tunnel-ceddd6c88764?source=collection_archive---------11-----------------------#2019-07-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="204e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何设置和使用隧道来秘密共享信息</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/85365eb3aecd88086670260df6a5a75b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BipbPLVsGZcyC8EvmhwGhw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">丹尼尔·赫雷斯在<a class="ae kv" href="https://unsplash.com/photos/CD4WHrWio6Q" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="ff0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我是一名产品管理实习生，每天坐在一群工程实习生中间。为什么？我们有机会聊天——关于工作，关于个人项目，以及这些如何重叠。实习生豆荚里最好的想法开始于我们部门里愚蠢的对话。然后，它们会演化成为我们遇到并想要解决的问题构建真正的解决方案。</p><p id="ea30" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个实习同事和我正在讨论在业余爱好项目上的合作。我们还谈到了当我们不像今年夏天那样坐在一起工作时的困难。真正的困难一直是共享只存在于本地机器上的迭代服务——屏幕共享在很多方面都存在不足。一个更好的解决方案是将本地运行的服务公开到互联网上，如果需要的话，以某种方式保护我的朋友，而不需要通过部署生产级服务的过程。</p><p id="620b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">多年来，我一直在寻找一个免费的隧道软件来解决我的共享困境。在这篇博文中，我将讲述一个团队如何使用隧道软件快速迭代一个新项目——在这个例子中，是一个Chrome扩展。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="6af0" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">快速挖进隧道</strong></h1><p id="bb90" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">隧道是网络中最有用的工具之一。在任何网络事件中，专用网络连接都需要将其信息传输到另一个专用方或网络。但是这怎么可能呢？</p><p id="7b96" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一种方法是通过隧道。与现实世界中的隧道不同，互联网隧道的行为更像互联网空间中的虫洞。他们可以通过某个用户设置的专用网关任意连接到互联网上的任意空间或端点。这些类型的隧道被称为<a class="ae kv" href="https://tools.ietf.org/html/rfc4905" rel="noopener ugc nofollow" target="_blank">隧道协议</a>。</p><p id="e0af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">著名的包括<a class="ae kv" href="https://tools.ietf.org/html/rfc2784" rel="noopener ugc nofollow" target="_blank"> GRE </a>，或通用路由封装，通过端到端、点对点连接建立传输。在GRE连接中，传输负载(您打算发送的数据)没有加密，因为不存在外部参与者窥视您的连接的威胁或恐惧。</p><p id="091b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一个流行的隧道协议是IPSec。在IPSec上，数据完整性和安全性是重中之重。在IPSec上，每个有效负载在传输之前和传输过程中都是加密的。然后，到了之后再解密。这确保了正在发送的数据不会受到任何潜在的攻击。</p><p id="01cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这两个隧道工具都可以帮助我共享我的本地主机环境，这是我的第一个目标。然而，他们都超级慢和<a class="ae kv" href="https://community.cisco.com/t5/networking-documents/how-to-configure-a-gre-tunnel/ta-p/3131970" rel="noopener ugc nofollow" target="_blank">难以建立</a>。</p><p id="720b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">GRE隧道的设置如下:</p><ol class=""><li id="09d3" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">要配置隧道源和目的地，在隧道的接口配置模式下，发出<strong class="ky ir">隧道源</strong> {ip地址|接口类型}和隧道目的地{主机名| ip地址}命令。</li><li id="8d15" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">配置完隧道后，两个隧道端点可以互相看见，并且可以使用一端的ICMP回应进行验证。</li><li id="30f9" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">由于GRE是一种封装协议，我们将最大传输单元(mtu)调整为1400字节，将最大数据段大小(mss)调整为1360字节。</li><li id="497d" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">R1#平172.16.1.2</li><li id="d2af" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">键入转义序列以中止。</li><li id="4c2c" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">向172.16.1.2发送五个100字节的ICMP回应，超时时间为两秒:</li><li id="a833" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">成功率为100%(5/5)，往返最小/平均/最大= 1/2/4毫秒</li></ol><p id="4e5d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这显然是压倒性的第一步。那么有什么更简单的隧道选择呢？</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="ece5" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak"> Cloudflare的Argo隧道</strong></h1><p id="994b" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated"><a class="ae kv" href="https://developers.cloudflare.com/argo-tunnel/quickstart/" rel="noopener ugc nofollow" target="_blank"> Argo Tunnel </a>是Cloudflare的免费隧道产品。阿尔戈隧道作为一种方式，通过没有专业的配置和简单的安装安全地连接你和任何选定的一方。它是一个运行在服务器上的守护程序，在原始web服务器和Cloudflare最近的数据中心之间创建一个加密隧道。它在不打开任何公共入站端口的情况下完成所有这些工作。</p><p id="f28e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于这个特定的项目，我们使用Cloudflare的Argo隧道来部署一个Chrome浏览器扩展，该扩展与我朋友的机器上运行的服务器进行通信。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="e229" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">建设扩建</strong></h1><p id="65fe" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在建立本地托管的web服务器(运行在端口8080上)之后，我可以通过Ajax post请求(Ajax是一种编程风格，web应用程序可以异步地从服务器发送和检索数据，而不会干扰现有页面的显示和行为)将数据发送到本地服务器。在这里，我们可以临时托管我的NodeJS app(后端，服务器app)预部署。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/e3788134cdcb2d9b51586c3cb48a5c6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vbombjn3XkD9RC3AiItkhA.png"/></div></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="b340" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">在Cloudflare上建立隧道</strong></h1><p id="c289" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">最后，我设置了我的<a class="ae kv" href="https://developers.cloudflare.com/argo-tunnel/downloads/" rel="noopener ugc nofollow" target="_blank">云辉隧道</a>。配置完成后，扩展应该可以启动和部署了！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/dc73429f8b55bca1e6dcc40d6dd37eaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rbbJrAshY1ByeFeB"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Brew命令安装Cloudflare守护程序</p></figure><p id="aa44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我运行此命令，并将其连接到我的本地主机，以便在我的主机名和离我最近的Cloudflare数据中心之间建立专用链接。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/6e8e4eb176ef611ed2571efde90408fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1RVrgZOifHntfmrD"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">旋转隧道</p></figure><p id="1180" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样做的结果是通过专用互联网连接实现快速安全的连接。没有公共IP或窥视恐惧。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="04b1" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">在隧道上测试</h1><p id="1382" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">为了进行测试，我使用Argo Tunnel向外界展示了我的本地服务器。在设置好我的隧道后，我通过一个zip文件将它部署给朋友。后来，他们能够在自己的浏览器中以Chrome的开发者模式将其解包。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/542a829d704d0823fdce9eec2ea79dfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nOd6FsYVOqt7r9beXiUHOQ.png"/></div></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="3fb4" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">共享分机</strong></h1><p id="e3ef" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">为了在野外测试我们的Chrome扩展，我们需要我们的朋友能够在他们自己的浏览器上访问和实现它。</p><p id="69bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Chrome上，只需几个步骤就可以轻松共享扩展。</p><ol class=""><li id="5800" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">将你想安装的Chrome扩展的CRX文件下载到“我的电脑”。</li><li id="a449" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">进入<strong class="ky ir"> chrome://extensions/ </strong>，在右上角勾选<strong class="ky ir">开发者模式</strong>的复选框。</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/a37b230704ad35d75499320460af676e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PLJ1ZebM5Y77FVHT"/></div></div></figure><p id="1637" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">3.使用CRX提取器应用程序(<a class="ae kv" href="https://crxextractor.com/" rel="noopener ugc nofollow" target="_blank"> CRX提取器</a>是一个很好的！)来解包扩展并将其转换为压缩的Zip文件。</p><p id="024a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">4.回到Chrome Extensions页面，点击unpack，选择解压后的文件夹。</p><p id="0544" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">恭喜你，你现在可以在其他机器上操作你的扩展了！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="1aed" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">最终结果</strong></h1><p id="d79d" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在运行时，Chrome扩展将运行对您的web应用程序或网站的每个请求，以确保正确的流量尝试进入被允许访问。如果一个请求来自一个不寻常的地理位置，一个简单得多的搜索可以确保它来自一个已知的朋友或同行。</p><p id="c1f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与过去的项目相比，Cloudflare的隧道软件也是轻而易举的事情。我不再需要不断地保持入站端口打开、运行并同时进行维护。这既解决了我们安全地共享本地主机的需要，又减轻了对入站请求排序的控制。</p><p id="b297" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，通过在我的浏览器中实现一个简单的扩展，我们可以更有效地保护我自己的web应用程序，因此，可以根据连接设备的状态(地理位置、设备ID等)检查流量。).</p></div></div>    
</body>
</html>