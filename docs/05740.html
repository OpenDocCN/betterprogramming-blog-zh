<html>
<head>
<title>How to Write Collapsible/Expandable Views for Your SwiftUI App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为您的SwiftUI应用编写可折叠/可展开的视图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-write-a-collapsible-expandable-view-for-your-swiftui-app-d4a47fe8cb52?source=collection_archive---------2-----------------------#2020-08-03">https://betterprogramming.pub/how-to-write-a-collapsible-expandable-view-for-your-swiftui-app-d4a47fe8cb52?source=collection_archive---------2-----------------------#2020-08-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5bc7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">手风琴式视图变得简单</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/839e23637a420073f567aa35b94e193d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cMgfvj-Oqg_xYzRd"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@aditya1702?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿迪蒂亚·维亚斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄。</p></figure><p id="0523" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在应用程序开发中，您经常需要某种可折叠的视图。随着iOS 14和Xcode 12的发布，我们将拥有<a class="ae ky" href="https://developer.apple.com/documentation/swiftui/disclosuregroup" rel="noopener ugc nofollow" target="_blank"> DisclosureGroup </a>视图元素来实现这一点。但是在它发布之前——对于需要一些向后兼容性的应用程序——你必须提供你自己的定制解决方案。</p><p id="a748" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我想向您展示一种在SwiftUI中创建您自己的自定义可折叠视图的简单方法。我们开始吧！</p><p id="71ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">注意:需要XCode 11.x，Swift 5.x，iOS 13.x。假设您已经掌握了一些Swift和SwiftUI编程知识，知道如何构建应用程序，并在其中实现您自己的视图。这不是一个教你基础知识的教程。</em></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="a8ba" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">目标</h1><p id="0672" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">最终结果是，我们希望有一个简单的文本视图，带有一个表示折叠状态的v形图标，下面还有一些内容——最初处于折叠状态。</p><p id="c2ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">初始视图应该是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/bee689d99e323c147c6e5b245b104b0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TjEP2pVsQbyVXFBQfc8rYg.png"/></div></div></figure><p id="c710" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当点击带有文本和图标的行时，折叠的内容应该向下滑动并可见。当然，我们希望视图接受折叠容器的任何类型的内容，而不仅仅是文本、按钮或其他特定类型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/054949cd331ea6ad18c567b781aecfb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/1*2kVLuu0KgkWdAw7q9uwH5w.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们想要的观点和行为。</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="2a91" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">可折叠视图</h1><p id="021e" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们需要一个简单的视图，将我们的标签和内容作为参数，并在最后一行折叠的<code class="fe nc nd ne nf b">VStack</code>中显示它。我们创建了一个简单样式的按钮元素来处理点击事件，并将折叠状态的参数保持为私有，以避免数据损坏。</p><p id="e18d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了使从折叠到展开的转变对用户来说更好，我们还向保存折叠内容的<code class="fe nc nd ne nf b">VStack</code>添加了一些动画和过渡。在这种情况下，我们使用带有渐出动画的幻灯片过渡。您可能想要更改它以适合您的动画/过渡方案，或者根本不使用动画。</p><p id="9cdb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是最后的观点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="62ed" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">主视图中的用法</h1><p id="cd9e" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">下面的例子展示了一个基本视图，它将我们之前创建的可折叠视图嵌入到了一个<code class="fe nc nd ne nf b">VStack</code>中的文本下面:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="4ba2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码应该非常简单。为了简单起见，我们只有一个带有填充和背景颜色的基本文本视图作为我们的内容。当然，这可以是你想要的任何视图。甚至滚动和导航视图也应该工作，尽管后者在这种环境下可能毫无意义。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="6383" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结论</h1><p id="7c84" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这个例子非常简单并且是静态的——这也是我们想要的。如果您想要一些高级功能(例如，根据可折叠内容中设置的一些值动态更改标签)，您需要扩展可折叠视图，但这可能是另一篇文章的内容…</p></div></div>    
</body>
</html>