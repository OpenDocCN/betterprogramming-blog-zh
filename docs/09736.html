<html>
<head>
<title>A Step-by-step Walkthrough to Create Your First SSH Config File</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建第一个SSH配置文件的逐步演练</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-step-by-step-walkthrough-to-create-your-first-ssh-config-file-f01267b4eacb?source=collection_archive---------0-----------------------#2021-10-05">https://betterprogramming.pub/a-step-by-step-walkthrough-to-create-your-first-ssh-config-file-f01267b4eacb?source=collection_archive---------0-----------------------#2021-10-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9ea5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用于远程连接和公共&lt;&gt;私有密钥对管理的SSH配置文件</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fe21a567eebe22b5e038645ca55de9b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yzOH_TMLZA_zugcKVVYwhQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="b078" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这篇文章深入探讨了开发人员在使用SSH时面临的两种常见场景，以及如何配置SSH客户端配置文件(<code class="fe lr ls lt lu b">.ssh/config</code>)来克服障碍。</p><h1 id="52b5" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">场景1:多个公钥和私钥对</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/f395008e939ac93b54a52f67eaf68244.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/format:webp/1*iX4ftFhli2hvDeQ3C_to6Q.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="96bd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在工作区中，开发人员可能有不止一对公钥和私钥。例如，我为Github和Bitbucket准备了不同的密钥对，一个供个人使用，另一个供组织使用。</p><p id="886e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe lr ls lt lu b">.ssh/id_rsa</code>和<code class="fe lr ls lt lu b">.ssh/id_rsa.pub</code> <em class="mo"> </em>的原生路径只保存一对密钥。创建一个<code class="fe lr ls lt lu b">.ssh/config</code> <em class="mo"> </em>文件允许用户系统地配置多个密钥对的路径，当运行命令时，正确的密钥对将被识别。</p><h1 id="96af" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">场景2:到远程系统的一个或多个连接</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/add546f9285d6ccb868d106d20bc6103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*SNLMavgnZ2md2joI0sgIWA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="dd7b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">开发人员的日常工作包括连接到远程系统以执行繁重的计算，在不同的操作系统上运行测试，以及许多其他任务。</p><p id="4f9d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">带有用户名和IP地址的Ssh是登录到远程系统的最常见方法，在远程系统中，其余的操作完全通过终端命令运行，没有GUI。</p><pre class="kg kh ki kj gt mq lu mr ms aw mt bi"><span id="bd17" class="mu lw iq lu b gy mv mw l mx my">ssh &lt;user-name&gt;@&lt;ip-address&gt;</span></pre><p id="c56b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了记住登录的细节，开发人员必须在某个地方写下信息，比如便笺。这并不完全是最有效的做法，我已经记不清我忘记这些事情记在哪里的时间了。</p><p id="1fb6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">相反，所有这些IP地址、用户名和其他配置都可以保存在SSH客户机配置文件中。随后，可以使用替代详细登录信息的别名执行每次登录。</p><p id="b896" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们深入研究在哪里以及如何为上面的两个场景设置SSH客户端配置文件的细节。</p><h2 id="6cba" class="mu lw iq bd lx mz na dn mb nb nc dp mf le nd ne mh li nf ng mj lm nh ni ml nj bi translated">内容</h2><ul class=""><li id="772d" class="nk nl iq kx b ky nm lb nn le no li np lm nq lq nr ns nt nu bi translated">SSH客户端配置文件的路径</li><li id="c17c" class="nk nl iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">场景1和场景2的配置文件设置</li></ul></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><h1 id="ed4f" class="lv lw iq bd lx ly oh ma mb mc oi me mf jw oj jx mh jz ok ka mj kc ol kd ml mm bi translated">SSH客户端配置文件的路径</h1><p id="caca" class="pw-post-body-paragraph kv kw iq kx b ky nm jr la lb nn ju ld le om lg lh li on lk ll lm oo lo lp lq ij bi translated">文件名为<code class="fe lr ls lt lu b">config</code> <em class="mo"> </em>的SSH客户端配置文件位于主目录下的<code class="fe lr ls lt lu b">.ssh</code>文件夹中。系统的每个用户都拥有一个单独的配置文件。</p><pre class="kg kh ki kj gt mq lu mr ms aw mt bi"><span id="66db" class="mu lw iq lu b gy mv mw l mx my">/<br/>│   <br/>├── root/.ssh<br/>|   ├── ...<br/>│   └── config<br/>│<br/>├── home/&lt;user_name_1&gt;/.ssh<br/>|   ├── ...<br/>│   └── config<br/>│<br/>├── home/&lt;user_name_2&gt;/.ssh<br/>│   ├── ...<br/>│   └── config<br/>│<br/>└── ...</span></pre><p id="62c0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果该文件首先不存在，请使用以下命令创建它:</p><h2 id="2221" class="mu lw iq bd lx mz na dn mb nb nc dp mf le nd ne mh li nf ng mj lm nh ni ml nj bi translated"><strong class="ak"> Windows(带命令提示符)</strong></h2><pre class="kg kh ki kj gt mq lu mr ms aw mt bi"><span id="490a" class="mu lw iq lu b gy mv mw l mx my">cd %HOMEPATH%/.ssh<br/>type nul &gt; config</span></pre><h2 id="9f08" class="mu lw iq bd lx mz na dn mb nb nc dp mf le nd ne mh li nf ng mj lm nh ni ml nj bi translated"><strong class="ak"> Linux(带终端)</strong></h2><pre class="kg kh ki kj gt mq lu mr ms aw mt bi"><span id="4d0e" class="mu lw iq lu b gy mv mw l mx my">cd ~/.ssh<br/>touch config </span></pre><p id="03be" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">或者，要设置适用于所有用户的配置，在路径<code class="fe lr ls lt lu b">/etc/.ssh/</code>中创建配置文件<code class="fe lr ls lt lu b">ssh_config</code> <em class="mo"> </em>。</p><h1 id="3036" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">场景1和场景2的配置文件设置</h1><h2 id="db1b" class="mu lw iq bd lx mz na dn mb nb nc dp mf le nd ne mh li nf ng mj lm nh ni ml nj bi translated"><strong class="ak">样本格式为<em class="op">。ssh/config </em>文件</strong></h2><pre class="kg kh ki kj gt mq lu mr ms aw mt bi"><span id="2690" class="mu lw iq lu b gy mv mw l mx my">Host &lt;host_identifier&gt;<br/>  &lt;ssh_config_key&gt; &lt;ssh_config_value&gt;<br/>  &lt;ssh_config_key&gt; &lt;ssh_config_value&gt;<br/>  &lt;ssh_config_key&gt; &lt;ssh_config_value&gt;</span></pre><p id="989d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">每个键和值由一个空格分隔。或者，一个等号也可以。</p><pre class="kg kh ki kj gt mq lu mr ms aw mt bi"><span id="ce4d" class="mu lw iq lu b gy mv mw l mx my">Host=&lt;host_identifier&gt;<br/>  &lt;ssh_config_key&gt;=&lt;ssh_config_value&gt;<br/>  &lt;ssh_config_key&gt;=&lt;ssh_config_value&gt;<br/>  &lt;ssh_config_key&gt;=&lt;ssh_config_value&gt;</span></pre><p id="69ba" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe lr ls lt lu b">&lt;host_identifier&gt;</code>后的缩进以及分隔每个配置块的空白行是可选的，但为了可读性，建议这样做。</p><p id="926a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe lr ls lt lu b">&lt;host_identifier&gt;</code>是识别在ssh命令中使用哪个配置块的关键。它是在命令提示符/终端中键入时指向的元素。例子显示在下面的截图中。</p><h2 id="2187" class="mu lw iq bd lx mz na dn mb nb nc dp mf le nd ne mh li nf ng mj lm nh ni ml nj bi translated"><strong class="ak">场景1:多个公钥&amp;私钥对</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/ccdeb5fee6be4637f08dd5705c75f9ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qYGwUQglhMKrzUJxwGoTSg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><h2 id="7906" class="mu lw iq bd lx mz na dn mb nb nc dp mf le nd ne mh li nf ng mj lm nh ni ml nj bi translated"><strong class="ak">场景2:到远程系统的一个或多个连接</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi or"><img src="../Images/dccd3d70693981eabc5c783d1c296a65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*LydgU2-Hbl2OTLFpE9Hcjg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="2512" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">其余的配置以下列方式列在一个块中:</p><pre class="kg kh ki kj gt mq lu mr ms aw mt bi"><span id="22e9" class="mu lw iq lu b gy mv mw l mx my">&lt;ssh_config_key&gt; &lt;ssh_config value&gt;</span></pre><p id="c7a5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">是建立连接时要添加的可选配置。</p><h2 id="1816" class="mu lw iq bd lx mz na dn mb nb nc dp mf le nd ne mh li nf ng mj lm nh ni ml nj bi translated"><strong class="ak">场景1:多个公钥和私钥对</strong></h2><p id="50c6" class="pw-post-body-paragraph kv kw iq kx b ky nm jr la lb nn ju ld le om lg lh li on lk ll lm oo lo lp lq ij bi translated">存储的多个密钥对。ssh，只需创建新的密钥对:</p><pre class="kg kh ki kj gt mq lu mr ms aw mt bi"><span id="7a3f" class="mu lw iq lu b gy mv mw l mx my">ssh-keygen -t rsa -b 4096 -C &lt;email&gt;</span></pre><p id="a2fc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将密钥对显式保存到。ssh文件夹。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/3478fc6f921b14f8485dc5d54884607e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xax-N8fiPsAYpjApU7qPYQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="0b5d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后将如下所示的代码片段附加到<code class="fe lr ls lt lu b">.ssh/config</code> <em class="mo"> </em>文件中，并进行相应的修改:</p><pre class="kg kh ki kj gt mq lu mr ms aw mt bi"><span id="ad63" class="mu lw iq lu b gy mv mw l mx my">Host github.com<br/>  HostName github.com<br/>  User codenamewei<br/>  PreferredAuthentications publickey<br/>  IdentityFile C:\Users\codenamewei\.ssh\new_folder\id_rsa</span></pre><p id="8cfb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">每个关键字的详细说明可以在<a class="ae ot" href="https://www.ssh.com/academy/ssh/config" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="c1df" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意:关键字<code class="fe lr ls lt lu b">Host</code>和<code class="fe lr ls lt lu b">HostName</code>可能会混淆。<code class="fe lr ls lt lu b">Host</code>代表终端使用的别名，而<code class="fe lr ls lt lu b">HostName</code>指定登录的真实主机名。在这种情况下，保持两者相同就很简单了。</p><h2 id="9f71" class="mu lw iq bd lx mz na dn mb nb nc dp mf le nd ne mh li nf ng mj lm nh ni ml nj bi translated"><strong class="ak">场景2:一个或多个到远程系统的连接</strong></h2><p id="bd9a" class="pw-post-body-paragraph kv kw iq kx b ky nm jr la lb nn ju ld le om lg lh li on lk ll lm oo lo lp lq ij bi translated">要存储连接到远程系统的配置，请将以下代码片段附加到<code class="fe lr ls lt lu b">config</code> <em class="mo"> </em>文件中，并做出相应的更改。</p><pre class="kg kh ki kj gt mq lu mr ms aw mt bi"><span id="ea28" class="mu lw iq lu b gy mv mw l mx my">Host codenamewei<br/>  HostName 40.81.206.144<br/>  User codenamewei<br/>  Port 22</span></pre><p id="b07f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本例中，<code class="fe lr ls lt lu b">codenamewei</code> <em class="mo"> </em>是别名:</p><pre class="kg kh ki kj gt mq lu mr ms aw mt bi"><span id="023a" class="mu lw iq lu b gy mv mw l mx my">ssh codenamewei</span></pre><p id="3516" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">也就是说:</p><pre class="kg kh ki kj gt mq lu mr ms aw mt bi"><span id="5597" class="mu lw iq lu b gy mv mw l mx my">ssh codenamewei@40.81.206.144 -p22</span></pre><p id="1876" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意:当使用默认端口号22时，键<code class="fe lr ls lt lu b">Port</code>是可选的。否则，需要显式设置端口号。</p><p id="5703" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正确完成配置后，现在可以通过以下方式连接到远程系统:</p><pre class="kg kh ki kj gt mq lu mr ms aw mt bi"><span id="adbc" class="mu lw iq lu b gy mv mw l mx my">ssh &lt;host_identifier&gt;</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/72f0fadf98efeb629dedc96c4951a2c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TGDaoo108FZS-6bDrDO3aQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="302d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在所示的例子中，<code class="fe lr ls lt lu b">.ssh/config</code> <em class="mo"> </em>的末端表示如下:</p><pre class="kg kh ki kj gt mq lu mr ms aw mt bi"><span id="6fc6" class="mu lw iq lu b gy mv mw l mx my">Host github.com<br/>  HostName github.com<br/>  User codenamewei<br/>  PreferredAuthentications publickey<br/>  IdentityFile C:\Users\codenamewei\.ssh\new_folder\id_rsa</span><span id="3425" class="mu lw iq lu b gy ov mw l mx my">Host codenamewei<br/>  HostName 40.81.206.144<br/>  User codenamewei<br/>  Port 22</span></pre><p id="96e0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当需要建立更多连接时，追加文件。</p></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><h2 id="d05b" class="mu lw iq bd lx mz na dn mb nb nc dp mf le nd ne mh li nf ng mj lm nh ni ml nj bi translated">关于SSH配置文件的配置选项的更多信息:</h2><ul class=""><li id="fbdc" class="nk nl iq kx b ky nm lb nn le no li np lm nq lq nr ns nt nu bi translated"><a class="ae ot" href="https://www.ssh.com/academy/ssh/config" rel="noopener ugc nofollow" target="_blank">https://www.ssh.com/academy/ssh/config</a></li></ul><p id="dee2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢阅读。下次见！</p></div></div>    
</body>
</html>