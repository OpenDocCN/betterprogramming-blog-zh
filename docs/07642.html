<html>
<head>
<title>Difference Between JavaScript Loops: For, ForEach(), For…of, and For…in</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript循环之间的区别:For、ForEach()、For…of和For…in</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/difference-between-javascript-loops-for-foreach-for-of-and-for-in-91cd8fe884fd?source=collection_archive---------4-----------------------#2021-02-04">https://betterprogramming.pub/difference-between-javascript-loops-for-foreach-for-of-and-for-in-91cd8fe884fd?source=collection_archive---------4-----------------------#2021-02-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="45c0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">JavaScript开发人员的备忘单</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f3e65726037528c041c891bab305c4db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*t2ggC8LFquLzEzWG"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">j .凯利·布里托在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="ea7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将解释JavaScript中四个<code class="fe lv lw lx ly b">for</code>循环的区别。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="ff7e" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated"><strong class="ak">TL；博士</strong></h1><p id="5343" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">这些循环的最佳用法如下:</p><ul class=""><li id="cffd" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated">对于数组，使用<code class="fe lv lw lx ly b">for...of</code>(或<code class="fe lv lw lx ly b">forEach</code>)。</li><li id="0beb" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">对于对象，使用<code class="fe lv lw lx ly b">for...in</code>。</li><li id="34ee" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">如果你使用数组并且需要访问索引，使用<code class="fe lv lw lx ly b">for</code>或者<code class="fe lv lw lx ly b">forEach</code>。</li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b973" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated"><code class="fe lv lw lx ly b">for...in</code>循环</h1><p id="cbb4" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">这个循环是在ES6中引入的，作为一个工具与可枚举数一起使用，以迭代对象的属性:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="1e06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，你可以用这个工具迭代一个数组，但这并不意味着你应该这样做。它之所以有效，是因为在JS中，数组继承自<code class="fe lv lw lx ly b">Object</code>。因此，如果您在数组上调用这个循环工具，括号符号(<code class="fe lv lw lx ly b">[]</code>)将产生类似的效果，就像您在对象上调用它一样。然而，有两个警告:当你处理一个<code class="fe lv lw lx ly b">NodeList</code>或者只是一个数组中不一致的数据时，数组会影响速度和情况。</p><p id="3e96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">至于速度，情况很清楚:当迭代数组时，<code class="fe lv lw lx ly b">for...in</code>比特定于数组、字符串和<code class="fe lv lw lx ly b">NodeLists</code>的<code class="fe lv lw lx ly b">for...of</code>循环慢得多。</p><p id="2cea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了理解数据不一致的问题，您需要记住<code class="fe lv lw lx ly b">Array</code>是一个<code class="fe lv lw lx ly b">Object</code>，因此，您可以为它分配属性(这不应该发生，但是可能发生):</p><pre class="kj kk kl km gt nt ly nu nv aw nw bi"><span id="2586" class="nx mh it ly b gy ny nz l oa ob">let students = ["SpongeBob", "Patrick"]<br/>students.name = "Mr. Krabs"</span><span id="c4e4" class="nx mh it ly b gy oc nz l oa ob">students<br/>// ["SpongeBob", "Patrick", name: "Mr. Krabs"]</span></pre><p id="f711" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个不一致数据的例子，我们希望我们的循环可以忽略它。然而，<code class="fe lv lw lx ly b">for...in</code>是为了迭代属性而创建的，所以它会这样做:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="b832" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一点尤其重要，例如，看起来像一个数组，但实际上还包含一堆其他元素(例如，方法)，最好把它们一起跳过。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="ab63" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated"><code class="fe lv lw lx ly b">for...of</code>循环</h1><p id="13fe" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">在ES6中也引入了，<code class="fe lv lw lx ly b">for...of</code>是特定于iterables的:数组、字符串、<code class="fe lv lw lx ly b">NodeList</code> s、集合和映射。它具有一系列强大的功能:</p><p id="9c27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它检查一个元素是否是可迭代的(使用<a class="ae ky" href="http://www.ecma-international.org/ecma-262/6.0/#sec-getiterator" rel="noopener ugc nofollow" target="_blank"> GetIterator </a>操作),如果不是，抛出一个适当的<code class="fe lv lw lx ly b">TypeError</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="cc56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将其与<code class="fe lv lw lx ly b">for...in</code>(不应在数组上使用)进行比较:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="4152" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">支持循环体中的各种控制流，如<code class="fe lv lw lx ly b">continue</code>、<code class="fe lv lw lx ly b">break</code>、<code class="fe lv lw lx ly b">yield</code>、<code class="fe lv lw lx ly b">await</code>。</p><p id="ea1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比<code class="fe lv lw lx ly b">forEach</code>还快。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="8b8f" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated"><code class="fe lv lw lx ly b">forEach</code></h1><p id="c4b0" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">这里有一个语法糖<code class="fe lv lw lx ly b">forEach</code>，它需要三个参数:</p><pre class="kj kk kl km gt nt ly nu nv aw nw bi"><span id="fa2f" class="nx mh it ly b gy ny nz l oa ob">arr.forEach(callback(currentElement, index, array) {<br/>  // do something &lt;- this is a callback<br/>});</span></pre><p id="ae27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些是:</p><ul class=""><li id="a076" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">currentElement</code> —被操作的元素(这是唯一的强制元素)</li><li id="a2bf" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">index</code> —元素的当前索引</li><li id="c8c3" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">array </code> —正在迭代的数组</li></ul><p id="9466" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">forEach</code>的一个好处是你可以访问索引，而<code class="fe lv lw lx ly b">for...of</code>不能。(好吧，有一个漫长的方法可以获得，但这是多余的。)此外，根据定义，这是一个有限循环，因此它将在某个点结束，即使您没有考虑到边缘情况的<code class="fe lv lw lx ly b">break</code>语句。</p><p id="6901" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有另一个更难理解的好处:临时变量(上例中的<code class="fe lv lw lx ly b">currentElement</code>)是局部作用域的，而在<code class="fe lv lw lx ly b">for...of</code>循环中却不是这样。看这里:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="d53f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，我们可以看到<code class="fe lv lw lx ly b">forEach</code>没有覆盖在其作用域之外声明的<code class="fe lv lw lx ly b">num</code>变量的值，而<code class="fe lv lw lx ly b">for...of</code>循环则不是这种情况。然而，如果你不能以一种更具描述性的方式命名你的变量，还有一个解决方法:在<code class="fe lv lw lx ly b">for...of</code>数组中使用<code class="fe lv lw lx ly b">let</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b517" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated"><code class="fe lv lw lx ly b">for</code>循环</h1><p id="b2e5" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">这个循环是JS中最古老和最受支持的<code class="fe lv lw lx ly b">for</code>循环。你可以永远依靠它。它还允许您更有意识地确定哪个是开始/结束元素，以及迭代应该朝哪个方向进行。</p><p id="1a08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，开发体验并不完美，因为它的语法并不简单。在适当的地方，可以随意使用<code class="fe lv lw lx ly b">for...in</code>(处理对象时)或<code class="fe lv lw lx ly b">for...of</code>(处理数组、字符串、集合、<code class="fe lv lw lx ly b">NodeList</code>和地图时)。</p></div></div>    
</body>
</html>