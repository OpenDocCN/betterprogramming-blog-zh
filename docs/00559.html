<html>
<head>
<title>Improve Performance in React.js Using Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用钩子提高React.js的性能</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/improve-performance-in-react-js-using-hooks-3d0ebbad6956?source=collection_archive---------4-----------------------#2019-06-10">https://betterprogramming.pub/improve-performance-in-react-js-using-hooks-3d0ebbad6956?source=collection_archive---------4-----------------------#2019-06-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2944" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解useCallback和useMemo的威力</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4b9f6c25cef7bb7ac7325dca493a5fad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aaYOh1BnR_aoRv27pfr9nQ.png"/></div></div></figure><p id="02e2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在开发React应用程序时，有时您需要开始考虑如何优化性能。对于一些较小的、不太复杂的应用程序，性能可能永远不会成为问题。但是对于绝大多数中到大规模的React应用程序来说，缓慢的性能可能是一个严重的问题。让我们深入讨论一下可能会降低应用程序性能的最常见场景。</p><p id="e932" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">React性能缓慢有两个主要原因——不必要的重新渲染和在组件中做太多(计算)工作。我将讨论如何使用直接由React提供的钩子来减轻这些问题。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="7710" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">不必要的重新渲染</h1><p id="3ecc" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">当组件的属性或状态发生变化时，这将自动触发该组件的重新渲染。这通常是好的，并且是React如何工作的基础！然而，有时我们可以比React更聪明，当我们知道输出将完全相同时，阻止组件重新呈现。</p><p id="a61b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这些重新呈现的一个常见原因是向组件传递了新的函数。这实际上经常发生，很容易被忽略。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="f17c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当需要向函数传递额外的数据时，这是许多开发人员决定使用的一种常见的“解决方案”。但是每次<code class="fe mw mx my mz b">DropdownContainer</code>渲染，<code class="fe mw mx my mz b">Dropdown</code>也会重新渲染，因为作为<code class="fe mw mx my mz b">handleItemClick</code>道具传入的匿名函数每次都会重新构建，并触发道具变化。在很多情况下，这种重新渲染很可能是不必要的，因为这不一定意味着任何数据——我们想要重新渲染<code class="fe mw mx my mz b">Dropdown</code>的数据——实际上已经改变。</p><p id="9907" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">解决这个问题最简单的方法就是使用<code class="fe mw mx my mz b">useCallback</code>钩子。这个钩子将<a class="ae na" href="https://codeburst.io/understanding-memoization-in-3-minutes-2e58daf33a19" rel="noopener" target="_blank"> <em class="nb">记忆</em> </a> <em class="nb"> </em>你的函数，并且只在它的一个依赖关系改变时重建一个新的。让我们来看看更新后的示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="a2b6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因为除非<code class="fe mw mx my mz b">data</code>或<code class="fe mw mx my mz b">onClick</code>改变，否则不会重新构建功能，所以<code class="fe mw mx my mz b">Dropdown</code>组件将不再进行不必要的重新渲染。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="2fb9" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">昂贵的计算</h1><p id="ebe3" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">React性能差的另一个常见原因是在组件中执行了太多的工作。当您需要在React组件中处理一些需要大量数据操作和/或计算量很大的问题时，您可能会希望使用<code class="fe mw mx my mz b">useMemo</code>钩子。这个钩子只是接受一个函数，这个函数返回一个值，这个值将被自动重新计算，并在其中一个依赖关系改变时触发重新呈现。让我们来看一个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="fe47" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通过使用<code class="fe mw mx my mz b">useMemo</code>,我们可以避免在每次渲染组件时计算昂贵的值，只在必要时重新计算值。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="6ff5" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">最后</h1><p id="0dd8" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">我希望这篇文章和使用这两个简单的钩子可以帮助你提高React应用程序的性能。如果您有任何问题或建议，请随时留下您的回复，我会尽全力帮助您的！</p></div></div>    
</body>
</html>