<html>
<head>
<title>How I Organise My Downloads Folder With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python组织我的下载文件夹</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-i-organise-my-downloads-folder-with-python-6c76358968ea?source=collection_archive---------6-----------------------#2019-08-28">https://betterprogramming.pub/how-i-organise-my-downloads-folder-with-python-6c76358968ea?source=collection_archive---------6-----------------------#2019-08-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/93c4b1181b343efd51ee165a8e8fc0c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZrDS3MjKJzHUqvhzW8eqxA.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">安德鲁·庞斯在<a class="ae kc" href="https://unsplash.com/photos/6-RhsUzKO6g" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="800f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最近，我对我个人电脑上凌乱的下载文件夹感到过度烦恼。文件太多了，乱七八糟。作为一个患有轻度强迫症的人，我很恼火。我花了一个下午的时间试图思考一个解决方案，我想也许我可以写一个简单的Python脚本来解决这个问题。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/1946762327de34fa299f2426e38768cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AWUU-faScstIqaeZ4aIwaw.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">这是我的下载文件夹</p></figure></div><div class="ab cl lg lh hu li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ij ik il im in"><h1 id="f5fb" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">解决方案</h1><p id="4cea" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">解决方案<strong class="kf ir"> </strong>一个Python脚本，它循环下载文件夹并确定每个文件的文件类型。随后，它会为该文件类型创建一个文件夹。具有相同文件类型的所有文件都将被传送到该文件夹。每当一个文件被添加到下载文件夹中时，这个脚本都应该工作。</p><p id="aa53" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设我们有一个如下所示的下载文件夹:</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/66c0848f8657edb7c1c667af22dc1577.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZMgPs7mXR-CiTka8UvJz5Q.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">JPG、PNG和TXT文件的混合</p></figure><p id="a372" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是我们希望达到的结果:</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/34b5108299e3d0bca665484a533c7fe6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GaTdxwSl7yZCiNHuvFVV1g.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">下载文件夹是根据类型分类的</p></figure><p id="b753" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">经过仔细检查，例如在txt_folder中，我们应该会看到这样的内容:</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/db7b8b688a262c06560b1a74e90c3e1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-xipFlc9FpJwjHWzhVCdWw.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">是啊！！我所有的文本文档都在txt_folder中</p></figure><p id="35d4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们深入研究一下代码:</p><pre class="lc ld le lf gt mq mr ms mt aw mu bi"><span id="7185" class="mv lo iq mr b gy mw mx l my mz">from os import listdir<br/>from os.path import isfile, join<br/>import os<br/>import shutil</span><span id="e5d7" class="mv lo iq mr b gy na mx l my mz">def sort_files_in_a_folder(mypath):</span><span id="a8d0" class="mv lo iq mr b gy na mx l my mz">    '''<br/>    A function to sort the files in a download folder<br/>    into their respective categories<br/>    '''</span><span id="99dd" class="mv lo iq mr b gy na mx l my mz">    files = [f for f in listdir(mypath) if isfile(join(mypath, f))]<br/>    file_type_variation_list=[]<br/>    filetype_folder_dict={}</span><span id="52d4" class="mv lo iq mr b gy na mx l my mz">    for file in files:<br/>        filetype=file.split('.')[1]<br/>        if filetype not in file_type_variation_list:<br/>            file_type_variation_list.append(filetype)<br/>            new_folder_name=mypath+'/'+ filetype + '_folder'<br/>            filetype_folder_dict[str(filetype)]=str(new_folder_name)<br/>            if os.path.isdir(new_folder_name)==True:  #folder exists<br/>                continue<br/>            else:<br/>                os.mkdir(new_folder_name)</span><span id="6484" class="mv lo iq mr b gy na mx l my mz">    for file in files:<br/>        src_path=mypath+'/'+file<br/>        filetype=file.split('.')[1]<br/>        if filetype in filetype_folder_dict.keys():<br/>            dest_path=filetype_folder_dict[str(filetype)]<br/>            shutil.move(src_path,dest_path)</span><span id="4aff" class="mv lo iq mr b gy na mx l my mz">    print(src_path + '&gt;&gt;&gt;' + dest_path)</span><span id="e101" class="mv lo iq mr b gy na mx l my mz">if __name__=="__main__":<br/>    mypath='your_path_to_your_download_folder'<br/>    sort_files_in_a_folder(mypath)</span></pre><p id="ecb2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，在您的终端(Mac)或命令提示符(Windows)上运行这两个命令:</p><pre class="lc ld le lf gt mq mr ms mt aw mu bi"><span id="106f" class="mv lo iq mr b gy mw mx l my mz">pip install os<br/>pip install shutil</span></pre><p id="b52d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">OS是一个Python库，允许你与操作系统交互，而shutil是另一个库，帮助你在目录中传输文件/文件夹/文档。</p><pre class="lc ld le lf gt mq mr ms mt aw mu bi"><span id="28dc" class="mv lo iq mr b gy mw mx l my mz">files = [f for f in listdir(mypath) if isfile(join(mypath, f))]<br/>file_type_variation_list=[]<br/>filetype_folder_dict={}</span><span id="5a2a" class="mv lo iq mr b gy na mx l my mz">for file in files:<br/>    filetype=file.split('.')[1]<br/>    if filetype not in file_type_variation_list:<br/>        file_type_variation_list.append(filetype)<br/>        new_folder_name=mypath+'/'+ filetype + '_folder'<br/>        filetype_folder_dict[str(filetype)]=str(new_folder_name)<br/>        if os.path.isdir(new_folder_name)==True: #folder exists alrd<br/>            continue<br/>        else:<br/>            os.mkdir(new_folder_name)</span></pre><h2 id="c78c" class="mv lo iq bd lp nb nc dn lt nd ne dp lx ko nf ng mb ks nh ni mf kw nj nk mj nl bi translated">循序渐进的教程</h2><p id="46fb" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">首先，我们创建一个列表<code class="fe nm nn no mr b">(files)</code>，它包含一个目录中所有文件的<strong class="kf ir"> </strong>名称(例如，下载)。我们循环遍历这个列表，并根据文件类型(例如<code class="fe nm nn no mr b">json_folder</code>)创建一个命名的文件夹，只要它事先不存在。此外，将创建一个字典<code class="fe nm nn no mr b">(filetype_folder_dict)</code>，它将密钥文件类型映射到一个值。</p><pre class="lc ld le lf gt mq mr ms mt aw mu bi"><span id="0a4b" class="mv lo iq mr b gy mw mx l my mz">for file in files:<br/>    src_path=mypath+'/'+file<br/>    filetype=file.split('.')[1]<br/>    if filetype in filetype_folder_dict.keys():<br/>        dest_path=filetype_folder_dict[str(filetype)]<br/>        shutil.move(src_path,dest_path)</span><span id="7daf" class="mv lo iq mr b gy na mx l my mz">print(src_path + '&gt;&gt;&gt;' + dest_path)</span></pre><p id="3896" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们再次循环初始列表，并将文件移动到我们之前创建的目标文件夹。目标路径是通过参考先前创建的字典来确定的。</p><p id="709c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们需要决定如何触发这个脚本。理想的情况是，每当一个新项目被添加到下载文件夹时，这个脚本就会被触发；然而，对我来说，我发现更简单的方法是创建一个crontab (Mac)或task scheduler (Windows)。</p><p id="ed06" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这两个程序允许在一天中的特定时间执行Python脚本(它们可以由用户控制)。</p><p id="588c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者，只要有一些新的项目添加到下载文件夹中，您就可以手动运行该脚本…但是这将非常繁琐。</p><p id="39af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">链接到crontab教程:</p><div class="np nq gp gr nr ns"><a href="https://ole.michelsen.dk/blog/schedule-jobs-with-crontab-on-mac-osx.html" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">在Mac OS X上使用crontab调度作业</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">在你的电脑上运行脚本是很棒的。自动运行它们甚至更好。如果你在Mac(或Linux)上…</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">ole.michelsen.dk</p></div></div><div class="ob l"><div class="oc l od oe of ob og jw ns"/></div></div></a></div><p id="e55d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">链接到window任务计划程序教程:</p><div class="np nq gp gr nr ns"><a href="https://datatofish.com/python-script-windows-scheduler/" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">如何使用Windows调度程序调度Python脚本</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">在本教程中，我将向您展示使用Windows调度程序调度Python脚本的步骤。这种类型的运动是…</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">datatofish.com</p></div></div><div class="ob l"><div class="oh l od oe of ob og jw ns"/></div></div></a></div><p id="5370" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">链接到源代码:</p><div class="np nq gp gr nr ns"><a href="https://github.com/kaikiat/automation/blob/master/sort_download_folder/sort_files.py" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">凯捷/自动化</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">github.com</p></div></div></div></a></div></div></div>    
</body>
</html>