<html>
<head>
<title>Super Easy Compositional UICollectionViews in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中超级简单的组合UICollectionViews视图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/super-easy-compositional-uicollectionviews-in-swift-f0fa6a2c108d?source=collection_archive---------7-----------------------#2020-07-15">https://betterprogramming.pub/super-easy-compositional-uicollectionviews-in-swift-f0fa6a2c108d?source=collection_archive---------7-----------------------#2020-07-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="28a6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用iOS 13+中的现代组合布局，创建正交滚动页面非常容易</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/e6e3cf7033bc24b70ea1dde45d669f4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/1*-xILx2p4FURSrzy-RyDaJg.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">杨梦的正交滚动收藏视图</p></figure><p id="8e1a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本文中，我将展示使用<code class="fe lq lr ls lt b">UICollectionViewCompositionalLayout</code>创建正交滚动页面是多么容易。我们将详细查看视图层次结构，以学习iOS 13中现代收藏视图的核心概念，并一步一步地构建正交滚动收藏视图。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="7af6" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">1.使用嵌套UICollectionViews的旧时代</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi mt"><img src="../Images/88db42270d52106327cbefafc2ebba5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0wFfAv-k-nNMfHqU"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">乔安娜·科辛斯卡在<a class="ae my" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="8092" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">多年来，iOS开发者努力实现像苹果在他们的应用商店中那样的交叉滚动页面。开发者对苹果在同一页面中混合水平滚动和垂直滚动的方式印象深刻。</p><p id="0f1e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在iOS 13发布之前，只有一种方法可以实现这一点:将<code class="fe lq lr ls lt b">UICollectionView</code>实例包装在另一个<code class="fe lq lr ls lt b">UICollectionView</code>的<code class="fe lq lr ls lt b">UICollectionViewCell</code>中。它当然可以在一个<code class="fe lq lr ls lt b">UITableViewCell</code>之内；这取决于你是使用一个<code class="fe lq lr ls lt b">UICollectionView</code>还是<code class="fe lq lr ls lt b">UITableView</code>作为父视图。但是通常情况下<code class="fe lq lr ls lt b">UICollectionView</code>更受欢迎，因为它对于定制的布局更灵活。内部<code class="fe lq lr ls lt b">UICollectionView</code>实现水平流程布局，外部<code class="fe lq lr ls lt b">UICollectionView</code>实现垂直流程布局，反之亦然。</p><p id="04dd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该架构多年来一直很好，但是当页面和数据变得庞大时，它很容易变得混乱，因为两个<code class="fe lq lr ls lt b">UICollectionView</code>实例实现不同的数据源并与不同的代理挂钩。您也需要为它们定义不同的<code class="fe lq lr ls lt b">UICollectionViewLayout</code>实例。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="7e21" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">2.现代构图布局的详细外观</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi mz"><img src="../Images/9e4398da5e82df318814bb9bae45df92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U312ll_LHgm3GAry"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">塞萨尔·阿布纳·马丁内斯·阿吉拉尔在<a class="ae my" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="13be" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">组合集合视图建立在几个核心组合元素之上。让我们在层次结构上详细看看它们。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="b89b" class="na mc it bd md nb nc dn mh nd ne dp ml ld nf ng mn lh nh ni mp ll nj nk mr nl bi translated"><code class="fe lq lr ls lt b">NSCollectionLayoutItem</code></h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/c9596e8cd83bf9af150b98747e69310f.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*XdRfp7-Kngq4x8asGAZd_A.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated"><code class="fe lq lr ls lt b">NSCollectionLayoutItem image by Eric Yang</code></p></figure><p id="b050" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">标有<code class="fe lq lr ls lt b"><strong class="kw iu">Item 1</strong></code>、<code class="fe lq lr ls lt b"><strong class="kw iu">Item 2</strong></code>和<code class="fe lq lr ls lt b"><strong class="kw iu">Item 3</strong></code>的三个矩形是<code class="fe lq lr ls lt b">NSCollectionLayoutItem</code>的三个实例。它们由<code class="fe lq lr ls lt b">NSCollectionLayoutSize</code>的不同维度初始化，是在集合视图中重复显示的基本元素。</p><p id="529e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe lq lr ls lt b"><strong class="kw iu">Item 1</strong></code> <em class="nn"> </em>宽度为0.7派，高度与其所属的组相等(1.0派)。<code class="fe lq lr ls lt b"><strong class="kw iu">Item 2</strong></code>和<code class="fe lq lr ls lt b"><strong class="kw iu">Item 3</strong></code>都是所属团体宽度0.3派系。<code class="fe lq lr ls lt b"><strong class="kw iu">Item 2</strong></code>的身高绝对值:120分，而<code class="fe lq lr ls lt b"><strong class="kw iu">Item 3</strong></code> <em class="nn"> </em>的身高是60分。</p><p id="f4a2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了创建<code class="fe lq lr ls lt b">NSCollectionLayoutItem</code>的三个实例，我们使用如下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="2ea0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有三种不同的布局尺寸:</p><ul class=""><li id="6f24" class="nq nr it kw b kx ky la lb ld ns lh nt ll nu lp nv nw nx ny bi translated"><strong class="kw iu">分数宽度或高度</strong>:尺寸计算为组宽度或高度的分数。</li><li id="268a" class="nq nr it kw b kx nz la oa ld ob lh oc ll od lp nv nw nx ny bi translated"><strong class="kw iu">绝对</strong><em class="nn">:</em><em class="nn"/>尺寸为绝对点值。</li><li id="93ea" class="nq nr it kw b kx nz la oa ld ob lh oc ll od lp nv nw nx ny bi translated"><strong class="kw iu">估计</strong> <em class="nn"> : </em>尺寸设置为估计值，将决定元素渲染时的实际大小。</li></ul></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="d7be" class="na mc it bd md nb nc dn mh nd ne dp ml ld nf ng mn lh nh ni mp ll nj nk mr nl bi translated">NSDirectionalEdgeInsets</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/efe321e43d4fc39a4771686577a5ef89.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*A4ZRNu8qirAhXjjZ5BvpRw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">NSDirectionalEdgeInsets图片由杨梦</p></figure><p id="c3b7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我们需要定义项目的内容插入以允许它们周围的边距时，我们使用<code class="fe lq lr ls lt b">NSDirectionalEdgeInsets</code>。</p><p id="b135" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于上图所示的示例图像，三个项目<strong class="kw iu"> <em class="nn"> </em> </strong>的<strong class="kw iu">顶部/前导/底部/拖尾<em class="nn"> </em> </strong>插图设置如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="1470" class="na mc it bd md nb nc dn mh nd ne dp ml ld nf ng mn lh nh ni mp ll nj nk mr nl bi translated">NSCollectionLayoutGroup</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/d84448425d462e253ef38b95842eae60.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*LTCX6LY62Rx8LWqJ2WdyNw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">杨梦的NSCollectionLayoutGroup图像</p></figure><p id="7bc4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe lq lr ls lt b">NSCollectionLayoutItem</code> — <code class="fe lq lr ls lt b"><strong class="kw iu">Item 1</strong></code>、<code class="fe lq lr ls lt b"><strong class="kw iu">Item 2</strong></code>和<code class="fe lq lr ls lt b"><strong class="kw iu">Item 3</strong></code>三个实例按<code class="fe lq lr ls lt b">NSCollectionLayoutGroup</code>实例分组，以安排它们的相对位置和尺寸。</p><p id="ef57" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于这个部分样本图像，层次结构是<code class="fe lq lr ls lt b"><strong class="kw iu">Item 2</strong></code>和<code class="fe lq lr ls lt b"><strong class="kw iu">Item 3</strong></code>垂直包裹在<code class="fe lq lr ls lt b"><strong class="kw iu">Group 2</strong></code>内，而<code class="fe lq lr ls lt b"><strong class="kw iu">Group 1</strong></code>水平包裹<code class="fe lq lr ls lt b"><strong class="kw iu">Item 1</strong></code>和<code class="fe lq lr ls lt b"><strong class="kw iu">Group 2</strong></code> <strong class="kw iu"> <em class="nn">。</em> </strong>代码相当简单:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="8b9c" class="na mc it bd md nb nc dn mh nd ne dp ml ld nf ng mn lh nh ni mp ll nj nk mr nl bi translated"><strong class="ak">NSCollectionLayoutSection</strong></h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/0ee7161b5fb5d1e86e43c9773a00b935.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*Ag4hHE0v1CGQ68lVaP6e9g.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">杨梦的NSCollectionLayoutSection图像</p></figure><p id="7592" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe lq lr ls lt b">NSCollectionLayoutSection</code>是分组和包装的方式。一个<code class="fe lq lr ls lt b">NSCollectionLayoutSection</code>实例只能包含一个<code class="fe lq lr ls lt b">NSCollectionLayoutGroup</code>实例。<code class="fe lq lr ls lt b">NSCollectionLayoutSection</code>的不同实例构建现代构图布局<code class="fe lq lr ls lt b">UICollectionViewCompositionalLayout</code>，用作<code class="fe lq lr ls lt b">UICollectionView</code>的布局。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="0b23" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可能已经看到了——<code class="fe lq lr ls lt b">orthogonalScrollingBehavior</code>实现了正交滚动的技巧！</p><p id="f9c2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一行代码就实现了正交滚动！🙌 🎉</p><p id="25dc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们使用<code class="fe lq lr ls lt b">continuous</code>作为这个示例页面的行为，但是如果你查看枚举，还有更多选项:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="fc49" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">3.包裹</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi oe"><img src="../Images/f58c0e8c388f5af6e53c342118d1b000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uZexxpclQdt7QZ3P"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">照片由<a class="ae my" href="https://unsplash.com/@kadh?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">基拉·奥德·海德</a>在<a class="ae my" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="0b09" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">本文概述了使用嵌套UICollectionView构建交叉滚动集合视图的老方法。然后按照层次从下到上介绍现代作曲概念。它还展示了使用复合集合视图构建正交滚动页面是多么简单和干净。</p><p id="d0a7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">是时候把手弄脏了！你可以在<a class="ae my" href="https://github.com/ericleiyang/CompositionalCollection" rel="noopener ugc nofollow" target="_blank"> this repo </a>找到文章中提到的所有代码。</p></div></div>    
</body>
</html>