<html>
<head>
<title>12 Refactoring Rules of Thumb</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">12重构经验法则</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/refactoring-rules-of-thumb-for-beginners-to-become-experts-70161c3c4f20?source=collection_archive---------0-----------------------#2020-08-15">https://betterprogramming.pub/refactoring-rules-of-thumb-for-beginners-to-become-experts-70161c3c4f20?source=collection_archive---------0-----------------------#2020-08-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="15ef" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一旦你遵循一些简单的指导方针，就很容易重构混乱的代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ff009f0f8556e20982c2e5ed11d266e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*crx0ZRRdEykSvUFrOC7s5w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="ca91" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我将从提供你想要的东西开始:经验法则。</p><p id="95f1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你好奇为什么这些试探法有用吗？然后阅读列表后面的附加信息。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="9425" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">初学者成为重构专家的12条启发</h1><p id="a54f" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">让我们一头扎进这件事。当我冒险参加重构会议时，我脑海中总会有一个混合的启发列表。</p><ol class=""><li id="cd9a" class="my mz it la b lb lc le lf lh na ll nb lp nc lt nd ne nf ng bi translated">你的类的参数列表开始变得太大了吗？那么它可能做得太多了。它的职责不明确，测试和调试起来可能很痛苦。它是重构的主要候选对象。</li><li id="f804" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">你的类中有只使用一个类依赖关系的方法吗？您最好将该方法放入它自己的类中——即使该类只包含一个方法。</li><li id="633c" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">你的方法是根据一个布尔参数值做两件不同的事情吗？为什么不创建两个不同的方法，并明确各自的职责呢？</li><li id="7ee5" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">你的方法在一个值上分支了吗？比方说，你正在检查一个对象的类型，并根据它的类型执行不同的操作。这是把你的<code class="fe nn no np nq b">if-else</code>或<code class="fe nn no np nq b">switch</code>变成字典或地图的好时机。</li><li id="ac51" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">你在代码中广泛使用了<code class="fe nn no np nq b">if-else</code>或<code class="fe nn no np nq b">switches</code>吗？尝试使用多态性，并应用久经考验的设计模式，如策略、中介等。</li><li id="aedb" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">你的类构造函数或者方法有一个“神奇的”数字或者字符串吗？这是代表某种内在商业价值的任意值。用枚举代替魔法。</li><li id="0afb" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">你有硬编码的值(数字或字符串)吗？取值为参数，让它们可配置。在新环境中重用或部署应用程序或更改设置变得更加容易。</li><li id="7647" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">不要使用像<code class="fe nn no np nq b">i, j, k, m, n, x</code>这样的变量名。别说了。</li><li id="67f1" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">您是否发现自己在多个地方实现了同一个逻辑？将逻辑移到它自己的类或方法中。</li><li id="732f" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">有没有<code class="fe nn no np nq b">Service</code>或者<code class="fe nn no np nq b">Manager</code>的课？它们就像瑞士军刀。责任多，凝聚力低。花点时间思考一下他们提供哪些服务，然后将每种不同的服务归为一类。</li><li id="8650" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">你是否发现测试一个方法很有挑战性，因为它所在的类需要很多构造函数参数？将该方法从其类中分离出来。</li><li id="8c77" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">你需要添加一个新的<code class="fe nn no np nq b">else-if</code>或者<code class="fe nn no np nq b">switch</code>用例来实现一个新的需求或者特性吗？尝试使用接口和反射来自动发现类型。</li></ol></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="8b89" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">为什么值得花时间学习重构</h1><p id="4bc6" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">你是一个有抱负的开发人员，正在走向精通。学习重构代码——更重要的是，识别何时重构代码——是一项基本技能。</p><p id="c1ee" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">知道什么时候重构是最重要的。太早了？这只是不成熟的优化。太晚了？你的代码库很难处理。</p><p id="45c5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我见过伟大的开发人员在不应该的时候跳过重构。他们的代码给人的印象是平庸的，因为职责混乱，可读性差。</p><p id="7bbf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">重构是有时间和地点的。有时候，根本不需要。我们需要的是彻底销毁代码，从头开始。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="09d9" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">重构到底是什么？</h1><p id="a651" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">让我们花点时间达成共识。</p><p id="a59c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从根本上说，重构是保留对代码库的更改的行为。然而，它通常可以与修复bug、添加新特性和调整性能互换。</p><p id="60c9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">没有经验的开发人员经常滥用重构会话来调整和改变行为——甚至让它工作。那不是重构。这是错误修复和性能优化。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="a667" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">重构如何提高内部软件质量？</h1><p id="dc60" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">重构代码是为了提高应用程序的内部软件质量。您正在改善七种不同质量特征中的一种或多种:</p><ol class=""><li id="4611" class="my mz it la b lb lc le lf lh na ll nb lp nc lt nd ne nf ng bi translated">可维护性——提高对软件进行修改的容易程度。可维护性包括添加新功能、调整性能、易于修复错误。</li><li id="cfe9" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">灵活性—您可以为其他用途修改软件的程度。想想你可以多么容易地旋转软件。</li><li id="d148" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">可移植性——让软件在另一个环境中运行的难易程度。想想本地开发与在生产环境中的服务器上运行。</li><li id="87b9" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">可重用性——你在其他系统中使用你的部分软件的容易程度。</li><li id="37b0" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">可读性——你阅读和理解源代码的难易程度。不仅在接口层面上，而且在实现的本质细节上。</li><li id="eb12" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">可测试性——编写单元测试、集成测试等的难易程度。</li><li id="a4d1" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">可理解性——从总体上理解你的软件有多容易。你的代码库是以一种有意义的方式构建的吗？</li></ol><p id="e2e4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些特征中的一些实现了相互冲突的目标。这就是生活。</p><p id="42a3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">考虑一下你的重构会议旨在提高哪些品质，因为它不可能提高所有这些品质。</p><p id="a8ce" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">记住这些特征，测试你的知识，看看你是否能把它们映射到启发式列表中。</p><p id="2923" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">哪种启发法改进了哪些质量特征？</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="0685" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">资源</h1><ul class=""><li id="eeeb" class="my mz it la b lb mt le mu lh nr ll ns lp nt lt nu ne nf ng bi translated">史蒂夫·麦康奈尔的《代码全集2》</li><li id="3d89" class="my mz it la b lb nh le ni lh nj ll nk lp nl lt nu ne nf ng bi translated"><a class="ae nv" href="https://martinfowler.com/bliki/IsOptimizationRefactoring.html" rel="noopener ugc nofollow" target="_blank">是优化重构</a>作者马丁·福勒</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/745b6019f001879654cae7d29d306420.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LZ0-rAawOB4iv6uI.png"/></div></div></figure><p id="cc49" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> Nicklas Millard </strong>是一名软件开发工程师，供职于一家发展最快的银行，负责构建任务关键型金融服务基础设施。</p><p id="7bfa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此前，他是Big4的高级技术顾问，为商业客户和政府机构开发软件。</p><blockquote class="nx ny nz"><p id="71d7" class="ky kz nm la b lb lc ju ld le lf jx lg oa li lj lk ob lm ln lo oc lq lr ls lt im bi translated"><a class="ae nv" href="https://www.youtube.com/channel/UCaUy83EAkVdXsZjF3xGSvMw" rel="noopener ugc nofollow" target="_blank">新的YouTube频道(@Nicklas Millard) </a></p><p id="f1a4" class="ky kz nm la b lb lc ju ld le lf jx lg oa li lj lk ob lm ln lo oc lq lr ls lt im bi translated"><em class="it">接通</em><a class="ae nv" href="https://www.linkedin.com/in/nicklasmillard/" rel="noopener ugc nofollow" target="_blank">T5】LinkedInT7】</a></p></blockquote></div></div>    
</body>
</html>