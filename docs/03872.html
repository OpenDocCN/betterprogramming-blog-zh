<html>
<head>
<title>How to Build a Simple Static Site Generator Using Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Node.js构建一个简单的静态站点生成器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-build-a-simple-static-site-generator-using-node-js-6425b71272e0?source=collection_archive---------7-----------------------#2020-03-10">https://betterprogramming.pub/how-to-build-a-simple-static-site-generator-using-node-js-6425b71272e0?source=collection_archive---------7-----------------------#2020-03-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ab4d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">建立一个了不起的静态网站生成器和Markdown-powered博客</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9192938d860ea3d5f0927db3d35f75a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZVZ6Q3TtH5_gA-Em"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@killerfvith?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">黄福生</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="ce3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的博客是用<a class="ae ky" href="https://gatsbyjs.org" rel="noopener ugc nofollow" target="_blank"> GatsbyJS </a>构建的，这是React的一个很棒的静态站点生成器。嗯，它是使用Gatsby构建的，但我最终切换到了这个项目，你会在最后发现这一点。《盖茨比》很容易上手，我所要做的就是定制《盖茨比博客首发》来获得一些好东西。</p><p id="46fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是我很好奇生成器是如何工作的，所以我决定尝试使用Node.js构建一个简单的、基本的静态站点生成器。所以让我们开始吧。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7da1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">为什么是简单的静态站点生成器？</h1><p id="88c8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我非常喜欢静态站点生成器，因为它们允许你使用任何你想要的沉重/臃肿的框架，但最终结果仍然只是简单和轻便的HTML和CSS。这给了我们一种自由的感觉，例如，如果我们处理一个创建-反应-应用程序，我们通常不会有这种感觉。</p><p id="bf42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这个项目而言，请查看灯塔评分:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/c39de2e513959da98ad659208e8e3311.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B2dUUzoW_uRJDtHoXQvGcQ.png"/></div></div></figure><p id="21db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我知道，对吧？相当惊人。它没有获得ace的唯一原因是字体太大，但这没关系，因为它们增加了足够的审美价值，让我可以保留它们。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0263" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">设置</strong></h1><p id="319b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">所以让我们开始吧！打开命令行，导航到您希望创建项目的位置，然后使用以下命令创建一个新的Node.js项目(这些是针对Windows的，但我相信您可以将它们转换到您的操作系统中):</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="987d" class="nf md it nb b gy ng nh l ni nj">mkdir node-ssg &amp;&amp; cd node-ssg</span><span id="f2ad" class="nf md it nb b gy nk nh l ni nj">npm init -y</span></pre><p id="67fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们将安装一些软件包，这些软件包将使我们处理数据的工作变得非常简单。这些软件包是:</p><ul class=""><li id="8b4a" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated">从我们的帖子中提取YAML前线的内容。</li><li id="3705" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu nq nr ns nt bi translated"><code class="fe nu nv nw nb b">marked</code>用于将Markdown转换为HTML。</li><li id="b87c" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu nq nr ns nt bi translated"><code class="fe nu nv nw nb b">highlight.js</code>用于代码中的语法高亮显示。</li></ul><p id="dfef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用以下命令安装所有这些组件:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="5b60" class="nf md it nb b gy ng nh l ni nj">npm i front-matter marked highlight.js</span></pre><p id="1279" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，现在我们可以开始我们的项目了。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bdd3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">构建脚本</strong></h1><p id="0035" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们先想想我们想做什么。因此，我们需要一个构建脚本，它从内容目录中获取所有的Markdown帖子，并在公共目录中丢弃静态HTML文件。</p><p id="67bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们创建调用<code class="fe nu nv nw nb b">build</code>时将运行的脚本。我们将把所有的源代码放在<code class="fe nu nv nw nb b">src</code>目录中，所以继续把它放在项目的根目录中。然后在您最喜欢的代码编辑器(我用的是VS代码)中打开项目，并添加一个名为<code class="fe nu nv nw nb b">index.js</code>的JavaScript文件。现在我们可以简单地通过使用<code class="fe nu nv nw nb b">node</code>运行我们的<code class="fe nu nv nw nb b">index.js</code>文件，将我们的<code class="fe nu nv nw nb b">build</code> <em class="oc"> </em>脚本添加到我们的<code class="fe nu nv nw nb b">package.json</code>中。您的<code class="fe nu nv nw nb b">package.json</code>现在应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="2e00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太好了！现在我们可以在我们的项目中调用<code class="fe nu nv nw nb b">npm run build</code>，它将运行我们的<code class="fe nu nv nw nb b">index.js</code> <em class="oc"> </em>文件。唯一的问题是我们的文件还没有做任何事情。</p><p id="2b82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">出于测试目的，我将创建一个包含我自己的博客文章的内容文件夹。因为我当前的博客也是使用静态站点生成器构建的，所以我可以从那里复制我的内容文件夹。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="58ad" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">做出决定</strong></h1><p id="d19c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">好吧，在开始之前你应该做很多决定。比如帖子应该如何存储？它们应该存储在自己的文件夹中还是仅仅作为<code class="fe nu nv nw nb b">.md</code>文件？你在哪里储存图像？还有很多。</p><p id="6679" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是由于这个项目的范围不是很大，我将使用一个非常简单的文件树。所有帖子将作为降价文件(<code class="fe nu nv nw nb b">.md</code>)存储在内容目录中，其他资源(如图片)可以存储在<code class="fe nu nv nw nb b">./public/assets/</code>。这些决定是为了使这个特定场景的文件读写更简单，但是您总是可以将它们更改为更适合您的项目的值。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8344" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">config . js文件</strong></h1><p id="2970" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们可以把我们做出的决定放在一个<code class="fe nu nv nw nb b">config.js</code>文件中，这样我们就可以从任何地方访问它。我将它们放在一个<code class="fe nu nv nw nb b">dev</code>对象中，因为我们稍后将添加其他属性。这是它现在的样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6fdd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">获得职位</strong></h1><p id="5ae4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">好吧，让我们从获取内容目录中的所有帖子开始。我们可以使用Node.js提供的<code class="fe nu nv nw nb b">fs</code> API来完成这项工作。所以首先，我们导入<code class="fe nu nv nw nb b">fs</code>并创建它的一个实例:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="dbbf" class="nf md it nb b gy ng nh l ni nj"><em class="oc">const</em> fs = require(“fs”);</span></pre><p id="0915" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以使用<code class="fe nu nv nw nb b">fs</code>在这个语法中提供的方法:<code class="fe nu nv nw nb b">fs.methodName()</code>。对于获取帖子，我们可以使用<code class="fe nu nv nw nb b">fs</code>提供的<code class="fe nu nv nw nb b">readdirSync()</code>方法。因此，让我们看看，如果我们获得所有的帖子并将它们记录到控制台，会是什么样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="28b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在在你的控制台上运行<code class="fe nu nv nw nb b">npm run build</code>,如果你做对了，你应该会看到一个帖子列表。我们在代码中使用<code class="fe nu nv nw nb b">slice()</code>的原因是为了去掉<code class="fe nu nv nw nb b">.md</code>扩展。你以后会明白为什么我们必须这样做。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="948d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">解析帖子降价</strong></h1><p id="b5e7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果你还记得，在一开始，我们安装了一个名为<code class="fe nu nv nw nb b">front-matter</code>的NPM包。这有助于我们从文件中提取YAML的内幕。YAML前沿是什么？嗯，就是这个神奇的东西，让你添加额外的YAML数据到你的文件中，在它的前后使用<code class="fe nu nv nw nb b"> — -</code>来把它和其余的内容分开。这里有一个使用YAML前沿话题的博客帖子的例子:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="86d2" class="nf md it nb b gy ng nh l ni nj">---</span><span id="001c" class="nf md it nb b gy nk nh l ni nj">title: Post One</span><span id="cbe7" class="nf md it nb b gy nk nh l ni nj">date: “1583826864020”</span><span id="b75a" class="nf md it nb b gy nk nh l ni nj">description: My reasons for starting a blog.</span><span id="3663" class="nf md it nb b gy nk nh l ni nj">---</span><span id="48a6" class="nf md it nb b gy nk nh l ni nj"><strong class="nb iu">#</strong> <strong class="nb iu">This is an amazing blog post.</strong></span><span id="87ce" class="nf md it nb b gy nk nh l ni nj">Really it’s just great</span></pre><p id="1657" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于我们在前一步中获得了帖子，现在我们可以使用<code class="fe nu nv nw nb b">front-matter</code>解析它们。我们将把所有与post相关的代码放在<code class="fe nu nv nw nb b">posts.js</code>中，这样我们就有了一个更干净的工作环境。因此，让我们从获取文件内容开始。</p><p id="0ed9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用提供的<code class="fe nu nv nw nb b">fs.readFile()</code>方法来实现。下面是将文件内容记录到控制台的样子:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="0679" class="nf md it nb b gy ng nh l ni nj">console.log(fs.readFileSync(“./foo.md”))</span></pre><p id="4f27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是因为我们想要可重用的代码，可以用于循环中的每一篇文章，我们将把它放在一个名为<code class="fe nu nv nw nb b">createPost()</code>的函数中。这个函数将使用<code class="fe nu nv nw nb b">front-matter</code>获取文件的内容并给我们一个对象。这个对象将拥有我们在名为<code class="fe nu nv nw nb b">attributes</code>的属性中设置的前台属性，其余的内容将在名为<code class="fe nu nv nw nb b">body</code>的属性中。我们可以通过使用<code class="fe nu nv nw nb b">require</code>为它创建一个实例来使用<code class="fe nu nv nw nb b">front-matter</code>，然后在我们从文件中读取数据时调用它。</p><p id="22a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这看起来是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="c61f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你检查代码，你会看到我在我们的文章主体上调用了<code class="fe nu nv nw nb b">marked</code>。所有这些都是将Markdown转换成HTML，这样我们以后就可以很容易地在我们的网站上显示它。我还添加了文章的路径作为额外的属性，因为我们以后会需要它。</p><p id="25e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们在<code class="fe nu nv nw nb b">index.js</code>中使用这个方法，只记录输出:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="da2d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">配置标记和语法高亮</strong></h1><p id="02cf" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">因为我们想使用<code class="fe nu nv nw nb b">highlight.js</code>来突出显示我们的代码，所以我们可以使用<code class="fe nu nv nw nb b">marked</code>和它的配置对象。创建一个名为<code class="fe nu nv nw nb b">marked.js</code>的文件，在这个文件中，我们将创建一个<code class="fe nu nv nw nb b">marked</code>的实例，配置它，然后导出它。这是它的样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="7b42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以现在你每次使用<code class="fe nu nv nw nb b">marked</code>，都要求它直接从这个文件中出来。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5d11" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">生成帖子HTML页面</strong></h1><p id="072c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在我们从实际的页面生成开始。首先，我们希望它创建公共文件夹。如果它还不存在，我们可以使用<code class="fe nu nv nw nb b">fs.mkdirSync()</code>和<code class="fe nu nv nw nb b">fs.existsSync()</code>函数来实现。让我们将它添加到我们的<code class="fe nu nv nw nb b">index.js</code>文件中:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="c077" class="nf md it nb b gy ng nh l ni nj">if (!fs.existsSync(config.dev.outdir)) fs.mkdirSync(config.dev.outdir);</span></pre><p id="b28a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，在我们的<code class="fe nu nv nw nb b">posts.js</code>文件中，让我们创建一个<code class="fe nu nv nw nb b">createPosts()</code>函数，它将创建HTML文件并将其写入公共目录。但在此之前，我们需要一个名为<code class="fe nu nv nw nb b">posthtml</code>的助手函数，它将获取post JSON对象并返回一个完整的HTML页面，我们可以简单地将它写入一个文件。在这个函数中，我们将使用模板文字的力量来使我们的生活变得更容易。它看起来是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="8bff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在给文章添加日期时创建一个<code class="fe nu nv nw nb b">new Date()</code>的原因是为了让所有的日期都有一致的格式。这是一种非常固执己见的做法，因为它要求前台提供的日期是一个“表示自UNIX纪元以来经过的毫秒数”然而，我不介意在我发帖之前在浏览器开发工具中运行一个快速的<code class="fe nu nv nw nb b">Date.now()</code>来得到那个数字。如果你愿意，你可以在代码中修改它。</p><p id="c66a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以创建一个名为<code class="fe nu nv nw nb b">createPosts()</code>的函数，它将接受<code class="fe nu nv nw nb b">createPost()</code>函数的输出并生成一个HTML文件。它看起来是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="0375" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，它没有生成一个名为<code class="fe nu nv nw nb b">postname.html</code>的文件，而是创建了一个名为<code class="fe nu nv nw nb b">postname</code>的目录，然后在该目录中添加了一个<code class="fe nu nv nw nb b">index.html</code>，这样该文章在浏览器中的路径将是<code class="fe nu nv nw nb b">yourwebsite/postname</code>而不是<code class="fe nu nv nw nb b">yourwebsite/postname.html</code>。</p><p id="3102" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们在<code class="fe nu nv nw nb b">index.js</code>中调用它，看看它是否有效:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="d528" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果一切正常，您应该会看到一个公共目录弹出，其中有几个目录(基于您有多少帖子)。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ef47" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">关于第</strong>节</h1><p id="39aa" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这个博客还将在其主页上为作者提供一个小的“关于”部分，所以我们需要将这个信息添加到我们的<code class="fe nu nv nw nb b">config.js</code>文件中。这是我们修改后的<code class="fe nu nv nw nb b">config.js</code>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e90f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">首页</strong></h1><p id="1427" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">主页将是公共目录中的<code class="fe nu nv nw nb b">index.html</code>文件。它应该有一个标题与博客的名字和一个小的关于作者的部分。我们可以像以前一样使用模板文字来生成HTML。让我们调用函数<code class="fe nu nv nw nb b">homepage()</code>，并把它放在一个名为<code class="fe nu nv nw nb b">homepage.js</code>的文件中。下面是该文件现在的样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="b54c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们需要实际创建文件，这样我们就可以向其中添加HTML。我们可以创建一个名为<code class="fe nu nv nw nb b">addHomepage()</code>的函数，并将它添加到同一个文件中。它看起来是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="2875" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以简单地使用<code class="fe nu nv nw nb b">module.exports = addHomePage</code>将其导出，并在我们的<code class="fe nu nv nw nb b">index.js</code>文件中调用它。这是我们修改后的<code class="fe nu nv nw nb b">index.js</code>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="52d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，我还按最新日期对帖子进行了排序，所以最新的帖子排在最前面。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7be4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">资产目录</strong></h1><p id="7f5d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们可以在<code class="fe nu nv nw nb b">./public/assets</code>中存储任何不想被生成器接触到的文件。例如，如果您想为这个博客添加样式，您可以将以下内容添加到您的<code class="fe nu nv nw nb b">homepage</code>函数中:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="2621" class="nf md it nb b gy ng nh l ni nj">&lt;link rel=”stylesheet” href=”./assets/main.css” /&gt;</span></pre><p id="3c27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你可以随心所欲地设计你的博客了。图像也以同样的方式工作。例如，如果您想在post Markdown文件中添加图像，您可以执行以下操作:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="65c8" class="nf md it nb b gy ng nh l ni nj">Here’s an image:</span><span id="75a5" class="nf md it nb b gy nk nh l ni nj">![Wow look at this beautiful thing](../assets/images/wow.png)</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="88ed" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">让它看起来很漂亮</strong></h1><p id="b2c9" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">啊！现在是我最喜欢的部分:是时候让它看起来更好了。我不知道你怎么想，但是看着那些默认的HTML样式对我伤害很大。为了简化我的工作，我将把<a class="ae ky" href="https://grotesk.now.sh" rel="noopener ugc nofollow" target="_blank"> grotesk </a>插入到项目中，并对其进行定制。下面是<code class="fe nu nv nw nb b">./public/assets/styles/main.css</code>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="ad53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如你所看到的，我已经决定在这个项目中使用流体类型。我还引入了<code class="fe nu nv nw nb b">grotesk.light.scss</code>并自定义了变量。这些变量现在是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="e0e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我还定制了grotesk自带的<code class="fe nu nv nw nb b">fonts.scss</code>文件。现在看起来是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="9070" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，我为这个博客导入了两种字体:Lyon Display(本地托管)和EB Garamond(一种Google字体)。</p><p id="17aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">造型到此为止。它看起来比我预期的要好很多。你可以<a class="ae ky" href="https://blog.kartikn.me/" rel="noopener ugc nofollow" target="_blank">现场查看</a>，但如果你嫌麻烦，这里有一张图片:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/44444832e42e0621ea70fc0202600d4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nfsUGJJpVMUddUIa6JnE8A.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="facb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">主持</strong></h1><p id="5530" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我个人喜欢使用<a class="ae ky" href="https://now.sh" rel="noopener ugc nofollow" target="_blank"> ZEIT Now </a>进行托管，但我也喜欢其他一些免费选项，如<a class="ae ky" href="https://netlify.com" rel="noopener ugc nofollow" target="_blank"> Netlify </a>和<a class="ae ky" href="https://github.io" rel="noopener ugc nofollow" target="_blank"> GitHub Pages </a>。由于现在与输出到公共目录的NPM构建脚本集成得如此之好，我所要做的就是在该目录的根目录下运行<code class="fe nu nv nw nb b">now — prod</code>(当您第一次运行它时，它会问您一些配置问题，默认答案是“没问题”)。现在每次我想更新我的博客，我只需再次运行<code class="fe nu nv nw nb b">now — prod</code>，它就会通过运行<code class="fe nu nv nw nb b">npm run build</code>并托管它来更新我的博客。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a4e5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">最终想法</strong></h1><p id="6a24" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">感谢阅读这篇很长的文章。我希望你对Node.js有所了解。我个人对<code class="fe nu nv nw nb b">fs</code> API有很多了解，并且很喜欢做这个。我太喜欢它了，以至于最后我把我的个人博客从盖茨比换成了这个。那可能是一个糟糕的决定，但是我总是能在以后解决它。只是提醒一下:你可以在<a class="ae ky" href="https://github.com/kartiknair/blog" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到所有的源代码，所以如果你发现有什么不对的地方，请随意叉出来或者打开一个问题。</p><p id="83f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将继续致力于此，根据我的需要对其进行微调，并可能尝试一些不同的东西，如用于模板的<a class="ae ky" href="https://github.com/polymer/lit-html" rel="noopener ugc nofollow" target="_blank"> lit-html </a>或<a class="ae ky" href="https://github.com/janl/mustache.js/" rel="noopener ugc nofollow" target="_blank"> mustache </a>。但是这篇文章到此为止。很快在另一部电影中再见。</p></div></div>    
</body>
</html>