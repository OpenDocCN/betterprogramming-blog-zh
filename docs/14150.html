<html>
<head>
<title>How to Add Custom Themes to Your Mobile Apps Using React Native and Expo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用React Native和Expo向您的移动应用程序添加自定义主题</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/hail-to-the-theme-919de887120e?source=collection_archive---------2-----------------------#2022-11-11">https://betterprogramming.pub/hail-to-the-theme-919de887120e?source=collection_archive---------2-----------------------#2022-11-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7bb7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在您的应用中配置亮模式和暗模式主题</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4847d12a663420d1d4432b13b1b10926.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LJZ-BVxLkaApykUtsNfxPA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">添加自定义应用程序主题！</p></figure><p id="c750" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">啊主题！不管你喜不喜欢主题，主题无处不在！我们的操作系统提供自定义主题选项(有些比其他的更多)，许多流行的网络浏览器允许安装自定义主题扩展…当然，我们的手机也是如此！</p><p id="f9ab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然移动设备主题化可能比上面提到的其他途径更受限制，但iOS和Android之间仍然存在潜在的共性，即现在为核心应用程序提供<em class="lu">亮</em>和<em class="lu">暗</em>主题。</p><p id="485a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">作为一名开发人员，在设计和实现新的应用程序和特性时考虑主题变得越来越重要……不管是什么平台！在本文中，我们将专门研究在使用React Native创建一个新的Android应用程序时，我们如何去做这件事！</p><h1 id="96a2" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">简介</h1><p id="23a5" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">在开始编写我们的应用程序之前，解释一下我们使用的方法是很重要的！本文使用的示例应用程序几乎完全是用JavaScript编写的，更确切地说是用扩展JavaScript(或JSX)编写的。这可能会让那些跨平台开发的新手感到震惊，他们通常认为Java和Swift是构建移动应用程序的唯一途径。诚然，Java/Kotlin和Swift/Objective-C分别是用于构建Android和iOS移动应用程序的主要语言……但它们不是唯一的方法！</p><h2 id="6dc1" class="ms lw it bd lx mt mu dn mb mv mw dp mf lh mx my mh ll mz na mj lp nb nc ml nd bi translated">输入React Native:</h2><blockquote class="ne nf ng"><p id="ccab" class="ky kz lu la b lb lc ju ld le lf jx lg nh li lj lk ni lm ln lo nj lq lr ls lt im bi translated">React Native将本机开发的最佳部分与React相结合，React是用于构建用户界面的一流JavaScript库…</p><p id="a27c" class="ky kz lu la b lb lc ju ld le lf jx lg nh li lj lk ni lm ln lo nj lq lr ls lt im bi translated">…创建特定于平台的组件版本，以便单个代码库可以跨平台共享代码。使用React Native，一个团队可以维护两个平台并共享一个公共技术— React。</p></blockquote><p id="69a3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过使用React Native，我们将能够利用React提供的强大功能和灵活性，还能够重用定制组件来构建可以在Android和iOS上运行的移动应用程序…所有这些都使用相同的代码库！</p></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><p id="aed6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了建立我们的项目，我们将使用优秀的<a class="ae nr" href="https://www.expo.io" rel="noopener ugc nofollow" target="_blank"> Expo </a>框架及其CLI(命令行界面)。Expo已经成为使用react native进行移动开发的最广泛使用的工具之一，这不仅是因为它使项目的启动变得非常简单，还因为它提供了丰富的库来定制您的应用程序的外观和功能！</p><p id="29bd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，务必确保我们安装了以下系统要求:</p><ul class=""><li id="e30f" class="ns nt it la b lb lc le lf lh nu ll nv lp nw lt nx ny nz oa bi translated">Node.js LTS版本(使用LTS特定版本很重要)</li><li id="3cdd" class="ns nt it la b lb ob le oc lh od ll oe lp of lt nx ny nz oa bi translated">饭桶</li><li id="9848" class="ns nt it la b lb ob le oc lh od ll oe lp of lt nx ny nz oa bi translated">Watchman(用于Linux/macOS系统)</li><li id="fa35" class="ns nt it la b lb ob le oc lh od ll oe lp of lt nx ny nz oa bi translated">纱线(非必需，但由Expo推荐)</li></ul><p id="4933" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这样一来，是时候写一些代码了！打开您喜欢的终端应用程序或PowerShell，并导航到您计划创建项目目录的位置。在那里，运行以下命令来创建一个新的expo项目:</p><pre class="kj kk kl km gt og oh oi oj aw ok bi"><span id="6b42" class="ms lw it oh b gy ol om l on oo">npx create-expo-app example-app &amp;&amp; cd example-app</span></pre><p id="00cc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Expo还提供了在创建新项目时传递模板的选项。要查看不同的模板，只需运行<code class="fe op oq or oh b">npx create-expo-app --template</code>。至此，我们的新项目框架已经设置完毕，可以开始运行了👍。</p><h1 id="5ff6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">代码</h1><p id="197a" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">好吧，让我们来看看好东西！现在我们已经有了基本的设置，我们将继续创建一些组件，放在一个小的示例应用程序中，看看如何以一种简单的方式使用主题化。该应用程序将代表一个商店购物清单应用程序，它根据用户的设备是设置为<em class="lu">亮</em>还是<em class="lu">暗</em>模式来调整其组件主题。</p><p id="8b84" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第一步，也可以说是最重要的一步，是为我们的应用程序主题创建一组颜色。这个项目利用了一个很棒的React原生框架<code class="fe op oq or oh b">react-native-paper</code>。它将提供用于构建我们的UI的关键组件。在他们的网站<a class="ae nr" href="https://callstack.github.io/react-native-paper/theming.html" rel="noopener ugc nofollow" target="_blank">上可以找到的一个很棒的特性</a>是一个基于提供的原色的材质UI主题生成器:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/a754c474381dfda382e669f88abd312c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2hL77t_FrVkwebXgkiqHXQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">React原生纸张主题生成器</p></figure><p id="f3bd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个神奇的工具不仅消除了创建适当的浅色和深色调色板对象的困难，还遵循了所有新版本Android都遵循的<strong class="la iu">材质设计</strong>指导原则…允许我们的应用程序有效地<em class="lu">感觉</em> <strong class="la iu">和</strong> <em class="lu">看起来</em>像任何其他原生构建的应用程序！</p><p id="208a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您还没有这样做，请确保将以下依赖项添加到您的<code class="fe op oq or oh b">package.json</code>中，以便安装所有的魔法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="176a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要使用我们之前创建的主题对象，请打开项目的<code class="fe op oq or oh b">App.js</code>文件并添加它们，以及<code class="fe op oq or oh b">expo</code>和<code class="fe op oq or oh b">react-native-paper</code>的其他导入语句:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="c1e8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以上要点是我们应用程序中所有主题魔法发生的地方！我们使用<code class="fe op oq or oh b">react-native-paper</code>生成的调色板值来声明我们的主题对象。Expo提供了一个API，用于根据设备是否设置为<em class="lu">暗</em>或<em class="lu">亮</em>模式来调整顶部状态栏的颜色，因此我们确保也包括这一点。这段代码的另一个重要部分是在定义我们的两个主题提供者时使用了<code class="fe op oq or oh b">useColorScheme</code>钩子。这将允许应用程序中的所有子组件传递和访问我们的主题。</p><h1 id="5dde" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">说到组件</h1><p id="cf47" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">您可能已经注意到上面代码中添加了一个<code class="fe op oq or oh b">MainNavigator</code>组件的特定导入语句。这就是我们的应用程序的主要导航功能所在，并利用另一个强大且恰当命名的<code class="fe op oq or oh b">react-navigation</code>框架来实现。在我们看一下我们的导航器之前，让我们把几个更小的组件放在一起，合并到我们的UI中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><p id="9882" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">定义好组件文件后，我们现在可以将它们导入到我们的<code class="fe op oq or oh b">MainNavigator</code>文件中，同时导入的还有<code class="fe op oq or oh b">react-navigation</code>提供的导航组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><p id="2d50" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你密切关注，你可能会注意到代码的关键行，允许我们将自定义主题颜色应用到应用程序的组件。让我们更仔细地看一小段，看看它到底是如何工作的！</p><pre class="kj kk kl km gt og oh oi oj aw ok bi"><span id="c164" class="ms lw it oh b gy ol om l on oo">import { ..., useTheme, ... } from 'react-native-paper';</span></pre><p id="de3e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正是这个<code class="fe op oq or oh b">useTheme</code>钩子允许我们访问从应用程序顶层传下来的自定义主题对象。使用这些颜色只需要调用钩子并将返回值存储在一个变量中，就像我们的<code class="fe op oq or oh b">PrimaryScreen</code>组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><h2 id="c751" class="ms lw it bd lx mt mu dn mb mv mw dp mf lh mx my mh ll mz na mj lp nb nc ml nd bi translated">测试</h2><p id="a0fa" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">要在实时开发模式下运行我们的新项目，请在项目根目录下运行<code class="fe op oq or oh b">npx expo start</code>。这将启动一个交互式命令行实用程序，允许您选择在哪个设备上测试您的应用程序:</p><ul class=""><li id="eabf" class="ns nt it la b lb lc le lf lh nu ll nv lp nw lt nx ny nz oa bi translated">使用<strong class="la iu"> Expo Go </strong>移动应用程序在物理设备上进行测试(扫描QR以方便设置)</li><li id="ec57" class="ns nt it la b lb ob le oc lh od ll oe lp of lt nx ny nz oa bi translated">在Android模拟器上运行(<strong class="la iu">使用Android Studio </strong>)</li><li id="2eb8" class="ns nt it la b lb ob le oc lh od ll oe lp of lt nx ny nz oa bi translated">在iOS仿真设备上运行(<strong class="la iu">使用Xcode </strong>)</li></ul></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><p id="b0b1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">也没那么糟，对吧？对于包括我自己在内的许多开发人员来说，实现定制主题的过程一开始看起来相当令人生畏。然而，在一些令人惊奇的框架的帮助下，它可以(相对)毫无痛苦地完成！</p><p id="c09c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">尽管浏览react native开发的所有细节已经超出了本文的范围，但我希望至少能够阐明在Expo和React Native的帮助下创建和<strong class="la iu"> <em class="lu">定制</em> </strong>您自己的移动应用程序的可能性。</p><p id="63c3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请随意检查和分叉该项目的整个源代码。或许能为你接下来的移动项目提供一些启发和指导！</p><div class="pd pe gp gr pf pg"><a href="https://github.com/dedSyn4ps3/react-native-theming" rel="noopener  ugc nofollow" target="_blank"><div class="ph ab fo"><div class="pi ab pj cl cj pk"><h2 class="bd iu gy z fp pl fr fs pm fu fw is bi translated">GitHub-ded syn 4 PS 3/react-native-theming</h2><div class="pn l"><h3 class="bd b gy z fp pl fr fs pm fu fw dk translated">这个repo是用来保存中型文章的代码文件的。这是一个演示应用程序…</h3></div><div class="po l"><p class="bd b dl z fp pl fr fs pm fu fw dk translated">github.com</p></div></div><div class="pp l"><div class="pq l pr ps pt pp pu ks pg"/></div></div></a></div></div></div>    
</body>
</html>