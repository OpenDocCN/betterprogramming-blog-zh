<html>
<head>
<title>The Secret Power of JSON.Stringify</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JSON的秘密力量。纤细的</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-secret-power-of-json-stringify-f5aad9370ad?source=collection_archive---------1-----------------------#2019-10-22">https://betterprogramming.pub/the-secret-power-of-json-stringify-f5aad9370ad?source=collection_archive---------1-----------------------#2019-10-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f974" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这比看起来要复杂得多</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a2456a428eb320d27139675d7c1762c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*H3-Q_UDZUoh_NNHH.png"/></div></div></figure><p id="172e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">JavaScript中有许多函数可以完成它们的工作。我们每天都在使用它们，但我们不知道它们的额外功能。有一天，我们看着文档，意识到它有比我们想象的更多的特性。</p><p id="3241" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">同样的事情也发生在我和<code class="fe lq lr ls lt b">JSON.stringify</code>身上。在这个简短的教程中，我将向你展示我所学到的东西。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="43d9" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">基础</h1><p id="119d" class="pw-post-body-paragraph ku kv it kw b kx mt ju kz la mu jx lc ld mv lf lg lh mw lj lk ll mx ln lo lp im bi translated"><code class="fe lq lr ls lt b">JSON.stringify</code>方法接受一个变量，并将其转换成JSON表示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="8b43" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当有一个元素不能序列化为JSON时，问题就来了。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="984b" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">第二个论点</h1><p id="2bc0" class="pw-post-body-paragraph ku kv it kw b kx mt ju kz la mu jx lc ld mv lf lg lh mw lj lk ll mx ln lo lp im bi translated"><code class="fe lq lr ls lt b">JSON.stringify</code>有第二个参数——称为replacer参数。</p><p id="0dd9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以传递一个字符串数组，作为要包含的对象属性的白名单。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="2662" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以过滤掉不想显示的值。这些值可能是太大的项目(比如一个错误对象)或者没有可读的JSON表示。</p><p id="8496" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">replacer参数也可以是一个函数。该函数接收<code class="fe lq lr ls lt b">JSON.stringify</code>方法正在迭代的实际键和值。您可以用函数的返回值改变值的表示。如果你没有从这个函数返回任何东西或者返回<code class="fe lq lr ls lt b">undefined</code>，那么这个条目将不会出现在结果中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="32ad" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通过在函数中返回<code class="fe lq lr ls lt b">undefined</code>，我们可以从结果中移除那些项目。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="fffb" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">第三个论点</h1><p id="fead" class="pw-post-body-paragraph ku kv it kw b kx mt ju kz la mu jx lc ld mv lf lg lh mw lj lk ll mx ln lo lp im bi translated">第三个参数控制最后一个字符串的间距。如果参数是一个数字，则stringification中的每一级都将缩进这个数量的空格字符。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="1358" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果第三个参数是一个字符串，它将被用来代替空格字符。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="8c38" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">托克森方法</h1><p id="f5fc" class="pw-post-body-paragraph ku kv it kw b kx mt ju kz la mu jx lc ld mv lf lg lh mw lj lk ll mx ln lo lp im bi translated">如果我们字符串化的对象有属性<code class="fe lq lr ls lt b">toJSON</code>，它将定制字符串化过程。</p><p id="bdc6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以从方法返回一个新值，而不是序列化该对象，该值将被序列化，而不是原始对象。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="9f9d" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">演示时间</h1><p id="29c8" class="pw-post-body-paragraph ku kv it kw b kx mt ju kz la mu jx lc ld mv lf lg lh mw lj lk ll mx ln lo lp im bi translated">这里有一个<a class="ae na" href="https://codepen.io/twhite96/pen/WNNRvKX" rel="noopener ugc nofollow" target="_blank"> CodePen </a>，我在其中包含了上面的例子，你可以修改它。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="273c" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">最后的想法</h1><p id="a428" class="pw-post-body-paragraph ku kv it kw b kx mt ju kz la mu jx lc ld mv lf lg lh mw lj lk ll mx ln lo lp im bi translated">有时看一下我们日常使用的那些函数的文档会有所收获。他们可能会给我们惊喜，我们可能会学到一些东西。保持对知识的渴望，阅读文档。</p></div></div>    
</body>
</html>