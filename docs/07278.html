<html>
<head>
<title>The Different Types of Browser Storage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不同类型的浏览器存储</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-different-types-of-browser-storage-82b918cb3cf8?source=collection_archive---------0-----------------------#2020-12-29">https://betterprogramming.pub/the-different-types-of-browser-storage-82b918cb3cf8?source=collection_archive---------0-----------------------#2020-12-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f786" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解可用于在用户浏览器上保存用户数据的不同工具</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3730b4802b1bd868f3f9fa2ce33a5731.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6UmrGOz0O2pvmwHT"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="http://twitter.com/kundeleknabiegunie" rel="noopener ugc nofollow" target="_blank">@ kundeleknabiegunie</a>unsplash.com</p></figure><p id="1b17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现代网络浏览器为在用户的浏览器上存储网站数据提供了不同的选项，允许根据需要检索这些数据。这使网站所有者能够长期保存数据，保存网站内容或文档以供离线使用，存储用户首选项，应用状态等。</p><p id="1353" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，让我们讨论不同类型的浏览器存储，可用于在用户的浏览器上存储网站数据。</p><h2 id="9b5d" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">浏览器存储的使用案例</h2><ul class=""><li id="a684" class="mo mp it lb b lc mq lf mr li ms lm mt lq mu lu mv mw mx my bi translated">个性化站点首选项</li><li id="fe40" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">持续的站点活动</li><li id="069d" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">存储登录状态</li><li id="04be" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">将数据和资产保存在本地，这样网站可以更快地下载或在没有网络连接的情况下使用</li><li id="6379" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">在本地保存web应用程序生成的文档以供脱机使用</li><li id="2bf1" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">提高网站性能</li><li id="e40b" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">减少对后端服务器的请求</li></ul><h2 id="1671" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">浏览器存储的类型</h2><ul class=""><li id="5024" class="mo mp it lb b lc mq lf mr li ms lm mt lq mu lu mv mw mx my bi translated">饼干</li><li id="a3cd" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">局部存储器</li><li id="1541" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">会话存储</li><li id="6b5d" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">索引b</li><li id="6bea" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">Web SQL</li><li id="2a8a" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">高速缓冲存储</li></ul></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="2361" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">饼干</h1><p id="276b" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">这是在客户机上存储数据的传统方法——这是HTML5之前的web存储的唯一选择。</p><p id="b7d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Cookies存储客户端数据，为网站访问者提供个性化体验。Cookies是在服务器上创建的，并在响应时发送到客户端，并且在每次请求时都与服务器交换数据。服务器可以使用cookie数据向用户发送个性化内容。</p><p id="880f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还可以通过JavaScript: <code class="fe nz oa ob oc b">document.cookie</code>创建、更新或读取cookies。<code class="fe nz oa ob oc b">HTTPOnly</code> cookie标志可用于限制JavaScript中的cookie访问，以缓解一些安全问题，例如跨站点脚本(cookie只供服务器访问)。</p><h2 id="0e58" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><strong class="ak"> Cookie属性</strong></h2><pre class="kj kk kl km gt od oc oe of aw og bi"><span id="3f47" class="lv lw it oc b gy oh oi l oj ok">Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;<br/>Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Expires=&lt;date&gt;<br/>Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Max-Age=&lt;non-zero-digit&gt;<br/>Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Domain=&lt;domain-value&gt;<br/>Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Path=&lt;path-value&gt;<br/>Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Secure<br/>Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; HttpOnly</span><span id="d873" class="lv lw it oc b gy ol oi l oj ok">Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; SameSite=Strict<br/>Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; SameSite=Lax<br/>Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; SameSite=None; Secure</span><span id="4dce" class="lv lw it oc b gy ol oi l oj ok">// Multiple attributes are also possible, for example:<br/>Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Domain=&lt;domain-value&gt;; Secure; HttpOnly</span></pre><p id="298e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有两种类型的cookie:会话cookie和持久cookie。</p><p id="d7c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">会话cookie</strong></p><p id="a2df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">会话cookies不指定<code class="fe nz oa ob oc b">Expires</code>或<code class="fe nz oa ob oc b">Max-Age</code>属性，并且在浏览器关闭时被删除。</p><p id="6462" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">持久cookie</strong></p><p id="6e1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">持久cookies指定了<code class="fe nz oa ob oc b">Expires</code>或<code class="fe nz oa ob oc b">Max-Age</code>属性。关闭浏览器时，cookies不会过期，但会在特定的日期(<code class="fe nz oa ob oc b">Expires</code>)或时间长度(<code class="fe nz oa ob oc b">Max-Age</code>)过期。</p><p id="1a85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据cookie头中的域设置，一个域上设置的cookie可以被其他子域访问。</p><pre class="kj kk kl km gt od oc oe of aw og bi"><span id="659b" class="lv lw it oc b gy oh oi l oj ok">Set-Cookie: test=test-value; Domain=example.com - the cookie is available for example.com and sub domains</span></pre><h2 id="d3e1" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><strong class="ak">对cookies的限制</strong></h2><ul class=""><li id="0ce9" class="mo mp it lb b lc mq lf mr li ms lm mt lq mu lu mv mw mx my bi translated">只能存储4 KB的数据—此限制会因浏览器的实施而有所不同</li><li id="1781" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">一个域中允许的cookies数量受浏览器实现的限制(例如，20个)</li><li id="85b7" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">跨域的cookies总数受到限制(例如，300)。一旦达到限制，最旧的cookie就会被删除，以便存储新的cookie。该数量基于浏览器实现。</li><li id="0e53" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">每次请求时，Cookie数据都会发送到服务器。这将消耗额外的带宽并影响性能。</li><li id="1afb" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">允许与第三方共享数据(例如，第三方cookies)</li></ul><p id="a9c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Cookies会导致多种安全问题，因此现在建议尽可能使用现代存储API。</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="ffe3" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">Web存储API</h1><p id="1693" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">Web存储API允许web应用程序在用户浏览器中本地存储数据。API是作为HTML5标准的一部分启用的。</p><p id="3d75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与cookies相比，存储限制更大，例如至少5 MB(实际大小取决于浏览器的实现)。这些信息仅在客户端提供，不会与服务器共享。服务器没有任何权限修改数据。E</p><p id="775d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据不能在域之间共享，包括子域。每个源(协议和域的组合)都有唯一的存储—所有的API操作都在特定于源的存储中执行。</p><p id="c238" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Web存储API提供了两种不同的对象来在用户的浏览器上存储数据:<code class="fe nz oa ob oc b">sessionStorage</code>和<code class="fe nz oa ob oc b">localStorage</code>。</p><h2 id="97a5" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">本地存储</h2><p id="915c" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated"><code class="fe nz oa ob oc b">localStorage</code>对象存储没有截止日期的数据。当浏览器关闭时，数据不会被删除，并将在第二天、第一周或第二年可用，直到被网站或用户删除。</p><h2 id="06af" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">会话存储</h2><p id="e30d" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated"><code class="fe nz oa ob oc b">sessionStorage</code>对象等同于<code class="fe nz oa ob oc b">localStorage</code>对象，只是它只存储一个会话的数据。当用户关闭特定的浏览器选项卡时，数据被删除。</p><p id="38b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Web存储API将数据存储为键/值对。所有数据都存储为字符串，而所有添加到存储中的数据都隐式转换为字符串。它在检索时显式地将数据转换为所需的类型。<code class="fe nz oa ob oc b">JSON.parse()</code>和<code class="fe nz oa ob oc b">JSON.stringify()</code>方法可用于存储中对象数据的序列化和反序列化。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="520e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Web存储API调用是同步的，因此它们可能会影响UI呈现。使用Web存储API来存储和检索最少量的数据。Web存储API很容易用于在用户的浏览器上存储和检索数据——所有现代浏览器都支持Web存储API。</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="37ac" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">索引数据库存储</h1><p id="28c4" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">IndexedDB是一个基于JavaScript的面向对象的数据库。IndexedDB允许您存储和检索用键(主键，例如SSN)索引的对象。可以存储结构化克隆算法支持的任何对象(例如，视频、图像)。IndexedDB使用起来比Web存储API复杂得多。</p><p id="28e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">IndexedDB是一种在用户浏览器中持久存储大量数据的方法。IndexedDB允许您创建具有高级功能的web应用程序，而不管网络是否可用。这些应用程序可以在线和离线工作。IndexedDB对于存储大量数据的应用程序和不需要持续互联网连接的应用程序非常有用。</p><p id="e008" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">IndexDB API是异步的，它不会阻止UI呈现。这个API使用索引来实现数据的高性能搜索。</p><p id="5e8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建数据库模式和对象，打开到数据库的连接，然后在一系列事务中检索和更新数据。IndexDB允许存储大量的结构化数据。该大小基于浏览器实现。</p><p id="0ea1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该数据库是origin的私有数据库，因此任何其他网站都无法访问IndexedDB存储的其他网站。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="94bc" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">Web SQL数据库</h1><blockquote class="oo op oq"><p id="f281" class="kz la or lb b lc ld ju le lf lg jx lh os lj lk ll ot ln lo lp ou lr ls lt lu im bi translated">" Web SQL数据库是一个网页API，用于存储数据库中的数据，可以使用SQL变量进行查询。"— <a class="ae ky" href="https://en.wikipedia.org/wiki/Web_SQL_Database" rel="noopener ugc nofollow" target="_blank">维基百科</a></p></blockquote><p id="9945" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该规范基于SQLite。并不是所有的浏览器都支持Web SQL数据库——这个标准现在被W3C否决了，IndexDB应该是一个替代方案</p><p id="4032" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管如此，这仍可以在Safari、Chrome、Opera和Edge等受支持的浏览器中使用。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="5bd4" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">缓存存储</h1><blockquote class="oo op oq"><p id="fc1f" class="kz la or lb b lc ld ju le lf lg jx lh os lj lk ll ot ln lo lp ou lr ls lt lu im bi translated">" CacheStorage是浏览器中的一种存储机制，用于存储和检索网络请求和响应。它存储一对请求和响应对象，请求作为键，响应作为值。</p><p id="ad0b" class="kz la or lb b lc ld ju le lf lg jx lh os lj lk ll ot ln lo lp ou lr ls lt lu im bi translated">— <a class="ov ow ep" href="https://medium.com/u/a1ee806e09de?source=post_page-----82b918cb3cf8--------------------------------" rel="noopener" target="_blank">奇杜梅·恩纳迪</a>途经<a class="ae ky" href="https://blog.bitsrc.io/introduction-to-the-cache-storage-a-new-browser-cache-pwa-api-a5d7426a2456" rel="noopener ugc nofollow" target="_blank">零碎</a></p></blockquote><p id="343b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CacheStorage API可以在Windows上下文(DOM上下文)中使用，也可以与服务工作器API一起使用，以支持离线访问。在本教程中，我们将更多地讨论DOM上下文。</p><p id="8002" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建CacheStorage是为了使网站能够存储网络请求和响应，但它也可以用作存储工具。例如，我们可以将用户偏好等自定义数据存储到缓存中，并在需要时检索它们。<code class="fe nz oa ob oc b">put</code>方法可用于将自定义响应对象存储到缓存存储中。</p><p id="c969" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CacheStorage API允许我们从跨源网站获取并缓存数据。CacheStorage API是异步的，不会阻止UI呈现。CacheStorage选项是浏览器存储的最新添加，一些浏览器仍然不支持它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="4cce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有关不同储物选项的更多详情，请参考以下视频。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ox on l"/></div></figure><p id="5a94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于存储演示，请参考<a class="ae ky" href="https://github.com/techforum-repo/youttubedata/tree/master/browser-storage-demos" rel="noopener ugc nofollow" target="_blank">浏览器存储演示</a>(该演示构建在带有Express.js的Node.js上。</p><p id="d245" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在用户浏览器上存储数据有多种选项，请根据您的使用情况选择选项。</p><p id="c48e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用CacheStorage API存储数据以供脱机访问。</p><p id="0d01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于存储大量应用程序或用户生成的数据，IndexedDB是更好的选择。</p><p id="2866" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Cookies仍然可以用来存储服务器识别状态所需的最少数据。</p><p id="1f0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本地存储和会话存储可用于存储最少量的数据。本地存储和会话存储API是同步的，因此它们会影响UI呈现。但是在项目中启用API是很容易的。</p></div></div>    
</body>
</html>