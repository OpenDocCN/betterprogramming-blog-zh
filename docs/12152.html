<html>
<head>
<title>Running Python Scripts on the Web Using PyScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用PyScript在Web上运行Python脚本</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/running-python-script-on-the-web-using-pyscript-the-next-big-thing-8ace9543d75?source=collection_archive---------5-----------------------#2022-05-16">https://betterprogramming.pub/running-python-script-on-the-web-using-pyscript-the-next-big-thing-8ace9543d75?source=collection_archive---------5-----------------------#2022-05-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9500" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这是下一件大事吗？如果它继续进化的话</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ebc6e3be2ecc730baff749ccf4148425.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1jeR-rnGgmlGbVEc"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jacksonsophat?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杰克逊·索</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="471c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在2022年PyCon美国会议期间，主题演讲人之一王蒙杰公布了PyScript——一种直接在HTML中编写Python脚本的方法。如果您不了解Peter，您可能听说过Anaconda，它是Python和R最流行的发行版之一，特别关注数据科学。彼得是Anaconda的首席执行官和联合创始人。</p><p id="62b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">换句话说，PyScript是由一家声誉良好的技术公司开发的，这可能会在不久的将来保证它的生存能力。它受到了Python和web开发人员的极大关注，并且在<a class="ae ky" href="https://github.com/pyscript/pyscript" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上有超过10k颗星。然而，它能否成为一个成功的产品取决于时间和开发的长期投资，使其成为一个有竞争力的产品，这有一些已知的弊端(将在最后讨论)。</p><p id="b588" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事不宜迟，让我们来快速了解一下这款激动人心的产品吧！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e729" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">py脚本标签</h1><p id="8960" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们知道大多数网站最常见的元素是HTML文件。当我们做一个网站的时候，我们的工作就是通过一些框架直接或者间接的制作HTML文件。在一个典型的HTML文件中，你会看到各种各样的标签。例如，<code class="fe mz na nb nc b">&lt;head&gt;</code>定义了HTML页面的元数据和关键信息，<code class="fe mz na nb nc b">&lt;title&gt;</code>是文档的标题，<code class="fe mz na nb nc b">&lt;h1&gt;</code>、<code class="fe mz na nb nc b">&lt;h2&gt;</code>等定义了不同级别的标题。</p><p id="03ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如前所述，PyScript允许您在HTML中编写Python脚本，它使用了一个特殊的标签— <code class="fe mz na nb nc b">py-script</code>。在标签中，您可以嵌入Python脚本。要了解它是如何工作的，您可以创建一个包含以下代码的HTML文件，并使用Chrome打开该文件。在你的Chrome浏览器中，你应该可以看到如下内容:</p><div class="kj kk kl km gt ab cb"><figure class="nd kn ne nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/a5e7dcfe9229667bb07e713010a83973.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*SwVWc0iUBr5asIpJ2JGT0g.png"/></div></figure><figure class="nd kn nj nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/62f1f0f3b0817ca6009dd4dd5d3debb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*-o-CGpkQTJJP0PLoLIPbnQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk nk di nl nm translated">作者截图</p></figure></div><p id="24c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码片段中，您可能会注意到三件重要的事情。</p><ul class=""><li id="d473" class="nn no it lb b lc ld lf lg li np lm nq lq nr lu ns nt nu nv bi translated"><code class="fe mz na nb nc b">link</code>标签定义了一个外部样式表。在我们的例子中，我们使用PyScript提供的<code class="fe mz na nb nc b">css</code>文件。</li><li id="5954" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">我们使用<code class="fe mz na nb nc b">script</code>标签来嵌入由<code class="fe mz na nb nc b">src</code>定义的PyScript上托管的外部脚本。我们使用<code class="fe mz na nb nc b">defer</code>,这样脚本在下载后执行，页面完成解析——本质上是延迟执行，而不是实时执行。</li><li id="6f65" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">最有趣的部分是<code class="fe mz na nb nc b">py-script</code>标签。如你所见，<code class="fe mz na nb nc b">print(“Hello, World!”)</code>是Python代码。当我们执行HTML文件时，我们看到代码的评估结果。</li></ul><p id="f8c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这很酷，不是吗？如果你不熟悉web开发，但是你知道Python，使用PyScript，你可以嵌入任何有效的Python代码。让我们再看一个例子。</p><div class="kj kk kl km gt ab cb"><figure class="nd kn ob nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/256e28db947955d22d1fd8285bc539c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*hTQJ-u8frnwXwTJ70wMbzw.png"/></div></figure><figure class="nd kn oc nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/1fb4010f212e0e96abdebc2f1fac72da.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*we8RC77xbYOv7PhbUhsuTA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk od di oe nm translated">另一个PyScript示例(图片由作者提供)</p></figure></div><p id="a9e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们编写了一些需要计算的代码，正如您所看到的，脚本得到了正确的执行。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a77c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">py-env标签</h1><p id="b01a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">当我们编写更复杂的代码时，我们需要使用第三方库。在这种情况下，我们可以利用<code class="fe mz na nb nc b">py-env</code>标签。你可能已经猜到了，env是环境的简称。在<code class="fe mz na nb nc b">py-env</code>标签中，您列出了运行代码所需的Python包。</p><p id="22a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能知道许多数据科学家使用熊猫进行数据处理工作。让我们看看下面的例子。</p><div class="kj kk kl km gt ab cb"><figure class="nd kn of nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/bcc46264c19eeedd82246860648ad0e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*Ks6P5A1QQXjIJ1hfXFUQbg.png"/></div></figure><figure class="nd kn og nf ng nh ni paragraph-image"><img src="../Images/fa2b80e3837568ad3871bbf9a5a789aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*UY2FeFzUnDgmGo2R6efRiw.png"/><p class="ku kv gj gh gi kw kx bd b be z dk oh di oi nm translated">使用包的PyScript(图片由作者提供)</p></figure></div><p id="3129" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您在上面看到的，我们在<code class="fe mz na nb nc b">py-env</code>标签中指定了依赖项(即熊猫),该标签放在<code class="fe mz na nb nc b">head</code>标签中。如果您的页面需要更多依赖项，您可以在此列出所有依赖项:</p><pre class="kj kk kl km gt oj nc ok ol aw om bi"><span id="69eb" class="on md it nc b gy oo op l oq or">&lt;py-env&gt;<br/>  - pandas<br/>  - matplotlib<br/>  - numpy<br/>&lt;/py-env&gt;</span></pre><p id="6926" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe mz na nb nc b">py-script</code>标签中，你可以看到我们确实可以使用pandas库来创建一个<code class="fe mz na nb nc b">DataFrame</code>对象。然而，当我们打印它时，它是单行而不是结构化的数据表。没有适当的结构，我们就无法理解这些数据。幸运的是，我们可以使用<code class="fe mz na nb nc b">write</code>函数，如下所述。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c506" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">将内容写入指定的标签</h1><p id="ed57" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">除了Python中的标准<code class="fe mz na nb nc b">print</code>函数之外，作为脚本的一部分，PyScript还有自己的函数<code class="fe mz na nb nc b">write</code>将数据发送到页面上指定的web元素中。考虑下面的例子:</p><div class="kj kk kl km gt ab cb"><figure class="nd kn os nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/8f8dc55a7fddbbfbcc5f3c466d994ba1.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/format:webp/1*71QPe6SC1aVoQgQPe2svOQ.png"/></div></figure><figure class="nd kn ot nf ng nh ni paragraph-image"><img src="../Images/9f022674e79484051f8cef818501403c.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*IfW0GGv5grPCpBXYmFk8iA.png"/><p class="ku kv gj gh gi kw kx bd b be z dk ou di ov nm translated">PyScript编写(图片由作者提供)</p></figure></div><p id="d4fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码片段中，与前面的示例相比，有两个显著的变化。</p><ul class=""><li id="7bae" class="nn no it lb b lc ld lf lg li np lm nq lq nr lu ns nt nu nv bi translated">我们现在定义一个id为<code class="fe mz na nb nc b">“DataFrame”</code>的分部，这样它可以在以后被引用。</li><li id="cf0e" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">在py-script标记中，我们创建了与前面相同的DataFrame对象。但是现在，我们不是调用<code class="fe mz na nb nc b">print</code>，而是调用<code class="fe mz na nb nc b">pyscript.write</code>函数来请求PyScript处理在<code class="fe mz na nb nc b">“DataFrame”</code>部分显示<code class="fe mz na nb nc b">DataFrame</code>对象。从输出中，您可以看到我们现在有了一个结构化的表。</li></ul><p id="25e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">write</code>函数不仅能写表格，还能写数字。下面的例子向您展示了我们如何使用另一个流行的Python数据可视化包<code class="fe mz na nb nc b">matplotlib</code>来显示Python创建的绘图。</p><div class="kj kk kl km gt ab cb"><figure class="nd kn ow nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/ef5a08c3262a5948436342fd189b8f48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*e0MwKNN9CVJQMstPHcKi8g.png"/></div></figure><figure class="nd kn ox nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/b6996b5522f37028c92f44a2982cf962.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*hBH2DPfb_IeEAClPyDn7Xg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk oy di oz nm translated">PyScript编写情节(图片由作者提供)</p></figure></div><p id="eb7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，<code class="fe mz na nb nc b">write</code>功能以期望的方式显示图像。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0011" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">py-repl标签</h1><p id="1b42" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">学习Python的最好方法之一是使用REPL:读取、评估、打印和循环。也就是说，您使用交互式Python控制台，键入一些代码，Python对其进行评估并打印任何适用的输出，然后继续循环。一个网页可以提供这样的REPL环境，如Jupyter笔记本。</p><p id="9668" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PyScript可以使用<code class="fe mz na nb nc b">py-repl</code>标签提供类似的功能。在这个元素中，您可以允许用户自己编写代码，也可以通过编程方式输入代码。请看下面的例子:</p><div class="kj kk kl km gt ab cb"><figure class="nd kn pa nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/60987f6d49e7d2e2e5d959cd5de66677.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*eovaFhOuFDYQdEdU1YXKLA.png"/></div></figure><figure class="nd kn pb nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/a329d151d02f5c1a5cd8e732c9ecc9da.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*U60jcxfxlY-DKrP4gYDVIQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk pc di pd nm translated">PyScript REPL(图片由作者提供)</p></figure></div><p id="00ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，我们有一个单元格，其中包含了我们在<code class="fe mz na nb nc b">py-repl</code>标签中指定的代码。值得注意的是，单元格中的代码可以引用我们之前在<code class="fe mz na nb nc b">py-script</code>标签中定义的变量。因此，一切似乎都协调一致。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2ddf" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">最后的想法</h1><p id="4b1a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这些只是PyScript在这个阶段必须提供的主要亮点。它似乎是一个有前途的产品，因为它提供了一个灵活的框架，允许Python程序员在没有太多web开发知识的情况下制作web应用程序。然而，也有类似的成功产品，因此竞争会很激烈。</p><p id="d24f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我需要为我的数据科学项目制作一个web应用程序，我会使用Streamlit，它在功能方面已经相对成熟。请注意，PyScript和Streamlit是不同系列的产品，尽管两者都与web开发有关。PyScript应该更加通用，因为它的目标是你可以在任何网页上嵌入任何Python代码，这是Streamlit做不到的。</p><p id="1ca8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PyScript在得到更好的接收之前有一些缺点必须解决。比如网页的加载速度很慢。如果您尝试按照本教程运行代码，您可能会注意到在网页能够正确显示之前会有明显的延迟。</p><p id="317b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管如此，我期待这个产品继续成长，我的信心主要来自它的开发者——Anaconda团队，他们给我们带来了精彩的Anaconda工具。</p></div></div>    
</body>
</html>