<html>
<head>
<title>The Pros and Cons of Monorepos, Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Monorepos的利弊，解释说</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-pros-and-cons-monorepos-explained-f86c998392e1?source=collection_archive---------3-----------------------#2020-09-23">https://betterprogramming.pub/the-pros-and-cons-monorepos-explained-f86c998392e1?source=collection_archive---------3-----------------------#2020-09-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5487" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">您应该将所有代码保存在一个目录中吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/1131536b2915c6aab326f1533f0986d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f9EDGcaI_e1S8IqB2UYjAA.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片来自<a class="ae ku" href="https://engineering.brigad.co/react-native-monorepos-code-sharing-f6c08172b417" rel="noopener ugc nofollow" target="_blank"> Brigad工程博客</a>。</p></figure></div><div class="ab cl kv kw hx kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="im in io ip iq"><h1 id="8492" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">什么是Monorepo？</h1><p id="ff57" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">顾名思义，Monorepo (mono repository)是一种架构模式，其中单个存储库将包含给定项目的所有代码。</p><p id="234a" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">换句话说，一个回购中可以有几个应用。你可以有一个网站代码库，手机app代码库等。在一次回购中。或者，您也可以有一个包含复杂应用程序的几个不同模块的单个repo，其中每个模块都是一个独立的应用程序。</p></div><div class="ab cl kv kw hx kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="im in io ip iq"><h1 id="c09b" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">单回购与多回购</h1><p id="afa5" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">正如我之前所说，Monorepo将所有内容保存在一个回购中。另一方面，Multirepo(又名Polyrepo)每个项目有一个存储库。如果有四个项目，就会有四个存储库。</p></div><div class="ab cl kv kw hx kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="im in io ip iq"><h1 id="06cb" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">使用Monorepo的优势</h1><p id="49d9" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">使用Monorepo架构模式有几个优点。让我们来研究一下:</p><ul class=""><li id="4003" class="mv mw it lw b lx mq ma mr md mx mh my ml mz mp na nb nc nd bi translated"><strong class="lw iu">一个事实来源</strong>——我们可以用一个单一的配置来管理所有的项目，而不是让许多存储库拥有自己的配置，这使得管理变得更加容易。</li><li id="d392" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated"><strong class="lw iu">代码重用</strong>——如果有一个公共代码或依赖项必须在不同的项目中使用，我们实际上可以很容易地共享它们。</li><li id="3db1" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated">透明性——它让我们可以看到每个项目中使用的代码。我们将能够在一个地方检查所有的代码。</li><li id="bb4e" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated"><strong class="lw iu">原子变化</strong>——我们可以做一个单独的变化，并在所有的包中反映这些变化，从而使开发更快。</li></ul></div><div class="ab cl kv kw hx kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="im in io ip iq"><h1 id="0c00" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">使用单一回购的缺点</h1><p id="d060" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">有优点的时候，也应该有一些缺点。让我们来看看几个缺点:</p><ul class=""><li id="9703" class="mv mw it lw b lx mq ma mr md mx mh my ml mz mp na nb nc nd bi translated"><strong class="lw iu">无法限制访问</strong> —有权访问回购的每个成员都有权查看所有代码。没有办法限制应用程序的某些部分，这与用户无关。</li><li id="a965" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated"><strong class="lw iu">构建时间长</strong>——由于在一个地方有大量代码，与独立构建单独的项目相比，构建时间要长得多。</li><li id="414b" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated"><strong class="lw iu"> Git性能</strong>——由于整个代码都在一个地方，而且由于许多开发人员提交并一起工作于同一个repo，所以Git会跟踪许多提交。由于提交数量巨大，随着历史的深入，Git的性能会变得很慢。</li></ul></div><div class="ab cl kv kw hx kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="im in io ip iq"><h1 id="825e" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">使用单一回购的公司</h1><p id="efec" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">很多顶级公司都使用单向回购。其中一些包括:</p><ul class=""><li id="0892" class="mv mw it lw b lx mq ma mr md mx mh my ml mz mp na nb nc nd bi translated">谷歌</li><li id="6dc5" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated">脸谱网</li><li id="6e29" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated">微软</li><li id="a6bf" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated">优步</li><li id="30c9" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated">爱彼迎（美国短租平台）</li><li id="bdd9" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated">推特</li></ul></div><div class="ab cl kv kw hx kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="im in io ip iq"><h1 id="c829" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">Monorepo工具</h1><p id="34d0" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">Monorepo工具提供了多种功能，例如引导和链接本地包，构建代码，验证它们，将它们发布到包注册中心，等等。一些最受欢迎的工具有:</p><ul class=""><li id="7c4d" class="mv mw it lw b lx mq ma mr md mx mh my ml mz mp na nb nc nd bi translated">Lerna  — <a class="ae ku" href="https://lerna.js.org" rel="noopener ugc nofollow" target="_blank"> Lerna </a>是一个用于管理带有多个包的JS项目的工具。它建立在纱线上。</li><li id="ad4a" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated"><strong class="lw iu"> Bazel </strong> — <a class="ae ku" href="https://bazel.build" rel="noopener ugc nofollow" target="_blank"> Bazel </a>是谷歌打造的monorepo构建系统。</li><li id="bff9" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated"><strong class="lw iu"> Yarn </strong> — Yarn是一个JS依赖管理工具，也支持通过<a class="ae ku" href="https://classic.yarnpkg.com/en/docs/workspaces/" rel="noopener ugc nofollow" target="_blank">工作区</a>进行monorepos。</li><li id="6d91" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated"><strong class="lw iu"> NX </strong> — <a class="ae ku" href="https://nx.dev" rel="noopener ugc nofollow" target="_blank"> NX </a>是一套用于monorepos的可扩展开发工具。</li><li id="cfe3" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated"><strong class="lw iu">rush js</strong>—<a class="ae ku" href="https://rushjs.io" rel="noopener ugc nofollow" target="_blank">rush js</a>是另一个应该支持monorepos完整生命周期的工具。它是由微软开发的。</li></ul></div><div class="ab cl kv kw hx kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="im in io ip iq"><h1 id="4a03" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">我应该选择这种方法吗？</h1><p id="ff39" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">Monorepos只是一个工具，它有自己的优点和缺点。事实上，与Multirepo相比，这种方法无疑让开发人员的生活变得更加轻松。然而，它仍然有一些问题，我希望这些问题能在将来得到解决。</p><p id="6554" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">我相信我已经解释了一些关于Monorepo的内容，现在，您已经很好地理解了它的工作原理。根据我的观点，你是否应该使用它取决于你正在构建的应用程序。如果有许多共同的依赖项，并且您需要共享代码，这将是一个很好的方法。无论如何，我将把这个答案留给你，因为它完全取决于你的应用程序的需求。</p><p id="19b0" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">我希望这篇文章是有帮助的。感谢阅读！</p></div></div>    
</body>
</html>