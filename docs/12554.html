<html>
<head>
<title>Use Fitness Functions for Evolving Architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用适应度函数进化建筑</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/use-fitness-functions-for-evolving-architecture-a4d6c3f6fda2?source=collection_archive---------11-----------------------#2022-06-13">https://betterprogramming.pub/use-fitness-functions-for-evolving-architecture-a4d6c3f6fda2?source=collection_archive---------11-----------------------#2022-06-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="a6c8" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">用简单的例子介绍适应度函数概念</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/40b82ee58aca8590e121cd84842a32ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*N4FLe6BwW8An8wRx"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">杰森·布里斯科在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="1cd1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在本文中，我将介绍适应度函数的概念，并提供几个简单的例子。在本文结束时，您将了解这些函数的用途。希望你能收集到关于测试项目需求的新想法。</p><h1 id="f269" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">什么是健身功能？</h1><p id="429d" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">适应度函数被用来衡量架构离实现目标有多近。他们引导我们经历系统的进化。</p><p id="2266" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">软件架构考虑诸如性能、可靠性、安全性、可操作性、编码标准等关键需求。</p><p id="f9fe" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，我们可以编写测试或度量来满足所需的标准。考虑一个业务需求，该需求规定所有服务都应该在X毫秒内响应。我们可以编写一个测试来测量响应时间，如果结果大于该值，则测试失败。</p><p id="c7c0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">每个新服务都应该通过这些测试标准。这样，如果开发按照计划进行，我们会不断地得到反馈。</p><h1 id="6a32" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">什么时候使用健身功能？</h1><p id="87af" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">我们的目标应该是在软件开发的早期阶段确定适应度函数。你的产品最重要的标准是什么？通常，涉众和业务分析师提供规范。根据行业不同，要求也不同。例如，银行业的稳定表现和安全性至关重要。</p><p id="0dd5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">架构标准不断发展。适应度函数有助于将复杂的系统分解成更小的部分。这样，在早期阶段对软件进行任何更改并识别任何问题会更安全。</p><h1 id="2e9a" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">适应度函数示例和工具</h1><p id="28e0" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">从关键人物那里收集必要的标准后，将它们集成到测试框架中。考虑将测试合并到CI/CD管道流程中。</p><p id="9eb9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您可能熟悉确保代码质量得到满足的单元测试。让我们涵盖其他非功能性需求，比如可伸缩性、性能和其他架构方面。</p><h2 id="fa0f" class="mt lx iu bd ly mu mv dn mc mw mx dp mg lj my mz mi ln na nb mk lr nc nd mm ne bi translated">架构约束测试</h2><p id="4d59" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">让我们编写一个测试来验证架构约束。</p><p id="c6ae" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">考虑在技术架构级别定义的适应度函数，以控制组件之间的依赖关系。比如对于Java，有一个工具叫做<a class="ae kz" href="https://www.archunit.org/" rel="noopener ugc nofollow" target="_blank"> ArchUnit </a>。它分析包和类、层和片之间的依赖关系，检查循环依赖关系，等等。</p><p id="566e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这些测试可以作为JUnit测试运行。它们防止开发人员违反架构设计原则。如果有人不小心提交了不符合规范的代码，构建就会失败，开发人员会及时发现问题。</p><p id="2ea9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，让我们验证控制器类应该只调用安全方法:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nf ng l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">使用ArchUnit进行控制器测试，摘录自<a class="ae kz" href="https://github.com/TNG/ArchUnit/blob/main/archunit-example/example-junit5/src/test/java/com/tngtech/archunit/exampletest/junit5/ControllerRulesTest.java" rel="noopener ugc nofollow" target="_blank">https://github . com/TNG/arch unit/blob/main/arch unit-example/example-JUnit 5/src/test/Java/com/tngtech/arch unit/example test/JUnit 5/controllerrulestest . Java</a></p></figure><h2 id="84cd" class="mt lx iu bd ly mu mv dn mc mw mx dp mg lj my mz mi ln na nb mk lr nc nd mm ne bi translated">架构设计测试</h2><p id="3276" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">如果您正在应用<a class="ae kz" href="https://en.wikipedia.org/wiki/Multitier_architecture" rel="noopener ugc nofollow" target="_blank">分层软件架构</a>，您可以添加ArchUnit测试来确保设计不被破坏:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nf ng l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">分层架构测试，摘自<a class="ae kz" href="https://github.com/TNG/ArchUnit/blob/main/archunit-example/example-junit5/src/test/java/com/tngtech/archunit/exampletest/junit5/LayeredArchitectureTest.java" rel="noopener ugc nofollow" target="_blank">https://github . com/TNG/arch unit/blob/main/arch unit-example/example-JUnit 5/src/test/Java/com/tngtech/arch unit/example test/JUnit 5/layeredacturetest . Java</a></p></figure><p id="946e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">该测试确保只有允许的层才能访问指定的层。</p><h2 id="a6db" class="mt lx iu bd ly mu mv dn mc mw mx dp mg lj my mz mi ln na nb mk lr nc nd mm ne bi translated">架构和操作测试</h2><p id="1e3d" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">您还可以度量体系结构和操作质量的组合。对于云环境，有一个工具叫做<a class="ae kz" href="https://github.com/netflix/chaosmonkey" rel="noopener ugc nofollow" target="_blank">混沌猴</a>。网飞的工程师发明了它来测试AWS的弹性。</p><p id="16c1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">它随机地制造混乱——延迟增加，进程终止，等等。故障的暴露确保了开发人员使服务对实例故障具有弹性。如果你想了解更多关于混沌工具的知识，可以看看我关于混沌网格的相关文章:</p><div class="nh ni gq gs nj nk"><a rel="noopener  ugc nofollow" target="_blank" href="/ensure-a-stable-production-environment-with-chaos-mesh-54057773d582"><div class="nl ab fp"><div class="nm ab nn cl cj no"><h2 class="bd iv gz z fq np fs ft nq fv fx it bi translated">用混沌网确保稳定的生产环境</h2><div class="nr l"><h3 class="bd b gz z fq np fs ft nq fv fx dk translated">介绍混沌网格，一个强大的混沌工程工具</h3></div><div class="ns l"><p class="bd b dl z fq np fs ft nq fv fx dk translated">better编程. pub</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny kt nk"/></div></div></a></div><h2 id="52af" class="mt lx iu bd ly mu mv dn mc mw mx dp mg lj my mz mi ln na nb mk lr nc nd mm ne bi translated">安全测试</h2><p id="b9fe" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">为了安全，您可以使用静态应用程序安全测试(SAST)或图像扫描工具。您可以防止使用具有已知漏洞的容器映像。例如，<a class="ae kz" href="https://jfrog.com/xray/" rel="noopener ugc nofollow" target="_blank"> JFrog Xray </a>这样的工具会递归扫描容器中的所有层。</p><h1 id="c3c6" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">结论</h1><p id="8846" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">具有适应性功能可确保软件符合所需的架构标准。通过将软件分解成更小的单元，更容易实现新的变化。适应度函数不断地提供关于开发过程的反馈。</p><p id="ea30" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我希望你今天学到了一些新东西。感谢您的阅读，祝您编码愉快！</p></div></div>    
</body>
</html>