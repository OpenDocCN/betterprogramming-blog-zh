<html>
<head>
<title>How To Deploy Helm Charts With Terraform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Terraform部署舵图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-deploy-helm-charts-with-terraform-2b0a9bbb187e?source=collection_archive---------1-----------------------#2021-05-01">https://betterprogramming.pub/how-to-deploy-helm-charts-with-terraform-2b0a9bbb187e?source=collection_archive---------1-----------------------#2021-05-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ee9b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你知道你可以像其他地形资源一样部署头盔图表吗？在这个Terraform教程中边做边学！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3fb802771f3d477e96698565ca590e36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*C7kwv3ZpOWo2Y4Kt"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">马特·阿特兹 / <a class="ae kv" href="https://unsplash.com/?utm_source=ghost&amp;utm_medium=referral&amp;utm_campaign=api-credit" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>摄影</p></figure><p id="79a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">今天，我们将了解如何使用Helm部署软件组件。这将允许您以代码的形式管理Kubernetes之上的应用程序。您将能够在您的云原生基础设施中端到端地使用Terraform。</p><p id="7bc2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本Terraform教程主要关注以下几点:</p><ul class=""><li id="ecc1" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">快速回顾什么是地形和头盔。</li><li id="746d" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">官方头盔供应商介绍</li><li id="404f" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">边做边学——使用<a class="ae kv" href="https://prometheus.io/" rel="noopener ugc nofollow" target="_blank"> Prometheus </a>和<a class="ae kv" href="https://grafana.com/" rel="noopener ugc nofollow" target="_blank"> Grafana </a>部署现代监控基础设施</li></ul><p id="3024" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">准备好了吗？用头盔和地形在库伯内特斯上部署！</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="f57a" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">什么是Terraform？</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/7e870432350cefe8501042c0c71a0295.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4A-VdOBmCm5H5uGV.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来自https://www.terraform.io/<a class="ae kv" href="https://www.terraform.io/" rel="noopener ugc nofollow" target="_blank">的Terraform标志</a></p></figure><p id="4cf3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Terraform是DevOps生态系统中一个众所周知的工具。它允许你用代码描述你的整个基础设施。这个过程被称为基础设施代码(<em class="ng"> IaC </em>):</p><blockquote class="nh ni nj"><p id="5a4d" class="kw kx ng ky b kz la jr lb lc ld ju le nk lg lh li nl lk ll lm nm lo lp lq lr ij bi translated">IaC是通过机器可读的定义文件，而不是物理硬件配置或交互式配置工具来管理和调配计算机数据中心的过程</p></blockquote><p id="39c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Terraform可以管理来自许多不同云提供商或服务的资源。您编写代码，Terraform将其翻译成对目标的API调用。它还将确定资源的关系和创建顺序。</p><p id="991d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Terraform还在状态文件中跟踪基础设施的状态。这个文件允许Terraform将现有的基础设施与您的代码进行比较。知道了Terraform决定为同步创建/更新/删除哪些资源。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="bee2" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">什么是头盔？</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/3be6befc94bdf9948ae05c7ba77724c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*qWNlMJ7hdZHBmrfk4XAEbw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来自<a class="ae kv" href="https://helm.sh" rel="noopener ugc nofollow" target="_blank"> https://helm.sh </a>的Helm logo</p></figure><p id="73f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Helm是一个包管理工具，用于在Kubernetes集群中部署应用程序。Linux发行版中的YUM和APT命令也管理包。Helm也做同样的事情，但是是针对Kubernetes上的软件。在Helm术语中，包是一张图表。</p><p id="d9f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Helm charts帮助您定义、安装和更新Kubernetes应用程序。这里就不一一考察赫尔姆的所有信息了。但是，我邀请你查阅这个头盔教程，以便更熟悉它:</p><div class="no np gp gr nq nr"><a rel="noopener  ugc nofollow" target="_blank" href="/what-is-helm-a-quickstart-tutorial-for-kubernetes-beginners-24fecce1b0eb"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">什么是头盔？Kubernetes初学者快速入门教程</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">教你如何处理应用程序包，升级和回滚</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">better编程. pub</p></div></div><div class="oa l"><div class="ob l oc od oe oa of kp nr"/></div></div></a></div></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="be83" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">Terraform头盔提供商</h1><p id="c68d" class="pw-post-body-paragraph kw kx iq ky b kz og jr lb lc oh ju le lf oi lh li lj oj ll lm ln ok lp lq lr ij bi translated">Terraform提供商允许用户管理各种外部API:云提供商、数据库和服务。下图显示了提供商如何与Terraform核心和目标API进行交互:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/de9571a9853ae89e5955d52a00ec4598.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LspJvsd4rBwE4zbT.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">平台提供商是如何工作的</p></figure><p id="0434" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Terraform提供商使用Golang客户端库进行通信。在您这边，您必须在Terraform代码中声明提供者。然后，您将能够定义资源并获取远程数据。</p><p id="6382" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">维护Terraform的公司Hashicorp为Helm分配了一个提供商。在本文的下一篇文章中，我们将使用<a class="ae kv" href="https://registry.terraform.io/providers/hashicorp/helm/latest/docs" rel="noopener ugc nofollow" target="_blank">舵提供程序</a>来部署舵图表。该提供程序需要在您的机器上安装Terraform和Helm二进制文件才能工作。</p><h2 id="c6a0" class="ol mo iq bd mp om on dn mt oo op dp mx lf oq or mz lj os ot nb ln ou ov nd ow bi translated">安装Terraform</h2><pre class="kg kh ki kj gt ox oy oz pa aw pb bi"><span id="42eb" class="ol mo iq oy b gy pc pd l pe pf">$ brew install terraform</span></pre><blockquote class="nh ni nj"><p id="24c1" class="kw kx ng ky b kz la jr lb lc ld ju le nk lg lh li nl lk ll lm nm lo lp lq lr ij bi translated">不在Mac上工作？查看<a class="ae kv" href="https://www.terraform.io/downloads" rel="noopener ugc nofollow" target="_blank"> Terraform下载</a></p></blockquote><h2 id="8a43" class="ol mo iq bd mp om on dn mt oo op dp mx lf oq or mz lj os ot nb ln ou ov nd ow bi translated">安装舵</h2><pre class="kg kh ki kj gt ox oy oz pa aw pb bi"><span id="1990" class="ol mo iq oy b gy pc pd l pe pf">$ brew install helm</span></pre><blockquote class="nh ni nj"><p id="91e7" class="kw kx ng ky b kz la jr lb lc ld ju le nk lg lh li nl lk ll lm nm lo lp lq lr ij bi translated">不在Mac上工作？查看<a class="ae kv" href="https://github.com/helm/helm/releases" rel="noopener ugc nofollow" target="_blank">头盔下载</a></p></blockquote><h2 id="99bd" class="ol mo iq bd mp om on dn mt oo op dp mx lf oq or mz lj os ot nb ln ou ov nd ow bi translated">声明舵供应商</h2><p id="c4f0" class="pw-post-body-paragraph kw kx iq ky b kz og jr lb lc oh ju le lf oi lh li lj oj ll lm ln ok lp lq lr ij bi translated">您还需要提供正确的凭证来连接到Kubernetes集群。很多选择都是可能的。最简单的方法是指定kubeconfig路径:</p><pre class="kg kh ki kj gt ox oy oz pa aw pb bi"><span id="116c" class="ol mo iq oy b gy pc pd l pe pf">provider "helm" {<br/>  kubernetes {<br/>    config_path = "~/.kube/config"<br/>  }<br/>}</span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="1831" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">使用Helm+Terraform部署监控基础设施</h1><p id="be7d" class="pw-post-body-paragraph kw kx iq ky b kz og jr lb lc oh ju le lf oi lh li lj oj ll lm ln ok lp lq lr ij bi translated">在GitHub资源库中检索本教程的完整代码:</p><div class="no np gp gr nq nr"><a href="https://github.com/guivin/terraform-helm-example/tree/0.1.0" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">GitHub-guivin/terra form-helm-0 . 1 . 0版示例</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">这个库展示了如何使用官方Helm提供者将Helm与Terraform结合使用。这将部署一个监控…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">github.com</p></div></div><div class="oa l"><div class="pg l oc od oe oa of kp nr"/></div></div></a></div><h2 id="3036" class="ol mo iq bd mp om on dn mt oo op dp mx lf oq or mz lj os ot nb ln ou ov nd ow bi translated">地形变量</h2><p id="203e" class="pw-post-body-paragraph kw kx iq ky b kz og jr lb lc oh ju le lf oi lh li lj oj ll lm ln ok lp lq lr ij bi translated">Terraform变量有助于避免重复值:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ph pi l"/></div></figure><ul class=""><li id="ca1d" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><code class="fe pj pk pl oy b">kube_config</code>是kubeconfig文件的路径。它将用于连接到Kubernetes集群。</li><li id="872b" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><code class="fe pj pk pl oy b">namespace</code>是格拉夫纳和普罗米修斯将带着头盔部署的逻辑地点。</li></ul><h2 id="9fc9" class="ol mo iq bd mp om on dn mt oo op dp mx lf oq or mz lj os ot nb ln ou ov nd ow bi translated">Kubernetes &amp;头盔供应商</h2><p id="44bd" class="pw-post-body-paragraph kw kx iq ky b kz og jr lb lc oh ju le lf oi lh li lj oj ll lm ln ok lp lq lr ij bi translated">我们将管理Kubernetes的资源，并用Terraform掌舵。我们宣布<a class="ae kv" href="https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs" rel="noopener ugc nofollow" target="_blank"> Kubernetes提供者</a>和Helm提供者继续进行:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ph pi l"/></div></figure><h2 id="a337" class="ol mo iq bd mp om on dn mt oo op dp mx lf oq or mz lj os ot nb ln ou ov nd ow bi translated">Kubernetes名称空间</h2><p id="ca6f" class="pw-post-body-paragraph kw kx iq ky b kz og jr lb lc oh ju le lf oi lh li lj oj ll lm ln ok lp lq lr ij bi translated">Kubernetes中的名称空间是用于部署的逻辑隔离。我们为新的监控组件创建了一个<code class="fe pj pk pl oy b">monitoring</code>名称空间:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ph pi l"/></div></figure><h2 id="6c38" class="ol mo iq bd mp om on dn mt oo op dp mx lf oq or mz lj os ot nb ln ou ov nd ow bi translated">普罗米修斯头盔释放</h2><p id="dea5" class="pw-post-body-paragraph kw kx iq ky b kz og jr lb lc oh ju le lf oi lh li lj oj ll lm ln ok lp lq lr ij bi translated"><a class="ae kv" href="https://registry.terraform.io/providers/hashicorp/helm/latest/docs/resources/release" rel="noopener ugc nofollow" target="_blank"> helm_release </a>是来自helm提供者的地形资源。它允许您发布一个舵图，并使用Terraform对其进行自定义。您可以用<code class="fe pj pk pl oy b">set</code>块覆盖原始<code class="fe pj pk pl oy b">values.yaml</code>的默认设置:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ph pi l"/></div></figure><h2 id="2231" class="ol mo iq bd mp om on dn mt oo op dp mx lf oq or mz lj os ot nb ln ou ov nd ow bi translated">格拉夫纳头盔释放</h2><p id="89e7" class="pw-post-body-paragraph kw kx iq ky b kz og jr lb lc oh ju le lf oi lh li lj oj ll lm ln ok lp lq lr ij bi translated">值可以通过文件传递给<code class="fe pj pk pl oy b">helm_release</code>资源:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ph pi l"/></div></figure><p id="c8c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码片段定义了访问Grafana的Kubernetes秘密。凭证是由Terraform生成的随机密码。<code class="fe pj pk pl oy b">values.yaml</code>由Terraform模板化并传递给<code class="fe pj pk pl oy b">helm_release.grafana</code>。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="6c62" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">进入普罗米修斯服务器</h1><p id="0266" class="pw-post-body-paragraph kw kx iq ky b kz og jr lb lc oh ju le lf oi lh li lj oj ll lm ln ok lp lq lr ij bi translated">创建到Prometheus服务器的端口转发会话:</p><pre class="kg kh ki kj gt ox oy oz pa aw pb bi"><span id="5a08" class="ol mo iq oy b gy pc pd l pe pf">$ kubectl port-forward --namespace monitoring svc/prometheus-server 8080:80</span></pre><p id="c7bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">转到<a class="ae kv" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>访问Prometheus UI:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d42180cbbc224665e42ea39e85d75a11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lDuBAD7_dNGBZDRe.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Prometheus服务器web界面</p></figure></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="cb16" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">访问Grafana用户界面</h1><p id="9f96" class="pw-post-body-paragraph kw kx iq ky b kz og jr lb lc oh ju le lf oi lh li lj oj ll lm ln ok lp lq lr ij bi translated">创建到Grafana的端口转发会话:</p><pre class="kg kh ki kj gt ox oy oz pa aw pb bi"><span id="742e" class="ol mo iq oy b gy pc pd l pe pf">$ kubectl port-forward --namespace monitoring svc/grafana 3000:80</span></pre><p id="4a13" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">获取Grafana管理员用户名:</p><pre class="kg kh ki kj gt ox oy oz pa aw pb bi"><span id="99f3" class="ol mo iq oy b gy pc pd l pe pf">$ kubectl get secret --namespace monitoring grafana -o jsonpath="{.data.admin-user}" | base64 --decode</span></pre><p id="7a78" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">获取Grafana管理员密码:</p><pre class="kg kh ki kj gt ox oy oz pa aw pb bi"><span id="f4a8" class="ol mo iq oy b gy pc pd l pe pf">$ kubectl get secret --namespace monitoring grafana -o jsonpath="{.data.admin-password}" | base64 --decode</span></pre><p id="d947" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">转到<a class="ae kv" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>访问Grafana UI。重复使用以前的凭据登录:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pm"><img src="../Images/eda2c2f51a87d56f529669a05995b6fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ud1EDNYefrqwDpBB.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Grafana登录页面</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/eebdb849d0a8831e4a24dc36d3d88368.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*70J91vfF-0P5atgh.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">格拉夫纳主页</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d8ca2835733908111e8a0ca849a7fce8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SwbF09Qjhe6q7eab.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Grafana仪表板</p></figure><p id="3c7a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe pj pk pl oy b">values-grafana.yaml</code>文件中提供了<a class="ae kv" href="https://grafana.com/grafana/dashboards/12006" rel="noopener ugc nofollow" target="_blank"> Kubernetes API服务器仪表板</a>。仪表板在Grafana UI中可见:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/dad2b8a4df107d634e62facf0f9a3dc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FP1OEiR1f0e_DztZ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Kubernetes API服务器Grafana仪表板</p></figure></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="2a4c" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">结论</h1><p id="5c5c" class="pw-post-body-paragraph kw kx iq ky b kz og jr lb lc oh ju le lf oi lh li lj oj ll lm ln ok lp lq lr ij bi translated">我们在本教程中发现了如何使用Terraform和头盔与官方头盔供应商。掌舵图通过<code class="fe pj pk pl oy b">helm_release</code>资源调用。可以使用<code class="fe pj pk pl oy b">set</code>块或<code class="fe pj pk pl oy b">values.yaml</code>模板定制部署值。</p><p id="e526" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此处的示例使用Prometheus和Grafana部署了完整的监控。堆栈:</p><ul class=""><li id="869e" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">普罗米修斯收集集群指标</li><li id="2cb1" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">Grafana允许我们在漂亮的仪表板上可视化指标</li></ul><p id="5241" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将Terraform与Helm相结合是非常好的，因为您可以将Helm chart部署和依赖项与所有基础架构组件协调起来。舵图最终被认为是任何其他类型的资源。</p></div></div>    
</body>
</html>