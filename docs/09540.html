<html>
<head>
<title>How To Handle Your JavaScript Errors Like a Pro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何像专家一样处理JavaScript错误</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-handle-your-javascript-errors-like-a-pro-d947c1c09fbc?source=collection_archive---------4-----------------------#2021-09-07">https://betterprogramming.pub/how-to-handle-your-javascript-errors-like-a-pro-d947c1c09fbc?source=collection_archive---------4-----------------------#2021-09-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e9c9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">理解JavaScript中错误处理的快速指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/cb1da06d61e9c2bc0340bd66aea5201e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ulFhbFH_HljmHkQ5"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@radya?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拉迪克·西蒂科夫</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="fa27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">错误处理是除if-else和循环之外的另一种形式的控制结构。</p><p id="4034" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在JavaScript中，总是很难避免所有的错误。除了bug、逻辑错误或语法错误之外，作为开发人员，您还可能面临一些无法控制的错误。</p><p id="f15f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，用户输入错误。用户输入的电子邮件没有“@”字符，这应该是无效的。错误的另一个例子可以是网络错误。您可以与服务器通信，但该服务器可能处于脱机状态。</p><p id="bdfa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这两个例子中，你无法控制局面。但是，您可以限制用户选项。你可以说没有放“@”字符，邮箱是无效的。对于服务器示例，您需要抛出错误并捕获错误，以便优雅地失败。您还可以向用户显示解释性错误消息或一些回退代码来恢复您的代码。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="ec6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您接受来自用户的输入，如下所示:</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="9098" class="mh mi it md b gy mj mk l ml mm">const userInput = prompt(“Enter your lucky number”);<br/>let luckyNumber = parseInt(luckyNumber);</span></pre><p id="8e9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，<code class="fe mn mo mp md b">parseInt()</code>可能有问题。用户可以输入一些值，而不是输入类似于<code class="fe mn mo mp md b">"qwerty123"</code>的值。在这种情况下，<code class="fe mn mo mp md b">parseInt()</code>将在您的JavaScript代码中返回<code class="fe mn mo mp md b">NaN</code>。您可能希望使用if-else语句来处理此错误。</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="65ae" class="mh mi it md b gy mj mk l ml mm">if(isNan(luckyNumber) || luckyNumber &lt;=0){<br/>  luckyNumber = Math.floor(Math.random() * 101);<br/>}</span></pre><p id="648d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，为了处理您的代码，您也可以引发如下所示的错误:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">要旨由<a class="ae ky" href="https://medium.com/@onurinanc" rel="noopener">作者</a></p></figure><h1 id="c43c" class="ms mi it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">你怎么能抛出你的自定义错误？</h1><p id="0b1f" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">当您的项目越来越大时，您需要温和地处理错误。如果你抛出类似<code class="fe mn mo mp md b">"There is an Error"</code>的错误信息，你将很难理解项目中错误的真正含义。</p><p id="0054" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，如果您针对不同的情况定制您的错误，那将是最好的。这样做将有助于您轻松处理错误。例如，如果您从事网络操作，您可能需要<code class="fe mn mo mp md b">HttpError</code>，数据库操作<code class="fe mn mo mp md b">DatabaseError</code>，以及搜索操作<code class="fe mn mo mp md b">NotFoundError</code>。</p><p id="8113" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要创建您的特殊错误类，您可以从JavaScript内置错误类扩展它们。下面是JavaScript定义的<code class="fe mn mo mp md b">Error</code>类:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://medium.com/@onurinanc" rel="noopener">作者的要旨</a></p></figure><p id="c0be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以扩展它，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者简介<a class="ae ky" href="https://medium.com/@onurinanc" rel="noopener"/></p></figure><p id="6087" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，由于<code class="fe mn mo mp md b">ValidationError</code>是通用的，您可以将其扩展到<code class="fe mn mo mp md b">PropertyRequiredError</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://medium.com/@onurinanc" rel="noopener">作者的要旨</a></p></figure><h1 id="527a" class="ms mi it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">使用Try-Catch处理错误</h1><p id="7fb7" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">使用try-catch控制结构，您可以尝试可能失败的代码，并捕获代码中引发的潜在错误。</p><p id="a3d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将所有代码文件放在一个<code class="fe mn mo mp md b">try</code>块中是一个糟糕的想法。如果是这样，你的代码看起来会很糟糕，代码的性能也会降低。相反，您可以调试您的逻辑错误。如果您只想将代码移动到一个<code class="fe mn mo mp md b">try</code>块中，而您无法控制它是否会抛出错误，这将是最好的，就像上面的例子一样。</p><p id="1286" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，您可以将<code class="fe mn mo mp md b">getLuckyNumber</code>放入try-catch块中。这种控制结构的思想是，如果try块被执行，那么catch块将不会被执行。所以，如果没有任何错误，catch块将不起作用。此外，如果try块不起作用，将执行catch块。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">要旨由<a class="ae ky" href="https://medium.com/@onurinanc" rel="noopener">作者</a></p></figure><p id="dd58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，如果用户输入一个不完全是数字的值，上面的<code class="fe mn mo mp md b">catch</code>块将被执行，并且<code class="fe mn mo mp md b">luckyNumber</code>将等于0到100之间的一个随机数。然后，剩下的代码就可以工作了。</p><p id="fc01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，这一招并不总是奏效。有时，您最多只能显示一条错误消息。例如，如果一个服务器离线，而你想在一个服务器上保存数据，这是行不通的。</p><p id="c483" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如你在上面读到的，你可以抛出你的自定义错误。现在，您可以在一个try-catch块中测试它。假设您有一个读取JSON数据并创建<code class="fe mn mo mp md b">car</code>的函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">要旨由<a class="ae ky" href="https://medium.com/@onurinanc" rel="noopener">作者</a></p></figure><p id="3892" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在try-catch块中处理此错误，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">要旨由<a class="ae ky" href="https://medium.com/@onurinanc" rel="noopener">作者</a></p></figure><h1 id="7922" class="ms mi it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated"><strong class="ak">终于</strong></h1><p id="ea09" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">另一个错误处理模块是<code class="fe mn mo mp md b">finally</code>。在<code class="fe mn mo mp md b">try-catch</code>之后可以用<code class="fe mn mo mp md b">finally</code>。也可以在<code class="fe mn mo mp md b">try</code> <strong class="lb iu"> </strong>块后使用。不管你有没有错误，里面的代码最终都会被执行。</p><p id="54aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在大多数情况下，你不需要<code class="fe mn mo mp md b">finally</code>，因为你有一个好的后备，就像上面的例子。有一些用例。例如，您可以使用finally块来清理代码，如关闭连接、关闭文件或释放线程。</p><p id="3192" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，请记住，总是执行<code class="fe mn mo mp md b">finally</code> <strong class="lb iu"> </strong>块。</p><h1 id="e840" class="ms mi it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">结论</h1><p id="f4ce" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">错误处理是专业开发人员的必备技能。当项目变大时，处理错误变得更加重要。如果您只抛出消息“错误”，您可能不知道会遇到什么样的错误</p><p id="f489" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，在某些情况下，您可能会使用if-else块来掩盖错误。但是，在某些情况下，您需要捕捉错误，比如使用网络连接。</p><p id="a0dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是处理JavaScript错误的一些建议:</p><ul class=""><li id="7876" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated">抛出错误消息以了解错误的类型</li><li id="5de3" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">有效使用<code class="fe mn mo mp md b">try-catch</code></li><li id="9da8" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">您可以使用<code class="fe mn mo mp md b">finally</code>来清理代码，因为<code class="fe mn mo mp md b">finally</code> <strong class="lb iu"> </strong>块总是被执行</li><li id="c550" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">创建您的自定义错误类</li><li id="127b" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">您可以从内置的JavaScript <code class="fe mn mo mp md b">Error</code>类扩展定制的错误类</li></ul></div></div>    
</body>
</html>