# 抱歉，If-Else 语句一点也不差

> 原文：<https://betterprogramming.pub/sorry-if-else-statements-arent-bad-at-all-472c9841eea>

## 对有争议的“停止使用 X”建议的澄清

![](img/a1d3babac487d40e6dcba30142a63e74.png)

照片由[沃尔坎·奥尔梅斯](https://unsplash.com/@volkanolmez?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄。

最近，我看到一篇编程文章，提出了一个颇具争议的立场，反对使用基本的`if-else`控制流。

我特别要对文章“[停止使用 If-Else 语句](https://medium.com/swlh/stop-using-if-else-statements-f4d2323e6e4)”做出回应，这篇文章从它的(clickbait)标题就提供了一些误导性的编程建议。

随后，我将带您了解开发人员在使用`if-else`语句时会犯的一些常见错误，以及如何修复它们。

# 那篇文章有什么问题？

*   这篇文章宣称`if-else`的言论是邪恶的。它继续展示了最基本的编程控制流的极其错误的用例。
*   作者写的复杂条款不仅工作量太大，而且错误百出。在每一个`if`条件中添加`throw`语句，并在末尾放置一个不必要的`else`块是没有意义的。
*   雪上加霜的是，臃肿的解决方案建议为每一个状态条件创建一个类(带有令人困惑的命名约定)，从而增加了不必要的抽象。
*   为仅仅十行条件逻辑引入 200 多行代码违背了基本的编码原则:保持简单和愚蠢。
*   最终，文章的最终解决方案与其标题相矛盾。它只是通过不把`if-else`条件放在代码的顶层来推迟它的使用。尽管这是一个很好的实践，但在整个故事中甚至没有提到。

可悲的是，这种误导性的标题会在初级程序员的头脑中建立误解。是的，极少数称赞这篇文章的读者是那些刚刚开始编程或者即将开始编程的人。

总之，这篇文章就像一个有明显缺陷的代码。它没有修复问题的根本原因，而是将责任归咎于整个`if-else`范式，展示了一个不完全相同的替代方案，并建议在所有编程解决方案中使用该方案。

# 如何优雅地使用 if-else 语句？

我想声明`if-else`语句并不坏。你使用(或误用)它们的方式会导致混乱的代码。

在编程中没有放之四海而皆准的解决方案。类似地，当使用`if-else`或`else-if`条件时，没有任何不好的做法。

当然，使用`else`语句应该小心，因为很难预测它的范围。如果`if`条款之外的任何条件进入`else`，那可能不是你真正想要的。

如果你强迫自己寻找基本`if-else`流程的变通方法，你只会陷入不必要的样板代码和抽象中。

然而，在一些例子中，我在不同的语言中以错误的方式看到和使用了`if-else`语句。

# 给变量赋值时避免 if-else

很久以前，我确实用 Java 写了类似这样的东西(尽管为了简洁起见，我在下面的例子中使用了 Swift):

```
var num : Int!if someCondition{    
    num = 10
}
else{    
    num = 20
}
```

虽然这看起来并不坏，但您可以轻松地颠倒或调整条件逻辑，赋予它全新的含义。分支逻辑也带来了一点代码重复，因为我们在多个块中分配变量`num`，这是不必要的。

幸运的是，我们可以使用三元运算符，它就像单行中的一个`if-else`语句:

```
num = isCondition ? 10 : 20
```

或者，对于某些用例，您也可以在变量声明时设置默认值，以消除对`else`的使用。

作为一种动态类型语言，Python 要求你在声明时赋值。因此，使用上面的场景是相当明显的:

```
#Python
num = 10 if isCondition else 20
```

# 添加提前退出条件以避免 else 部分

通常，在具有多个`ifs`和`else-ifs`的块中使用`else`是为了处理默认场景和处理错误。

我们一定都写过类似下面这样的代码块:

```
if someBoolean {
   // ...
} else {
  throw Exception("xxxx")
}
```

`else`部分就像一个失败条件，我们可以很容易地将其放在控制流的开始:

```
if !someBoolean{
   throw MyException()
}
```

难怪 Swift 为我们提供了一个`guard let`语句来添加早期故障条件，以防出现任何问题。这对于嵌套的`if`条件来说非常方便。

# 将长条件句提取到函数中

当你处理`if-else`块时，有时需要包含二元操作符的条件语句。`&&`和 `||` 运算符对于处理特定条件和减少嵌套`if`程序块的数量非常有用。

但是它很容易失去控制，变成一种长期的、不可读的状态。

下面看看会发生什么:

```
if a > 0 && isEnabled && b > 10 
{...}
else
{...}
```

您可以根据自己的喜好缩短上面的代码:

*   首先，如果你使用多个不互斥的布尔值，用枚举代替它们。
*   您可以将条件提取到一个单独的函数中，从而使事情更容易理解。

```
func customCondition() -> Bool{
  return a > 0 && isEnabled && b > 10
}
```

现在，简单地在`if`条件中传递上面的函数:

```
if customCondition()
{...}
else 
{...}
```

# 结论

记住，`if-else`语句并不坏，你永远也不能从你的代码库中删除它们。

但是您可以通过确保没有代码重复和保持`if-else`块相互关联(不是相互独立的条件)来使您的生活变得更容易。

这一次到此为止。感谢阅读。