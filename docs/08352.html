<html>
<head>
<title>Develop Helm Charts Like a Pro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像专业人士一样开发舵图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/develop-helm-charts-like-a-pro-a9fea5a33fe5?source=collection_archive---------12-----------------------#2021-04-20">https://betterprogramming.pub/develop-helm-charts-like-a-pro-a9fea5a33fe5?source=collection_archive---------12-----------------------#2021-04-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9ae1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用PyCharm运行配置的强大功能来节省时间</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3782155a328d02ee19526b4eba53c81e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j6YFrpSFROx3Kyv0kfl7fg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">蒂姆·莫斯霍尔德在<a class="ae ky" href="https://unsplash.com/s/photos/gears?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi kz"><img src="../Images/9cb7d2c0998a52f749efcd1365c53045.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9_cliW6g9gihokK1OeQ8xA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PyCharm-CE中的ct lint输出</p></figure></div><div class="ab cl la lb hx lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="im in io ip iq"><h1 id="1727" class="lh li it bd lj lk ll lm ln lo lp lq lr jz ls ka lt kc lu kd lv kf lw kg lx ly bi translated">开发新应用</h1><p id="786e" class="pw-post-body-paragraph lz ma it mb b mc md ju me mf mg jx mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">在为<a class="ae ky" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>开发新应用时，开发人员开始参与<a class="ae ky" href="https://helm.sh/" rel="noopener ugc nofollow" target="_blank"> Helm </a>图表的创建。这可能很乏味，而且每当您更改图表中的语法或间距错误时，您可能会浪费大量时间等待CI管道运行。</p><p id="f699" class="pw-post-body-paragraph lz ma it mb b mc mv ju me mf mw jx mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">由于大多数ide和<a class="ae ky" href="https://www.jetbrains.com/pycharm/download/#section=windows" rel="noopener ugc nofollow" target="_blank"> PyCharm-CE </a>也提供运行配置，所以您可以通过向IDE添加图表项目的模板和lint配置来简化工作。</p><h2 id="75ff" class="na li it bd lj nb nc dn ln nd ne dp lr mi nf ng lt mm nh ni lv mq nj nk lx nl bi translated">舵绒布和模板</h2><p id="ead7" class="pw-post-body-paragraph lz ma it mb b mc md ju me mf mg jx mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">从本地安装或通过Docker运行Helm:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="8595" class="na li it nn b gy nr ns l nt nu">helm lint charts/mychart</span><span id="e8b2" class="na li it nn b gy nv ns l nt nu"># or</span><span id="99f2" class="na li it nn b gy nv ns l nt nu">docker run --rm -i -v $PWD:/workdir --workdir /workdir alpine/helm \<br/>  helm lint charts/mychart<br/></span></pre><p id="12d3" class="pw-post-body-paragraph lz ma it mb b mc mv ju me mf mw jx mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">您还可以用想要使用的值来制作图表模板:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="9807" class="na li it nn b gy nr ns l nt nu">helm template test charts/mychart \<br/>  --values chart/mychart/ci/test-values.yaml</span><span id="e418" class="na li it nn b gy nv ns l nt nu"># or</span><span id="b79f" class="na li it nn b gy nv ns l nt nu">docker run --rm -i -v $PWD:/workdir --workdir /workdir alpine/helm \<br/>  helm template test charts/mychart \<br/>  --values chart/mychart/ci/test-values.yaml</span></pre><p id="0782" class="pw-post-body-paragraph lz ma it mb b mc mv ju me mf mw jx mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><strong class="mb iu">提示:</strong>您还可以向Helm传递一个逗号分隔的<code class="fe nw nx ny nn b">values</code>文件列表。</p><h2 id="5c57" class="na li it bd lj nb nc dn ln nd ne dp lr mi nf ng lt mm nh ni lv mq nj nk lx nl bi translated">图表测试工具</h2><p id="a9fd" class="pw-post-body-paragraph lz ma it mb b mc md ju me mf mg jx mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">与Helm类似，<a class="ae ky" href="https://github.com/helm/chart-testing" rel="noopener ugc nofollow" target="_blank">图表测试</a>应用程序(<code class="fe nw nx ny nn b">ct</code>)打印您的图表，但它也做一些额外的检查，并且是可配置的。它还可以用来测试对Kubernetes集群的部署，这在与<code class="fe nw nx ny nn b">kind</code>一起使用时非常方便。(我在参考资料中链接了下面的一篇文章。)</p><p id="7069" class="pw-post-body-paragraph lz ma it mb b mc mv ju me mf mw jx mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><strong class="mb iu">提示</strong> <em class="nz"> : </em>用<code class="fe nw nx ny nn b">brew install chart-testing</code>安装图表测试。</p><p id="0142" class="pw-post-body-paragraph lz ma it mb b mc mv ju me mf mw jx mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">您可以在本地运行<code class="fe nw nx ny nn b">ct</code>,也可以使用Docker:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="20cd" class="na li it nn b gy nr ns l nt nu">ct lint --all --chart-dirs=charts</span><span id="addf" class="na li it nn b gy nv ns l nt nu"># or</span><span id="59cd" class="na li it nn b gy nv ns l nt nu">docker run --rm -i -v $PWD:/workdir --workdir /workdir \<br/>  quay.io/helmpack/chart-testing ct lint --all --chart-dirs=charts</span></pre><p id="135a" class="pw-post-body-paragraph lz ma it mb b mc mv ju me mf mw jx mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">如果您有一个可以部署的Kubernetes测试集群，您可以使用<code class="fe nw nx ny nn b">ct</code>进行测试部署:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="bc4b" class="na li it nn b gy nr ns l nt nu">ct install --namespace test --all --chart-dirs=charts</span><span id="7c94" class="na li it nn b gy nv ns l nt nu"># or</span><span id="a9e9" class="na li it nn b gy nv ns l nt nu">docker run --rm -i -v $PWD:/workdir --workdir /workdir \<br/>  -v $KUBECONFIG:/root/.kube/config --network host \  <br/>  quay.io/helmpack/chart-testing ct install --namespace test \<br/>  --all --chart-dirs=charts</span></pre><p id="6547" class="pw-post-body-paragraph lz ma it mb b mc mv ju me mf mw jx mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><strong class="mb iu">提示:</strong> <em class="nz"> </em>使用Docker将<strong class="mb iu">而不是</strong>在macOS或Windows上工作，因为Docker不是在主机上本地运行的。但是你可以用<code class="fe nw nx ny nn b">brew install chart-testing</code>轻松安装图表测试。</p></div><div class="ab cl la lb hx lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="im in io ip iq"><h1 id="bd17" class="lh li it bd lj lk ll lm ln lo lp lq lr jz ls ka lt kc lu kd lv kf lw kg lx ly bi translated">运行配置</h1><p id="5eed" class="pw-post-body-paragraph lz ma it mb b mc md ju me mf mg jx mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">在PyCharm中，您可以轻松安装额外的插件来设置您的跑步配置。一个非常有用的插件是<a class="ae ky" href="https://github.com/AVeenstra/RunAnything" rel="noopener ugc nofollow" target="_blank">运行任何东西</a>，因为它允许你运行任何工具或命令。</p><p id="9072" class="pw-post-body-paragraph lz ma it mb b mc mv ju me mf mw jx mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><strong class="mb iu">提示:</strong>用<code class="fe nw nx ny nn b">brew install --cask pycharm-ce</code>安装PyCharm-CE。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/f6975875ef145d625449c8f8be907eeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MTh_g8pDODYNzgsw1bsOnw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PyCharm的run any插件</p></figure><p id="976d" class="pw-post-body-paragraph lz ma it mb b mc mv ju me mf mw jx mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">这样，您可以设置以下运行配置，以便在将图表推送到上游之前快速检查图表。</p><h2 id="b321" class="na li it bd lj nb nc dn ln nd ne dp lr mi nf ng lt mm nh ni lv mq nj nk lx nl bi translated">舵模板运行配置</h2><p id="4ac8" class="pw-post-body-paragraph lz ma it mb b mc md ju me mf mg jx mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">添加上面的<code class="fe nw nx ny nn b">helm template</code>命令，使用或不使用Docker来设置您的运行配置。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/666ed94ec918be7c24b76174e5499451.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SwES55gKKd8VAuYtdrQGJQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PyCharm运行配置:头盔模板</p></figure><h2 id="c720" class="na li it bd lj nb nc dn ln nd ne dp lr mi nf ng lt mm nh ni lv mq nj nk lx nl bi translated">图表测试lint配置</h2><p id="4f8b" class="pw-post-body-paragraph lz ma it mb b mc md ju me mf mg jx mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">添加上面的<code class="fe nw nx ny nn b">ct lint</code>命令来设置您的运行配置。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/99b54e7640e45e62cd68383abba09fc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zRDNeQ-MYFgNFYeVdQFVvw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PyCharm运行配置:ct lint</p></figure><p id="04b8" class="pw-post-body-paragraph lz ma it mb b mc mv ju me mf mw jx mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">你可以用<code class="fe nw nx ny nn b">$PROJECT_DIR$</code>引用你的项目目录。</p><h2 id="847f" class="na li it bd lj nb nc dn ln nd ne dp lr mi nf ng lt mm nh ni lv mq nj nk lx nl bi translated">分享您的跑步配置</h2><p id="96f4" class="pw-post-body-paragraph lz ma it mb b mc md ju me mf mg jx mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">您可以启用复选框来保存项目的运行配置，并与协作者共享它们:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/97919c249da05242cdc61576233ed59d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dc2mEtb2E70IpVRZ-qHedg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">与您的项目共享您的运行配置</p></figure></div><div class="ab cl la lb hx lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="im in io ip iq"><h1 id="944b" class="lh li it bd lj lk ll lm ln lo lp lq lr jz ls ka lt kc lu kd lv kf lw kg lx ly bi translated">资源</h1><div class="oc od gp gr oe of"><a href="https://helm.sh" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">舵</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">Helm是查找、共享和使用为Kubernetes构建的软件的最佳方式。Helm帮助您管理Kubernetes…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">helm.sh</p></div></div><div class="oo l"><div class="op l oq or os oo ot ks of"/></div></div></a></div><div class="oc od gp gr oe of"><a href="https://github.com/helm/chart-testing" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">舵/海图-测试</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">ct是检验舵图的工具。它旨在用于林挺和测试拉请求。它…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">github.com</p></div></div><div class="oo l"><div class="ou l oq or os oo ot ks of"/></div></div></a></div><h2 id="53c5" class="na li it bd lj nb nc dn ln nd ne dp lr mi nf ng lt mm nh ni lv mq nj nk lx nl bi translated">用KinD测试和部署你的舵图</h2><div class="oc od gp gr oe of"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-continuously-test-and-deploy-your-helm-charts-on-kubernetes-clusters-using-kind-d71e3585d2dc"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">如何使用Kind在Kubernetes集群上持续测试和部署您的舵图</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">设置CI/CD工具，轻松发布图表</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">better编程. pub</p></div></div><div class="oo l"><div class="ov l oq or os oo ot ks of"/></div></div></a></div><h2 id="1fd3" class="na li it bd lj nb nc dn ln nd ne dp lr mi nf ng lt mm nh ni lv mq nj nk lx nl bi translated">使用Circle-CI部署到KinD的示例图表</h2><div class="oc od gp gr oe of"><a href="https://github.com/DrPsychick/charts" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">心理检查/图表</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">包含有用图表的知识库，如cronjobs。通过在…上创建帐户，为DrPsychick/charts的发展做出贡献</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">github.com</p></div></div><div class="oo l"><div class="ow l oq or os oo ot ks of"/></div></div></a></div><h2 id="80be" class="na li it bd lj nb nc dn ln nd ne dp lr mi nf ng lt mm nh ni lv mq nj nk lx nl bi translated">通过GitHub动作使用图表测试</h2><div class="oc od gp gr oe of"><a href="https://github.com/helm/charts-repo-actions-demo" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">舵/图表-回购-行动-演示</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">用GitHub页面和动作演示测试和托管图表库的示例项目。主人支持舵3…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">github.com</p></div></div><div class="oo l"><div class="ox l oq or os oo ot ks of"/></div></div></a></div></div></div>    
</body>
</html>