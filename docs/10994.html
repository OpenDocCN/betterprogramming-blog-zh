<html>
<head>
<title>How to Deploy a Smart Contract in 5 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在5分钟内部署智能合同</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-deploy-a-smart-contract-in-5-minutes-8c924bb702aa?source=collection_archive---------9-----------------------#2022-02-09">https://betterprogramming.pub/how-to-deploy-a-smart-contract-in-5-minutes-8c924bb702aa?source=collection_archive---------9-----------------------#2022-02-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a636" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">区块链开发教程01 —使用安全帽</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/565eb85cdb4e10c3b03dea79e87c0e5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WzN09AnaHf9ATGr3n4V4CA.png"/></div></div></figure><p id="cfac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">部署智能合约有多种方式。在本文中，我将分享使用<a class="ae ln" href="https://hardhat.org/" rel="noopener ugc nofollow" target="_blank"> hardhat </a>部署智能合约的方法。没有先决条件。</p><h2 id="ad05" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">部署智能合同的5个步骤</h2><ol class=""><li id="8300" class="mh mi iq kt b ku mj kx mk la ml le mm li mn lm mo mp mq mr bi translated">设置环境</li><li id="7cbd" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">启动一个安全帽项目</li><li id="ca56" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">配置</li><li id="3d7c" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">部署代码</li><li id="bd6b" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">部署</li></ol></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h2 id="0ff5" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">第一步。设置环境</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="0afd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第一步，在你的终端上运行代码。</p><p id="2dd9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们首先创建一个项目文件夹，并使用<code class="fe ng nh ni nj b">npm init -y</code>来生成一个npm项目。<code class="fe ng nh ni nj b">-y</code>表示对每个提示说是。</p><p id="ea11" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后我们安装<code class="fe ng nh ni nj b">hardhat</code>库。Hardhat是一个以太坊开发环境。它有助于测试、编译、部署和调试智能合同。</p><p id="3a66" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请记住安装基于您的项目的所有依赖项。例如，在NFT智能合约的情况下，您可能想要添加<code class="fe ng nh ni nj b">npm install <a class="ae ln" href="http://twitter.com/openzeppelin/contracts" rel="noopener ugc nofollow" target="_blank">@openzeppelin/contracts</a></code>。</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h2 id="e332" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">第二步。启动一个安全帽项目</h2><p id="ea2f" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la nk lc ld le nl lg lh li nm lk ll lm ij bi translated">留在项目文件夹中，使用命令<code class="fe ng nh ni nj b">npx hardhat</code>创建一个基本的样本安全帽项目。为每个提示问题选择默认选项。您的终端将如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/58acac48054b57f38113d22b10b8356a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ItZb1HMk51Ub6DXqswAR2g.png"/></div></div><p class="no np gj gh gi nq nr bd b be z dk translated">图1“npx hard hat”命令的终端输出</p></figure><p id="7451" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，在您的项目文件夹中，合同文件夹下有许多带有示例智能合同的文件夹。我们来删除以下文件:<code class="fe ng nh ni nj b">test/sample-test.js</code>、<code class="fe ng nh ni nj b">script/sample-script.js</code>、<code class="fe ng nh ni nj b">contracts/Greeter.sol</code>。</p><p id="40ad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后将您的智能合同保存在<code class="fe ng nh ni nj b">\contracts</code>文件夹下。</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h2 id="b7ef" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">第三步。配置网络和私钥</h2><p id="e939" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la nk lc ld le nl lg lh li nm lk ll lm ij bi translated">让我们使用Mumbai，Polygon的Testnet作为演示。打开<code class="fe ng nh ni nj b">hardhat.config.js</code>，用以下代码替换现有代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="002d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">确保你选择了正确的solidity版本，添加你的私钥和Mumbai RPC。你可以在官方文档中找到一个RPC列表。由于该文件包含您的私钥，您可能希望将它保存在本地计算机上。</p><p id="5b7c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以在networks部分配置其他网络，在第5步中，您可以选择要使用的网络。</p><p id="c61c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不熟悉RPC？我也很迷茫。<a class="ae ln" href="https://www.anyblockanalytics.com/blog/what-is-a-blockchain-rpc-node-api/" rel="noopener ugc nofollow" target="_blank">这篇文章</a>帮了我大忙。简而言之，RPC就像Web2.0中的API地址。</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h2 id="76e8" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">第四步。部署代码</h2><p id="1582" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la nk lc ld le nl lg lh li nm lk ll lm ij bi translated">现在，我们设置了环境和配置文件，让我们处理将有助于部署智能合约的代码。</p><p id="8acc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在<code class="fe ng nh ni nj b">\scripts</code>文件夹下创建一个文件<code class="fe ng nh ni nj b">deploy.js</code>，复制以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="140b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">代码是不言自明的。本质上，我们只是使用<code class="fe ng nh ni nj b">hre.ethers</code>来获得我们的合同并部署它。以下是一些建议:</p><ul class=""><li id="7b15" class="mh mi iq kt b ku kv kx ky la ns le nt li nu lm nv mp mq mr bi translated">在第2行中，<code class="fe ng nh ni nj b">your-contract-name</code>不应包含'.索尔。如果你的合同文件名是<code class="fe ng nh ni nj b">myContract.sol</code>，就在这里用<code class="fe ng nh ni nj b">myContract</code>。</li><li id="59d1" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm nv mp mq mr bi translated">在第3行，提供智能合约的<code class="fe ng nh ni nj b">constructor</code>所需的所有参数。</li><li id="df1c" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm nv mp mq mr bi translated">从第7行到第11行，您可以通过调用智能合约的函数来尝试与智能合约进行交互。</li></ul></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h2 id="bb5e" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">第五步。部署</h2><p id="2eab" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la nk lc ld le nl lg lh li nm lk ll lm ij bi translated">最后一步是最简单的，只需使用命令:<code class="fe ng nh ni nj b">npx hardhat run scripts/deploy.js --network mumbai</code></p><p id="8ff2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">预期的终端输出如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/faa061e5c4b0b858d0a01804b3bd73b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3VIBi6g1nvYXq7fBipHfCQ.png"/></div></div><p class="no np gj gh gi nq nr bd b be z dk translated">图2合同部署命令的终端输出</p></figure><p id="10d2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">记住您的智能合同地址，您将在构建前端时使用它。</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h2 id="a006" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">离别赠言</h2><p id="6a2f" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la nk lc ld le nl lg lh li nm lk ll lm ij bi translated">你有它！我希望本教程能够帮助您部署您的智能合同。如果您有任何问题或建议，请随时发表评论。如果你想让我写其他关于区块链发展的话题，也请告诉我！</p><pre class="kg kh ki kj gt nx nj ny nz aw oa bi"><span id="dd71" class="lo lp iq nj b gy ob oc l od oe"><strong class="nj ir">Want to Connect?</strong></span><span id="d76f" class="lo lp iq nj b gy of oc l od oe">Please feel free to reach out (<a class="ae ln" href="https://www.linkedin.com/in/zhaosicong/" rel="noopener ugc nofollow" target="_blank">my LinkedIn</a>) if you have any questions, feedback, or even just a random chat.</span></pre></div></div>    
</body>
</html>