<html>
<head>
<title>Why You Should Consider Rust for the Next Language You Learn</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么你应该考虑在下一门语言中使用Rust</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-you-should-consider-rust-for-the-next-language-you-learn-39652d8e1bbe?source=collection_archive---------2-----------------------#2020-08-31">https://betterprogramming.pub/why-you-should-consider-rust-for-the-next-language-you-learn-39652d8e1bbe?source=collection_archive---------2-----------------------#2020-08-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bcfb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">铁锈入门</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fe02e774200d53f0afc0694dc3c61b89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qOMneOKWoWu2ktFHibLbTg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@dlanor_s?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">德拉诺尔S </a>在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="bc78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据StackOverflow的调查，Rust已经连续四年成为<a class="ae ky" href="https://insights.stackoverflow.com/survey/2020#most-loved-dreaded-and-wanted" rel="noopener ugc nofollow" target="_blank">最受欢迎的编程语言</a>。大多数试用过Rust的人都愿意继续使用它。</p><p id="52be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是如果你没有用过，你可能会想Rust是什么，为什么它如此特别，是什么让它如此受开发者欢迎？</p><p id="5557" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本指南中，我将尝试给出一个快速的介绍，并回答您可能会有的关于Rust的所有问题。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f1da" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">什么是铁锈？</h1><p id="d7ae" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Rust是一种低级的、静态类型的多范例编程语言，专注于安全性和性能。</p><p id="2676" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Rust解决了C/C++长期纠结的问题，比如内存错误，构建并发程序。</p><p id="c1b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它有三个主要好处:</p><ul class=""><li id="6286" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">更好的内存安全，由于编译器；</li><li id="056d" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">由于防止数据竞争的数据所有权模型，更容易并发；和</li><li id="a0ec" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">零成本抽象。</li></ul><p id="d662" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们依次看一下每一个。</p><h2 id="5dbc" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">无segfaults</h2><p id="6849" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果你想做系统编程，你需要内存管理提供的底层控制。不幸的是，手动管理在像c这样的语言中会带来很多问题。尽管有像Valgrind这样的工具，但是发现内存管理问题是很棘手的。</p><p id="1fd6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">生锈可以防止这些问题。Rust的所有权系统在编译时分析程序的内存管理，确保不会发生由于内存管理不善而导致的错误，并且垃圾收集是不必要的。</p><p id="29d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，如果你想以类似C语言的方式实现超级优化的实现，你可以这样做，同时用<a class="ae ky" href="https://doc.rust-lang.org/book/ch19-01-unsafe-rust.html" rel="noopener ugc nofollow" target="_blank"> unsafe </a>关键字明确地将它们与代码的其余部分分开。</p><h2 id="0c2d" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">更轻松的并发</h2><p id="6bb8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">由于借用检查器，Rust可以防止编译时的数据竞争。</p><p id="5a49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当两个线程同时访问同一个内存时，就会发生数据竞争，这可能会导致一些令人讨厌的、不可预测的行为。幸运的是，防止未定义的行为是Rust所要做的。</p><h2 id="71cf" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">零成本抽象</h2><p id="b989" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">零成本抽象确保你使用的抽象实际上没有运行时开销。简而言之:低级代码和用抽象语言编写的代码在速度上没有区别。</p><p id="0a06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些东西重要吗？是的。例如，<a class="ae ky" href="https://www.zdnet.com/article/microsoft-70-percent-of-all-security-bugs-are-memory-safety-issues/" rel="noopener ugc nofollow" target="_blank">在过去的12年里，微软解决的问题</a>中大约有70 %是内存错误。<a class="ae ky" href="https://www.zdnet.com/article/chrome-70-of-all-security-bugs-are-memory-safety-issues/" rel="noopener ugc nofollow" target="_blank">谷歌Chrome </a>也是如此。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a5d2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">生锈有什么好处？</h1><p id="93b6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Rust是一种相当低级的语言；当你需要从你所拥有的资源中获取更多时，这是很有用的。因为它是静态类型的，类型系统可以帮助你在编译过程中阻止某些类型的错误。因此，当您的资源有限时，以及当您的软件不出故障很重要时，您会倾向于使用它。相比之下，像Python和JavaScript这样的高级动态类型语言更适合快速原型。</p><p id="17c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是Rust的一些使用案例:</p><ul class=""><li id="6bec" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">强大的跨平台命令行工具。</li><li id="d00f" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">分布式在线服务。</li><li id="f5d8" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">嵌入式设备。</li><li id="58f0" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">在其他任何地方，你都需要系统编程，比如<a class="ae ky" href="https://research.mozilla.org/servo-engines/" rel="noopener ugc nofollow" target="_blank">浏览器引擎</a>，或许还有<a class="ae ky" href="https://www.theregister.com/2020/07/13/rust_code_in_linux_kernel/" rel="noopener ugc nofollow" target="_blank"> Linux内核</a>。</li></ul><p id="db75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比如下面几个操作系统，用Rust写的:<a class="ae ky" href="https://www.redox-os.org/" rel="noopener ugc nofollow" target="_blank"> Redox </a>，<a class="ae ky" href="https://intermezzos.github.io/" rel="noopener ugc nofollow" target="_blank"> intermezzOS </a>，<a class="ae ky" href="https://github.com/QuiltOS/QuiltOS" rel="noopener ugc nofollow" target="_blank"> QuiltOS </a>，<a class="ae ky" href="https://github.com/sorpaas/rux" rel="noopener ugc nofollow" target="_blank"> Rux </a>，<a class="ae ky" href="https://github.com/tock/tock" rel="noopener ugc nofollow" target="_blank"> Tock </a>。</p><h2 id="2e46" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">Rust是面向对象的吗？</h2><p id="d56a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">谁知道现在的面向对象是什么意思？</p><p id="1b7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">答案是<em class="nz">不会。Rust有一些面向对象的特性:你可以创建结构，它们可以包含数据和数据上的相关方法，这有点类似于类减去继承。但与Java等语言不同，Rust没有继承，而是使用特征来实现多态性。</em></p><h2 id="ae45" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">Rust是函数式编程语言吗？</h2><p id="b54c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">尽管Rust表面上与C非常相似，但它深受ML语言家族的影响。(这个家族包括像OCaml、F#和Haskell这样的语言。)比如Rust traits基本就是Haskell的类型类，Rust有非常强大的模式匹配能力。</p><p id="4648" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Rust的特点是比函数式程序员通常习惯的更易变。我们可以这样想:Rust和FP都试图避免共享可变状态。当FP专注于避免易变状态时，Rust试图避免危险的共享部分。Rust还缺少了许多使函数式编程在其中可行的东西，比如尾部调用优化和对函数式数据结构的良好支持。</p><p id="4801" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总而言之，Rust对函数式编程的支持足以让某人写了一本关于函数式编程的书。</p><h2 id="6058" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">Rust对游戏开发有好处吗？</h2><p id="7ad3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">理论上，是的。由于Rust专注于性能，并且不使用垃圾收集器，因此用它编写的游戏应该是高性能的，并且速度可以预测。</p><p id="bd74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，这个生态系统还很年轻，例如，Rust中没有任何东西可以与虚幻引擎相比。不过，这些部分都在，而且Rust有一个活跃的社区。如果你想看用Rust写的游戏的例子，你可以去<a class="ae ky" href="https://www.reddit.com/r/rust_gamedev/" rel="noopener ugc nofollow" target="_blank"> Rust游戏开发子编辑</a>。</p><p id="d9c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更多关于Rust游戏开发:<a class="ae ky" href="https://arewegameyet.rs/" rel="noopener ugc nofollow" target="_blank">我们游戏了吗？</a></p><h2 id="ffd1" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">Rust对web开发有好处吗？</h2><p id="0195" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Rust有多个用于web开发的框架，像<a class="ae ky" href="https://github.com/actix/actix-web" rel="noopener ugc nofollow" target="_blank"> Actix Web </a>和<a class="ae ky" href="https://rocket.rs/" rel="noopener ugc nofollow" target="_blank"> Rocket </a>，这些都是非常有用和构建良好的。特别是，如果你正在寻找纯粹的速度，Actix Web达到了<a class="ae ky" href="https://www.techempower.com/benchmarks/" rel="noopener ugc nofollow" target="_blank">框架基准</a>的顶端。</p><p id="e0ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，Rust没有任何东西可以与Django和Rails这样的框架生态系统相竞争。由于Rust是一种相当年轻的语言，所以缺少许多方便的实用程序库，这意味着开发过程并不那么简单和容易。</p><p id="c4f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Rust中更多关于web开发的内容:<a class="ae ky" href="https://www.arewewebyet.org/" rel="noopener ugc nofollow" target="_blank">我们已经是web了吗？</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="f97a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">TL；Rust博士是一个强大的工具，可以用来编写内存安全和线程安全的应用程序，同时保持它的速度。虽然它有很大的潜力，但目前还不清楚在需要大量库支持的领域选择Rust是否合理。</strong></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6ec5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">数据所有权模型</h1><p id="7814" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们深入了解让Rust与众不同的东西之一——它的借用检查器。</p><p id="7880" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了开始解释Rust中的数据所有权，我需要向您介绍低级编程中的两种内存:堆栈和堆。</p><p id="f959" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">栈用于静态内存分配，堆用于动态内存分配。简而言之:stack用于我们知道其内存大小的东西(比如integers或str，在Rust中是内存中的字符串)，而heap用于其大小可能会显著变化的东西(常规字符串)。为了操作这些可变的东西，我们在堆上为它们分配空间，并在堆栈上放置一个指向该空间的指针。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/045f204483e52f0bf0e1ab3b7ff18b5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ys3r9zbCzWolQZPt.jpg"/></div></div></figure><h2 id="a99b" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">移动的</h2><p id="76db" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">但是有一个问题:如果给两个变量分配了一个指向堆上相同数据的指针，该怎么办？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/6c2059442325de1fb6d9f4fe51468772.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zalT2s65XVUCA7zU.jpg"/></div></div></figure><p id="34d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们试图通过改变底层的数据来改变其中一个变量，另一个也会改变，这通常不是我们想要的。</p><p id="9ffc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果有两个线程处理相同的数据，会出现相同(甚至更糟)的情况。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/0d915b859c7be05d70a0c501031b0811.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*N08sMmJrpa973vvX.jpg"/></div></div></figure><p id="1ff5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想象一下，如果其中一个线程改变了堆上的数据，而另一个线程正在读取它。哦，从中可以得出的怪异的恐怖！我们称之为数据竞赛。</p><p id="430b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，在Rust中，只有一个变量可以拥有某条数据。一旦将该数据赋给另一个变量，它就会被移动或复制。</p><p id="0be6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">举个例子:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="5fbb" class="nn md it oc b gy og oh l oi oj">let mut s1 = String::from("All men who repeat a line from Shakespeare are William Shakespeare."); <br/>let mut s2 = s1; <br/>s1.push_str("― Jorge Luis Borges");</span></pre><p id="60f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这不会被编译，因为数据的所有权被移动到s2，并且在移动之后<code class="fe ok ol om oc b">s1</code>不能再被访问。</p><h2 id="a871" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">借款</h2><p id="b178" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在手动移动所有权是相当麻烦的，因为你总是需要确保归还它。</p><p id="ceed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了解决这个问题，我们可以通过创建对变量的引用来借用变量。使用这些引用并不会转移所有权，而是让我们或者读取变量(不可变引用或<code class="fe ok ol om oc b">&amp;</code>)或者甚至改变它(可变引用或<code class="fe ok ol om oc b">mut &amp;</code>)。</p><p id="8543" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是引用是有限制的，因为拥有多个可变引用相当于拥有多个所有者。</p><p id="4633" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是为什么编译器强制执行引用事物的规则。</p><p id="b4b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以执行以下任一操作:</p><ul class=""><li id="cb38" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">多个不可变引用(只读)，</li><li id="9b63" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">一个可变引用(读写)。</li></ul><p id="0655" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我无耻地借用了<a class="ae ky" href="https://github.com/Dhghomon/easy_rust" rel="noopener ugc nofollow" target="_blank"> Rust用简单的英语</a>解释的一个直观的比喻。</p><p id="4056" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">把引用的数据想象成Powerpoint演示文稿。您可以编辑演示文稿(可变ref)，也可以将它呈现给任何数量的人(不可变ref)，但是如果它在被编辑的同时呈现，那么相关部门的负责人可能会被解雇。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="82ac" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Rust与C++</h1><p id="9ae4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在我们知道了Rust的特别之处，我们可以将它与其他主要的系统编程语言——c++进行比较。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/1abc9d88eced5c17f72dd93e695baa19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oPrclK8kIwz6Idt2.jpg"/></div></div></figure><h2 id="499a" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">为什么选择Rust而不是C++？</h2><p id="e336" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在C++中，开发人员在试图避免未定义的行为时会遇到更多问题。在Rust中，借用检查器使您能够通过设计来避免不安全的行为。这根除了一整类的错误，这是非常重要的。</p><p id="1435" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，Rust是一种更现代的语言，在某些方面，也是一种设计更好的语言。特别是，强大的类型系统将帮助您，即使它的主要目标不是捕捉内存错误，并且作为新的工具，它可以根据最佳实践来创建工具，而不用担心遗留的代码库。</p><p id="7bd0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你不想放弃旧的C代码，Rust有一个解决方案。你可以通过FFI(外来函数接口)轻松调用你的函数。当然，编译器不能保证这段代码的安全性，但这是一个很好的最后手段。</p><h2 id="589a" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">为什么选择C++而不是Rust？</h2><p id="7be2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">C和C++已经存在几十年了。无论你想解决什么问题，很可能有很多人都有同样的问题。</p><p id="7227" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时，这意味着不可能使用Rust，因为几乎不可能复制生态系统支持。特别是，C++有游戏引擎和框架，我们在相当一段时间内不会在Rust上看到。</p><p id="45da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Rust解决的问题，现代C++已经以(有些迂回的)方式解决了，所以如果你不想冒险使用Rust，信任有经验的C++开发人员是一个相当安全的选择。</p><p id="2055" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，要编写Rust，有时需要与编译器角力。这并不适合所有人。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="0b05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，Rust的口号是“一种让每个人都能构建可靠高效软件的语言。”</p><p id="70e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然Rust最初是作为C++的替代品开始的，但很明显他们的目标更远，试图让越来越多可能不会使用C++的人能够使用低级编程。</p><p id="85c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这使得这种比较有点意义。Rust不是替代品，而是一种打开可能性新空间的语言，我们将在下一节讨论其中之一。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7361" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Rust和web组装</h1><p id="ee1d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果你还没听说过，WebAssembly就像是Web的… <a class="ae ky" href="https://en.wikipedia.org/wiki/Assembly_language" rel="noopener ugc nofollow" target="_blank"> Assembly </a>。</p><p id="9ec5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">历史上，浏览器能够运行HTML、CSS和JavaScript，HTML负责结构，CSS负责外观，JavaScript负责交互。如果您不喜欢用普通的JavaScript编写，您可以从添加了类型、Haskell-或OCaml-like代码和其他内容的各种其他语言中移植它。</p><p id="325a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，JavaScript不具备运行游戏等计算密集型应用程序所需的可预测的快速性能。(这是由于垃圾收集器和动态类型。)</p><p id="8888" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">WebAssembly在这方面有所帮助。它是一种浏览器语言，可以作为任何语言的编译目标，如Rust、Python和C++。这意味着你可以用任何现代编程语言编写代码，并把它放到浏览器中。</p><p id="713a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与其他语言相比，Rust非常适合编写编译成WebAssembly的代码。</p><ul class=""><li id="bbdf" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated"><strong class="lb iu">最小运行时间。</strong> WebAssembly没有自己的运行时，需要随代码一起发货。运行时越小，用户需要下载的东西就越少。</li><li id="434c" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><strong class="lb iu">静态键入。</strong>由于Rust是静态类型的，它可以编译成更高效的WebAssembly，因为编译器可以使用这些类型来优化代码。</li><li id="5d2b" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">我们领先一步。最重要的是，Rust全心全意地拥抱了WebAssembly。Rust已经有了一个很棒的社区和工具来编译WebAssembly，老实说，这是这三个中最重要的优势。</li></ul><p id="61c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想了解更多关于Rust和WebAssembly的信息，请观看Steve Klabnik的演讲或查看rustwasm的书籍。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9345" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">开始使用Rust</h1><p id="6d38" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要开始使用Rust代码，你可以在这里下载<code class="fe ok ol om oc b">rustup</code><a class="ae ky" href="https://www.rust-lang.org/tools/install" rel="noopener ugc nofollow" target="_blank"/>或者使用<a class="ae ky" href="https://play.rust-lang.org/" rel="noopener ugc nofollow" target="_blank"> Rust Playground </a>，这是一个在线工具，让你运行一些Rust代码并见证其后果。😅</p><p id="6b32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦你准备好了你的Rust环境，让我们来做一些代码。在这里，我们将做一个Rust版本的fizzbuzz，让大家对Rust的能力有一个简单的了解。</p><p id="25f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要创建一个新项目，请转到您希望项目所在的目录并执行<code class="fe ok ol om oc b">cargo new fizzbuzz</code>。这将指示Rust的构建经理创建一个新项目。一旦你这样做了，进入<code class="fe ok ol om oc b">/src</code>文件夹并打开<code class="fe ok ol om oc b">main.rs</code>。</p><p id="0169" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们写一些接受一个数字并返回的东西:</p><ul class=""><li id="7fc2" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">“嘶嘶”代表被3整除的数字，</li><li id="b876" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">“嗡嗡”代表被5整除的数字，</li><li id="d97a" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">“fizzbuzz”表示被3和5整除的数字，</li><li id="42fb" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">如果用两者都不除，则为字符串形式的数字。</li></ul><p id="b7cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Rust在匹配语句中有一个非常强大的工具来做到这一点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><p id="770e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于引号中的文本在内存中是一个字符串，或者在Rust中是<code class="fe ok ol om oc b">str</code>，我们需要将它转换成一个字符串。</p><p id="a35a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们需要一种从1数到某个数字的方法。我们将编写一个新函数，它将数字作为参数，创建一个从1到数字的范围，应用<code class="fe ok ol om oc b">fizzbuzz</code>函数，并打印结果。在Rust中，我们可以通过一个简单的for循环来实现这一点。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><p id="a3a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了在终端中实现任何结果，我们需要有一个主函数。让我们用这个替换<code class="fe ok ol om oc b">hello_world</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><p id="fb5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以使用<code class="fe ok ol om oc b">cargo run main.rs</code>命令，很可能会在我们的终端上看到一串嘶嘶作响的声音。</p><p id="9030" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是嘿！也许fizzbuzz不是我们玩的唯一游戏？也许新的热门是wubbalubba？让我们快速修改我们的计数代码，以确保我们可以在镇上玩任何计数游戏。</p><p id="d747" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，我们需要Rust函数接受另一个函数，该函数接受一个无符号32位整数并返回一个字符串。在将所谓的<em class="nz">函数指针</em>添加到类型签名之后，最坏的情况已经过去了。在里面，我们只需要用函数变量替换fizzbuzz。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><p id="07aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们添加一个新的游戏，以某种方式将整数转换成字符串，我们的函数将能够处理它。</p><p id="4750" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了方便起见，下面是wubbalubba(几乎不是一个创造性的发明)和调用它所需的函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6d60" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">进一步学习</h1><p id="e3a3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Rust的社区很棒。无论你走到哪里，你都会发现许多解释清楚、面向初学者的学习材料，以及随时准备帮助你的人:</p><ul class=""><li id="d9e5" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated"><a class="ae ky" href="https://tourofrust.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">巡锈</strong> </a> <strong class="lb iu">。关于Rust基础知识的交互式教程，直到泛型和智能指针。</strong></li><li id="5d0d" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><a class="ae ky" href="https://doc.rust-lang.org/book/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">铁锈编程语言</strong> </a> <strong class="lb iu">。</strong>Rust book的首选，网上免费提供。</li><li id="0ae1" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><a class="ae ky" href="https://exercism.io" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">练习锈迹</strong> </a> <strong class="lb iu">。如果你想在语言和语法方面获得更多的经验，Exercism是一个不错的选择。不幸的是，看起来Rust track现在有点人口过剩，所以不要指望得到很多导师的关注。</strong></li><li id="bf3b" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><a class="ae ky" href="https://doc.rust-lang.org/stable/rust-by-example/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">锈经例</strong> </a> <strong class="lb iu">。</strong>惯用Rust代码的例子集合。</li><li id="8d95" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><a class="ae ky" href="https://cheats.rs/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">锈小抄</strong> </a> <strong class="lb iu">。</strong>如果你想快速浏览一下Rust最重要的概念，这是给你的。</li><li id="5453" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><a class="ae ky" href="https://github.com/rust-lang/rustlings" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">沙沙作响</strong> </a> <strong class="lb iu">。Rust练习集，让你在一个受控的环境中与编译器角力。</strong></li></ul><p id="9f89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章能帮助你理解为什么Rust现在如此受欢迎和喜爱。我还希望我已经让你走上了学习和尝试Rust的道路，无论是作为一个工具还是一个附带项目。如果你有问题，不要犹豫，问:我们在你身边。</p></div></div>    
</body>
</html>