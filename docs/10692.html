<html>
<head>
<title>My 7 Takeaways From the “Refactoring: Improving the Design of Existing Code” Book</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我从《重构:改进现有代码的设计》一书中学到的7点</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/my-top-takeaways-from-refactoring-part-1-e802d81600aa?source=collection_archive---------9-----------------------#2022-01-22">https://betterprogramming.pub/my-top-takeaways-from-refactoring-part-1-e802d81600aa?source=collection_archive---------9-----------------------#2022-01-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8e9f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我在阅读马丁·弗劳尔书时学到了什么</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6a8ad96862166f028d7e43c421a1fd4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LDxbwLpPZecBEOOa"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@studiomediainc?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">工作室媒体</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="cd63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为软件开发人员，我们应该拥抱变化。框架变化，需求变化，期望变化…将这些变化合并到现有的代码库并不总是容易的。但是，编写干净且结构良好的代码会让未来的自己变得更容易。</p><p id="968e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为开发人员和设计人员，甚至作为人类，我们并不总是在一开始就做出最好的决定。有时候，看看这段旅程将把我们带向何方会有所帮助，然后我们会修改之前的决定。我们对未来的修订考虑得越多，到时候就越容易实施。软件开发几乎总是如此。重构是我们为软件修改过去决策的方式。</p><p id="69a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想分享一下我从肯特·贝克和马丁·福勒所著的《重构T4》一书中获得的一些经验。这本书分享了关于重构的宝贵的实践观点。还有许多重构技术的目录，用惊人的例子来说明。向任何有兴趣了解更多重构知识的人推荐这本书。</p><p id="b9fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一章是重构在实践中的一个例子。它证明了所采取行动的合理性，并分享了许多有用的经验法则。</p><h1 id="6ab8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1.致力于拥抱变化</h1><p id="262a" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们编写的软件是动态的，这种想法带来了改变的隐含必要性。</p><p id="1e7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了轻松应用下一个变化，我们首先需要有一个好的结构。</p><p id="e474" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">重构的目的是在不影响任何可见功能的情况下改进代码的结构。</p><h1 id="d14d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">2.在重构之前，确保你有足够的测试</h1><p id="7190" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">重构代码时，我们希望确保软件按预期运行。实现这一点的最好方法是借助一组好的测试。</p><p id="a9e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">测试确保无论我们做什么改变，功能保持不变。我们必须确保我们的测试覆盖了我们在重构过程中接触到的领域。</p><p id="06ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果没有，我们现在必须停下来，在开始重命名一个方法之前就开始添加那些测试。</p><h1 id="937f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3.逐步重构</h1><p id="bbde" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">重构可能会破坏事物，这就是为什么我们首先编写测试，对吗？对吗？好吧。我们应该以尽可能小的步骤进行更改，并测试这些更改。</p><p id="c7f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样我们就知道我们什么时候搞砸了，也更容易恢复，因为我们的步伐很小。</p><h1 id="d2dd" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">4.拥有一个系统:重构、测试、提交</h1><p id="15b1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">无论我们多么小心，在重构时有一个系统将有助于这个过程。</p><p id="89ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当你重构时，你是在一小步一小步地重构。你测试你的改变。然后，您将更改提交到您最喜欢的版本控制系统。现在您已经有了一个经过充分测试的变更的清晰历史！借助这一流程，您可以:</p><ul class=""><li id="b104" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">以100%的信心回复到任何一个提交，</li><li id="b521" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">随时停止并释放任何提交，这将是一种改进，</li><li id="4dbb" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">您可以将这些微小的提交压缩成更大更有意义的提交，以获得好看的历史记录！</li></ul><h1 id="89ac" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">5.首先重构，然后扩展</h1><p id="ef26" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在添加新功能之前进行重构将有助于思考过程。留下比你发现的更好的代码库是一个奖励！</p><h1 id="b980" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">6.重命名时使用描述性名称</h1><p id="b1d3" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">重命名是重构中的一项关键技术。重命名变量、重命名方法、重命名类……重命名的重点应该是使用描述性的名称，这样可以节省我们的时间。</p><p id="8cbf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个好的变量名可以让我们不用去阅读它是如何到达这里的，也不用去理解它有什么值。一个好的方法名称使我们不必阅读整个实现来理解它做什么。一个好的类名使我们不必阅读整个类来理解它的责任。</p><p id="6977" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">花大量的时间和精力来选择名字是重构的核心。否则，如果我们仍然必须读取较小的方法，那么拆分一个大方法又有什么意义呢？</p><h1 id="832c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">7.重构时关注性能</h1><p id="2ddc" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在重构过程中，性能可能会受到影响。即使有，通常也是小规模的，没有重大损失。但是，记下可能的性能降级点是一个好习惯。</p><p id="2dbb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成重构后，我们应该回顾这些要点，并针对性能进行微调。这将更容易微调，因为在重构结束时代码库将有一个更好的结构。</p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><p id="50ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nk">最初发表于</em>【https://recepinanc.com】<em class="nk"/></p></div></div>    
</body>
</html>