<html>
<head>
<title>What Is the Walrus Operator in Python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的海象算子是什么？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/what-is-the-walrus-operator-in-python-5846eaeb9d95?source=collection_archive---------0-----------------------#2019-11-11">https://betterprogramming.pub/what-is-the-walrus-operator-in-python-5846eaeb9d95?source=collection_archive---------0-----------------------#2019-11-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c719" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何使用3.8版中发布的新操作符精简代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/cc7b9b91227977c90de7ceb766705d72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XnrtMGozZ3bzhK_gxY2cTw.jpeg"/></div></div></figure><p id="69fa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一个新的运算符<code class="fe lq lr ls lt b"><strong class="kw iu">:=</strong></code>，被愉快地命名为<em class="lu">海象运算符</em>——看到眼睛和长牙——被称为赋值表达式。</p><p id="90ba" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">walrus运算符的目的是当赋值和表达式都使用类似的语句时，合并赋值语句和布尔表达式。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="913c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">之前和之后:实现Walrus运算符</h1><p id="9533" class="pw-post-body-paragraph ku kv it kw b kx mu ju kz la mv jx lc ld mw lf lg lh mx lj lk ll my ln lo lp im bi translated">让我们看一个简单的用例，以及我们如何实现walrus操作符来提高代码的效率。</p><p id="2786" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将检查给定列表的长度，并打印包含该长度的错误消息。</p><pre class="kj kk kl km gt mz lt na nb aw nc bi"><span id="6efb" class="nd md it lt b gy ne nf l ng nh">my_list = [1,2,3,4,5]</span><span id="0665" class="nd md it lt b gy ni nf l ng nh">if len(my_list) &gt; 3:<br/>   print(f"The list is too long with {len(my_list)} elements")</span></pre><p id="ea93" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您对print语句中字符串前的<code class="fe lq lr ls lt b">f</code>不确定，那就称为格式字符串文字，简称f字符串。</p><p id="f002" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，walrus操作符将消除两次调用<code class="fe lq lr ls lt b">len()</code>函数。</p><pre class="kj kk kl km gt mz lt na nb aw nc bi"><span id="e9d6" class="nd md it lt b gy ne nf l ng nh">my_list = [1,2,3,4,5]</span><span id="a327" class="nd md it lt b gy ni nf l ng nh">if (n := len(my_list)) &gt; 3:<br/>   print(f"The list is too long with {n} elements")</span></pre><p id="c9c2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">操作符的类型(赋值表达式)应该给你一个提示，告诉你这里发生了什么。最内部的语句是赋值语句<code class="fe lq lr ls lt b">n = len(my_list)</code>，然后<code class="fe lq lr ls lt b">n</code>的值被用在外部表达式中。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bd7f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">不要忘记括号</h1><p id="7a5e" class="pw-post-body-paragraph ku kv it kw b kx mu ju kz la mv jx lc ld mw lf lg lh mx lj lk ll my ln lo lp im bi translated">Python并不经常需要括号，但是在这种情况下，括号对于语句正确求值是至关重要的。要查看忘记括号的结果，让我们通过打印<code class="fe lq lr ls lt b">n</code>来比较每一个。</p><pre class="kj kk kl km gt mz lt na nb aw nc bi"><span id="f358" class="nd md it lt b gy ne nf l ng nh">my_list = [1,2,3,4,5]</span><span id="44c6" class="nd md it lt b gy ni nf l ng nh">if (n := len(my_list)) &gt; 3:<br/>   print(n) # 5 </span><span id="f004" class="nd md it lt b gy ni nf l ng nh">if n := len(my_list) &gt; 3:<br/>   print(n) # True</span></pre><p id="2f76" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">注意，如果没有括号，赋值的是<code class="fe lq lr ls lt b">len(my_list) &gt; 3</code>的值。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6d93" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">你将如何使用这个？</h1><p id="3d84" class="pw-post-body-paragraph ku kv it kw b kx mu ju kz la mv jx lc ld mw lf lg lh mx lj lk ll my ln lo lp im bi translated">walrus操作符允许使用复合赋值表达式，这提供了许多新的可能性。</p><p id="5a58" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个操作符的引入也受到了相当多的批评，但对我来说，它只是工具箱中的另一个工具，可以在适当的时候使用。</p><p id="b9f6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">那么，你会使用海象运营商吗？如果是，你将如何使用它？</p></div></div>    
</body>
</html>