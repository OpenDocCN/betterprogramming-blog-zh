<html>
<head>
<title>Generating PDFs Dynamically Using PDFKit in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Swift中使用PDFKit动态生成pdf</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swift-generating-pdfs-dynamically-using-pdfkit-12c37168e106?source=collection_archive---------5-----------------------#2022-09-06">https://betterprogramming.pub/swift-generating-pdfs-dynamically-using-pdfkit-12c37168e106?source=collection_archive---------5-----------------------#2022-09-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="47bb" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用公共API构建鸡尾酒菜单PDF</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3e5add4bdc498108008cadac89b26f97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aSPzYO6h39YjggLA"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@istepanoff?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">伊戈尔·斯捷潘诺夫</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="3b43" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在开发Swift应用程序时，动态生成PDF报告非常有用。您的用户将能够在旅途中创建他们自己的个性化报告，并且能够非常轻松地导出这些报告。</p><h1 id="859a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">目标</h1><ul class=""><li id="f905" class="mk ml iq ky b kz mm lc mn lf mo lj mp ln mq lr mr ms mt mu bi translated">生成PDF文档</li><li id="24e6" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">以有组织的方式展示您的数据</li><li id="8a44" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">设置文本格式(字体、大小、下划线……)</li><li id="1424" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">需要时，转到新的一页</li><li id="0d75" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">分享您的PDF</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/a2259e9edaca4ab1eca10c23f5bbbf96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o_ceUYDTrtZ5loA4NSqSjQ.png"/></div></div></figure><h1 id="94ce" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">概观</h1><p id="4bf2" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">在本教程中，我们将使用公共的<code class="fe ne nf ng nh b"><a class="ae kv" href="https://www.thecocktaildb.com/api.php" rel="noopener ugc nofollow" target="_blank">thecocktaildb</a></code> API生成一份鸡尾酒菜单。</p><p id="fa46" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的浏览器上使用空搜索字符串“<a class="ae kv" href="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=" rel="noopener ugc nofollow" target="_blank">https://www.thecocktaildb.com/api/json/v1/1/search.php?s=</a>”测试了他们的搜索API后，我们可以看到鸡尾酒及其成分的列表，以及一些说明和附加数据。</p><p id="57c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个API还允许我们根据饮料进行过滤。</p><p id="663a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，使用网址"<a class="ae kv" href="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita" rel="noopener ugc nofollow" target="_blank">https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita </a>“会给我们看所有的玛格丽塔酒。</p><p id="738c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将开发一个应用程序，生成一个PDF文件，向我们显示由用户输入的字符串过滤的所有鸡尾酒列表。</p><h1 id="beb3" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">创建应用程序</h1><p id="c32d" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">首先，让我们通过点击XCode创建一个新的单视图应用程序，并选择create a new XCode project。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/f8ea47c695b3ac9b68b7b3813e3347a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q9FTnQi3PEDfQc2fo-ZcWg.png"/></div></div></figure><p id="935f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">之后，我们来选择App。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/89ffbc2086082c282b4781b3e50cc904.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vYO18qbCKtZ4tm6gjQiB1A.png"/></div></div></figure><p id="cc05" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我把这个应用程序叫做玛格丽塔PDFKit。选择Storyboard和Swift，点击Next，然后点击Finish。</p><h1 id="b1fc" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">获取数据</h1><p id="ee81" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">获取和解析数据超出了本教程的范围，所以让我们快速浏览一下。</p><p id="3101" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建一个新的Swift文件，将其命名为NetworkManager.swift</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/174fd2690bd2e46fd0ada6c6c75c9ed7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HeCCv7ALkj97SIZ0p9Ya0Q.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/0c19e4416471993cf03117883bcf326a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jrfr8A0fTFX9saiSLOYVkw.png"/></div></div></figure><p id="5807" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">…并键入以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="c4c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">“错误:在范围内找不到菜单”</strong>，我们马上添加！</p><p id="2f98" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过右键单击“Margaritas pdf kit”<strong class="ky ir">组</strong>创建一个名为<code class="fe ne nf ng nh b">Cocktail.swift</code>的新Swift文件，并单击<strong class="ky ir">新文件:</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/d32842ffe76c9d5193ff281ad482ea68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZxUdD19UxIZDBAUwzW4vHA.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/4e99cd30d3c58903b2705222d7b3172a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iga7kQHl1paj_aJkVvLN3w.png"/></div></div></figure><p id="bc58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">调用文件<code class="fe ne nf ng nh b">Cocktail.swift</code>并点击创建。</p><p id="c310" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在将以下内容粘贴到文件中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="fe77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个类将把鸡尾酒API的响应解析成这些类。</p><p id="9d7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过使用Codable，JSON响应将被自动映射到这里的对象中。</p><h1 id="07d8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">用户界面</h1><p id="08cd" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">首先，让我们跳到<code class="fe ne nf ng nh b">main.storyboard</code>并从库中添加几个对象，约束如下:</p><p id="39a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">一个UITextField </strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/3307d9d72c1d4ed15a43183630b1c9d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jy651MQAAovt0Bq_5GWTmw.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/07257a93f9e27d0659b91f4ca3465490.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UiNXOoXV2I_XtzLTQoyjdA.png"/></div></div></figure><p id="132e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">一个UILabel </strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/92d17f6af5d67b30cdbf56dda89c57fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bJJ1e8sEV80lFh2lMtS_1w.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/8e460316b761bf3b19685e25f18b661f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MIuE6HDwElFeFXO-hrFaKQ.png"/></div></div></figure><p id="c693" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">和一个UIButton </strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/2d517992fd57e6a0ebe8a31af9dc89da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UJ55Cbo9XUIb16y-_aYO0Q.png"/></div></div></figure><p id="5898" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在通过:<strong class="ky ir"> ctrl + click </strong>从按钮到ViewController.swift文件创建一个动作，并调用generatePDF方法。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/846bde12f3680be3f80f3ea16118c396.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TdVK1bkSzlw0gfl6exLKwQ.png"/></div></div></figure><p id="4138" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，做同样的事情，创建一个从TextField到Siwft文件的出口，并调用出口<code class="fe ne nf ng nh b">queryField</code>。</p><h1 id="5424" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">表示文本</h1><p id="6909" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">让我们从定义能够为文本分配属性并在我们的上下文中呈现该文本的函数开始</p><p id="b2cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，确保在ViewController.swift文件的顶部添加:</p><pre class="kg kh ki kj gt nw nh nx ny aw nz bi"><span id="60e6" class="oa lt iq nh b gy ob oc l od oe"><strong class="nh ir">import</strong> PDFKit</span></pre><p id="097a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后在文件底部添加:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="cb51" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些方法被添加为对<code class="fe ne nf ng nh b">UIGraphicsPDFRendererContext</code>的扩展，这是将要呈现我们的PDF的上下文。</p><p id="9ef8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们所要做的就是在上下文中指定我们需要的所有东西(PDF元数据、PDF尺寸、分页符，当然还有我们要在文档中呈现的文本)。</p><p id="e044" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在函数1、2和3的实现中，属性被分配给属性化字符串变量中的文本。然后，我们使用indent和Page Size参数将我们的字符串放在由函数定义描述的<code class="fe ne nf ng nh b">CGRect</code>中(居中、单行左对齐和多行左对齐)。这样做之后，我们使用函数4 ( <code class="fe ne nf ng nh b">checkContext()</code>)来检查我们的文本是否超出了页面的边界，如果是，就动态地开始一个新的页面并重置光标。</p><p id="7c74" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，函数5计算多行句子的高度，这样我们就知道文本在哪里结束，下一段从哪里开始。</p><h1 id="c003" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">配置上下文</h1><p id="82b7" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">下一步，我们将实现一个函数，该函数提取所有相关信息，并使用前面的扩展将其添加到上下文中。</p><p id="41aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">执行功能<code class="fe ne nf ng nh b">generateDrinkText()</code>和<code class="fe ne nf ng nh b">addDrinksIngredients()</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="d10f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在函数<code class="fe ne nf ng nh b">generateDrinkText()</code>中，传递了上下文，以及饮料。我们还传递光标来知道在y轴上从哪里开始写。这个游标值也在函数结束时返回，用于下一杯饮料。</p><p id="95d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一个功能<code class="fe ne nf ng nh b">addDrinkIngredients()</code>有助于检查配料并展示它们，因为并非所有鸡尾酒都有所有配料。</p><h1 id="6a66" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">生成PDF</h1><p id="c1d6" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">现在，我们可以通过创建一个函数来完成生成过程，该函数接受一个鸡尾酒数组，并返回稍后将被转换为PDF文档的数据。</p><p id="8b67" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">转到<code class="fe ne nf ng nh b">ViewController.swift</code>，在名为<code class="fe ne nf ng nh b">generatePDFData()</code>的新函数中添加以下内容</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="cfc2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们有了一个函数，它通过配置上下文来创建我们需要的PDF，我们剩下要做的就是从我们的API获取鸡尾酒，并将它们传递给这个函数。</p><p id="4d4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的IBAction现在应该如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h1 id="c85f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">从PDF数据显示PDF文档</h1><p id="2bfb" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">转到<code class="fe ne nf ng nh b">main.storyboard</code>，添加一个新的ViewController文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/db70719811f6b7fcf1cad05f6a48f897.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nMOcSeUa2cO99rbdDmTmiA.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/a7aca22e6e6553da54edb19b1dd748db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MRsyy0etVC1ltYdir69X2g.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/2099f84f033bf947774d7067903f0e72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3VZvloXQelODuwocPqk2KQ.png"/></div></div></figure><p id="fe7c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将新的视图控制器文件分配给新的视图控制器场景，如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/1f82e4078e5966c1b3228f8d6fbfb7da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FvqRg_0mS_28QZvXgJI_Fg.png"/></div></div></figure><p id="33fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在使用<strong class="ky ir"> ctrl + click从初始视图控制器添加一个片段到新场景。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/c8a5a2a4b9f738a4e8f679c0fc333bae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*93Upai6qyAq_sBO8FTGy5A.png"/></div></div></figure><p id="6297" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择Present Modally，然后单击segue并设置标识符，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/d19e4d4ac9c41dfc0813cf949d230ec9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WJdDkcFYREcF1TBqOcn01Q.png"/></div></div></figure><p id="3afa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用以下坐标添加工具栏和UIVIew:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/fb8d3e9a179772c22061562ad7a0c109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P8JJZXxJMSeU0WfZ58hOXQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/636949fa048ac112231c2a52adcf0a4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tMhccV4-qBP3_QpFwMY50Q.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/cb599009b7404338a60c591f66cd1038.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o0frb6QAo6lLiLwEhJaneA.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/233a95b87532208e686d4976eb13b68d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1w84t5tUgE7DRqnwC72Ncg.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/032ce67e3156692c3d14a819aa2b26a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W0ym0k2yM4WyEM-eMkK0Xg.png"/></div></div></figure><p id="cf02" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">别忘了把UIView类设置成“PDFView”！</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/52b898b3de1cf96d8b2ed7014d7d96f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IEOBRV0vEbSIyY4UlKujvw.png"/></div></div></figure><p id="512a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成所有这些后，将以下内容粘贴到您的新<code class="fe ne nf ng nh b">PdfPreviewVC</code>中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="de93" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将<code class="fe ne nf ng nh b">shareButton</code>链接到工具栏按钮，将<code class="fe ne nf ng nh b">pdfView</code>链接到我们添加的主界面视图，当然还有工具栏按钮的分享功能。</p><p id="aae0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意:如果UIView的链接不起作用，确保从故事板助手编辑器侧边栏将该类设置为PDFView。</p><p id="351f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，返回到<code class="fe ne nf ng nh b">ViewController.swift</code>并更新文件，使其看起来像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h1 id="256d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">测试一切</h1><p id="c91f" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">运行应用程序，并填写“玛格丽塔”或任何想到的东西，PDF应该会动态生成。</p><p id="b036" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尝试避免空格或非法URL字符。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/90053804194c1a255cc08003bc183cba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2p2j9sdnVCT4DxuP-USESw.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/0116ab2fe162312aa6adbe2d6c1be022.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aQ9rPPmKlR3ucPpgDkPu4A.png"/></div></div></figure><p id="6d44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在有一个可以从动态数据中生成的饮料菜单，页面也可以动态缩放，多行文本的说明正在快速工作(双关语)。</p><p id="bd09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">干杯。</p><h1 id="5bbb" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">源代码:</h1><p id="2d7a" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">你可以在这里找到最终代码:<a class="ae kv" href="https://github.com/Marcdaou/PDFKit" rel="noopener ugc nofollow" target="_blank">https://github.com/Marcdaou/PDFKit</a></p></div></div>    
</body>
</html>