<html>
<head>
<title>3 Best Practices To Design a Multi-Language Database</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设计多语言数据库的3个最佳实践</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/3-best-practices-to-design-a-multi-language-database-80377ca33d15?source=collection_archive---------11-----------------------#2022-07-19">https://betterprogramming.pub/3-best-practices-to-design-a-multi-language-database-80377ca33d15?source=collection_archive---------11-----------------------#2022-07-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dc32" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">更轻松地存储您的数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/aa7391250a90e4b9a5feafbef9cb71b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_IYkkJ8O8O84epwI"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">杰里米·贝赞格在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="efb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用一个应用程序接触数百万用户是每个开发者的梦想。如果世界各地的用户都可以使用您的应用程序，那么实现这一目标将变得更加容易。因为不是所有的用户都懂英语或者你的目标语言，所以你需要把你的应用程序设计成多语言的。没有多语言数据库，这是不可能的。</p><p id="29b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">设计一个可以轻松扩展到新语言的多语言数据库并不容易。这就是为什么您应该依靠最佳实践的原因。在这里，你会看到为什么你需要一个多语言数据库，三个伟大的多语言数据库设计，以及如何选择一个最适合你的。</p><p id="58e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们来学习关于多语言数据库设计你需要知道的一切。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="10aa" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">你为什么需要一个多语言数据库？</h1><p id="8c9b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">你永远不知道你的项目会增长多少，你为你的朋友开发的小应用程序可能会成为数百万人使用的国际服务。如果你希望你的产品能够在国际范围内扩展，你需要设计它，以便你可以很容易地适应不同的文化和市场。这就是国际化的意义所在。</p><p id="60c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构建一个为国际化做好准备的数据库意味着设计一个可以存储多语言数据的数据库。换句话说，后端应该能够以多种语言提供数据。为此，后端应该连接并从多语言数据库中检索这些数据。</p><p id="25da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，让用户可以在几种语言之间切换是一个很好的特性。这对讲多种语言或非母语的人特别有用。所以，即使你的项目很小，目标是本地市场，你也应该考虑多语言数据库。毕竟，你无法预先知道你的项目会有多成功，哪些用户会使用它。现在，让我们了解一下为什么根据您的需求选择正确的多语言数据库设计至关重要。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="deda" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">为什么应该仔细设计多语言数据库</h1><p id="b6a7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">就时间和精力而言，更改数据库是一项非常昂贵的操作，因为它会引发连锁反应。修改数据库的结构包括改变与之相连的后端。这可能还需要您相应地调整依赖这些后端的前端。正如您所看到的，更改数据库结构不是一个没有后果的操作。因此，您应该设计一个可以轻松伸缩且不必频繁更改的数据库。</p><p id="9f41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以想象，设计多语言数据库有几种方法，每种解决方案都有其优缺点。考虑到数据库结构对应用程序的重要性，您必须明智地设计多语言数据库。这就是为什么你不应该从零开始，而是依靠最佳实践。</p><p id="1e0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们看看一些基于最佳实践的多语言设计。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8ed9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">三种多语言数据库设计</h1><p id="a6f8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们更深入地探讨我个人在为世界各地的初创公司工作的全栈web开发人员的经历中使用的三种多语言设计的利弊。</p><h2 id="2edb" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">1.柱式方法</h2><p id="6e13" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在这种方法中，多语言表中的每个字段都有几个与数据库支持的语言数量相等的列。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/6feb87ae9299e9b22a393c8a34ff69af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Io6M3aFLdJ6tdiOg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">基于列方法的示例</p></figure><p id="e5db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">具体来说，列名模板如下所示:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="3db2" class="mz md it nn b gy nr ns l nt nu">columnName_languageCode</span></pre><p id="25c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">优点</strong></p><ul class=""><li id="8d04" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated"><strong class="lb iu">简单</strong>:容易实现。</li><li id="f22c" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><strong class="lb iu">快速</strong>:不涉及<code class="fe oj ok ol nn b">JOIN</code>或慢速查询。</li><li id="b5fc" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><strong class="lb iu">易处理未翻译字段</strong>:如果某个字段缺少翻译，可以直接使用<code class="fe oj ok ol nn b">COALESCE</code>。比如<code class="fe oj ok ol nn b">COALESCE(name_it, name_en)</code> →如果不是<code class="fe oj ok ol nn b">NULL</code>则返回<code class="fe oj ok ol nn b">name_it</code>，否则返回<code class="fe oj ok ol nn b">name_en</code>默认值。</li></ul><p id="22fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">缺点</strong></p><ul class=""><li id="6bc5" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated"><strong class="lb iu">难以维护</strong>:增加一种新的语言需要更新数据库中所有的多语言表。这也意味着您需要相应地改变ORM映射。</li><li id="5900" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><strong class="lb iu">不可伸缩</strong>:表格中的列数随着应用程序支持的语言数量而增加。</li><li id="ffbf" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><strong class="lb iu">复杂</strong> <code class="fe oj ok ol nn b"><strong class="lb iu">SELECT</strong></code> <strong class="lb iu">条件</strong>:忘掉<code class="fe oj ok ol nn b">SELECT *</code>。您需要在您的<code class="fe oj ok ol nn b">SELECT</code>子句中指定每一列。</li></ul><h2 id="1fb6" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">2.行方法</h2><p id="2b73" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在这种方法中，每种语言对应一行。识别多语言实体的关键是以下复合主键:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="0353" class="mz md it nn b gy nr ns l nt nu">&lt;id, languageCode&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/db087e916628b131b49016f434ab056c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hiKy6s7WYNAOwwVK"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">基于行方法的示例</p></figure><p id="e8df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">优点</strong></p><ul class=""><li id="ee10" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated"><strong class="lb iu">简单</strong>:容易实现。</li><li id="b92b" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><strong class="lb iu">快速</strong>:检索翻译内容只需要<code class="fe oj ok ol nn b">languageCode</code>上的<code class="fe oj ok ol nn b">WHERE</code>条件。</li></ul><p id="fc40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">缺点</strong></p><ul class=""><li id="7090" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated"><strong class="lb iu">复合键</strong>:使用复合主键使得识别元素和<code class="fe oj ok ol nn b">JOIN</code>查询变得更加复杂。</li><li id="2ecd" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><strong class="lb iu">重复内容</strong>:为了简化起见，未翻译的列通常存储默认语言行的列中保存的相同内容。这意味着多语言表格中会有大量重复的内容。</li></ul><h2 id="d7c3" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">3.翻译表方法</h2><p id="3a6d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在这种方法中，多语言表的每一列都是翻译表的外部关键字。换句话说，涉及多语言字段的每个表都有一个翻译表。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/77a298e626ab2a20970f9babe41175fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4CZvLdxE0piL2gcE"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个基于翻译表方法的例子[1]</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/2e74f45ef5a0a139937d2ca89bc57fa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L0vvDaTT7Lv0Xtc1"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个基于翻译表方法的例子[2]</p></figure><p id="a099" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">优点</strong></p><ul class=""><li id="c985" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated"><strong class="lb iu">可伸缩</strong>:添加一种新语言不涉及数据库结构的改变。</li><li id="2d05" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><strong class="lb iu">支持历史数据</strong>:您可以使用翻译表来跟踪实体中每个字段的翻译历史。</li><li id="f992" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><strong class="lb iu">集中</strong>:一个实体的所有翻译都存储在一个地方。</li></ul><p id="87c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">缺点</strong></p><ul class=""><li id="b758" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated"><strong class="lb iu">复杂查询</strong>:查询变得更加复杂，因为与多语言实体相关的信息分布在两个表中。</li><li id="2020" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><strong class="lb iu">慢速查询</strong>:检索与实体相关的所有信息需要与列数一样多的<code class="fe oj ok ol nn b">JOIN</code>。考虑到<code class="fe oj ok ol nn b">JOIN</code>对性能的影响，这很容易成为一个问题。</li><li id="83d2" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><strong class="lb iu">重复表</strong>:它增加了你的数据库在表方面的大小。另外，您需要两个表来定义每个多语言实体。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d74c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">对你来说最好的多语言数据库设计是什么？</h1><p id="ab5c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如您所见，每种多语言数据库设计都有相同的优点和缺点。这意味着没有绝对的首选方法。你必须根据你的要求、需要和目标仔细选择。我个人在不同的项目中使用了这三种方法，并学到了我分享的经验。</p><p id="3a4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">列方法在处理大数据时特别有用，尤其是从拥有一个包含几百万行表的数据库的角度来看，当您根本负担不起<code class="fe oj ok ol nn b">JOIN</code>查询或重复内容时。尽管列方法不是最具可伸缩性的解决方案，但它是处理大数据的唯一可行的设计。</p><p id="ba2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，当你公司在当地市场经营的分支机构有行动自由时，逐行方法是有用的。在这种情况下，内容的重复甚至可以成为一种优势。</p><p id="6932" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，如果您正在寻找一个优雅且可伸缩的解决方案，并且不介意性能缺陷，那么表格方法是正确的设计。表格方法最适合于您知道数据不会增长太大的项目。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6452" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="10ee" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">设计一个可以存储多语言数据的数据库对于帮助您的企业实现国际化发展至关重要。此外，它还允许非母语用户使用您的应用程序。更改数据库是一项复杂而耗时的操作，对应用程序架构有着不可忽视的影响。这就是为什么您应该从一开始就将数据库设计成多语言的。</p><p id="7d6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，您了解了设计多语言数据库的三种不同方法，研究了它们的优缺点，并详细讨论了哪种方法最适合您。</p><p id="7b22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！我希望这篇文章对你有所帮助。如有任何问题、意见或建议，请随时联系我。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="db38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oo">原载于2022年7月19日</em><a class="ae ky" href="https://arctype.com" rel="noopener ugc nofollow" target="_blank"><em class="oo">【https://arctype.com】</em></a><em class="oo">。</em></p></div></div>    
</body>
</html>