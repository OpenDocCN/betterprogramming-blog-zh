<html>
<head>
<title>PyCharm, Mac, Touch Bar, and Code Coverage = Magic Coverage Button</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PyCharm、Mac、Touch Bar和代码覆盖率=神奇覆盖率按钮</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/pycharm-mac-touch-bar-coverage-fun-tooling-a285e9028efc?source=collection_archive---------7-----------------------#2019-09-11">https://betterprogramming.pub/pycharm-mac-touch-bar-coverage-fun-tooling-a285e9028efc?source=collection_archive---------7-----------------------#2019-09-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b465" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为您的触摸条配置图标</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/33f121c204416b9954362041c4797ada.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BiopWRcn6D8I_thawOu3hA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">帕特里克·沃德在<a class="ae kv" href="https://unsplash.com/search/photos/mac?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="e488" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先也是最重要的，我不是100%代码覆盖率的支持者，也没有设定一个数字作为你的代码覆盖率目标。如果你看看<a class="ae kv" href="https://en.m.wikipedia.org/wiki/Goodhart's_law" rel="noopener ugc nofollow" target="_blank">古德哈特定律</a>或者<a class="ae kv" href="https://en.wikipedia.org/wiki/Pareto_principle" rel="noopener ugc nofollow" target="_blank">帕累托法则</a>，你就会明白神奇的数字是如何误导人的。</p><p id="67bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我相信代码覆盖率有助于您识别差距，并在提高代码质量时支持您的决策。</p><p id="34c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">介绍完之后，我们来看看这张图片:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/430bd874e39f02b377a889b3c2c300f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4drFoYDs9_38RTJ8XfAKcQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图一。覆盖范围魔法按钮</p></figure><p id="9f34" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您是否想知道图像中有标记的按钮是做什么用的？你有没有把你的<a class="ae kv" href="https://support.apple.com/en-us/HT207055" rel="noopener ugc nofollow" target="_blank"> Mac Touch bar </a>发挥到极致？</p><p id="fbbb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我告诉你，你可以配置一个图标，当你打开PyCharm IDE时，这个图标就会出现在你的Touch Bar上，当你按下它时，会发生这样的事情:</p><ol class=""><li id="396a" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">在您的工作区中运行单元测试。</li><li id="5aaa" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">生成覆盖文件。</li><li id="9d9a" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">打开Chrome并向您展示覆盖率结果。</li></ol><p id="bed9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来看一个现场演示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mh"><img src="../Images/25378976f0b51111185fff15692778fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*pJXrL6313d7hYXZZSJwdyQ.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图二。覆盖按钮的执行</p></figure><p id="a735" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">真的很酷！</p><p id="3dd1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以通过创建一个快捷键来达到同样的目的，但是这有什么意思呢？</p><p id="7a47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看看如何配置这个神奇的覆盖率按钮。</p></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><h1 id="c46c" class="mp mq iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">1.找一个好看的图标</h1><p id="0258" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">我发现了这个免费图标<a class="ae kv" href="https://www.flaticon.com/packs/science-and-technology-9" rel="noopener ugc nofollow" target="_blank">网站</a>，这个吸引了我的注意:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/ac2bee544e11c34ed391705d46e7785b.png" data-original-src="https://miro.medium.com/v2/resize:fit:64/format:webp/1*AhXoqOFYFNKX3awGJAn2GQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图3。覆盖图标。来自www.flaticon.com的Freepik制作的图标</p></figure></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><h1 id="be14" class="mp mq iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">2.创建您的覆盖率脚本</h1><p id="85af" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">我们将使用此脚本来运行覆盖作业:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="344a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该脚本执行以下操作:</p><ol class=""><li id="b10d" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">激活工作区中的<a class="ae kv" href="https://virtualenv.pypa.io/" rel="noopener ugc nofollow" target="_blank">虚拟按钮</a>。</li><li id="a26d" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">使用覆盖标志执行<a class="ae kv" href="https://docs.pytest.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> pytest </a>。</li><li id="2b63" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">打开Chrome，传递覆盖报告文件。</li></ol><p id="8e77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你还需要一些配置文件，看看这个例子<a class="ae kv" href="https://github.com/mesmacosta/coverage_button_sample" rel="noopener ugc nofollow" target="_blank"> Git repo </a>。这就是在演示gif中执行的那个。你需要的文件是:<code class="fe np nq nr ns b">.coveragerc</code>和<code class="fe np nq nr ns b">requirements.txt</code>里面的依赖关系。</p></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><h1 id="2c07" class="mp mq iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">3.将脚本添加到Mac Touch Bar</h1><p id="dc8b" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">在PyCharm IDE中，进入<em class="nt">首选项</em>-&gt;-T7】外部工具:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/ae09da7b55cd6524d73b081eca186ae8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vl5QpEIG1BLacVKCOxhSVQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图4。PyCharm外部工具配置</p></figure><p id="5b3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建一个新的配置，并添加覆盖率脚本作为程序。记得将<em class="nt">工作目录</em>设置为您工作空间的根目录。</p><p id="1ca3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建外部工具后，转到<em class="nt">首选项</em>内的<em class="nt">外观&amp;行为</em>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/e420c96c3c76f281d3b16ff4540fddb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HcENsUByhKVe0bdsTBb9VQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图5。PyCharm外观和行为</p></figure><p id="9c61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择<em class="nt">菜单和工具栏</em>选项。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/fa50a9469786b0cfd194f510f0e1da97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rRY0bFqNIHMCVzgdWbpcSw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图6。PyCharm菜单和工具栏</p></figure><p id="6be7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择<em class="nt">触摸条</em>选项- &gt; <em class="nt">默认</em>。然后，选择一个空选项，即上图中高亮显示的值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/15c01031729d5e5b5d3955b49abd3a95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RQmEEX49draoolQ4R_zIbQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图7。选择要添加的操作</p></figure><p id="785c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，点击<em class="nt"> + </em>，添加你的动作，这将是我们创建的外部工具，<code class="fe np nq nr ns b">coverage-workspace</code>。</p><p id="c5b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在OK按钮的顶部，有一个<em class="nt">图标</em>选项，点击文件夹选择你下载的图标。</p><p id="3737" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，您的新Touch Bar操作将被配置，您将看到如下图所示的图标:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/c0a4f90fc44d57ccfdd5b3c2182d6182.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IajbulZIE1__UFjPe7Ql9g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图9。覆盖率-工作区活动</p></figure><p id="dedd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样！现在，享受你的覆盖按钮！</p></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><h1 id="1746" class="mp mq iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">资源</h1><ol class=""><li id="2bdd" class="lt lu iq ky b kz nh lc ni lf nz lj oa ln ob lr ly lz ma mb bi translated">GitHub回购:<a class="ae kv" href="https://github.com/mesmacosta/coverage_button_sample" rel="noopener ugc nofollow" target="_blank">https://github.com/mesmacosta/coverage_button_sample</a></li><li id="8b7f" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">MAC Touch Bar:<a class="ae kv" href="https://support.apple.com/en-us/HT207055" rel="noopener ugc nofollow" target="_blank">https://support.apple.com/en-us/HT207055</a></li></ol></div></div>    
</body>
</html>