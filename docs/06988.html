<html>
<head>
<title>ROAMEXT — Roam Research Extended: A Little Piece of Code With Mighty Power</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ROAMEXT——Roam Research Extended:一小段具有强大功能的代码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/roamext-roam-extended-a-little-piece-of-code-with-mighty-power-a18184c0c5be?source=collection_archive---------6-----------------------#2020-11-24">https://betterprogramming.pub/roamext-roam-extended-a-little-piece-of-code-with-mighty-power-a18184c0c5be?source=collection_archive---------6-----------------------#2020-11-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a6bb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Roam中更好的样式</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f32bc7de6a99d9a66113c3354c7b8f45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*efOMY-Lah9GwkX6z"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@kimsondoan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Kimson Doan </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="1f2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">【2020年12月15日更新: ROAMEXT 1.x现已过时:)。它所提供的功能已经成为漫游的原生功能。然而，如果你想看看你能用block标签做些什么，请继续阅读(只是要注意在官方实现中的术语有一点不同)。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="7901" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇短文中，我想与你分享我为<a class="ae ky" href="https://roamresearch.com/" rel="noopener ugc nofollow" target="_blank"> Roam </a>研究编写的一小段代码，名为<a class="ae ky" href="https://roamresearch.com/#/app/CatoMinor-public/page/QNv9d89RI" rel="noopener ugc nofollow" target="_blank"> ROAMEXT (= Roam extended) </a>。这是一个所谓的JavaScript插件，你可以安装在你的图形中。但是不要担心，你不必为了理解它能为你做什么而去理解它是如何工作的。</p><p id="afec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有些人可能会问，“为什么又是一个漫游插件？”已经有这么多了。他们正在做非常惊人的事情！他们添加了<a class="ae ky" href="https://gist.github.com/thesved/6574586e102332ab4a010e3dfaa9c4e7" rel="noopener ugc nofollow" target="_blank">图库</a>、<a class="ae ky" href="https://twitter.com/shawnpmurphy8/status/1314877901297262593?s=20" rel="noopener ugc nofollow" target="_blank">过滤属性表</a>、<a class="ae ky" href="https://twitter.com/mmuehlenstein/status/1299624448614715392?s=20" rel="noopener ugc nofollow" target="_blank">图标到你的链接</a>、<a class="ae ky" href="https://roamresearch.com/#/app/roam-tricks/page/pib_T24F4" rel="noopener ugc nofollow" target="_blank">更多的</a>。然而，我是一个修补者，我错过了一件事情，它不会为我做一个特定的任务，而是允许我以一种全新的方式定制我的漫游体验。</p><p id="b269" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了理解ROAMEXT做什么，让我们快速回顾一下Roam中的普通标签是如何工作的。每个<code class="fe mc md me mf b">#tag</code>生成一个特殊的HTML代码，其属性包含它的值。这听起来可能很难，但实际上非常简单。假设我们有一个名为<code class="fe mc md me mf b">#roam</code>的标签。如果我们查看代码，我们会看到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mg"><img src="../Images/9ab7301c9a4ab4e0fbf4c56d14fbc2f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w-6kTrEwv1vnL8aPXxUPiA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">#roam标签的HTML代码</p></figure><p id="b333" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在HTML代码中，我们的<code class="fe mc md me mf b">#roam</code>标签夹在开始标签<code class="fe mc md me mf b">&lt;span...&gt;</code>和结束标签<code class="fe mc md me mf b">&lt;/span&gt;</code>之间。前者包含具有不同值的所谓属性，例如<code class="fe mc md me mf b">tabindex</code>。你知道接下来会发生什么吗？那就是属性<code class="fe mc md me mf b">data-tag</code>和值<code class="fe mc md me mf b">roam</code>(也就是我们没有<code class="fe mc md me mf b">#</code>的标签)。</p><p id="5e4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这可能看起来很小，但它给了Roam定制者巨大的力量。例如，它允许我们定义一个简单的样式规则:将<code class="fe mc md me mf b">#roam</code>后的任何高亮文本更改为特定的颜色——或者您甚至可以定义表格或看板的外观！所有这些都使用一种简单的样式语言CSS——层叠样式表。然而，所有定制者都面临一个巨大的限制。我们不能使用标签来格式化我们的块。原因？<code class="fe mc md me mf b">#tags</code>只能影响跟随他们的东西。</p><p id="3aa0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么我的ROAMEXT扩展是做什么的呢？它会在您的块中寻找变化，一旦看到新的标签，它就会获取它的值并保存到父块中一个名为<code class="fe mc md me mf b">data-tags</code>的特殊属性中。这个属性被称为<code class="fe mc md me mf b">data-tags</code>(复数)，因为它可以包含任意数量的标签。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/5e554c5f29f146cec5e61991b9a8aacb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ruppu7eT2vXc7ztbCO8cCA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ROAMEXT将所有标记的值保存到data-tags属性中</p></figure><p id="a08f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为它在父块中，所以您现在可以影响它的外观，但是不能影响任何子块的外观。</p><p id="8497" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了能够做到这一点，该脚本还将完全相同的标记保存到您的块及其子块所拥有的共同祖先中，保存到一个名为<code class="fe mc md me mf b">data-tags-up</code>的特殊属性中(抱歉，您可能已经注意到，我不擅长给事物命名)。从技术上讲，只有这个可以做所有的事情。但是，将这些值保存在这两个地方会更方便，因为这样可以缩短CSS样式代码。</p><p id="51a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们得到的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/80176c94118c79f42afd02c7106225ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hq4pG09CwxIsuhB5SLiRPA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ROAMEXT将所有标记的值也保存到data-tags-up属性中</p></figure><p id="734c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">说明其工作方式的最佳方式是下面的示例，该示例说明了<code class="fe mc md me mf b">data-tags</code>和<code class="fe mc md me mf b">data-tags-up</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/341f7e6b7262bf21dc2aede54ab70c5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_tVwh_CDt2tdrg5O"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用不同属性的示例</p></figure><p id="17c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mc md me mf b">#redborder</code>仅使用<code class="fe mc md me mf b">[data-tags~="redborder"]</code>作为其选择器，并在块周围创建一个红色边框，只是没有任何子块。</p><p id="d495" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mc md me mf b">#orangeborder</code>使用更高的<code class="fe mc md me mf b">[data-tags-up~=”orangeborder"]</code>匹配该块及其子块的共同祖先。这使得它非常适合给整个街区上色。</p><p id="4362" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mc md me mf b">#blueborder</code>也使用<code class="fe mc md me mf b">data-tags-up</code>；但是，它指定不选择整个有子块的块，而只选择它的子块<code class="fe mc md me mf b">&gt; div:nth-child(2)</code>。</p><p id="a529" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意一件重要的事情:在<code class="fe mc md me mf b">data-tag</code>(即，在单个标签的情况下)我们使用<code class="fe mc md me mf b">=</code>操作符来匹配标签(像<code class="fe mc md me mf b">[data-tag="Roam"]</code>，这里我们必须在<code class="fe mc md me mf b">data-tags</code>和<code class="fe mc md me mf b">data-tags-up</code>中使用<code class="fe mc md me mf b">~=</code>操作符。有一个很好的理由，但是超出了本文的范围:)。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6ae5" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">关于ROAMEXT的三个例子</h1><p id="a01d" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">现在是一些真实例子的时候了，从简单的例子到更复杂的例子。</p><h2 id="de81" class="nh ml it bd mm ni nj dn mq nk nl dp mu li nm nn mw lm no np my lq nq nr na ns bi translated">大宗报价</h2><p id="3db1" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">那么我们能做些什么呢？我的基本方案是将它用于块报价——这可能是Roam中最需要的缺失特性之一。我所需要的只是下面使用<code class="fe mc md me mf b">data-tags</code>的简单代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/cdbe501ae425413309677782169442f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xdriMvhoxUzjfE8sGCGPPw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">块引用的简单CSS</p></figure><p id="0a82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我可以简单的写<code class="fe mc md me mf b">#bq</code>然后…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/8107e2b1df4afb53d2ac13024f383578.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nG0i3dMmOhGnK00nRzzupQ.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建批量报价非常容易…</p></figure><p id="cbe2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">瞧，一个完整的报价！</p><p id="161a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我想让<code class="fe mc md me mf b">#bq</code>消失，我只需要添加一个简单的规则:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/a4c714f3e2cc726f2e24342e95363d17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l4XLzE7kBAE5ObKyEu_xRQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">如何隐藏标签</p></figure><p id="2ee1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在它是完美的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/cde1a5b70109c60af6cb6d602ba29136.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z5dtsUcPKa5ijf0UWsqLdw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们大宗报价的最终版本</p></figure><p id="0b55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们转向更复杂的情况。</p><h2 id="aa80" class="nh ml it bd mm ni nj dn mq nk nl dp mu li nm nn mw lm no np my lq nq nr na ns bi translated">彩色块(有和没有子节点)</h2><p id="8363" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">从基本意义上说，我们已经有了色块。我们的<code class="fe mc md me mf b">#bq</code>与此无异；我们应该稍微改变一下它的边框:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/dec1e8e4d459dfbca43a96d0db590176.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xD1_0U2KdpIWDoQ9HUG99w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从方块报价到彩色方块</p></figure><p id="d3a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，如果我们想拥有包括他们孩子在内的彩色积木呢？是时候前进了！我们将使用<code class="fe mc md me mf b">data-tags-up</code>来创建彩色块，以打破outliners倾向于成为的可怕的匿名子弹墙(Roam在这里也不例外)。</p><p id="5fe9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其实我们不用做太多。如果我们简单地在我们的<code class="fe mc md me mf b">#bq</code>代码中将<code class="fe mc md me mf b">data-tags</code>改为<code class="fe mc md me mf b">data-tags-up</code>，我们会得到这样的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/c32961d8f97faedd1fba550bcce99f97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZXuB74rEdFyf-MFq9UKIig.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">给积木涂上颜色</p></figure><p id="5cbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们刚刚把<code class="fe mc md me mf b">data-tags</code>改成了<code class="fe mc md me mf b">data-tags-up</code>。如果我们只想给块的<strong class="lb iu"> </strong>子块着色，我们可以给<code class="fe mc md me mf b">[data-tags-up~="bq"]</code>附加一个短字符串，表示<code class="fe mc md me mf b">&gt; div:nth-child(2)</code>，即选择第二个子块<code class="fe mc md me mf b">div</code>(这是一个包含子块的容器)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/cd77747d659c7259407bc6f632b04d7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mn68gxlemIE8XmVXGoUDFw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">只给孩子上色</p></figure><p id="5a3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在您可以将您的<code class="fe mc md me mf b">#bq</code>重命名为例如<code class="fe mc md me mf b">block:grey</code>，适当地更改代码，您就可以开始了。</p><p id="9314" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你不想自己想出所有的颜色块，查看本文的伙伴网站中的<a class="ae ky" href="https://roamresearch.com/#/app/CatoMinor-public/page/Hjcemzax9" rel="noopener ugc nofollow" target="_blank">，它包含一个现成的解决方案，你只需要复制到你的图表中。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/b9f2c4b97cb6f30403aa6e59dcd4e98e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dbQ_BKxj1Q-QOkf2NHJwbg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">彩色积木</p></figure><h2 id="3b71" class="nh ml it bd mm ni nj dn mq nk nl dp mu li nm nn mw lm no np my lq nq nr na ns bi translated">粘性块</h2><p id="654f" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">还记得ROAMEXT保存了<code class="fe mc md me mf b">data-tags</code>和<code class="fe mc md me mf b">data-tags-up</code>中所有标签的列表吗？这意味着我们实际上可以组合不同的标签。</p><p id="8a5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们想让我们的彩色积木粘在一起。我们可以重新定义它的代码，但是更容易的是简单地创建另一个<code class="fe mc md me mf b">#tag </code>——例如<code class="fe mc md me mf b">#sticky </code>——来完成这一项工作。然后，我们可以将它添加到我们想要的任何块中。而我们的<code class="fe mc md me mf b">#sticky</code>的内容应该是什么？只是这个:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/a9b49273b24bdeb288dc24372888fa62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XxDNs9HfWvrg3fm0BWggrA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个简单的粘性分组码</p></figure><p id="a932" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果呢？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/97d0cc84c70a2f7357169b560be2fb51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*VX46eYV4r4Q2b1nZzTnC5g.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一块黏糊糊的东西</p></figure><p id="4f79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">重要提示:</strong>如果<code class="fe mc md me mf b">#sticky</code>没有正确覆盖其他元素，请尝试更改<code class="fe mc md me mf b">z-index</code>。数字越高，它在其他元素前面的位置就越多。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="b0a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你会在我的这篇文章的伙伴页面上找到代码。</p></div></div>    
</body>
</html>