<html>
<head>
<title>Jetpack Compose: Scrollable Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jetpack Compose:可滚动组件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/jetpack-compose-scrollable-components-2edb34aa9094?source=collection_archive---------5-----------------------#2020-11-04">https://betterprogramming.pub/jetpack-compose-scrollable-components-2edb34aa9094?source=collection_archive---------5-----------------------#2020-11-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f8c5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">实现RecyclerView的新方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/cf1e591ef50044e368b9c14d02d7c51a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cARXPbPE1c30JSzTodg_wg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="1834" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，您将学习如何在<a class="ae lu" href="https://developer.android.com/jetpack/compose" rel="noopener ugc nofollow" target="_blank"> JetPack Compose </a>中创建可滚动列表。Compose最近从开发阶段进入了alpha阶段，所以我们将讨论一个不同于我以前关于列表的JetPack Compose文章的实现。坚持到最后，了解新的Compose组件。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e10c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">介绍</h1><p id="58b6" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">在我们通常的Android UI设计中，也就是XML布局，我们有像<code class="fe mz na nb nc b">RecyclerView</code>这样的小部件来有效地显示大型数据集。我同意<code class="fe mz na nb nc b">RecyclerView</code>已经解决了许多痛点，但是问题是有太多的样板代码。</p><p id="aaaf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们需要覆盖一堆功能— <code class="fe mz na nb nc b">onCreateViewHolder</code>、<code class="fe mz na nb nc b">onBindViewHolder</code>、<code class="fe mz na nb nc b">getItemCount</code>等等。在这些函数中，我们需要一直编写相同的代码模板。此外，如果您需要任何额外的功能，我们需要自己实现它们。我同意这是为了最好的性能，但这太难了。</p><p id="16c1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就是我认为JetPack Compose大放异彩的地方。构建声明性UI使开发人员的上下文与相同的编程语言(Kotlin)保持一致，并减少了样板代码。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="58b9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">可滚动合成组件</h1><p id="4f3b" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">所以今天的主题是JetPack Compose中的可滚动组件。Compose提供了几种显示垂直或水平列表的方法。</p><p id="0c5e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nd">注意:Jetpack Compose是一个正在积极开发的框架。每天，数百名来自谷歌的聪明人都在为此努力。我们在本文中使用的代码可能会随着更新而改变。</em></p><h2 id="efab" class="ne md it bd me nf ng dn mi nh ni dp mm lh nj nk mo ll nl nm mq lp nn no ms np bi translated">ScrollableRow或ScrollableColumn</h2><p id="a2d1" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">这些相当于我们现在环境下的<code class="fe mz na nb nc b">scrollview</code>。当内容的高度(或宽度)大于屏幕尺寸时，就会滚动内容。</p><h2 id="b598" class="ne md it bd me nf ng dn mi nh ni dp mm lh nj nk mo ll nl nm mq lp nn no ms np bi translated">LazyRowFor或LazyColumnFor</h2><p id="2d21" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">这些垂直(或水平)滚动列表只对当前可见的项目进行组合和布局，这类似于传统框架中<code class="fe mz na nb nc b">RecyclerView</code>及其适配器的行为。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5b8c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">让我们开始编码吧</h1><p id="7b04" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">我们的目标是显示一个电影列表，所以我们需要创建一个数据类，包含显示电影项目所需的所有属性。为了简单起见，我们将显示电影的名称和图像。</p><p id="9940" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，让我们创建数据类:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="806c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，我们需要创建一个可组合的函数，将电影类和click-listener作为参数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="cc34" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里我们用<code class="fe mz na nb nc b">Row</code>横向排列电影图像和名称。要显示文本，我们只需基本的文本兼容。对于图像，我们使用<code class="fe mz na nb nc b">Coil</code>。现在我们需要膨胀可滚动组件中的<code class="fe mz na nb nc b">MovieView</code>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="82e9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">ScrollableRow或ScrollableColumn</h1><p id="71aa" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">我们试试<code class="fe mz na nb nc b">ScrollableColumn</code>显示电影列表。我说过，这些就像<code class="fe mz na nb nc b">scrollview</code>。我们需要使用列表在<code class="fe mz na nb nc b">ScrollableColumn</code>组件中添加一些视图。在此之前，让我们看看语法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="7e36" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这与Jetpack Compose中的任何其他组件一样——一堆与滚动、子元素和修饰符相关的参数，用于根据我们的需要调整UI。</p><p id="52aa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要实现一个简单的可滚动项目列表，我们只需创建一个可组合的函数，并传递要显示的项目列表。如果您有任何其他需求，如单击或回调，请将高阶函数或侦听器与列表一起传递:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="dc4d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这个函数中，我们刚刚声明了一个<code class="fe mz na nb nc b">ScrollableColumn</code>,用一个修改器来填充屏幕的最大尺寸。在<code class="fe mz na nb nc b">ScrollableColumn</code>块中，我们迭代了电影列表，并膨胀了<code class="fe mz na nb nc b">MovieView</code>可组合函数。为了提高美观，我们在每个项目后添加了分隔条。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9d0d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">LazyRowFor或LazyColumnFor</h1><p id="4636" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">可滚动组件的懒惰版本是最简单的。让我们试试<code class="fe mz na nb nc b">LazyColumnFor</code>显示电影列表。我说过，这些组件和<code class="fe mz na nb nc b">RecyclerView</code>差不多。我们需要使用列表在<code class="fe mz na nb nc b">LazyColumnFor</code>组件中添加一些视图。在此之前，让我们看看语法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="cefd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">来到实现部分，和<code class="fe mz na nb nc b">ScrollableColumn</code>差不多。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="8f06" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以注意到的惰性列表实现与scrollables的唯一区别是，我们不需要创建循环并手动膨胀列表项。相反，<code class="fe mz na nb nc b">LazyColumnFor</code>和<code class="fe mz na nb nc b">LazyRowFor</code>将为我们做的是只放置对用户可见的视图。</p><p id="863a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">组合组件将处理机制的其余部分，以便有效地加载项目。这不是很棒吗？不再担心视图持有人模式。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b996" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="6193" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">正如我所说，Jetpack Compose刚刚转移到alpha。有一些关键的功能仍然需要实现，比如基于位置或视图滚动列表。但是不要担心:Compose正在快速发展，开发人员正在习惯它。也许到2020年底，我们可以期待一个Jetpack Compose，拥有构建花哨应用程序所需的所有特性。</p><p id="6305" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">目前就这些。希望你学到了有用的东西。感谢阅读。</p></div></div>    
</body>
</html>