<html>
<head>
<title>Angular Virtual Scrolling — ngVirtualScrolling</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度虚拟滚动— ngVirtualScrolling</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/angular-virtual-scrolling-ngvirtualscrolling-159e1c66c63b?source=collection_archive---------1-----------------------#2018-10-24">https://betterprogramming.pub/angular-virtual-scrolling-ngvirtualscrolling-159e1c66c63b?source=collection_archive---------1-----------------------#2018-10-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ed05" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何在Angular 7中实现虚拟滚动</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/358450113b7e8a6f776d9f9a8b3717c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*XAMCGVvWbYae6_Zc.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">角度虚拟滚动演示中间</p></figure></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="b597" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">介绍</h1><p id="75c5" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">是啊！Angular 7 推出了一些很酷的新功能。在这篇文章中，我将解释一下Angular 7的一个特性——虚拟滚动。</p><p id="0879" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">到本文结束时，您将拥有一个应用程序，该应用程序使用虚拟滚动特性从数据库中获取真实数据并将其绑定到UI。我不知道你是怎么想的，但是我对开发一个具有这个特性的示例应用程序感到非常兴奋。</p><p id="b4ff" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">说够了。看一看<a class="ae mp" href="https://github.com/SibeeshVenu/ngVirtualScrolling" rel="noopener ugc nofollow" target="_blank">源代码</a>，然后让我们进入设置。</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="1387" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">正在创建ngVirtualScrolling应用程序</h1><p id="c1da" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">我们要做的第一件事是创建一个虚拟应用程序。</p><h2 id="2f08" class="mv lc it bd ld mw mx dn lh my mz dp ll mc na nb ln mg nc nd lp mk ne nf lr ng bi translated">安装角度CLI</h2><p id="c1fe" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">是的，正如你所猜测的，我们正在使用Angular CLI。如果你还没有安装Angular CLI，我建议你安装。对于Angular来说，这是一个非常棒的CLI工具。您可以通过运行以下命令来安装Angular CLI。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="17ef" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">一旦我们设置了这个项目，我们将使用Angular CLI命令。前往Angular到<a class="ae mp" href="https://cli.angular.io/" rel="noopener ugc nofollow" target="_blank">看看你能用CLI </a>做的一切。</p><h2 id="e0e4" class="mv lc it bd ld mw mx dn lh my mz dp ll mc na nb ln mg nc nd lp mk ne nf lr ng bi translated">生成新项目</h2><p id="cde2" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">现在是时候生成我们的新项目了。我们可以使用下面的命令来做到这一点。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="f5c1" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">您将能够看到这个CLI为我们所做的所有艰苦工作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/f24ba91d5e423cb9ccd2d4e308d0ce44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/0*iijKGJF-KFZbCr2q.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">生成ng项目</p></figure><p id="e5fb" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">现在我们已经创建了我们的应用程序，让我们运行它，看看它是否工作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/c869156cb196becb9c05924d53b348ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/0*CtIlEsgHn2JLWW86.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">构建并在浏览器中打开</p></figure><p id="8ebb" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">我们将使用棱角分明的材料进行设计。现在安装它，连同动画和cdk。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi nk"><img src="../Images/5bf65dfbc855917f9b29369bfd177298.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*m81xmNkWRoZivRF0.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">安装材料、cdk和动画</p></figure><p id="5eeb" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">对于Angular 6+版本，您也可以通过执行以下命令来完成此操作。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h2 id="6ac6" class="mv lc it bd ld mw mx dn lh my mz dp ll mc na nb ln mg nc nd lp mk ne nf lr ng bi translated">生成组件</h2><p id="4f1a" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">现在我们的项目已经准备好了，我们可以开始创建组件了。同样，CLI将免费为我们完成这项工作。如果是自由开发人员做这项工作，你认为你会付给他们多少钱？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi nk"><img src="../Images/d772385c0ad36512b0785cfbe48e4500.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BsRIIE1CEJpCNHsK.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">ng g c主页</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi nk"><img src="../Images/2282c7dcc6f793f69f6f585023cbafa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*y5qPXLe8uegF1b5c.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">天然气集管</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi nk"><img src="../Images/4ea43d63f757b12cc60e4c3ccebf498f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8NA9rED7q45lAkA7.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">ng g c页脚</p></figure><p id="5ce4" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">现在我们有三个组件可以使用。让我们开始吧。</p><h2 id="1d6c" class="mv lc it bd ld mw mx dn lh my mz dp ll mc na nb ln mg nc nd lp mk ne nf lr ng bi translated">设置标题组件</h2><p id="ad1a" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">我将只编辑标题组件的HTML，而不添加任何逻辑。你可以添加任何你想添加的东西。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h2 id="8107" class="mv lc it bd ld mw mx dn lh my mz dp ll mc na nb ln mg nc nd lp mk ne nf lr ng bi translated">设置页脚组件</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h2 id="25b0" class="mv lc it bd ld mw mx dn lh my mz dp ll mc na nb ln mg nc nd lp mk ne nf lr ng bi translated">设置app-routing.module.ts</h2><p id="6c31" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">我们将专门创建一条回家的路线。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h2 id="c31f" class="mv lc it bd ld mw mx dn lh my mz dp ll mc na nb ln mg nc nd lp mk ne nf lr ng bi translated">在app.component.html设置路由器出口</h2><p id="df23" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">现在我们有了路线，我们可以设置出口。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h2 id="5a7a" class="mv lc it bd ld mw mx dn lh my mz dp ll mc na nb ln mg nc nd lp mk ne nf lr ng bi translated">设置app.module.ts</h2><p id="0da0" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">每个Angular应用程序至少有一个NgModule类。它被命名为<code class="fe np nq nr ns b">AppModule</code>，驻留在一个名为<code class="fe np nq nr ns b">app.module.ts</code>的文件中。如果你想了解更多关于架构的知识，请查看<a class="ae mp" href="https://angular.io/guide/architecture-modules" rel="noopener ugc nofollow" target="_blank">角度指南</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="ffda" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">你看到那边的<code class="fe np nq nr ns b">ScrollingModule </code>了吗？您应该导入它以使用虚拟滚动。它驻留在<code class="fe np nq nr ns b">@angular/cdk/scrolling</code>文件中。您可能已经注意到，我们已经在提供商的阵列中添加了一个名为<code class="fe np nq nr ns b">MovieService </code>的服务。我们现在将创建一个。</p><h2 id="e47b" class="mv lc it bd ld mw mx dn lh my mz dp ll mc na nb ln mg nc nd lp mk ne nf lr ng bi translated">创建电影服务</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="a533" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">由于我想让这一块尽可能短，所以我没有对服务类做太多，也没有实现错误机制和其他东西。这项服务将从在线数据库<a class="ae mp" href="https://www.themoviedb.org/" rel="noopener ugc nofollow" target="_blank"> TMDB </a>获取电影。在这个作品和仓库里，我用我的。我强烈建议你创建自己的而不是用我的。</p><p id="406d" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">现在让我们尝试设置配置文件。</p><h2 id="747e" class="mv lc it bd ld mw mx dn lh my mz dp ll mc na nb ln mg nc nd lp mk ne nf lr ng bi translated">设置配置</h2><p id="7842" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">配置文件允许你以一种方便的方式安排事情。您必须在使用的所有项目中实现。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h2 id="1afa" class="mv lc it bd ld mw mx dn lh my mz dp ll mc na nb ln mg nc nd lp mk ne nf lr ng bi translated">创建电影组件</h2><p id="2f25" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">现在让我们创建一个新的组件来加载电影。基本上，我们将在<code class="fe np nq nr ns b">cdkVirtualFor </code>中使用这个电影组件，这样它每次都会调用这个组件并呈现它。我们的电影组件将有如下的HTML。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="3dec" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">typescript文件将有一个带有<code class="fe np nq nr ns b">@Input</code> decorator的属性，这样我们可以从home组件向它输入值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h2 id="3eea" class="mv lc it bd ld mw mx dn lh my mz dp ll mc na nb ln mg nc nd lp mk ne nf lr ng bi translated">设置主页组件</h2><p id="cf14" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">这是主要部分，虚拟滚动发生的地方。让我们现在设计HTML。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="ae9a" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">这里<code class="fe np nq nr ns b">itemSize </code>是强制属性。您可以根据想要加载到组件中的数据量给出任何数字。我们使用<code class="fe np nq nr ns b">[movie]=“movie”</code>将这些值输入到我们的app-movie组件中。</p><p id="6815" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">现在让我们看看typescript代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="b5a2" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">我有一个父类<code class="fe np nq nr ns b">HomeComponent </code>，在那里我从一个类<code class="fe np nq nr ns b">MyDataSource</code>中获取数据，这个类扩展了<code class="fe np nq nr ns b">DataSource&lt;Movie | undefined&gt;</code>。这个<code class="fe np nq nr ns b">DataSource </code>是一个抽象类，驻留在<code class="fe np nq nr ns b">@angular/cdk/collections</code>中。</p><p id="cbd5" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">由于<code class="fe np nq nr ns b">MyDataSource</code>类是从<code class="fe np nq nr ns b">DataSource</code>扩展而来的，我们必须覆盖两个函数——<code class="fe np nq nr ns b">connect()</code>和<code class="fe np nq nr ns b">disconnect()</code>。根据<a class="ae mp" href="https://material.angular.io/cdk/scrolling/overview" rel="noopener ugc nofollow" target="_blank">角度材质文档</a>，虚拟滚动视口将调用<code class="fe np nq nr ns b">connect </code>方法来接收一个流，该流发出应该被渲染的数据数组。当视口被销毁时，视口将调用<code class="fe np nq nr ns b">disconnect </code>，这可能是清理在连接过程中注册的任何订阅的正确时间。</p><p id="1766" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">在<code class="fe np nq nr ns b">connect </code>方法中，我们调用自己的服务来获取数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h2 id="26d6" class="mv lc it bd ld mw mx dn lh my mz dp ll mc na nb ln mg nc nd lp mk ne nf lr ng bi translated">自定义样式</h2><p id="2a57" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">我对一些组件应用了一些自定义样式，你可以在GitHub的资源库中看到。如果您正在从头开始创建应用程序，请复制这些内容。</p><h2 id="d23c" class="mv lc it bd ld mw mx dn lh my mz dp ll mc na nb ln mg nc nd lp mk ne nf lr ng bi translated">输出</h2><p id="9cda" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">一旦你实现了所有的步骤，你将拥有一个使用Angular 7虚拟滚动和实际服务器数据的应用程序。现在让我们运行应用程序，看看它是如何工作的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/b1578b173e2447b6e83419631d0641f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/0*6tLHpRpbKqQqK4Rr.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">角度虚拟滚动演示开始</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/358450113b7e8a6f776d9f9a8b3717c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*XAMCGVvWbYae6_Zc.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">角度虚拟滚动演示中间</p></figure></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="7a1a" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">结论</h1><p id="1987" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">在这篇文章中，我们学习了如何:</p><ol class=""><li id="535d" class="nu nv it lv b lw mq lz mr mc nw mg nx mk ny mo nz oa ob oc bi translated">创建角度为7°的应用程序</li><li id="6a44" class="nu nv it lv b lw od lz oe mc of mg og mk oh mo nz oa ob oc bi translated">使用Angular CLI</li><li id="d55b" class="nu nv it lv b lw od lz oe mc of mg og mk oh mo nz oa ob oc bi translated">以角度生成分量</li><li id="2883" class="nu nv it lv b lw od lz oe mc of mg og mk oh mo nz oa ob oc bi translated">使用材料设计</li><li id="77b1" class="nu nv it lv b lw od lz oe mc of mg og mk oh mo nz oa ob oc bi translated">在Angular 7中使用虚拟滚动</li></ol><p id="8799" class="pw-post-body-paragraph lt lu it lv b lw mq ju ly lz mr jx mb mc ms me mf mg mt mi mj mk mu mm mn mo im bi translated">请随意使用这个GitHub库并分享您的发现。非常感谢你的阅读。我很快会带着同一主题的另一篇文章回来。</p></div></div>    
</body>
</html>