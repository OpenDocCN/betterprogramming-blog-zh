<html>
<head>
<title>Create Custom View Modifiers in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中创建自定义视图修改器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-custom-view-modifiers-in-swiftui-79d73d1691b?source=collection_archive---------7-----------------------#2022-08-12">https://betterprogramming.pub/create-custom-view-modifiers-in-swiftui-79d73d1691b?source=collection_archive---------7-----------------------#2022-08-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8801" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">带参数和扩展名</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/522bac40fcc50ba0bd45a4a9742c391b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RKHDKnaO7aIhakeB"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@pooorliza?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丽莎·普尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="c66d" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是视图修改器？</h1><p id="804c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">可以应用于一个<code class="fe mn mo mp mq b">View</code>或另一个<code class="fe mn mo mp mq b">ViewModifier</code>的修改器。</p><p id="b774" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">视图修改器实质上产生了原始视图的另一个版本(每次应用修改器时都会返回一个新版本的视图)。</p><p id="cb1c" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">这使得向单个视图添加多种填充和背景颜色成为可能。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mw"><img src="../Images/ae48c0fae9877f3d1ca87a6a46c6a59a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yDSsnA9y1ELtxAs1zbPAag.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">视图修改器链示例</p></figure><p id="60cf" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">让我们创造自己的习俗<code class="fe mn mo mp mq b">ViewModifier</code>。</p><h1 id="9af9" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">创建卡片视图修改器</h1><p id="0a20" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们将创建一个自定义的<code class="fe mn mo mp mq b">ViewModifier</code>，通过添加3个现有的修改器(背景、圆角半径和阴影)来制作一个类似<code class="fe mn mo mp mq b">View</code>的卡片。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/c5a3030cfafb1e212330daf373c348bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*-qjOSFGoDBvVh1jJ9hFrng.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们定制CardModifier的最终产品</p></figure><p id="065f" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">创建一组<code class="fe mn mo mp mq b">Modifiers</code>并添加一个名为<code class="fe mn mo mp mq b">CardModifier.swift</code>的新Swift文件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/4400c98e8f436c25c67f26e2d5d43593.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/1*3vxwWndw_22f2QYUxo7KrA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">您可以在这里包含所有的修改器</p></figure><p id="1bb0" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我们需要创建一个符合<code class="fe mn mo mp mq b">ViewModifier</code>协议的<code class="fe mn mo mp mq b">struct</code>。这个协议确保<code class="fe mn mo mp mq b">struct</code>包含一个函数<code class="fe mn mo mp mq b">body()</code>，这个函数允许我们使用<code class="fe mn mo mp mq b">struct</code>作为视图的修饰符。</p><p id="2892" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><code class="fe mn mo mp mq b">body()</code>函数接收<code class="fe mn mo mp mq b">Content</code>(被修改的视图)然后我们修改它(添加圆角半径、阴影等)。)并归还。</p><p id="7019" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">以下是<code class="fe mn mo mp mq b">CardModifier</code>的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="44bb" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">要使用我们新创建的<code class="fe mn mo mp mq b">CardModifier</code>，添加<code class="fe mn mo mp mq b">.modifier()</code>修饰符(很抱歉冗余)并初始化内部结构。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">简单视图示例</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/4e303425d00340fa1ef9e12a1d369194.png" data-original-src="https://miro.medium.com/v2/resize:fit:348/format:webp/1*Ap6nMJ8uwdsPy3kT5rz2EQ.png"/></div></figure><p id="8b82" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><code class="fe mn mo mp mq b">.modifier()</code>所做的是应用在<code class="fe mn mo mp mq b">CardModifier</code>中定义的所有修改器并返回新视图。这就好像我们在这里添加了它们，但是每次都不需要输入代码！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/fc5862ed64c7a2123c90407d72529fa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TFfhGi8uZcOhrYbPOPkP8Q.png"/></div></div></figure><blockquote class="nd ne nf"><p id="d6ab" class="lr ls ng lt b lu mr ju lw lx ms jx lz nh mt mc md ni mu mg mh nj mv mk ml mm im bi translated">如果要在不同的视图中使用同一组修改器，请使用自定义视图修改器。</p></blockquote><p id="d1a7" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我们拥有世界上所有的灵活性。我们可以构建更复杂的视图，并同样应用<code class="fe mn mo mp mq b">CardModifier</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/f58acb80b9b32b88d6e7faba8fef1118.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*w3OPEhECKfPxhnqyNU4jbg.png"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">复杂视图示例</p></figure><h1 id="71c5" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">添加参数</h1><p id="d753" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们可以通过添加参数使我们的自定义视图修改器更加灵活。</p><p id="3922" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">向我们现有的<code class="fe mn mo mp mq b">CardModifier</code>添加一个<code class="fe mn mo mp mq b">backgroundColor</code>属性。默认为白色(如果没有指定背景色)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带有自定义背景色的CardModifier</p></figure><p id="8683" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我们现在可以选择为我们的<code class="fe mn mo mp mq b">CardModifier</code>设置一个自定义的背景颜色。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/52eb8852d474ae1630c1d29628c0b6ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:330/format:webp/1*3aAn-uf2qkOr9o_kmp6HGA.png"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><h1 id="7b7a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">简化访问</h1><p id="6ea8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为您的自定义视图修饰符使用自动完成不是很好吗？</p><p id="b580" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">就这么办吧。</p><p id="04de" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">为<code class="fe mn mo mp mq b">Extensions</code>创建一个组，并添加一个名为<code class="fe mn mo mp mq b">View+Extensions.swift</code>的新Swift文件</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/6108e06decd067c766f1c322cd5fe2d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:482/format:webp/1*UrhDd7cYtDSJZWzuDW99aA.png"/></div></figure><p id="d473" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我们将创建一个修改器<code class="fe mn mo mp mq b">.card()</code>，使用<em class="ng">可选的</em>背景色作为参数。</p><p id="b2ae" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">添加以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="5d23" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我们现在可以使用<code class="fe mn mo mp mq b">.card()</code>来使用我们的<code class="fe mn mo mp mq b">CardModifier</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/ce16125fcced3526cdaa13601010f9e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:376/format:webp/1*_Q3WQDJJPb1x65njQocp5A.png"/></div></figure></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><p id="61aa" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我们都完了！现在，您知道了如何创建自定义视图修改器。自定义视图修改器允许我们在整个应用程序中重用一组其他修改器。</p><p id="5685" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">希望你学到了一些东西。请继续关注更多像这样的小教程！</p></div></div>    
</body>
</html>