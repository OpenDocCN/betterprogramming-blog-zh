<html>
<head>
<title>How to Make a Responsive App With React and Bootstrap</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用React和Bootstrap制作响应式App</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-make-a-responsive-app-with-react-and-bootstrap-938a22dac9d4?source=collection_archive---------2-----------------------#2019-08-30">https://betterprogramming.pub/how-to-make-a-responsive-app-with-react-and-bootstrap-938a22dac9d4?source=collection_archive---------2-----------------------#2019-08-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/9ad505afbbc33c00603edc4d57e3dc09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zzp1fqK06IKv9x0rVb6yrQ.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">图片由<a class="ae kf" href="https://unsplash.com/@bugsster" rel="noopener ugc nofollow" target="_blank"> Taras Shypka </a>在<a class="ae kf" href="https://unsplash.com/photos/iFSvn82XfGo" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="8e49" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">React是构建交互式web应用程序的一个很好的框架。它附带了一套最基本的功能。它可以在您更新数据时呈现您的页面，并为您轻松编写代码提供方便的语法。我们可以通过Bootstrap等UI框架让我们的应用程序对移动设备友好。</p><p id="5146" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Bootstrap附带了CSS类，我们可以将它们应用于我们的元素，以选择性地在不同的屏幕宽度上显示它们，这给了我们在处理不同屏幕大小的显示项目时很大的灵活性。</p><p id="d0f0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个故事中，我们将构建一个应用程序，它使用具有多语言功能的纽约时报API。您可以在应用程序中查看英语或法语的静态文本。该应用程序可以从不同的部分获取新闻，也可以进行搜索。</p><p id="69eb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在构建应用程序之前，您需要在<a class="ae kf" href="https://developer.nytimes.com/" rel="noopener ugc nofollow" target="_blank">https://developer.nytimes.com/</a>注册一个API密钥。</p><p id="e2b4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了开始构建应用程序，我们使用Create React App命令行实用程序来生成搭建代码。为了使用它，我们运行<code class="fe lf lg lh li b">npx create-react-app nyt-app</code>在<code class="fe lf lg lh li b">nyt-app</code>文件夹中创建代码。</p><p id="7c98" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">之后，我们需要安装一些库。我们需要Axios HTTP客户端、将对象转换为查询字符串的库、使一切看起来更好的引导库，以及使用Formik和Yup轻松路由和创建表单的React Router。</p><p id="ddf9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于翻译和本地化，我们使用React-i18next库将我们的文本翻译成英语和法语。为了安装这些库，我们运行<code class="fe lf lg lh li b">npm i axios bootstrap formik i18next i18next-browser-languagedetector i18next-xhr-backend querystring react-bootstrap react-i18next react-router-dom yup</code>。</p><p id="f1da" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们已经安装了所有的库，我们可以开始编写代码了。为了简单起见，我们将所有内容都放在<code class="fe lf lg lh li b">src</code>文件夹中。我们从修改<code class="fe lf lg lh li b">App.js</code>开始。我们将现有代码替换为:</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="2eab" class="lr ls it li b gy lt lu l lv lw">import React from "react";<br/>import { Router, Route, Link } from "react-router-dom";<br/>import HomePage from "./HomePage";<br/>import TopBar from "./TopBar";<br/>import { createBrowserHistory as createHistory } from "history";<br/>import "./App.css";<br/>import SearchPage from "./SearchPage";<br/>import { useTranslation } from "react-i18next";<br/>import { useState, useEffect } from "react";<br/>const history = createHistory();</span><span id="9a97" class="lr ls it li b gy lx lu l lv lw">function App() {<br/>  const { t, i18n } = useTranslation();<br/>  const [initialized, setInitialized] = useState(false);<br/>  const changeLanguage = lng =&gt; {<br/>    i18n.changeLanguage(lng);<br/>  };</span><span id="b7b3" class="lr ls it li b gy lx lu l lv lw">useEffect(() =&gt; {<br/>    if (!initialized) {<br/>      changeLanguage(localStorage.getItem("language") || "en");<br/>      setInitialized(true);<br/>    }<br/>  });</span><span id="0bb1" class="lr ls it li b gy lx lu l lv lw">return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Router history={history}&gt;<br/>        &lt;TopBar /&gt;<br/>        &lt;Route path="/" exact component={HomePage} /&gt;<br/>        &lt;Route path="/search" exact component={SearchPage} /&gt;<br/>      &lt;/Router&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="92de" class="lr ls it li b gy lx lu l lv lw">export default App;</span></pre><p id="1616" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是我们应用程序的根组件，也是应用程序首次加载时加载的组件。</p><p id="73a2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们使用<code class="fe lf lg lh li b">useTranslation</code>函数，<code class="fe lf lg lh li b">react-i18next</code>库返回一个带有<code class="fe lf lg lh li b">t</code>属性和<code class="fe lf lg lh li b">i18n</code>属性的对象。这里，我们将返回对象的属性析构到它自己的变量中。</p><p id="23ac" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将使用带有翻译键的<code class="fe lf lg lh li b">t</code>，根据语言设置获取英语或法语文本。在这个文件中，我们使用<code class="fe lf lg lh li b">i18n</code>函数通过提供的<code class="fe lf lg lh li b">i18n.changeLanguage</code>函数来设置语言。我们还从提供的本地存储中设置语言，以便在每次刷新后保留所选的语言。</p><p id="0764" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还在这里为我们的页面添加了路由，供React路由器使用。</p><p id="9c6b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe lf lg lh li b">App.css</code>中，我们输入:</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="c4de" class="lr ls it li b gy lt lu l lv lw">.center {<br/>  text-align: center;<br/>}</span></pre><p id="1ef7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这会使文本居中。</p><p id="4a2a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们制作主页。我们创建<code class="fe lf lg lh li b">HomePage.js</code>，在文件中，我们放入:</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="6e19" class="lr ls it li b gy lt lu l lv lw">import React from "react";<br/>import { useState, useEffect } from "react";<br/>import Form from "react-bootstrap/Form";<br/>import ListGroup from "react-bootstrap/ListGroup";<br/>import Card from "react-bootstrap/Card";<br/>import Button from "react-bootstrap/Button";<br/>import { getArticles } from "./requests";<br/>import { useTranslation } from "react-i18next";<br/>import "./HomePage.css";</span><span id="0864" class="lr ls it li b gy lx lu l lv lw">const sections = `arts, automobiles, books, business, fashion, food, health,<br/>home, insider, magazine, movies, national, nyregion, obituaries,<br/>opinion, politics, realestate, science, sports, sundayreview,<br/>technology, theater, tmagazine, travel, upshot, world`<br/>  .replace(/ /g, "")<br/>  .split(",");</span><span id="d71c" class="lr ls it li b gy lx lu l lv lw">function HomePage() {<br/>  const [selectedSection, setSelectedSection] = useState("arts");<br/>  const [articles, setArticles] = useState([]);<br/>  const [initialized, setInitialized] = useState(false);<br/>  const { t, i18n } = useTranslation();</span><span id="2a44" class="lr ls it li b gy lx lu l lv lw">  const load = async section =&gt; {<br/>    setSelectedSection(section);<br/>    const response = await getArticles(section);<br/>    setArticles(response.data.results || []);<br/>  };</span><span id="b570" class="lr ls it li b gy lx lu l lv lw">  const loadArticles = async e =&gt; {<br/>    if (!e || !e.target) {<br/>      return;<br/>    }<br/>    setSelectedSection(e.target.value);<br/>    load(e.target.value);<br/>  };</span><span id="c7e1" class="lr ls it li b gy lx lu l lv lw">  const initializeArticles = () =&gt; {<br/>    load(selectedSection);<br/>    setInitialized(true);<br/>  };</span><span id="5117" class="lr ls it li b gy lx lu l lv lw">  useEffect(() =&gt; {<br/>    if (!initialized) {<br/>      initializeArticles();<br/>    }<br/>  });</span><span id="faaa" class="lr ls it li b gy lx lu l lv lw">  return (<br/>    &lt;div className="HomePage"&gt;<br/>      &lt;div className="col-12"&gt;<br/>        &lt;div className="row"&gt;<br/>          &lt;div className="col-md-3 d-none d-md-block d-lg-block d-xl-block"&gt;<br/>            &lt;ListGroup className="sections"&gt;<br/>              {sections.map(s =&gt; (<br/>                &lt;ListGroup.Item<br/>                  key={s}<br/>                  className="list-group-item"<br/>                  active={s == selectedSection}<br/>                &gt;<br/>                  &lt;a<br/>                    className="link"<br/>                    onClick={() =&gt; {<br/>                      load(s);<br/>                    }}<br/>                  &gt;<br/>                    {t(s)}<br/>                  &lt;/a&gt;<br/>                &lt;/ListGroup.Item&gt;<br/>              ))}<br/>            &lt;/ListGroup&gt;<br/>          &lt;/div&gt;<br/>          &lt;div className="col right"&gt;<br/>            &lt;Form className="d-sm-block d-md-none d-lg-none d-xl-none"&gt;<br/>              &lt;Form.Group controlId="section"&gt;<br/>                &lt;Form.Label&gt;{t("Section")}&lt;/Form.Label&gt;<br/>                &lt;Form.Control<br/>                  as="select"<br/>                  onChange={loadArticles}<br/>                  value={selectedSection}<br/>                &gt;<br/>                  {sections.map(s =&gt; (<br/>                    &lt;option key={s} value={s}&gt;{t(s)}&lt;/option&gt;<br/>                  ))}<br/>                &lt;/Form.Control&gt;<br/>              &lt;/Form.Group&gt;<br/>            &lt;/Form&gt;<br/>            &lt;h1&gt;{t(selectedSection)}&lt;/h1&gt;<br/>            {articles.map((a, i) =&gt; (<br/>              &lt;Card key={i}&gt;<br/>                &lt;Card.Body&gt;<br/>                  &lt;Card.Title&gt;{a.title}&lt;/Card.Title&gt;<br/>                  &lt;Card.Img<br/>                    variant="top"<br/>                    className="image"<br/>                    src={<br/>                      Array.isArray(a.multimedia) &amp;&amp;<br/>                      a.multimedia[a.multimedia.length - 1]<br/>                        ? a.multimedia[a.multimedia.length - 1].url<br/>                        : null<br/>                    }<br/>                  /&gt;<br/>                  &lt;Card.Text&gt;{a.abstract}&lt;/Card.Text&gt;<br/>                  &lt;Button<br/>                    variant="primary"<br/>                    onClick={() =&gt; (window.location.href = a.url)}<br/>                  &gt;<br/>                    {t("Go")}<br/>                  &lt;/Button&gt;<br/>                &lt;/Card.Body&gt;<br/>              &lt;/Card&gt;<br/>            ))}<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="4aa4" class="lr ls it li b gy lx lu l lv lw">export default HomePage;</span></pre><p id="a39f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个文件中，我们显示了一个响应式布局，当屏幕较宽时，左边有一个栏，如果没有，右边有一个下拉菜单。</p><p id="7b0f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们在所选部分显示项目时，我们从左窗格或下拉列表中进行选择。</p><p id="44c1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了显示项目，我们使用React Bootstrap中的Card小部件。</p><p id="0671" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还使用由<code class="fe lf lg lh li b">react-i18next</code>提供的<code class="fe lf lg lh li b">t</code>函数从我们将要创建的翻译文件中加载我们的文本。</p><p id="abdc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了加载最初的文章条目，我们在<code class="fe lf lg lh li b">useEffect</code>函数的回调中运行一个函数，以显示从<em class="le">纽约时报</em> API加载一次条目。我们需要<code class="fe lf lg lh li b">initialized</code>标志，这样回调函数就不会在每次重新渲染时加载。在下拉列表中，我们添加了每当选择发生变化时加载文章的代码。</p><p id="f9e3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了做出响应性布局，我们使用Bootstrap的显示实用程序根据屏幕大小显示左侧窗格和下拉菜单。通过添加<code class="fe lf lg lh li b">d-none d-md-block d-lg-block d-xl-block</code>类，左窗格仅在较宽的屏幕上显示，通过添加<code class="fe lf lg lh li b">d-sm-block d-md-none d-lg-none d-xl-none</code>类，下拉菜单在较窄的屏幕上显示。</p><p id="642a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里列出了<code class="fe lf lg lh li b">sm</code>、<code class="fe lf lg lh li b">md</code>、<code class="fe lf lg lh li b">lg</code>和<code class="fe lf lg lh li b">xl</code>的断点<a class="ae kf" href="https://getbootstrap.com/docs/4.3/layout/overview/#responsive-breakpoints" rel="noopener ugc nofollow" target="_blank">。<code class="fe lf lg lh li b">sm</code>小于576px宽，<code class="fe lf lg lh li b">md</code>为576px到767px宽，<code class="fe lf lg lh li b">lg</code>为768px到991px宽，<code class="fe lf lg lh li b">xl</code>为992到1200px宽。</a></p><p id="e6ce" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://getbootstrap.com/docs/4.3/utilities/display/" rel="noopener ugc nofollow" target="_blank">引导文档</a>列出了不同类型屏幕显示和隐藏的所有类。</p><p id="b1fa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们创建<code class="fe lf lg lh li b">HomePage.css</code>，添加:</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="5fe5" class="lr ls it li b gy lt lu l lv lw">.link {<br/>  cursor: pointer;<br/>}</span><span id="d29f" class="lr ls it li b gy lx lu l lv lw">.right {<br/>  padding: 20px;<br/>}</span><span id="5ba7" class="lr ls it li b gy lx lu l lv lw">.image {<br/>  max-width: 400px;<br/>  text-align: center;<br/>}</span><span id="0714" class="lr ls it li b gy lx lu l lv lw">.sections {<br/>    margin-top: 20px;<br/>}</span></pre><p id="b7c4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们更改了Go按钮的光标样式，并在右窗格中添加了一些填充。</p><p id="95c5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们创建一个文件来加载翻译和设置默认语言。创建一个名为<code class="fe lf lg lh li b">i18n.js</code>的文件，并添加:</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="ca53" class="lr ls it li b gy lt lu l lv lw">import i18n from "i18next";<br/>import { initReactI18next } from "react-i18next";<br/>import { resources } from "./translations";<br/>import Backend from "i18next-xhr-backend";<br/>import LanguageDetector from "i18next-browser-languagedetector";</span><span id="9dd6" class="lr ls it li b gy lx lu l lv lw">i18n<br/>  .use(Backend)<br/>  .use(LanguageDetector)<br/>  .use(initReactI18next)<br/>  .init({<br/>    resources,<br/>    lng: "en",<br/>    fallbackLng: "en",<br/>    debug: true,</span><span id="24f7" class="lr ls it li b gy lx lu l lv lw">interpolation: {<br/>      escapeValue: false,<br/>    },<br/>  });</span><span id="fa6a" class="lr ls it li b gy lx lu l lv lw">export default i18n;</span></pre><p id="dddd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个文件中，我们从一个文件中加载翻译，并将默认语言设置为英语。由于<code class="fe lf lg lh li b">react-i18next</code>逃避一切，我们可以设置<code class="fe lf lg lh li b">escapeValue</code>为<code class="fe lf lg lh li b">interpolation</code>的<code class="fe lf lg lh li b">false</code>，因为它是多余的。</p><p id="52e0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们需要一个文件来存放发出HTTP请求的代码。为此，我们创建一个名为<code class="fe lf lg lh li b">requests.js</code>的文件，并添加:</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="de89" class="lr ls it li b gy lt lu l lv lw">const APIURL = "<a class="ae kf" href="https://api.nytimes.com/svc" rel="noopener ugc nofollow" target="_blank">https://api.nytimes.com/svc</a>";<br/>const axios = require("axios");<br/>const querystring = require("querystring");</span><span id="26ff" class="lr ls it li b gy lx lu l lv lw">export const search = data =&gt; {<br/>  Object.keys(data).forEach(key =&gt; {<br/>    data["api-key"] = process.env.REACT_APP_APIKEY;<br/>    if (!data[key]) {<br/>      delete data[key];<br/>    }<br/>  });<br/>  return axios.get(<br/>    `${APIURL}/search/v2/articlesearch.json?${querystring.encode(data)}`<br/>  );<br/>};<br/>export const getArticles = section =&gt;<br/>  axios.get(<br/>    `${APIURL}/topstories/v2/${section}.json?api-key=${process.env.REACT_APP_APIKEY}`<br/>  );</span></pre><p id="b1ad" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们从位于根文件夹的<code class="fe lf lg lh li b">.env</code>文件中的环境变量提供的<code class="fe lf lg lh li b">process.env.REACT_APP_APIKEY</code>变量中加载API密钥。你必须自己创造它。在那里，放上:</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="9f5c" class="lr ls it li b gy lt lu l lv lw">REACT_APP_APIKEY='you New York Times API key'</span></pre><p id="061d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用你在<em class="le">纽约时报</em> API网站注册后得到的API key替换右边的值。</p><p id="3560" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们创建搜索页面。创建一个名为<code class="fe lf lg lh li b">SearchPage.js</code>的文件，并添加:</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="b798" class="lr ls it li b gy lt lu l lv lw">import React from "react";<br/>import { useState } from "react";<br/>import { useTranslation } from "react-i18next";<br/>import "./SearchPage.css";<br/>import * as yup from "yup";<br/>import { Formik } from "formik";<br/>import Form from "react-bootstrap/Form";<br/>import Col from "react-bootstrap/Col";<br/>import Button from "react-bootstrap/Button";<br/>import { Trans } from "react-i18next";<br/>import { search } from "./requests";<br/>import Card from "react-bootstrap/Card";</span><span id="cecc" class="lr ls it li b gy lx lu l lv lw">const schema = yup.object({<br/>  keyword: yup.string().required("Keyword is required"),<br/>});</span><span id="d47d" class="lr ls it li b gy lx lu l lv lw">function SearchPage() {<br/>  const { t } = useTranslation();<br/>  const [articles, setArticles] = useState([]);<br/>  const [count, setCount] = useState(0);</span><span id="be8b" class="lr ls it li b gy lx lu l lv lw">const handleSubmit = async e =&gt; {<br/>    const response = await search({ q: e.keyword });<br/>    setArticles(response.data.response.docs || []);<br/>  };</span><span id="5b3b" class="lr ls it li b gy lx lu l lv lw">return (<br/>    &lt;div className="SearchPage"&gt;<br/>      &lt;h1 className="center"&gt;{t("Search")}&lt;/h1&gt;<br/>      &lt;Formik validationSchema={schema} onSubmit={handleSubmit}&gt;<br/>        {({<br/>          handleSubmit,<br/>          handleChange,<br/>          handleBlur,<br/>          values,<br/>          touched,<br/>          isInvalid,<br/>          errors,<br/>        }) =&gt; (<br/>          &lt;Form noValidate onSubmit={handleSubmit} className="form"&gt;<br/>            &lt;Form.Row&gt;<br/>              &lt;Form.Group as={Col} md="12" controlId="keyword"&gt;<br/>                &lt;Form.Label&gt;{t("Keyword")}&lt;/Form.Label&gt;<br/>                &lt;Form.Control<br/>                  type="text"<br/>                  name="keyword"<br/>                  placeholder={t("Keyword")}<br/>                  value={values.keyword || ""}<br/>                  onChange={handleChange}<br/>                  isInvalid={touched.keyword &amp;&amp; errors.keyword}<br/>                /&gt;<br/>                &lt;Form.Control.Feedback type="invalid"&gt;<br/>                  {errors.keyword}<br/>                &lt;/Form.Control.Feedback&gt;<br/>              &lt;/Form.Group&gt;<br/>            &lt;/Form.Row&gt;<br/>            &lt;Button type="submit" style={{ marginRight: "10px" }}&gt;<br/>              {t("Search")}<br/>            &lt;/Button&gt;<br/>          &lt;/Form&gt;<br/>        )}<br/>      &lt;/Formik&gt;<br/>      &lt;h3 className="form"&gt;<br/>        &lt;Trans i18nKey="numResults" count={articles.length}&gt;<br/>          There are &lt;strong&gt;{{ count }}&lt;/strong&gt; results.<br/>        &lt;/Trans&gt;<br/>      &lt;/h3&gt;<br/>      {articles.map((a, i) =&gt; (<br/>        &lt;Card key={i}&gt;<br/>          &lt;Card.Body&gt;<br/>            &lt;Card.Title&gt;{a.headline.main}&lt;/Card.Title&gt;<br/>            &lt;Card.Text&gt;{a.abstract}&lt;/Card.Text&gt;<br/>            &lt;Button<br/>              variant="primary"<br/>              onClick={() =&gt; (window.location.href = a.web_url)}<br/>            &gt;<br/>              {t("Go")}<br/>            &lt;/Button&gt;<br/>          &lt;/Card.Body&gt;<br/>        &lt;/Card&gt;<br/>      ))}<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="a91e" class="lr ls it li b gy lx lu l lv lw">export default SearchPage;</span></pre><p id="d555" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是我们创建一个搜索表单的地方，其中包含用于搜索API的关键字字段。当用户点击搜索时，它将使用关键字搜索<em class="le">纽约时报</em> API中的文章。</p><p id="8390" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们使用Formik来处理表单值的更改，并使<code class="fe lf lg lh li b">e</code>对象中的值在<code class="fe lf lg lh li b">handleSubmit</code>参数中可供我们使用。我们对按钮、表单元素和卡片使用React Bootstrap。点击Search后，<code class="fe lf lg lh li b">articles</code>变量被设置并加载商品的卡片。</p><p id="f2ec" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们使用由<code class="fe lf lg lh li b">react-i18next</code>提供的<code class="fe lf lg lh li b">Trans</code>组件来翻译包含一些动态组件的文本，就像上面的例子一样。我们在文本中有一个变量来表示结果的数量。每当你有这样的东西时，你就把它包装在<code class="fe lf lg lh li b">Trans</code>组件中，然后像上面的例子一样通过把变量作为道具传入来传入变量。然后你将在文本中显示变量在<code class="fe lf lg lh li b">Trans</code>标签之间。</p><p id="f1fe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还将通过将<code class="fe lf lg lh li b">“There are &lt;1&gt;{{count}}&lt;/1&gt; results.”</code>放在英文翻译中，将<code class="fe lf lg lh li b">“Il y a &lt;1&gt;{{count}}&lt;/1&gt; résultats.”</code>放在法文翻译中，使插值在翻译中可用。</p><p id="8795" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe lf lg lh li b">1</code>标签对应于<code class="fe lf lg lh li b">strong</code>标签。在这种情况下，数量是任意的。只要模式与组件的模式一致，它就能工作。所以在这种情况下，<code class="fe lf lg lh li b">strong</code>标记应该总是翻译字符串中的<code class="fe lf lg lh li b">1</code>。</p><p id="053a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要添加上面提到的翻译和其他翻译，创建一个名为<code class="fe lf lg lh li b">translations.js</code>的文件，并添加:</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="3380" class="lr ls it li b gy lt lu l lv lw">const resources = {<br/>  en: {<br/>    translation: {<br/>      "New York Times App": "New York Times App",<br/>      arts: "Arts",<br/>      automobiles: "Automobiles",<br/>      books: "Books",<br/>      business: "Business",<br/>      fashion: "Fashion",<br/>      food: "Food",<br/>      health: "Health",<br/>      home: "Home",<br/>      insider: "Inside",<br/>      magazine: "Magazine",<br/>      movies: "Movies",<br/>      national: "National",<br/>      nyregion: "New York Region",<br/>      obituaries: "Obituaries",<br/>      opinion: "Opinion",<br/>      politics: "Politics",<br/>      realestate: "Real Estate",<br/>      science: "Science",<br/>      sports: "Sports",<br/>      sundayreview: "Sunday Review",<br/>      technology: "Technology",<br/>      theater: "Theater",<br/>      tmagazine: "T Magazine",<br/>      travel: "Travel",<br/>      upshot: "Upshot",<br/>      world: "World",<br/>      Search: "Search",<br/>      numResults: "There are &lt;1&gt;{{count}}&lt;/1&gt; results.",<br/>      Home: "Home",<br/>      Search: "Search",<br/>      Language: "Language",<br/>      English: "English",<br/>      French: "French",<br/>      Keyword: "Keyword",<br/>      Go: "Go",<br/>      Section: "Section",<br/>    },<br/>  },<br/>  fr: {<br/>    translation: {<br/>      "New York Times App": "App New York Times",<br/>      arts: "Arts",<br/>      automobiles: "Les automobiles",<br/>      books: "Livres",<br/>      business: "Entreprise",<br/>      fashion: "Mode",<br/>      food: "Aliments",<br/>      health: "Santé",<br/>      home: "Maison",<br/>      insider: "Initiée",<br/>      magazine: "Magazine",<br/>      movies: "Films",<br/>      national: "Nationale",<br/>      nyregion: "La région de new york",<br/>      obituaries: "Notices nécrologiques",<br/>      opinion: "Opinion",<br/>      politics: "Politique",<br/>      realestate: "Immobilier",<br/>      science: "Science",<br/>      sports: "Des sports",<br/>      sundayreview: "Avis dimanche",<br/>      technology: "La technologie",<br/>      theater: "Théâtre",<br/>      tmagazine: "Magazine T",<br/>      travel: "Voyage",<br/>      upshot: "Résultat",<br/>      world: "Monde",<br/>      Search: "Search",<br/>      numResults: "Il y a &lt;1&gt;{{count}}&lt;/1&gt; résultats.",<br/>      Home: "Page d'accueil",<br/>      Search: "Chercher",<br/>      Language: "La langue",<br/>      English: "Anglais",<br/>      French: "Français",<br/>      Keyword: "Mot-clé",<br/>      Go: "Aller",<br/>      Section: "Section",<br/>    },<br/>  },<br/>};</span><span id="093f" class="lr ls it li b gy lx lu l lv lw">export { resources };</span></pre><p id="a051" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个文件中，我们有上面提到的静态文本翻译和插入文本。</p><p id="74a8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，我们通过创建<code class="fe lf lg lh li b">TopBar.js</code>并添加:</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="39b1" class="lr ls it li b gy lt lu l lv lw">import React from "react";<br/>import Navbar from "react-bootstrap/Navbar";<br/>import Nav from "react-bootstrap/Nav";<br/>import NavDropdown from "react-bootstrap/NavDropdown";<br/>import "./TopBar.css";<br/>import { withRouter } from "react-router-dom";<br/>import { useTranslation } from "react-i18next";</span><span id="9093" class="lr ls it li b gy lx lu l lv lw">function TopBar({ location }) {<br/>  const { pathname } = location;<br/>  const { t, i18n } = useTranslation();<br/>  const changeLanguage = lng =&gt; {<br/>    localStorage.setItem("language", lng);<br/>    i18n.changeLanguage(lng);<br/>  };</span><span id="56eb" class="lr ls it li b gy lx lu l lv lw">return (<br/>    &lt;Navbar bg="primary" expand="lg" variant="dark"&gt;<br/>      &lt;Navbar.Brand href="#home"&gt;{t("New York Times App")}&lt;/Navbar.Brand&gt;<br/>      &lt;Navbar.Toggle aria-controls="basic-navbar-nav" /&gt;<br/>      &lt;Navbar.Collapse id="basic-navbar-nav"&gt;<br/>        &lt;Nav className="mr-auto"&gt;<br/>          &lt;Nav.Link href="/" active={pathname == "/"}&gt;<br/>            {t("Home")}<br/>          &lt;/Nav.Link&gt;<br/>          &lt;Nav.Link href="/search" active={pathname.includes("/search")}&gt;<br/>            {t("Search")}<br/>          &lt;/Nav.Link&gt;<br/>          &lt;NavDropdown title={t("Language")} id="basic-nav-dropdown"&gt;<br/>            &lt;NavDropdown.Item onClick={() =&gt; changeLanguage("en")}&gt;<br/>              {t("English")}<br/>            &lt;/NavDropdown.Item&gt;<br/>            &lt;NavDropdown.Item onClick={() =&gt; changeLanguage("fr")}&gt;<br/>              {t("French")}<br/>            &lt;/NavDropdown.Item&gt;<br/>          &lt;/NavDropdown&gt;<br/>        &lt;/Nav&gt;<br/>      &lt;/Navbar.Collapse&gt;<br/>    &lt;/Navbar&gt;<br/>  );<br/>}</span><span id="d340" class="lr ls it li b gy lx lu l lv lw">export default withRouter(TopBar);</span></pre><p id="e14d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们使用React Boostrap提供的<code class="fe lf lg lh li b">NavBar</code>组件，并添加一个下拉菜单供用户选择语言，当他们点击那些项目时，他们可以设置语言。</p><p id="a447" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，我们用<code class="fe lf lg lh li b">withRouter</code>函数包装了<code class="fe lf lg lh li b">TopBar</code>组件，因此我们用<code class="fe lf lg lh li b">location</code>属性获得了当前路线的值，并通过设置<code class="fe lf lg lh li b">Nav.Link</code>组件中的<code class="fe lf lg lh li b">active</code>属性来使用它来设置哪个链接是活动的。</p><p id="07eb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，我们用以下代码替换<code class="fe lf lg lh li b">index.html</code>中的现有代码:</p><pre class="lj lk ll lm gt ln li lo lp aw lq bi"><span id="a6eb" class="lr ls it li b gy lt lu l lv lw">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8" /&gt;<br/>    &lt;link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;<br/>    &lt;meta name="theme-color" content="#000000" /&gt;<br/>    &lt;meta<br/>      name="description"<br/>      content="Web site created using create-react-app"<br/>    /&gt;<br/>    &lt;link rel="apple-touch-icon" href="logo192.png" /&gt;<br/>    &lt;!--<br/>      manifest.json provides metadata used when your web app is installed on a<br/>      user's mobile device or desktop. See <a class="ae kf" href="https://developers.google.com/web/fundamentals/web-app-manifest/" rel="noopener ugc nofollow" target="_blank">https://developers.google.com/web/fundamentals/web-app-manifest/</a><br/>    --&gt;<br/>    &lt;link rel="manifest" href="%PUBLIC_URL%/manifest.json" /&gt;<br/>    &lt;!--<br/>      Notice the use of %PUBLIC_URL% in the tags above.<br/>      It will be replaced with the URL of the `public` folder during the build.<br/>      Only files inside the `public` folder can be referenced from the HTML.</span><span id="a212" class="lr ls it li b gy lx lu l lv lw">Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will<br/>      work correctly both with client-side routing and a non-root public URL.<br/>      Learn how to configure a non-root public URL by running `npm run build`.<br/>    --&gt;<br/>    &lt;title&gt;React New York Times App&lt;/title&gt;<br/>    &lt;link<br/>      rel="stylesheet"<br/>      href="<a class="ae kf" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="noopener ugc nofollow" target="_blank">https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css</a>"<br/>      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"<br/>      crossorigin="anonymous"<br/>    /&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;<br/>    &lt;div id="root"&gt;&lt;/div&gt;<br/>    &lt;!--<br/>      This HTML file is a template.<br/>      If you open it directly in the browser, you will see an empty page.</span><span id="c1a7" class="lr ls it li b gy lx lu l lv lw">You can add webfonts, meta tags, or analytics to this file.<br/>      The build step will place the bundled scripts into the &lt;body&gt; tag.</span><span id="f7a8" class="lr ls it li b gy lx lu l lv lw">To begin the development, run `npm start` or `yarn start`.<br/>      To create a production bundle, use `npm run build` or `yarn build`.<br/>    --&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="4a5a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将添加引导CSS并更改应用程序的标题。</p><p id="9ec1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所有工作完成后，当我们运行<code class="fe lf lg lh li b">npm start</code>时，我们得到:</p><figure class="lj lk ll lm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ly"><img src="../Images/3e265df00ca07361453f104b374bba81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2q7NFqyClCeHusVvrK1-nA.png"/></div></div></figure><figure class="lj lk ll lm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lz"><img src="../Images/f1af23448a83a2d003557bc51f9bb263.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*46Nw07KIFkmzE6fjBFNoSQ.png"/></div></div></figure><figure class="lj lk ll lm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lz"><img src="../Images/33c02eddd3c3a8cd242aa5156897e03f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*umXWxeLv9tU2uKn5HlmQKQ.png"/></div></div></figure><figure class="lj lk ll lm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lz"><img src="../Images/e1dff00834d93543a489ac3d9bc9388c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FDHcDwwKVNa9eElisiwJ9Q.png"/></div></div></figure></div></div>    
</body>
</html>