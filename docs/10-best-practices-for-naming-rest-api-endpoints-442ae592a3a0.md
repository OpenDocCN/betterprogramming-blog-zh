# 命名 REST API 端点的 10 个最佳实践

> 原文：<https://betterprogramming.pub/10-best-practices-for-naming-rest-api-endpoints-442ae592a3a0>

## 避免特殊字符，使用小写名称，等等

![](img/917e9a2c5696d5ab7a2c78626255d91c.png)

克里斯多佛·高尔在 [Unsplash](https://unsplash.com/s/photos/web-api?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 拍摄的照片。

Web 开发人员对 API 并不陌生，尤其是像 GET 和 POST 这样的 HTTP 方法。说到设计 API，后端工程师或 API 工程师也很熟悉。这意味着休息是一个熟悉的术语。都说 REST 是架构，不是标准。它是与 HTTP 一起开发的，最常用于 HTTP。HTTP 是一种标准，而 REST 是一种架构。REST 是一种架构风格，它提供了指导 API 设计的约束。

REST APIs 是一个强大的工具，被系统广泛用于根据表述性状态转移(REST)架构模式进行通信和交换信息。无论是网站、移动应用还是企业集成，它们都被广泛使用。与上一代 web 服务(即 SOAP)相比，REST 具有更大的灵活性。

然而，在本文中，我们将只讨论 REST 或 RESTful。

尽管 REST APIs 非常有用，但创建它们可能是一个耗时的过程。如果您正在构建自己的 REST 或 RESTful API，您应该知道有一些最佳实践可以遵循。这包括 REST API 端点的命名。

基本上有十条准则可以让你的 API 端点变得更好:

1.  使用名词。
2.  使用直观、清晰的名称。
3.  使用小写字母。
4.  避免使用特殊字符。
5.  使用正斜杠(`/`)。
6.  用连字符分隔单词。
7.  不要使用文件扩展名。
8.  使用 camelCase 作为参数。
9.  使用 API 版本控制。
10.  一致性。

它们看起来很容易做到，但是它们可以让你的端点看起来更好。所以，让我们开始吧！

# 1.使用名词

给你的 URIs 命名时，建议用名词代替动词或形容词。HTTP 方法在技术上是动词，因此有 GET、POST、DELETE 等。此外，名称代表资源的内容或资源本身。因此，实际上使用名词更有意义。

您通常遇到的 URL 具有以下“语法”:

```
https://api.example.com/[resource]
```

例如:

```
https://api.example.com/users/abcd-efgh-ijkl
```

嗯，你明白我的意思。基本上，当您查看 URL 时，可以看出它正在访问具有特定 ID 的用户资源，如示例所示。现在，如果 URL 如下所示:

```
https://api.example.com/getUsers/abcd-efgh-ijkl
```

它看起来很滑稽。此外，如果您进行检查，浏览器会告诉您该 URL 正在使用 GET 方法，因此没有必要在您的 URI 中添加动作词。此外，您还将指定特定 API 将使用的 HTTP 方法。

接下来的问题是名词用单数还是复数。一般来说，复数名词是首选，因为它们在某种意义上代表更多的一般事物(除非您的资源是一个单数概念，如“admin”或“config”)。

在后面关于等级的内容中，你会看到关于这些复数名词的更深入的解释。

# 2.使用直观、清晰的名称

想到这，更像是用常识起的名字。尝试将自己定位为消费者。作为一个对您的服务一无所知的人，我希望能够通过阅读 API 端点的命名来理解您的 API 的基本用法。如果我想完全理解如何使用它，那么我会读得更深。

所以，从这个意义上说，重要的是成全了*第一眼看到的*。因此，如果你使用一些奇怪或不清楚的东西(即模糊的名称)，你的消费者肯定不能从一开始就理解，你就有麻烦了。

理想情况下，名称必须代表整体。此外，您还想通过避免缩写或速记来避免引起混淆。它不仅必须直观，而且必须清晰(这通常意味着只需拼写出名词)。

例如，当您被给予:

```
GET [https://api.example.com/users](https://api.example.com/users)
```

您将能够理解，通过使用这个 API，您将能够访问用户资源并获得用户信息。现在，一个资源可以有很多数据，所以复数名词更有意义。还有，像`users`这样的直接名词，是可以理解的，也是清楚的。

下面是另一个在试图获取用户名字时不清楚的例子:

```
GET [https://api.example.com/users/1234/fn](https://api.example.com/users/1234/fn)
```

`fn`看起来怪怪的，一点都不直观因为如果你和我一样书呆子的话会被误解为“功能”。

所以，坚持你的常识，选择直观、清晰的名字。

# 3.使用小写字母

在这一点上，我并不真的与我的开发伙伴争论，但还是值得一提。根据我的经验，我遇到的每个人总是用小写字母代替大写字母。也许我们已经下意识地接受了这一点，因为我们每天访问的网站也使用小写字母。

确保在 API URLs 中使用小写字母。URI 标准的 RFC 3986 规范也表示 URIs 是区分大小写的(URL 的方案和主机组件除外)。考虑到它的广泛使用，避免因大小写不一致而造成任何不必要的混淆。

# 4.避免特殊字符

你我都没见过 URL 命名中使用特殊字符。我的意思是，这完全违背了我们之前谈到的直观、清晰的命名准则。假设您在命名中引入了这些特殊字符。这将使用户感到困惑，技术上也很复杂。他们只是不必要的。

此外，因为 URL 只能使用 ASCII 字符集发送和接收，所以您的 API URLs 应该只包含 ASCII 字符。然而，这并不意味着你可以使用所有的字符。像`%20`这种代表空格字符的东西，也不要用。同样，这本身已经违背了直观的命名惯例。此外，这些字符通常是不安全字符的编码版本，如空格、括号等。为了防止混乱和安全问题。

所以尽量避免在你的名字中使用像`%20`这样的字符，因为这些字符已经有了其他的含义。

# 5.使用正斜杠

正常人可能不知道为什么链接中的单词用正斜杠分隔。作为一名开发人员，您应该熟悉其中的原因:斜线表示 URI 层级。API 通常采用层次结构。

例如:

```
GET [https://api.example.com/users/1234/first-name](https://api.example.com/users/1234/first-name)
```

这个例子说它检索 ID 为`1234`的用户的名字。因此，正斜杠字符表示这种等级导航，当您在 URI 中从左向右遍历时，这种导航会变得更加具体。

有时候，当访问一个 URL 时，我喜欢毫无理由地在 URL 的末尾添加一个正斜杠。但是，请注意，实际上没有必要在最后加一个正斜杠。

在我看来，这也是为什么你应该适当地使用复数名词，因为人们应该能够通过浏览 URL 来判断哪个部分更通用，哪个部分更具体。

# 6.用连字符分隔单词

当一个 REST API 端点有多个单词时，建议用连字符(`-`)将它们分开。它通常看起来更清晰，因此比使用下划线(`_`)更加用户友好。这两者经常被混淆，我以前也亲身遇到过。但是，请不要使用茶色(如名字)，因为这看起来很奇怪。这样看起来会更好:

```
https://api.example.com/users/1234/first-name
```

此外，连字符对谷歌搜索更好，因为连字符是谷歌自己推荐的，以使其网页抓取工作更容易，从而创建更一致的结果。

# 7.避免文件扩展名

在 URIs，使用文件扩展名被认为是不必要的。这是因为如果您更改结果的文件类型，可能会给最终用户带来一些问题。因此，它可能会增加您想要避免的不必要的复杂性。

# 8.使用 camelCase 作为参数

设计 API 时，有时您需要一个直接从 URL 查询的输入，或者称为查询字符串。通常，当您想获得一个实体作为返回时，只需接受一个 ID 作为输入就足够了，然后我们根据请求的 ID 从数据库中获取一些神奇的数据并返回值。

那是怎么设计的呢？像这样:

```
/users/{userId}
```

如果你看一下`[https://api.example.com/users/1234](https://api.example.com/users/1234)`链接，这里的`1234`就是`userId`。

通过以上方式，用户能够基于他们的用户 ID 来查询用户。现在，对于命名约定，建议使用 camelCase 而不是其他名称。从某种意义上说，它是好的，因为你一眼就知道它指的是一个参数，而不是链接本身。

# 9.使用 API 版本控制

建议在构建 API 时使用版本控制，因为您永远不知道 API 的下一个版本是什么时候。不要总是认为你的 API 是最终版本，永远可用。总有可能会添加新的功能，或者必须对您的 API 进行一些更改。然而，有一件事你总是想避免，那就是破坏你现有的工作 API。

为什么？因为你的用户很有可能已经在使用这些 API 了，如果你做出改变并推出它们，你的用户会不高兴的。那么，你如何解决这个问题呢？通过使用版本控制。此外，当您从一开始就使用版本控制并记录下来时，它会间接地告诉用户将来可能会有变化。提前让你的用户为任何即将到来的变化做好“准备”是有好处的。

你可以使用版本控制，把它一直移到最左边，这样，在某种意义上，它就有了最高的范围。版本号应该是 v1、v2 等。，因为用户应该只关心主要的变化——因此，只关心主要版本。所以它应该是这样的:

```
[https://api.example.com/v1/](https://api.example.com/v1/)[https://api.example.com/v2/](https://api.example.com/v2/)
```

例如:

```
https://api.example.com/v1/users/1234/orders/2
```

通过这样做，如果 API 被外部实体使用，改变端点不会真正影响现有的端点。

此外，还有大约四种方式来进行版本控制:

## 子域中的版本控制

这个将版本放在 URI 中，但是使它与域相关联，就像这样:

```
https://v1.api.domain.com/https://v2.api.domain.com/
```

这与放在末尾的版本控制非常相似。然而，这有一个好处，即您的 API 可以托管在不同的服务器上。

## 作为附加标题的版本控制

这种版本控制使用 MIME 类型来包含 API 版本。它看起来像这样:

```
GET https://api.example.com/users/1234 HTTP/1.1
Accept: application/json
Version: 1GET https://api.example.com/users/1234 HTTP/1.1
Accept: application/json
Version: 2
```

## 版本控制作为 accept-/content-type 标头中的附加字段

这一条和上一条关于如何包含它的观点类似，只是结果不同。这是它的样子:

```
GET https://api.example.com/users/1234 HTTP/1.1
Accept: application/json; version=1GET https://api.example.com/users/1234 HTTP/1.1
Accept: application/json;version=2
```

## 作为媒体类型的版本控制

这也很相似，因为前面三种方法都使用 MIME 类型。唯一的区别是在哪里或者如何放置版本。以下是一些例子:

```
GET https://api.example.com/users/1234 HTTP/1.1
Accept: application/vnd.<host>.users.v1+jsonGET https://api.example.com/users/1234 HTTP/1.1
Accept: application/vnd.<host>.users.v2+json
```

# 10.一致性

最后但同样重要的是，不要因为 API 不一致而让用户感到困惑。始终保持一致。

# 包扎

在构建 REST APIs 时，有如此多的建议和命名约定需要考虑，难怪有时候构建一个要花很长时间。你甚至可以和你的开发伙伴讨论命名约定本身，这将花费更多的时间。

长话短说，人们确实有他们倾向于认同的准则。以上几点，大部分人应该是认同的。因此，我希望到现在为止，您已经更好地理解了命名 API 和资源层次结构是如何工作的。

请记住，您的命名约定应该是:

1.  容易理解。
2.  容易链接。
3.  一致。

到底谁更重要？他们是消费者。说到命名，仅仅从消费者的角度考虑也会有所帮助。众所周知，软件开发中的命名是至关重要的，同时也是非常困难的。我希望这篇文章对你有所帮助。

感谢您的阅读！