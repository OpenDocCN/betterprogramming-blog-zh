<html>
<head>
<title>Easy Background Blur in iOS With SwiftUI (Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SwiftUI在iOS中轻松实现背景模糊(第1部分)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/easy-background-blur-in-ios-with-swiftui-8cf5a407ec65?source=collection_archive---------1-----------------------#2020-11-29">https://betterprogramming.pub/easy-background-blur-in-ios-with-swiftui-8cf5a407ec65?source=collection_archive---------1-----------------------#2020-11-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9a4d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为您的图像添加美丽的模糊或散景效果</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/32e5ed0d37e9d6bc07b2ea7ac2bad7da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hS59XJEpKW3vx_pVsFuk-g.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">西蒙·艾布拉姆斯在unsplash.com<a class="ae kv" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank">拍摄的照片</a></p></figure><p id="b1d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">背景、视图和其他元素的模糊效果在现代UI/UX设计和软件开发中有很多优势，无论是为了吸引用户的注意力还是为了让事情看起来更好。</p><p id="9911" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为一个iOS用户，你可能已经非常了解这种效果，因为它们被用在操作系统本身的各种功能上。一个著名的例子是在iPhone上打开Spotlight搜索:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/bece7a2ba02dd8383b3d0f6bb657a218.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/1*BwTBDENqUmZUwjnhXmF26w.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">聚光灯搜索背景模糊</p></figure><p id="daf3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里使用了模糊，这样用户就不会再被主屏幕的图标和字体分散注意力，可以专注于搜索及其结果。另一个优点是可读性:如果没有模糊，主页图标的字体会使人很难从结果中读出可能的重叠文本。</p><p id="7a20" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">自iOS 13以来，苹果的SwiftUI框架为我们提供了一个很好的视图修改器:T4模糊修改器。</p><p id="a4b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这一系列文章的目标是说明如何在您自己的应用程序中应用这个修饰符。在第一部分中，重点是背景图像上的简单模糊，而在第二部分中，一个更复杂的视图将被模糊。</p><p id="fbd1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="lt">注意:</em> </strong> <em class="lt">需要XCode 11.x或更高版本，Swift 5.x，iOS 13.x或更高版本。假设您已经掌握了一些Swift和SwiftUI编程知识，如何构建应用程序，以及如何在其中实现您自己的视图。这不是一个教你基础知识的教程。</em></p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="276f" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">愿景</h1><p id="c187" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">在我们开始编码之前，让我们看看我们想要实现什么。我们的第一个目标是一个带有背景图像的简单视图，当按钮被按下时，我们希望对其进行模糊处理:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/4a4c10b23defd7dec42fcb1dfd880fe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/1*7LZBukODp08zoyPYXJRW_A.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">简单的背景模糊</p></figure><p id="cc23" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过点击一个按钮，我们希望使背景模糊，但保持其他一切清晰。看似简单！</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="809a" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">视图修改器</h1><p id="0419" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">首先要做的是为模糊效果创建一个视图修改器。该修改器获取视图内容，将其包装在一个组中，并应用系统中的模糊修改器。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">模糊视图修改器-简单版本</p></figure><p id="509d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">代码应该非常简单，不需要任何解释。</p><p id="d2c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可能想知道为什么需要这个修改器，因为模糊本身也可以直接应用到视图中。这个想法的问题是SwiftUI不允许内置视图修饰符是有条件的。对于条件绑定，必须创建一个单独的视图修改器——我们希望模糊效果是有条件的，因为它是由外部触发的(在我们的例子中，通过点击按钮)。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="2fc4" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">主视图</h1><p id="bb5c" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">在我们的主视图中，我们现在需要将这个修改器添加到我们想要模糊的视图中。下面是我们上面预览视图的代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">将模糊修改器应用于背景图像的主内容视图</p></figure><p id="6885" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">主包装器是一个简单的VStack，里面有一个<code class="fe na nb nc nd b">Text</code>和一个<code class="fe na nb nc nd b">Button</code>。在视图的头部，我们还声明了一个状态变量来保持状态，即是否显示模糊。</p><p id="4414" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有趣的部分是我们设置为背景的图像视图(第28-31行)。在这个图像上，我们应用了之前创建的模糊修改器，因为我们不希望主视图(VStack)模糊，而只是背景本身模糊。就是这样！</p><p id="1b08" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的例子中，我们使用一个简单的图像视图来模糊，但这可以是任何类型的视图，当然，例如，如果您有一些复杂的自定义视图用作背景。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="5682" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想了解更多关于阴影和模糊效果的知识，这里有一篇非常好的文章:“T2如何在现代UI设计中使用阴影和模糊效果”</p></div></div>    
</body>
</html>