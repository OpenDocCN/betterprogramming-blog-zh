<html>
<head>
<title>Create a Custom Date Picker With React and TypeScript Using Day.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Day.js创建带有React和TypeScript的自定义日期选择器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-a-custom-date-picker-with-react-and-typescript-from-scratch-25d44dc0b76d?source=collection_archive---------0-----------------------#2022-05-26">https://betterprogramming.pub/create-a-custom-date-picker-with-react-and-typescript-from-scratch-25d44dc0b76d?source=collection_archive---------0-----------------------#2022-05-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fbd8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为什么不呢？—事实证明，这很简单。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/da7d7eeb7520c5f18b44ab34716f1041.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2bKSZjn3sqDmobOB3mpM9A.jpeg"/></div></div></figure><p id="7c08" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本文中，我们将从头开始创建一个简单的react日期选择器。作为我们的日期操作助手，我们将使用一个名为“<a class="ae ln" href="https://day.js.org/" rel="noopener ugc nofollow" target="_blank"> Day.js </a>”的库。请不要太在意造型。我们的目标是创建一个基本组件，您可以随意修改它。</p><h2 id="0bbb" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">那么Day.js是什么呢？</h2><blockquote class="mh mi mj"><p id="27e4" class="kr ks mk kt b ku kv jr kw kx ky ju kz ml lb lc ld mm lf lg lh mn lj lk ll lm ij bi translated">Day.js是一个极简主义的JavaScript库，可以解析、验证、操作和显示日期。真的很轻量级(只有2 kB！)并公开了非常简单的API。</p></blockquote><h2 id="ba4f" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">为什么我们不能使用一些库，比如"<a class="ae ln" href="https://www.npmjs.com/package/react-datepicker" rel="noopener ugc nofollow" target="_blank"> react-datepicker </a>"？</h2><p id="e034" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">首先，这篇文章一点都不会有趣，如果我只是给你演示如何安装一个库)。此外，我认为有些情况下，不需要任何第三方包(通常很难定制)就可以轻松实现。</p><h1 id="2b4d" class="mt lp iq bd lq mu mv mw lt mx my mz lw jw na jx lz jz nb ka mc kc nc kd mf nd bi translated">我们最后的结果是什么？</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="5e0f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们这里有什么功能？</p><ol class=""><li id="a095" class="ng nh iq kt b ku kv kx ky la ni le nj li nk lm nl nm nn no bi translated">显示当月日期和工作日名称的日历。此外，它可以向前或向后翻转。</li><li id="575a" class="ng nh iq kt b ku np kx nq la nr le ns li nt lm nl nm nn no bi translated">选择特定日期的功能。默认情况下，将选择当前日期。</li></ol><h1 id="4f83" class="mt lp iq bd lq mu mv mw lt mx my mz lw jw na jx lz jz nb ka mc kc nc kd mf nd bi translated">我们开始吧！</h1><h2 id="9d15" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">依赖性。</h2><p id="8b37" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">首先，我们需要安装我们的依赖项。正如我之前提到的，我们将使用<code class="fe nu nv nw nx b">Day.js</code>和名为“clsx”的库，这允许我们轻松地组合类名(这完全是可选的，我只是更喜欢使用它)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/2028bf2fa0869a5f09da13fd11c8943d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zMjMd1ezxnFSqVspcLlWdQ.png"/></div></div></figure><h2 id="8330" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">App组件。</h2><p id="0965" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">一切都很简单。我们将为我们的应用程序创建一个框架，并为我们的日历添加一个状态。注意，我们在这里调用<code class="fe nu nv nw nx b">dayjs</code>作为初始值。它返回给我们包含当前日期信息的<code class="fe nu nv nw nx b">dayjs</code>的实例。此外，我们将选定的日期格式化并放在标题中。不要担心<code class="fe nu nv nw nx b">DatePicker</code>的导入，下面我们会稍微实现一下。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz nf l"/></div></figure><h2 id="f52b" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">日期选择器组件</h2><p id="c9e5" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">接下来，我们应该创建我们的<code class="fe nu nv nw nx b">datepicker</code>根组件。我会把它分成两个独立的部分。</p><p id="4ff4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第一部分是<code class="fe nu nv nw nx b">DatePickerSelector</code>，这是包含我们翻转逻辑的地方。</p><p id="2530" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第二个部分叫做<code class="fe nu nv nw nx b">DatePickerCalendar</code>负责显示日历和选择具体日期。</p><p id="2ed0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们的组件接收两个道具:</p><ol class=""><li id="c0e1" class="ng nh iq kt b ku kv kx ky la ni le nj li nk lm nl nm nn no bi translated"><code class="fe nu nv nw nx b">selectedDate</code>是<code class="fe nu nv nw nx b">dayjs</code>实例，代表选择的日期。</li><li id="0933" class="ng nh iq kt b ku np kx nq la nr le ns li nt lm nl nm nn no bi translated"><code class="fe nu nv nw nx b">onChange</code>是单击日期单元格时调用的处理程序，它获取新的日期作为第一个参数。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz nf l"/></div></figure><p id="f382" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">另外，请注意，我们还有另一个名为<code class="fe nu nv nw nx b">shownDate</code>的本地状态。它将负责在我们的日历中显示正确的月份和年份。</p><h2 id="4f3e" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">日期选择器组件</h2><p id="9e09" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">正如我之前提到的，这个组件将包含我们的翻转逻辑。这里没有什么特别的，我们只是处理我们的点击事件，并按月增加/减少我们的<code class="fe nu nv nw nx b">shownDate</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz nf l"/></div></figure><p id="5d69" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw nx b">changeDateMonth</code>也是一个决定我们是否需要加减年份的函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz nf l"/></div></figure><h2 id="31a9" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">日期选择器日历组件</h2><p id="1a77" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">为了实现这一部分，我们需要提前创建一些助手。首先，让我们创建一个界面来表示日历中的单个单元格，它将被称为<code class="fe nu nv nw nx b">ICalendarCell</code>。此外，我们将编写另外两个函数:</p><ol class=""><li id="0f9d" class="ng nh iq kt b ku kv kx ky la ni le nj li nk lm nl nm nn no bi translated"><code class="fe nu nv nw nx b">getCalendarCells</code>将获取当前显示的日期并返回一个单元格数组。此外，它将添加上个月和下个月的天数，以完全填充我们的日历行。</li><li id="7664" class="ng nh iq kt b ku np kx nq la nr le ns li nt lm nl nm nn no bi translated"><code class="fe nu nv nw nx b">getCalendarRows</code>将返回日历的行数组。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz nf l"/></div></figure><p id="a946" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在此之后，我们可以移动到我们的用户界面。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz nf l"/></div></figure><p id="48d8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里的一切都很简单:</p><ol class=""><li id="bd62" class="ng nh iq kt b ku kv kx ky la ni le nj li nk lm nl nm nn no bi translated"><code class="fe nu nv nw nx b">handleSelectDate</code>是一个选择日期处理程序，它利用闭包并调用<code class="fe nu nv nw nx b">onChange</code>和所需的日期。</li><li id="143f" class="ng nh iq kt b ku np kx nq la nr le ns li nt lm nl nm nn no bi translated"><code class="fe nu nv nw nx b">rows</code>是我们<code class="fe nu nv nw nx b">getCalendarRows</code>的一个记忆返回值。所以它只在显示的日期改变时才重新计算。</li><li id="27ba" class="ng nh iq kt b ku np kx nq la nr le ns li nt lm nl nm nn no bi translated">在29–35行中，我们渲染工作日。</li><li id="9c11" class="ng nh iq kt b ku np kx nq la nr le ns li nt lm nl nm nn no bi translated">在37–56行中，我们呈现日历日行。此外，我们根据选择的日期附加适当的类名。</li></ol></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><p id="7059" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">本文到此为止。现在我们的<code class="fe nu nv nw nx b">Datepicker</code>组件已经可以使用了。</p><div class="oh oi gp gr oj ok"><a href="https://javascript.plainenglish.io/how-to-become-frontend-dev-in-4-months-ec3f61576251" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd ir gy z fp op fr fs oq fu fw ip bi translated">如何在4个月内成为前端开发人员</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">寿命测试指南</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy kp ok"/></div></div></a></div><div class="oh oi gp gr oj ok"><a href="https://javascript.plainenglish.io/5-react-usestate-mistakes-that-will-get-you-fired-b342289debfe" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd ir gy z fp op fr fs oq fu fw ip bi translated">对那些会让你被解雇的错误做出反应</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">5种常见的反应使用状态错误以及如何避免它们</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">普通英语。</p></div></div><div class="ot l"><div class="oz l ov ow ox ot oy kp ok"/></div></div></a></div><div class="oh oi gp gr oj ok"><a href="https://javascript.plainenglish.io/frontend-architectures-classic-approach-no-architecture-d3c839e46403" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd ir gy z fp op fr fs oq fu fw ip bi translated">前端架构:“经典”方法(无架构)</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">了解最常见前端架构的优缺点</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ot l"><div class="pa l ov ow ox ot oy kp ok"/></div></div></a></div></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><p id="5aaf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">感谢阅读！</strong></p><p id="a849" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我希望，这篇文章对你有用。如果您有任何问题或建议，请留下评论。你的反馈帮助我变得更好。</p><p id="9890" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">别忘了subscribe⭐️</p></div></div>    
</body>
</html>