<html>
<head>
<title>Feature Flag 2.0 — How To Take Your Kill Switch To The Next Level</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">功能标志2.0 —如何将您的Kill Switch提升到下一个级别</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/feature-flag-2-0-how-to-take-your-kill-switch-to-the-next-level-643b5aa2676?source=collection_archive---------7-----------------------#2022-07-04">https://betterprogramming.pub/feature-flag-2-0-how-to-take-your-kill-switch-to-the-next-level-643b5aa2676?source=collection_archive---------7-----------------------#2022-07-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c064" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">作为产品经理，我要求我的团队做一些改进</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e3622be13f0a09fb5508f2dc5dfb484a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5qhF8UryOpkgDTT1"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">凯利·西克玛在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="dc66" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在是星期五晚上。你和你的团队成员一起离开办公室，去两个街区外的酒吧喝一杯周末酒，庆祝又一部成功电影的推出。</p><p id="148d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你们已经为这个特性努力工作了将近整整一个季度，强调自己要在管理层给定的期限内完成，它终于发布了。终于！</p><p id="f80c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来的一周再好不过了。销售团队一直在焦急地等待这款产品，他们不断告诉你客户有多喜欢它，以及它如何改变了整个公司的游戏规则。</p><p id="aeda" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是意想不到的事情发生了。现在是周二晚上9点，你正在查看收件箱。你会立刻发现这封邮件的主题是全大写的“紧急”。其中一个客户报告说，在他们将您的功能集成到他们的系统后，系统一天内会崩溃多次。他们已经因为这些崩溃损失了几千美元，他们希望你立即关闭它。更让他们沮丧的是，他们需要几天时间才能从他们那端关掉它。</p><p id="23ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当你读完那封愤怒的邮件后，你马上联系你的团队，告诉他们立即关闭那个客户的功能。幸运的是，他们有足够的经验来添加一个功能标志，并且在15分钟内你就通知客户这个功能被禁用了。</p><p id="e883" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二天早上，您给团队分配了一项最优先的任务——找到错误的根本原因并修复它。</p><p id="224f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您的团队开始查看日志和代码，但是他们不太确定是什么导致了这些崩溃。他们<em class="ls">认为</em>他们知道根本原因是什么，但他们不能100%确定，因为他们无法在当地环境中重现。他们开始着手解决这个问题。</p><p id="3efa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一周后，补丁部署完成，您的客户同意重新启用该功能。使用特征标志，你的团队再次启用它，你们都祈祷好运。</p><p id="7468" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是几个小时后，客户报告崩溃仍然发生，并要求您永久关闭该功能。你不必是个天才，也能理解这一事件对客户关系的长期影响，以及他们成为你未来功能的早期采用者的可能性。</p><p id="6d09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个故事可以继续下去，许多不成功的尝试重现错误，找到根本原因并解决它。但是你已经明白了。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="3571" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想提出几个简单但无价的特性标志改进，作为产品经理，我要求我的团队成员在设计和构建新特性的特性标志时添加这些改进。我把这些新增功能称为<strong class="ky ir"> <em class="ls">“功能标志2.0”</em></strong></p><h1 id="b989" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated"><strong class="ak"> 1。超越断路开关</strong></h1><p id="a7ae" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">确保您有办法强制该功能的功能，即使该功能标志已关闭。</p><p id="9b15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将使您能够在真实的生产环境中最充分地体验该功能的行为，同时仍然对所有其他用户关闭该功能。难以复制的关键错误是一大难题。很多时候，这是因为您错过了一个边缘案例，或者因为它们只发生在特定的环境中，或者由于意外的负载，这样的例子不胜枚举..<br/>因此，能够像使用实时功能一样使用该功能可以节省您大量的时间，并提高部署前和部署后修复的信心和质量。</p><p id="3d51" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您在Web环境中，这可以通过使用专用的URL参数相对简单地完成。</p><p id="ad6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在某些情况下，您可以通过设置专用的cookie来实现。<br/>另一种方法是拥有一个可编辑的登录/ IP地址或其他您可以使用的唯一标识符的接受列表。显然，不同的系统都有自己的局限性和考虑因素，这还是在谈论安全问题之前，但我相信在大多数系统中，都可以添加覆盖功能。如果这篇文章能让你带走一样东西，那就是它。</p><h1 id="a5e9" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated"><strong class="ak"> 2。自助服务</strong></h1><p id="0cfe" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">(这一条可能与B2B /第三方产品更相关，但也可能对支持团队或技术含量较低的团队有用)。</p><p id="9c65" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果可能的话，让你的客户/用户能够自己拔掉插头。</p><p id="c219" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，当问题很紧急时，您的客户可以立即禁用该功能，而不是必须通过整个过程联系您的支持团队，等待问题升级到正确的人，并焦急地等待有人来处理它。</p><p id="41d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(假设您的客户是一家大银行，您的功能是让用户能够通过人脸识别登录他们的银行账户，但它不起作用……)</p><p id="402e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二，这是减轻客户担忧的好方法，并且确实有助于产品的采用。让你的客户知道他们可以在任何给定的时刻自行关闭，这给他们提供了一种强烈的控制感，并极大地限制了他们尝试新事物的风险。你打交道的行业/客户越保守，越有助于他们采用你的产品。</p><p id="35e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">话虽如此，你还是要注意客户可以轻易关闭你的功能。一方面，你希望他们可以访问它。另一方面，你不希望你的客户对他们发现的每一个无关紧要的小问题都撒手不管。一个简单的方法是让他们不要在非关键问题上使用终止开关，在自助服务功能标志按钮旁边添加一个“报告问题”按钮。</p><h1 id="592f" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated"><strong class="ak">找到最佳时机</strong></h1><p id="e684" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">仔细设计在整个特征流中放置标志的早或晚时间。如果您在流程中将其置于过早的位置，您可能无法访问重现/调试问题或验证修复所需的一些数据。</p><p id="5ba4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一方面，如果在流程中为时已晚，那么即使禁用了该特性，也可能无法防止一些问题。</p><p id="e300" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您很难决定将它放置在哪里，或者如果功能的流程有很多潜在的失败点或通过复杂的管道，请考虑创建几个功能标志，并将它们放置在流程的不同部分。尽管这确实会产生更多的工作，但是当试图缩小复杂流程中的根本原因时，这可能是有帮助的。</p><h1 id="704f" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated"><strong class="ak">通知和警报</strong></h1><p id="76ca" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">每当功能标志的状态发生变化时，确保通知所有相关人员。如果您像上面建议的那样将功能标志作为自助功能提供给客户/用户，这一点尤其重要，因为您肯定希望跟踪此类情况，但您也希望在内部使用kill switch时发送这些通知。</p><p id="3a55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我看到很多这样的情况，团队花了很多时间试图在产品上调试，并找出为什么有些东西不能像预期的那样工作，只是后来发现有人在没有让他们知道的情况下关闭了特性标志。</p><p id="a556" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">确保通知包括执行操作的人员的详细信息和确切时间，以及您可能需要的任何其他详细信息，以便了解问题是否确实是由于功能标志的状态更改而引起的。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="a052" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读。</p></div></div>    
</body>
</html>