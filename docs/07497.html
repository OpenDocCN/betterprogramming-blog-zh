<html>
<head>
<title>Implementing AdMob and Audience Network Libraries In Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Android中实现AdMob和观众网络库</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/implementing-admob-and-audience-network-libraries-in-android-37e58eeb06bd?source=collection_archive---------14-----------------------#2021-01-20">https://betterprogramming.pub/implementing-admob-and-audience-network-libraries-in-android-37e58eeb06bd?source=collection_archive---------14-----------------------#2021-01-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6b98" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">借助这些SDK提高您的Android应用的广告收入</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/664aef5f4a06e5444eeb0cdb7936c32b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4Ogk3mXy_V75e3iO"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@onun?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">努诺·安图内斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="5ce3" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">这篇文章的要点</h1><p id="c62a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">您将学习如何在您的Android应用程序中实现来自广告公司的奖励广告，如<a class="ae ky" href="https://developers.google.com/admob" rel="noopener ugc nofollow" target="_blank"> AdMob </a>(来自谷歌)和脸书。本文还包含了我在五年的移动应用程序广告经验中学到的最佳实践。</p><p id="8b8c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">本文可能会集中讨论如何在Android应用程序中显示广告，但是对于如何跨平台工作的概述是相似的。例如，在移动应用程序中，广告公司使用设备id来识别特定用户，而在web上，他们使用cookies。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="c80c" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">介绍</h1><p id="9d8e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在移动应用程序中显示广告来赚钱并不是一种新的盈利策略。这是广泛使用的从任何移动应用程序或网站赚钱的方法之一。</p><p id="8276" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">通常，移动应用开发者更喜欢显示横幅广告和间隙广告。它们确实产生了可观的收入，但大多数奖励广告比传统广告，如插播广告，赚取更多的收入。</p><p id="1ef5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果这是您第一次在应用程序中实现广告，我强烈推荐您阅读下面的文章，了解基本的广告类型和最佳实践。</p><div class="ne nf gp gr ng nh"><a href="https://medium.com/android-dev-hacks/implementing-ads-in-your-android-application-28ac676024aa" rel="noopener follow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">在您的Android应用中实现广告</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">Admob、脸书和StartApp</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">medium.com</p></div></div><div class="nq l"><div class="nr l ns nt nu nq nv ks nh"/></div></div></a></div><p id="ad43" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">使用奖励广告对每个人来说都是一种双赢的方法。用户必须观看一段时间的广告才能获得奖励，这样广告商就可以确定用户使用了这些信息。同时，用户可以了解新的应用、产品等。，详细。最后，对于开发者来说，如果用户获得了回报，那么像AdMob和脸书这样的广告公司就能赚到钱。这意味着开发商也赚了一大笔钱。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="1ec0" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">AdMob奖励广告</h1><p id="1c18" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">先说谷歌的广告平台AdMob。您可以在Google AdMob页面<a class="ae ky" href="https://admob.google.com/home/" rel="noopener ugc nofollow" target="_blank">上创建一个AdMob帐户和必要的id，以便在应用程序中使用。这个过程很简单，我就跳过了。如果你有任何疑问，请随意评论。</a></p><h2 id="8136" class="nw la it bd lb nx ny dn lf nz oa dp lj ma ob oc ll me od oe ln mi of og lp oh bi translated">综合</h2><p id="b349" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我更喜欢使用Firebase库，但是你也可以通过play-services-ads库显示AdMob奖励广告。要将Firebase广告集成到您的项目中，请在应用程序级别的<code class="fe oi oj ok ol b">gradle</code>文件中添加以下代码块。</p><pre class="kj kk kl km gt om ol on oo aw op bi"><span id="9eba" class="nw la it ol b gy oq or l os ot">dependencies {<br/>    <strong class="ol iu"><em class="ou">implementation </em>("com.google.firebase:firebase-ads:19.6.0")</strong><br/>}</span></pre><p id="a776" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下一步是在<code class="fe oi oj ok ol b">manifest</code>文件中添加必要的元数据，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="636c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">最后，是时候实施奖励广告了。首先，我们需要创建一个奖励广告实例。这可以通过调用<code class="fe oi oj ok ol b">MobileAds</code>类中的<code class="fe oi oj ok ol b">getRewardedVideoAdInstance</code>函数来完成。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">AdMob奖励广告实例创建</p></figure><p id="3883" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">接下来，我们需要加载奖励广告。为此，我们需要AdMob <code class="fe oi oj ok ol b">AdRequest</code>实例和reward ad <code class="fe oi oj ok ol b">id</code>。在下面的代码片段中，我们使用了一个测试广告ID，但实际上，您需要从您的AdMob帐户生成一个奖励广告ID并在这里使用。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">AdMob广告请求和加载奖励广告</p></figure><p id="6e53" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe oi oj ok ol b">loadAd</code>函数是异步的；我们需要分配一个广告监听器来显示成功加载的奖励广告。现成的Firebase Ads提供了<code class="fe oi oj ok ol b">RewardedVideoAdListener</code>来做到这一点。看看听者:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">AdMob广告监听器</p></figure><p id="281b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe oi oj ok ol b">onRewardedVideoAdClosed</code>在广告关闭后执行；要么是用户强行关闭，要么是广告结束后关闭。</p><p id="b3d3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果用户通过将应用程序移至后台或取消应用程序而离开应用程序，则执行<code class="fe oi oj ok ol b">onRewardedVideoAdLeftApplication</code>。</p><p id="f47a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe oi oj ok ol b">onRewardedVideoAdLoaded</code>在广告成功加载并准备显示后执行。</p><p id="7433" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe oi oj ok ol b">onRewardedVideoAdOpened</code>奖励广告开始显示后立即执行。</p><p id="fc9c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe oi oj ok ol b">onRewardedVideoCompleted</code>在视频结束后执行。</p><p id="8186" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">一旦用户通过成功观看广告赢得奖励，就执行<code class="fe oi oj ok ol b">onRewarded</code>。</p><p id="f5c9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果加载广告时出现错误，则执行<code class="fe oi oj ok ol b">onRewardedVideoAdFailedToLoad</code>。</p><p id="a1c2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在我们知道了监听器回调是如何工作的，我们可以创建一个监听器并将其分配给一个奖励广告实例，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">显示AdMob广告</p></figure><p id="887f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">瞧啊。您刚刚在应用程序中实现了AdMob奖励广告，以增加您的广告收入。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="ca6b" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">脸书广告</h1><p id="f510" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">下一站是脸书广告公司。我们需要在<a class="ae ky" href="https://www.facebook.com/audiencenetwork/solutions/overview?&amp;utm_campaign=AN_SMB_Search_Google_Acquisition_APAC_IN_EN_Brand_Beta&amp;utm_source=Google&amp;utm_medium=paid_search&amp;utm_term=%2Bfacebook%20%2Baudience%20%2Bnetwork&amp;utm_device=c&amp;gclsrc=aw.ds&amp;&amp;gclid=CjwKCAjwiMj2BRBFEiwAYfTbCt_p0Ahb2y7ViEHff_5IclDhIzE7K9HOS9aU_864i7leJPBApFDMTBoC3Z0QAvD_BwE&amp;gclsrc=aw.ds" rel="noopener ugc nofollow" target="_blank">脸书观众网络</a>中创建一个帐户，然后创建脸书奖励广告ID。在某种程度上，它类似于AdMob ad ID生成。不要再耽搁了，让我们开始吧。</p><h2 id="d88b" class="nw la it bd lb nx ny dn lf nz oa dp lj ma ob oc ll me od oe ln mi of og lp oh bi translated">综合</h2><p id="96b7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">要包含脸书广告，我们需要将脸书观众网络库添加到您的项目中，如下所示:</p><pre class="kj kk kl km gt om ol on oo aw op bi"><span id="9c60" class="nw la it ol b gy oq or l os ot">implementation "<strong class="ol iu">com.facebook.android:audience-network-sdk:5.+</strong>"</span></pre><p id="57d5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">一旦你完成了整合部分并生成了一个脸书奖励广告ID，就该进入实施部分了。在创建任何广告对象之前，我们需要在应用程序类内部的<code class="fe oi oj ok ol b">onCreate</code>函数上初始化受众网络SDK。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="1e4b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">首先，我们需要创建一个类似于AdMob广告实现的脸书奖励广告实例。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="fcba" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后我们需要加载悬赏广告，如下图所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="21dd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">类似于AdMob奖励广告加载，脸书<code class="fe oi oj ok ol b">loadAd</code>功能是异步的。所以我们需要一个回调来显示成功加载的奖励广告。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="7d48" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">侦听器函数的工作方式类似于AdMob函数，所以我不再赘述。我们在<code class="fe oi oj ok ol b">onAdLoaded</code>函数中显示广告，一旦广告成功加载，该函数就会调用。</p><p id="8fa5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">就这样——你已经完成了脸书奖励广告！</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="b414" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">最佳实践</h1><ul class=""><li id="fcb8" class="ox oy it lt b lu lv lx ly ma oz me pa mi pb mm pc pd pe pf bi translated"><strong class="lt iu">在你加载AdMob或脸书奖励时显示加载覆盖图</strong>，然后在广告成功加载并准备好显示时关闭它。这样，你将避免不幸的广告点击，这是对广告政策的重大违反。</li><li id="4f48" class="ox oy it lt b lu pg lx ph ma pi me pj mi pk mm pc pd pe pf bi translated">最好在之前<strong class="lt iu">加载你想要显示的广告。这样，用户在加载广告时就不需要等待了。</strong></li><li id="d1e9" class="ox oy it lt b lu pg lx ph ma pi me pj mi pk mm pc pd pe pf bi translated"><strong class="lt iu">不显示应用程序之外的广告。</strong>如果你的应用程序与后台运行的应用程序或一些实用程序相关，不要在应用程序之外显示广告。这是主要的违规行为之一。解决方法之一是显示一个弹出窗口，将用户导航到应用程序，然后显示广告。</li></ul></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="553b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">目前就这些。希望你学到了有用的东西，感谢阅读。</p></div></div>    
</body>
</html>