<html>
<head>
<title>Interactive Data Graphing in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中的交互式数据图形</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/interactive-data-graphing-in-react-95d7963247ff?source=collection_archive---------11-----------------------#2019-10-07">https://betterprogramming.pub/interactive-data-graphing-in-react-95d7963247ff?source=collection_archive---------11-----------------------#2019-10-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5745" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Cytoscape.js创建引人注目的可视化效果</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b4dea68d8bfed6ef5e05b0ca901b547d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_zy_k327RoT6HzWz"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@nasa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">美国宇航局</a></p></figure><p id="19b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可视化数据已经成为软件工程师可用的最强大的工具之一。让大量数据具有交互性和用户友好性会产生引人注目的产品，并能揭示出原本可能被忽视的重要关联。</p><p id="63a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://js.cytoscape.org" rel="noopener ugc nofollow" target="_blank"> Cytoscape.js </a>为快速构建精确的图形模型提供了一个便捷的解决方案。凭借令人印象深刻的显示，如这张东京铁路系统的互动地图，Cytoscape已经成为许多网络开发人员的首选网络可视化工具。</p><p id="bdf6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我最近在做一个<a class="ae kv" href="https://github.com/jollyjerr/StellarNavigation-Frontend" rel="noopener ugc nofollow" target="_blank"> React项目</a>时，我不得不筛选各种资源来获得一个功能齐全的Cytoscape.js实现并运行。感谢博客的力量，我以前头疼的问题可以帮助指导您完成设置过程，这样您就可以在下一个React项目中快速实现令人惊叹的数据可视化。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/c27a467134bcdcb8ef527b476da214f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*DXnnGnQE36cLMlI1EHNwXQ.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Cytoscape.js的奇妙交互性— on React！</p></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="ed6a" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">第一步——NPM</h1><p id="6530" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">一旦有了一个<a class="ae kv" href="https://reactjs.org/docs/create-a-new-react-app.html" rel="noopener ugc nofollow" target="_blank"> React应用程序并正在运行</a>，运行这两个命令。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="e01b" class="nc mb iq my b gy nd ne l nf ng">npm install cytoscape<br/>npm install react-cytoscapejs</span></pre><p id="d153" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“Cytoscape”包含我们将使用的图形工具库，而“React-cytoscapejs”将Cytoscape的许多普通js转换成React组件。有了这两个工具，我们可以按照React的传统组织代码，同时保持Cytoscape的功能。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="415c" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">第二步—构建我们的组件</h1><p id="e950" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">安装了库和包之后，我们构建React组件，我们将使用它来显示我们的数据。我将向您展示代码，然后介绍每一部分的用途。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="e9a6" class="nc mb iq my b gy nd ne l nf ng">import React, { Component } from 'react'<br/>import CytoscapeComponent from 'react-cytoscapejs'<br/><br/>export default class Demo extends Component {<br/>  <br/>  state = {<br/>    w: 0,<br/>    h: 0,<br/>    elements: []<br/>  }<br/><br/>  componentDidMount = () =&gt; {<br/>    this.setState({<br/>      w: window.innerWidth,<br/>      h:window.innerHeight<br/>    })<br/>  }<br/>  <br/>  render() {<br/>    return(<br/>      &lt;div&gt;<br/>        &lt;CytoscapeComponent<br/>            elements={this.state.elements}<br/>            style={{ width: this.state.w, height: this.state.h }}<br/>        /&gt;<br/>      &lt;/div&gt;<br/>    )<br/>}</span></pre><p id="5549" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们首先导入Cytoscape和react-cell scape js，然后构建React“类组件”。</p><p id="249d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Cytoscape通过呈现HTML画布来工作，因此我们可以在状态中保持客户端的屏幕宽度和高度，并在React组件挂载时捕获这些信息。</p><p id="5a78" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Cytoscape还需要呈现元素的数据。在对后端API进行fetch调用之后，我们可以将这些数据存储在组件状态中，以实现传统的、类似React的动态呈现。</p><p id="b29f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，在我们的渲染函数中，您可以看到<code class="fe nh ni nj my b">&lt;CytoscapeComponent/&gt;</code>被渲染，我们状态的元素和屏幕大小被传入。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="41fd" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">第三步—访问“cy”</h1><p id="f4e5" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">如果你看一下Cytoscapes文档，你会看到数百个预构建的函数与你的数据进行交互。不幸的是，因为这个接口位于React组件内部，所以我们必须更加努力地使用这些函数。</p><p id="cb02" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一步是在我们的类组件中声明变量<code class="fe nh ni nj my b">cy</code>。</p><p id="323c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为你<code class="fe nh ni nj my b">&lt;CytoscapeComponent/&gt;</code>上的道具，加上这一行。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="556a" class="nc mb iq my b gy nd ne l nf ng">cy={(cy) =&gt; {this.cy = cy}}</span></pre><p id="7f8f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，在我们的React组件安装完成后，我们可以通过变量<code class="fe nh ni nj my b">this.cy</code>访问所有传统的Cytoscape函数！</p><h2 id="b900" class="nc mb iq bd mc nk nl dn mg nm nn dp mk lf no np mm lj nq nr mo ln ns nt mq nu bi translated"><strong class="ak">警告提示:</strong></h2><p id="67f2" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">因为<code class="fe nh ni nj my b">this.cy</code>只能在组件挂载后声明<em class="nv">，所以在组件挂载前提及<code class="fe nh ni nj my b">this.cy</code>会破坏整个应用程序。这个简单的事实使得编程交互性有点不直观——但是一旦你认识到这种模式，它就会很快出现。</em></p><p id="ae46" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了避免这种危险，编写为您设置交互性的函数，然后从内部调用这些函数<code class="fe nh ni nj my b">componentDidMount</code>是很有帮助的。</p><p id="a270" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您希望呈现与<code class="fe nh ni nj my b">cy</code>交互的其他React组件，您甚至必须遵循这种模式。这里有一个简单的交互式<code class="fe nh ni nj my b">&lt;CytoscapeComponent/&gt;</code>的例子，它记录用户点击的数据节点。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="3ae5" class="nc mb iq my b gy nd ne l nf ng">import React, { Component } from 'react'<br/>import CytoscapeComponent from 'react-cytoscapejs'<br/><br/>export default class Demo extends Component {<br/>  <br/>  state = {<br/>    w: 0,<br/>    h: 0,<br/>    elements: []<br/>  }<br/><br/>  componentDidMount = () =&gt; {<br/>    this.setState({<br/>      w: window.innerWidth,<br/>      h:window.innerHeight<br/>    })<br/>    this.setUpListeners()<br/>  }<br/>  <br/>  setUpListeners = () =&gt; {<br/>    this.cy.on('click', 'node', (event) =&gt; {<br/>      console.log(event.target)<br/>    })<br/>  }<br/>  <br/>  render() {<br/>    return(<br/>      &lt;div&gt;<br/>        &lt;CytoscapeComponent<br/>            elements={this.state.elements}<br/>            style={{ width: this.state.w, height: this.state.h }}<br/>            cy={(cy) =&gt; {this.cy = cy}}<br/>        /&gt;<br/>      &lt;/div&gt;<br/>    )<br/>}</span></pre></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="d082" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">第四步——渲染数据和拍摄星空</h1><p id="a44f" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">如何将正确的数据传递给React组件完全取决于您。就我个人而言，我在Python的后端完成了所有的计算和格式化，这样在一个fetch调用之后，所有的东西都可以立即显示。</p><p id="4b28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nh ni nj my b">&lt;CytoscapeComponent/&gt;</code>需要一个对象数组。每个期望的节点应该至少有两个主键，<code class="fe nh ni nj my b">data:</code>和<code class="fe nh ni nj my b">position:</code>。图‘边’只有一个主键，<code class="fe nh ni nj my b">data:</code>，需要引用两个节点的id。下面是一个格式正确的数据的简单示例:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="afb7" class="nc mb iq my b gy nd ne l nf ng">elements = [<br/>{ data: { id: 'one', label: 'Node 1' }, position: { x: 0, y: 0 } },<br/>{ data: { id: 'two', label: 'Node 2' }, position: { x: 100, y: 0 }},<br/>{ data: { source: 'one', target: 'two', label: 'Edge from Node1 to Node2'}}<br/>]</span></pre><p id="cf1d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从这一点开始，您有一个功能性的数据画布要探索，所有这些都包含在一个标准的React格式中！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/2f93ec35a06bf9147dbd0c895e59bd1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*gZkLBcC0cZrrb1mfRCK8aA.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们的成品！</p></figure><p id="929b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了Cytoscape之外，还有数百个(如果不是数千个)额外的库要导入——定制的层次似乎永远不会结束。当您开发项目时，请记住这些核心内容，以避免偷偷摸摸的错误:</p><ul class=""><li id="b349" class="nw nx iq ky b kz la lc ld lf ny lj nz ln oa lr ob oc od oe bi translated">总是在React组件的顶部导入额外的资源。</li><li id="8f9b" class="nw nx iq ky b kz of lc og lf oh lj oi ln oj lr ob oc od oe bi translated">不要在组件安装前读取的任何代码中引用<code class="fe nh ni nj my b">cy</code>。这样做会使你的应用程序立即崩溃，而且随着你的应用程序包含更多的Cytoscape功能，调试起来会很棘手。</li><li id="b2a7" class="nw nx iq ky b kz of lc og lf oh lj oi ln oj lr ob oc od oe bi translated">研究“细胞视图”和“反应-细胞视图”的文档，因为涉及到反应时，一些功能的语法略有不同。</li></ul><p id="d876" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">资源:</p><ul class=""><li id="aa4d" class="nw nx iq ky b kz la lc ld lf ny lj nz ln oa lr ob oc od oe bi translated"><a class="ae kv" href="https://js.cytoscape.org" rel="noopener ugc nofollow" target="_blank">细胞图</a></li><li id="2b43" class="nw nx iq ky b kz of lc og lf oh lj oi ln oj lr ob oc od oe bi translated"><a class="ae kv" href="https://github.com/plotly/react-cytoscapejs" rel="noopener ugc nofollow" target="_blank">反应细胞图</a></li></ul><p id="d7be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">祝您的数据映射之旅好运！干杯，编码快乐。</p></div></div>    
</body>
</html>