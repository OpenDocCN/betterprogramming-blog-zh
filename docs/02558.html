<html>
<head>
<title>Warnings Are Not Pieces of Flair</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">警告不是一种天赋</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/warnings-are-not-pieces-of-flair-2acc8f894eb7?source=collection_archive---------14-----------------------#2019-12-08">https://betterprogramming.pub/warnings-are-not-pieces-of-flair-2acc8f894eb7?source=collection_archive---------14-----------------------#2019-12-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e78f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个简短的关于编译器或linter警告的危险的咆哮</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/03bc87b4fd4d0de60d2cc81be8fa77ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eWijVtacXifqmhnd"/></div></div></figure></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="f499" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">警示灯</h1><p id="648e" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">我从事编程已经超过30年了，让我这样告诉你吧——我打开一个新的(对我来说)遗留项目并在没有警告的情况下构建它的次数大概可以用一只手来计算。</p><p id="b64c" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">这是为什么呢？</p><p id="5c46" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">我觉得有点像我车上的胎压灯。这辆车跑得很好，轮胎看起来也很好，但尽管带它去检查，尽管告诉汽车的车载计算机重新校准其轮胎压力预期，灯仍然亮着。</p><p id="0ee5" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">久而久之，我倾向于把这种黄灯过滤掉，作为“正常操作”的一部分。</p><p id="8b80" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">我们对代码做同样的事情。如果它没有阻止构建的成功，我们倾向于忽略它——特别是如果警告已经出现的话。</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="f8d8" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">我们为什么关心？</h1><p id="1342" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">当然，这样做的危险在于，如果你忽略了现有的警告，那么新的警告就会隐藏在显眼的地方。</p><p id="2395" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">我的车就是一个完美的例子——虽然它运行良好，但如果它突然<em class="mu">出现气压问题，我不会注意到，直到我的轮胎明显瘪了。</em></p><p id="a4b4" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">类似地，你可能正忙于解决一个问题，而你的编译器或linter正试图向你指出一些东西，但是它被淹没在噪音中。这种事在我身上至少发生过十次。</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="430a" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">我们明白了。你不喜欢警告。那又怎样？</h1><p id="90a3" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">那么，我们实际上能做些什么呢？</p><p id="c7b0" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">从<em class="mu">实际阅读</em>你的警告开始。</p><p id="7c57" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">我知道，这是一个新的概念，但你需要看看你有不同类型的警告。您应该查看每种类型的警告数量，并首先解决数量最多、最严重的警告。</p><p id="3003" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">养成习惯，每次你做改变的时候，告诉编译器/linter忽略一小组警告，随着时间的推移，你可以还清你的警告债务。</p><p id="ebbb" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">你会惊奇地发现，即使在15分钟的时间内，你也能处理多少警告。有时，仅仅搜索和理解一个警告就能教会你关于编程的新东西，并巩固你自己都不知道的漏洞。</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="cc30" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">对警告说不</h1><p id="09c0" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">一旦你达到了梦寐以求的0警告级别，我建议你跳出困境，更进一步。</p><p id="c552" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">将编译器/linter警告视为构建错误。</p><p id="2226" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">好了，请不要再向我扔东西了。让我解释一下。</p><p id="7371" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">如果您得到0个警告，您可以通过导致构建失败(如果它们引入了新的编译器或linter警告)来阻止更高的警告。</p><p id="7293" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">如果这样做，一旦警告存在，它对引入它的开发人员来说立即有意义，不能被忽略。</p><p id="85ca" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">请注意，这并不一定会使开发人员机器上的构建显式失败。您可以在您的CI/CD构建管道中使用比在正常开发中更严格的过程。</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="6ab5" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">将警告视为错误</h1><p id="07aa" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">这一点的实现细节会因语言而异，但是让我们来看看。NET和JavaScript/TypeScript，因为这是我写得最多的。</p><p id="ebf8" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">因为。NET构建，在<a class="ae mv" href="https://visualstudio.microsoft.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio </a>中，您可以在build选项卡上进入单个项目的设置，并更改它对活动构建概要文件的警告处理:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b0574a7c46048370c3a1fc45a0905d29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NRkIfKj4mvo1vaf8"/></div></div></figure><p id="190c" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">对于JavaScript和TypeScript，这将取决于你用什么来编写<a class="ae mv" href="https://en.wikipedia.org/wiki/Lint_%28software%29" rel="noopener ugc nofollow" target="_blank">林挺</a>，但我会假设你用的是<a class="ae mv" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a>，因为它非常流行，而且我之前已经深入研究过<a class="ae mv" href="https://killalldefects.com/2019/11/28/standardizing-typescript-with-eslint-npm-prettier/" rel="noopener ugc nofollow" target="_blank">了</a>。</p><p id="56b1" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">ESLint允许您通过修改Lint配置来在粒度级别配置规则处理。</p><p id="f530" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">例如，如果我想将<code class="fe mw mx my mz b">max-lines</code>分析规则视为一个违反错误，而不是一个警告，我会编写如下代码:</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="64e5" class="ne lc it mz b gy nf ng l nh ni">"rules": { <br/>  "max-lines": ["error", {"max": 200, "skipBlankLines": true}] <br/>}</span></pre><p id="3910" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">您可以在每次遇到新的警告时采用类似的方法，并在lint配置中为它添加一个<code class="fe mw mx my mz b">error</code>级别的规则。</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="cde7" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">关闭</h1><p id="80cb" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">因此，警告可能不会杀死你，但是它们是随着时间的推移保持软件质量的一个有价值的工具。是否处理过去的警告或将新的警告视为错误取决于您。</p><p id="aee3" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">我的主要忠告是:你需要注意应用程序中的每一个警告，因为你的代码试图告诉你一些事情。</p><p id="88ec" class="pw-post-body-paragraph lt lu it lv b lw mp ju ly lz mq jx mb mc mr me mf mg ms mi mj mk mt mm mn mo im bi translated">如果我们不再把警告当作装饰，我们可以停下来听听我们的代码试图告诉我们什么，然后做我们都想做的事情:更快地交付更好的软件。</p></div></div>    
</body>
</html>