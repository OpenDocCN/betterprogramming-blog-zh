# 这些提示将提高您的 React 代码性能

> 原文：<https://betterprogramming.pub/5-react-performance-tips-f6e65295fba5>

从 2500 毫秒到 1500 毫秒的等待时间会对你的 UX 和转化率产生巨大的影响

![](img/40956b46a65ead94aa01afc8ce721d83.png)

React 很受欢迎，因为 React 应用程序伸缩性很好，而且使用起来很有趣。一旦你的应用程序扩展，你可能要考虑优化你的应用程序。从 2500 毫秒的等待时间到 1500 毫秒会对你的 UX 和转化率产生巨大的影响。

以下是我在 React 中使用的一些性能技巧。

# React .备忘录

如果您有一个无状态组件，并且您知道您的组件不需要重新呈现，那么将您的整个无状态组件包装在一个`React.memo`函数中。举个例子:

变成如下:

我们将整个无状态组件包装在一个`React.memo`函数中。注意有助于调试的`profile.displayName`。[关于 component.displayName 的更多信息](http://"https://stackoverflow.com/a/41582557/5073961)

`React.memo`相当于班级版`React.PureComponent`。

# 做出反应。纯组件

`PureComponent`用`shouldComponentUpdate`生命周期法比较道具和状态。这意味着如果状态和道具相同，它不会重新渲染。让我们将之前的无状态组件重构为基于类的组件。

如果我们确定道具和状态不会改变，我们可以不使用`Component`，而是使用`PureComponent`。

# ComponentDidCatch(错误，信息){}生命周期方法

组件可能会产生副作用，导致应用程序在生产中崩溃。如果你有超过 1000 个组件，很难跟踪所有的东西。

现代 web 应用程序中有如此多的活动部分，很难理解整个概念，也很难处理错误。幸运的是，React 引入了一种新的生命周期方法来处理错误。

`componentDidCatch()`方法的工作方式类似于 JavaScript catch `{}`块，只是针对组件。只有类组件可以是错误边界。

# React.lazy:带悬念的代码拆分

> “我们为组件建立了一种通用的方法，在它们加载异步数据时暂停渲染，我们称之为悬念。您可以暂停任何状态更新，直到数据准备就绪，并且您可以向树深处的任何组件添加异步加载，而无需通过您的应用程序检查所有属性和状态并提升逻辑。在高速网络上，更新显得非常流畅和即时，没有出现和消失的旋转器的不和谐级联。在慢速网络上，您可以有意设计用户应该看到哪些加载状态，以及它们应该有多细粒度或多粗粒度，而不是根据代码的编写方式来显示微调器。该应用始终保持响应。”——丹·阿布拉莫夫。

点击此处阅读更多关于超越反应 16 的信息。

# 做出反应。片段，以避免额外的 HTML 元素包装

如果您以前使用过 React，您可能知道以下错误代码:

`Parse Error: Adjacent JSX elements must be wrapped in an enclosing tag`。

React 组件只能有一个子组件。这是故意的。

下面的代码会让你的应用崩溃。解决这个问题的方法是将所有东西都包装在一个元素中。

以下代码的唯一问题是，我们对每个组件都有一个扩展的包装器。我们需要渲染的标记越多，我们的应用程序就越慢。

## 拯救碎片:

瞧啊。不需要额外的标记。

如果你想了解更多关于 React 的知识，我可以看看《 [*》这本书。*](https://amzn.to/2yr3Xpi)

额外收获——这是片段的简写。

感谢阅读！❤