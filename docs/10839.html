<html>
<head>
<title>Accessibility and Visibility in Solidity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">坚固性中的可达性和可见性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/accessibility-and-visibility-in-solidity-61ff72facab7?source=collection_archive---------7-----------------------#2022-01-30">https://betterprogramming.pub/accessibility-and-visibility-in-solidity-61ff72facab7?source=collection_archive---------7-----------------------#2022-01-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9efa" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">理解函数和状态变量中不同类型的可见性</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/335fc336960950fff1ff6db92274125e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i1rWrkhGj87ATUrcLqdk5Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@inayali" rel="noopener ugc nofollow" target="_blank"> Ali Inay </a>在<a class="ae ky" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="c5b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Solidity语言允许指定契约函数和状态变量的可访问性。这将使我们能够设置构造智能契约的约束，以及其他契约或地址是否可以访问数据。</p><p id="9ff0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">契约状态变量和函数有一个细微的区别，我们要检查一下。我想指出，在区块链发展的背景下，可及性和可见性是不同的东西。</p><h1 id="0048" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">功能可见性</h1><p id="a39c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">智能合约中的函数可以有四个可访问性级别。</p><h2 id="b715" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">公共</h2><p id="872e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">当一个函数被定义为<code class="fe ne nf ng nh b">public</code>时，它可以从任何其他契约调用，包括包含它或地址的智能契约。</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="4864" class="ms lw it nh b gy nm nn l no np">function publicFunction() public {<br/>  publicInt += 1;<br/>}</span></pre><h2 id="128a" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">外部的</h2><p id="22ed" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">关键字<code class="fe ne nf ng nh b">external</code>表示一个函数可以被其他契约或者地址调用。如果我们想调用一个<code class="fe ne nf ng nh b">external</code>函数，我们可以使用<code class="fe ne nf ng nh b">this</code>关键字。</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="2ab5" class="ms lw it nh b gy nm nn l no np">function externalFunction() external {<br/>  externalInt += 1;<br/>}</span><span id="697d" class="ms lw it nh b gy nq nn l no np">function callExternalFunction() public {<br/>  this.externalFunction();<br/>}</span></pre><h2 id="e7e3" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">内部的</h2><p id="95cf" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">内部函数可以从同一个智能协定或从它继承的任何其他智能协定中调用。</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="be7f" class="ms lw it nh b gy nm nn l no np">function internalFunction() internal {<br/>  internalInt += 1;<br/>}</span></pre><h2 id="0c19" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">私人的</h2><p id="4c60" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">私有功能不可见，也不能从其他智能合同或地址访问。这些函数在继承定义了此函数的智能协定的协定中不可访问。</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="267a" class="ms lw it nh b gy nm nn l no np">function internalFunction() internal {<br/>  internalInt += 1;<br/>}</span></pre><h1 id="8b91" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">合同状态变量可见性</h1><p id="7390" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">智能合约状态变量可以是<code class="fe ne nf ng nh b">public</code>、<code class="fe ne nf ng nh b">internal</code>和<code class="fe ne nf ng nh b">private</code>。</p><h2 id="c0fa" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">公共</h2><p id="5c39" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">公共状态变量可以从任何智能协定中访问，包括保存它们的智能协定或任何地址。Solidity为状态变量<code class="fe ne nf ng nh b">public</code>生成一个getter函数。</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="01f5" class="ms lw it nh b gy nm nn l no np">contract Accessibility {<br/>  uint public publicInt;<br/>}</span><span id="c7ce" class="ms lw it nh b gy nq nn l no np">// can get and set from other smart contracts<br/>contract AccessPublic {<br/>  Accessibility accessibility = new Accessibility();</span><span id="6eba" class="ms lw it nh b gy nq nn l no np">  function accessPublicInt() public view returns(uint) {<br/>    uint publicInt = accessibility.publicInt();<br/>    return publicInt;<br/>  }<br/>}</span></pre><h2 id="c146" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">内部的</h2><p id="d4b6" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">与函数类似，<code class="fe ne nf ng nh b">internal</code>状态变量可以从定义它们的契约或从智能契约继承的任何其他契约中访问。重要的是要注意，默认情况下，智能合约状态变量是<code class="fe ne nf ng nh b">internal</code>。</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="4723" class="ms lw it nh b gy nm nn l no np">uint internal internalInt;</span></pre><h2 id="7db9" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">私人的</h2><p id="5b2e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><code class="fe ne nf ng nh b">private</code>状态变量具有与函数相同的特征。它只能在同一个合同中访问，不能在任何其他合同中访问。</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="b5ce" class="ms lw it nh b gy nm nn l no np">uint private privateInt;</span></pre><h1 id="5967" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">可见性和可访问性</h1><p id="eb9b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在区块链发展中，能见度和可达性有不同的含义。</p><p id="8442" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">智能合约中的一切都是可见的，因为所有交易都在任何人都可以看到的分类帐中公开。</p><p id="ae10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Private或internal防止其他合同或地址修改数据。从外面可以看到它，因为在区块链上什么也藏不住。这意味着您可以限制对状态变量或函数的访问，但它是可见的。</p><h1 id="051e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="ed5f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Solidity编程语言有多个选项来定义智能合约函数和状态变量的访问级别。</p><p id="28e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在区块链开发中，可见性和可及性是不一样的。我们可以限制对函数或状态变量的访问，但是可以从外部查看。</p><h1 id="47d5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">链接</h1><ul class=""><li id="da9f" class="nr ns it lb b lc mn lf mo li nt lm nu lq nv lu nw nx ny nz bi translated"><a class="ae ky" href="https://gist.github.com/fassko/5b73bdb38f0184f0b54b2f6f5cfda095" rel="noopener ugc nofollow" target="_blank">样本代码</a></li><li id="3b06" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><a class="ae ky" href="https://docs.soliditylang.org/en/v0.8.11/contracts.html#visibility-and-getters" rel="noopener ugc nofollow" target="_blank">官方文件</a></li><li id="f089" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><a class="ae ky" href="https://solidity-by-example.org/visibility/" rel="noopener ugc nofollow" target="_blank">通过实例巩固</a></li><li id="26d6" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><a class="ae ky" href="https://ethereum.stackexchange.com/questions/11393/how-to-hide-a-function-of-all-but-visible-to-the-owner" rel="noopener ugc nofollow" target="_blank">如何隐藏一个所有者看不到的功能</a></li><li id="2d99" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><a class="ae ky" href="https://ethereum.stackexchange.com/questions/6547/solidity-functions-private-visibility" rel="noopener ugc nofollow" target="_blank">可靠性功能—私有可见性</a></li></ul></div></div>    
</body>
</html>