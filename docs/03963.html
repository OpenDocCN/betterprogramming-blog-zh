<html>
<head>
<title>Develop and Deploy Kubernetes Applications on a Raspberry Pi Cluster</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Raspberry Pi集群上开发和部署Kubernetes应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/develop-and-deploy-kubernetes-applications-on-a-raspberry-pi-cluster-fbd4d97a904c?source=collection_archive---------9-----------------------#2020-03-16">https://betterprogramming.pub/develop-and-deploy-kubernetes-applications-on-a-raspberry-pi-cluster-fbd4d97a904c?source=collection_archive---------9-----------------------#2020-03-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6e27" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><strong class="ak">如何在Pi集群上创建全功能的Kubernetes应用</strong></h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/80db57c53948a28c0b4ba3002a488a42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EWJBsIfoXpq08PFgfyubeQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我的树莓派集群</p></figure><p id="f0e5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本文是我在Raspberry Pi集群上开发和部署Kubernetes和一个示例微服务风格应用程序的系列文章的第一篇。</p><p id="ba66" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本系列的部分内容旨在成为在Raspberry Pi集群上开发和部署Kubernetes应用程序的元资源。在Raspberry Pi上部署操作系统等常见任务在其他资源中也很容易找到。我不会在这个系列中复制信息。本系列将提供其他资料中没有的细节。</p><p id="abee" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本系列中没有在Raspberry Pi上执行的任务(例如初始设置和各种管理任务)是在运行Catalina的MacBook Pro上执行的。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="4fde" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">我为什么要这么做？</h1><p id="2d76" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">我一直在寻找一个有趣的项目来做。我的日常工作就是在Kubernetes集群上开发和部署应用程序。然而，我只是一个更大团队的一部分。虽然团队熟悉应用程序中使用的所有技术，但我们每个人都倾向于承担更专业的角色。特别是，我的角色侧重于应用程序。我觉得我可以“驾驭”Kubernetes，因为我知道如何完成与应用程序的管理和故障排除相关的某些操作。也就是说，我当然没有我所说的对Kubernetes的深入了解。</p><p id="b53c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了更加熟悉Kubernetes，我决定从头开始创建一个Kubernetes集群。由于我无法访问更大的计算机集群，并且我对Raspberry Pis有兴趣，所以我决定使用Raspberry Pis创建我的集群。</p><p id="bd1b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了进一步磨练我的Kubernetes技能，我需要创建一个由多个微服务组成的应用程序，在集群上运行。此外，我工作过的所有应用程序都必须解决上市时间和最佳实践之间的权衡，例如，将日志记录到应用程序中，还是稍后再连接上。因此，为了让事情变得更有趣，我决定创建一个相对简单但现实的应用程序，它可以展示我认为的最佳实践。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="360f" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">系列文章</h1><p id="26bb" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">当前可用的文章有:</p><ul class=""><li id="d51d" class="my mz it la b lb lc le lf lh na ll nb lp nc lt nd ne nf ng bi translated"><a class="ae nh" href="https://medium.com/better-programming/setup-a-raspberry-pi-cluster-ff484a1c6be9" rel="noopener">设置一个Raspberry Pi集群</a>:描述如何设置和配置一组Raspberry Pi到一个集群中。这包括定义群集中的网络以及到外部网络的网络。</li><li id="8b44" class="my mz it la b lb ni le nj lh nk ll nl lp nm lt nd ne nf ng bi translated">I <a class="ae nh" href="https://medium.com/better-programming/install-kubernetes-on-a-raspberry-pi-cluster-49ad9a762d08" rel="noopener">在Raspberry Pi集群上安装Kubernetes</a>:这包括安装&amp;配置Kubernetes以及构建和部署一个简单的服务。后一步涉及一个最小的应用程序，可用于测试Kubernetes集群以及对应用程序的简单外部网络访问。</li><li id="a1db" class="my mz it la b lb ni le nj lh nk ll nl lp nm lt nd ne nf ng bi translated"><a class="ae nh" href="https://medium.com/@RichYoungkin/install-kubernetes-ingress-on-a-raspberry-pi-cluster-e8d5086c5009" rel="noopener">在Raspberry Pi集群上安装Kubernetes Ingress</a>:Ingress是一种支持外部访问集群内部服务的有用方式。在这篇文章中，我将描述如何安装、配置和测试作为入口控制器<a class="ae nh" href="https://docs.traefik.io/" rel="noopener ugc nofollow" target="_blank"> Traefik </a>。本文还包括安装和配置Helm。头盔将用于部署Traefik。Helm也将在本系列的后续文章中使用。</li><li id="4e59" class="my mz it la b lb ni le nj lh nk ll nl lp nm lt nd ne nf ng bi translated"><a class="ae nh" href="https://medium.com/better-programming/kubernetes-application-monitoring-on-a-raspberry-pi-cluster-fa8f2762b00c" rel="noopener"> Kubernetes在Raspberry Pi集群上的应用程序监控</a> —安装Prometheus、Grafana和EFK(elastic search/Fluentd/ki Bana)作为监控堆栈。还包括在集群上安装Telegraf，以监控集群上主机的机器级别指标。例如CPU负载和温度、磁盘使用</li><li id="0e2a" class="my mz it la b lb ni le nj lh nk ll nl lp nm lt nd ne nf ng bi translated"><a class="ae nh" href="https://medium.com/better-programming/how-to-install-mysql-on-a-raspberry-pi-ad3f69b4a094" rel="noopener">如何在一个树莓Pi上安装Maria db</a>—标题说明了一切。需要注意的一点是，MariaDB是MySQL的替代产品</li></ul><p id="65ce" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面列出了未来文章中涉及的主题。</p><ul class=""><li id="3e4f" class="my mz it la b lb lc le lf lh na ll nb lp nc lt nd ne nf ng bi translated">开发应用程序。这个系列的高潮。这将利用上面介绍的所有准备步骤，但也将展示如何安装、升级和管理这样一个应用程序的完整画面。这个应用程序可以部署到我们将在本系列中构建的Raspberry Pi集群，但是它也可以部署到任何Kubernetes集群。<a class="ae nh" href="https://github.com/youngkin/mockvideo/tree/master" rel="noopener ugc nofollow" target="_blank">目前在GitHub上已经有了</a>。</li></ul></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="01d3" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">更多细节</h1><p id="ddb3" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">虽然本系列的重点是Kubernetes上的一个Raspberry Pi集群，但是许多与应用程序相关的内容可以应用于任何Kubernetes环境。例如:</p><ul class=""><li id="a023" class="my mz it la b lb lc le lf lh na ll nb lp nc lt nd ne nf ng bi translated">使用<a class="ae nh" href="https://www.influxdata.com/time-series-platform/telegraf/" rel="noopener ugc nofollow" target="_blank"> Telegraf </a>进行集群监控。</li><li id="0d50" class="my mz it la b lb ni le nj lh nk ll nl lp nm lt nd ne nf ng bi translated">使用<a class="ae nh" href="https://grafana.com/" rel="noopener ugc nofollow" target="_blank"> Grafana </a>实现指标可视化。</li><li id="6602" class="my mz it la b lb ni le nj lh nk ll nl lp nm lt nd ne nf ng bi translated">使用<a class="ae nh" href="https://docs.traefik.io/" rel="noopener ugc nofollow" target="_blank"> Traefik </a>的集群<a class="ae nh" href="https://kubernetes.io/docs/concepts/services-networking/ingress/" rel="noopener ugc nofollow" target="_blank">入口</a>。</li><li id="33cf" class="my mz it la b lb ni le nj lh nk ll nl lp nm lt nd ne nf ng bi translated">用<a class="ae nh" href="https://github.com/helm/helm" rel="noopener ugc nofollow" target="_blank">掌舵</a>部署和升级应用。</li><li id="7ddd" class="my mz it la b lb ni le nj lh nk ll nl lp nm lt nd ne nf ng bi translated">使用<a class="ae nh" href="https://prometheus.io/docs/introduction/overview/" rel="noopener ugc nofollow" target="_blank"> Prometheus </a>检测应用程序。</li><li id="6a83" class="my mz it la b lb ni le nj lh nk ll nl lp nm lt nd ne nf ng bi translated">使用<a class="ae nh" href="https://www.mysql.com/" rel="noopener ugc nofollow" target="_blank"> MySQL </a>的应用数据库支持。</li><li id="88d3" class="my mz it la b lb ni le nj lh nk ll nl lp nm lt nd ne nf ng bi translated">使用一个<a class="ae nh" href="https://www.elastic.co/what-is/elk-stack" rel="noopener ugc nofollow" target="_blank"> ELK </a>(实际上是EFK)堆栈进行日志捕获、搜索和可视化。</li><li id="f96b" class="my mz it la b lb ni le nj lh nk ll nl lp nm lt nd ne nf ng bi translated">应用程序开发最佳实践。</li></ul></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="814a" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">最后</h1><p id="1b2e" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">我概述了一个雄心勃勃的计划。如上所述，并不是所有上述主题都写好了。随着我在这项工作中的进展，我会添加一些文章来描述如何完成每一步，以及一些细节背后的原因。</p><p id="6b06" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我希望在这次旅程中你会和我在一起。欢迎评论、建议和问题。我们可以一起学习。</p></div></div>    
</body>
</html>