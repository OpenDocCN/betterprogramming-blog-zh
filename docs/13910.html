<html>
<head>
<title>Build a Desktop App in Go Using Wails and React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Wails和React构建一个桌面应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-desktop-app-using-react-and-go-13c425bf2dba?source=collection_archive---------0-----------------------#2022-10-13">https://betterprogramming.pub/build-a-desktop-app-using-react-and-go-13c425bf2dba?source=collection_archive---------0-----------------------#2022-10-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d23a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">围棋遇上网络技术</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/26a1ca9296b83c659db0e6779f8114a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UKcpy_AQVd4HmC7J0GRGfA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@lautaroandreani?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">劳塔罗·安德烈亚尼</a>在<a class="ae ky" href="https://unsplash.com/s/photos/programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="8c2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们中的许多人投入时间和精力使用React或另一个前端框架构建了一个优秀的web应用程序，通常在我们的脑海中不时会有这样的想法:“我想知道创建一个这样的桌面应用程序会有多难？”。</p><p id="ae67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们面对现实吧，我们每天都在使用网络，对于许多开发人员来说，这是我们开始编程的方式。虽然web应用程序是开始构建您的技能和专业组合的绝佳方式，但有时我们希望加快步伐，进入独立应用程序的领域……甚至可能针对多种平台和设备进行打包和分发。</p><p id="5cc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没有比使用您最熟悉的web框架从新的或现有的项目创建桌面应用程序更好的开始方式了！现在，您可以通过Go和Wails框架将这些前端与一个超级快速、易于学习、并发和静态类型的后端一起使用！</p><p id="853a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们开始吧，好吗？首先，在着手做任何项目之前，设置好所有的依赖关系总是很重要的。幸运的是，当使用Wails来设置东西时，没有太多要担心的。两个关键的必需品是:</p><ul class=""><li id="97c0" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">go 1.18+版</li><li id="b91f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">npm</li></ul><p id="5bcb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想象自己是一个<code class="fe mj mk ml mm b">yarn</code>人(像我一样),那么继续前进，确保你也有这样的人……如果你已经完成了web应用程序的构建，你很可能会这样做。</p><p id="6163" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你在Mac上构建应用程序，确保你已经安装了Xcode命令行工具，在终端上运行<code class="fe mj mk ml mm b">xcode-select --install</code>。Wails利用原生设备浏览器API来避免将整个浏览器捆绑到最终的二进制文件中，因此，不运行 Windows 11的开发者<em class="mn">将需要确保安装<strong class="lb iu"> WebView2 </strong>运行时。</em></p><p id="d7ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有这些都解决了，剩下唯一要做的就是通过运行<code class="fe mj mk ml mm b">go install github.com/wailsapp/wails/v2/cmd/wails@latest</code>来安装Wails框架。对于那些计划在基于Linux的系统上进行开发的人，请确保运行<code class="fe mj mk ml mm b">wails doctor</code>来检查您是否安装了正确的依赖项。</p><h2 id="72f6" class="mo mp it bd mq mr ms dn mt mu mv dp mw li mx my mz lm na nb nc lq nd ne nf ng bi translated">项目设置</h2><p id="3fad" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">一旦您准备好了，最简单的开始方式就是在您的终端(或者Windows版的PowerShell)中导航到您想要创建项目的目录。根据您计划使用的框架，Wails提供了一些不同的模板，但是对于这个例子，我们将使用React。要创建项目结构，只需运行以下命令，并传递您希望使用的模板:</p><pre class="kj kk kl km gt nm mm nn no aw np bi"><span id="79e5" class="mo mp it mm b gy nq nr l ns nt">wails init -n myproject -t react</span></pre><p id="8f8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在命令运行完毕后，您会发现自己有了一个很好的新的结构化项目！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/54c0c6c429eb55e9813ea7c8fa9204a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ioJw6JFDOu2OG3APCWQI9A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们的新项目结构</p></figure><p id="ad26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你看一下我们的新项目结构，你会注意到Wails创建了一个单独的<code class="fe mj mk ml mm b">frontend</code>目录，我们所有的UI/框架文件都放在那里；这有助于保持整个项目的整洁，并提供所需的前端和后端代码的分离。</p><p id="a69f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有与应用程序相关的版本控制细节都保存在<code class="fe mj mk ml mm b">wails.json</code>文件中，我们的后端功能代码可以在适当命名的<code class="fe mj mk ml mm b">app.go</code>中找到。窗口大小的配置和其他与平台相关的设置都在<code class="fe mj mk ml mm b">main.go</code>中声明，这是我们应用程序的主要入口点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h2 id="2a67" class="mo mp it bd mq mr ms dn mt mu mv dp mw li mx my mz lm na nb nc lq nd ne nf ng bi translated">决定，决定</h2><p id="81f8" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">在这一点上，我们准备好了！像许多框架一样，Wails利用Vite进行持续开发和快速重载。对于许多开发人员来说，这通常有它的好处，但是如果你已经有了一个既定的项目，这在技术上并不是必需的…你是否决定使用它完全取决于你。</p><p id="bdd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想让聚会开始，看看模板应用程序是如何工作的，打开你的终端，导航到你的项目目录的根目录，运行<code class="fe mj mk ml mm b">wails dev</code>。这将捆绑和构建一个非优化的应用程序，并启动它以供您查看运行情况，并在启用热重装的情况下进行代码更改:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/9325a59ac427e913cf82d5cf0769db92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WADE9BnLWcaJNBqudPOsyw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们的基本模板应用</p></figure><p id="3f76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将是一个很好的时机来指出小“问候”输入框和功能。使用Wails的最大特点之一是声明后端函数和从UI调用它们的整体简单性。在<code class="fe mj mk ml mm b">app.go</code>项目文件中可以找到Wails在项目创建过程中提供的标准“问候”功能。这是您声明所有后端函数的地方:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure></div><div class="ab cl ny nz hx oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="im in io ip iq"><p id="feb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以看到上面为<code class="fe mj mk ml mm b">Greet</code>声明的函数定义。这个特殊的函数是特定于<code class="fe mj mk ml mm b">App</code>结构的，但是随着项目复杂性的增加，创建额外的结构也是很好的。如果/当你决定这样做的时候，重要的是要记住，你必须在应用程序创建期间在<code class="fe mj mk ml mm b">main.go</code>文件中创建该结构的一个新实例。如果您碰巧需要额外的指导，Wails文档会对此做进一步的说明。</p><p id="05a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每次构建项目时，Wails都会生成适当的JavaScript和TypeScript翻译，您可以在<code class="fe mj mk ml mm b">wailsjs</code>目录中找到它们。正是这一点神奇，允许up将函数调用直接导入我们的前端代码，而不需要任何额外的第三方库导入。</p><p id="0ca2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这一点上，你的选择是无限的。现在，您已经有了项目结构来扩展您认为合适的新应用程序，并且有了文档来了解Wails提供的更深入的特性。如果您在本文开始时的目标是将web应用程序迁移到桌面上，那么您基本上已经完成了！剩下的就是用你的web应用程序替换默认的<code class="fe mj mk ml mm b">src</code>目录。根据您的其他项目的结构，您可能需要调整应用程序的入口点，并相应地更新您的<code class="fe mj mk ml mm b">package.json</code>文件。</p><h2 id="633b" class="mo mp it bd mq mr ms dn mt mu mv dp mw li mx my mz lm na nb nc lq nd ne nf ng bi translated">还有一件事…</h2><p id="3928" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">如果我没有概述如何为您的新应用程序添加和定制React组件，那么这个演练将是不完整的！</p><p id="76dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了保持简洁明了，我们将创建两个新组件用于我们的应用程序，这两个组件利用了用于Bootstrap UI 的<a class="ae ky" href="https://mdbootstrap.com/" rel="noopener ugc nofollow" target="_blank">材质设计。有太多的UI套件和框架，但是我倾向于在我的许多应用程序中使用MDB或</a><a class="ae ky" href="https://mui.com/" rel="noopener ugc nofollow" target="_blank"> MUI </a>。这样做的好处是为您的桌面应用程序以及您以后可能会开发的其他移动版本提供一个干净一致的外观/感觉！</p><p id="2f4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是我们将添加到<code class="fe mj mk ml mm b">frontend</code>项目文件夹的<code class="fe mj mk ml mm b">src</code>目录中的两个单独的组件文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="ec3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意</strong>:上面有几个导入的图像文件，我必须把它们放在<code class="fe mj mk ml mm b">assets</code>文件夹中才能使用，<em class="mn">它们已经不在那里了！</em></p><p id="65cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在要做的就是更新我们的主<code class="fe mj mk ml mm b">App.jsx</code>文件，以包含我们的新组件，并将它们放在调用我们的<code class="fe mj mk ml mm b">Greet</code>后端函数的输入框上方:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h2 id="4c96" class="mo mp it bd mq mr ms dn mt mu mv dp mw li mx my mz lm na nb nc lq nd ne nf ng bi translated">我们的新应用</h2><p id="a800" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">随着我们的改变到位，我们可以在我们的终端上运行一个新的<code class="fe mj mk ml mm b">wails dev</code>(除非你已经运行了它),看看我们的新应用程序是什么样子的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/af3173784fbe91cfabd206aba12a09b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y6HwTzK34mFJXTvYVnOaWA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们新的桌面应用程序！</p></figure><h1 id="2192" class="og mp it bd mq oh oi oj mt ok ol om mw jz on ka mz kc oo kd nc kf op kg nf oq bi translated">我们走吧！</h1><p id="4c3b" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">你还在等什么？让那些创造性的汁液流动起来，尽情释放吧！一旦您已经准备好进行生产测试，只需在项目的根目录下运行<code class="fe mj mk ml mm b">wails build</code>即可为您当前的平台创建一个优化的二进制文件。因为你有优势，构建另一个平台只需要给<code class="fe mj mk ml mm b">build</code>命令传递一个额外的参数，表明你的目标的拱门和操作系统。</p><p id="20a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与往常一样，请务必查看Wails <a class="ae ky" href="https://wails.io/docs/introduction" rel="noopener ugc nofollow" target="_blank">支持页面</a>上不断增长的文档，以获得关于其他构建参数、平台清单和一般功能的指针！</p><p id="5789" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您对这个演示应用程序的完整结构感兴趣，可以在我的GitHub上查看完整的源代码:</p><div class="or os gp gr ot ou"><a href="https://github.com/dedSyn4ps3/wails-react-demo" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">GitHub-ded syn 4 PS 3/wails-react-demo</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">这是一个演示应用程序，利用Wails CLI工具生成的官方React模板。这是命中注定的…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">github.com</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi ks ou"/></div></div></a></div></div></div>    
</body>
</html>