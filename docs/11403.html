<html>
<head>
<title>Generating Xcodeproj’s with Tuist</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Tuist生成Xcodeproj</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/generating-xcodeprojs-with-tuist-4f11134e9f5a?source=collection_archive---------7-----------------------#2022-03-16">https://betterprogramming.pub/generating-xcodeprojs-with-tuist-4f11134e9f5a?source=collection_archive---------7-----------------------#2022-03-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="2a43" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">iOS开发工具</h2><div class=""/><div class=""><h2 id="6709" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">去掉不可读的xcodeproj文件，向可读的项目配置文件问好</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/e39dd9d17be6862ceba831ad6303880a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*35W9WQm1YWMkTlOA"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">汉娜·莫里斯在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="58f0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您是否曾经创建过对iOS应用程序项目的<code class="fe me mf mg mh b">xcodeproj</code>文件进行更改的拉取请求(PR)/合并请求(MR)？</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/be7ae74f97c72fc2e0e63f44d49b06d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*888ZgNurpCU1MDUTVrAC5w.png"/></div></div></figure><p id="297e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">很可能会有两个以上的iOS开发团队同时对<code class="fe me mf mg mh b">xcodeproj</code>文件进行修改。</p><p id="602d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，两者都可以创建新文件。在这种情况下，当两个人都修改同一个文件时，您可能会创建冲突的更改。此外，xcodeproj文件不可读。查看带有xcodeproj文件中的更改的PRs很难理解。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/858d28ce01b8fb0f135aac6ee8032416.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YUzQwB7RTh41s9K7WCpFZQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">在单独的分支中创建文件后，xcodeproj中的Git冲突</p></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/cb96873cf5a45e3a1b628be935aca923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eD4qG44sZgnbJxYLBF-7ZA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">相互冲突的路线</p></figure><p id="3b56" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们有什么办法可以摆脱<code class="fe me mf mg mh b">xcodeproj</code>的文件吗？不幸的是，对于iOS应用程序开发来说，没有简单的方法可以摆脱这些<code class="fe me mf mg mh b">xcodeproj</code>文件。</p><p id="c2f7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然而，我们可以使用<a class="ae lh" href="https://github.com/tuist/tuist" rel="noopener ugc nofollow" target="_blank"> Tuist </a>从可读性更好的配置文件中轻松生成xcodeproj文件。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mj"><img src="../Images/11688c2502a508dfe90e7067bb43628c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*76XiIiN0cfNZAC3uN2kkHw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">Project.swift示例</p></figure><p id="74f9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>允许你将你的项目配置保存在一个名为<code class="fe me mf mg mh b">Project.swift</code>的Swift文件中。<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>然后根据<code class="fe me mf mg mh b">Project.swift</code>中的Swift代码生成<code class="fe me mf mg mh b">xcodeproj</code>文件。</p><p id="6e39" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这类似于<a class="ae lh" href="https://www.swift.org/package-manager/" rel="noopener ugc nofollow" target="_blank"> Swift包管理器</a>的<code class="fe me mf mg mh b"><a class="ae lh" href="https://developer.apple.com/documentation/swift_packages/package" rel="noopener ugc nofollow" target="_blank">Package.swift</a></code>。</p><p id="02e3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这篇文章中，我将向你展示如何通过一个示例项目来使用<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>。然后我将展示如何使用<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>将<a class="ae lh" href="https://developer.apple.com/documentation/swift_packages" rel="noopener ugc nofollow" target="_blank"> Swift包</a>添加到iOS应用程序目标。接下来，我将向您展示如何使用<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>缓存模块。最后，我将介绍如何更改构建设置。</p><p id="ae8f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="mk">我在这篇文章中使用了Swift 5.6和Xcode 13.3。</em></p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="7d89" class="ms mt it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated">如何将iOS应用程序项目转换为使用Tuist</h1><p id="bf3b" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">在本节中，我们将从安装<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>开始。</p><p id="74da" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然后我们将下载一个已经存在的应用程序。</p><p id="4567" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最后，创建一个<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>项目配置文件，删除现有的xcodeproj文件，并使用<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>生成xcodeproj文件。</p><p id="4cd1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">以下是我们将要采取的步骤:</p><ol class=""><li id="acd8" class="np nq it lk b ll lm lo lp lr nr lv ns lz nt md nu nv nw nx bi translated">安装<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank">按钮</a></li><li id="6928" class="np nq it lk b ll ny lo nz lr oa lv ob lz oc md nu nv nw nx bi translated">下载入门包</li><li id="1317" class="np nq it lk b ll ny lo nz lr oa lv ob lz oc md nu nv nw nx bi translated">将项目转换为使用<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a></li></ol><p id="9471" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们开始吧！</p><h2 id="594a" class="od mt it bd mu oe of dn my og oh dp nc lr oi oj ne lv ok ol ng lz om on ni iz bi translated">1.安装<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank">按钮</a></h2><p id="da37" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">只有安装<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>的方法(写的时候)。打开终端并运行以下命令:</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="e115" class="od mt it mh b gy os ot l ou ov">curl -Ls <a class="ae lh" href="https://install.tuist.io" rel="noopener ugc nofollow" target="_blank">https://install.tuist.io</a> | bash</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ow"><img src="../Images/72ec5d431b1aad0ec24bd7fa57f7990c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wcFmYF_JP-2juBwa5FvE8w.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">推斯特安装</p></figure><h2 id="612a" class="od mt it bd mu oe of dn my og oh dp nc lr oi oj ne lv ok ol ng lz om on ni iz bi translated">2.下载入门包</h2><p id="49a8" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">让我们下载一个已经存在的iOS应用程序项目。打开终端并运行以下命令:</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="7a6c" class="od mt it mh b gy os ot l ou ov">cd $HOME<br/>curl https://github.com/anuragajwani/tuist-tut/archive/starter.zip -o starter.zip -L -s<br/>unzip -q starter.zip<br/>cd tuist-tut-starter<br/>open -a Xcode SaladMaker.xcodeproj</span></pre><p id="1d07" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">运行应用程序以查看它的运行情况。</p><h2 id="dcff" class="od mt it bd mu oe of dn my og oh dp nc lr oi oj ne lv ok ol ng lz om on ni iz bi translated">3.将项目转换为使用<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a></h2><p id="94c5" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">为了生成xcodeproj文件，我们必须在名为<code class="fe me mf mg mh b">Project.swift</code>的文件中声明项目结构、目标和配置。首先让我们看看项目目标及其在当前xcodeproj中的配置:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/dcd726818a867d7a7dcceeec1baaa700.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*17PYX_nCl8YlHCVBMnJr6w.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">Xcode项目结构</p></figure><p id="db8a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">SaladMaker</code>项目由两个目标组成:</p><ol class=""><li id="2dfb" class="np nq it lk b ll lm lo lp lr nr lv ns lz nt md nu nv nw nx bi translated"><code class="fe me mf mg mh b">SaladMaker</code> iOS应用</li><li id="7b1c" class="np nq it lk b ll ny lo nz lr oa lv ob lz oc md nu nv nw nx bi translated"><code class="fe me mf mg mh b">SayHelloKit</code>框架</li></ol><p id="a0f6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">SaladMaker</code>的源代码位于一个名为<code class="fe me mf mg mh b">SaladMaker</code>的目录中。<code class="fe me mf mg mh b">SayHelloKit</code>的源代码位于一个名为<code class="fe me mf mg mh b">SayHelloKit</code>的目录中。这两个目标都支持iOS 14及以上版本。<code class="fe me mf mg mh b">SayHelloKit</code>框架由<code class="fe me mf mg mh b">SaladMaker</code>应用程序使用。</p><p id="fe56" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">接下来让我们创建<code class="fe me mf mg mh b">Project.swift</code>文件。在终端中运行以下命令:</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="8562" class="od mt it mh b gy os ot l ou ov">cat &gt; Project.swift &lt;&lt;-EOF<br/>import ProjectDescription</span><span id="9e77" class="od mt it mh b gy oy ot l ou ov">let project = Project(<br/>    name: "SaladMaker",<br/>    organizationName: "com.anuragajwani",<br/>    targets: [<br/>        Target(<br/>            name: "SaladMaker",<br/>            platform: .iOS,<br/>            product: .app,<br/>            bundleId: "com.anuragajwani.SaladMaker",<br/>            deploymentTarget: .iOS(targetVersion: "14.0", devices: .iphone),<br/>            infoPlist: "SaladMaker/Info.plist",<br/>            sources: ["SaladMaker/**"],<br/>            resources: ["SaladMaker/Assets.xcassets/"],<br/>            dependencies: [.target(name: "SayHelloKit")]<br/>        ),<br/>        Target(<br/>            name: "SayHelloKit",<br/>            platform: .iOS,<br/>            product: .framework,<br/>            bundleId: "com.anuragajwani.SayHelloKit",<br/>            deploymentTarget: .iOS(targetVersion: "14.0", devices: .iphone),<br/>            sources: ["SayHelloKit/**"],<br/>            settings: .settings(base: ["GENERATE_INFOPLIST_FILE": "YES"])<br/>        )<br/>    ]<br/>)<br/>EOF</span></pre><p id="177b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">上面我们已经创建了一个名为<code class="fe me mf mg mh b">SaladMaker</code>的项目，有两个目标；<code class="fe me mf mg mh b">SaladMaker</code> iOS应用和<code class="fe me mf mg mh b">SayHelloKit</code>框架。我们已经详细说明了每一项:</p><ul class=""><li id="eb73" class="np nq it lk b ll lm lo lp lr nr lv ns lz nt md oz nv nw nx bi translated">目标名称</li><li id="eb3c" class="np nq it lk b ll ny lo nz lr oa lv ob lz oc md oz nv nw nx bi translated">捆绑标识符</li><li id="35c8" class="np nq it lk b ll ny lo nz lr oa lv ob lz oc md oz nv nw nx bi translated">它所服务的平台</li><li id="6f08" class="np nq it lk b ll ny lo nz lr oa lv ob lz oc md oz nv nw nx bi translated">产品类型</li><li id="9978" class="np nq it lk b ll ny lo nz lr oa lv ob lz oc md oz nv nw nx bi translated">它的源代码在哪里</li><li id="5f03" class="np nq it lk b ll ny lo nz lr oa lv ob lz oc md oz nv nw nx bi translated">它的资产在哪里(图像、文本文件和其他非代码文件)</li></ul><p id="00cd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">注意，我们还为框架目标声明了一个构建设置。不要担心这一点，我们将在这篇文章的“如何改变构建设置”一节中回到这一点。此外，我们已经声明<code class="fe me mf mg mh b">SaladMaker</code>应用程序依赖于<code class="fe me mf mg mh b">SayHelloKit</code>:</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="9d40" class="od mt it mh b gy os ot l ou ov">dependencies: [.target(name: "SayHelloKit")]</span></pre><p id="b3e6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">接下来，让我们删除<code class="fe me mf mg mh b">SaladMaker.xcodeproj</code>，并告诉Tuist为项目生成xcodeproj文件。运行以下命令:</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="d6c2" class="od mt it mh b gy os ot l ou ov">rm -rf SaladMaker.xcodeproj &amp;&amp; tuist generate</span></pre><p id="e036" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>会自动为你打开Xcode。运行应用程序，它应该像以前一样运行。</p><p id="4aeb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">就这样，我们现在从31行Swift代码中生成了500多行不可读的xcodeproj！</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pa"><img src="../Images/460e890bfe54fe0b1108612e4f17c197.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mPCrs1huUEsiqzj2Jq5igw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">比较Project.swift与Xcodeproj文件</p></figure><h1 id="5b6c" class="ms mt it bd mu mv pb mx my mz pc nb nc ki pd kj ne kl pe km ng ko pf kp ni nj bi translated">使用Tuist时如何添加Swift包</h1><p id="add9" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">大多数应用程序使用开源库来帮助或加速开发。有多种方法可以导入开源库。最流行的方法之一是使用依赖管理器。iOS开发中最流行的依赖项管理器之一是<a class="ae lh" href="https://developer.apple.com/documentation/swift_packages" rel="noopener ugc nofollow" target="_blank"> Swift包管理器</a>。</p><p id="a2fd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这一节中，我将向您展示如何导入iOS开发中使用的一个流行的开源库:<a class="ae lh" href="https://github.com/Alamofire/Alamofire" rel="noopener ugc nofollow" target="_blank"> Alamofire </a>。</p><p id="9d62" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在终端中，在项目的根目录下运行以下命令:</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="e1dd" class="od mt it mh b gy os ot l ou ov">mkdir Tuist &amp;&amp; cd Tuist<br/>cat &gt; Dependencies.swift &lt;&lt;-EOF<br/>import ProjectDescription</span><span id="8b20" class="od mt it mh b gy oy ot l ou ov">let dependencies = Dependencies(<br/>    swiftPackageManager: [<br/>        .remote(url: "<a class="ae lh" href="https://github.com/Alamofire/Alamofire" rel="noopener ugc nofollow" target="_blank">https://github.com/Alamofire/Alamofire</a>", requirement: .upToNextMajor(from: "5.0.0")),<br/>    ],<br/>    platforms: [.iOS]<br/>)<br/>EOF</span></pre><p id="6972" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了让我们在使用<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>的项目中使用第三方外部依赖项，我们必须在项目根目录下名为<code class="fe me mf mg mh b">Tuist</code>的目录下名为<code class="fe me mf mg mh b">Dependencies.swift</code>的文件中声明这些依赖项。</p><p id="bea1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">注意</strong>在<code class="fe me mf mg mh b">Dependencies.swift</code>中声明的依赖关系必须支持<a class="ae lh" href="https://www.swift.org/package-manager/" rel="noopener ugc nofollow" target="_blank"> Swift包管理器</a>。</p><p id="9090" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们现在可以告诉<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>通过在项目的根目录下运行以下命令来获取这些外部依赖项:</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="2855" class="od mt it mh b gy os ot l ou ov">tuist fetch</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pg"><img src="../Images/4e788791457335ad46656b05efc8b934.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0A4WMdPYp9XtPX5e1iKeMA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">获取外部依赖关系</p></figure><p id="3969" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们还没有告诉<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>我们想在<code class="fe me mf mg mh b">SaladMaker</code>应用中使用<a class="ae lh" href="https://github.com/Alamofire/Alamofire" rel="noopener ugc nofollow" target="_blank"> Alamofire </a>。让我们接下来做那件事。打开<code class="fe me mf mg mh b">Project.swift</code>并将<code class="fe me mf mg mh b">SaladMaker</code>的依赖项更改为如下:</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="80be" class="od mt it mh b gy os ot l ou ov">dependencies: [<br/>    .target(name: "SayHelloKit"),<br/>    .external(name: "Alamofire")<br/>]</span></pre><p id="e46b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">接下来让我们告诉Tuist重新生成xcodeproj文件。在终端中运行以下命令:</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="89a1" class="od mt it mh b gy os ot l ou ov">tuist generate</span></pre><p id="da08" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们现在准备在<code class="fe me mf mg mh b">SaladMaker</code>应用程序中使用Alamofire:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ph"><img src="../Images/ee03232901aaa423e3950f1a2e728a44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j83_agQnK2qauemRjRNJWA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">SaladMaker的链接框架和库</p></figure><h1 id="ec8c" class="ms mt it bd mu mv pb mx my mz pc nb nc ki pd kj ne kl pe km ng ko pf kp ni nj bi translated">如何缓存模块</h1><p id="47d0" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">开发iOS应用程序时，Xcode将编译所有源代码，作为构建过程的一部分，包括其第三方依赖项。例如在<code class="fe me mf mg mh b">SaladMaker</code>应用中，我们开始使用<a class="ae lh" href="https://github.com/Alamofire/Alamofire" rel="noopener ugc nofollow" target="_blank"> Alamofire </a>。我们不太可能需要修改<a class="ae lh" href="https://github.com/Alamofire/Alamofire" rel="noopener ugc nofollow" target="_blank"> Alamofire </a>代码。然而Xcode会在开发过程中一遍又一遍地构建Alamofire。</p><p id="9ab7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">此外，我们可能会开发某些不需要我们的<code class="fe me mf mg mh b">SayHelloKit</code>模块的功能。同样，Xcode会一遍又一遍地构建它很多次。</p><p id="a195" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果我们可以构建一次，然后在开发过程中重用构建或编译后的表单，会怎么样？换句话说:我们能缓存模块吗？</p><p id="3c6d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在本节中，我们将了解:</p><ol class=""><li id="7388" class="np nq it lk b ll lm lo lp lr nr lv ns lz nt md nu nv nw nx bi translated">如何缓存外部第三方依赖关系</li><li id="f026" class="np nq it lk b ll ny lo nz lr oa lv ob lz oc md nu nv nw nx bi translated">如何缓存项目模块</li></ol><h2 id="db5f" class="od mt it bd mu oe of dn my og oh dp nc lr oi oj ne lv ok ol ng lz om on ni iz bi translated">1.如何缓存外部第三方依赖关系</h2><p id="8914" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">我们可以缓存<a class="ae lh" href="https://github.com/Alamofire/Alamofire" rel="noopener ugc nofollow" target="_blank"> Alamofire </a>和其他第三方依赖项(在<code class="fe me mf mg mh b">Dependencies.swift</code>中声明),并在开发过程中的应用构建过程中使用它们的编译形式。为此，请运行以下命令:</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="71f1" class="od mt it mh b gy os ot l ou ov">tuist cache warm --dependencies-only</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pg"><img src="../Images/4ce7f9f2a0c7b3e809226d355ea8b22c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DADwbcgqQm5Pa-ZABG0IIw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">缓存外部依赖项</p></figure><p id="1b0a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>将构建并缓存<a class="ae lh" href="https://github.com/Alamofire/Alamofire" rel="noopener ugc nofollow" target="_blank"> Alamofire </a>。接下来，我们需要告诉Tuist重新生成项目，它会自动使用缓存的<a class="ae lh" href="https://github.com/Alamofire/Alamofire" rel="noopener ugc nofollow" target="_blank"> Alamofire </a>。运行以下命令:</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="248d" class="od mt it mh b gy os ot l ou ov">tuist generate</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/dff326a01b2027f0b4df2ddd672765f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*ZVwZG0Qph5IUxnXbwge7iQ.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">使用缓存的外部依赖项</p></figure><h2 id="add8" class="od mt it bd mu oe of dn my og oh dp nc lr oi oj ne lv ok ol ng lz om on ni iz bi translated">2.如何缓存项目模块</h2><p id="da16" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">我们也可以缓存自己的模块。如果我们知道我们不会对某些模块进行任何更改，那么缓存这些模块也是值得的。这有助于加速我们正在构建的特性的开发过程。要缓存<code class="fe me mf mg mh b">SayHelloKit</code>,运行以下命令:</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="1944" class="od mt it mh b gy os ot l ou ov">tuist cache warm SayHelloKit</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pg"><img src="../Images/5898bbd095b3272b09a1c22484eb2404.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jFmxcJnjkvNqxOCsgujd_w.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">缓存SayHelloKit</p></figure><p id="98e5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果我们只想完成<code class="fe me mf mg mh b">SaladMaker</code>目标，那么我们必须告诉Tuist我们只想开发该目标:</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="8da6" class="od mt it mh b gy os ot l ou ov">tuist generate SaladMaker</span></pre><p id="79d7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然后，Tuist将用这些依赖项的缓存版本替换其依赖项。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/bc56ee24892645515079d61687c5a789.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*TXmpVEo-GBWtB_31YNKBMg.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">使用缓存的SayHelloKit</p></figure><h1 id="12a8" class="ms mt it bd mu mv pb mx my mz pc nb nc ki pd kj ne kl pe km ng ko pf kp ni nj bi translated">如何更改生成设置</h1><p id="b87e" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">默认情况下，<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>会设置xcodeproj默认构建设置，或者根本不指定，并允许Xcode设置默认值。</p><p id="60d0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然而，在某些情况下，我们可能希望根据我们的应用程序特定的需求来调整构建设置。Tuist允许我们指定您想要为目标设置的任何构建设置。假设我们想禁用我们的<code class="fe me mf mg mh b">SaladMaker</code>应用程序的位代码。打开<code class="fe me mf mg mh b">Project.swift</code>，在<code class="fe me mf mg mh b">SaladMaker</code> app目标声明的末尾添加以下一行:</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="6fc3" class="od mt it mh b gy os ot l ou ov">    ...<br/>    dependencies: [<br/>        .target(name: "SayHelloKit"),<br/>        .external(name: "Alamofire")<br/>    ]<strong class="mh jd">,</strong><br/>    <strong class="mh jd">settings: .settings(base: ["ENABLE_BITCODE": "NO"])</strong><br/>)</span></pre><p id="ed4f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们再次告诉Tuist重新生成xcodeproj文件:</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="3dc7" class="od mt it mh b gy os ot l ou ov">tuist generate</span></pre><p id="1970" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">查看行动中的变化:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/ecdf60675929f20eede9fbb060a72b1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fy6bJ9hx3dB_t1d2lsx5cA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">SaladMaker上禁用的位代码</p></figure></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="1bf2" class="ms mt it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated">摘要</h1><p id="cc79" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">在这篇文章中，我们了解到:</p><ul class=""><li id="c5d1" class="np nq it lk b ll lm lo lp lr nr lv ns lz nt md oz nv nw nx bi translated">如何使用<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>生成Xcodeprojs</li><li id="1133" class="np nq it lk b ll ny lo nz lr oa lv ob lz oc md oz nv nw nx bi translated">使用<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>如何消费Swift套餐</li><li id="c5a9" class="np nq it lk b ll ny lo nz lr oa lv ob lz oc md oz nv nw nx bi translated">使用<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>时如何更改构建设置</li><li id="a449" class="np nq it lk b ll ny lo nz lr oa lv ob lz oc md oz nv nw nx bi translated">使用<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>时如何添加构建阶段</li><li id="aa08" class="np nq it lk b ll ny lo nz lr oa lv ob lz oc md oz nv nw nx bi translated">如何使用<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>缓存模块</li></ul><p id="1c67" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>可以进行很多配置。确保<a class="ae lh" href="https://docs.tuist.io/tutorial/get-started" rel="noopener ugc nofollow" target="_blank">检查规格和文件</a>。</p><h1 id="388b" class="ms mt it bd mu mv pb mx my mz pc nb nc ki pd kj ne kl pe km ng ko pf kp ni nj bi translated">最后的想法</h1><p id="017a" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">你可以在<a class="ae lh" href="https://github.com/anuragajwani/tuist-tut" rel="noopener ugc nofollow" target="_blank">我的Github repo tuist-tuit</a>中找到这篇文章的源代码:</p><div class="pj pk gp gr pl pm"><a href="https://github.com/anuragajwani/tuist-tut" rel="noopener  ugc nofollow" target="_blank"><div class="pn ab fo"><div class="po ab pp cl cj pq"><h2 class="bd jd gy z fp pr fr fs ps fu fw jc bi translated">GitHub - anuragajwani/tuist-tut</h2><div class="pt l"><h3 class="bd b gy z fp pr fr fs ps fu fw dk translated">这个项目演示了如何使用DispatchQueue并发执行任务。该项目是伴随我的博客…</h3></div><div class="pu l"><p class="bd b dl z fp pr fr fs ps fu fw dk translated">github.com</p></div></div><div class="pv l"><div class="pw l px py pz pv qa lb pm"/></div></div></a></div><p id="9648" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">几周前我报道了<a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/generating-xcodeprojs-with-xcodegen-7d291cfc2f46">如何使用Xcodegen </a>生成Xcodeproj。<a class="ae lh" href="https://github.com/yonaskolb/XcodeGen" rel="noopener ugc nofollow" target="_blank"> Xcodegen </a>以YML格式声明项目。<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>在Swift中声明项目。两者都可以利用<a class="ae lh" href="https://www.swift.org/package-manager/" rel="noopener ugc nofollow" target="_blank"> Swift软件包</a>。然而，<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>不会以传统方式将<a class="ae lh" href="https://www.swift.org/package-manager/" rel="noopener ugc nofollow" target="_blank"> Swift包</a>添加到项目中，然后由Xcode管理。<a class="ae lh" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> Tuist </a>构建依赖图，这样它就可以在上面添加功能，比如模块缓存。</p><p id="99c1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你只想生成Xcodeproj文件，那么这取决于你的格式偏好(YML vs Swift)。就我个人而言，我更喜欢Xcodegen的T0，因为在我看来，它比Tuist的T1更具可读性。然而，图伊斯特还能提供更多。</p><pre class="ks kt ku kv gt oo mh op oq aw or bi"><span id="6984" class="od mt it mh b gy os ot l ou ov"><strong class="mh jd">Want to Connect?</strong></span><span id="a682" class="od mt it mh b gy oy ot l ou ov">For more on iOS development follow me on <a class="ae lh" href="https://twitter.com/anuragajwani?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank">Twitter</a> or <a class="ae lh" href="https://anuragajwani.medium.com/introduction-to-concurrency-in-ios-using-grand-central-dispatch-gcd-8280b57a91ec?source=post_page---------------------------" rel="noopener">Medium</a>.</span></pre></div></div>    
</body>
</html>