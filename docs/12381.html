<html>
<head>
<title>How to Make a Jetpack Compose Desktop App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何让Jetpack编写桌面应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/tutorial-jetpack-compose-how-to-create-a-desktop-app-6e6e9392ac90?source=collection_archive---------10-----------------------#2022-06-01">https://betterprogramming.pub/tutorial-jetpack-compose-how-to-create-a-desktop-app-6e6e9392ac90?source=collection_archive---------10-----------------------#2022-06-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="3a86" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">Jetpack撰写</h2><div class=""/><div class=""><h2 id="6ba7" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">实践教程</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/b08f3e5f48c7067dc40963a97674f904.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*an-uZN62pEGaqjsw"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">由<a class="ae le" href="https://unsplash.com/@claybanks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">粘土堤</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="1617" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在本教程中，您将学习在Kotlin中使用Jetpack Compose for Desktop创建桌面HelloWorld应用程序的最低要求。</p><ul class=""><li id="7f91" class="mb mc iq lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated"><strong class="lh ja">级别:</strong>适合初学者在为桌面排版</li><li id="0c58" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated"><strong class="lh ja">需求:</strong> Java安装</li><li id="75a4" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated"><strong class="lh ja">最终样品:</strong> <a class="ae le" href="https://github.com/Mercandj/jetpack-compose-desktop-hello-world" rel="noopener ugc nofollow" target="_blank"> github </a>。</li><li id="e0ba" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated"><strong class="lh ja">最终界面</strong>:</li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/4f890f7448e5cdd8aa632e26c8e06cfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*yPndxNqAhBvmZqtAchJaRQ.png"/></div></figure></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h1 id="2b5b" class="mx my iq bd mz na nb nc nd ne nf ng nh kf ni kg nj ki nk kj nl kl nm km nn no bi translated">1.设置项目</h1><p id="1c16" class="pw-post-body-paragraph lf lg iq lh b li np ka lk ll nq kd ln lo nr lq lr ls ns lu lv lw nt ly lz ma ij bi translated">首先，为了建立这个项目，你需要一个Gradle项目框架，它有一个根<code class="fe nu nv nw nx b">build.gradle</code>、<code class="fe nu nv nw nx b">settings.gradle</code>和<code class="fe nu nv nw nx b">app/build.gradle</code>。<br/>让我们使用<code class="fe nu nv nw nx b">kts</code>文件只使用一种语言:科特林❤️</p><p id="9782" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe nu nv nw nx b"><strong class="lh ja">build.gradle.kts</strong> <br/></code>用下面的代码在项目的根位置创建<code class="fe nu nv nw nx b">build.gradle.kts</code>，用compose maven定义<code class="fe nu nv nw nx b">gradle</code>项目。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="668f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe nu nv nw nx b"><strong class="lh ja">settings.gradle.kts </strong><br/></code>在项目根添加<code class="fe nu nv nw nx b">settings.gradle.kts</code>来定义项目和<code class="fe nu nv nw nx b">gradle</code>模块<code class="fe nu nv nw nx b">app</code>的名称。</p><pre class="kp kq kr ks gt oa nx ob oc aw od bi"><span id="4fae" class="oe my iq nx b gy of og l oh oi"><em class="oj">rootProject</em>.<em class="oj">buildFileName </em>= "build.gradle.kts"<br/><em class="oj">rootProject</em>.<em class="oj">name </em>= "medium-proto"<br/>include(":app")</span></pre><p id="ff1e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe nu nv nw nx b"><strong class="lh ja">app/build.gradle.kts</strong></code> <strong class="lh ja"> </strong> <br/>添加到<code class="fe nu nv nw nx b">app/build.gradle.kts</code>的插件进行撰写:</p><pre class="kp kq kr ks gt oa nx ob oc aw od bi"><span id="a1e3" class="oe my iq nx b gy of og l oh oi">plugins <strong class="nx ja">{<br/>    </strong><em class="oj">kotlin</em>("jvm")<br/><em class="oj">    // </em><a class="ae le" href="https://github.com/JetBrains/compose-jb/releases" rel="noopener ugc nofollow" target="_blank"><em class="oj">https://github.com/JetBrains/compose-jb/releases</em></a><br/>    id("org.jetbrains.compose") <em class="oj">version </em>"1.2.0-alpha01-dev686"<br/><strong class="nx ja">}</strong></span></pre><p id="aa5e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">然后添加依赖项:</p><pre class="kp kq kr ks gt oa nx ob oc aw od bi"><span id="fd94" class="oe my iq nx b gy of og l oh oi">dependencies <strong class="nx ja">{<br/>    </strong><em class="oj">implementation</em>(<em class="oj">compose</em>.desktop.currentOs)<br/><strong class="nx ja">}</strong></span></pre><p id="4f03" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">最后，定义应用程序入口点:</p><pre class="kp kq kr ks gt oa nx ob oc aw od bi"><span id="bf9b" class="oe my iq nx b gy of og l oh oi"><em class="oj">compose</em>.<em class="oj">desktop</em>.application.mainClass = "com.medium.MainKt"</span></pre><h2 id="0a3e" class="oe my iq bd mz ok ol dn nd om on dp nh lo oo op nj ls oq or nl lw os ot nn iw bi translated"><strong class="ak">最后的润色</strong></h2><p id="854d" class="pw-post-body-paragraph lf lg iq lh b li np ka lk ll nq kd ln lo nr lq lr ls ns lu lv lw nt ly lz ma ij bi translated">然后，为了编译应用程序，在项目的根目录下添加一个<code class="fe nu nv nw nx b">gradlew</code>文件和<code class="fe nu nv nw nx b">gradle</code>文件夹。<a class="ae le" href="https://docs.gradle.org/current/userguide/gradle_wrapper.html#sec:adding_wrapper" rel="noopener ugc nofollow" target="_blank">下面是</a>获取文件的方法。在MacOS上，您可以在您的根项目上使用这个命令:<code class="fe nu nv nw nx b">brew install gradle &amp;&amp; gradle wrapper</code>。</p></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h1 id="f7f0" class="mx my iq bd mz na nb nc nd ne nf ng nh kf ni kg nj ki nk kj nl kl nm km nn no bi translated">2.创建主视图</h1><p id="4cf6" class="pw-post-body-paragraph lf lg iq lh b li np ka lk ll nq kd ln lo nr lq lr ls ns lu lv lw nt ly lz ma ij bi translated">创建一个kotlin文件<code class="fe nu nv nw nx b">app/src/main/kotlin/com/medium/Main.kt</code>,包含</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="747e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">该文件包含应用程序定义，其窗口包含</p><ul class=""><li id="5c02" class="mb mc iq lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated"><code class="fe nu nv nw nx b">onCloseRequest</code>:点击窗口关闭按钮时关闭应用的行为</li><li id="60f0" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated"><code class="fe nu nv nw nx b">state</code>:以dp为单位的窗口大小，公制度量。</li><li id="2ce7" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated"><code class="fe nu nv nw nx b">title</code>:窗口顶栏的标题。</li></ul><p id="6acc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在Window方法的lambda中，你可以编写类似Android应用程序的JetPack Compose代码。此处添加了最大宽度和最大高度中的<code class="fe nu nv nw nx b">Box</code>,以使文本在窗口中居中。<code class="fe nu nv nw nx b">Box</code>是一个允许<code class="fe nu nv nw nx b">Text</code>进行<code class="fe nu nv nw nx b">Center</code>对齐的容器。</p></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h1 id="4796" class="mx my iq bd mz na nb nc nd ne nf ng nh kf ni kg nj ki nk kj nl kl nm km nn no bi translated">3.构建并启动应用程序</h1><p id="8b5c" class="pw-post-body-paragraph lf lg iq lh b li np ka lk ll nq kd ln lo nr lq lr ls ns lu lv lw nt ly lz ma ij bi translated">通过命令<code class="fe nu nv nw nx b">chmod 755 ./gradlew<br/></code>获得运行脚本的许可，然后运行<code class="fe nu nv nw nx b">./gradlew run</code>和tada:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/4f890f7448e5cdd8aa632e26c8e06cfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*yPndxNqAhBvmZqtAchJaRQ.png"/></div></figure><p id="0a2e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">感谢JetBrains团队和JetPack Compose以及<a class="ae le" href="https://github.com/JetBrains/compose-jb" rel="noopener ugc nofollow" target="_blank"> JetPack Compose Desktop </a>的贡献者。</p><h2 id="ea41" class="oe my iq bd mz ok ol dn nd om on dp nh lo oo op nj ls oq or nl lw os ot nn iw bi translated"><strong class="ak">更进一步</strong></h2><ul class=""><li id="22c9" class="mb mc iq lh b li np ll nq lo ou ls ov lw ow ma mg mh mi mj bi translated">如何创建MacOS安装文件pkg以避免使用jar:使用<a class="ae le" href="https://docs.oracle.com/en/java/javase/14/docs/specs/man/jpackage.html" rel="noopener ugc nofollow" target="_blank"> jpackage </a></li><li id="2adb" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">如何在本项目中添加一个app图标:cf samples <a class="ae le" href="https://github.com/JetBrains/compose-jb" rel="noopener ugc nofollow" target="_blank"/></li><li id="b314" class="mb mc iq lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">如何发布一个本地应用来避免jvm: cf <a class="ae le" href="https://github.com/JetBrains/compose-jb/blob/master/tutorials/Native_distributions_and_local_execution/README.md" rel="noopener ugc nofollow" target="_blank">这个相同的存储库</a> y</li></ul></div></div>    
</body>
</html>