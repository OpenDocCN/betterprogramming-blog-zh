<html>
<head>
<title>9 Things to Know to Master List Comprehensions in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">掌握Python中列表理解的9件事</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/9-things-to-know-to-master-list-comprehensions-in-python-8bc0411ec2ed?source=collection_archive---------0-----------------------#2020-03-03">https://betterprogramming.pub/9-things-to-know-to-master-list-comprehensions-in-python-8bc0411ec2ed?source=collection_archive---------0-----------------------#2020-03-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7ed4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">本教程将帮助你学习Python中列表理解的最常见用法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/274bdf5a3ef7ea38a155b7abcd703c8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d9aInL9DRQiMw25ojALlkQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@synkevych?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">罗曼·辛克维奇</a>在<a class="ae ky" href="https://unsplash.com/s/photos/list?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="1f97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">越来越多的人开始学习Python，因为它已经成为几乎所有领域最受欢迎的编程语言之一，比如web开发、科学计算，当然还有人工智能。</p><p id="8e25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论你在哪里使用Python，你都不可避免地要学习Python的数据结构、变量和函数声明、条件语句、控制流和其他基本概念。</p><p id="c627" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让许多初学者感到困惑的一个重要的“Pythonic”特性是<em class="lv">列表理解</em> <strong class="lb iu"> </strong> — <strong class="lb iu"> </strong>一种创建列表的简洁方式。</p><p id="ce26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以前听说过，但不知道是什么？</p><p id="59a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很好，这篇文章将为您在Python学习冒险中掌握list comprehensions提供一个良好的开端。</p><p id="2446" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了便于组织，我列出了我们应该知道的关于列表理解的九件事，包括它的语法和各种用例。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b3be" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">1.基本语法</h1><p id="fa37" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">最基本的列表理解具有以下语法。</p><p id="c62e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如前所述，它是做某些事情的简洁方式，比如创建列表。扩展形式通常表示为一个<code class="fe na nb nc nd b">for</code>循环，其中<code class="fe na nb nc nd b">iterable</code>的每一项都运行表达式中指定的某些操作。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="3a11" class="ni me it nd b gy nj nk l nl nm"># list comprehension<br/>[expression for item in iterable]</span><span id="9fe5" class="ni me it nd b gy nn nk l nl nm"># expanded form<br/>for item in iterable:<br/>    expression</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="8263" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">2.创建列表</h1><p id="6ea7" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">毫不奇怪，最流行的用法是简洁地创建一个列表。</p><p id="f9d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们不知道列表的理解，那么在创建列表时，我们可能会做如下的事情。为此，首先，我们将声明一个空列表。第二，在<code class="fe na nb nc nd b">for</code>循环中，我们将每个条目添加到列表中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="4d41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如在基本语法一节中提到的，我们可以将<code class="fe na nb nc nd b">for</code>循环语句“压缩”成一行——使用list comprehension，只需一行代码，我们就可以通过迭代原始列表方便地创建一个列表。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="de95" class="ni me it nd b gy nj nk l nl nm">&gt;&gt;&gt; pets = ('bird', 'snake', 'dog', 'turtle', 'cat', 'hamster')<br/>&gt;&gt;&gt; uppercased_pets = [pet.upper() for pet in pets]<br/>&gt;&gt;&gt; uppercased_pets<br/>['BIRD', 'SNAKE', 'DOG', 'TURTLE', 'CAT', 'HAMSTER']</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="300f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">3.用于过滤的条件语句</h1><p id="8b90" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">有时，当我们使用列表理解来创建一个列表时，我们不想包含现有列表中的所有项目。</p><p id="b3b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，我们需要一个条件语句来过滤掉现有列表中不符合特定标准的项目。相应的列表理解具有以下语法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="264c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个这种用法的例子。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="1b02" class="ni me it nd b gy nj nk l nl nm">&gt;&gt;&gt; primes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29]<br/>&gt;&gt;&gt; squared_primes = [x*x for x in primes if x%10 == 3]<br/>&gt;&gt;&gt; squared_primes<br/>[9, 169, 529]</span></pre><p id="a210" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们有一个更复杂的条件评估，我们甚至可以使用一个函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1152" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">4.有条件赋值</h1><p id="bb18" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">有时，我们不想从原始列表中筛选出项目。</p><p id="0329" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，我们希望评估条件，以确定使用哪个表达式。下面给出了语法及其用法。下面也解释了语法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="7fd2" class="ni me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">5.替换地图()</h2><p id="d949" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在某些情况下，你可能见过人们使用<code class="fe na nb nc nd b">map()</code>来创建列表。具体来说，<code class="fe na nb nc nd b">map()</code>函数具有以下语法及其基本用法示例。</p><p id="73c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要注意的一点是，<code class="fe na nb nc nd b">map()</code>函数返回一个<code class="fe na nb nc nd b">iterable</code>对象，因此我们可以使用<code class="fe na nb nc nd b">list()</code>函数从这个<code class="fe na nb nc nd b">iterable</code>生成一个列表。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="5c5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如前所示，我们可以用列表理解替换<code class="fe na nb nc nd b">map()</code>函数。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="1bc0" class="ni me it nd b gy nj nk l nl nm">&gt;&gt;&gt; pets = ('bird', 'snake', 'dog', 'turtle', 'cat', 'hamster')<br/>&gt;&gt;&gt; uppercased_pets = [pet.upper() for pet in pets]<br/>&gt;&gt;&gt; uppercased_pets<br/>['BIRD', 'SNAKE', 'DOG', 'TURTLE', 'CAT', 'HAMSTER']</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="eeb5" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">6.嵌套列表理解</h1><p id="2618" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">假设我们在下面的代码片段中有一个<code class="fe na nb nc nd b">tuple</code>，我们想要创建一个新的项目列表，这些项目是<code class="fe na nb nc nd b">tuple</code>中所有数字的平方。</p><p id="9929" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，我们可以使用嵌套列表理解，其语法也如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="7a4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管从技术上来说，嵌套列表理解可以有多个层次，但是为了可读性，不建议超过两个层次。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1027" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">7.使用Walrus运算符</h1><p id="568b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Python 3.8中的一个新特性是引入了walrus运算符(<code class="fe na nb nc nd b">:=</code>)，该运算符用于赋值表达式。</p><p id="7719" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们想从一个字母列表中抽取10次，我们正在创建的列表将只包括这些图中的元音。下面是我们如何在列表理解中使用walrus操作符来实现它。</p><p id="81ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">具体来说，在下面的例子中，我们评估从字母中随机抽取的一个字母是否是元音，如果是，它将被分配给list comprehension表达式可以访问的字母。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="f362" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">8.集合理解</h1><p id="426a" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">虽然list comprehension是很多人都知道的，但是我们在创建集合的时候也可以使用comprehension。基本语法及其用法如下所示。</p><p id="75f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个主要的区别是我们用花括号代替方括号。当然，根据设计，一个集合中的元素不会有重复，这与允许重复的列表相反。</p><p id="57b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，我们也可以在集合理解中使用条件语句。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="5af8" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">9.词典理解</h1><p id="3ea7" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们有列表和集合理解，你不会惊讶Python也有字典理解。下面的代码片段显示了基本语法及其用法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="8cf5" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结论</h1><p id="aced" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">本文回顾了列表理解的基本语法及其在各种场景中的使用。</p><p id="dc2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了列表理解，我们还讨论了集合和字典理解。这些理解允许我们用Python非常方便地创建这些基本的集合数据类型，可读性更好。</p></div></div>    
</body>
</html>