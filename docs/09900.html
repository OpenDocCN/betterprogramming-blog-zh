<html>
<head>
<title>Create Complex Background Blurs in iOS With SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SwiftUI在iOS中创建复杂的背景模糊</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-complex-background-blurs-in-ios-with-swiftui-5b35ce2ddbab?source=collection_archive---------7-----------------------#2021-10-27">https://betterprogramming.pub/create-complex-background-blurs-in-ios-with-swiftui-5b35ce2ddbab?source=collection_archive---------7-----------------------#2021-10-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="65e3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们在Swift中使用泛型的力量</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1468f5ea8e8bc7416f0a9d2d4871c07c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l5TCmlaUiFe9a1zfKSSkyA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@lightliu" rel="noopener ugc nofollow" target="_blank">光柱刘</a><a class="ae kv" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank">上【unsplash.com】下</a></p></figure><p id="5cc3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然这个系列的第一部分是关于在背景图像上创建一个非常简单的模糊效果，但这一次我们将专注于通过模糊化一个完整的视图来创建一个更复杂的版本。</p><blockquote class="ls lt lu"><p id="856b" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">这篇文章是基于第一部分，所以如果你还没有读过，我建议你先读一读，然后再继续。</p></blockquote></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="21f0" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">目标</h1><p id="d5ea" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">我们的目标是从上一部分中提取我们的视图，并用另一个模糊第一个视图的视图覆盖它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/2138415491708c471583f08b22eeb221.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/1*sRdvwCnMzgFH2D417E-nkw.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">产生的模糊效果</p></figure><p id="c20c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了简单起见，我们想要重叠的视图非常稀疏，只有一些文本和一个按钮，但是同样的原则适用于任何复杂的视图。</p><h1 id="6f55" class="mg mh iq bd mi mj ne ml mm mn nf mp mq jw ng jx ms jz nh ka mu kc ni kd mw mx bi translated">视图修改器</h1><p id="4608" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">上次我们使用了一个简单的视图修改器来完成任务，这次不会有太大的不同，只是我们需要创建一个稍微复杂一点的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="73fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">新的修改器看起来与我们之前的几乎相似，但是有一个有趣的区别:</p><blockquote class="nl"><p id="b368" class="nm nn iq bd no np nq nr ns nt nu lr dk translated">通用的</p></blockquote><p id="dcb2" class="pw-post-body-paragraph kw kx iq ky b kz nv jr lb lc nw ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">你可能已经注意到，我们的修饰符现在接受了类型<code class="fe oa ob oc od b">View</code> <em class="lv"> : </em>的泛型类型<code class="fe oa ob oc od b">OverlayContent</code></p><pre class="kg kh ki kj gt oe od of og aw oh bi"><span id="f98c" class="oi mh iq od b gy oj ok l ol om">struct BlurModifier&lt;OverlayContent: View&gt;: ViewModifier</span></pre><p id="34e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">什么是通用？让我们来看看Swift文档是如何表述的:</p><blockquote class="ls lt lu"><p id="4c60" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">泛型代码使您能够编写灵活的、可重用的函数和类型，这些函数和类型可以根据您定义的要求与任何类型一起工作。您可以编写避免重复的代码，并以清晰、抽象的方式表达其意图。</p></blockquote><p id="505d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个类属基本上是我们想要显示的覆盖模糊效果的内容。在第5行中，我们有显示内容本身的闭包的定义:</p><p id="b550" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe oa ob oc od b">let content: () -&gt; OverlayContent</code></p><p id="9646" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在第15–17行中，我们使用变量和适当的修饰符来显示它:</p><pre class="kg kh ki kj gt oe od of og aw oh bi"><span id="d5e1" class="oi mh iq od b gy oj ok l ol om">self.content()                <br/>  .opacity(showOverlay ? 1 : 0)<br/>  .animation(.easeIn(duration: 0.4))</span></pre><p id="1761" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个通用是必需的，这样我们就可以在模糊效果中包含任何我们想要的内容。如果这里没有泛型，我们将不得不静态定义内容，这样它将被硬编码并且总是相同的。</p><blockquote class="ls lt lu"><p id="8557" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">ℹ️关于仿制药的更多信息可以在Swift官方文档<a class="ae kv" href="https://docs.swift.org/swift-book/LanguageGuide/Generics.html" rel="noopener ugc nofollow" target="_blank">中找到</a></p></blockquote><p id="d872" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第8–12行是视图内容本身，我们希望将其模糊化并用自定义内容覆盖。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="ce5e" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">完整的代码</h1><p id="7807" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">如果您已经阅读了第一部分，下面的代码应该很简单。这基本上是我们的旧观点和上面的新修正的结合:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="374f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第55–73行是我们上面的修饰符的实现。在闭包内部(第56–72行),我们定义了想要在模糊的内容上显示的内容。</p><p id="b315" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">轻按按钮会触发模糊效果，轻按内容会禁用模糊效果。</p><p id="dd80" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">仅此而已！你现在可以在你的视图上应用同样的原理和修改器来模糊它们。</p></div></div>    
</body>
</html>