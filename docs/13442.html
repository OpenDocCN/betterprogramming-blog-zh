<html>
<head>
<title>Build a Tic-Tac-Toe Game in Blazor Using C# and JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用C#和JavaScript在Blazor中构建一个井字游戏</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/tic-tac-toe-game-in-blazor-83a5763b5fac?source=collection_archive---------1-----------------------#2022-08-27">https://betterprogramming.pub/tic-tac-toe-game-in-blazor-83a5763b5fac?source=collection_archive---------1-----------------------#2022-08-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2e2d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">设计一个简单的游戏，展示你的网络开发技能</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c0edb1d3bad643ac6d6a53125fedc593.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UR13RCbb6DbeRne26mgLvQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">里卡姆·帕尔卡的井字游戏</p></figure><h1 id="77d1" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">演示</h1><p id="b32b" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">这是我们将在本文中构建的游戏的演示。如果你希望通过添加新的样式/验证来为这个项目做贡献，你可以去我的<a class="ae mj" href="https://github.com/RikamPalkar/Blazing-Blazor/tree/main/Projects/BlazingTicTacToe" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mk"><img src="../Images/8eb1140f4ef36e6790ddc6accbd8d6c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ZmHXqqn4K9P44XmCQR-GzQ.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">演示</p></figure><p id="eca3" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">有两种方法可以实现这一点:我们可以完全使用CSS，或者我们可以用C#编写逻辑。嗯，我更喜欢C#。我想演示JavaScript如何与Blazor集成。</p><p id="e0d7" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">在进入正题之前，我们先给这款应用起几个很酷的名字。“燃烧的井字游戏”怎么样？</p><h1 id="dc55" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">做井字游戏我们需要什么？</h1><p id="77ba" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">让我给你一个50000英尺的概述。我们需要一个razor组件，CSS，C#代码，以及一个JavaScript文件来处理JavaScript之类的东西。仅此而已。</p><p id="1e1a" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">注意:JavaScript文件进入<code class="fe mq mr ms mt b">wwwroot</code>文件夹。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/da222914a59f8fcb7306e4234aa97e0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/format:webp/1*kORViGp8iMIT01AmteRblA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图1:燃烧的井字游戏的文件结构</p></figure><p id="992f" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">第一步:打开visual studio，选择Blazor WebAssembly App，如下图:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/0057bf8bda9912dcaffb69f4f22a43e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dCdcsjcQ6L5bKzblUPSCeQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图2:创建“Blazor WebAssembly应用程序”</p></figure><h1 id="3137" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">Index .剃刀</h1><p id="3c86" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">首先，让我们将所有代码放在一个单独的文件中，也就是放到<code class="fe mq mr ms mt b">Index.razor.cs</code>中。这里有一个简单的技巧来实现这一点。</p><ul class=""><li id="c27e" class="mw mx iq lp b lq ml lt mm lw my ma mz me na mi nb nc nd ne bi translated">您会发现文件中有一个部分写着<code class="fe mq mr ms mt b">@code {</code>，单击灯泡图标或简单地单击(<code class="fe mq mr ms mt b">Ctrl + ‘.’</code>，然后选择“提取代码块以隐藏代码”，参见图3。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/eed477afa8926d2edb4a4b31ad2c4083.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xtkiSlUZ3acDB-p5KTSFLA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图3:提取要隐藏的代码块</p></figure><p id="5dfe" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">现在<code class="fe mq mr ms mt b">Index.razor</code>只会有一个UI组件，所有的游戏逻辑都写在代码隐藏文件<code class="fe mq mr ms mt b"> Index.razor.cs</code>里。</p><ul class=""><li id="79fe" class="mw mx iq lp b lq ml lt mm lw my ma mz me na mi nb nc nd ne bi translated">在第2行，我们注入了<code class="fe mq mr ms mt b">IJSRuntime</code>，稍后我们将在逻辑中使用它来调用JavaScript方法。</li><li id="c835" class="mw mx iq lp b lq ng lt nh lw ni ma nj me nk mi nb nc nd ne bi translated">我们需要在屏幕上添加九个方框。我们可以简单地用for循环来实现。通过九次创建一个div循环。</li><li id="9fad" class="mw mx iq lp b lq ng lt nh lw ni ma nj me nk mi nb nc nd ne bi translated">注意:在第7行，我们循环遍历名为“board”的数组该板是一个字符串数组，将保存“X”或“o”。一旦我们进入实际代码，这一点就很清楚了。</li><li id="e52c" class="mw mx iq lp b lq ng lt nh lw ni ma nj me nk mi nb nc nd ne bi translated">第11行有一个<code class="fe mq mr ms mt b">OnClick</code>事件，它告诉我们哪个框被选中了。我们需要这个指数来跟踪获胜的组合。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nn">代码片段1: Index.razor </em></p></figure><p id="1e92" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">现在，游戏真正的面包和黄油是:逻辑。</p><h1 id="92d2" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">index . Razer . cs</h1><h2 id="7413" class="no kw iq bd kx np nq dn lb nr ns dp lf lw nt nu lh ma nv nw lj me nx ny ll nz bi translated">佐料</h2><ul class=""><li id="cd8a" class="mw mx iq lp b lq lr lt lu lw oa ma ob me oc mi nb nc nd ne bi translated"><code class="fe mq mr ms mt b">string[] array</code>:为了保存九个盒子的值，我们称之为“board”</li><li id="1521" class="mw mx iq lp b lq ng lt nh lw ni ma nj me nk mi nb nc nd ne bi translated">字符串变量:为了表示可能是“X”或“O”的符号，我们称之为player</li><li id="f6e2" class="mw mx iq lp b lq ng lt nh lw ni ma nj me nk mi nb nc nd ne bi translated">存储获胜的组合:只有八种组合可以赢得游戏，我们可以简单地硬编码这些值。姑且称之为<code class="fe mq mr ms mt b">winningCombos</code>。</li></ul><h2 id="2074" class="no kw iq bd kx np nq dn lb nr ns dp lf lw nt nu lh ma nv nw lj me nx ny ll nz bi translated">逻辑</h2><p id="30e0" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">现在我们有了材料，我们需要创建一个名为<code class="fe mq mr ms mt b">SquareCliked</code>的方法，它是OnClick事件的处理程序。来自代码片段1，第11行。</p><p id="8b83" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">我们所要做的就是循环通过<code class="fe mq mr ms mt b">winningCombos</code>来检查我们的棋盘[]是否符合获胜的组合。如果是，我们将使用JavaScript显示一个漂亮的警告。</p><p id="ceea" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">我们还需要在游戏结束后重置游戏。简单的重置<code class="fe mq mr ms mt b">board[]</code>阵。</p><p id="8a9e" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">在我们跳到JavaScript之前，让我告诉你这个游戏的逻辑:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nn">代码片段2: Index.razor.cs </em></p></figure><h1 id="5e23" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">JavaScript</h1><p id="32ae" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">您一定想知道第34行和第41行上的那些东西是什么？这就是我们所说的使用JSRuntime的JavaScript方法。</p><p id="fa26" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">当我们调用JS时，有两种情况:</p><ul class=""><li id="7efe" class="mw mx iq lp b lq ml lt mm lw my ma mz me na mi nb nc nd ne bi translated">当一号或二号玩家获胜时。</li><li id="6698" class="mw mx iq lp b lq ng lt nh lw ni ma nj me nk mi nb nc nd ne bi translated">如果比赛打成平局。</li></ul><p id="e24e" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">首先，转到<code class="fe mq mr ms mt b">wwwroot</code>，创建一个名为<code class="fe mq mr ms mt b">js</code>的新文件夹，在文件夹中，添加一个新的JavaScript文件，命名为<code class="fe mq mr ms mt b">common.js</code>。有两种方法:</p><ul class=""><li id="2ab6" class="mw mx iq lp b lq ml lt mm lw my ma mz me na mi nb nc nd ne bi translated"><code class="fe mq mr ms mt b">ShowSwal</code>表示表现出甜蜜的警惕。在代码片段2的第34行，我们将这个方法名作为参数，所以<code class="fe mq mr ms mt b">JsRuntime</code>寻找我们指定为参数的同一个方法。</li><li id="dcc1" class="mw mx iq lp b lq ng lt nh lw ni ma nj me nk mi nb nc nd ne bi translated">在代码片段2的第41行，我们将这个方法名指定为一个参数。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nn">代码片段3: common.js </em></p></figure><p id="74c0" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">现在让我们将JavaScript与Blazor应用程序集成起来。</p><p id="5411" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">打开<code class="fe mq mr ms mt b">wwwroot</code>文件夹下的<code class="fe mq mr ms mt b">Index.html</code>。在head标签中，添加这三个脚本标签。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nn">代码片段4:向项目添加Sweet alert CDN。</em></p></figure><p id="2912" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">为了向您展示正确的位置，这里是整个<code class="fe mq mr ms mt b">index.html</code>。这就是你完成修改后的样子。遵循以下代码片段中的第13、14和15行:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">代码片段5:Index.html</p></figure><h1 id="df71" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">CSS</h1><p id="1044" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">我们差不多完成了，但是除非我们有一些CSS，否则还没有完成，对吗？如果您还记得代码片段1，我们已经在div中添加了一些类。让我们实际上在一个单独的CSS文件中编码这些类。</p><p id="dba7" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">下面是创建razor专用CSS文件的技巧。只需点击名为“页面”的文件夹，说“添加新项目”，然后选择样式表。这里你必须给你的剃刀文件相同的名字。对于我们的例子，我们将命名为<code class="fe mq mr ms mt b">Index.razor.css</code>。请参考下图:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/f4d5fd92707738b4b75166c2e4fa9423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h1ap1j05TBdmT3byp199aA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图4:添加特定于组件的CSS</p></figure><p id="2756" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">现在您将看到新添加的CSS是如何被自动分配到razor组件的正下方的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/0ba6ae7af16ba27fd07322c43af89559.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/format:webp/1*r_kpCyRFDSZC7NfgDMDwng.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图5:特定于组件的CSS</p></figure><p id="4969" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">这是带有flex和hover基本属性的CSS。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nn">代码片段6: Index.razor.css </em></p></figure><p id="6b83" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">让我们看一些实际的快照。</p><div class="kg kh ki kj gt ab cb"><figure class="of kk og oh oi oj ok paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/83614d004064c01905cbaaa752afac1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*urzzOasx65snhBQKfQIl5Q.png"/></div></figure><figure class="of kk ol oh oi oj ok paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/983c581a0bade7487eca65dcfbe7b2f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*Ot1M4rqiWGy8rl-5x_qQRA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk om di on oo translated">炽热的井字游戏</p></figure></div><p id="0904" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">好吧！这就是你要做的。使用这个项目来理解Blazor工作模型的一些基本原理。</p><h1 id="31d7" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">结论</h1><p id="e9dd" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">现在我们知道如何开发这样的小游戏，我们知道如何将JavaScript集成到Blazor应用程序中，现在我们知道如何将代码和CSS添加到单独的文件中，而不是将它们都放在一个razor文件中。我希望你喜欢这场表演。</p><p id="12c5" class="pw-post-body-paragraph ln lo iq lp b lq ml jr ls lt mm ju lv lw mn ly lz ma mo mc md me mp mg mh mi ij bi translated">如果你想和我合作，可以在<a class="ae mj" href="https://github.com/RikamPalkar/Blazing-Blazor/tree/main/Projects/BlazingTicTacToe/BlazingTicTacToe" rel="noopener ugc nofollow" target="_blank"> GitHub </a> repository fork获得源代码。</p></div></div>    
</body>
</html>