<html>
<head>
<title>A Step-by-Step Guide to Setting Up a Node.js API With Passport-JWT</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Passport-JWT设置Node.js API的分步指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/perfect-structure-to-authenticate-authorize-api-with-node-js-and-passport-jwt-d529b1a618ba?source=collection_archive---------3-----------------------#2020-02-10">https://betterprogramming.pub/perfect-structure-to-authenticate-authorize-api-with-node-js-and-passport-jwt-d529b1a618ba?source=collection_archive---------3-----------------------#2020-02-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0749" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">提高你的应用或网站的安全性</h2></div><h1 id="8dcd" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated"><strong class="ak">作者注</strong></h1><p id="51b7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">问候读者，</p><p id="fb89" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">本文是“<strong class="lc iu"><em class="mb"/></strong>系列文章的一部分，该系列文章由各种软件开发的<em class="mb">技术教程、新闻和技巧</em>组成:</p><ol class=""><li id="c653" class="mc md it lc b ld lw lg lx lj me ln mf lr mg lv mh mi mj mk bi translated"><a class="ae ml" href="https://medium.com/swlh/a-complete-guide-build-a-scalable-3-tier-architecture-with-mern-stack-es6-ca129d7df805" rel="noopener">用Node.js(第1部分)— ES6 </a>构建一个结构良好的三层架构</li><li id="d108" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv mh mi mj mk bi translated"><a class="ae ml" href="https://medium.com/swlh/2-simple-tips-to-increase-your-team-code-quality-143b879ae2f7" rel="noopener">提高团队代码质量的两个简单技巧</a></li><li id="7a8d" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv mh mi mj mk bi translated"><strong class="lc iu">认证的完美结构&amp;用Node.js授权你的API</strong></li><li id="6151" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv mh mi mj mk bi translated"><a class="ae ml" href="https://medium.com/swlh/i-built-a-m-e-r-n-codebase-in-an-hour-742acd71ed7e" rel="noopener">我在一个小时内构建了一个M.E.R.N代码库</a>(第2部分)</li><li id="6fca" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv mh mi mj mk bi translated"><a class="ae ml" href="https://medium.com/@calvinqc/build-a-simple-rest-apis-with-java-8-tomcat-jsp-mysql-intellij-on-mac-3308f4e59a03" rel="noopener">如何用Java构建REST API&amp;MySQL使用Tomcat </a></li><li id="f909" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv mh mi mj mk bi translated"><a class="ae ml" href="https://medium.com/swlh/multi-purposes-mailing-api-using-nodemailer-gmail-google-oauth-28de49118d77" rel="noopener">使用Nodemailer、Gmail &amp; Google OAuth2 </a>构建自己的邮件API</li><li id="a000" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv mh mi mj mk bi translated"><a class="ae ml" href="https://medium.com/swlh/webrtc-the-technology-that-powers-google-meet-hangout-facebook-messenger-and-discord-cb926973d786" rel="noopener">WebRTC——支持Google Meet、Facebook Messenger的技术</a></li><li id="8034" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv mh mi mj mk bi translated"><a class="ae ml" href="https://medium.com/@calvinqc/say-hello-to-the-new-github-clis-7e2612fb3918" rel="noopener">向新的Github CLIs问好</a></li><li id="6558" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv mh mi mj mk bi translated"><a class="ae ml" href="https://levelup.gitconnected.com/easy-java-springboot-apache-kafka-setup-on-macos-ceb481e167f8" rel="noopener ugc nofollow" target="_blank">使用Java、Springboot、Kafka进行简单设置</a></li><li id="c980" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv mh mi mj mk bi translated"><a class="ae ml" href="https://levelup.gitconnected.com/what-it-takes-to-have-a-successful-team-cooperation-bc21b82e9f3" rel="noopener ugc nofollow" target="_blank">成功的团队合作需要什么</a></li><li id="a941" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv mh mi mj mk bi translated"><a class="ae ml" href="https://medium.com/swlh/how-to-deploy-an-application-to-aws-using-docker-ecs-and-ecr-aa7785fc9667" rel="noopener">如何使用Docker、EC2、ECS和ECR将应用程序部署到AWS</a></li><li id="5d37" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv mh mi mj mk bi translated"><a class="ae ml" href="https://medium.com/@calvinqc/we-cut-down-45-of-our-budget-by-switching-to-google-cloud-storage-7e5a6a10542" rel="noopener">通过将我们的客户端托管到云存储，我们节省了45%的总成本</a></li></ol><p id="66a3" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">感谢访问这个系列，并享受阅读！</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><figure class="mz na nb nc gt nd gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi my"><img src="../Images/fee3ac49ac064a7993569137d7d84ca2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dPh6-JVay7r7HlJV.png"/></div></div><p class="nk nl gj gh gi nm nn bd b be z dk translated">Node.js、MongoDB和JWT</p></figure><p id="518e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">身份验证和授权是应用程序的重要组成部分。每当有一个没有保护或检查的API路径时，应用程序就很容易成为黑客的目标。这就是为什么我们需要一个安全令牌——<a class="ae ml" href="https://jwt.io/" rel="noopener ugc nofollow" target="_blank">JSON Web令牌(JWT) </a>。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="4839" class="ki kj it bd kk kl no kn ko kp np kr ks jz nq ka ku kc nr kd kw kf ns kg ky kz bi translated">JWT的基本情况</h1><p id="9fa7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><em class="mb">我不会深入JWT，但这里是所有的基本情况。</em></p><figure class="mz na nb nc gt nd gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi nt"><img src="../Images/043958efb6c75e031cc85811c377488e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*a5Oo7gACg1vPfTMo.png"/></div></div></figure><blockquote class="nu nv nw"><p id="3ac9" class="la lb mb lc b ld lw ju lf lg lx jx li nx ly ll lm ny lz lp lq nz ma lt lu lv im bi translated">JSON Web Token (JWT)是一个开放标准(<a class="ae ml" href="https://tools.ietf.org/html/rfc7519" rel="noopener ugc nofollow" target="_blank"> RFC 7519 </a>)，它定义了一种紧凑且独立的方式，以JSON对象的形式在各方之间安全地传输信息。该信息可以被验证和信任，因为它是数字签名的。jwt可以使用秘密(使用<strong class="lc iu"> HMAC </strong>算法)或使用<strong class="lc iu"> RSA </strong>或<strong class="lc iu"> ECDSA </strong>的公钥/私钥对进行签名。</p><p id="99c0" class="la lb mb lc b ld lw ju lf lg lx jx li nx ly ll lm ny lz lp lq nz ma lt lu lv im bi translated">—<a class="ae ml" href="https://jwt.io/introduction/" rel="noopener ugc nofollow" target="_blank">JSON Web令牌简介</a></p></blockquote><p id="a4df" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">JSON web令牌对用户信息进行编码和解码。它们用于授权和信息交换。</p><p id="2200" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">它们由三部分组成——报头、有效载荷和签名——由点(<code class="fe oa ob oc od b">.</code>)分隔，如下所示:<code class="fe oa ob oc od b">xxxxx.yyyyy.zzzzz</code></p><p id="b9c3" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">点击阅读更多关于JSON web令牌<a class="ae ml" href="https://jwt.io/introduction/" rel="noopener ugc nofollow" target="_blank">的信息。</a></p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="dd62" class="ki kj it bd kk kl no kn ko kp np kr ks jz nq ka ku kc nr kd kw kf ns kg ky kz bi translated">开始之前</h1><p id="ef54" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我会假设你的电脑已经有了npm和测试，如果没有看这个视频的话。</p><p id="ebc8" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">这是<a class="ae ml" href="https://github.com/calvinqc/trivin/tree/master/templates/node-passport-jwt" rel="noopener ugc nofollow" target="_blank">代码</a>如果你在这个过程中有任何问题，如果你需要问任何问题，请加入Trivin的<a class="ae ml" href="https://trivin.slack.com/" rel="noopener ugc nofollow" target="_blank"> slack </a>。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="1bb1" class="ki kj it bd kk kl no kn ko kp np kr ks jz nq ka ku kc nr kd kw kf ns kg ky kz bi translated">服务器设置</h1><p id="d3d8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果您喜欢使用自己的服务器，请跳过这一步。</p><p id="a60b" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">如果您没有项目，我们将使用<a class="ae ml" href="https://github.com/calvinqc/trivin" rel="noopener ugc nofollow" target="_blank"> Trivin </a>来设置项目模板。在本文中，我们将使用它来创建一个简单节点服务器。</p><pre class="mz na nb nc gt oe od of og aw oh bi"><span id="a5e5" class="oi kj it od b gy oj ok l ol om">$ npm i trivin -g<br/>$ trivin server simple-node-server -g -i</span></pre><p id="09f3" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">这将创建<a class="ae ml" href="https://medium.com/swlh/a-complete-guide-build-a-scalable-3-tier-architecture-with-mern-stack-es6-ca129d7df805" rel="noopener">一个简单但结构良好的节点服务器</a>，初始化Git，并安装所有的项目依赖项。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="e68c" class="ki kj it bd kk kl no kn ko kp np kr ks jz nq ka ku kc nr kd kw kf ns kg ky kz bi translated">装置</h1><pre class="mz na nb nc gt oe od of og aw oh bi"><span id="c6cd" class="oi kj it od b gy oj ok l ol om">$ npm i passport passport-jwt winston cors express-validator jsonwebtoken</span></pre></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="ad04" class="ki kj it bd kk kl no kn ko kp np kr ks jz nq ka ku kc nr kd kw kf ns kg ky kz bi translated">支持文件设置</h1><pre class="mz na nb nc gt oe od of og aw oh bi"><span id="9c0a" class="oi kj it od b gy oj ok l ol om">$ mkdir store/ <br/>$ touch store/passport.js store/config.js store/utils.js controller/constant.js</span></pre><h2 id="554b" class="oi kj it bd kk on oo dn ko op oq dp ks lj or os ku ln ot ou kw lr ov ow ky ox bi translated">常数. js</h2><ul class=""><li id="fbfa" class="mc md it lc b ld le lg lh lj oy ln oz lr pa lv pb mi mj mk bi translated">首先，在constant.js文件中有一些我非常喜欢做的事情。我没有写很多字符串，而是为我可能重用的字符串创建了<em class="mb">变量</em>。</li><li id="37a4" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv pb mi mj mk bi translated">允许<code class="fe oa ob oc od b">TextEditor</code>自动完成并减少字符串中的错别字。</li><li id="6b0e" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv pb mi mj mk bi translated">将这些添加到<code class="fe oa ob oc od b">constant.js</code>文件中:</li></ul><figure class="mz na nb nc gt nd"><div class="bz fp l di"><div class="pc pd l"/></div></figure><h2 id="77ba" class="oi kj it bd kk on oo dn ko op oq dp ks lj or os ku ln ot ou kw lr ov ow ky ox bi translated">实用工具</h2><ul class=""><li id="78d3" class="mc md it lc b ld le lg lh lj oy ln oz lr pa lv pb mi mj mk bi translated">存储整个项目中使用的所有功能和验证的文件。</li><li id="375f" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv pb mi mj mk bi translated">这使得API控制器文件中的代码更加清晰。</li></ul><figure class="mz na nb nc gt nd"><div class="bz fp l di"><div class="pc pd l"/></div></figure></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="b42f" class="ki kj it bd kk kl no kn ko kp np kr ks jz nq ka ku kc nr kd kw kf ns kg ky kz bi translated"><strong class="ak"> Passport.js设置</strong></h1><ul class=""><li id="5edb" class="mc md it lc b ld le lg lh lj oy ln oz lr pa lv pb mi mj mk bi translated">node.js库可以帮助您进行身份验证。</li><li id="e3e6" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv pb mi mj mk bi translated">将此添加到您的<code class="fe oa ob oc od b">store/passport.js</code>:</li></ul><figure class="mz na nb nc gt nd"><div class="bz fp l di"><div class="pc pd l"/></div></figure><p id="e803" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated"><code class="fe oa ob oc od b">store/config.js</code> <strong class="lc iu"> </strong>是我保存应用程序所有配置的地方:</p><figure class="mz na nb nc gt nd"><div class="bz fp l di"><div class="pc pd l"/></div></figure><p id="19b7" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">修改<code class="fe oa ob oc od b">app.js</code> <strong class="lc iu"> </strong>与护照一起使用:</p><figure class="mz na nb nc gt nd"><div class="bz fp l di"><div class="pc pd l"/></div></figure></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="77b9" class="ki kj it bd kk kl no kn ko kp np kr ks jz nq ka ku kc nr kd kw kf ns kg ky kz bi translated">运行您的应用</h1><pre class="mz na nb nc gt oe od of og aw oh bi"><span id="d6aa" class="oi kj it od b gy oj ok l ol om">$ npm start</span></pre><p id="d83e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">现在让我们回过头来，通过将<code class="fe oa ob oc od b">Passport-jwt</code>应用到我们的API来改进<code class="fe oa ob oc od b">user.controller.js</code>。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="ffd2" class="ki kj it bd kk kl no kn ko kp np kr ks jz nq ka ku kc nr kd kw kf ns kg ky kz bi translated"><strong class="ak">将Passport-jwt应用于注册/登录API </strong></h1><figure class="mz na nb nc gt nd gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/77ab055e01043e6ec70c3255fec00a0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1d_RhWhLZJvy0WFk.png"/></div><p class="nk nl gj gh gi nm nn bd b be z dk translated">图片来源:dotnettricks.com</p></figure><figure class="mz na nb nc gt nd"><div class="bz fp l di"><div class="pc pd l"/></div></figure><ul class=""><li id="f40e" class="mc md it lc b ld lw lg lx lj me ln mf lr mg lv pb mi mj mk bi translated">而不是使用用户的电子邮件和散列密码进行授权，这在客户端和服务器之间的通信期间可能是不安全的。</li><li id="2071" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv pb mi mj mk bi translated">我们使用JWT令牌进行授权。这样，我们可以确保密码和用户的电子邮件被加密的安全性。</li></ul></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="ab0b" class="ki kj it bd kk kl no kn ko kp np kr ks jz nq ka ku kc nr kd kw kf ns kg ky kz bi translated">测试</h1><ul class=""><li id="9c19" class="mc md it lc b ld le lg lh lj oy ln oz lr pa lv pb mi mj mk bi translated">此时，我假设您知道如何使用Postman。</li><li id="614c" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv pb mi mj mk bi translated">使用<code class="fe oa ob oc od b">POST/</code>方法，输入<code class="fe oa ob oc od b">localhost:8080/register</code>和<code class="fe oa ob oc od b">localhost:8080/login</code>。</li><li id="e05b" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv pb mi mj mk bi translated">在您测试您的注册API之后，您将成功地获得类似下面的结果。将令牌复制到剪贴板。</li></ul><figure class="mz na nb nc gt nd gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi pf"><img src="../Images/2fdcde7268ce1fcdc140ca0ec59b55c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EuWQ1Mo_cJwQzsI_V2rSRQ.png"/></div></div><p class="nk nl gj gh gi nm nn bd b be z dk translated">注册API成功返回一个令牌和用户的电子邮件+ id</p></figure></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="f4c5" class="ki kj it bd kk kl no kn ko kp np kr ks jz nq ka ku kc nr kd kw kf ns kg ky kz bi translated">批准</h1><p id="8aae" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">让我们看看您是否想转到需要用户登录的特定链接。然后，您可以简单地在API中添加一个授权。</p><p id="a81f" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">让我们看一个例子。</p><ul class=""><li id="e5bd" class="mc md it lc b ld lw lg lx lj me ln mf lr mg lv pb mi mj mk bi translated">在<code class="fe oa ob oc od b">user.controller.js</code>中，我包含了一个简单的<code class="fe oa ob oc od b">'/'</code> API来检索所有用户的列表——但是我不想检索所有用户，除非我以用户身份登录。</li><li id="c6a4" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv pb mi mj mk bi translated">另一个例子是脸书。如果您想进入新闻提要并检索您的所有帖子，您需要登录。</li><li id="e44d" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv pb mi mj mk bi translated">下面是一个在没有JWT令牌的情况下(也就是说，您还没有登录)访问安全API路由的例子:</li></ul><figure class="mz na nb nc gt nd gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi pg"><img src="../Images/25c6e21f08589083461e7ce598769fe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oft6XR83WafE79nMBVEjUA.png"/></div></div><p class="nk nl gj gh gi nm nn bd b be z dk translated">API未附带JWT的示例</p></figure></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="b06f" class="ki kj it bd kk kl no kn ko kp np kr ks jz nq ka ku kc nr kd kw kf ns kg ky kz bi translated"><strong class="ak">JWT护照授权</strong></h1><p id="eee3" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">将这些亮点添加到user.controller.js中:</p><figure class="mz na nb nc gt nd"><div class="bz fp l di"><div class="pc pd l"/></div></figure><p id="531b" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">现在，用Postman测试API。点击“授权”，并选择“不记名令牌”类型然后，将您的令牌粘贴到令牌字段中，并运行:</p><figure class="mz na nb nc gt nd gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi pf"><img src="../Images/aaec453cc6ca9976199cc8d82aab03db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y5u1ccu31puCLog8TPeOug.png"/></div></div><p class="nk nl gj gh gi nm nn bd b be z dk translated">使用JWT，您将能够检索所有用户</p></figure></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="ed58" class="ki kj it bd kk kl no kn ko kp np kr ks jz nq ka ku kc nr kd kw kf ns kg ky kz bi translated">干得好！</h1><p id="49b6" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">现在，您可以授权和保护所有其他需要用户在使用API之前登录的路由。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><p id="4981" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated"><strong class="lc iu">跟进</strong></p><ul class=""><li id="94e5" class="mc md it lc b ld lw lg lx lj me ln mf lr mg lv pb mi mj mk bi translated">如果你喜欢阅读<strong class="lc iu"> <em class="mb">《我与创业公司一起成长》</em> </strong>，并希望在未来阅读更多。请在此订阅<a class="ae ml" href="http://eepurl.com/g5qIBf" rel="noopener ugc nofollow" target="_blank">。</a></li><li id="09f2" class="mc md it lc b ld mm lg mn lj mo ln mp lr mq lv pb mi mj mk bi translated">在<a class="ae ml" href="https://github.com/calvinqc" rel="noopener ugc nofollow" target="_blank"> Github </a>、<a class="ae ml" href="https://www.linkedin.com/in/calvinqc/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系</li></ul></div></div>    
</body>
</html>