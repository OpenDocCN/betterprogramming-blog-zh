<html>
<head>
<title>How I Built AlgoTab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何构建AlgoTab</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-i-built-algotab-1f1de00979f5?source=collection_archive---------25-----------------------#2020-03-24">https://betterprogramming.pub/how-i-built-algotab-1f1de00979f5?source=collection_archive---------25-----------------------#2020-03-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e9a1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">每当你在Chrome中打开一个新的标签页，就会得到一个新的算法问题</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d6d2795af9674f38b0eb6cca619d99d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1ZTVQBNOsHKy8Ghl"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@thisisengineering?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> ThisisEngineering RAEng </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="1915" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最近看到了詹姆斯·克利尔的《T4原子习惯》一书，并虔诚地将这本书的教导应用到我的日常生活中。我还在读这本书，但我认为建立一个工具来强迫我每天至少尝试一个新的编码挑战会是一个有趣的项目。</p><p id="28d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以我决定构建AlgoTab，这是一个Chrome扩展，每当你打开一个新标签时，它都会给你一个新的算法问题！</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="d7c8" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">技术架构</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/588e4c9548a83e24d5bd285783dede45.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*YjYMLTwnrwgUgq-Jzmc2AA.png"/></div></figure><p id="da26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">整个应用程序是以无服务器的方式构建的。我们有一个worker (cron job ),它在特定的时间框架后执行，用新的图像不断刷新我们的数据库。它访问LeetCode，抓取一个新问题，将这个问题保存为截图，并同时写入云Firestore和云存储。</p><p id="a612" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将主图像存储在云存储中，并将指向该图像的指针存储在Firestore中。为了防止我的数据库变得太大，worker不断地监控当前存储的图像数量，每当这个数量增长到100以上时，它就批量清除一些图像。这样，在任何给定时间，数据库中都会存储大约90到110个问题。</p><p id="2590" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将问题存储为具有以下参数的对象:</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="58df" class="nb me it mx b gy nc nd l ne nf">{<br/>  "link": "{pointer to cloud storage}",<br/>  "questionUrl": "{url of the question}"<br/>}</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="07b5" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">后端</h1><p id="da93" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">后端是该项目的最有趣的部分。它包含我们的worker以及客户使用的主要API。</p><p id="b3b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">问题工作者的工作如下。它负责在数据库中添加和删除问题:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="af9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">向客户端发送问题的API是:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="7e3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完整的代码库可以在GitHub 上找到<a class="ae ky" href="https://github.com/yasimba/algotab" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="5e2d" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">面临的挑战</h1><p id="a47d" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">我最初对这个建筑的想法与我最终选定的大相径庭。最初，我想象它是这样工作的:</p><ol class=""><li id="a65c" class="nn no it lb b lc ld lf lg li np lm nq lq nr lu ns nt nu nv bi translated">每次打开一个新标签，调用我们的API。</li><li id="0e1b" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">API启动一个无头浏览器来捕捉屏幕截图。</li><li id="a167" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">屏幕截图连同问题信息一起被发送回客户端。</li></ol><p id="6151" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，我很快遇到了一些问题，其中一些问题并不完全由我决定。主要问题是每个API调用需要大约30到34秒来执行。因为每次打开一个新标签页，我们都要发送一个新问题，这实在是太浪费时间了。如果我们再加上并发请求的可能性，那么我们就走进了一个噩梦。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b4e8" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">未来的工作</h1><p id="f435" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">虽然这是一个简单的项目，但我发现它非常有用，每天都要使用多次。我想到的一些改进是:</p><ol class=""><li id="1e0b" class="nn no it lb b lc ld lf lg li np lm nq lq nr lu ns nt nu nv bi translated">添加另一个工作人员来检测重复问题并删除它们。</li><li id="7c02" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">增加对更多算法题平台的支持。</li><li id="4104" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">获取问题难度。</li></ol></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="3899" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结论</h1><p id="1aef" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">AlgoTab是一个快速而有趣的项目。无服务器架构的使用让我可以快速构建原型，并且不花一分钱就可以投入使用。因此，选择Docker还是无服务器是显而易见的。</p><p id="4550" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管Docker允许更多的控制，但我发现去无服务器化——至少在早期阶段——应该是默认的方法。Firebase对cron jobs的支持也意味着我不必手动设置，我认为这是一个胜利。</p><p id="b381" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在此处查看代码:</p><div class="ob oc gp gr od oe"><a href="https://github.com/yasimba/algotab" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">yasimba/algotab</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">每当你在Chrome - yasimba/algotab上打开一个新标签时，都会得到一个新的算法问题</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">github.com</p></div></div><div class="on l"><div class="oo l op oq or on os ks oe"/></div></div></a></div><p id="923c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里的扩展是:</p><div class="ob oc gp gr od oe"><a href="https://chrome.google.com/webstore/detail/algotab/bdbdkaldlokgnidglfhfdiecbmnimdne" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">Algotab</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">一天一个问题，远离失业</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">chrome.google.com</p></div></div><div class="on l"><div class="ot l op oq or on os ks oe"/></div></div></a></div></div></div>    
</body>
</html>