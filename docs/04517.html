<html>
<head>
<title>Create Your Own Public URL for Your Localhost (Similar to ngrok)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为您的本地主机创建您自己的公共URL(类似于ngrok)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-your-own-public-url-for-localhost-like-ngrok-with-https-your-own-domain-45c343750e7e?source=collection_archive---------1-----------------------#2020-04-19">https://betterprogramming.pub/create-your-own-public-url-for-localhost-like-ngrok-with-https-your-own-domain-45c343750e7e?source=collection_archive---------1-----------------------#2020-04-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="702d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">与HTTPS和你自己的领域</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a891a1d77f9ca3c9ff1c96297a5f4d04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ugmAxfxPXlxExcbZz8aYmA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图像由<a class="ae ky" href="http://descrier.co.uk" rel="noopener ugc nofollow" target="_blank">描述器</a>描述</p></figure><p id="5ce1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时候，在开发过程中，将您的本地应用程序暴露在互联网上是非常必要的。ngrok是一个很好的解决方案，但是它有一些限制。每次断开连接并重新连接时，URL都会改变。像HTTPS这样的服务也是有偿的。</p><p id="b1e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用SSH创建一个隧道，这一点您可能已经很熟悉了。</p><p id="95f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您在本地机器的端口<code class="fe lv lw lx ly b">3000</code>上运行了一个节点应用程序，并且您希望互联网上的任何人都能够访问它。</p><p id="7695" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这可以分两步完成:</p><ol class=""><li id="bbbd" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">在服务器上，创建一个类似于<code class="fe lv lw lx ly b">forward.mydomain.com</code> <strong class="lb iu"> </strong>的虚拟主机，用一个反向代理连接到一些未使用的端口(比如说<code class="fe lv lw lx ly b">5000</code>)。</li><li id="9dcd" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">现在创建一个隧道，这样无论什么从服务器上的端口<code class="fe lv lw lx ly b">5000</code>进入，都会被隧道传送到你本地机器的端口<code class="fe lv lw lx ly b">3000 </code>(PC/笔记本电脑)。</li></ol><p id="2b0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意:</strong>确保<code class="fe lv lw lx ly b">forward.mydomain.com</code>的<strong class="lb iu"> </strong> DNS <strong class="lb iu"> </strong>指向你的服务器。如果没有，用<code class="fe lv lw lx ly b">name:forward</code>和<code class="fe lv lw lx ly b">content : ip address of your server</code>创建一个<code class="fe lv lw lx ly b">A Record</code>。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="a4ec" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">在您的服务器上创建虚拟主机</h1><p id="868a" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">我用的是Apache，但你也可以用nginx或其他网络服务器软件。</p><p id="38b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，您需要为Apache启用<code class="fe lv lw lx ly b">proxy</code>和<code class="fe lv lw lx ly b">proxy_http</code> mods。您可以通过运行以下命令来实现:</p><p id="f22c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">sudo a2enmod proxy</code></p><p id="7896" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">sudo a2enmod proxy_http</code></p><p id="5b6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个Apache的示例虚拟主机文件，它为任何带有主机名<code class="fe lv lw lx ly b">forward.mydomain.com</code>的本地端口<code class="fe lv lw lx ly b">5000</code>创建了一个代理。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="9a63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想支持HTTPS，你可以使用Certbot。简单地按照他们的指示去做。HTTPS也已启用。</p><p id="8814" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经为我们的需求设置了服务器。现在我们需要创建一个隧道，这样服务器上端口<code class="fe lv lw lx ly b">5000</code>上的任何东西都可以到达我们本地机器的端口<code class="fe lv lw lx ly b">3000</code>。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="cddb" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">SSH端口转发</h1><p id="03fa" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">这是比较简单的部分。SSH已经支持端口转发。你所要做的只是用这个命令<code class="fe lv lw lx ly b">ssh</code>:</p><p id="0d60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">ssh -R 5000:localhost:3000 ubuntu@forward.mydomain.com</code></p><p id="664e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注:</strong> <code class="fe lv lw lx ly b">-R</code>为远程端口转发</p><p id="655d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经将服务器的端口<code class="fe lv lw lx ly b">5000</code>映射到了<code class="fe lv lw lx ly b">localhost:3000</code>。</p><p id="ea0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">万岁！当你打开<code class="fe lv lw lx ly b"><a class="ae ky" href="https://forward.mydomain.com" rel="noopener ugc nofollow" target="_blank">https://forward.mydomain.com</a></code>(如果启用了HTTPS——否则使用HTTP ),它会打开你本地机器上运行的任何东西，互联网上的任何人都可以访问它。要停止，只需退出。</p><p id="fbf6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最好的事情是你可以隧道到任何你想要的港口。服务器上不需要做任何更改。只需在本地更改该命令的端口。尽情享受吧！</p></div></div>    
</body>
</html>