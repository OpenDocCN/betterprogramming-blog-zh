<html>
<head>
<title>Adding More Controls to Your SwiftUI Painting App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向SwiftUI绘画应用程序添加更多控件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/adding-more-controls-to-your-swiftui-painting-app-8edaede63e7e?source=collection_archive---------10-----------------------#2021-10-21">https://betterprogramming.pub/adding-more-controls-to-your-swiftui-painting-app-8edaede63e7e?source=collection_archive---------10-----------------------#2021-10-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e95e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">继续我们构建iOS画图应用的旅程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1da9883cbd1182a2e7a8ce10dab14120.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CpOIZwwF3bFneikoMMaRMg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@tamanna_rumee?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Tamanna Rumee </a>在<a class="ae ky" href="https://unsplash.com/s/photos/shapes?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="fbbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我相信你已经阅读了这个简短系列的第一和第二部分，我希望在其中开发一个简单的绘画应用程序。如果你还没有，那么你应该停下来先读一读:</p><ol class=""><li id="e430" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/build-a-painting-app-in-ios-15-with-swiftui-bb757a925f6a">用SwiftUI在iOS 15中搭建绘画App</a></li><li id="84af" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/adding-shapes-and-colors-to-your-swiftui-painting-app-751dbb6fdce3">向SwiftUI绘画应用添加形状和颜色</a></li></ol><p id="af83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">bon——感谢回来——和我一起继续在iOS 15下开发绘画应用程序。这是我在哪里的最新消息。</p><h1 id="bd1f" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">案情摘要</h1><p id="5e15" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我想对angle/sides方法的工作方式做一个微妙的改变，以及管理对象的删除和它们的<code class="fe ng nh ni nj b">z</code>层的变化的其他方法，更高或更低，在顶部，在后面。我还计划尝试对代码进行一点重组，从<code class="fe ng nh ni nj b">ContentView</code>中删除应该在它自己的文件中的代码。</p><h1 id="2a85" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">编码</h1><p id="5c92" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">先说移动方法<code class="fe ng nh ni nj b">deselect</code>和<code class="fe ng nh ni nj b">searchin</code>，前者出现两次。我将它们都移动到一个名为<code class="fe ng nh ni nj b">Shapes.swift</code>的文件中，并将它们从<code class="fe ng nh ni nj b">ContentView.swift</code>中移除。</p><p id="e952" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我第一次尝试编写将形状移动到不同级别所需的方法，报告我有多少个形状，并删除我将与其视图一起添加的形状和控件，以便我可以将它们添加到界面中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="da01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里没有火箭科学，虽然我会回到这个代码，因为我们可以做得更好。接下来，我做了一组方法来管理不同的层次，这样我就可以将形状上下移动。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="9f1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再次使用<code class="fe ng nh ni nj b">deselect</code>和<code class="fe ng nh ni nj b">searchin</code>方法，并做了一些小的改动:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><p id="5ca1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这一点上，我跳回到<code class="fe ng nh ni nj b">ContentView</code>并添加访问这些方法所需的视图以及一些细微的变化。我从改变<code class="fe ng nh ni nj b">Angle</code>和<code class="fe ng nh ni nj b">Sides</code>的方法开始。在第二个版本中，除了在度数/边上加1之外，这没什么……但在我看来，更有意义的是使用一个简单的公式来确保圆被干净地分割，保持多边形的所有边长度相等，并进一步限制一个形状中不能有超过60个角，因为在那一点上它看起来像一个圆。我用一个类似的公式来改变这个形状的角度，这个角度在我的脑海中也是有意义的，相对于边的数量。我还添加了双击来重置。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="7b9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来是删除对象方法的视图。这里有一个微妙的错误，我将在最后提到。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="1269" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后是设置界面的视图，这样您就可以在不同级别之间移动对象。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="2f3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有这些都让我们看到了展示新界面的动画GIF。我先画一条形状线，然后用新算法旋转它。然后我给它们上色，并展示如何在图中所示的层次结构中上下移动它们。最后，我删除了一些形状。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/d9e414d6fdaacc368fc8745e56e1ea58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zM2W_toCQ2apKVFbMFw0gg.gif"/></div></div></figure><p id="0c54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，将这些视图添加到界面的代码很琐碎，我不会在这里包括它，我也不想包括<code class="fe ng nh ni nj b">ContentView.swift</code>以保持本文的合理长度，因为除了添加控制视图之外，我没有对其进行任何更改。你肯定会注意到我给这个项目添加了一种字体，让它看起来更有吸引力。好了，在我结束今天的工作之前，你是否发现了三个不受欢迎的特性(或者有人会说是bug)。</p><ul class=""><li id="2020" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu nu mb mc md bi translated">第一个错误是在选择中。它从你放在画布上的第一个对象开始寻找坐标。这是一种错误的方式，因为它无法找到你放在其他物体上面的物体。</li><li id="6fc1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu nu mb mc md bi translated">第二个bug与形状的选择有关，正如你在GIF中看到的，虽然你可以选择多个形状，但是你的操作只影响其中一个。</li><li id="c339" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu nu mb mc md bi translated">第三个错误是删除对象——它在不创建新对象的情况下删除对象，有效地减少了您可以创建的对象的数量——您从128个模板开始，如果您删除一个形状，您可以使用的模板就更少了。</li></ul><p id="59ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我怀疑最后一个错误还有其他含义，如果你创建了超过128个对象而没有删除任何东西，应用程序将会崩溃。需要在下一篇文章中研究。敬请关注。</p></div></div>    
</body>
</html>