<html>
<head>
<title>Using the New iOS 15 DynamicTypeSize in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中使用新的iOS 15 DynamicTypeSize</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/using-the-new-ios-15-dynamictypesize-in-swiftui-8e8e860aebde?source=collection_archive---------8-----------------------#2022-03-02">https://betterprogramming.pub/using-the-new-ios-15-dynamictypesize-in-swiftui-8e8e860aebde?source=collection_archive---------8-----------------------#2022-03-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="26d1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让您的文本和视图可以使用不同的字体大小</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cb60b028134bf4fdb008b0b9d5e66431.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pb4g9AaeoXytXTLU"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@cardmapr?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> CardMapr </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="4772" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">早在2019年8月，我就向自己介绍了动态文本大小的世界。我所在国家流行的送餐应用在改变系统字体大小时没有改变文字大小。(他们仍然没有)我想知道增加文本大小和相应地改变视图需要什么API。</p><p id="1f81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在SwiftUI中，使用系统字体文本样式会自动更改:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="6dcd" class="lx ly iq lt b gy lz ma l mb mc">Text("Something cool goes in here.")<br/>  .font(.body)</span></pre><p id="ece4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当尺寸增大或减小时，它还会相应地调整视图和约束。但是，当您将文本大小增加到可访问性大小时(巨大的文本)，视图可能会被截断，看起来不可读。您可能需要创建另一个不同的视图结构来解决这个问题。</p><h1 id="3d84" class="md ly iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">旧方法—内容大小类别</h1><p id="08a1" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">SwiftUI为我们提供了一个环境<code class="fe mz na nb lt b">ContentSizeCategory</code>。下面是我的应用程序中的一个例子，当大小增加时，我将布局从网格更改为列表:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="8a0e" class="lx ly iq lt b gy lz ma l mb mc">struct HomeGameTypeView: View {<br/>  <a class="ae kv" href="http://twitter.com/EnvironmentObject" rel="noopener ugc nofollow" target="_blank">@EnvironmentObject</a> var preferences: Preferences<br/>  <br/>  <a class="ae kv" href="http://twitter.com/Environment" rel="noopener ugc nofollow" target="_blank">@Environment</a>(\.sizeCategory) private var category<br/>  <br/>  var body: some View {<br/>    if category &gt;= .extraExtraLarge {<br/>      ScrollView {<br/>        LazyVStack {<br/>          list<br/>        }<br/>      }<br/>    } else {<br/>      LazyVGrid(columns: [.init(), .init()]) {<br/>        list<br/>      }<br/>    }<br/>  }<br/>  <br/>  var list: some View {<br/>    ForEach(GameTypeOption.allCases) { type in<br/>      HomeGameTypeRow(selection: $preferences.gameTypeSelection, type: type)<br/>    }<br/>  }<br/>}</span></pre><h1 id="02f3" class="md ly iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">新方法——动态规模</h1><p id="0ea7" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">在iOS 15中，<code class="fe mz na nb lt b">ContentSizeCategory</code>被弃用，取而代之的是<code class="fe mz na nb lt b">DynamicTypeSize</code>。重写上面的例子:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="b3c3" class="lx ly iq lt b gy lz ma l mb mc">struct HomeGameTypeView: View {<br/>  <a class="ae kv" href="http://twitter.com/EnvironmentObject" rel="noopener ugc nofollow" target="_blank">@EnvironmentObject</a> var preferences: Preferences<br/>  <br/>  <a class="ae kv" href="http://twitter.com/Environment" rel="noopener ugc nofollow" target="_blank">@Environment</a>(\.dynamicTypeSize) var size // &lt;- NEW<br/>  <br/>  var body: some View {<br/>    if size &gt;= .xxLarge { // &lt;- NEW<br/>      ScrollView {<br/>        LazyVStack {<br/>          list<br/>        }<br/>      }<br/>    } else {<br/>      LazyVGrid(columns: [.init(), .init()]) {<br/>        list<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="e4e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这也可以将文本大小限制在一个特定的大小(我认为不推荐)或一个大小范围内。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="16e1" class="lx ly iq lt b gy lz ma l mb mc">var content: some View {<br/>  Text(item.name.uppercased())<br/>    .font(.title)<br/>    .dynamicTypeSize(..&lt;DynamicTypeSize.accessibility1) // &lt;- RANGE<br/>    .foregroundColor(.primary)<br/>}</span></pre><p id="aa18" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我知道标题文本样式足够大，我不希望它超出可访问性中等大小。</p><h1 id="9031" class="md ly iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">预览中的动态大小</h1><p id="9d10" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">要在预览中测试不同的大小，您可以将恒定大小作为环境添加到预览中:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="0763" class="lx ly iq lt b gy lz ma l mb mc">struct IntroductionView_Previews: PreviewProvider {<br/>  static var previews: some View {<br/>    IntroductionView()<br/>      .environment(\.dynamicTypeSize, .accessibility1) // &lt;- CONSTANT<br/>  }<br/>}</span></pre><h1 id="7a83" class="md ly iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">大型内容查看器</h1><p id="824f" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">如果要限制文本大小，可以添加方法<code class="fe mz na nb lt b">accessibilityShowsLargeContentViewer()</code>。当用户使用辅助功能文本大小时，在视图上长按会显示放大的文本大小:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="6e51" class="lx ly iq lt b gy lz ma l mb mc">var body: some View {<br/>  Button(action: action) {<br/>    content<br/>  }<br/>  .buttonStyle(HomeButtonStyle(isSelected: false))<br/>  .padding([.bottom, .horizontal], 8)<br/>  .accessibilityShowsLargeContentViewer()<br/>}</span></pre><p id="2d2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管如此，请注意文档中的这些文字:</p><p id="8d17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">只有在由于不可避免的设计限制而必须保持小项目时，才依赖大内容查看器。例如，标签栏中的按钮保持较小，以便为应用程序的主要内容留出更多空间。</p><p id="be4f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不要使用大型内容查看器来取代适当的动态类型支持。例如，动态类型允许列表中的项目垂直增长或收缩，以适应用户的首选字体大小。只有在由于不可避免的设计限制而必须保持小项目时，才依赖大内容查看器。</p><h1 id="2add" class="md ly iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">结论</h1><p id="7ba3" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">动态类型可帮助您的用户使用任何文本大小的应用程序，为他们提供卓越的体验。使用SwiftUI可以更容易地添加动态类型并相应地构建视图。</p><p id="b57e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我知道随着视图变得越来越复杂，这变得越来越困难，但是你仍然可以尽你最大的努力使你的应用程序至少可以被<code class="fe mz na nb lt b">xxxlarge</code>大小的用户访问。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="912c" class="lx ly iq lt b gy lz ma l mb mc"><strong class="lt ir">Want to Connect?</strong></span><span id="3358" class="lx ly iq lt b gy nc ma l mb mc">If you have a better approach, let me know <a class="ae kv" href="https://twitter.com/rudrankriyam" rel="noopener ugc nofollow" target="_blank">on Twitter</a>!</span></pre></div></div>    
</body>
</html>