<html>
<head>
<title>Evaluating Guess.js in Angular Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在角度应用中评估Guess.js</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/evaluating-guess-js-in-angular-applications-68803b475695?source=collection_archive---------10-----------------------#2022-09-07">https://betterprogramming.pub/evaluating-guess-js-in-angular-applications-68803b475695?source=collection_archive---------10-----------------------#2022-09-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="096d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">预测预取在角度应用中获得好评</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8f0631b17d17a50486d42bede76c152d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8_J-9u-lgOYtcxPC"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@pablozuchero?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">巴勃罗·祖切罗</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><h1 id="c9cd" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">为什么是Guess.js？</h1><p id="50eb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Glossary/Page_prediction" rel="noopener ugc nofollow" target="_blank">页面预测</a>是一种浏览器功能或脚本，当启用时，它会告诉浏览器在用户请求内容之前下载他们可能会访问的资源。这些资源被下载并缓存以备将来使用，而无需用户发出明确的请求。这个过程称为预取。</p><p id="a469" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">页面预测通过几乎即时加载预测内容来提高性能。然而，页面预测也可能下载用户不寻找的内容。“正确地”执行页面预测是很重要的，它的成功将增强用户体验。</p><p id="fda3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://github.com/guess-js/guess" rel="noopener ugc nofollow" target="_blank"> Guess.js </a>是一个JavaScript库和工具，用于自动化预测预取过程。</p><h1 id="9817" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">Guess.js是什么？</h1><p id="7159" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Guess.js创建于2018年4月左右。目前的版本是0.4.22，还在alpha中。它基于从数据分析驱动的方法中提取的数据来执行页面预测，如<a class="ae ky" href="https://analytics.google.com/analytics/web/provision/#/provision" rel="noopener ugc nofollow" target="_blank">谷歌分析</a>和<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/machine-learning-theory-and-programming-supervised-learning-regression-analysis-8ed2d86f5714">机器学习模型</a>。</p><p id="e4a5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">预测数据分析可应用于多种环境:</p><ul class=""><li id="a5f2" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">预测用户可能访问的下一页(或多页)并预取这些页面。<br/> —页面级:预渲染或预取接下来最有可能被访问的页面。<br/> —包级:预取与顶部<code class="fe nb nc nd ne b">N</code>页面相关联的包。</li><li id="98f5" class="ms mt it lt b lu nf lx ng ma nh me ni mi nj mm mx my mz na bi translated">预测用户可能会查看的下一条内容(文章、产品或视频)。</li><li id="6d2b" class="ms mt it lt b lu nf lx ng ma nh me ni mi nj mm mx my mz na bi translated">预测用户可能会更多互动的微件类型，如游戏。</li></ul><p id="4533" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">Guess.js支持静态站点，Angular，Gatsby，Next.js，Nuxt.js等等。我们使用Angular应用程序来看看它是如何工作的。</p><h1 id="9238" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">Guess.js在角度应用中很受欢迎</h1><p id="4bc9" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们要探讨的是Angular工作环境下的Guess.js。它需要七个步骤，其中前三个步骤为每条路线设置一个带延迟加载的角度项目，最后四个步骤用Guess.js设置并运行预测预取。</p><ol class=""><li id="8c72" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm nk my mz na bi translated"><a class="ae ky" href="#3e02" rel="noopener ugc nofollow">创建一个角度项目</a>。</li><li id="9a94" class="ms mt it lt b lu nf lx ng ma nh me ni mi nj mm nk my mz na bi translated"><a class="ae ky" href="#d55f" rel="noopener ugc nofollow">设置三条路线:</a><code class="fe nb nc nd ne b"><a class="ae ky" href="#d55f" rel="noopener ugc nofollow">'/'</a></code><a class="ae ky" href="#d55f" rel="noopener ugc nofollow"/><code class="fe nb nc nd ne b"><a class="ae ky" href="#d55f" rel="noopener ugc nofollow">'/one'</a></code><a class="ae ky" href="#d55f" rel="noopener ugc nofollow"/><code class="fe nb nc nd ne b"><a class="ae ky" href="#d55f" rel="noopener ugc nofollow">'/two'</a></code>。</li><li id="5b5c" class="ms mt it lt b lu nf lx ng ma nh me ni mi nj mm nk my mz na bi translated"><a class="ae ky" href="#f9a1" rel="noopener ugc nofollow">运行应用程序查看下载的包</a>。</li><li id="a57d" class="ms mt it lt b lu nf lx ng ma nh me ni mi nj mm nk my mz na bi translated"><a class="ae ky" href="#1ae9" rel="noopener ugc nofollow">创建预测分析文件，</a>T3。</li><li id="72b4" class="ms mt it lt b lu nf lx ng ma nh me ni mi nj mm nk my mz na bi translated"><a class="ae ky" href="#acce" rel="noopener ugc nofollow">扩展Angular CLI以配置Webpack </a>。</li><li id="6d46" class="ms mt it lt b lu nf lx ng ma nh me ni mi nj mm nk my mz na bi translated"><a class="ae ky" href="#96e4" rel="noopener ugc nofollow">在角度应用</a>中配置Guess.js。</li><li id="85ec" class="ms mt it lt b lu nf lx ng ma nh me ni mi nj mm nk my mz na bi translated"><a class="ae ky" href="#2b29" rel="noopener ugc nofollow">用Guess.js </a>执行预测预取。</li></ol><h2 id="3e02" class="nl la it bd lb nm nn dn lf no np dp lj ma nq nr ll me ns nt ln mi nu nv lp nw bi translated">1.创建角度项目</h2><p id="93c4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">全局设置Angular CLI:</p><pre class="kj kk kl km gt nx ne ny nz aw oa bi"><span id="d7cb" class="nl la it ne b gy ob oc l od oe">%<!-- --> npm i -g @angular/cli</span></pre><p id="32be" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">检查版本:</p><pre class="kj kk kl km gt nx ne ny nz aw oa bi"><span id="83a9" class="nl la it ne b gy ob oc l od oe">% ng version<br/>Angular CLI: 14.2.1</span></pre><p id="ca81" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">安装了<code class="fe nb nc nd ne b">ng</code>后，创建一个新项目:</p><pre class="kj kk kl km gt nx ne ny nz aw oa bi"><span id="c7ba" class="nl la it ne b gy ob oc l od oe">% ng new angular-guess<br/>? Would you like to add Angular routing? Yes<br/>? Which stylesheet format would you like to use? CSS</span></pre><h2 id="d55f" class="nl la it bd lb nm nn dn lf no np dp lj ma nq nr ll me ns nt ln mi nu nv lp nw bi translated">2.设置三条路线:'/'、'/一'和'/二'</h2><p id="ae41" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">设置三条路线:<code class="fe nb nc nd ne b">'/'</code>、<code class="fe nb nc nd ne b">'/one'</code>、<code class="fe nb nc nd ne b">'/two'</code>。修改三条路线的应用程序文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/8dabef2a8cae7842ed3510fe63a897a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/1*OMePp7fZRmSxKlD8epEO8g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="e0e0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在上面的截图中，绿色表示新添加的文件，黄色表示修改的文件。</p><p id="7ed2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">索引路线，</strong>T8】</p><p id="4de4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">索引模块在<code class="fe nb nc nd ne b">src/app/index/index.module.ts</code>中定义:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="f96f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">它用<code class="fe nb nc nd ne b">IndexComponent</code>(第11行)定义了子节点<code class="fe nb nc nd ne b">RouterModule</code>(上面代码中的第8–13行)。</p><p id="276e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nb nc nd ne b">IndexComponent</code>在<code class="fe nb nc nd ne b">src/app/index/index.component.ts</code>中定义:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="7e35" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">它将选择器定义为<code class="fe nb nc nd ne b">'app-index'</code>(上面代码中的第4行)，模板只是文本，<code class="fe nb nc nd ne b">'Home1'</code>(第5行)。</p><p id="645e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">路线，</strong> <code class="fe nb nc nd ne b"><strong class="lt iu">/one</strong></code></p><p id="51c5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nb nc nd ne b">one</code>模块在<code class="fe nb nc nd ne b">src/app/one/one.module.ts</code>中定义:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="5aa5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">它用<code class="fe nb nc nd ne b">OneComponent</code>(第11行)定义了子节点<code class="fe nb nc nd ne b">RouterModule</code>(上面代码中的第8–13行)。</p><p id="b7a6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nb nc nd ne b">OneComponent</code>在<code class="fe nb nc nd ne b">src/app/one/one.component.ts</code>中定义:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="dba6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">它将选择器定义为<code class="fe nb nc nd ne b">'app-one'</code>(上面代码中的第4行)，模板只是文本，<code class="fe nb nc nd ne b">'One'</code>(第5行)。</p><p id="22b1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">路线，</strong>T2】</p><p id="810a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nb nc nd ne b">two</code>模块在<code class="fe nb nc nd ne b">src/app/two/two.module.ts</code>中定义:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="1728" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">它用<code class="fe nb nc nd ne b">TwoComponent</code>(第11行)定义了子节点<code class="fe nb nc nd ne b">RouterModule</code>(上面代码中的第8–13行)。</p><p id="445b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nb nc nd ne b">TwoComponent</code>在<code class="fe nb nc nd ne b">src/app/two/two.component.ts</code>中定义:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="6947" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">它将选择器定义为<code class="fe nb nc nd ne b">'app-two'</code>(上面代码中的第4行)，模板只是文本，<code class="fe nb nc nd ne b">'Two'</code>(第5行)。</p><p id="a74a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">应用程序文件</strong></p><p id="6b67" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nb nc nd ne b">src/app/app-routing.module.ts</code>定义应用程序路线:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="72d4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nb nc nd ne b">''</code>(索引路线)在上面代码的第5–9行定义，<code class="fe nb nc nd ne b">'/one'</code>在第10–13行定义，<code class="fe nb nc nd ne b">'/two'</code>在第14–17行定义。它们都是延迟加载的(第8、12和16行)。</p><p id="8260" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nb nc nd ne b">src/app/app.component.html</code>定义应用的UI，如下图所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="f9fd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">顶部有三个链接:<code class="fe nb nc nd ne b">Home</code>(上面代码的第1行)、<code class="fe nb nc nd ne b">One</code>(第2行)、<code class="fe nb nc nd ne b">Two</code>(第3行)。</p><p id="fa02" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第5行有一个换行。</p><p id="b09b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第7行是<code class="fe nb nc nd ne b">router-outlet</code>，它是select route组件的占位符。</p><p id="48b0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nb nc nd ne b">src/app/app.component.css</code>定义应用的CSS:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="e030" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">它只是在链接之间添加了<code class="fe nb nc nd ne b">5px</code>缺口。</p><h2 id="f9a1" class="nl la it bd lb nm nn dn lf no np dp lj ma nq nr ll me ns nt ln mi nu nv lp nw bi translated">3.运行应用程序以查看下载的包</h2><p id="09aa" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">运行应用程序:<code class="fe nb nc nd ne b">ng serve</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/2aacf937282254ad933a7afcabaec708.png" data-original-src="https://miro.medium.com/v2/resize:fit:282/format:webp/1*5Y5PoaXjvbUtvbgB0DmI0A.png"/></div></figure><p id="3d6d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是一个显示选择路线内容的基本应用程序。</p><p id="2786" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">由于使用了延迟加载，每个页面都会发送一个请求，请求对应的JavaScript包。我们使用Firefox作为浏览器来查看网络请求。</p><p id="6210" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">执行前清除缓存。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/ac80c23860f9d027a76cea3380961bed.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*igRWA91IEH1KQNIN1fLPFw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="63aa" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为什么选择Firefox？</p><p id="b8c5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">因为它的Network inspector有一个列<code class="fe nb nc nd ne b">transferred</code>，显示了为加载资源而实际传输的字节数，或者是一个关于为什么资源没有被传输的消息，可能是<code class="fe nb nc nd ne b">cached</code>。</p><p id="cbb9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下面是索引页面的截图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/68fd5938f5574f1633fc6563b83ece95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZfMyauRd5tGxFcgpfNcYbA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="ead0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于索引页面，上面的截图清楚地显示只下载了bundle，<code class="fe nb nc nd ne b">src_app_index_index_module_ts.js</code>。</p><h2 id="1ae9" class="nl la it bd lb nm nn dn lf no np dp lj ma nq nr ll me ns nt ln mi nu nv lp nw bi translated">4.创建预测分析文件routes.json</h2><p id="2b83" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">对于一个真实的应用来说，它很可能会使用一些跟踪和分析工具或机器学习模型。为简单起见，我们创建一个名为<code class="fe nb nc nd ne b">routes.json</code>的预测分析文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="f089" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在上面代码的第2行，它假设当前会话是<code class="fe nb nc nd ne b">'/'</code>。此后，用户访问了80个会话<code class="fe nb nc nd ne b">'/one'</code>(第3行)和20个会话<code class="fe nb nc nd ne b">'/two'</code>(第4行)。</p><p id="4fbe" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在第6行，它假设当前会话是<code class="fe nb nc nd ne b">'/one'</code>。此后，用户访问了90个会话<code class="fe nb nc nd ne b">'/'</code>(第7行)和10个会话<code class="fe nb nc nd ne b">'/two'</code>(第8行)。</p><p id="a95b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在第10行，它假设当前会话是<code class="fe nb nc nd ne b">'/two'</code>。此后，用户访问了90个会话<code class="fe nb nc nd ne b">'/'</code>(第11行)和10个会话<code class="fe nb nc nd ne b">'/one'</code>(第12行)。</p><h1 id="acce" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">扩展Angular CLI以配置Webpack</h1><p id="bdd0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在Angular 5中，有一个命令<code class="fe nb nc nd ne b">ng eject</code>，用于弹出底层Webpack配置进行定制。从Angular 6开始，此命令已被替换为使用构建器进行自定义。</p><pre class="kj kk kl km gt nx ne ny nz aw oa bi"><span id="5238" class="nl la it ne b gy ob oc l od oe">% <!-- -->npm i -D @angular-builders/custom-webpack</span></pre><p id="693e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nb nc nd ne b">@angular-builders/custom-webpack</code>成为<code class="fe nb nc nd ne b">package.json</code>中<code class="fe nb nc nd ne b"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/package-jsons-dependencies-in-depth-a1f0637a3129">devDependencies</a></code>的一部分:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="60d0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在<code class="fe nb nc nd ne b">angular.json</code>中，将<code class="fe nb nc nd ne b">builder</code>值从<code class="fe nb nc nd ne b">@angular-devkit/build-angular:browser</code>更新为<code class="fe nb nc nd ne b">@angular-builders/custom-webpack:browser</code>(下面代码中的第14行)，并将<code class="fe nb nc nd ne b">customWebpackConfig</code>添加到<code class="fe nb nc nd ne b">options</code>(第16–18行)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="f101" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在我们可以使用<code class="fe nb nc nd ne b">extend.webpack.config.js</code>在Webpack中设置Guess.js。</p><h1 id="96e4" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">在Angular应用中配置Guess.js</h1><p id="0c35" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">使用以下命令安装Guess.js包:</p><pre class="kj kk kl km gt nx ne ny nz aw oa bi"><span id="857d" class="nl la it ne b gy ob oc l od oe">%<!-- --> npm i -D guess-webpack guess-parser</span></pre><p id="8449" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nb nc nd ne b">guess-webpack</code>是一个包含Guess.js Webpack插件的包，<code class="fe nb nc nd ne b">guess-parser</code>是一个包含一组解析器来静态分析应用程序的包。</p><p id="d6e0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这两个包用于<code class="fe nb nc nd ne b">extend.webpack.config.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="2d62" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在上面代码的第9–11行，<code class="fe nb nc nd ne b">reportProvider</code>返回了<code class="fe nb nc nd ne b">GuessPlugin</code>将使用的分析数据，并使用这些数据构建了一个机器学习模型。在简化的情况下，它读取静态文件<code class="fe nb nc nd ne b">routes.json</code>。更常见的是，<code class="fe nb nc nd ne b">GA</code>用于指向Google Analytics视图ID，Guess.js从Google Analytics帐户获取数据并自动构建报告。</p><p id="823b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在第12–14行，<code class="fe nb nc nd ne b">runtime</code>设置运行时配置，其中<code class="fe nb nc nd ne b">delegate</code>是<code class="fe nb nc nd ne b">false</code>。它让Guess.js处理包预取。</p><p id="afec" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在第15–17行，<code class="fe nb nc nd ne b">routeProvider</code>将其调用委托给<code class="fe nb nc nd ne b">parseRoutes</code>，后者返回路由和JavaScript块之间的映射。</p><h1 id="2b29" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">使用Guess.js执行预测预取</h1><p id="2d83" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们在Angular应用程序中设置了Guess.js。预测预取仅在生产环境中有效。</p><p id="5f5a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">使用以下命令创建生产版本:</p><pre class="kj kk kl km gt nx ne ny nz aw oa bi"><span id="f394" class="nl la it ne b gy ob oc l od oe">% <!-- -->npm run build</span></pre><p id="407b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">转到<code class="fe nb nc nd ne b">dist</code>目录运行生产构建:</p><pre class="kj kk kl km gt nx ne ny nz aw oa bi"><span id="8f95" class="nl la it ne b gy ob oc l od oe">% <!-- -->cd dist/angular-guess &amp;&amp; <!-- -->s<!-- -->erve -s .</span></pre><p id="3063" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">转到Firefox浏览器，并清除缓存。</p><ul class=""><li id="ff4b" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">请访问索引页面:</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/0ca65f6c524ca20b48acbf204aa62c66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A1u-ewAE3aat3P2EQjudEQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="6415" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下载索引包<code class="fe nb nc nd ne b">159.40d7a09f1a145796.js</code>(粉色)。此外，<code class="fe nb nc nd ne b">one</code>包<code class="fe nb nc nd ne b">248.e52910797ae356c5.js</code>(红色)已预装，启动器为<code class="fe nb nc nd ne b">other</code>。</p><p id="b97b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">基于预测分析文件<code class="fe nb nc nd ne b">routes.json</code>，当用户在<code class="fe nb nc nd ne b"><a class="ae ky" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a></code>时，他或她更有可能访问<code class="fe nb nc nd ne b">/one</code>而不是<code class="fe nb nc nd ne b">/two</code>。</p><pre class="kj kk kl km gt nx ne ny nz aw oa bi"><span id="f968" class="nl la it ne b gy ob oc l od oe">"/": {<br/>  "/one": 80,<br/>  "/two": 20<br/>}</span></pre><p id="e69c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">因此，<code class="fe nb nc nd ne b">http://localhost:3000/</code>下载<code class="fe nb nc nd ne b">/</code>和<code class="fe nb nc nd ne b">/one</code>的包，但不下载<code class="fe nb nc nd ne b">/two</code>的包。</p><ul class=""><li id="0462" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">点击链接<code class="fe nb nc nd ne b">One</code>，进入<code class="fe nb nc nd ne b">/one</code>:</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/35a69761cf208e0af4972bc75fd04a45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e2DE7d3jDBFk6uRddxUqiQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="5f01" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">预加载的包<code class="fe nb nc nd ne b">248.e52910797ae356c5.js</code>(绿色)作为<code class="fe nb nc nd ne b">cached</code>下载。</p><p id="dec3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">基于预测分析文件<code class="fe nb nc nd ne b">routes.json</code>，当用户在<code class="fe nb nc nd ne b"><a class="ae ky" href="http://localhost:3000/one." rel="noopener ugc nofollow" target="_blank">http://localhost:3000/one</a></code> <a class="ae ky" href="http://localhost:3000/one." rel="noopener ugc nofollow" target="_blank">时，他或她更有可能访问<code class="fe nb nc nd ne b">/</code>而不是<code class="fe nb nc nd ne b">/two</code>。</a></p><pre class="kj kk kl km gt nx ne ny nz aw oa bi"><span id="98b6" class="nl la it ne b gy ob oc l od oe">"/one": {<br/>  "/": 90,<br/>  "/two": 10<br/>}</span></pre><p id="ec8e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nb nc nd ne b">/</code>的捆绑包已经下载，不需要预加载<code class="fe nb nc nd ne b">/two</code>的捆绑包。</p><ul class=""><li id="ab57" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">点击链接<code class="fe nb nc nd ne b">Two</code>，转到<code class="fe nb nc nd ne b">/two</code>:</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/e0bf18b8402272da7ec7d344868e48c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KeZbYaVOCzj5xqWF_l6nQQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="e4ad" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">包<code class="fe nb nc nd ne b">628.a486e5775634c464.js</code>(橙色)被下载。</p><p id="20b2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">基于预测分析文件<code class="fe nb nc nd ne b">routes.json</code>，当用户在<code class="fe nb nc nd ne b"><a class="ae ky" href="http://localhost:3000/two." rel="noopener ugc nofollow" target="_blank">http://localhost:3000/two</a></code> <a class="ae ky" href="http://localhost:3000/two." rel="noopener ugc nofollow" target="_blank">时，他或她更有可能访问<code class="fe nb nc nd ne b">/</code>而不是<code class="fe nb nc nd ne b">/one</code>。</a></p><pre class="kj kk kl km gt nx ne ny nz aw oa bi"><span id="7113" class="nl la it ne b gy ob oc l od oe">"/two": {<br/>  "/": 90,<br/>  "/one": 10<br/>}</span></pre><p id="4cf8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">已经下载了<code class="fe nb nc nd ne b">/</code>的包，不需要预加载<code class="fe nb nc nd ne b">/one</code>的包。</p><p id="35ec" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">至此，所有的包都已经下载完毕。</p><p id="03b8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">Guess.js智能地执行下载或预加载。以下视频捕捉到了上述过程:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol oh l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者提供的视频</p></figure><p id="8428" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">完整的代码驻留在<a class="ae ky" href="https://github.com/JenniferFuBook/angular-guess" rel="noopener ugc nofollow" target="_blank">这个库</a>中。</p><h1 id="2234" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="57ad" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Guess.js是一个JavaScript库和工具，用于自动化预测预取过程。我们评估了它在角度应用中的工作原理。预测预取在Angular应用程序中备受好评，我们期待这种创新方法很快正式发布。</p><p id="c832" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">感谢阅读。</p><pre class="kj kk kl km gt nx ne ny nz aw oa bi"><span id="fd96" class="nl la it ne b gy ob oc l od oe"><strong class="ne iu">Want to Connect?</strong></span><span id="0108" class="nl la it ne b gy om oc l od oe">If you are interested, check out <a class="ae ky" href="https://jenniferfubook.medium.com/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">my directory of web development articles</a>.</span></pre></div></div>    
</body>
</html>