<html>
<head>
<title>WWDC22: Create a SwiftUI Chart With a Form For Changing Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">WWDC22:使用用于更改数据的表单创建SwiftUI图表</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/wwdc22-create-a-swiftui-chart-with-a-form-for-changing-data-9d6a16db9a10?source=collection_archive---------11-----------------------#2022-06-07">https://betterprogramming.pub/wwdc22-create-a-swiftui-chart-with-a-form-for-changing-data-9d6a16db9a10?source=collection_archive---------11-----------------------#2022-06-07</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="4cde" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">苹果在iOS 16中已经很容易将图表创建为SwiftUI视图</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/6af86ae55fb7abddaed1f03138deae8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vr-z3oqk8g1urfYWptVyWw.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图片由<a class="ae kz" href="https://pixabay.com/users/stocksnap-894430/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=925900" rel="noopener ugc nofollow" target="_blank"> StockSnap </a>从<a class="ae kz" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=925900" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>获取</p></figure><p id="9ebc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">昨天，在苹果WWDC的第一天，图表在平台联盟中被介绍。这应该是一种有趣的可视化数据的方式，尤其是在widgets和Apple Watch上。本教程将介绍使用条形图和折线图的基础知识，但许多其他图表的工作方式类似。</p><p id="3bce" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我要创建的第一个视图是<code class="fe lw lx ly lz b">ValueOptionsView</code>。这是一个相当简单的视图，将显示用于更改单个数据点的控件。它允许更改值的标题，也允许更改值本身。这是由一个<code class="fe lw lx ly lz b">Stepper</code>的<code class="fe lw lx ly lz b">Label</code>完成的，它包含一个用于修改标题的<code class="fe lw lx ly lz b">TextField</code>，以及一个简单的用于显示当前值的<code class="fe lw lx ly lz b">Text</code>。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ma mb l"/></div></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ma mb l"/></div></figure><p id="75aa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">数据在<code class="fe lw lx ly lz b">ContentView</code>中可用，但并不存储。</p><p id="657b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">一个名为<code class="fe lw lx ly lz b">data</code>的计算属性提供了三个<code class="fe lw lx ly lz b">ChartData</code>实例，所有这些实例都从可以更改的<code class="fe lw lx ly lz b">@State</code>属性中获取值。换句话说，每次视图被重画时，一个新版本的数组被创建，并带有由图表下面的每个<code class="fe lw lx ly lz b">Stepper</code>和<code class="fe lw lx ly lz b">TextField</code>提供的最新值。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ma mb l"/></div></figure><p id="fce5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">所有条形图的前景样式都设置为红色。</p><p id="cd5d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">输入到每个<code class="fe lw lx ly lz b">TextField</code>中的标题应该出现在条形图的底部，而使用<code class="fe lw lx ly lz b">Stepper</code>应该允许您修改条形图的高度。如果您使用的是设备而不是模拟器，键盘可以用Cmd + K切换，键盘上的return键应该会将其从视图中删除。</p><p id="eced" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">需要注意的重要一点是，图表数据必须是<code class="fe lw lx ly lz b">Identifiable</code>。</p><p id="5d7b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">该代码基于苹果文档中的一个例子，该例子没有使用符合<code class="fe lw lx ly lz b">Identifiable</code>的结构，因此当前不能编译。</p><p id="8eee" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">用同样的方法创建折线图也很容易，只需像以前一样传递相同的数据:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ma mb l"/></div></figure><p id="47cb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">甚至可以在同一个图表上同时显示条形图和折线图。当我尝试的时候，我把线条和线条标记放在什么顺序似乎并不重要。我似乎总是以栏杆在顶上而告终。你也许能算出来，但我意识到标记可以被赋予不透明度，所以可以把线条做成半透明的，这样你就能看到下面的线条:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ma mb l"/></div></figure><p id="b35f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">可以用<code class="fe lw lx ly lz b">.chartLegend(.hidden)</code>隐藏图表图例，也可以将其设置为<code class="fe lw lx ly lz b">.automatic</code>或<code class="fe lw lx ly lz b">.visible</code>。您可以分别使用<code class="fe lw lx ly lz b">.chartXAxis()</code>和<code class="fe lw lx ly lz b">.chartYAxis()</code>来切换X轴和Y轴的可见性。</p><p id="1e84" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">图表区域的背景可以用一个可以访问图表代理的闭包来定制:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ma mb l"/></div></figure><p id="4051" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">正如你在<code class="fe lw lx ly lz b">.onAppear</code>修改器中看到的，<code class="fe lw lx ly lz b">ChartProxy</code>对象附带了几个有用的函数和属性，可以帮助你为图表制作更复杂的背景。</p><p id="de56" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">试试其他图表类型，看看你能做些什么！</p></div></div>    
</body>
</html>