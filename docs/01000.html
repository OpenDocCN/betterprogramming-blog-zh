<html>
<head>
<title>How To Use Vuex to Store State in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中使用Vuex存储状态</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-vuex-to-store-state-490fabf4f6d7?source=collection_archive---------8-----------------------#2019-08-05">https://betterprogramming.pub/how-to-use-vuex-to-store-state-490fabf4f6d7?source=collection_archive---------8-----------------------#2019-08-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0235" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你对小猫的选择能透露你住在哪里吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3c9d4586e6320f4c984b8cb06d57642c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8_3Yb5vuyxmOvOdSko7MDQ.png"/></div></div></figure><p id="65c3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将数据存储在中央位置对于复杂的前端应用程序至关重要。否则，数据会分散到各处，并且必须在组件之间传递。</p><p id="294c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您使用像<a class="ae lq" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>、<a class="ae lq" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular </a>或<a class="ae lq" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>这样的框架，这一点尤其重要。这三个框架将应用程序分成组件，如果你想以一种特别的方式共享数据，你必须在它们之间传递数据。</p><p id="124c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">React在组件之间只有单向绑定，所以只能沿着组件树向下传递数据。在任何情况下，如果你有大量的数据要传递，很快就会变得混乱。</p><p id="1e8d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这一部分，我们将编写一个小游戏，应用程序获取您的当前位置，并向您显示猫的图片。该应用程序会问你问题，你可以通过点击是和否按钮来来回回。</p><p id="17f6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">数据存储将跟踪您正在哪个页面，以便您可以向前和向后移动。</p><p id="5474" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将使用<a class="ae lq" href="https://vuex.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vuex </a>来存储应用程序的中央状态。它是Vue.js应用程序最流行的状态管理库，由Vue.js开发人员自己提供支持。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="a1ae" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">入门指南</h1><p id="db32" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">首先，我们需要安装Vue CLI来简化应用程序的构建。它包含一个开发服务器和生成样板代码的脚本。</p><p id="28d2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">运行<code class="fe mv mw mx my b">npm install -g @vue/cli</code>进行全局安装。</p><p id="76ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，我们运行<code class="fe mv mw mx my b">vue create geokittyjs</code>来搭建我们的应用程序。</p><p id="4ba8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">之后，我们可以运行开发服务器，通过运行<code class="fe mv mw mx my b">npm run serve</code>来显示我们的应用程序。当我们更新代码时，它会自动刷新浏览器。</p><p id="9e75" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们通过运行<code class="fe mv mw mx my b">npm i yuex vue-material vue-router superagent</code>来安装我们的支持库。</p><ul class=""><li id="239e" class="mz na it kw b kx ky la lb ld nb lh nc ll nd lp ne nf ng nh bi translated"><a class="ae lq" href="https://vuematerial.io/" rel="noopener ugc nofollow" target="_blank"> Vue Material </a>让我们的app看起来很好看。</li><li id="91a1" class="mz na it kw b kx ni la nj ld nk lh nl ll nm lp ne nf ng nh bi translated">Vuex是状态管理库。</li><li id="9dfb" class="mz na it kw b kx ni la nj ld nk lh nl ll nm lp ne nf ng nh bi translated"><a class="ae lq" href="https://router.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue Router </a>是路由库，用于将URL路由到我们的页面组件。</li><li id="b22f" class="mz na it kw b kx ni la nj ld nk lh nl ll nm lp ne nf ng nh bi translated"><a class="ae lq" href="https://visionmedia.github.io/superagent/" rel="noopener ugc nofollow" target="_blank"> SuperAgent </a>是我们将使用的HTTP客户端。</li></ul></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="f91f" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">编码</h1><p id="ffa4" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">现在我们准备编码。</p><p id="4551" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，我们给<code class="fe mv mw mx my b">index.html</code>添加<a class="ae lq" href="https://material.io/resources/icons/" rel="noopener ugc nofollow" target="_blank">材质图标</a>得到漂亮的图标，就像这样:</p><pre class="kj kk kl km gt nn my no np aw nq bi"><span id="8114" class="nr lz it my b gy ns nt l nu nv">&lt;link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,500,700,400italic|Material+Icons"&gt;</span></pre><p id="def7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，我们编写应用程序的逻辑部分。我们从一些基本常数开始。我们把它们都放在<code class="fe mv mw mx my b">src/constants.js</code>里以便于存取。</p><p id="36e1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在那里，添加:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="0c7d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">稍后我们的API调用需要它们。</p><p id="124f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，我们创建数据存储来存储我们在<code class="fe mv mw mx my b">src/store/store.js</code>中的数据:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="8122" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将存储我们所处的应用程序阶段，以便我们知道去哪个页面。上面的代码是状态管理魔法发生的地方。</p><p id="4c7e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，我们可以创建组件了。我们将创建您将看到的页面。</p><p id="e7a8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mv mw mx my b">src/components</code>中，添加一个名为<code class="fe mv mw mx my b">City.vue</code>的文件，并放入以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="c71c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，创建一个名为<code class="fe mv mw mx my b">Continent.vue</code>的文件，并添加:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="4b34" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，创建一个名为<code class="fe mv mw mx my b">Country.vue</code>的文件并添加:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="7c74" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">创建一个名为<code class="fe mv mw mx my b">Disappoint.vue</code>的文件，并添加:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="aa28" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，创建一个名为<code class="fe mv mw mx my b">Home.vue</code>的文件，并:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="085b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">代码的逻辑如下——我们从第一个API调用中获取您的公共IP地址，然后，它可以从中获取您的位置数据。</p><p id="b92c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在模板中，我们检查在下面的逻辑中返回的状态，在<code class="fe mv mw mx my b">computed</code>属性中:</p><pre class="kj kk kl km gt nn my no np aw nq bi"><span id="6bae" class="nr lz it my b gy ns nt l nu nv">count() {<br/>  return store.state.count;<br/>}</span></pre><p id="596f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">每当状态更新时，<code class="fe mv mw mx my b">count</code>函数将返回最新值。无论什么是自动更新的，你都可以把它放在<code class="fe mv mw mx my b">computed</code>属性中。</p><p id="457a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在我们创建的<code class="fe mv mw mx my b">Region.vue</code>中，添加:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="f71c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">其余部分以类似的方式创建。</p><p id="c850" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们创建了<code class="fe mv mw mx my b">WhereCity.vue</code>、<code class="fe mv mw mx my b">WhereContinent.vue</code>、<code class="fe mv mw mx my b">WhereCountry.vue</code>、<code class="fe mv mw mx my b">WhereRegion.vue</code>和<code class="fe mv mw mx my b">Win.vue</code>。</p><p id="ef6f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mv mw mx my b">WhereCIty.vue</code>中，我们添加:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="5d75" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mv mw mx my b">WhereContinent.vue</code>中，我们添加:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="ab68" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mv mw mx my b">WhereCountry.vue</code>中，我们添加:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="54bd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mv mw mx my b">WhereRegion.vue</code>中，我们添加:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="b407" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，在<code class="fe mv mw mx my b">Win.vue</code>中，我们加上:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="46f0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">注意，在每个文件中，我们都有一个对<code class="fe mv mw mx my b">store.commit</code>的调用。这是状态更新的地方。</p><p id="4062" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在所有文件中，如果模板中引用了图像，您可以将同名的猫图片添加到模板中引用的文件夹中。</p><p id="62aa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，在<code class="fe mv mw mx my b">src/router/index.js</code>中，我们注册我们的组件和库，这样我们就可以在应用的其他部分使用它们，就像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="56f9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，我们得到这样的东西:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3c9d4586e6320f4c984b8cb06d57642c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8_3Yb5vuyxmOvOdSko7MDQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/4a43f52a7b2ba063cefcf2791717ee5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g0XqwZT7mXQMO1BKKcvNmQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/8eaa889af76e7bf7012e36b4130cbc7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g7QeeMfpcXkN-Y9w2kFwOg.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/afb3e128882ec5131c9a3015ae2499da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XeumD_twJ_2OyLqVSKUIDA.png"/></div></div></figure></div></div>    
</body>
</html>