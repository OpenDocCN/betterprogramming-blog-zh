# 揭开 JavaScript 中现代解构的神秘面纱

> 原文：<https://betterprogramming.pub/demystifying-modern-destructuring-in-javascript-918295756b1f>

## 证明析构是每个开发人员都欢迎的伴侣

![](img/fe9913219203098a12aefe9126c45da6.png)

照片由[法比安·格罗斯](https://unsplash.com/@grohsfabian?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 拍摄

ES6 的发布带来了许多非常棒的特性，这些特性改变了我们用 JavaScript 编写代码的方式，比如 rest/spread 操作符、let 和 const、模板文字、箭头函数、析构、类等等。

从那时起，利用这些特性的力量来改进和简化我们编写的程序就成了每个开发人员的目标。在这篇文章中，我们将讨论析构赋值。

析构赋值语法是一个 JavaScript 表达式，它可以将数组中的值或对象中的属性解包到不同的变量中。

简单地说，析构使我们更容易将数组中的值或对象中的属性一次赋给变量，并在程序中的任何地方使用。

有人可能会问，为什么我会对此感兴趣？

让我们考虑一个流行的用例，它展示了为什么析构确实是每个开发人员都欢迎和非常需要的伙伴，特别是考虑到我们经常发现自己处于这种情况。

假设我们有一个显示某个开发人员信息的页面。如果数据结构是一个对象，下面是我们在 ES6 析构之前如何处理这种情况的代码片段。

下面是数据结构是数组的场景的代码片段。

咻，相当多的代码，嗯！从上面的片段可以清楚地看出，当我们想要从数组/对象中提取数据时，我们必须一遍又一遍地做同样的事情。

现在，假设我们有一个大型应用程序，这可能会变得繁琐、乏味和重复。

进入 ES6 销毁作业，这里为您提供更好的服务！

因此，让我们来看看如何以 ES6 的方式处理上述场景。首先，我们将讨论对象析构，然后我们将讨论数组析构，并查看一些技巧，以帮助我们在今后的项目中更好地使用析构赋值。

# 对象析构

这包括将对象中的属性解包，并将它们分配给单独的变量。

对于对象析构，我们在赋值表达式的左边使用一个对象文字。

让我们看看如何使用对象析构语法，使用对象上相应的键将对象的值赋给变量`firstName`、`lastName`、`stack`、**、**和`country`。

上面的代码片段向我们展示了对象析构的最基本形式。尽管如此，还有几个其他的用例，我们可以使用与上面相同的语法来使我们的代码更干净，可读性更好。

让我们考虑几个例子。

# **新的或不同的变量名**

当析构对象时，通常的做法是将对象值赋给与该对象中对应的键同名的变量，但也有这样的情况，我们打算将对象的值存储在一个变量中，但名称与值的对象键不同。

析构为我们轻松地解决了这个问题。考虑下面的片段:

从上面的例子中，我们可以看到，可以创建局部变量，并将它们映射到我们希望保存其值的相应对象属性或键。

# **默认值**

通常，在使用特定的键访问值之前，我们倾向于知道对象中包含的对象键。但是如果我们试图访问一个被析构的对象中不存在的键呢？

是的，你猜对了，我们一定会得到一个`‘undefined’`返回。可以将默认值赋给一个变量，这样，如果这个键在被析构的对象上不存在，就会返回所赋的默认值。

让我们考虑两个例子。

1.  没有分配默认值，因此未定义:

2.将`arsenal`的默认值分配给`club`，将`49`的默认值分配给`age`:

我们给`club` 和`age`变量分配了默认值。由于它们原本不存在于`user` 对象上，`arsenal`和`25`分别从`club`和`age`变量中返回，而不是未定义。

值得注意的是:

> “属性既可以 1)从对象中解包并赋给不同名称的变量，也可以 2)在解包值未定义的情况下赋给默认值。”— MDN 文档

从 [MDN 文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)中摘录的上述引文进一步表明，每当我们处理对象析构时，我们可以将前面陈述的两个用例组合在一起，即一次性为析构的对象设置新变量和默认值。

下面是一个简单的例子:

# **访问嵌套对象值**

还记得我们的第一段代码吗？是的，它包含我们所说的嵌套对象，即包含一个对象或一个对象的对象。我们的`stacks`对象嵌套在我们的`developer`对象中。

那么，如果我们想把开发者的 CSS 和 JavaScript 评分赋给局部变量呢？你可能想知道，我们如何使用嵌套对象析构来实现这一点？

让我们看一个例子:

这里，我们创建了三个变量。`fullName`也定义在`developer`对象上，我们使用嵌套对象析构从嵌套的`stacks` 对象中取出`css`和`javascript`值，然后分别存储在`myCss`和`myJs`变量中。

# **物体被其余物体破坏**

ES6 版本的另一个很棒的特性是`rest`操作符，它可以无缝地用于对象析构。这种情况的用例是当一个对象中只有一两个键被析构到一个变量中，而其余的键被解包到一个变量中。

这意味着`rest`属性(可以被命名为任何东西)收集剩余的自己的可枚举属性键，这些键还没有被析构模式挑选出来。

让我们看一个简单的例子:

当你试图在你的程序中析构对象时，这些是你会发现的一些用例。将我们目前为止在本文中学到的东西放在一起，让我们重写第一个代码片段，ES6 对象析构方式。

给你，忍者！接下来，我们将讨论数组析构。

# **破阵**

根据我们对对象析构的初步了解，我们有一个同样简单的方法来从数组中解包值。

虽然有相似之处，但重要的是要注意，我们在数组析构中在赋值表达式的左侧使用数组文字，数组文字上声明的每个变量名都映射到析构数组上相同索引处的相应项。

还记得我们的第一个代码片段吗？在这里，我们必须以单独的数组索引为目标来访问数组中的数据。数组析构帮助我们避免重复这个过程。

让我们考虑一个例子来理解这一点:

这里，我们使用数组析构语法将数组中的值分配给局部变量:`name`、`phoneNumber`、`emailAddress`和`company`。

您会注意到变量是从左到右设置的，这意味着第一个变量获取数组中的第一项(在索引 0 处)，第二个变量获取数组中的第二项(在索引 1 处)，依此类推。

因此，每个变量都被映射到`bioData`数组上相同索引处的对应项。

我们上面看到的代码片段向我们展示了数组析构的最基本形式，但是让我们考虑一些其他的用例，当我们在程序中处理析构数组时，我们可以使用上面的语法。

# **跳过数组中的项目**

您可能会发现自己只想获取数组中的第一项、第二项和第四项。如何将这些特定的项存储到变量中？

使用数组析构，也可以做到这一点。请看下面的例子:

你知道刚刚发生了什么吗？我们从数组中取出值，并将它们存储在变量中，但是通过在我们跳过的索引处添加逗号分隔符`,`跳过了我们不需要的值。简单对吗？

让我们再举一个例子:

这里，我们甚至使用逗号分隔符`,` 跳过了数组中的两个值，只将第一个和最后一个值存储到变量中。因此，如果您需要跳过数组中的一项或多项，只需使用逗号。

# **用 Rest 析构数组**

这是数组和对象析构的几个共同点之一。

基本上，我们使用`rest`操作符，在一些数组项被赋值给变量后，将数组中任何未打包的项保存到一个变量中。我们该怎么做？

从上面的代码中，我们将第一项和第三项分别分配给变量`name` 和`codeName`，之后我们使用`rest`操作符语法将剩余的项分配给`otherData`变量。

需要注意的是，如果你在析构的时候使用 rest 操作符，就像上面的例子，它必须总是作为析构数组的最后一项出现，否则将会抛出一个错误。

# **默认值**

这是数组析构和对象析构的另一个相似之处。我们为变量赋予默认值，以防从给定数组中提取的值未定义。

这意味着，即使在数组中没有找到相应的项，我们分配的默认值也将是输出。考虑下面的例子:

如你所见，`userInfo`数组中没有第三项，但是在数组析构中我们可以设置一个默认值，这样`age`变量输出`75`而不是`undefined`。

# **函数析构**

如果你的程序中有一个函数返回一个数组，而你想析构这个数组，该怎么办？

如果您是 React 开发人员，这是您在使用 React 挂钩或制作自己的定制挂钩时会碰到的一个用例。

不用担心，通过数组析构，您可以从函数返回的数组中提取数据。让我们看一个例子:

# **访问嵌套数组值**

我们已经考虑了如何访问嵌套的对象值。同样，对于包含嵌套数组的数组，我们也可以实现嵌套析构。

我们通过使用嵌套析构数组文本将数组中相应的项赋给局部变量来实现这一点。让我们考虑一个简单的例子:

从上面的代码中，我们可以看到我们如何将`serviceData`数组中的第一项分配给`dentist`变量，然后使用嵌套数组析构将项分配给`radiologist`、`biologist`和`optician`变量。

我们甚至使用了本文前面学到的一个很好的数组析构工具，跳过了`serviceData`数组中第一个嵌套数组中的一项。

这些是在 JavaScript 中试图析构数组时会发现的许多用例中的一部分。感觉你刚刚获得了一种超能力，是吗？是啊！

所以，让我们再一次重写或者甚至摆弄第一个代码片段，ES6 数组析构方式。

你看到我们在那里做的了吗，光滑的权利？

# 结论

您已经完成了本教程的结尾部分，在这里我们探讨了 ES6 析构语法以及在代码中应用它的几种方法。

我相信你会同意我的观点，拥有扎实的 ES6 析构知识可以让我们避免编写重复和不必要的代码行，并节省时间。

感谢阅读和快乐编码。