<html>
<head>
<title>How to Load Images Progressively in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中渐进加载图像</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-load-images-progressively-in-react-a320e5572c15?source=collection_archive---------13-----------------------#2020-04-22">https://betterprogramming.pub/how-to-load-images-progressively-in-react-a320e5572c15?source=collection_archive---------13-----------------------#2020-04-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cf55" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">像流行的网络和移动应用程序那样加载图像</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/23fddac504259fb1e74529c28915d489.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dd6E3LUfBunHcJtUFQWupQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">杰克·威里克在<a class="ae ky" href="https://unsplash.com/s/photos/photos?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="2072" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们都喜欢中载图像的方式。我一直希望我的网站上的图片能够以同样的方式加载。我花了一段时间才明白这是怎么做到的，但是一旦我深入了解，我意识到创建一个渐进加载的图像是很简单的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/0942e2c5aea44b8e948bf0ce0cbd12ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*W8Lo_UQ8HB3tuGxgqKhifA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">看它有多酷！</p></figure><p id="1209" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">渐进式图像加载也提供了更好的用户体验，减少了网站的加载时间。在本文中，我将为渐进式图像加载制作一个可重用的react组件。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="9ba6" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">这是怎么做到的</h1><p id="236d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">最初，我们将图像的<code class="fe na nb nc nd b">src</code>设置为占位符图像，即原始图像的低分辨率版本。同时，我们开始异步加载原始图像。当加载原始图像时，我们将图像的<code class="fe na nb nc nd b">src</code>从占位符图像替换为原始图像。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/adeaa56b49f939c7128ca6e191aa8f0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K6Am-Q1b3wBNFcXU9_BoTg.png"/></div></div></figure><p id="4a0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过调整原始图像的大小来制作占位符图像，同时保持其纵横比。在我的例子中，<code class="fe na nb nc nd b">image.jpg</code>的尺寸是2848x4288像素。我把它的大小调整为5x8像素，这导致了一个只有几个字节的占位符图像。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/18365de9e81531942d15a0ba75fa10d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*BVcapcPPyc0GJ3cN89fdpw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在Windows中调整图像大小很容易</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="02b8" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">制作组件</h1><p id="c36a" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">现在我们知道了制造组件更容易的理论。我将我的组件命名为<code class="fe na nb nc nd b">ProgressiveImage</code>，并执行了以下操作:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ProgressiveImage.js</p></figure><h2 id="68cd" class="nh me it bd mf ni nj dn mj nk nl dp mn li nm nn mp lm no np mr lq nq nr mt ns bi translated">下面是组件中发生的情况</h2><p id="5bb8" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">首先，组件的<code class="fe na nb nc nd b">constructor</code>被调用，它将图像的当前<code class="fe na nb nc nd b">src</code>设置为低分辨率的占位符图像。然后调用组件的<code class="fe na nb nc nd b">render</code>方法，呈现占位符图像。此时，用户会看到模糊的图像。</p><p id="a89e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，我们最喜欢的生命周期方法<code class="fe na nb nc nd b">componentDidMount</code>被调用，我们开始加载原始图像。一旦加载了原始图像，就会调用一个函数，告诉组件原始图像已加载，并将图像的src更新为状态中的原始图像。</p><p id="8c1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果，组件被重新渲染，图像的<code class="fe na nb nc nd b">src</code>被原始图像替换。此时，模糊图像被原始图像取代。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7dea" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">组件使用</h1><p id="15c7" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">导入<code class="fe na nb nc nd b">ProgressiveImage</code>，使用方法如下:简洁明了:</p><pre class="kj kk kl km gt nt nd nu nv aw nw bi"><span id="bfa6" class="nh me it nd b gy nx ny l nz oa">&lt;ProgressiveImage<br/>  src="original-image.jpg"<br/>  placeholder="image-placeholder.jpg"<br/>/&gt;</span></pre><p id="e518" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果需要可以给一个<code class="fe na nb nc nd b">alt</code>道具，默认为<code class="fe na nb nc nd b">''</code>。</p><h2 id="6688" class="nh me it bd mf ni nj dn mj nk nl dp mn li nm nn mp lm no np mr lq nq nr mt ns bi translated">一个工作实例</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob ng l"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="01cb" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">包扎</h1><p id="fb2f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">正如承诺的那样，在介质上制作渐进加载图像并不困难。另外一个可以添加的功能是延迟加载，图像只有在浏览器的视窗中才会被加载。让我知道，如果你想让我修改这篇文章，以包括懒惰加载图像。</p><p id="53ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你能从这篇文章中得到一些有用的东西。</p></div></div>    
</body>
</html>