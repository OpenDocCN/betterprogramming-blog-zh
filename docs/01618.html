<html>
<head>
<title>How to Make RecyclerView Items That Expand With Animation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使RecyclerView项目随着动画展开</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/recyclerview-expanded-1c1be424282c?source=collection_archive---------2-----------------------#2019-09-30">https://betterprogramming.pub/recyclerview-expanded-1c1be424282c?source=collection_archive---------2-----------------------#2019-09-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="953d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><strong class="ak"> <em class="kf">构建简单、漂亮的过渡，在你的应用中向用户展示更多数据</em> </strong></h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi kg"><img src="../Images/4fb65c71975ae27134bea4f92cb1166b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*cHw5qhnogQdKqrpZdCDljw.png"/></div></figure><blockquote class="ko"><p id="b65b" class="kp kq iq bd kr ks kt ku kv kw kx ky dk translated"><strong class="ak"><em class="kf"/></strong>任何停止学习的人都是老了，无论是二十岁还是八十岁。<strong class="ak"><em class="kf">”——亨利·福特</em> </strong></p></blockquote><p id="6bb4" class="pw-post-body-paragraph kz la iq lb b lc ld jr le lf lg ju lh li lj lk ll lm ln lo lp lq lr ls lt ky ij bi translated">之前写过一篇关于<a class="ae lu" href="https://medium.com/better-programming/android-recyclerview-with-beautiful-animations-5e9b34dbb0fa" rel="noopener"> RecyclerView的文章，配有精美的动画</a>，都是关于RecyclerView的物品入口动画。现在，在本教程中，我们将学习如何使RecyclerView项目可以用动画扩展。听起来很有趣？让我们看看我在说什么。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lv"><img src="../Images/ed9b6d413938d02323a4770d7f094ca0.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/1*WwQXz72Du5ichUZd45v_-Q.gif"/></div></div></figure><p id="5454" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">通过点击小箭头，每个项目下的额外布局变得可见。你可以把任何额外的信息放在那里。还可以看到布局的折叠和展开以及小箭头每次旋转的流畅动画。</p><p id="e21b" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">我们开始吧！</p><p id="1ef8" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">如果你不知道如何开始使用RecyclerView，我强烈建议你去看看这个官方的<a class="ae lu" href="https://developer.android.com/guide/topics/ui/layout/recyclerview" rel="noopener ugc nofollow" target="_blank">文档</a>，这样你可能会对正在发生的事情有一个清晰的了解。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="7804" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated"><strong class="ak">第一步</strong></h1><p id="02cf" class="pw-post-body-paragraph kz la iq lb b lc ne jr le lf nf ju lh li ng lk ll lm nh lo lp lq ni ls lt ky ij bi translated">让我们创建一个新项目，并在您的<code class="fe nj nk nl nm b">build.gradle</code>文件中添加以下依赖项。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="nn no l"/></div><p class="np nq gj gh gi nr ns bd b be z dk translated">build.gradle</p></figure><p id="42f9" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">我通常使用数据绑定，所以让我们通过在<code class="fe nj nk nl nm b">android{}</code>下的<code class="fe nj nk nl nm b">build.gradle</code>中添加小代码来启用它。</p><pre class="kh ki kj kk gt nt nm nu nv aw nw bi"><span id="f312" class="nx mn iq nm b gy ny nz l oa ob">dataBinding{<br/>    enabled true<br/>}</span></pre><p id="181b" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">注意:如果你不知道这是数据绑定，你可以在这里查看。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="fd27" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">第二步</h1><p id="89b2" class="pw-post-body-paragraph kz la iq lb b lc ne jr le lf nf ju lh li ng lk ll lm nh lo lp lq ni ls lt ky ij bi translated">现在是时候做一个样板课了。把一个班级命名为<strong class="lb ir">人<em class="oc">。</em> </strong>复制并粘贴以下代码:</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="nn no l"/></div><p class="np nq gj gh gi nr ns bd b be z dk translated">Person.java</p></figure></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="586b" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">第三步</h1><p id="d373" class="pw-post-body-paragraph kz la iq lb b lc ne jr le lf nf ju lh li ng lk ll lm nh lo lp lq ni ls lt ky ij bi translated">让我们制作一个适配器来使RecyclerView工作。我正在制作一个叫做ExpendableRecyclerViewAdapter.java<em class="oc">的班级。</em>复制并粘贴以下代码:</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="bd24" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">为了表示每个项目，我制作了一个RecyclerView项目，如下所示。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi od"><img src="../Images/104fe7b93ddd9b19aa0c2b7332cc67b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*JgyJaFzf6sINhb47ywSx0A.png"/></div><p class="np nq gj gh gi nr ns bd b be z dk translated">item_expand.xml</p></figure><p id="8a42" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">复制并粘贴以下代码:</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="nn no l"/></div><p class="np nq gj gh gi nr ns bd b be z dk translated">item_expand.xml</p></figure><p id="e4ac" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">现在，让我们在进入动画部分之前，让我们的RecyclerView工作。</p><p id="3792" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">我的<code class="fe nj nk nl nm b">activity_main.xml</code>长这样:</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="nn no l"/></div><p class="np nq gj gh gi nr ns bd b be z dk translated">activity_main.xml</p></figure><p id="da88" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">在<code class="fe nj nk nl nm b">MainActivity.java</code>我将实现RecyclerView及其功能。为了做到这一点，我们需要一些虚拟数据。我在<code class="fe nj nk nl nm b">array.xml</code>的值文件夹里做了一些数组。您可以拥有虚拟数据，也可以拥有真实数据。复制并粘贴以下代码:</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="nn no l"/></div><p class="np nq gj gh gi nr ns bd b be z dk translated">MainActivity.java</p></figure><p id="7cdd" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">希望你能得到这个结果。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lv"><img src="../Images/44340589615469b3d6558cc569ec550f.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/1*-5c687DxGuNtDJqd8RMatA.gif"/></div></div></figure><p id="28e2" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">现在基本实现已经做好了。是时候添加一些动画了。让我们开始吧。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="93ff" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated"><strong class="ak">第四步</strong></h1><p id="f8a0" class="pw-post-body-paragraph kz la iq lb b lc ne jr le lf nf ju lh li ng lk ll lm nh lo lp lq ni ls lt ky ij bi translated">我正在制作一个名为<code class="fe nj nk nl nm b">animations</code>的包，在里面我正在制作一个名为<code class="fe nj nk nl nm b">Animations.java</code>的类。</p><p id="9bea" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">我们一步一步来。我将通过点击这个箭头来激活这个小箭头。为此，您需要在您的<code class="fe nj nk nl nm b">Animations.java</code>类中添加这一小段代码:</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="c89e" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">让我们编辑我们的适配器。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="c0bb" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">运行应用程序并点击箭头。它应该旋转。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/e002a4284e336ad1833e5e96e16f8613.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*DP0n1CN5j2Lvi2D8RNe3hw.gif"/></div><p class="np nq gj gh gi nr ns bd b be z dk translated">旋转箭头</p></figure></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="4582" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">第五步</h1><p id="e845" class="pw-post-body-paragraph kz la iq lb b lc ne jr le lf nf ju lh li ng lk ll lm nh lo lp lq ni ls lt ky ij bi translated">让我们实现一些功能，通过点击这个箭头来打开一个额外的布局。</p><p id="ecf4" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">为此，您需要在您的<code class="fe nj nk nl nm b">Animations.java</code>中添加几行代码。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="b978" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">同样，您需要编辑您的适配器。这一次你必须在你的<code class="fe nj nk nl nm b">toggleLayout</code>方法中添加一些代码。</p><pre class="kh ki kj kk gt nt nm nu nv aw nw bi"><span id="49ff" class="nx mn iq nm b gy ny nz l oa ob">private boolean toggleLayout(boolean isExpanded, View v, LinearLayout layoutExpand) {<br/>    Animations.<em class="oc">toggleArrow</em>(v, isExpanded);<br/>    if (isExpanded) {<br/>        Animations.<em class="oc">expand</em>(layoutExpand);<br/>    } else {<br/>        Animations.<em class="oc">collapse</em>(layoutExpand);<br/>    }<br/>    return isExpanded;<br/><br/>}</span></pre><p id="271d" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">现在，让我们运行应用程序，看看我们做了什么。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="a7d3" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">备案</h1><p id="0e78" class="pw-post-body-paragraph kz la iq lb b lc ne jr le lf nf ju lh li ng lk ll lm nh lo lp lq ni ls lt ky ij bi translated"><code class="fe nj nk nl nm b">toggleArrow()</code>:该方法帮助我们旋转调用视图类的animate()方法的箭头，并根据需要设置其持续时间。</p><p id="7842" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">在这个方法中，我们测量将要展开的布局的高度，并根据这个高度设置动画的持续时间。</p><p id="b24c" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated"><code class="fe nj nk nl nm b">collapse()</code>:折叠动作也一样，但是这次我们将布局可见性设置为<code class="fe nj nk nl nm b">GONE</code>而不是<code class="fe nj nk nl nm b">VISIBLE</code>。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h2 id="cceb" class="nx mn iq bd mo of og dn ms oh oi dp mw li oj ok my lm ol om na lq on oo nc op bi translated">您可以克隆该项目</h2><div class="oq or gp gr os ot"><a href="https://github.com/Mustufa786/recyclerViewCollapase" rel="noopener  ugc nofollow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd ir gy z fp oy fr fs oz fu fw ip bi translated">must ufa 786/recyclerviewcallapase</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">github.com</p></div></div><div class="pc l"><div class="pd l pe pf pg pc ph km ot"/></div></div></a></div><p id="b1ed" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated"><strong class="lb ir">关注</strong><a class="ae lu" href="https://medium.com/codixlab" rel="noopener"><strong class="lb ir">CodixLab</strong></a><strong class="lb ir">了解更多科技知识。</strong></p><p id="c1f8" class="pw-post-body-paragraph kz la iq lb b lc ma jr le lf mb ju lh li mc lk ll lm md lo lp lq me ls lt ky ij bi translated">觉得这篇文章有用？在媒介上跟随我<a class="ae lu" href="https://medium.com/u/8ee4abb8abb8?source=post_page-----1b8c9832af43----------------------" rel="noopener">穆斯塔法安萨里</a>。看看下面我读得最多的文章。</p><ul class=""><li id="947f" class="pi pj iq lb b lc ma lf mb li pk lm pl lq pm ky pn po pp pq bi translated"><a class="ae lu" href="https://medium.com/better-programming/android-copy-paste-7dd60ad47d0" rel="noopener">如何使用TextView在android中实现复制/粘贴功能？</a></li><li id="d13d" class="pi pj iq lb b lc pr lf ps li pt lm pu lq pv ky pn po pp pq bi translated">想要制作具有更多选项的动画浮动操作按钮？</li><li id="eb1c" class="pi pj iq lb b lc pr lf ps li pt lm pu lq pv ky pn po pp pq bi translated">用漂亮的动画制作RecyclerView！</li><li id="7256" class="pi pj iq lb b lc pr lf ps li pt lm pu lq pv ky pn po pp pq bi translated"><a class="ae lu" href="https://medium.com/better-programming/what-is-androidx-1b8c9832af43" rel="noopener">什么是AndroidX？</a></li></ul><h2 id="174f" class="nx mn iq bd mo of og dn ms oh oi dp mw li oj ok my lm ol om na lq on oo nc op bi translated"><a class="ae lu" href="https://www.facebook.com/codixlab/" rel="noopener ugc nofollow" target="_blank">喜欢我的脸书页面</a></h2></div></div>    
</body>
</html>