<html>
<head>
<title>Build a Chat App Interface With SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SwiftUI构建聊天应用程序界面</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-chat-app-interface-with-swiftui-96609e605422?source=collection_archive---------3-----------------------#2020-11-16">https://betterprogramming.pub/build-a-chat-app-interface-with-swiftui-96609e605422?source=collection_archive---------3-----------------------#2020-11-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bc15" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">现在每个应用程序都有消息功能。以下是如何快速在你的应用中加入信息</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9e70e6befc716bde592f2d3e2a7cbcaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UJGltqwcfMppihfjnbVXjQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用SwiftUI制作的聊天app。作者照片。</p></figure></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="6a3e" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">聊天模型</h1><p id="df84" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">让我们首先为气泡位置创建一个枚举。气泡可以在屏幕的右侧或左侧:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="511e" class="pw-post-body-paragraph lx ly it lz b ma mv ju mc md mw jx mf mg mx mi mj mk my mm mn mo mz mq mr ms im bi translated">现在，我们可以创建存储消息、气泡位置和用户输入文本的模型。在本教程中，我们将把最后一个聊天气泡的位置存储在一个变量中，这样我们就可以在左侧和右侧气泡位置之间进行切换:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="5527" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">聊天气泡</h1><p id="5465" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">我们需要利用<code class="fe na nb nc nd b">ViewBuilder</code>创建一个聊天气泡。在我们的<code class="fe na nb nc nd b">body</code>变量中，我们可以创建一个气泡形状。在本教程中，我们使用<code class="fe na nb nc nd b">RoundedRectangle</code>和一个箭头系统图像来制作泡泡形状。</p><p id="8b6c" class="pw-post-body-paragraph lx ly it lz b ma mv ju mc md mw jx mf mg mx mi mj mk my mm mn mo mz mq mr ms im bi translated">如果气泡在右边，那么聊天气泡不应该扩展到屏幕的左端，反之亦然。使用填充来控制气泡可以膨胀的程度。使用帧修改器调整气泡的对齐方式:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="aa2c" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">自定义滚动视图</h1><p id="303c" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">如果你想让你的<code class="fe na nb nc nd b">ScrollView</code>自动滚动，你可以使用下面由<a class="ae ne" href="https://stackoverflow.com/a/58708206" rel="noopener ugc nofollow" target="_blank"> Asperi提供的关于栈溢出</a>的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="2cc9" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">聊天结构</h1><p id="c014" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">现在，我们可以使用我们的模型和自定义的<code class="fe na nb nc nd b">ScrollView</code>来遍历消息并将它们添加到UI中。在<code class="fe na nb nc nd b">ChatBubble</code>内容闭包中，我们将有一个文本视图，它获取保存在我们的消息数组中的最后一条消息。</p><p id="afd5" class="pw-post-body-paragraph lx ly it lz b ma mv ju mc md mw jx mf mg mx mi mj mk my mm mn mo mz mq mr ms im bi translated">在我们的自定义<code class="fe na nb nc nd b">ScrollView</code>下，我们需要添加一个带有发送按钮的文本编辑器。我们使用文本编辑器而不是文本字段，因为我们不希望键盘上的return按钮关闭键盘。相反，我们希望它添加一个新行。</p><p id="2112" class="pw-post-body-paragraph lx ly it lz b ma mv ju mc md mw jx mf mg mx mi mj mk my mm mn mo mz mq mr ms im bi translated">在我们的按钮闭包内，当文本编辑器不为空时，我们需要将消息及其位置添加到模型的数组中，然后清空文本编辑器:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="a0a0" class="pw-post-body-paragraph lx ly it lz b ma mv ju mc md mw jx mf mg mx mi mj mk my mm mn mo mz mq mr ms im bi translated">最后，在我们的<code class="fe na nb nc nd b">ContentView</code>中添加<code class="fe na nb nc nd b">Chat</code>视图，并运行应用程序:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/5b51c94996561113850e8b6fe50a1d7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/1*Hte_102psw9ztRJxGBf1cw.gif"/></div></figure><p id="a999" class="pw-post-body-paragraph lx ly it lz b ma mv ju mc md mw jx mf mg mx mi mj mk my mm mn mo mz mq mr ms im bi translated">全部完成！感谢阅读。</p></div></div>    
</body>
</html>