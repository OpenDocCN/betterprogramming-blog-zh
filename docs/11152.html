<html>
<head>
<title>Enforce .NET Code Style With .editorconfig</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">强制执行。NET代码样式。编辑器配置</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/enforce-net-code-style-with-editorconfig-d2f0d79091ac?source=collection_archive---------7-----------------------#2022-02-22">https://betterprogramming.pub/enforce-net-code-style-with-editorconfig-d2f0d79091ac?source=collection_archive---------7-----------------------#2022-02-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8675" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在编辑器中保持一致的编码风格</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/eb6f64abc25d7b90ffdb62ffc8c6f91c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mOhZzNOPm5rIr-7E"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">ahin Sezer diner在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="415a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">拥有一个干净的代码库是必不可少的，说实话，没有人想阅读无结构和混乱的代码。清理善后工作既乏味又耗时，而且一点也不好玩。</p><p id="b7ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一些代码编辑器具有内置的清理功能，可以为您完成这项工作。当单独处理代码库时，这可能会工作得很好。然而，在团队中工作时，关键是要有一个通用的配置，不要用这个清理特性覆盖彼此的代码。</p><p id="a546" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">幸运的是，大多数ide都支持<a class="ae kv" href="https://editorconfig.org/" rel="noopener ugc nofollow" target="_blank">。editorconfig </a>在ide和开发者之间创造了一致性。</p><h1 id="ff90" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">添加。editorconfig到您的。网络项目</h1><p id="54b0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Visual Studio提供了一种将该文件添加到项目中的简便方法，并为您提供了更改配置的UI支持。或者，也可以不使用Visual Studio手动更改该文件。微软也提供了很好的模板。NET和C#开始。</p><p id="0909" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以按照以下步骤添加文件:</p><ol class=""><li id="543a" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">在Visual Studio的解决方案资源管理器中右击您的项目</li><li id="ba71" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">点击<em class="nd">【添加】</em></li><li id="da81" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">选择<em class="nd">“新项目”</em></li><li id="6969" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">搜索<em class="nd">“编辑器配置”</em></li><li id="7a9b" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">选择"<em class="nd"> editorconfig文件(。NET)"或</em> " <em class="nd"> editorconfig文件(C#)" </em></li></ol><p id="2b40" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该文件现在应该已经添加到您的项目中，并带有一些. NET的默认设置。双击该文件将打开一个视图，您可以在其中浏览预定义的设置并按照您喜欢的方式配置它。完成初始配置后，您应该提交并推动它与您的团队共享。</p><p id="c3cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong>您可能从一开始就没有完美的配置，有时这取决于您的团队如何工作。当发生变化时。对我来说，尽可能隔离变更，并要求每个团队成员都进行审核是很有价值的。这应该让人们意识到这些变化及其影响。</p><h1 id="3470" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">应用代码样式和清理</h1><h2 id="e673" class="ne lt iq bd lu nf ng dn ly nh ni dp mc lf nj nk me lj nl nm mg ln nn no mi np bi translated">在Visual Studio中运行它</h2><p id="7bc0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">应用您的。editorconfig文件，你可以点击Visual Studio中的小扫帚按钮，也可以点击组合键<strong class="ky ir"> Ctrl+K，Ctrl+E </strong>。点击<strong class="ky ir"> Ctrl+K，Ctrl+D </strong>将会重新格式化你的代码。</p><h2 id="6812" class="ne lt iq bd lu nf ng dn ly nh ni dp mc lf nj nk me lj nl nm mg ln nn no mi np bi translated">通过命令行运行</h2><p id="7880" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">从CLI开始清理需要一个可以通过dotnet命令行界面安装的工具。</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="35b7" class="ne lt iq nr b gy nv nw l nx ny">dotnet tool install -g dotnet-format</span></pre><p id="b3c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装完成后，您只需运行以下命令来清理您的代码。这也可以作为预提交挂钩运行。</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="1215" class="ne lt iq nr b gy nv nw l nx ny">dotnet format</span></pre><h1 id="445a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">在构建过程中捕获违规</h1><p id="513b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">清理代码已经很好了，但是强制执行代码风格的一个安全方法是，如果它不符合您的代码风格，就让您的构建失败。这可以通过将<code class="fe nz oa ob nr b"><a class="ae kv" href="https://www.nuget.org/packages/Microsoft.CodeAnalysis.CSharp.CodeStyle/" rel="noopener ugc nofollow" target="_blank">Microsoft.CodeAnalysis.CSharp.CodeStyle</a></code> NuGet包添加到您的项目中来实现。</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="eed1" class="ne lt iq nr b gy nv nw l nx ny">dotnet add package Microsoft.CodeAnalysis.CSharp.CodeStyle</span></pre><p id="9050" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您在<code class="fe nz oa ob nr b">.editorconfig</code>文件中配置将未使用的变量视为错误，构建将失败，并在构建输出中显示相应的行。通过这种方式，您可以绝对肯定所开发的代码遵循了您的代码风格。</p></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><h1 id="053e" class="ls lt iq bd lu lv oj lx ly lz ok mb mc jw ol jx me jz om ka mg kc on kd mi mj bi translated">进一步阅读和参考</h1><div class="oo op gp gr oq or"><a href="https://editorconfig.org/" rel="noopener  ugc nofollow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd ir gy z fp ow fr fs ox fu fw ip bi translated">编辑器配置</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">EditorConfig是一个文件格式和文本编辑器插件的集合，用于维护…</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">editorconfig.org</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf kp or"/></div></div></a></div><div class="oo op gp gr oq or"><a href="https://docs.microsoft.com/en-us/dotnet/fundamentals/code-analysis/code-style-rule-options" rel="noopener  ugc nofollow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd ir gy z fp ow fr fs ox fu fw ip bi translated">。NET代码样式规则选项-。网</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">通过定义，可以在代码库中定义和维护一致的代码样式。中的. NET代码样式规则选项…</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">docs.microsoft.com</p></div></div><div class="pa l"><div class="pg l pc pd pe pa pf kp or"/></div></div></a></div><div class="oo op gp gr oq or"><a href="https://docs.microsoft.com/en-us/visualstudio/ide/create-portable-custom-editor-options?view=vs-2022" rel="noopener  ugc nofollow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd ir gy z fp ow fr fs ox fu fw ip bi translated">EditorConfig设置- Visual Studio (Windows)</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">您可以将EditorConfig文件添加到您的项目或代码库中，以便为每个人实施一致的编码风格…</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">docs.microsoft.com</p></div></div><div class="pa l"><div class="ph l pc pd pe pa pf kp or"/></div></div></a></div><div class="oo op gp gr oq or"><a href="https://www.hanselman.com/blog/editorconfig-code-formatting-from-the-command-line-with-net-cores-dotnet-format-global-tool" rel="noopener  ugc nofollow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd ir gy z fp ow fr fs ox fu fw ip bi translated">EditorConfig代码格式化。NET Core的dotnet格式全局工具</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">“EditorConfig有助于为从事同一项目的多个开发人员保持一致的编码风格…</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">www.hanselman.com</p></div></div><div class="pa l"><div class="pi l pc pd pe pa pf kp or"/></div></div></a></div><div class="oo op gp gr oq or"><a href="https://www.nuget.org/packages/Microsoft.CodeAnalysis.CSharp.CodeStyle/" rel="noopener  ugc nofollow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd ir gy z fp ow fr fs ox fu fw ip bi translated">微软。代码分析</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">NET编译器平台(“Roslyn”)的C#代码风格分析器。更多细节在https://aka.ms/roslyn-packages这个…</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">www.nuget.org</p></div></div><div class="pa l"><div class="pj l pc pd pe pa pf kp or"/></div></div></a></div></div></div>    
</body>
</html>