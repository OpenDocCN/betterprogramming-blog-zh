<html>
<head>
<title>How To Deploy a Faucet for Your Token on the Polygon Network</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在多边形网络上为您的令牌部署水龙头</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-deploy-a-faucet-for-your-token-on-the-polygon-network-363785e52d67?source=collection_archive---------8-----------------------#2021-07-16">https://betterprogramming.pub/how-to-deploy-a-faucet-for-your-token-on-the-polygon-network-363785e52d67?source=collection_archive---------8-----------------------#2021-07-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2310" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">利用混音IDE</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0d209284a460a91fd4c5e8301c50a9cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Q4ubUPnBXNHgnS6T4OwYKQ.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片由作者提供。</p></figure><p id="f65c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这个演示中，我们将探索如何使用Solidity为您的令牌创建一个水龙头，并将其部署到Matic/Polygon实时网络。令牌有水龙头有几个原因。它可以是一个mainnet水龙头，用于在一些任务完成的基础上向社区分发令牌，一个testnet水龙头，用于支持开发人员使用令牌构建应用程序，等等。</p><p id="a11c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">本文将重点介绍如何:</p><ul class=""><li id="1406" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">创建水龙头智能合同。</li><li id="52c5" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">在孟买测试网上部署它。</li></ul><p id="5485" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mf">注意:您也可以在以太坊或币安智能链(BSC)上部署该水龙头。</em></p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="8a07" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">我们开始吧！</h1><p id="29a7" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">导航到<a class="ae nk" href="https://remix.ethereum.org/" rel="noopener ugc nofollow" target="_blank">混音IDE </a> <em class="mf">。</em>创建一个名为<code class="fe nl nm nn no b">Faucet.sol</code>的新文件，并将以下内容添加到该文件中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="8e1c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mf">注意:我假设您已经在Mumbai testnet上部署了一个令牌。如果您尚未部署令牌，请浏览此</em> <a class="ae nk" href="https://medium.com/geekculture/how-to-create-your-own-bep20-tokens-on-binance-smart-chain-bsc-d7075ba2f057" rel="noopener"> <em class="mf">文章</em> </a> <em class="mf">。它使用BSC，但是也可以遵循相同的方法在Mumbai testnet上部署令牌。只有元掩码应该配置为与Mumbai testnet一起工作。</em></p><p id="1dae" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">出于测试目的，我在Mumbai testnet上部署了一个名为“<a class="ae nk" href="https://mumbai.polygonscan.com/token/0x27e091bff37be958387efbe7133cc7bc144da8ac" rel="noopener ugc nofollow" target="_blank"> Sample Medium Token (SMT) </a>”的简单令牌，这个水龙头将每隔五分钟向请求的钱包地址发送一个SMT令牌(可以更改)。</p><p id="4b6a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，让我们编译合同，并将其部署到孟买测试网。</p><p id="c61c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了部署，我们需要一些<a class="ae nk" href="https://faucet.matic.network/" rel="noopener ugc nofollow" target="_blank"> testnet Matic令牌</a>。使用Remix编译和部署契约的步骤也可以在上面提到的文章中找到。在部署期间，应该通过<code class="fe nl nm nn no b">tokenAddress</code>和<code class="fe nl nm nn no b">ownerAddress</code>来进行合同初始化。</p><p id="0c35" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">水龙头有四种方法:</p><ol class=""><li id="1489" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq nr lx ly lz bi translated"><code class="fe nl nm nn no b">send()</code> —此功能向发出请求的钱包发送1条短信(默认)。应当注意，已经声明了映射(<code class="fe nl nm nn no b">nextRequestAt</code>)来实现基本速率限制机制。从同一个钱包连续拨打两次电话之间应该至少间隔五分钟。</li><li id="13b6" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq nr lx ly lz bi translated"><code class="fe nl nm nn no b">setTokenAddress</code>(地址)—水龙头所有者/管理员可以使用该方法来更新底层令牌地址。例如，如果我们正在启动一个新版本的令牌(例如SMTv2)，我们可以将新的令牌地址传递给这个方法，以便水龙头开始滴下新的令牌而不是旧的令牌。这有点类似于可升级合同中遵循的“适配器方法”。</li><li id="a212" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq nr lx ly lz bi translated"><code class="fe nl nm nn no b">setFaucetDripAmount</code> (uint256) —使用这种方法，所有者可以增加或减少每个请求发送的令牌数。默认值为1 SMT。</li><li id="4fba" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq nr lx ly lz bi translated"><code class="fe nl nm nn no b">withdrawTokens</code>(地址，uint256) <em class="mf"> — </em>水龙头所有者可以用这个从智能合约中提取令牌。</li></ol><p id="6497" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们需要在部署合同后立即手动将一些令牌存入水龙头合同。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/ca8e5c8eb04474e8fcb94d979cfa6e6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*ZZbJQle3zYeu1bUCV0tqZw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">向水龙头发送代币</p></figure><p id="2d0e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">抛开<code class="fe nl nm nn no b">send()</code>方法，其他三个功能只能由水龙头主人调用。因此，<code class="fe nl nm nn no b">onlyOwner</code>修饰符被传递。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="911b" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">直播时间到了</h1><p id="cb84" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">一旦契约被成功部署，我们可以在Remix IDE的左下方看到这些方法。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/f2d40daad26f9340d55c6e76af0b73b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*Qz-kHkm7Wax_mPBPMsyUnA.png"/></div></figure><p id="51ee" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以连接MetaMask wallet并使用这些方法。</p><p id="eea6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe nl nm nn no b">send</code>方法将1个SMT滴入钱包，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/733d06e85b5f81617a8c0fad77c4fb04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JkP2PacF0JMC8yHTLdmM_w.png"/></div></div></figure><p id="aa63" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们再次尝试在五分钟内强制约定发送令牌，交易将被恢复，并显示错误消息“稍后重试”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/5cf7881203fd51ac50b8faca43ede7c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a37J20TvrF24GT4oAGnmSA.png"/></div></div></figure><p id="6c41" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们想改变令牌或每个请求要发送的数量，可以通过调用相应的方法来完成。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="94e8" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">结论</h1><p id="27a2" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">这个水龙头智能合同只是为了好玩而构建的，它是一个基本的实现。可以对契约进行许多修改，使其更加健壮、安全和可靠。你可以根据自己的需要随意修改水龙头，摆弄它。</p><p id="4981" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>