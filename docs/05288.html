<html>
<head>
<title>How to Embed React Apps in WordPress Sites</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在WordPress网站中嵌入React应用</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-embed-react-apps-in-wordpress-sites-96a21b995290?source=collection_archive---------2-----------------------#2020-06-26">https://betterprogramming.pub/how-to-embed-react-apps-in-wordpress-sites-96a21b995290?source=collection_archive---------2-----------------------#2020-06-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="903c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用React在WordPress站点创建交互式填字游戏的初学者指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7c1281304acf2b09e71b0d8053c9a2fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kRsW3Y74Fto3JFbXL20mOQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片。</p></figure><p id="c36a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一个潜在的客户最近要求一个React应用程序，该应用程序具有一个灵活和响应的纵横字谜组件，可以与他们现有的WordPress网站集成(类似于<a class="ae lr" href="https://www.theguardian.com/crosswords/quick/15631" rel="noopener ugc nofollow" target="_blank">《卫报》</a>)。读了一圈，我发现执行这项任务没有明确的最佳实践，在<a class="ae lr" href="https://wp-and-react.com/#/" rel="noopener ugc nofollow" target="_blank"> WordPress和React </a>上提出了各种不同的方法。然而，这些往往侧重于重新设计网站架构或涉及WordPress插件。</p><p id="8404" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">经过多次尝试和错误，我得到了这个工作没有任何一个，所以这篇文章将提供一个初学者的一步一步的指导我的实现。我将提供外部资源的链接，以便在每一步进行彻底的调试。您可以使用任何文本编辑器来完成这项任务。我的偏好是<a class="ae lr" href="https://atom.io/" rel="noopener ugc nofollow" target="_blank"> Atom </a>。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="9e13" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">创建新的React应用程序</h1><p id="4644" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">React是一个用于构建用户界面的JavaScript库。为了创建一个新的React项目，我们将使用<a class="ae lr" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>。您需要在本地开发机器上安装<a class="ae lr" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> Node.js </a> &gt; = 8.10。安装完成后，打开命令提示符/终端，转到要创建项目的目录，运行以下代码行:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="90ea" class="nb ma iq mx b gy nc nd l ne nf">cd path/to/directory</span></pre><p id="a5a9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意，你应该把你自己的<code class="fe ng nh ni mx b">path/to/directory</code>放在这里(在我的Mac上，我经常只是把一个文件夹从我的Finder拖到命令行)。然后，我们将运行以下代码行来创建项目:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="db4b" class="nb ma iq mx b gy nc nd l ne nf">npx create-react-app crossword-app</span></pre><p id="c8d3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe ng nh ni mx b">crossword-app</code>是我的项目的名称，所以您可以随意更改。接下来，我们将使用<code class="fe ng nh ni mx b">cd</code>再次打开终端中的项目目录，并在开发模式下运行我们新创建的应用程序，代码如下:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="852f" class="nb ma iq mx b gy nc nd l ne nf">npm start</span></pre><p id="6a1d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您现在打开<a class="ae lr" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>，您应该会看到一个带有React徽标的登录页面和一些带有React学习链接的文本。如果你已经走了这么远，干得好！如果没有，你可能有一些调试要做/冲突的依赖，所以检查一下<a class="ae lr" href="https://create-react-app.dev/docs/getting-started" rel="noopener ugc nofollow" target="_blank"> create-react-app文档</a>。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="fb34" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">添加主页属性</h1><p id="8504" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">我们需要告诉我们的应用程序它将在服务器上的什么位置。由于使用了<code class="fe ng nh ni mx b">create-react-app</code>，在编辑<code class="fe ng nh ni mx b">package.json</code>文件之前，您现在需要在您的终端中运行以下代码，并打开您的项目目录:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="8640" class="nb ma iq mx b gy nc nd l ne nf">yarn eject</span></pre><p id="d1a5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，打开项目文件夹顶层的<code class="fe ng nh ni mx b">package.json</code>文件，在<code class="fe ng nh ni mx b">“name”</code>下面，添加新属性<code class="fe ng nh ni mx b">homepage</code>。此属性将采用您希望应用程序在服务器上驻留的URL的值:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="3211" class="nb ma iq mx b gy nc nd l ne nf">"homepage": "<a class="ae lr" href="http://localhost:8888/2020/06/24/react/" rel="noopener ugc nofollow" target="_blank">http://localhost:8888/2020/06/24/react/</a>"</span></pre><p id="141c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">请注意，我使用的是本地服务器。<code class="fe ng nh ni mx b">localhost:8888</code>可能会被您的网站域名替换。但是，最好先在本地运行它，这样在运行之前就不必对站点进行修改。塔尼亚·拉西亚写了一篇关于建立当地环境的伟大文章。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="55b1" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">添加React DOM</h1><p id="562d" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">文档对象模型(DOM)可以是网页的面向对象的表示。我们希望我们的应用程序被加载到WordPress post上，所以我们将使用<code class="fe ng nh ni mx b">React DOM</code>包来完成这个任务。首先，在打开项目目录的情况下，通过在终端中运行来安装这个包:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="553c" class="nb ma iq mx b gy nc nd l ne nf">npm install --save react-router-dom</span></pre><p id="5355" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，我们需要给我们的目标DOM元素一个惟一的ID，这样应用程序就知道我们的post要加载到哪里。在你的文本编辑器中打开<code class="fe ng nh ni mx b">public/index.html</code>，将<code class="fe ng nh ni mx b">div</code>替换为你的唯一ID<code class="fe ng nh ni mx b">root</code>(例如，我选择了<code class="fe ng nh ni mx b">my-crossword</code>)。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="0fc4" class="nb ma iq mx b gy nc nd l ne nf">&lt;div id="my-crossword"&gt;&lt;/div&gt;</span></pre><p id="70c5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要告诉应用程序使用ID<code class="fe ng nh ni mx b">my-crossword</code>呈现此<code class="fe ng nh ni mx b">div</code>，请打开<code class="fe ng nh ni mx b">src/index.js</code>并更新到以下代码行:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><code class="fe ng nh ni mx b">src/index.js</code></p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="a8dd" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">添加纵横字谜组件</h1><p id="c7c1" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">麻省理工学院的贾里德·雷辛格在GitHub上为这个纵横字谜组件提供了开源代码。您需要在项目目录打开的情况下，通过在终端中再次执行以下代码来安装Jared的包:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="ee5d" class="nb ma iq mx b gy nc nd l ne nf">npm install --save @jaredreisinger/react-crossword</span></pre><p id="0e92" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">安装完成后，在文本编辑器中打开<code class="fe ng nh ni mx b">src/App.js</code>。现在，删除它的内容并粘贴以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><code class="fe ng nh ni mx b">src/App.js</code></p></figure><p id="61a1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">请注意，您可以通过向<code class="fe ng nh ni mx b">across</code>和<code class="fe ng nh ni mx b">down</code>添加更多条目来定制<code class="fe ng nh ni mx b">data</code>。现在，您可以保存文件，并在项目目录打开的情况下在终端中再次运行:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="6bee" class="nb ma iq mx b gy nc nd l ne nf">npm start</span></pre><p id="c925" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这一次，如果你现在打开<a class="ae lr" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>，你应该会看到你新的交互式填字游戏。如果您有问题或者想要进一步定制，请参考Jared的<a class="ae lr" href="https://github.com/JaredReisinger/react-crossword" rel="noopener ugc nofollow" target="_blank"> GitHub </a>页面，并尝试运行<a class="ae lr" href="https://codesandbox.io/s/new" rel="noopener ugc nofollow" target="_blank">代码沙箱</a>中的代码。这将有助于您确定问题是由您的代码引起的，还是由您的本地环境引起的，因为包之间存在冲突。请注意，代码沙箱中的样式表是不同的，因此使用:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="f71c" class="nb ma iq mx b gy nc nd l ne nf">import "./styles.css";</span></pre><p id="05a3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">而不是:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="e7e1" class="nb ma iq mx b gy nc nd l ne nf">import "./App.css";</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="79bb" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">构建React应用程序</h1><p id="d7eb" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">我们现在已经准备好通过运行<code class="fe ng nh ni mx b">npm run build</code>来构建我们的React应用程序了。然而，最新版本的<code class="fe ng nh ni mx b">create-react-app</code>安装了一个依赖项<a class="ae lr" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> webpack </a>，其配置会将我们的构建文件分成“块”我们不希望这样，因此我们必须执行以下重新配置。通过在终端中运行以下代码来安装<code class="fe ng nh ni mx b">react-app-rewired</code>开始:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="f169" class="nb ma iq mx b gy nc nd l ne nf">npm install react-app-rewired --save-dev</span></pre><p id="84ee" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，在主项目目录中创建一个名为<code class="fe ng nh ni mx b">config-overrides.js</code>的文件，并向其中添加以下代码行:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><code class="fe ng nh ni mx b">config-overrides.js</code></p></figure><p id="0886" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在在<code class="fe ng nh ni mx b">package.json</code>中，将<code class="fe ng nh ni mx b">build</code>、<code class="fe ng nh ni mx b">start</code>和<code class="fe ng nh ni mx b">test</code>脚本替换为以下几行:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="9a38" class="nb ma iq mx b gy nc nd l ne nf">"start": "react-app-rewired start",<br/>"build": "react-app-rewired build",<br/>"test": "react-app-rewired test",</span></pre><p id="4778" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，在终端中打开项目目录，再次运行:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="aa56" class="nb ma iq mx b gy nc nd l ne nf">npm start</span></pre><p id="ed5d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">其次是:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="2036" class="nb ma iq mx b gy nc nd l ne nf">npm run build</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="9b3e" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">部署</h1><p id="ba88" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">现在，您需要将您的应用程序上传到您的网站服务器。要做到这一点，在服务器上你的WordPress站点目录中创建一个名为<code class="fe ng nh ni mx b">react</code>的文件夹，在你设置主页的路径下。例如，我在<code class="fe ng nh ni mx b">/2020/06/24/react/</code>中创建了我的<code class="fe ng nh ni mx b">react</code>文件夹。关于<a class="ae lr" href="https://stackoverflow.com/questions/19272954/different-between-on-file-pathurl-in-asp-net" rel="noopener ugc nofollow" target="_blank">堆栈溢出</a>的文件路径符号有一个很好的解释。最后，将你的<code class="fe ng nh ni mx b">react</code> <code class="fe ng nh ni mx b">build</code>文件夹的全部内容复制到你在服务器上的新的WordPress <code class="fe ng nh ni mx b">react</code>文件夹。</p><p id="9a30" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">打开WordPress，创建一个你想嵌入React应用的新帖子。该页面的永久链接应该与您的<code class="fe ng nh ni mx b">package.json</code>中的<code class="fe ng nh ni mx b">homepage</code>属性相匹配。例如，我的永久链接是<code class="fe ng nh ni mx b">http://localhost:8888/2020/06/24/react/</code>。切换到代码编辑器模式，插入以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">WordPress代码编辑器</p></figure><p id="e2ce" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意，这里的<code class="fe ng nh ni mx b">src</code>应该设置为网站目录中的路径，该路径从React项目的<code class="fe ng nh ni mx b">/build/static</code>文件夹中指向主JS文件。</p><p id="bb10" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">就是这样！如果你点击预览，你应该会看到你的React应用嵌入到你的WordPress文章中。在下面的代码沙箱中查看我完成的纵横字谜应用程序。</p><p id="af7f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我希望你已经发现这个将React应用嵌入WordPress站点的分步指南是有用的！让我知道你的进展，并在评论中留下任何问题。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我在代码沙盒上的纵横字谜</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="8225" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">资源</h1><ul class=""><li id="8f6d" class="nm nn iq kx b ky mr lb ms le no li np lm nq lq nr ns nt nu bi translated"><a class="ae lr" href="https://wp-and-react.com/#/" rel="noopener ugc nofollow" target="_blank"> wp-and-react </a>(关于WordPress和react开发的教程和资源集合)</li><li id="71f8" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">Atom(Atom文本编辑器的网站)</li><li id="7c4d" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated"><a class="ae lr" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank">创建-反应-应用</a>(创建反应应用包的网站)</li><li id="34f4" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated"><a class="ae lr" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank">node . js</a>(node . js运行环境网站)</li><li id="69f0" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated"><a class="ae lr" href="https://create-react-app.dev/docs/getting-started" rel="noopener ugc nofollow" target="_blank">创建反应应用文档</a>(创建反应应用包的文档)</li><li id="5ed0" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">建立一个本地服务器环境</li><li id="5dc5" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">r <a class="ae lr" href="https://github.com/JaredReisinger/react-crossword" rel="noopener ugc nofollow" target="_blank"> eact-crossword </a>(贾里德·雷辛格的GitHub知识库)</li><li id="9559" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated"><a class="ae lr" href="https://codesandbox.io/s/new" rel="noopener ugc nofollow" target="_blank">代码沙箱</a>(代码沙箱在线代码编辑器和原型工具网站)</li><li id="3d3b" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated"><a class="ae lr" href="https://stackoverflow.com/questions/19272954/different-between-on-file-pathurl-in-asp-net" rel="noopener ugc nofollow" target="_blank">路径组件快捷键</a>(堆栈溢出讨论线程)</li></ul></div></div>    
</body>
</html>