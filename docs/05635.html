<html>
<head>
<title>Comparable Enums in Swift 5.3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift 5.3中的可比枚举</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/comparable-enum-in-swift-374836f02251?source=collection_archive---------5-----------------------#2020-07-23">https://betterprogramming.pub/comparable-enum-in-swift-374836f02251?source=collection_archive---------5-----------------------#2020-07-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5123" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Enum cases将自动合成所需的实现，以符合Swift 5.3中的<code class="fe ki kj kk kl b">Comparable</code>协议</h2></div><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/49cdf5f694980bee0eecc7e095e1261a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3lb4HH1CPZzqJ8V8"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">照片由<a class="ae lc" href="https://unsplash.com/@grakozy?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">格雷格·拉科齐</a>在<a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl ld le hx lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="im in io ip iq"><h1 id="d46f" class="lk ll it bd lm ln lo lp lq lr ls lt lu jz lv ka lw kc lx kd ly kf lz kg ma mb bi translated">1.枚举时对相关值进行分组</h1><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mc"><img src="../Images/3a1e26db3ed08ca4df8904dd5614ffae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_QR6c_Zya0QOUwvg"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">Johannes Plenio 在<a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="2db7" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx my im bi translated">枚举，简称Enum，是许多语言中流行的数据类型。它在代码中以类型安全的方式对相关值进行分组。</p><p id="26c0" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx my im bi translated">在Swift中，枚举采用了一级类型支持的许多特性，如<code class="fe ki kj kk kl b">struct</code>和<code class="fe ki kj kk kl b">class</code>。它有初始值设定项来提供初始大小写值。它可以被扩展以扩展功能。枚举可以有计算属性和实例方法来提供附加信息。它还可以实现<code class="fe ki kj kk kl b">protocol</code>来对齐行为。</p><p id="360f" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx my im bi translated">枚举是用一对带<code class="fe ki kj kk kl b">enum</code>关键字的大括号引入的。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz na l"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">杨梦枚举颜色</p></figure></div><div class="ab cl ld le hx lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="im in io ip iq"><h1 id="096d" class="lk ll it bd lm ln lo lp lq lr ls lt lu jz lv ka lw kc lx kd ly kf lz kg ma mb bi translated">2.用于比较枚举案例的样板文件</h1><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nb"><img src="../Images/edf65208c207bf18a7863f09b9a8ca3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wsQj87HJOqgSVW-L"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">照片由<a class="ae lc" href="https://unsplash.com/@jg?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">乔·格林</a>在<a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="de8d" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx my im bi translated">但是，如何比较Swift中的Enum案例呢？</p><p id="0ef4" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx my im bi translated">到目前为止，有几种方法，但每一种都有不同程度的不便。</p><h2 id="03dc" class="nc ll it bd lm nd ne dn lq nf ng dp lu mm nh ni lw mq nj nk ly mu nl nm ma nn bi translated">声明可比原始值</h2><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="a7fd" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx my im bi translated">然后，使用以下方法对它们进行比较:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="46fb" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx my im bi translated">这种方式的缺点是将一个无意义的<code class="fe ki kj kk kl b">string</code>值关联并公开为原始值。它还介绍了<code class="fe ki kj kk kl b">&lt;</code>样板代码的静态实现。</p><h2 id="feac" class="nc ll it bd lm nd ne dn lq nf ng dp lu mm nh ni lw mq nj nk ly mu nl nm ma nn bi translated">声明私有原始值</h2><p id="b223" class="pw-post-body-paragraph md me it mf b mg no ju mi mj np jx ml mm nq mo mp mq nr ms mt mu ns mw mx my im bi translated">为了避免暴露枚举用例的无意义的<code class="fe ki kj kk kl b">string</code>值，人们实现了<code class="fe ki kj kk kl b">private</code>比较值。不用说，它增加了更多的样板文件。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz na l"/></div></figure><h2 id="53ad" class="nc ll it bd lm nd ne dn lq nf ng dp lu mm nh ni lw mq nj nk ly mu nl nm ma nn bi translated">硬核比较</h2><p id="a9fa" class="pw-post-body-paragraph md me it mf b mg no ju mi mj np jx ml mm nq mo mp mq nr ms mt mu ns mw mx my im bi translated">最常见的方法，也可能是最正确的方法，是通过检查案例本身来实现比较。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="b0ae" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx my im bi translated">如您所见，函数<code class="fe ki kj kk kl b">mininum</code>的顺序非常重要。代码相当冗长且容易出错。随着枚举案例的扩展，它不能很好地扩展。</p></div><div class="ab cl ld le hx lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="im in io ip iq"><h1 id="1543" class="lk ll it bd lm ln lo lp lq lr ls lt lu jz lv ka lw kc lx kd ly kf lz kg ma mb bi translated">3.Swift 5.3中引入了类似的Enum</h1><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nt"><img src="../Images/1b7c76d42d70428d71005d47a9b08488.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lTvMIaYK1UUkwqEh"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">由<a class="ae lc" href="https://unsplash.com/@jessica_favaro?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杰西卡F </a>在<a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="3cd9" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx my im bi translated">Swift语言提案<a class="ae lc" href="https://github.com/apple/swift-evolution/blob/master/proposals/0266-synthesized-comparable-for-enumerations.md" rel="noopener ugc nofollow" target="_blank"> SE-0266 </a>引入了<code class="fe ki kj kk kl b">enum</code>类型的综合可比一致性。</p><p id="94d3" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx my im bi translated">选择加入合成<code class="fe ki kj kk kl b">Comparable</code>一致性的枚举类型将根据案例声明顺序进行比较，后面的案例比前面的案例进行比较。只有没有关联值的<code class="fe ki kj kk kl b">enum</code>类型和只有<code class="fe ki kj kk kl b">Comparable</code>关联值的<code class="fe ki kj kk kl b">enum</code>类型符合合成一致性。后一种<code class="fe ki kj kk kl b">enum</code>将首先按照case声明顺序进行比较，然后按照有效载荷值的字典顺序进行比较。没有带有原始值的类型符合条件。</p><p id="fa4c" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx my im bi translated">通过使用Xcode 12.0 (beta 2)，我们可以创建如下的<code class="fe ki kj kk kl b">Comparable</code>枚举:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz na l"/></div></figure></div><div class="ab cl ld le hx lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="im in io ip iq"><h1 id="d921" class="lk ll it bd lm ln lo lp lq lr ls lt lu jz lv ka lw kc lx kd ly kf lz kg ma mb bi translated">4.结论</h1><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nu"><img src="../Images/ac22b8ccbd65a318c11174a549aba4b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9QGqjT93LM0yynJZ"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated"><a class="ae lc" href="https://unsplash.com/@olia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Olia Gozha </a>在<a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="ed39" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx my im bi translated">Swift 5.3中的<code class="fe ki kj kk kl b">Comparable</code> enum是一个令人兴奋的特性。它综合了所需的实现以符合<code class="fe ki kj kk kl b">Comparable</code>协议。我们现在可以避免添加容易出错的样板文件了！</p></div><div class="ab cl ld le hx lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="im in io ip iq"><h1 id="8326" class="lk ll it bd lm ln lo lp lq lr ls lt lu jz lv ka lw kc lx kd ly kf lz kg ma mb bi translated">5.资源</h1><p id="8895" class="pw-post-body-paragraph md me it mf b mg no ju mi mj np jx ml mm nq mo mp mq nr ms mt mu ns mw mx my im bi translated">上述所有资源和要点代码可在以下位置找到:</p><p id="d0b8" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx my im bi translated">SE-0266 </p><p id="4be2" class="pw-post-body-paragraph md me it mf b mg mh ju mi mj mk jx ml mm mn mo mp mq mr ms mt mu mv mw mx my im bi translated"><a class="ae lc" href="https://gist.github.com/ericleiyang/2ce076c08ebad4ff8b88db3ffe46d0b3" rel="noopener ugc nofollow" target="_blank">Swift 5.3中的可比枚举</a></p></div></div>    
</body>
</html>