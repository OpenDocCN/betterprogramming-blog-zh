<html>
<head>
<title>Using De Casteljau’s Algorithm/Bezier Curves in SwiftU</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftU中使用De Casteljau算法/贝塞尔曲线</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/using-de-casteljaus-algorithm-bezier-curves-in-swiftui-3dcadd62635e?source=collection_archive---------12-----------------------#2020-11-18">https://betterprogramming.pub/using-de-casteljaus-algorithm-bezier-curves-in-swiftui-3dcadd62635e?source=collection_archive---------12-----------------------#2020-11-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="58ec" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">苹果的贝塞尔曲线代码很好，但有时你需要深入挖掘</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c0df5e4edd8c52afa8b42e9e58c9748d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*tiLxnn9RpiGwgH1t-uPLDg.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用foobar控件在三条贝塞尔曲线上设置动画的文本框集合</p></figure><p id="cef5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">前几天，我写了一篇关于使用贝塞尔曲线的文章，它的构造被嵌入到了Swift原语中。超级有用，效果真的很好。在那篇文章中，我顺便提到它背后的数学是令人难以置信的。我错了。数学很简单。这是令人难以置信的代码。让我们深入了解一下。</p><p id="1e40" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是等等，就在我们跳进去之前，你为什么要下这个兔子洞？这里有三种可能的情况:</p><ul class=""><li id="665e" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated">客户希望您在贝塞尔曲线上绘制一些文本。</li><li id="f3ce" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">你想在游戏中使用一组贝塞尔坐标。</li><li id="4ba2" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">你关心的是让应用程序运行得更快，为贝塞尔曲线计算更少的点是有意义的。</li></ul><p id="43b8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，如果你想做任何和/或所有这些，你会卡住，因为苹果原语不返回坐标。他们返回一条路。你需要深入挖掘。让我们试着做数学和代码。</p><p id="6250" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如我上次提到的，现在的风云人物是De Casteljau，他写了算法来做数学家所说的两个值之间的线性插值。该算法计算绘制红线所需的坐标，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/19bd9b00d1e19ac4af58f2f62ea90430.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/1*IcAmHJRaB5RGvRKWIrrJ-w.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">二次曲线</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/f2572bfdfcae3ee746d62911589c7edc.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/1*TtBk9Rg_z6MnvjPZM2IyoQ.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">三次曲线</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/588bde175dd38fb718bc95776863ba15.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/1*oogsaLJ8sjJtZNBnlGua_g.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">两条三次曲线之间的线性插值</p></figure><p id="dd1f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是怎么回事？数学事实上非常简单，依赖于代码中显示的这个简单等式:</p><pre class="kj kk kl km gt mk ml mm mn aw mo bi"><span id="95b7" class="mp mq it ml b gy mr ms l mt mu"><strong class="ml iu">func</strong> mix(une:CGFloat, deux:CGFloat, t:Double) -&gt; Double {<br/>  return ((1.0 - t) * Double(une)) + (Double(deux) * t)<br/>}</span></pre><p id="d932" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以在下面的动画GIF中看到这是如何工作的。简而言之，随着变量<em class="mv"> t </em>的值增加，你会得到更多保存在<em class="mv"> deux </em>中的值，而得到更少保存在<em class="mv"> une </em>中的值。因此，它缓慢但稳定地在<em class="mv"> une </em>和<em class="mv"> deux </em>之间绘制了一条路径。<em class="mv">在这种情况下，Une </em>是红色圆圈，而<em class="mv"> deux </em>是蓝色圆圈。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/54a126ace3892bfdfb8f423314c9b896.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Dsjdb5QqGhmo359K23qE-Q.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">两点从一点到另一点插值十次</p></figure><p id="2578" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当然，你会正确地认为这不是一条贝赛尔曲线。这是一条直线。不，要得到一条曲线，你至少需要引入三个点。使用三个点，我们得到贝塞尔曲线。一条看起来像这样的曲线:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f732744065c4c03812c1cb6bad22ed6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*iugE2Ms57Jx9k73XIAxUFg.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">三个点插值创建一个贝塞尔曲线</p></figure><p id="def8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面的GIF中，我让三个点交换了我的曲线的起点、终点和控制者。看着它改变。它将以不同的颜色开始和结束三次。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9d16dca0f722c6743f795d75b31a420c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*WHSeeHqM5ByxzB22jEsCBA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">移动贝塞尔曲线的控制点</p></figure><p id="807a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以移动控制点，重新计算曲线，并重新绘制它。该过程如上所述。注意:我故意选择不在这里直线移动蓝点。</p><p id="4f39" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是让我们做一些更华丽的事情:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/df3a644367e4167f9baf7464d3a41be5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7NqbSEvypXzabjNkTBb4WA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我沿着多条贝塞尔曲线制作了一些文字动画</p></figure><p id="a4cd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">事实上，我创建了比我需要的多得多的控制点。我用文本框替换了黄色圆圈，然后在其中添加了一些动画文本。当我这样做的时候，我首先移动了不同的起点和终点，然后是控制点，让我的文本沿着一条不枯燥的直线前进。</p><p id="540b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就把我带到了文章的结尾。我希望你能像我写这篇文章一样喜欢阅读。</p><p id="90d6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是浮动文本主要插图背后的代码。我在这里留下了一些注释代码，给你一个如何扩展它的提示。如果它看起来像一段很长的代码，不要被愚弄。其实不是。真正的代码就在最后——一些计算组合坐标的函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="ee19" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我离开之前，如果你仍然不确定你理解了，那就看这个关于这个主题的精彩视频。</p><p id="64ad" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">保持冷静，继续编码。</p></div></div>    
</body>
</html>