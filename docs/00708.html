<html>
<head>
<title>Use Absolute Paths with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对React使用绝对路径</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/use-absolute-paths-with-react-51ced66f119f?source=collection_archive---------1-----------------------#2019-07-03">https://betterprogramming.pub/use-absolute-paths-with-react-51ced66f119f?source=collection_archive---------1-----------------------#2019-07-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="77f0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">导入模块从来都不容易</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/084da344a53883d222ed9d6362ab11ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AnKpz-SZGb0YIjn72koDqw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">绝对路径</p></figure><blockquote class="kv kw kx"><p id="887f" class="ky kz la lb b lc ld jr le lf lg ju lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated"><strong class="lb ir"> <em class="iq">最后更新于2021年6月4日。</em> </strong></p></blockquote><p id="2202" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">也许这对你来说不是问题，但是使用<strong class="lb ir"> <em class="la">绝对路径</em> </strong>导入模块是我不能缺少的东西。</p><p id="698f" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">在本文中，我将带您使用<a class="ae ly" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> <em class="la"> Webpack </em> </a> <em class="la">为您的项目添加对绝对路径的支持。</em></p><h2 id="36fc" class="lz ma iq bd mb mc md dn me mf mg dp mh lv mi mj mk lw ml mm mn lx mo mp mq mr bi translated">TL；博士:</h2><p id="3838" class="pw-post-body-paragraph ky kz iq lb b lc ms jr le lf mt ju lh lv mu lk ll lw mv lo lp lx mw ls lt lu ij bi translated">不喜欢读书？下面是一个使用<a class="ae ly" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank"><em class="la">create-react-app</em></a>并启用绝对导入的回购链接。实际上不需要<code class="fe mx my mz na b">eject</code>。</p><p id="47a6" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated"><a class="ae ly" href="https://github.com/3tmaan/create-react-app-with-absolute-imports" rel="noopener ugc nofollow" target="_blank">https://github . com/3 tmaan/create-react-app-with-absolute-imports</a></p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><p id="0821" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">默认情况下，<em class="la">相对路径</em>是React和其他框架支持的导入模块的方式。您通常会看到或写下类似这样的内容:</p><pre class="kg kh ki kj gt ni na nj nk aw nl bi"><span id="0bda" class="lz ma iq na b gy nm nn l no np">import MyModule from './MyModule';</span></pre><p id="1ef2" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">看起来很干净！没错，但是如果你有一个复杂的文件夹结构，并且想在其中<strong class="lb ir">向上</strong>移动，该怎么办呢？你最终会得到这样的结果:</p><pre class="kg kh ki kj gt ni na nj nk aw nl bi"><span id="9bf7" class="lz ma iq na b gy nm nn l no np">import MyModule from '../../../components/MyModule'; </span></pre><p id="5af3" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">这看起来很难看——但是除此之外，使用<em class="la">相对路径</em>有一些主要问题:</p><ul class=""><li id="e9ae" class="nq nr iq lb b lc ld lf lg lv ns lw nt lx nu lu nv nw nx ny bi translated">越陷越深，情况越糟</li><li id="1ff1" class="nq nr iq lb b lc nz lf oa lv ob lw oc lx od lu nv nw nx ny bi translated">这使得代码重构相当困难</li><li id="6dae" class="nq nr iq lb b lc nz lf oa lv ob lw oc lx od lu nv nw nx ny bi translated">如果您想将代码提取到NPM模块中供外部使用，您必须更改整个代码库</li></ul><p id="807a" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">如果您能让前面的代码示例看起来像这样，会怎么样呢:</p><pre class="kg kh ki kj gt ni na nj nk aw nl bi"><span id="4d78" class="lz ma iq na b gy nm nn l no np">import MyModule from 'Components/MyModule';</span></pre><p id="4a26" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">整洁干净，对吧？</p><p id="1795" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">实现这种行为很简单。这可以通过使用<strong class="lb ir">解析器— </strong>来完成，解析器是一个库，它通过模块的<strong class="lb ir">绝对路径</strong>来帮助<strong class="lb ir">定位</strong>模块。</p><p id="70a6" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">在<strong class="lb ir"> Webpack </strong>配置文件中，添加<code class="fe mx my mz na b">resolve.alias</code>以创建别名，并使<strong class="lb ir">更容易导入</strong>模块。</p><pre class="kg kh ki kj gt ni na nj nk aw nl bi"><span id="18b4" class="lz ma iq na b gy nm nn l no np">module.exports = {<br/>  //...<br/>  resolve: {<br/>    alias: {<br/>      <!-- -->Components<!-- -->: path.resolve(__dirname, 'src/c<!-- -->omponents<!-- -->/')<br/>    }<br/>  }<br/>};</span></pre><p id="9643" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">例如，所有位于<code class="fe mx my mz na b">src/components/</code>内部的模块现在都可以使用<em class="la">绝对路径</em>。</p><h1 id="1e40" class="oe ma iq bd mb of og oh me oi oj ok mh jw ol jx mk jz om ka mn kc on kd mq oo bi translated">奖金</h1><p id="badf" class="pw-post-body-paragraph ky kz iq lb b lc ms jr le lf mt ju lh lv mu lk ll lw mv lo lp lx mw ls lt lu ij bi translated">如果出于任何原因你不想接触你的<strong class="lb ir"> Webpack </strong>配置或者你正在使用<a class="ae ly" href="https://facebook.github.io/create-react-app/docs/getting-started" rel="noopener ugc nofollow" target="_blank"><em class="la">create-react-app</em></a>并且你不想使用<code class="fe mx my mz na b">eject</code>命令，你可以使用一个<a class="ae ly" href="https://babeljs.io" rel="noopener ugc nofollow" target="_blank"><em class="la">Babel</em></a><em class="la"/>插件，名为<a class="ae ly" href="https://github.com/tleunen/babel-plugin-module-resolver" rel="noopener ugc nofollow" target="_blank"><em class="la">Babel-plugin-module-resolver</em></a><em class="la">。<br/> </em>要激活这个插件，创建一个<code class="fe mx my mz na b">.babelrc</code>文件(如果它还不是你的文件夹结构的一部分)并添加以下代码:</p><pre class="kg kh ki kj gt ni na nj nk aw nl bi"><span id="d645" class="lz ma iq na b gy nm nn l no np">{<br/>  "plugins": [<br/>    ["module-resolver", {<br/>      "root": ["./"],<br/>      <!-- -->alias: {<br/>        <!-- -->Components<!-- -->: './src/c<!-- -->omponents<!-- -->')<br/>      }<br/>    }]<br/>  ]<br/>}</span></pre><p id="955b" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">您可以添加任意数量的别名。</p><p id="c93f" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">现在有了<code class="fe mx my mz na b">.babelrc</code>文件，剩下的步骤就很少了，因为<a class="ae ly" href="https://www.npmjs.com/package/react-scripts" rel="noopener ugc nofollow" target="_blank"><em class="la">react-scripts</em></a><a class="ae ly" href="https://create-react-app.dev/docs/getting-started/" rel="noopener ugc nofollow" target="_blank"><em class="la">【CRA】</em></a>不允许你覆盖<strong class="lb ir"> Webpack </strong> config，这就是为什么你还需要2个包来为你的应用程序提供所有底层操作。</p><pre class="kg kh ki kj gt ni na nj nk aw nl bi"><span id="8a01" class="lz ma iq na b gy nm nn l no np">npm install customize-cra react-app-rewired --dev<br/>//or<br/>yarn add customize-cra react-app-rewired --dev</span></pre><p id="58f9" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">安装后，您需要重新配置<code class="fe mx my mz na b">package.json</code>。<br/>典型的<a class="ae ly" href="https://create-react-app.dev/docs/getting-started/" rel="noopener ugc nofollow" target="_blank"><em class="la"/></a>剧本片段看起来是这样的:</p><pre class="kg kh ki kj gt ni na nj nk aw nl bi"><span id="29cc" class="lz ma iq na b gy nm nn l no np">"scripts": {<br/>   "start": "react-scripts start",<br/>   "build": "react-scripts build",<br/>   "test": "react-scripts test",<br/>}</span></pre><p id="170f" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">它运行<code class="fe mx my mz na b">react-scripts</code>命令。然而，您需要连接到<code class="fe mx my mz na b">react-app-rewired</code>来重新定义配置。</p><pre class="kg kh ki kj gt ni na nj nk aw nl bi"><span id="e2b0" class="lz ma iq na b gy nm nn l no np">"scripts": {<br/>    "start": "react-app-rewired start",<br/>    "build": "react-app-rewired build",<br/>    "test": "react-app-rewired test",<br/>}</span></pre><p id="986b" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">顺便说一下，不需要修改<code class="fe mx my mz na b">eject</code>脚本。</p><p id="73fb" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">最后但同样重要的是，您需要创建一个<code class="fe mx my mz na b">config-overrides.js</code>文件，代码如下:</p><pre class="kg kh ki kj gt ni na nj nk aw nl bi"><span id="a73b" class="lz ma iq na b gy nm nn l no np">const { useBabelRc, override } = require("customize-cra");<br/>module.exports = override(useBabelRc());</span></pre><p id="5a74" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">这实际上会告诉<strong class="lb ir"> Webpack </strong>使用这个定制的<code class="fe mx my mz na b">.babelrc</code>文件。</p><p id="0780" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">仅此而已:)</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="ecbf" class="oe ma iq bd mb of op oh me oi oq ok mh jw or jx mk jz os ka mn kc ot kd mq oo bi translated">我的代码编辑器能识别这些路径吗？</h1><p id="2f3b" class="pw-post-body-paragraph ky kz iq lb b lc ms jr le lf mt ju lh lv mu lk ll lw mv lo lp lx mw ls lt lu ij bi translated">嗯，不…但是为了让你的<strong class="lb ir"> IDE </strong>足够聪明，以便在导入模块时理解<em class="la">绝对路径</em>，你必须做以下事情:</p><h2 id="31e9" class="lz ma iq bd mb mc md dn me mf mg dp mh lv mi mj mk lw ml mm mn lx mo mp mq mr bi translated">对于VSCode</h2><p id="9e46" class="pw-post-body-paragraph ky kz iq lb b lc ms jr le lf mt ju lh lv mu lk ll lw mv lo lp lx mw ls lt lu ij bi translated">创建一个<code class="fe mx my mz na b">jsconfig.js</code>，并向其中添加以下代码:</p><pre class="kg kh ki kj gt ni na nj nk aw nl bi"><span id="8a75" class="lz ma iq na b gy nm nn l no np">{<br/>  "compilerOptions": {<br/>    "baseUrl": ".",<br/>    "paths": {<br/>      "components/*": ["src/components/*"]<br/>    }<br/>  },<br/>  "exclude": ["node_modules"] <br/>}</span></pre><h2 id="f728" class="lz ma iq bd mb mc md dn me mf mg dp mh lv mi mj mk lw ml mm mn lx mo mp mq mr bi translated">对于IntelliJ Idea</h2><p id="2b85" class="pw-post-body-paragraph ky kz iq lb b lc ms jr le lf mt ju lh lv mu lk ll lw mv lo lp lx mw ls lt lu ij bi translated">右键点击<code class="fe mx my mz na b">src</code>文件夹<strong class="lb ir">使</strong>目录成为<strong class="lb ir">资源根目录</strong>。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><p id="81e2" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">有了这些配置，您就可以开始享受导入您喜欢的模块了。</p><p id="cbb5" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">祝编码愉快！</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="c9e2" class="oe ma iq bd mb of op oh me oi oq ok mh jw or jx mk jz os ka mn kc ot kd mq oo bi translated">资源</h1><p id="d186" class="pw-post-body-paragraph ky kz iq lb b lc ms jr le lf mt ju lh lv mu lk ll lw mv lo lp lx mw ls lt lu ij bi translated">回购链接:<br/><a class="ae ly" href="https://github.com/3tmaan/create-react-app-with-absolute-imports" rel="noopener ugc nofollow" target="_blank">https://github . com/3 tmaan/create-react-app-with-absolute-imports</a></p></div></div>    
</body>
</html>