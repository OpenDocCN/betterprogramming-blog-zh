<html>
<head>
<title>iOS 15 Brings Attributed Strings to SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS 15为SwiftUI带来了属性化字符串</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/ios-15-attributed-strings-in-swiftui-markdown-271204bec5c1?source=collection_archive---------1-----------------------#2021-06-08">https://betterprogramming.pub/ios-15-attributed-strings-in-swiftui-markdown-271204bec5c1?source=collection_archive---------1-----------------------#2021-06-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fc95" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">降价、颜色和格式—从未如此简单</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/81584fc7a1eced6d6f676baa9b6199a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9W37doDR2Leq62A2ru4DUw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="ae2e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">属性化字符串总是很难处理。在UIKit中，最基本的实现应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="0eef" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这已经够糟了，但对SwiftUI来说更糟。关于堆栈溢出的<a class="ae lw" href="https://stackoverflow.com/a/59531265/14351818" rel="noopener ugc nofollow" target="_blank">当前接受的答案</a>使用了<code class="fe lx ly lz ma b">UIViewRepresentable</code>和其他一些不必要的复杂代码。然而，这是唯一的方法——直到WWDC21。</p><h1 id="6192" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">降价</h1><p id="7824" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">Markdown无处不在:在GitHub上，堆栈溢出，Discord的消息气泡…现在，令人敬畏的格式化语言来到SwiftUI！一切正常，包括链接:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/f6803e20dcd249cc6bccf23a4a4a361f.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*2bMnLcGROv1wjkm6mNHr2A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按作者输出</p></figure><p id="9b97" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它与<code class="fe lx ly lz ma b">Text</code>的内置多行支持配合得很好，这也很好。你甚至可以继续使用视图修改器，比如<code class="fe lx ly lz ma b">.padding()</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/86cd85f3bca4e767b1af22a60cebbed9.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*TWW1yk3wJYqoRKXAE5PMMA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按作者输出</p></figure><p id="cdb9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里有一个快速降价备忘单:</p><ul class=""><li id="c3c9" class="na nb it la b lb lc le lf lh nc ll nd lp ne lt nf ng nh ni bi translated"><em class="nj">斜体</em>T3】</li><li id="98f9" class="na nb it la b lb nk le nl lh nm ll nn lp no lt nf ng nh ni bi translated"><strong class="la iu">加粗</strong>T4】</li><li id="5d4d" class="na nb it la b lb nk le nl lh nm ll nn lp no lt nf ng nh ni bi translated">删除线<code class="fe lx ly lz ma b">~Strikethrough~</code></li><li id="9db9" class="na nb it la b lb nk le nl lh nm ll nn lp no lt nf ng nh ni bi translated">代码<code class="fe lx ly lz ma b">`Code`</code></li><li id="aa37" class="na nb it la b lb nk le nl lh nm ll nn lp no lt nf ng nh ni bi translated">链接<code class="fe lx ly lz ma b">[Link](https://apple.com)</code></li></ul><p id="9b75" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">降价的唯一限制是你不能控制颜色。所以，让我们来看看实际的属性字符串…</p><h1 id="f080" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">属性字符串</h1><p id="78b7" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">还记得本文开头的那个<code class="fe lx ly lz ma b">NSAttributedString</code>烂摊子吗？下面是等价的，使用了<a class="ae lw" href="https://developer.apple.com/documentation/foundation/attributedstring" rel="noopener ugc nofollow" target="_blank">新的</a> <code class="fe lx ly lz ma b"><a class="ae lw" href="https://developer.apple.com/documentation/foundation/attributedstring" rel="noopener ugc nofollow" target="_blank">AttributedString</a></code> <a class="ae lw" href="https://developer.apple.com/documentation/foundation/attributedstring" rel="noopener ugc nofollow" target="_blank">结构</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/6e6539a9c24ca4cbd34de06ca0f9232d.png" data-original-src="https://miro.medium.com/v2/resize:fit:570/format:webp/1*fIWKUvkJC9E7-79fjhoqGw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按作者输出</p></figure><p id="889a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可能会想，<em class="nj">但是我可以用</em> <code class="fe lx ly lz ma b"><em class="nj">.foregroundColor(.blue)</em></code> <em class="nj">来做这件事！你说得对。但是如果你也想把中间的单词“归因”变成红色，那就不行了。</em></p><p id="bae3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有了<code class="fe lx ly lz ma b">AttributedString</code>，就可以简单的使用<code class="fe lx ly lz ma b"><a class="ae lw" href="https://developer.apple.com/documentation/foundation/attributedstring/3813128-range" rel="noopener ugc nofollow" target="_blank">range</a></code> <a class="ae lw" href="https://developer.apple.com/documentation/foundation/attributedstring/3813128-range" rel="noopener ugc nofollow" target="_blank">方法</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/25ecf155d6e7d74cdcf5d069ba6aab20.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/format:webp/1*YbognaoJl424OTJudztNyg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按作者输出</p></figure><p id="c36a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我还有一个方便的扩展，你可以用它来代替<code class="fe lx ly lz ma b">makeAttributedString()</code>函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/25ecf155d6e7d74cdcf5d069ba6aab20.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/format:webp/1*YbognaoJl424OTJudztNyg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按作者输出</p></figure><p id="dbea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当然，颜色不是你唯一能用<code class="fe lx ly lz ma b">AttributedString</code>控制的东西。还有很多。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/0e81ff3788776853b9401347be953744.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/1*PhqsP98RZNTQDPabza4aAw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按作者输出</p></figure><p id="1b0d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">…而这仅仅是开始。您可以在<a class="ae lw" href="https://developer.apple.com/documentation/foundation/attributescopes/swiftuiattributes" rel="noopener ugc nofollow" target="_blank"> SwiftUIAttributes </a>和<a class="ae lw" href="https://developer.apple.com/documentation/foundation/attributescopes/foundationattributes" rel="noopener ugc nofollow" target="_blank"> FoundationAttributes </a>文档中找到更多信息。</p><h1 id="b505" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">结论</h1><p id="2fa8" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">认识一下<code class="fe lx ly lz ma b">NSAttributedString</code>的替代者:在<code class="fe lx ly lz ma b">Text</code>和<code class="fe lx ly lz ma b">AttributedString</code>结构中的降价支持。这些将从iOS 15、macOS 12、tvOS 15和watchOS 8开始提供。你还需要Xcode 13。</p><p id="5dc7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在比以往任何时候都更容易刺激你的琴弦。</p></div></div>    
</body>
</html>