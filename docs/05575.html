<html>
<head>
<title>Vue.js and Malina.js Comparison</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.js和Malina.js比较</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/vue-3-vs-malina-js-abd97025ba81?source=collection_archive---------6-----------------------#2020-07-20">https://betterprogramming.pub/vue-3-vs-malina-js-abd97025ba81?source=collection_archive---------6-----------------------#2020-07-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6643" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">开发时编译是web开发的下一步，以Malina.js为例</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/27c78d0185d541202b5046704d15e9e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0RbIzOWndF7eXGXAxosvaQ.png"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">图片来源:作者</p></figure><p id="955e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>是一个非常受欢迎的框架，一个新版本即将推出:Vue 3。我想看看它的外观，并与Malina.js进行比较。<a class="ae ln" href="https://github.com/malinajs/malinajs" rel="noopener ugc nofollow" target="_blank"> Malina.js </a>是一个新的框架编译器(是的，再来一个，每天一个新的框架)。它在开发时将组件编译成JavaScript，因此web应用程序可以在没有框架的浏览器中工作。本文展示了开发时编译如何改进您的web开发。</p><p id="4971" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我创建了两个同样非常简单的应用程序。对于Vue app，我用的是Vue 3-rc + Vite和<a class="ae ln" href="https://composition-api.vuejs.org/#summary" rel="noopener ugc nofollow" target="_blank"> Composition API </a>，这是Vue 3的主要特色之一。(源代码和其他链接你可以在最后找到。)</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="6316" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">组件的JavaScript块</h1><p id="0e4b" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">让我们从JavaScript组件块开始:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ms"><img src="../Images/5e2525537cd52befd15ac10e54087652.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CzyHAJXLArbz1A1kqmQBHA.png"/></div></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">左边是Vue.js。右边是Malina.js。</p></figure><p id="411d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用Vue.js，需要注册组件并返回使用过的对象和函数(大概在以后的版本中可以优化，因为可以自动完成)。此外，反应性对象需要某种方式来使用它，所以要使用其他类型的库，您可能需要一些适应来从/到可观察对象的转换。比如上面的代码，我要给可观察的对象加上<code class="fe mx my mz na b">.value</code>。</p><p id="27ee" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Malina.js不使用反应对象。它使用常见的JavaScript变量和普通JavaScript进行操作，因此使用其他类型的库更容易，代码本身看起来也更整洁。</p><p id="627a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">还有，我注意到新的Composition API看起来很像2011年流行的<a class="ae ln" href="https://knockoutjs.com/" rel="noopener ugc nofollow" target="_blank"> Knockout.js </a>。可能语法是受Knockout.js的启发，被时间证明了，有些开发者真的很喜欢:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="8622" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是我个人更喜欢更干净的语法，接近普通的JavaScript。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="1efa" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">模板</h1><p id="9e8f" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">让我们看看组件模板:</p><div class="kg kh ki kj gt ab cb"><figure class="nd kk ne nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><img src="../Images/6bd16f54d10b8f79122d20c299e1ca5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*wunNROML1NUDS1XyHDodEA.png"/></div></figure><figure class="nd kk ne nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><img src="../Images/4c8643655b379938715ec2fa9854eb88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*89y2De1TusmAM3z2Uiz_lQ.png"/></div><p class="kn ko gj gh gi kp kq bd b be z dk nj di nk nl translated">左边是Vue.js，右边是Malina.js。</p></figure></div><p id="d1f2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在Vue.js中，你可以在HTML元素中放置像<code class="fe mx my mz na b">v-if/v-for</code>这样的控制指令。这是一种非常流行的方式，与Angular.js和其他框架一样，但有时它会让您创建额外的HTML元素，从而使模板变得庞大。</p><p id="8653" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Malina.js使用另一种方式在HTML元素之外放置控制指令，这也很流行，例如在Handlebars.js、Mustache.js、Svelte.js、Jinja2和许多其他模板引擎中使用。因为控制指令没有与HTML元素混合在一起，并能立即吸引眼球，所以可读性更好。</p><p id="1a24" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">也有其他的方法，比如JSX，用在不同的框架中，所以更多的是你喜欢什么。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="d100" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">作用域CSS</h1><p id="a074" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">作用域CSS是构建现代web应用程序的一个非常重要的特性。它在Vue.js和Malina.js中的工作方式是一个很好的例子，说明了为什么在开发时编译是有帮助的。</p><p id="4465" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Vue.js可以在运行时在浏览器中构建作用域CSS。Vue.js负担不起为CSS和选择器使用合适的库，因为它们可能非常重。如果要使用它们的话，Vue.js会重得多，所以Vue.js使用一种简单的方法来制作限定了作用域的CSS:它只是用一个特殊的属性来标记所有的DOM元素。</p><p id="4149" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Malina.js在开发时编译组件，因此它可以使用任何库，不管它们有多重，因为它们没有加载到浏览器中。js为CSS选择了一个合适的库来对模板进行更精确的修改。它基于组件的CSS选择器向元素添加了一个特殊的类，因此，它构建了一个更加紧凑和高效的DOM。</p><p id="b9e8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在下面的代码片段中，你可以看到Malina.js只标记了5个DOM元素，而Vue.js标记了所有，甚至<code class="fe mx my mz na b">&lt;br&gt;</code>。</p><div class="kg kh ki kj gt ab cb"><figure class="nd kk ne nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><img src="../Images/c2991b55a8c6ebfb27de4136df983cf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*OWLPT-Tls7yfozLTs0BZtQ.png"/></div></figure><figure class="nd kk ne nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><img src="../Images/c2b99d3de8285740b000b9e825a3dfe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*T_tO7vkHFiIvMAxhdy-ktA.png"/></div><p class="kn ko gj gh gi kp kq bd b be z dk nj di nk nl translated">左边是Vue.js，右边是Malina.js</p></figure></div></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="4c84" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">捆绑大小</h1><ul class=""><li id="a7f3" class="nm nn iq kt b ku mn kx mo la no le np li nq lm nr ns nt nu bi translated">vue . js:20 kb gzip</li><li id="3309" class="nm nn iq kt b ku nv kx nw la nx le ny li nz lm nr ns nt nu bi translated">malina . js:2.9 kb gzip</li></ul><p id="8825" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">包的大小是开发时编译的另一个优势，因为包的大小变得很小，只包含所需的特性。当你不想附加一个完整的框架来保持你的小部件很薄的时候，它特别适合于小部件和嵌入式应用。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="3ade" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">表演</h1><p id="6ef0" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">填充5000个项目:</p><ul class=""><li id="098f" class="nm nn iq kt b ku kv kx ky la oa le ob li oc lm nr ns nt nu bi translated">vue:478毫秒</li><li id="96a2" class="nm nn iq kt b ku nv kx nw la nx le ny li nz lm nr ns nt nu bi translated">马利纳:322毫秒(快了48%)</li></ul><p id="fc4e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">删除5000行中的一行:</p><ul class=""><li id="1f16" class="nm nn iq kt b ku kv kx ky la oa le ob li oc lm nr ns nt nu bi translated">vue:185毫秒</li><li id="da39" class="nm nn iq kt b ku nv kx nw la nx le ny li nz lm nr ns nt nu bi translated">malina:97毫秒(大约快两倍)</li></ul><p id="ab25" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在Firefox 78中测试，<a class="ae ln" href="https://gist.github.com/lega911/4372e9eabb3bba29057be0f7766264a9" rel="noopener ugc nofollow" target="_blank">基准源</a>。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="70a1" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">结论</h1><p id="f495" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">Malina.js是一个例子，它展示了开发时编译的优势。它具有更小的包大小，更准确地处理模板和CSS(由于使用了更合适的库)，并提供了更多处理JavaScript的机会(由于使用了成熟的JavaScript解析器，该解析器太重而无法加载到浏览器中)。app的源代码可以更紧凑，比如上面的app，一个有Malina.js的app稍微紧凑一点(52行代码，而Vue.js app是79行代码)。</p><p id="5871" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">加载到浏览器中的框架必须很小，这意味着你只能使用功能性的、较小的库来提供较小的特性(例如作用域CSS)。</p><p id="cf6e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">开发时编译让你自由呼吸，使用成熟的库，这给你更多的机会。2020年后，开发时间的编译可能是前端框架的下一个级别。</p><p id="9e5d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，我会推荐看看<a class="ae ln" href="https://github.com/sveltejs/svelte" rel="noopener ugc nofollow" target="_blank"> Svelte.js </a>，它采取了类似的方法。</p><p id="637e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">非常感谢帮助开发Malina.js的Alexey Schebelev。</p><p id="30d6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢阅读。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="f12d" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">链接</h1><ul class=""><li id="aca1" class="nm nn iq kt b ku mn kx mo la no le np li nq lm nr ns nt nu bi translated"><a class="ae ln" href="https://github.com/lega911/vuejs_malina_example" rel="noopener ugc nofollow" target="_blank">应用来源</a></li><li id="23f8" class="nm nn iq kt b ku nv kx nw la nx le ny li nz lm nr ns nt nu bi translated"><a class="ae ln" href="https://github.com/malinajs/malinajs" rel="noopener ugc nofollow" target="_blank"> Malina.js </a>和<a class="ae ln" href="https://malinajs.github.io/repl/" rel="noopener ugc nofollow" target="_blank">在线编辑REPL </a></li><li id="d75d" class="nm nn iq kt b ku nv kx nw la nx le ny li nz lm nr ns nt nu bi translated"><a class="ae ln" href="https://gist.github.com/lega911/4372e9eabb3bba29057be0f7766264a9" rel="noopener ugc nofollow" target="_blank">基准源</a></li></ul></div></div>    
</body>
</html>