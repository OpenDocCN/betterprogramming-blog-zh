<html>
<head>
<title>Create a Multi-Segment Picker in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中创建多段选择器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-multi-segment-picker-in-swiftui-9c5b909971f5?source=collection_archive---------0-----------------------#2020-08-08">https://betterprogramming.pub/how-to-multi-segment-picker-in-swiftui-9c5b909971f5?source=collection_archive---------0-----------------------#2020-08-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="830b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在你的用户界面中选择多个东西</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e693ead8cb94e7c3d48c05a5466821b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PAkiRkrU7ul86Ost"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">迈克尔·拉罗萨在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="21b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">离开SwiftUI内容几周后，我回来了！在这篇文章中，我们将讨论如何创建一个多段选择器。这对于选择持续时间(例如一天、四周等等。)，这是我的用例。这是最终产品:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/4969ee21c9209b3b40a6475dfee5718d.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/format:webp/1*b3zXd-ozwSUJSCYt6C2kAA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="479f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们首先在SwiftUI中定义一个简单的单段选择器:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lw lx l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/7e4fac01b9ee71a3c2904e43164be816.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*0cnHvdJHHVgMMDD3Za5VBg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="4279" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们快速回顾一下:</p><ol class=""><li id="ba09" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">SwiftUI选取器需要某种类型的<code class="fe mi mj mk ml b">data</code>(即选取器值是什么)。它还需要一个<code class="fe mi mj mk ml b">state</code>或一个<code class="fe mi mj mk ml b">binding</code>来通知当前选择的值。</li><li id="cae9" class="lz ma it lb b lc mm lf mn li mo lm mp lq mq lu me mf mg mh bi translated">SwiftUI使得声明提货人<a class="ae ky" href="https://developer.apple.com/documentation/swiftui/picker" rel="noopener ugc nofollow" target="_blank">相对容易</a>。第一个参数是选取器的标签，第二个(<code class="fe mi mj mk ml b">selection</code>)是当前选择的绑定。最后一个参数是创建一系列视图的闭包。每个视图都是一个可选值。</li><li id="44cd" class="lz ma it lb b lc mm lf mn li mo lm mp lq mq lu me mf mg mh bi translated">在选择器中，我们用<code class="fe mi mj mk ml b">ForEach</code>创建了一系列视图。注意，我们不是迭代<code class="fe mi mj mk ml b">data</code>本身，而是迭代索引。只要<code class="fe mi mj mk ml b">ForEach</code>中的项目数量不变，这就没问题。如果是，考虑将<code class="fe mi mj mk ml b">data</code>中的项目与<code class="fe mi mj mk ml b">Identifiable</code>中的项目相一致。</li><li id="6e17" class="lz ma it lb b lc mm lf mn li mo lm mp lq mq lu me mf mg mh bi translated">我们使用<code class="fe mi mj mk ml b">Text</code>显示该值，并给它一个索引的<code class="fe mi mj mk ml b">tag</code>值。这意味着每个<code class="fe mi mj mk ml b">Text</code>实例都与数组中的索引相关联。这与SwiftUI的<code class="fe mi mj mk ml b">selection</code>参数一起决定将哪个项目显示为当前选择。</li></ol></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="6c93" class="my mz it bd na nb nc nd ne nf ng nh ni jz nj ka nk kc nl kd nm kf nn kg no np bi translated">创建多个段</h1><p id="21fd" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">这是非常标准的，但是我们如何开始为选取器定义多个段呢？在我看来，首先从视图模型开始总是好的。这样，我们可以清楚地描述传入数据的样子，并相应地创建我们的视图:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="2ec3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的视图模型只有一个属性<code class="fe mi mj mk ml b">segments</code>，它是一个元组数组。每个元组表示选取器中的一个段。每个元组由以下部分组成:</p><ol class=""><li id="b55a" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">一个<code class="fe mi mj mk ml b">String</code>标签。</li><li id="c40f" class="lz ma it lb b lc mm lf mn li mo lm mp lq mq lu me mf mg mh bi translated">对选择的绑定。在这种情况下，我们使用选择索引作为整数，但是您可以通过更改类型别名来使用您认为合适的任何绑定。</li><li id="e275" class="lz ma it lb b lc mm lf mn li mo lm mp lq mq lu me mf mg mh bi translated">特定段的值数组。我们已经将它们定义为类型<code class="fe mi mj mk ml b">String</code>，但是同样，类型别名可以用于您的用例。</li></ol><p id="bc82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以定义视图:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lw lx l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/4969ee21c9209b3b40a6475dfee5718d.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/format:webp/1*b3zXd-ozwSUJSCYt6C2kAA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="d91e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不错！这正是我们想要的。让我们看看风景。注意，我们使用<code class="fe mi mj mk ml b">HStack</code>声明了一个水平排列的拣选器集合:</p><ol class=""><li id="b1ea" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">为了能够定义多个段，我们必须相应地调整每个选取器的大小。<code class="fe mi mj mk ml b">GeometryReader</code>给出了父视图的大小。然后我们可以用它来相应地框住每一个<code class="fe mi mj mk ml b">Picker</code>。</li><li id="9299" class="lz ma it lb b lc mm lf mn li mo lm mp lq mq lu me mf mg mh bi translated">如上所述，为了让我们以水平方式布置拣选器，我们使用了<code class="fe mi mj mk ml b">HStack</code>。</li><li id="2aab" class="lz ma it lb b lc mm lf mn li mo lm mp lq mq lu me mf mg mh bi translated">我们迭代不同的选择器片段，并使用<code class="fe mi mj mk ml b">ForEach</code>为每个片段定义一个选择器。请注意，每个单个选取器的定义与我们最初的单段选取器示例相同。</li><li id="2d01" class="lz ma it lb b lc mm lf mn li mo lm mp lq mq lu me mf mg mh bi translated">我们使用<code class="fe mi mj mk ml b">.frame(...)</code>将每个拣选器调整到合适的宽度，即父宽度除以拣选器的数量。</li><li id="d5cd" class="lz ma it lb b lc mm lf mn li mo lm mp lq mq lu me mf mg mh bi translated">使用<code class="fe mi mj mk ml b">.clipped()</code>是这里的关键。如果我们不使用修改器，你会看到选择器的线条会重叠。<code class="fe mi mj mk ml b">clipped()</code>将确保每个拾取器不会超出每个视图的边界。</li></ol><p id="0113" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就对了:SwiftUI中的多段选择器。访问<a class="ae ky" href="https://gist.github.com/frankfka/704645201f384d93afefc9385b2eed81" rel="noopener ugc nofollow" target="_blank"> GitHub playground </a>获得多段拾取器的所有代码。</p></div></div>    
</body>
</html>