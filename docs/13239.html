<html>
<head>
<title>Image Processing in Python — Draw Aesthetic Portraits Using Only Nails and a Thread</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的图像处理——仅使用指甲和一根线绘制美学肖像</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/drawing-portraits-using-only-nails-and-a-thread-with-python-1cfd8c6dd040?source=collection_archive---------12-----------------------#2022-08-09">https://betterprogramming.pub/drawing-portraits-using-only-nails-and-a-thread-with-python-1cfd8c6dd040?source=collection_archive---------12-----------------------#2022-08-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/></div><div class="ab cl jn jo hu jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="ij ik il im in"><h2 id="8e01" class="ju jv iq bd jw jx jy dn jz ka kb dp kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">释放你内心的艺术家。</h2><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/4832a9ac22fc47c198627c718e2e66a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gKVEnaotwq7UXadLcyxzPw.jpeg"/></div></div><p class="lc ld gj gh gi le lf bd b be z dk translated">乔治亚·福勒的玛丽莲·梦露。作者右图。</p></figure><p id="57e2" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">艺术家变得越来越有创造力，以至于他们可能会让我们思考:“他们怎么知道他们可以做到这一点”。在Instagram reels和Tiktok上非常出名的一种肖像绘画方式是用一根长线和一组指甲。艺术家将钉子钉在圆形画布的整个圆周上，然后开始用线将钉子连接起来。在这样做的同时，被画的人的形象开始形成。</p><p id="9f42" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">我在绘画方面没有任何天赋，我认为，根据指甲连接的顺序，即使是我也能画出有美感的肖像。我所要做的就是写一个代码，为我提供这个钉子的顺序。</p><h1 id="efde" class="mb jv iq bd jw mc md me jz mf mg mh kc mi mj mk kg ml mm mn kk mo mp mq ko mr bi translated">这个想法</h1><p id="0446" class="pw-post-body-paragraph lg lh iq li b lj ms ll lm ln mt lp lq kd mu ls lt kh mv lv lw kl mw ly lz ma ij bi translated">主要想法是相当幼稚的。我们拍一张灰度照片，在内切圆的圆周上钉上假想的钉子。然后，从一个随机的钉子开始，我们计算这个钉子和所有其他钉子之间的线的模糊度。最模糊的线条将会被画在我们的画布上。我们重复这个步骤数百次，然后我们将获得我们的最终图像。</p><h1 id="d5bc" class="mb jv iq bd jw mc md me jz mf mg mh kc mi mj mk kg ml mm mn kk mo mp mq ko mr bi translated">技术</h1><h2 id="dee1" class="ju jv iq bd jw jx jy dn jz ka kb dp kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">对计算机来说，图像是什么？</h2><p id="ea77" class="pw-post-body-paragraph lg lh iq li b lj ms ll lm ln mt lp lq kd mu ls lt kh mv lv lw kl mw ly lz ma ij bi translated">为了实现这个想法，我们必须想象图像是一个矩阵，其中的元素是像素。每个像素被编码成一个三元素阵列:它的RGB码。这是一个表示三原色强度的代码:红色、绿色和蓝色。</p><p id="dd47" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">事实上，由于每种颜色都是这三种颜色的组合，我们可以通过这种类型的数组来定义图像。我们应该注意，每种颜色的强度都是0到255之间的int值，0是最低强度，255是最高强度。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mx"><img src="../Images/6784c067065f13b1f6dfbbbd5165043b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R4oM9p1aRqd5PzXBraYm3w.png"/></div></div><p class="lc ld gj gh gi le lf bd b be z dk translated"><strong class="bd my"> </strong> <a class="ae mz" href="https://tutorials.freshersnow.com/css/css-colors/" rel="noopener ugc nofollow" target="_blank"> <strong class="bd my">上图新鲜出炉</strong> </a></p></figure><p id="4bbf" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">每两个钉子之间的连线可以看作是一个像素向量。评估它的模糊性与计算向量的范数是一样的。我们可能想到的通常的范数是欧几里德范数、L1范数和无穷范数。</p><p id="0306" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">然而，无穷范数并不是一个精确的范数，因为它会让我们在有黑色像素的地方画出每一条线，即使它是这条线上唯一的非白色像素。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi na"><img src="../Images/99d67635f6cf3fd79440453716a53fdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*4eOOacsfhLuJwDttf1e92g.png"/></div><p class="lc ld gj gh gi le lf bd b be z dk translated">如果我们使用无穷范数，上面的线的模糊性不如下面的线，然而，上面的线总体上比另一条更暗，因此它是需要被画出的线。</p></figure><p id="fd0f" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">另一方面，欧几里德规范将是相当昂贵的，因为我们希望重复这个过程几百次。这就是为什么我们将采用L1范数:我们将增加假想线中每个像素的强度值，然后为了归一化，我们将除以该线中像素的数量(因为将会有更长的线，但不会像其他线那样模糊)。</p><p id="b2a0" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">“规范”最低的那一行是最晦涩难懂的一行。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/f27ca10e32128c56ab2f0a8422316ffd.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*7E0Usu1tBkMj3PBL52Jmqg.png"/></div><p class="lc ld gj gh gi le lf bd b be z dk translated">模糊公式，L是线矢量。</p></figure><p id="0b1b" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">在每一步中，从图像中选择一条线后，我们将把同一条线的颜色变成白色，这样我们就不会一次又一次地画同一条线。</p><h1 id="d24a" class="mb jv iq bd jw mc md me jz mf mg mh kc mi mj mk kg ml mm mn kk mo mp mq ko mr bi translated">使用的Python库</h1><p id="d0b4" class="pw-post-body-paragraph lg lh iq li b lj ms ll lm ln mt lp lq kd mu ls lt kh mv lv lw kl mw ly lz ma ij bi translated">我们将使用3个主要库:<a class="ae mz" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"> Numpy </a>、<a class="ae mz" href="https://scikit-image.org/" rel="noopener ugc nofollow" target="_blank"> Sci-kit Image (skimage) </a>和<a class="ae mz" href="https://docs.python.org/3/library/turtle.html" rel="noopener ugc nofollow" target="_blank"> Turtle </a>。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/3989d0175ba9e945b91e74e87c3bc12f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oBt0pNKvLDlFzm1Gn6rrxQ.jpeg"/></div></div><p class="lc ld gj gh gi le lf bd b be z dk translated">Numpy，Skimage &amp; Turtle</p></figure><p id="cf7e" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">撇除可以让我们处理图像。它读取图片(RGB代码的矩阵)。它还可以为我们提供连接两个像素的所有像素的坐标向量，这对我们计算线条的模糊度非常有用。</p><p id="8b8d" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">Numpy将允许我们做一些数学运算，例如计算向量的范数(线条的模糊度)以及使用角度和“cos”和“sine”函数确定钉子的坐标。</p><p id="6c08" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">最后，Turtle将允许我们绘制最终图像。Turtle的有趣之处在于它显示了绘图的过程，所以我们不必为了看到结果而等待代码完成。</p><h1 id="b377" class="mb jv iq bd jw mc md me jz mf mg mh kc mi mj mk kg ml mm mn kk mo mp mq ko mr bi translated">履行</h1><p id="8bf0" class="pw-post-body-paragraph lg lh iq li b lj ms ll lm ln mt lp lq kd mu ls lt kh mv lv lw kl mw ly lz ma ij bi translated">我们将首先导入前面的三个库。然后，我们将读取我们将要绘制的图像，并将其裁剪成一个正方形。接下来，我们将锤打我们想象中的指甲。我们将使用300个钉子。</p><p id="2793" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">我们打开画布，我们将和Turtle一起在上面画画。然而，这个库使用坐标作为笛卡尔网格:0在中心，x轴从左到右，y轴从下到上。但由于我们正在处理的图像在某种程度上是一个矩阵，因此0在左上角，y轴朝向底部。我们将需要翻译我们的屏幕。</p><p id="f4ac" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">为了得到我们要连接的钉子的顺序，我们将把钉子的号码按顺序连接成一个字符串。</p><p id="72c6" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">现在让我们进入主要部分:for循环。</p><p id="f7ac" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">我们将从列表中的第一个钉子开始，我们称之为<code class="fe nc nd ne nf b">next_nail</code>。第一个for循环允许我们选择将要进行的迭代次数。这基本上是我们将要绘制的链接的数量。嵌套的for循环允许我们搜索所有其他的钉子，哪一个用最模糊的行链接到我们的<code class="fe nc nd ne nf b">next_nail</code>。因此，我们将比较模糊度参数。<code class="fe nc nd ne nf b">rr1</code>，<code class="fe nc nd ne nf b">cc1</code>是我们用<code class="fe nc nd ne nf b">skimage</code>库的<code class="fe nc nd ne nf b">draw.line</code>函数得到的像素矢量。</p><p id="a963" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">然后，我们计算模糊度:它是A/B参数。由于我们在寻找最模糊的线，我们需要最小的A/B值，因此，在j循环中，我们用我们能找到的最好的钉子更新每个时间参数<code class="fe nc nd ne nf b">next_nail</code>，用我们的钉子和<code class="fe nc nd ne nf b">next_nail</code>之间的线更新<code class="fe nc nd ne nf b">best_line</code>。最后，我们在海龟画布上画出<code class="fe nc nd ne nf b">best_line</code>。</p><p id="c6ce" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">请注意，我们使用“<code class="fe nc nd ne nf b">graph_nails</code>”坐标是因为我们向上指定的原因。</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="ng nh l"/></div></figure><h1 id="62a5" class="mb jv iq bd jw mc md me jz mf mg mh kc mi mj mk kg ml mm mn kk mo mp mq ko mr bi translated">行动中的代码</h1><p id="eb0f" class="pw-post-body-paragraph lg lh iq li b lj ms ll lm ln mt lp lq kd mu ls lt kh mv lv lw kl mw ly lz ma ij bi translated">代码的执行展示了画图的全过程。</p><p id="254b" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">这是莉莉·柯林斯肖像的延时摄影</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ni"><img src="../Images/ca96a535036040528d2da649ccaf0e1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5oVtDgt1X2YzNx5pPnDTvA.gif"/></div></div><p class="lc ld gj gh gi le lf bd b be z dk translated">莉莉·柯林斯肖像的制作</p></figure><p id="4c52" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">最后的结果是这样的。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/40d79b9aeb57523d1cc46a84b645c2f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*P3i29BXA_wav8bJsU8n8Bg.png"/></div><p class="lc ld gj gh gi le lf bd b be z dk translated">作者图片</p></figure><p id="7390" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">需要链接的钉子编号如下:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi nk"><img src="../Images/bdebbbd4916dbbf6f8811b93f87417ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kQj_NrPVaUBVTF-gSOiZNw.png"/></div></div></figure><p id="644a" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">显示画这幅画像大概花了7分钟。</p><h1 id="465b" class="mb jv iq bd jw mc md me jz mf mg mh kc mi mj mk kg ml mm mn kk mo mp mq ko mr bi translated">限制</h1><p id="11b1" class="pw-post-body-paragraph lg lh iq li b lj ms ll lm ln mt lp lq kd mu ls lt kh mv lv lw kl mw ly lz ma ij bi translated">这种代码的主要限制是它可以尝试的图片类型。他们需要有具体的对比细节，否则，它不会看起来很好。</p><p id="fa11" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">另一个限制是，照片需要尽可能“方正”。如果矩形的长度与宽度之比离1太远，方形裁剪将去掉太多细节，并且提供较差的结果。</p><h1 id="f0bb" class="mb jv iq bd jw mc md me jz mf mg mh kc mi mj mk kg ml mm mn kk mo mp mq ko mr bi translated">例子</h1><p id="7c6d" class="pw-post-body-paragraph lg lh iq li b lj ms ll lm ln mt lp lq kd mu ls lt kh mv lv lw kl mw ly lz ma ij bi translated">结果取决于照片的质量。对一些人来说可能非常清楚，对另一些人来说可能真的不清楚。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/2ed6221de60b752e7e2c85d97e7e0815.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kzHbxjJ4008NmyXXwJh4mg.jpeg"/></div></div><p class="lc ld gj gh gi le lf bd b be z dk translated">莉莉·柯林斯肖像</p></figure><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/4832a9ac22fc47c198627c718e2e66a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gKVEnaotwq7UXadLcyxzPw.jpeg"/></div></div><p class="lc ld gj gh gi le lf bd b be z dk translated">左照片由格鲁吉亚福勒。作者右图。</p></figure><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/78cc6631f889f9999df51c8c05bc5906.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ouNhZ8QRkSkharwtwLhyiQ.jpeg"/></div></div><p class="lc ld gj gh gi le lf bd b be z dk translated">左图由阿塔坎-埃尔库特·乌松<a class="ae mz" href="https://www.stocksy.com/Atakan696" rel="noopener ugc nofollow" target="_blank">拍摄。作者右图。</a></p></figure><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/cc096291ce44a0ae083b184a6b55bfa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BCXrTYpleiBZYFOWHICVTg.jpeg"/></div></div><p class="lc ld gj gh gi le lf bd b be z dk translated">一个不好的结果的例子。左图由<a class="ae mz" href="https://www.pinterest.com/thomasfulfer/" rel="noopener ugc nofollow" target="_blank">托马斯·富尔弗</a>拍摄。作者右图。</p></figure><h1 id="3fbd" class="mb jv iq bd jw mc md me jz mf mg mh kc mi mj mk kg ml mm mn kk mo mp mq ko mr bi translated">结论</h1><p id="504a" class="pw-post-body-paragraph lg lh iq li b lj ms ll lm ln mt lp lq kd mu ls lt kh mv lv lw kl mw ly lz ma ij bi translated">这个迷你项目是对图像处理初学者的一个很好的介绍。仍然有许多可以改进的地方，比如定制一个过滤器，使大多数图片与代码兼容。我们也可以考虑单色照片，它只需要一些彩色线，以提供一个良好的结果。这个项目最后一个很好的改进是让机器学习如何识别面部细节(眼睛、鼻子、耳朵……):这样，连接指甲可能会变得更精确。</p><p id="a18a" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq kd lr ls lt kh lu lv lw kl lx ly lz ma ij bi translated">最后，感谢大家一直读到最后。我希望这很有趣。如果你有任何问题，请随时回复。</p></div></div>    
</body>
</html>