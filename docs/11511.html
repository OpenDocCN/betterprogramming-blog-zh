<html>
<head>
<title>How To Connect Flutter To Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将Flutter连接到Node.js</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-connect-flutter-to-node-js-3e13b356c08d?source=collection_archive---------0-----------------------#2022-03-27">https://betterprogramming.pub/how-to-connect-flutter-to-node-js-3e13b356c08d?source=collection_archive---------0-----------------------#2022-03-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9ada" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过后端为您的应用提供动力</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6761077792bbe5c583b624e2fa4d399a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y2v3JrQ1z5JVIiflRBiHMQ.jpeg"/></div></div></figure><p id="48ea" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你正在构建一个新的Flutter应用程序，你可能想要使用后端来处理各种数据。在这里，我将告诉你具体如何做。这将是一个初学者友好的教程，适合对编程稍有了解的人。理解其中大部分内容的最好方法是跟着它一起编码。</p><p id="bdbb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以让我们从创建一个新的颤振项目开始。这是将创建一个新的Flutter项目并运行它的命令。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="fa71" class="lv lw it lr b gy lx ly l lz ma">flutter create example &amp;&amp; cd example &amp;&amp; flutter run</span></pre><p id="f8fc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果一切运行良好，那么让我们打开我们的<code class="fe mb mc md lr b">pubspec.yaml</code>文件，并添加<code class="fe mb mc md lr b">web_socket_channel: ^2.1.0</code>到其中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="a800" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在这已经完成了，让我们打开你的<code class="fe mb mc md lr b">lib</code>文件夹中的<code class="fe mb mc md lr b">main.dart</code>。正如你所看到的，Flutter已经为一个基本的Flutter应用准备了一个例子。</p><p id="1e09" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以我们把目前对我们没用的都删了吧。此外，由于这是一个用于后端应用程序的应用程序，我们将不会把重点放在用户界面上。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="d432" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">太好了！现在你有一个非常无聊的应用程序，什么也不做。让我们改变一下，让它做点什么。所以我们将在<code class="fe mb mc md lr b">_MyHomePageState</code>类中创建一个<code class="fe mb mc md lr b">TextField</code>和一个<code class="fe mb mc md lr b">TextButton</code>小部件。</p><p id="2e3f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们还可以创建一个空白，这样，如果你按下按钮，它会打印出消息。你可以在这里看这个例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="01cb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是我们的应用程序的样子。现在让我们将消息发送到我们的后端。另外，你必须导入<code class="fe mb mc md lr b">web_socket_channel</code>来确保我们可以使用这个包。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="f098" class="lv lw it lr b gy lx ly l lz ma">import ‘package:web_socket_channel/io.dart’;</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="e96c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有趣的是，它既简单又酷！所以现在我们的Flutter app已经完成了。我们现在可以继续Node.js后端了。让我们通过运行这个命令来创建一个新项目。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="f441" class="lv lw it lr b gy lx ly l lz ma">mkdir server &amp;&amp; cd server &amp;&amp; touch index.js &amp;&amp; npm init</span></pre><p id="ff82" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将为我们创建一个新的Node.js项目。现在我们必须导入新的包，我们将使用express和ws。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="f9b6" class="lv lw it lr b gy lx ly l lz ma">npm install ws &amp;&amp; npm install express</span></pre><p id="f2c8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你的<code class="fe mb mc md lr b">package.json</code>文件应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="0bb5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们打开<code class="fe mb mc md lr b">index.js</code>来修改这个文件。我们将创建一个标准的express函数。像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="adcd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是我们现在没有处理任何来自我们应用程序的后端数据。所以我们现在可以通过创建另一个这样的函数来实现:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="f532" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">尝试从应用程序向服务器发送消息，看看是否有效。如果它对你不起作用，你可能做错了什么。现在，让我们将数据发送回应用程序，如果用户说:“你好”。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="60a6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">就是这样！您成功创建了一个具有基本后端的基本应用程序。现在，您已经了解了如何来回发送数据。</p><p id="e252" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以做更多的事情，记住唯一的限制是你的想象力。如果你有任何问题，请随时提问。此外，我将制作一个关于如何制作聊天应用程序的教程。敬请关注。</p></div></div>    
</body>
</html>