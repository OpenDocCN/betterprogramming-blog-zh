# 什么是图形数据库？

> 原文：<https://betterprogramming.pub/what-is-graph-database-anyway-86748b5bcb5>

## 用简单的语言解释复杂的概念

![](img/6b6cb332f4f5e1b18e3b34352c11f2ae.png)

克林特·王茂林在 [Unsplash](https://unsplash.com/s/photos/connections?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片

图形数据库并不是一个新概念。图论在 20 世纪 60 年代得到了积极的发展，从那时起，为图结构建立存储的第一次尝试已经出现。总的想法是将图作为数据结构持久化，并通过查询对其进行操作。它就像是图形和数据库的混合体，吸取了两者的精华。

图形数据库的主要驱动力是社交网络的扩展和推荐引擎的改进。社交网络希望更好地了解这个人的关系，以便推荐新朋友，而推荐引擎则挖掘这个人的兴趣，以找到理想的下一个提议。

让我们探索一下图形数据库是如何工作的，它们的主要原理和优点。

# 想法

从图论中，我们知道每个图都由两个基本部分组成:顶点和关系。顶点定义了实际的数据，关系描述了不同的顶点如何相互连接。最简单也是最受欢迎的例子是社交图:

![](img/aee45fa8447d90eaccecbf156d0bd79b.png)

社交图的一个例子

我们可以看到图中的每个节点代表一个人。每个人都有姓名和年龄的属性。描述具有这些属性的人看起来与 SQL 数据库中的条目相似——但这是唯一的相似之处。

图形数据库的不同之处在于顶点之间的连接。每个节点可以有多个关系(或边)。在更复杂的系统中，边可以有自己的属性。例如，权重定义节点之间的连接有多强。在我们的例子中，顶点之间有不同类型的连接。所有连接及其属性也会被持久化。

在 PostgreSQL 和 MySQL 这样的关系数据库中，条目之间的关系是通过一对多和多对多关系来定义的。这些关系不是显式保持的。我们必须运行多个查询，并通过 JOIN 命令组合结果。这使得读取操作变得复杂而繁重。当数据库变得足够大时，问题就会出现，然后我们需要找到一个解决方法。

与 SQL 数据库不同，使用图形数据库，我们能够查询条目及其连接。最终的查询很简单，不需要复杂的组合。它不仅通过持久化条目，还通过持久化条目之间的关系来实现——这是因为图形数据库是非关系(NoSQL)数据库。对于图形来说，它确实工作得很好。

# 例子

有许多可用的图形数据库。仅举几个例子:Neo4j、ArangoDB、OrientDB 和 AWS Neptune。每一个都提供了通用的操作和一组独特的功能。

随着数据库选择的多样化，也有一些缺点。到目前为止，对于关系数据库，还没有像 SQL 这样的标准查询语言。最流行的查询语言是 [Cypher](https://neo4j.com/developer/cypher/) 、 [SPARQL](https://www.w3.org/TR/rdf-sparql-query/) 和 [Gremlin](https://tinkerpop.apache.org/gremlin.html) 。它们的语法不同。积极的一面是，最流行的图形数据库同时支持其中一些。

为了简单起见，我们将只选择一种查询语言，并看看如何应用它。Gremlin 看起来和其他的不一样，让我们更深入地了解一下。

通过下面的查询，我们能够创建两个条目并在它们之间添加一个连接。前两行用命令`addV()`创建顶点。每个条目都有一个自动增量 ID。然后我们用命令`addE()`在它们之间建立一条边，参考每个顶点的 ID。

```
g.addV('person').property('name', 'James').property('age', 28)
g.addV('person').property('name', 'Paul').property('age', 32)g.V('1').addE('knows').to(g.V('2'))
```

使用命令`g.V()`和`g.E()`可以遍历顶点和节点。Gremlin 查询语言有各种可以相互链接的函数。通过这种方式，可以执行过滤并找到节点之间的复杂连接。

```
g.V().has('name', 'James').out('knows').valueMap()
```

从上面的例子中，我们可以找出连接类型为`knows`且顶点为`James`的所有节点。Gremlin 查询语言具有可读的语法，有助于开发者更快地学习和理解它。

# 结论

当需要存储紧密连接的数据时，图数据库可以满足特殊的需求。在这种情况下，查询和过滤数据会更简单。因此，如果您的数据有很多关系，并且您计划使用它们，那么您应该考虑一个图形数据库。

但是，它们仍然不像关系数据库那样精简和标准化，所以请记住，您需要花一些时间来选择合适的数据库引擎和支持的查询语言。