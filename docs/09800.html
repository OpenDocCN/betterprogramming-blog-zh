<html>
<head>
<title>Managing Your AWS Secrets With Doppler</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用多普勒管理您的AWS秘密</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/manage-your-aws-secrets-with-doppler-c0675f1d591f?source=collection_archive---------12-----------------------#2021-10-12">https://betterprogramming.pub/manage-your-aws-secrets-with-doppler-c0675f1d591f?source=collection_archive---------12-----------------------#2021-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4b20" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">创建一个lambda函数，将其与API网关集成，并存储生成的令牌</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/38ec76874fb6cc23b95677cd6e022fa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jtI2cF7Kvtxsb8zj.jpeg"/></div></div></figure><h1 id="2b9f" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">摘要</h1><p id="e1db" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">密码、密钥或标识是使用最广泛的工具，也是组织用来验证应用程序和用户的最重要的工具之一，为他们提供敏感的系统、信息和服务。因为机密必须安全地传输，所以机密管理必须考虑并减轻这些机密在传输中和静态时面临的风险。</p><h1 id="dfd5" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">目标</h1><p id="f75f" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在本教程中，我们将创建一个简单的lambda函数，</p><p id="f7f9" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们还将创建一个注册表单屏幕，使用AWS cognito的登录屏幕，以及来自AWS的API网关。</p><p id="6dc5" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">这个应用程序将包含重要的信息，如JWT令牌，我们希望保持安全，所以我们可以学习如何管理多普勒令牌。</p><h1 id="9649" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">为什么是秘密管理</h1><p id="0497" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">令牌、密码和密钥是最广泛使用的身份验证形式，用于在用户和其他异步应用程序可以访问应用程序上的任何其他服务或收集他们需要的任何敏感信息之前对其进行身份验证。</p><p id="8122" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">尽管如此，黑客仍在寻找他们可以不时利用的系统，并且为了帮助您或您工作的组织节省一些钱，与您的应用程序有关的所有秘密都必须安全地存储。</p><h1 id="b5df" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">多普勒作为秘密管理解决方案</h1><p id="a4ca" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">需要密码和其他机密来验证应用程序到应用程序(A2A)的通信和访问，以及验证数据库(A2B)的通信和访问。</p><p id="3226" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">大多数情况下，应用程序和物联网设备都是使用硬编码的凭据进行运输和部署的，黑客可以通过简单的字典方法攻击轻松破解这些凭据，但使用Doppler，您不必再将这些密钥保存在这些脚本中，因为您可以安全地将它们保存在Doppler中。</p><p id="ce7a" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">在使用这个平台的短短时间内，多普勒提高了我的工作效率。Doppler为用户提供了建立项目的简单方法，因为他们的文档简单易懂。</p><p id="aae8" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">让我们深入本教程，看看多普勒如何使事情变得如此简单。</p><h1 id="ee68" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">使用AWS Cognito创建用户</h1><p id="d05b" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我们将在AWS cognito上创建用户，它有一个托管的UI，用户可以使用它来注册和登录用户，如果您按照说明操作，这是一个非常简单的工作。下面是我创建的用户的图像。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/fec8c3d2e617895c6693ec13b0731105.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*NC5Auv8EMToYlHu6SLhTgQ.png"/></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">注册用户</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/2945ab0e03714fdc220137453e187555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HaUSKNbfUzAmQYnOK0kNnQ.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">注册使用人</p></figure><p id="cdae" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们创建这个用户的目的是确保只有经过身份验证的用户才能登录使用我们的应用服务，我们将使用AWS网关来实现这一点，它将为我们提供一个JWT令牌，特定于每个用户，这是我们想要保护的令牌，因为我们不希望该令牌显示在前端，因为它可以被任何人访问，并用于对我们的应用造成严重破坏。</p><h1 id="41d0" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">创建lambda函数</h1><p id="2961" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">因此，让我们创建一个lambda函数，它将使用API网关来帮助我们获得一个JWT令牌来验证我们的用户。</p><p id="89f0" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们不会得到更多关于创建lambda函数或添加API网关的细节，因为我们的主要焦点是将我们的JWT令牌添加到Doppler。下面是我们创建的lambda函数的图像，稍后我们将把它与API网关集成。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/072244b37af05e9e6931a44b1bef28a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WNleBsBstQNebXCStQBwOQ.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">AWS函数</p></figure><h1 id="15cc" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">添加API网关</h1><p id="33a0" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">Amazon API Gateway是一个AWS服务，用于创建和保护任何规模的REST、HTTP和WebSocket APIs。API开发人员可以创建访问AWS或其他web服务的API，以及存储在AWS云中的数据。<br/>在这种情况下，我们将创建一个HTTP网关。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/63482fabe4776771846de01ced874a67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G69v1dUDkqbOwVT6zr1Sog.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">Api-Gate way</p></figure><h1 id="62b3" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">创建一个关于多普勒的项目</h1><p id="0593" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">创建一个关于多普勒的项目非常简单明了，你只需要点击加号图标来创建一个新项目。<br/>登录你的多普勒账户，创建一个新项目，有点像这样</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/cca79ef0ef833d28c7270f1f58f9e68a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*cbCIirknFHoaCy2ZLhh_Gw.png"/></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">创建新的多普勒项目</p></figure><p id="8fd9" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">创建新项目后，将创建三个阶段/环境，它们是</p><ul class=""><li id="f138" class="mt mu iq ll b lm mf lp mg ls mv lw mw ma mx me my mz na nb bi translated">发展</li><li id="06fd" class="mt mu iq ll b lm nc lp nd ls ne lw nf ma ng me my mz na nb bi translated">脚手架</li><li id="bf12" class="mt mu iq ll b lm nc lp nd ls ne lw nf ma ng me my mz na nb bi translated">生产</li></ul><p id="3898" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">这些环境是我们储存秘密的地方。</p><h1 id="9237" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">同步多普勒与自动气象站的秘密管理</h1><p id="c538" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在我们可以用多普勒同步我们的秘密之前，我们需要将AWS secret manager与多普勒集成，并将AWS与多普勒同步，让我们按照下面的步骤操作</p><p id="119a" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">创建项目后，单击integrations</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/cbbb8bdfd5ef0648a92cbd2be24c0f19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QxZZ7Oy255AChX42qZIwOw.png"/></div></div></figure><p id="25a1" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">当您单击integrations时，它应该会将我们带到一个新的网页，在那里我们会看到一个不同服务的列表，我们可以将Doppler与这些服务集成，但在我们的情况下，我们将使用Secrets Manager进行集成。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/3113fe7aeb142f3b0797f98148e6e2f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KXf_QU2aSMqRb4J5H2mBCQ.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">选择集成多普勒的服务</p></figure><p id="6b36" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">单击Secrets Manager，我们将被定向到另一个页面，在该页面上，我们将被要求向AWS secrets manager提供密钥ID和访问密钥。如果您没有，您可以在点击创建用户按钮后创建新的AWS Amplify用户时获得它，但是如果您有，这是您访问它的方式。</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="5579" class="no ks iq nk b gy np nq l nr ns">Go to I AM management console &gt; select users &gt;  Select the current user</span></pre><p id="3002" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">您应该会看到类似这样的内容</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/464a93eeb86d46f180a3e247f6c7bc10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XE_qJfB76R8zoyKeJgoAoA.png"/></div></div></figure><p id="fa7b" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">在这里您将找到您的访问密钥ID，然后您将必须生成一个新的访问密钥。<br/>将以上按键添加到Doppler，与您的AWS secret manager同步。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/3886e7c1a7bb264c9ffdcb790c30226e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z5x_LNH8d8ctlD6aXb2Ayw.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">从AWS secrets manager添加访问密钥</p></figure><p id="4ce0" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">Doppler需要权限来与我们的AWS secret manager集成，这些策略可以很容易地以JSON格式添加。</p><p id="b41d" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">如果您已经有一个IAM用户，并且想要添加一个新的策略，这是非常容易的。<br/>在AWS搜索框中搜索关键字IAM，会显示IAM AWS功能，点击它，然后选择用户。<br/>第一个打开的选项卡是权限选项卡</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/1e1e19009edf911d154cb3fdec6cf812.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4igaN4Nv3GbC5WWeAD9BiA.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">权限选项卡</p></figure><p id="7b84" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">单击Add Inline Policy创建一个自定义策略，为其命名并以JSON格式添加这些策略</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="6ccd" class="no ks iq nk b gy np nq l nr ns">{<br/>    "Version": "2012-10-17",<br/>    "Statement": [<br/>        {<br/>            "Sid": "AllowSecretsManagerAccess",<br/>            "Effect": "Allow",<br/>            "Action": [<br/>                "secretsmanager:GetSecretValue",<br/>                "secretsmanager:DescribeSecret",<br/>                "secretsmanager:PutSecretValue",<br/>                "secretsmanager:CreateSecret",<br/>                "secretsmanager:DeleteSecret",<br/>                "secretsmanager:TagResource",<br/>                "secretsmanager:UpdateSecret"<br/>            ],<br/>            "Resource": "*"<br/>        }<br/>    ]<br/>}</span></pre><p id="c73d" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">此外，在添加了将Doppler与AWS secret manager集成的密钥之后，我们需要配置Doppler环境。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/e80e3c0abc3434f2078e5369340970af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mGGOGiJgYRPlSqYqlg6SKg.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">选择配置文件和路径</p></figure><p id="88f3" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">选择配置同步，AWS地区，我的是US-east-2，并选择性地选择一个路径在多普勒，你所有的秘密从AWS将被储存。</p><h2 id="10eb" class="no ks iq bd kt nx ny dn kx nz oa dp lb ls ob oc ld lw od oe lf ma of og lh oh bi translated">将JWT令牌保存到多普勒</h2><p id="3e87" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">要获得我们的JWT令牌，在用户登录后，在您的浏览器搜索栏上查看，我们将复制令牌并将其存储在多普勒上</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/6a6ea418a5fb84cb8d53d61529a1fe0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HdEC5dINqKbEjflYxWhEAQ.png"/></div></div></figure><p id="81cb" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">现在，这个主题最有趣的部分是将这个秘密令牌存储在多普勒上。</p><p id="e589" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">将新项目同步到AWS后，在多普勒仪表板上打开新创建的项目。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/b98317257302f0e8d8a408a0d256136d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mGmEhy7ln0bwzSktQt2OWA.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">选择一个项目</p></figure><p id="8381" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">选择您创建并与AWS同步的新项目，我将选择</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="431c" class="no ks iq nk b gy np nq l nr ns">newdopplersecrets</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/832ec055a8e9103fafbb050e59dbfb3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mytvfr6v4wGS4lAPlKU7Sw.png"/></div></div></figure><p id="d5b2" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">回想一下，您在同步到AWS时选择了一个环境，在我的例子中，我选择了</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="1677" class="no ks iq nk b gy np nq l nr ns">Production(prd)</span></pre><p id="e7f4" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">这就是为什么根据上面的图像，prd是绿色的，因为它是活跃的。</p><p id="6c88" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们将单击活动环境，导航到一个新页面，在这里我们可以添加想要上传到AWS上的秘密。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/e16708f018c954e0caed9bf1d113c664.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rrE6mRCG3fpbP8NQqAJkAg.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">添加新秘密</p></figure><p id="d62e" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">上面的图像应该是我们将看到的下一页，单击添加第一个秘密按钮，添加我们之前从浏览器复制的JWT令牌。<br/>您可以添加任何密钥名和令牌作为值</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="f20f" class="no ks iq nk b gy np nq l nr ns">BASE_URL : <a class="ae om" href="https://doppler.com" rel="noopener ugc nofollow" target="_blank">https://doppler.com</a></span><span id="0e28" class="no ks iq nk b gy on nq l nr ns">BEARER_TOKEN : eyJraWQiOiJCUVRvNG9pSHNoK3FodGUrNGwydW9JKzBXZjFsK2tMQkJpckw3dHlXeUFNPSIsImFsZyI6IlJTMjU2In0.eyJhdF9oYXNoIjoiN19fa3VxOG5nV1hiN3ZEZmNTSTJaUSIsInN1YiI6ImU3YjQ0YWRjLTkyYjUtNDZmOS04M2EzLTlkNGMyMDc1ZmM0NiIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0yLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMl9KM2ppVmtrbGIiLCJjb2duaXRvOnVzZXJuYW1lIjoiY2xzeWZyaWRheSIsImF1ZCI6IjIzcmRjdTRhZjFxdDc5MzRsMmE5cTZxbXM1IiwiZXZlbnRfaWQiOiJjNzdkZjdjZS1hZGE1LTQ4YmYtODM2YS0yNzJmYjViMmJkYjkiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYzMzE3NDI4NiwiZXhwIjoxNjMzMTc3ODg2LCJpYXQiOjE2MzMxNzQyODYsImp0aSI6IjY5NjhiZjZkLWEwYzAtNDkyZi04ODA0LWQ0ZjE2OTRkMWY4YiIsImVtYWlsIjoiY2xzeWZyaWRheUBnbWFpbC5jb20ifQ.U43PFIzcIJOk0MHmCr1a87WKXE4LIosl7ZvoO6Eo27d_rnxGHeUyrP4r0xH9XUeAH7zQR6e4Uk75hCNI1RgD0wpgbaOrmVfnZGnnrBBJTVN9BKs2ZrcPd_53ky8vwSNKAaTYlqvCNRnzARZim85HCYdL0aJaqz-R0jteyb0_7aEvaum2RMHG6RYJ0aYP46fNv8TaYW9imlvGs774kKzLmnHuIHwfN74iHxs68tcT0HcTHMUWqlo08uIZ3szceLszRqmSc7DjU24-Y1qvcsMh01eHbUDq-pdmZTUqaQ1uVTY1vBs-EhlrYNKOr8P-oBga6CiwXWXTfPmf_BYM2pTtvw</span><span id="b361" class="no ks iq nk b gy on nq l nr ns">PASSWORD : 0123456789</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/d3680d25c0087ff352d2603edfa7ed61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BxXlvCXGLv6HYZaB9f4NSQ.png"/></div></div></figure><p id="e9a6" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">添加密钥和值后，您的秘密应该看起来像上面的图像，我们应该点击右上角的保存按钮来保存我们的秘密。</p><p id="f850" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">此外，单击下一个名为“集成”的选项卡，我们应该会看到这一点</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/55e1c07d5a57994b2b15aa73a8c47eb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L98U-V1cgEbHjzKaTXFQpA.png"/></div></div></figure><p id="83ee" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">现在让我们点击文本<em class="oq">管理</em>在极端情况下，它应该会引导我们到一个新的网页，我们可以点击同步上传我们所有的秘密到AWS秘密管理器。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/bcd4da3cc81e212e017ec2347a8f7ce4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0T25IQRPgHhYLr9A-ua-6w.png"/></div></div></figure><p id="aa1d" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">点击<strong class="ll ir">同步</strong>文本，我们所有的秘密将被添加到AWS秘密管理器。</p><p id="72af" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">为了确认我们所有的秘密都是从doppler上传到AWS的，点击DESTINATION选项卡下的链接，就像上面的图片一样，我们应该会看到Doppler这个名字被添加到我们在AWS中创建的项目名称中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/9a1619865fb89780862b8b50b7ed458a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L1RWSDOK6Y-X5si-mossAw.png"/></div></div></figure><p id="1859" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">万岁，我们刚刚在多普勒上保存了我们的秘密，并成功地将其推送到AWS，在那里我们可以访问它们以供使用，每当我们更新多普勒上的秘密时，它就会自动在AWS上更新。</p><h1 id="33ef" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">结论</h1><p id="bbe3" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我们已经到了本教程的结尾。我们了解了如何使用AWS Cognito来创建使用其托管UI的用户。</p><p id="c3ee" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们还学习了如何创建一个lambda函数，并将lambda函数与一个API网关集成在一起，该网关帮助我们向用户提供JWT令牌——然后查看如何在Doppler中存储该令牌。</p></div></div>    
</body>
</html>