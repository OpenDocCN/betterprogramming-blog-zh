<html>
<head>
<title>4 Python Concepts That Beginners May Be Confused About</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">初学者可能会混淆的4个Python概念</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/4-python-concepts-that-beginners-may-be-confused-about-ea1fec769f7b?source=collection_archive---------0-----------------------#2020-11-24">https://betterprogramming.pub/4-python-concepts-that-beginners-may-be-confused-about-ea1fec769f7b?source=collection_archive---------0-----------------------#2020-11-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dd00" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">虚拟环境、字符串插值、惰性评估和理解</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e44f8a0fc5253ca3f4791b4449cc09da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*E17WCnJkszUR9RcH"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">罗伯特·雷耶斯在Unsplash<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拍摄的照片。</a></p></figure><p id="fb5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">学习一门新的编程语言并不容易，尤其是如果你以前没有任何编程经验的话。然而，学习Python可以说比学习其他几种语言更简单，因为它支持初学者的REPL (Read-Eval-Print-Loop)学习方法。简单来说，学习Python，我们可以只使用一个命令控制台。您编写您的Python代码(例如<code class="fe lv lw lx ly b">print(“Hello, World!”)</code>)，控制台将评估代码并在适用时打印输出。这种REPL方法提供了关于Python中各种主题的实时反馈，这使得Python学习变得简单明了。</p><p id="af6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管有这种方便的学习方法，但有些概念可能会让Python初学者感到困惑。在这篇文章中，我想着重阐明四个概念。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="93c0" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">1.虚拟环境</h1><p id="061a" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">初学者不会发现虚拟环境的概念是相关的，直到他们开始从事一些真实的项目。以下面的场景为例:在一个项目中，您使用依赖于包x的1.0版本的特定包(A)。然而，在另一个项目中，您使用依赖于包x的1.5版本的包B。</p><p id="dedd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是你遇到的困境:如果你安装了X v1.0版，你的第二个项目就无法运行。但是，如果你安装了X v1.5，你的第一个项目就无法运行了。这些项目我们必须使用两台不同的电脑吗？当然，这种昂贵的方法是可行的，但是如果你有多个项目呢？不同的项目用不同的电脑肯定不切实际。</p><p id="a9e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了解决不同项目之间可能的冲突，有一个聪明的解决方案，以前的Python程序员已经为我们开发了——虚拟环境。总的想法是，我们为我们的每个项目创建隔离的工作环境，这样一个项目中的包版本就不会与其他项目中相同包的其他不兼容版本发生冲突。</p><p id="2aaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有几种管理虚拟环境的方法，如<a class="ae ky" href="https://docs.python.org/3/library/venv.html" rel="noopener ugc nofollow" target="_blank"> venv </a>和<a class="ae ky" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html" rel="noopener ugc nofollow" target="_blank"> conda </a>。为了向您提供一个概念证明，下面的代码向您展示了使用venv模块对虚拟环境的常见操作，venv模块是标准Python库的一部分。</p><ul class=""><li id="6639" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated">导航到所需的目录后，要创建虚拟环境，请在命令行工具中运行以下命令(例如，用于Mac的终端):<code class="fe lv lw lx ly b">python3 -m venv medium-env</code>。请注意，<code class="fe lv lw lx ly b">medium-env</code>指定了您正在创建的环境。它还假设您已经在计算机上安装了Python 3。</li><li id="3b29" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">一旦创建了虚拟环境，您可以通过在Mac上运行以下代码来激活该环境(注意，Windows使用了<a class="ae ky" href="https://docs.python.org/3/tutorial/venv.html" rel="noopener ugc nofollow" target="_blank">一个不同的命令</a> ): <code class="fe lv lw lx ly b">source medium-env/bin/activate</code>。</li><li id="4405" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">从现在开始，您将看到您的终端提示符有一个前缀<code class="fe lv lw lx ly b">(medium-env)</code>，这表明您正在虚拟环境中工作，正如您应该做的那样。你可以做任何你需要做的事情，比如安装新的软件包。</li><li id="4804" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">一旦你完成了你的工作，你只需运行<code class="fe lv lw lx ly b">deactivate</code>就可以离开虚拟环境。</li></ul><p id="59f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您是虚拟环境的新手，那么通过安装Anaconda可以更容易地设置虚拟环境，它将负责您的Python解释器、包管理和虚拟环境。更多详情请访问<a class="ae ky" href="https://www.anaconda.com/" rel="noopener ugc nofollow" target="_blank"> Anaconda的网站</a>。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="0414" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">2.字符串插值(F字符串)</h1><p id="91e9" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">需要以适用的格式准备字符串以便我们可以呈现它们是一项常见的任务。通常，有几种方法来格式化字符串——一种使用<code class="fe lv lw lx ly b">format</code>函数，另一种使用基于C风格的格式化。下面是一些简单的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">常规字符串格式</p></figure><p id="13d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上面的代码片段所示，这两种方法将字符串文本与所需的格式分开。例如，如果我们想要格式化如下所示的三个数字，我们将使用<code class="fe lv lw lx ly b">format</code>函数做下面的事情。您可能已经注意到，我们必须将每个变量映射到每种格式，如果我们遗漏了一个数字或变量，这可能会令人困惑。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数字格式</p></figure><p id="6f66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相比之下，Python 3.6中引入的字符串插值或文字字符串插值使得字符串格式化更加容易，更重要的是可读性更好。要格式化代码片段中显示的数字，我们可以使用字符串插值技术做同样的事情。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">f弦</p></figure><ul class=""><li id="6a53" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated">我们用字母<code class="fe lv lw lx ly b">f</code>来表示我们正在创建f弦。</li><li id="8918" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">类似于<code class="fe lv lw lx ly b">format</code>函数，f字符串使用花括号来表示要插值的变量。</li><li id="c224" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">与<code class="fe lv lw lx ly b">format</code>函数不同，每个插值都有变量和所需的格式，这消除了它们之间的物理距离，使字符串更具可读性。</li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="31e4" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">3.懒惰评估</h1><p id="257b" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">惰性求值是计算机编程术语，指的是直到被请求时才被获取/准备的数据(例如变量)。例如，在Swift中，我们可以使用<code class="fe lv lw lx ly b">lazy</code>关键字来表示一个变量，这样在我们调用它之前不会计算它。虽然Python没有<code class="fe lv lw lx ly b">lazy</code>作为关键字，但是同样的懒评价在Python中还是有的。</p><p id="dcc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">举个例子，我们可以为我们的自定义类实例设置惰性属性。下面的代码向您展示了我们如何使用<code class="fe lv lw lx ly b">property</code>装饰器来实现这一功能(请随意探索<code class="fe lv lw lx ly b">functools</code>模块中的<code class="fe lv lw lx ly b">@cached_property</code>装饰器以获得类似的效果):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用属性的惰性属性</p></figure><ul class=""><li id="7431" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated">在初始化方法(即<code class="fe lv lw lx ly b">__init__</code>)中，我们将受保护的属性(<code class="fe lv lw lx ly b">_profile_data</code>)设置为<code class="fe lv lw lx ly b">None</code>，它只是作为一个占位符。在许多情况下，我们并不真正需要概要文件数据。</li><li id="7021" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">然而，如果我们确实需要获得概要数据，我们可以用一个<code class="fe lv lw lx ly b">property</code>装饰器包装它。它将检查<code class="fe lv lw lx ly b">_profile_data</code>是否是<code class="fe lv lw lx ly b">None</code>，只有当我们没有<code class="fe lv lw lx ly b">_profile_data</code>属性的数据时，它才会运行昂贵的web请求。</li></ul><p id="cf59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再举一个例子，Python中的生成器也利用了惰性求值技术。如您所知，生成器是一种特殊的迭代器，它在元素被请求时呈现元素。与从列表和字典中创建的一些常见迭代器不同，生成器并没有将所有元素都加载到内存中，因此它们非常节省内存。这都是因为它们保存迭代的状态，并“懒洋洋地”呈现下一个适用的项目。以下代码显示了生成器的相关用法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">生成器的记忆效率</p></figure><ul class=""><li id="de36" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated">我们使用所谓的生成器表达式来创建一个呈现正方形的简单生成器。</li><li id="8a69" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">与对应的列表相比，生成器的大小只有列表的很小一部分(96字节对9000字节)。然而，两者达到相同的效果——两者的总和相等。</li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="8a33" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">4.（听力或阅读）理解测试</h1><p id="9398" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">Python的一个很酷的特性是理解技术。即使对初学者来说，列表理解也可能是他们听说过的高级技巧之一。使用list comprehension的目的是以非常简洁的方式使用iterable创建一个list对象。事实上，我使用了上一节中的列表理解来创建这个方块列表:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">列表理解</p></figure><ul class=""><li id="38f4" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated">list comprehension的语法如下:<code class="fe lv lw lx ly b">[expression for x in iterable]</code>。在上面的例子中，我们使用了<code class="fe lv lw lx ly b">range</code>对象。</li><li id="5e01" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">如果我们不使用列表理解，我们可以使用一个<code class="fe lv lw lx ly b">for</code>循环来迭代<code class="fe lv lw lx ly b">range</code>对象，并将正方形附加到列表对象上。最后，两个列表都有相同的项目。然而，列表理解显然是创建列表对象的一种更简洁的方式，如果我们从iterable开始，它应该是创建列表对象的首选方式。</li></ul><p id="a441" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了列表理解，Python还有创建字典和集合的理解技术。下面的代码片段向您展示了用法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">字典和集合理解</p></figure><ul class=""><li id="dca8" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated">字典理解有以下语法:<code class="fe lv lw lx ly b">{key_expr: valu_expr for x in iterable}</code>。</li><li id="9fc4" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">集合理解的语法如下:<code class="fe lv lw lx ly b">{expr for x in iterable}</code>。</li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="a529" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="b3d1" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">在本文中，我们回顾了初学者可能会混淆的四个概念。以下是这些概念的概述:</p><ul class=""><li id="dd2b" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated">虚拟环境是我们为项目创建独立工作空间的一种方式，这样它们就可以有不同的Python版本和不同的依赖需求。</li><li id="39ec" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">字符串插值在Python中被称为f-string，这是一种可读性更好的创建格式化字符串的方法，方法是将相关变量/表达式放在适用的格式设置旁边。</li><li id="1d12" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">惰性求值是一种编程技术，它允许我们的程序尽可能地延迟昂贵的操作(例如，一个web请求，一个计算量很大的计算)。</li><li id="ce15" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">理解是一种允许我们以更简洁的方式创建列表、字典和集合的技术，这消除了使用<code class="fe lv lw lx ly b">for</code>循环的需要。</li></ul></div></div>    
</body>
</html>