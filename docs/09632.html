<html>
<head>
<title>Understanding Dev, Peer, and Regular Dependencies in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解JavaScript中的开发、对等和常规依赖关系</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/understanding-dev-peer-and-regular-dependencies-in-javascript-f4090621c7a7?source=collection_archive---------7-----------------------#2021-09-20">https://betterprogramming.pub/understanding-dev-peer-and-regular-dependencies-in-javascript-f4090621c7a7?source=collection_archive---------7-----------------------#2021-09-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6cd5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解JavaScript应用程序中包是如何协同工作的</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7eb20031807440060b768dc6ea610886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vfx0ouypF4gd6SEF"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">瑞安·昆塔尔在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="d0e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当构建一个现代JavaScript应用程序时，您可能会依赖许多其他包和第三方依赖项。例如，您可以将<code class="fe lv lw lx ly b">react</code>和<code class="fe lv lw lx ly b">react-dom</code>用于您的UI，将<code class="fe lv lw lx ly b">lodash</code>用于实用助手方法，将<code class="fe lv lw lx ly b">webpack</code>或<code class="fe lv lw lx ly b">rollup</code>作为您的绑定器，将<code class="fe lv lw lx ly b">jest</code>和<code class="fe lv lw lx ly b">@testing-library/react</code>用于单元测试。</p><p id="1b05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有这些包都作为依赖项存储在您的<code class="fe lv lw lx ly b">package.json</code>文件中。对于新开发人员来说，理解是否将它们作为<code class="fe lv lw lx ly b">dependencies</code>、<code class="fe lv lw lx ly b">devDependencies</code>或<code class="fe lv lw lx ly b">peerDependencies</code>有时是一场斗争。</p><p id="6ab7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将看看在<code class="fe lv lw lx ly b">package.json</code>文件中发现的三种类型的依赖关系，以及它们各自的作用。</p><h1 id="1af9" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">常规依赖关系</h1><p id="3374" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><code class="fe lv lw lx ly b">dependencies</code>您的应用产品捆绑包中是否使用了软件包。如果你正在构建一个React应用，那么<code class="fe lv lw lx ly b">react</code>和<code class="fe lv lw lx ly b">react-dom</code>就是<code class="fe lv lw lx ly b">dependencies</code>。</p><p id="f8cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您使用<code class="fe lv lw lx ly b">react-router</code>进行客户端路由，那也是您的<code class="fe lv lw lx ly b">dependencies</code>的一部分。任何其他包，如<code class="fe lv lw lx ly b">lodash</code>或设计系统库，如Material UI ( <code class="fe lv lw lx ly b">@mui/material</code>)也将是<code class="fe lv lw lx ly b">dependencies</code>。</p><p id="439f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个规则有一个例外，但是我们将在下面的对等依赖小节中讨论这个问题。</p><h1 id="5bf3" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">开发依赖项</h1><p id="9a65" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><code class="fe lv lw lx ly b">devDependencies</code>通常是你用来构建项目的工具，但它们实际上并不包含在应用的产品捆绑包中。例如，<code class="fe lv lw lx ly b">webpack</code>和<code class="fe lv lw lx ly b">rollup</code>都是<code class="fe lv lw lx ly b">devDependencies</code>。这些是用于编译你的应用程序的捆绑器，但它们不是你的应用程序的一部分。</p><p id="caef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这同样适用于测试框架和库，如<code class="fe lv lw lx ly b">jest</code>、<code class="fe lv lw lx ly b">@testing-library/react</code>、<code class="fe lv lw lx ly b">karma</code>、<code class="fe lv lw lx ly b">mocha</code>或<code class="fe lv lw lx ly b">jasmine</code>。这些库是为您的代码编写单元测试所必需的，但它们不是您的生产应用程序的一部分。</p><p id="c2f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像<code class="fe lv lw lx ly b">eslint</code>、<code class="fe lv lw lx ly b">prettier</code>、<code class="fe lv lw lx ly b">commitlint</code>、<code class="fe lv lw lx ly b">husky</code>和<code class="fe lv lw lx ly b">lint-staged</code>这样的Linters和代码格式化器也都是<code class="fe lv lw lx ly b">devDependencies</code>。</p><h1 id="3500" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">对等依赖</h1><p id="ec4d" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><code class="fe lv lw lx ly b">peerDependencies</code>是您的应用程序依赖的依赖项，但期望另一个包提供。<code class="fe lv lw lx ly b">peerDependencies</code>是减少最终产品应用程序大小的重要工具。我们来看看为什么。</p><p id="9d3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您有一个由许多npm包组成的大型React应用程序。假设有20个人，他们都使用React。如果这些包中的每一个都在它们的<code class="fe lv lw lx ly b">dependencies</code>部分列出了<code class="fe lv lw lx ly b">react</code>和<code class="fe lv lw lx ly b">react-dom</code>，那么这意味着你的应用中将有20个React副本！(21如果算上主母应用提供的副本。)</p><p id="a599" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了避免这种依赖性的巨大膨胀，库开发者可以使用<code class="fe lv lw lx ly b">peerDependencies</code>部分来指定他们的库依赖于<code class="fe lv lw lx ly b">react</code>和<code class="fe lv lw lx ly b">react-dom</code>，但是包的消费者需要提供它。</p><p id="9bb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，你就可以让你的应用有20个依赖项，但是只有一个<code class="fe lv lw lx ly b">react</code>和<code class="fe lv lw lx ly b">react-dom</code>的副本用于生产，在你的父应用的<code class="fe lv lw lx ly b">package.json</code>文件的<code class="fe lv lw lx ly b">dependencies</code>中提供。</p><p id="b7f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当使用<code class="fe lv lw lx ly b">peerDependencies</code>时，需要注意的是，如果您将一个包标记为对等依赖，那么您也必须将它包含在您的<code class="fe lv lw lx ly b">devDependencies</code>部分中。这允许您的应用程序在本地开发和单元测试期间安装和使用像<code class="fe lv lw lx ly b">react</code>和<code class="fe lv lw lx ly b">react-dom</code>这样的包，但是它不会将它们作为真正的依赖项包含在生产版本中。</p><p id="886e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，当使用peer/dev依赖组合时，您还应该在Webpack或Rollup配置文件的<code class="fe lv lw lx ly b">externals</code>配置部分中添加这个包。</p><h1 id="d6ce" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">结论</h1><p id="afab" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">就是这样。现在您知道了如何在任何JavaScript项目中正确地使用dev、peer和regular依赖项。这样做将帮助您减少应用程序的最终包大小，并确保在生产中只安装必要的包。</p><p id="38c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>