<html>
<head>
<title>The Page Loading Checklist</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">页面加载清单</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-page-loading-checklist-a339ec7bfb44?source=collection_archive---------8-----------------------#2019-08-25">https://betterprogramming.pub/the-page-loading-checklist-a339ec7bfb44?source=collection_archive---------8-----------------------#2019-08-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2450" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">提高用户对你的应用的速度感知</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a6e1bada94371974e79a8dab3c67c96a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oTsFrFNywgcUqto8qpyKTQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">格伦·卡斯滕斯-彼得斯在<a class="ae kv" href="https://unsplash.com/search/photos/checklist?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="6087" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就用户体验而言，用户进入你网站的第一秒是非常关键的。如果你的网站被认为很慢，用户可能会在加载完成前离开页面。</p><p id="6136" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最初的几秒钟已经给人留下了你的应用程序运行良好的印象。</p><p id="f552" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">开发人员必须始终考虑使用一个好的工具来分析页面加载时会发生什么。我用的是<a class="ae kv" href="http://yslow.org/" rel="noopener ugc nofollow" target="_blank"> YSlow </a>。</p><p id="caf8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个很好的练习是评估在加载的最初几秒钟内哪些资源是关键的，哪些不是。</p><p id="4bb8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文基于<a class="ls lt ep" href="https://medium.com/u/5dccb9bb4625?source=post_page-----a339ec7bfb44--------------------------------" rel="noopener" target="_blank">凯尔</a>的一门课程。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="9f9a" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">改进页面加载时间的性能优化清单</h1><h2 id="190c" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><strong class="ak"> 1。减少页面加载期间对资源的请求数量</strong></h2><p id="c91f" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">对于你在开始展示的内容来说，每一条不重要的数据都应该在以后加载。</p><h2 id="6cd5" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><strong class="ak"> 2。优化图像尺寸</strong></h2><p id="40a9" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">一个好主意是在不损失质量的情况下缩小图像的尺寸。有几个工具可以做到这一点。</p><p id="a4a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，另一种可能性是使用图像精灵，但在我看来，这使得处理图像的代码过于复杂。</p><h2 id="77fb" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><strong class="ak"> 3。避免重定向</strong></h2><p id="b6ab" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">这将告诉用户的浏览器在不同的位置再次请求页面，不必要地发出两次请求，而不是一次。</p><h2 id="16ac" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><strong class="ak"> 4。将CDN(内容交付网络)用于静态资源</strong></h2><p id="b9ba" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">cdn<strong class="ky ir"/>在世界范围内提供了更多的存在点，最有可能靠近发出请求的地方，因此用户下载静态资源更快。</p><h2 id="e6a0" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><strong class="ak"> 5。对于非关键资源，将资源加载推迟到将来某个时间</strong></h2><p id="a2d6" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">又叫<em class="nk">懒装</em>。</p><p id="d8dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，避免在第一秒加载非关键的CSS，稍后再加载。</p><p id="15e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个特性通常会使应用程序的代码更加复杂。有时，这对于用户很少使用的功能是有意义的，只在需要时才下载它们。</p><p id="e23c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这可能很棘手，你必须小心，避免将这种技术应用于频繁使用的功能，你冒着用户在加载非常快的首页后体验非常慢的网站的风险。</p><p id="a08b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">惰性加载对于图像尤其重要。我们已经讨论过让它们尽可能的小，但是避免在你不显示它们的时候加载它们会更好。</p><p id="d4dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事实上，这是如此重要的事情，以至于从Chrome 76开始，他们就本机支持它。他们为延迟加载引入了一个新的属性<code class="fe nl nm nn no b"><a class="ae kv" href="https://web.dev/native-lazy-loading" rel="noopener ugc nofollow" target="_blank">loading</a></code>。当这被其他浏览器广泛实现时，就不需要花哨的JS库来实现了。</p><h2 id="751e" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><strong class="ak"> 6。使用Gzip、</strong> <a class="ae kv" href="https://github.com/google/brotli" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> Brotli </strong> </a> <strong class="ak">，或者其他压缩器</strong></h2><p id="becb" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">这有助于减小文件的大小。这是需要在服务器中配置的。</p><h2 id="8170" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><strong class="ak"> 7。使用过期/缓存控制头</strong></h2><p id="8386" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">利用浏览器缓存资源的事实。</p><p id="0d55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，很多时候，指定资源应该过期的正确时间并不容易，因此，用户可能会看到过期的内容。</p><h2 id="1652" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><strong class="ak"> 8。将CSS引用放在顶部，脚本放在底部</strong></h2><p id="34cd" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">给用户一个页面速度很快的印象的好习惯是将CSS引用放在顶部，脚本放在底部。</p><p id="409f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将CSS文件放在顶部的原因是，浏览器通常会阻止内容的呈现，直到它了解所有的样式表。最好的选择是浏览器尽快找到它。</p><h2 id="c4f0" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><strong class="ak"> 9。避免使用CSS表达式来计算页面上的位置</strong></h2><p id="585e" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">这个在浏览器里比较慢，避免用就好。</p><h2 id="1ea7" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><strong class="ak"> 10。总是将CSS和JavaScript文件外部化</strong></h2><p id="76b8" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">所以浏览器可以帮助缓存。</p><h2 id="aa0c" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><strong class="ak"> 11。缩小CSS和JavaScript文件</strong></h2><p id="b534" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">这是一种减小文件大小、删除冗余数据而不影响逻辑的技术。</p><h2 id="8509" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><strong class="ak"> 12。减少网站使用的字体数量</strong></h2><h2 id="cebf" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><strong class="ak"> 13。使用ETags HTTP头</strong></h2><p id="e7fa" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">这是十六进制代码，它唯一地表示资源的指纹，这意味着，如果文件改变，这个十六进制代码也改变。</p><p id="9036" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这有助于条件加载。如果一个资源的ETag改变了，这意味着它被更新了，然后它必须重新下载这个资源。</p><p id="6059" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为优化站点性能策略的一部分，您需要在服务器中配置此功能。</p><h2 id="62fd" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated">14。尝试进行更少的DNS查找</h2><p id="47a1" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">如果您开始引用太多的域，这将增加新的DNS查找延迟。浏览器通过<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Learn/Performance/dns-prefetch" rel="noopener ugc nofollow" target="_blank">预缓存</a>一些DNS查找来帮助。</p><h2 id="958c" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><strong class="ak"> 15。优化您的JSON响应</strong></h2><p id="e2a7" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">重要的是，JSON响应只包含所需的数据，以减少下载时间。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="06a0" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">提高Web性能需要考虑的其他事项</h1><h2 id="a4ab" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><a class="ae kv" href="https://btholt.github.io/complete-intro-to-react-v4/server-side-rendering" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">服务器端渲染</strong> </a></h2><p id="627d" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">这种技术有助于避免将许多资源下载到客户端，响应是完全呈现的HTML文件。</p><p id="1149" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个必须这样做的例子是，页面是从速度非常有限的移动电话上使用的。</p><h2 id="d362" class="mt mc iq bd md mu mv dn mh mw mx dp ml lf my mz mn lj na nb mp ln nc nd mr ne bi translated"><strong class="ak">喜欢CSS动画胜过JavaScript动画</strong></h2><p id="5e0a" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">最好将所有可能的JavaScript动画都移到CSS引擎中。</p><p id="6d26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JavaScript对时间并不精确，如果你的代码依赖于<code class="fe nl nm nn no b">setTimeout</code>或<code class="fe nl nm nn no b">setInterval</code>就会有问题。一般来说，有缺陷的动画被认为是一个实现糟糕的网站。</p><p id="d2da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！如果你有任何建议或想法，请告诉我。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="18de" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">资源</h1><p id="04ec" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">[1] <a class="ls lt ep" href="https://medium.com/u/5dccb9bb4625?source=post_page-----a339ec7bfb44--------------------------------" rel="noopener" target="_blank">凯尔</a>辛普森<a class="ae kv" href="https://frontendmasters.com/courses/website-performance/" rel="noopener ugc nofollow" target="_blank">网站表现</a>(2013年3月29日)。</p></div></div>    
</body>
</html>