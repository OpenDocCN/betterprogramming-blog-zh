<html>
<head>
<title>Implement Touch ID and Face ID Authentication in Your React Native App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React本地应用中实现触控ID和Face ID认证</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/touch-id-and-face-id-authentication-in-your-react-native-app-1e455c1fe080?source=collection_archive---------2-----------------------#2020-05-07">https://betterprogramming.pub/touch-id-and-face-id-authentication-in-your-react-native-app-1e455c1fe080?source=collection_archive---------2-----------------------#2020-05-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2315" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这比你想象的要容易</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d9914ff155a622e35343f47a2156194b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qogLBKYPyia0eKv3wznj-A.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@luferlex?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">卢肯·萨贝拉诺</a>在<a class="ae kv" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="3bed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">触控ID，也称为指纹认证，在移动应用程序中非常流行。touch ID功能可保护应用程序，并使其成为用户顺畅、轻松的身份验证流程。</p><p id="2d7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">许多银行应用程序，如美国银行，使用touch ID身份验证来实现安全而简单的身份验证。</p><p id="292f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">客户喜欢使用touch ID或face ID，而不是每次都键入密码或pin。</p><p id="5bf4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最新的iPhone设备支持face ID，Android设备支持face ID和touch ID。这些功能增强了用户与移动应用程序的交互，使它们更加安全。</p><p id="d68f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用流行的<code class="fe ls lt lu lv b"><a class="ae kv" href="https://github.com/hieuvp/react-native-fingerprint-scanner#readme" rel="noopener ugc nofollow" target="_blank">React-Native-fingerprint-scanner</a></code>库在React原生应用中集成touch ID和face ID认证。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="35fd" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">装置</h1><p id="af96" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">要安装<code class="fe ls lt lu lv b">react-native-fingerprint-scanner</code>,你只需要在项目终端运行这个命令。</p><pre class="kg kh ki kj gt na lv nb nc aw nd bi"><span id="81fe" class="ne me iq lv b gy nf ng l nh ni">npm i react-native-fingerprint-scanner</span></pre><p id="d5ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者</p><pre class="kg kh ki kj gt na lv nb nc aw nd bi"><span id="c0ad" class="ne me iq lv b gy nf ng l nh ni">yarn add react-native-fingerprint-scanner</span></pre><p id="8791" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从React Native 0.60及更高版本开始，<a class="ae kv" href="https://github.com/react-native-community/cli/blob/master/docs/autolinking.md" rel="noopener ugc nofollow" target="_blank">链接是自动的</a>。所以你<strong class="ky ir">不需要跑</strong> <code class="fe ls lt lu lv b">react-native link</code>。</p><p id="d326" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你在Mac上开发iOS，你需要安装pods(通过<a class="ae kv" href="https://cocoapods.org/" rel="noopener ugc nofollow" target="_blank"> Cocoapods </a>)来完成链接。</p><pre class="kg kh ki kj gt na lv nb nc aw nd bi"><span id="f3ce" class="ne me iq lv b gy nf ng l nh ni">npx pod-install ios</span></pre><h2 id="bbf2" class="ne me iq bd mf nj nk dn mj nl nm dp mn lf nn no mp lj np nq mr ln nr ns mt nt bi translated">许可</h2><p id="669a" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">安装完成后，我们应该需要将应用权限添加到<strong class="ky ir"> Android </strong>和<strong class="ky ir"> iOS </strong>中。</p><p id="2cb2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe ls lt lu lv b"><em class="nu">AndroidManifest.xml</em></code>、中添加此权限:</p><pre class="kg kh ki kj gt na lv nb nc aw nd bi"><span id="873d" class="ne me iq lv b gy nf ng l nh ni">&lt;uses-permission android:name="android.permission.USE_BIOMETRIC" /&gt;</span></pre><p id="adc2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe ls lt lu lv b">Info.plist</code>中添加这个键和字符串:</p><pre class="kg kh ki kj gt na lv nb nc aw nd bi"><span id="b32b" class="ne me iq lv b gy nf ng l nh ni">&lt;key&gt;NSFaceIDUsageDescription&lt;/key&gt;<br/>&lt;string&gt;$(App_Name) requires FaceID access to allows you quick and secure access.&lt;/string&gt;</span></pre><p id="1db2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦以上步骤完成，您就可以开始在react本地应用程序中使用<code class="fe ls lt lu lv b">react-native-fingerprint-scanner</code>库了。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="f937" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">使用</h1><p id="3a55" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">在下面的简单例子中，我们将使用<code class="fe ls lt lu lv b">react-native-fingerprint-scanner</code>进行认证。</p><p id="d75e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用于认证用户的触摸ID或面部ID的函数是来自<code class="fe ls lt lu lv b">react-native-fingerprint-scanner</code>库中的<code class="fe ls lt lu lv b">authenticate(reason, config)</code> <em class="nu"> </em>函数。</p><h2 id="8e67" class="ne me iq bd mf nj nk dn mj nl nm dp mn lf nn no mp lj np nq mr ln nr ns mt nt bi translated">fingerprintscanner . authenticate<em class="nv">(原因，配置)</em></h2><p id="7208" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">这个函数验证用户的touch ID或face ID，并返回一个promise对象。<code class="fe ls lt lu lv b">reason</code> <em class="nu"> </em>是显示给用户的可选字符串。它可以提供为什么需要身份验证的信息。<code class="fe ls lt lu lv b">config</code> <em class="nu"> </em>是一个可选对象，可以在认证对话框中显示更多细节。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="c46b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在示例代码中，authenticate函数处理用户的touch ID或face ID身份验证。如果身份验证由于某种原因失败，将返回一个错误代码；否则，它将返回一个承诺，您可以在FingerprintScanner <em class="nu">中编写进一步的逻辑。认证(原因)。</em>然后(()= &gt; {</p><p id="783a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">//这里</p><p id="ed9c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi">})</p><h2 id="27d7" class="ne me iq bd mf nj nk dn mj nl nm dp mn lf nn no mp lj np nq mr ln nr ns mt nt bi translated">指纹扫描仪<code class="fe ls lt lu lv b">.isSensorAvailable()</code></h2><p id="f2e7" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">此功能检查指纹扫描仪是否可以使用。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="7d96" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">react-native-fingerprint-scanner</code>库支持iPhone X设备使用face ID。<code class="fe ls lt lu lv b">isSensorAvailable<em class="nu">()</em></code> <em class="nu"> </em>函数返回设备支持并启用的<code class="fe ls lt lu lv b">biometryType</code> <strong class="ky ir"> </strong>。如果设备不支持touch ID或face ID，那么我们将不得不使用密码或pin码。</p><p id="04f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nu">注意:在我们调用</em> <code class="fe ls lt lu lv b"><em class="nu">authenticate()</em></code> <em class="nu">函数之前，需要先调用</em> <code class="fe ls lt lu lv b"><em class="nu">isSensorAvailable()</em></code> <em class="nu">函数。这确保了当生物认证不可用时，我们不会使用该库进行认证。</em></p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="972a" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">把所有的放在一起</h1><p id="7e41" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">下面的代码展示了使用<code class="fe ls lt lu lv b">react-native-fingerprint-scanner</code>的完整认证流程。注意这里我们将<strong class="ky ir"> </strong> <code class="fe ls lt lu lv b">biometryType</code>保存到组件的状态。我们需要确保向用户发出正确的信息，告诉他们是使用touch ID还是face ID进行身份验证。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="d4eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您已经成功地将生物识别和面部锁定认证集成到React本机应用程序中。</p></div></div>    
</body>
</html>