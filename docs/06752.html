<html>
<head>
<title>Automatically Lint Your Swift Code Like a Pro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像专家一样自动处理您的Swift代码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/automatically-lint-your-swift-code-like-a-pro-42455abcef79?source=collection_archive---------4-----------------------#2020-11-02">https://betterprogramming.pub/automatically-lint-your-swift-code-like-a-pro-42455abcef79?source=collection_archive---------4-----------------------#2020-11-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1aff" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将自动林挺添加到Xcode</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/090dd420e575a3dbd326fb87acd02358.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*moHjtbQgDUzBEepD"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@k8_iv?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> K8 </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="5595" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在编写生产Swift代码时，确保遵循可读性和格式的最佳实践非常重要。</p><p id="ca6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一个带着许多犹豫从Objective-C转到Swift的人(我可能是在Swift发布时仍然倾向于Objective-C而不是Swift的少数人之一)，我的一个主要担忧是与Objective-C相比，弱类型Swift有多弱。我不是弱类型语言的狂热爱好者，但随着Swift的发展，它比Objective-C更受欢迎，编写良好、可读的Swift代码是必要的。最简单的方法之一就是使用自动林挺。</p><p id="5877" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你使用过Android Studio或者有VS代码的插件，你可能已经非常熟悉自动林挺了，但是它不是Xcode自带的。在本教程中，我将展示如何在构建时将自动林挺添加到Xcode项目中。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5260" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">雨燕</h1><p id="8498" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Swift最受欢迎的棉绒是<a class="ae ky" href="https://github.com/realm/SwiftLint" rel="noopener ugc nofollow" target="_blank"> SwiftLint </a>。有两种安装方式:使用自制软件或使用CocoaPods。在我看来，通过自制软件安装是正确的选择——你不必处理CocoaPods的麻烦。使用Homebrew，它将被安装在你的系统上，这样你就可以在任何项目或任何Swift文件中使用它，而无需在任何地方运行<code class="fe mz na nb nc b">pod install</code>。</p><p id="82b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要通过Homebrew安装它，请运行以下命令:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="ae63" class="nh md it nc b gy ni nj l nk nl">brew install swiftlint</span></pre><p id="17bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行此命令后，SwiftLint将安装在您的Mac上。从这里，您可以通过命令行在您的项目上运行SwiftLint，但我使用它的方式是将其构建到Xcode中。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="758f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">棉绒与正确</h1><p id="2991" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在开始Xcode集成之前，我认为最好花点时间回顾一下SwiftLint附带的两个命令:<code class="fe mz na nb nc b">swiftlint</code>和<code class="fe mz na nb nc b">swiftlint autocorrect</code>。</p><p id="16f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">前者<code class="fe mz na nb nc b">swiftlint</code>，会在运行时为你产生错误和警告。它不会为你修改你的代码。你必须自己进去做出改变。这有明显的优点和缺点。如果您要采用开发团队认可的、SwiftLint不喜欢的风格，它不会自动为您更改代码。缺点是，如果您只是将SwiftLint添加到一个现有的项目中，您可能需要筛选许多警告，以使您的项目进入合适的状态。</p><p id="964f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">后者，<code class="fe mz na nb nc b">swiftlint autocorrect</code>，是我在Xcode集成中使用的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="23e8" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Xcode集成</h1><p id="5b2e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">将SwiftLint集成到Xcode中是一个相当轻松的过程，尽管对于那些害怕接触Xcode设置的人来说(我们都知道构建一个项目是多么容易)，这似乎有点陌生。</p><p id="84f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要开始这个过程，导航到您的项目，然后导航到您的应用程序目标，然后导航到“构建阶段”<em class="nm"> </em>，如下图所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/55daeef87f03dc4a7e81c5ce08b9fa40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bGNJ6wmUP0G_vNfFk__VyA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ubump-ios目标的构建阶段</p></figure><p id="4719" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的截图中，您可以看到我导航到了目标<code class="fe mz na nb nc b">ubump-ios</code>的构建阶段，并且已经有了一个“运行脚本”<em class="nm"> </em>阶段。</p><p id="68e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果没有一个<em class="nm"> </em>阶段的“运行脚本”已经为你准备好了，添加它是非常容易的。只需点击“依赖项”<em class="nm"> </em>上方的加号按钮(如上图所示)，然后点击“新运行脚本阶段”</p><p id="d580" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我建议您将这个阶段放在编译源代码之前，这样它会自动纠正您在编译项目之前可能出现的任何简单错误。</p><p id="7296" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在您已经有了一个“运行脚本”<em class="nm"> </em>阶段，我们将希望在我们的SwiftLint脚本中添加。如果你想跑<code class="fe mz na nb nc b">swiftlint</code>或者<code class="fe mz na nb nc b">swiftlint autocorrect</code>，下面是一样的。首先，点击右边的胡萝卜，按如下方式披露您的阶段内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/813ae8ec62e081f7ff5ba07431eef1f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M6dyZsYa07x8fhtjp2yGwA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">空的运行脚本阶段。</p></figure><p id="8223" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，您会在指定的shell下看到一个文本框。在文本框中，键入以下脚本:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="05a7" class="nh md it nc b gy ni nj l nk nl">if which swiftlint &gt;/dev/null; then<br/>    swiftlint autocorrect</span></pre><p id="4b42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">if</code>语句不是必需的，但它只是确保安装了SwiftLint。如果您想调试未安装SwiftLint，您可以添加一个<code class="fe mz na nb nc b">else</code>和一个<code class="fe mz na nb nc b">echo</code>语句，如SwiftLint自述文件:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="d32d" class="nh md it nc b gy ni nj l nk nl">if which swiftlint &gt;/dev/null; then<br/>    swiftlint autocorrect<br/>else<br/>    echo "SwiftLint is not installed"<br/>fi</span></pre><p id="bcf8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想运行<code class="fe mz na nb nc b">swiftlint</code>而不是<code class="fe mz na nb nc b">swiftlint autocorrect</code>，只需从上面的脚本中删除<code class="fe mz na nb nc b">autocorrect</code>这个词，就可以了！至此，您已经将SwiftLint集成到Xcode中并正常工作了！恭喜你。也就是说，如果您想了解SwiftLint提供的一些额外特性，可以继续关注另一部分。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="12ae" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">额外功能</h1><p id="50bf" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">虽然我无论如何都不是SwiftLint power用户(我只是将它添加到我的Xcode构建阶段，然后就忘了它)，但是有一些额外的有用命令可能会对您的开发工作流有所帮助。</p><p id="3461" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在命令行上运行<code class="fe mz na nb nc b">swiftlint help</code>来获得特性的完整列表。</p><p id="2e55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中一个特性是<code class="fe mz na nb nc b">autocorrect</code>，我们之前已经讨论过了。<code class="fe mz na nb nc b">lint</code>是在命令行上运行<code class="fe mz na nb nc b">swiftlint</code>时运行的默认命令。</p><p id="4d54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想获得SwiftLint中所有规则的markdown文件，以真正了解您的代码发生了什么，那么<code class="fe mz na nb nc b">generate-docs</code>是一个有用的功能。运行该命令只是在包含所有规则的<code class="fe mz na nb nc b">.md</code>文件的目录中创建一个文件夹。</p><p id="4d98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在结束本文之前，我想提及的最后一个特性是在撰写本文时仍处于试验阶段的:<code class="fe mz na nb nc b">analyze</code>。根据<a class="ae ky" href="https://github.com/realm/SwiftLint" rel="noopener ugc nofollow" target="_blank">文件</a>:</p><blockquote class="np"><p id="d50e" class="nq nr it bd ns nt nu nv nw nx ny lu dk translated">“实验性的<code class="fe mz na nb nc b">swiftlint analyze</code>命令可以使用完整的类型检查AST来lint Swift文件。…分析器规则往往比lint规则慢得多。”</p></blockquote><p id="fbd1" class="pw-post-body-paragraph kz la it lb b lc nz ju le lf oa jx lh li ob lk ll lm oc lo lp lq od ls lt lu im bi translated">因此，如果您想要额外的功能集，这是要考虑的事情。但是，如果您只是想要高性能的基本林挺，这可能超出了您的需求范围。</p><p id="7944" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你喜欢这篇文章。编码快乐！</p></div></div>    
</body>
</html>