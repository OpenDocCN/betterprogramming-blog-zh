<html>
<head>
<title>Shareable Dictionary in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中的可共享词典</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/shareable-dictionary-in-swift-5d9b98e4f76c?source=collection_archive---------8-----------------------#2021-12-28">https://betterprogramming.pub/shareable-dictionary-in-swift-5d9b98e4f76c?source=collection_archive---------8-----------------------#2021-12-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3ad9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过引用学习在Swift中建立字典</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d76ff6d78f7077b37ea8168e4c649e90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6BhBWXAzDqudXt0VrsKJ2A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://undraw.co/" rel="noopener ugc nofollow" target="_blank"> Undraw </a></p></figure><p id="73be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Swift中的字典是按值传递的。这意味着如果传递或复制了一个字典，就会创建第二个实例。</p><p id="5ece" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你修改第二个实例时，很明显，第一个没有变异。这很酷也很安全，但有时你需要在应用程序的不同部分共享和修改字典。让我们看看你怎么做。</p><p id="4cfc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们用一点小技巧就能达到这个效果。当然，值类型不能共享，但引用类型可以，所以我们可以将字典“包装”在一个类中，该类将在应用程序之间共享:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="f372" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我使用了泛型占位符来存储任何类型的数据。</p><p id="3258" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，这段代码可以工作了，你现在就可以使用它，但是有一个小问题…让我们看看:</p><pre class="kj kk kl km gt lx ly lz ma aw mb bi"><span id="3fe7" class="mc md it ly b gy me mf l mg mh"><strong class="ly iu">var</strong> foo: PPBSharedDictionary&lt;String, String&gt; = PPBSharedDictionary()</span><span id="804a" class="mc md it ly b gy mi mf l mg mh">foo.dict = [“key”: “value”]</span></pre><p id="c6b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每次我们需要使用我们的字典时，我们必须访问类的内部属性，这不是很优雅…让我们用下标的力量来修复它，并隐藏内部字典使它<code class="fe mj mk ml ly b">private</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="1950" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">搞定了！现在，我们可以以规范的方式直接访问包装好的字典:</p><pre class="kj kk kl km gt lx ly lz ma aw mb bi"><span id="f926" class="mc md it ly b gy me mf l mg mh"><strong class="ly iu">var</strong> foo: PPBSharedDictionary&lt;String, String&gt; = PPBSharedDictionary()</span><span id="5483" class="mc md it ly b gy mi mf l mg mh">foo = [“key”: “value”]</span></pre></div></div>    
</body>
</html>