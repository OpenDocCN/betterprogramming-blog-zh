<html>
<head>
<title>Swift ArraySlices: What Are They and How Are They Used?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift数组切片:它们是什么，如何使用？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swifts-arrayslices-920d2e1a6332?source=collection_archive---------7-----------------------#2020-04-05">https://betterprogramming.pub/swifts-arrayslices-920d2e1a6332?source=collection_archive---------7-----------------------#2020-04-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9ae2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Swift不完全数组数据类型指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c93b7e660d2d59398a0f9414ce95b144.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_7kSsDHU3C8j3aHhhp3y6w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Pierre Bamin 在<a class="ae ky" href="https://unsplash.com/s/photos/array?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="cfe2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个<code class="fe lv lw lx ly b">ArraySlice</code>是一个现有数组的视图。但是为什么呢，这对你的代码意味着什么呢？</p><p id="deda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">难度:初级|简单<strong class="lb iu"> </strong> | <strong class="lb iu">普通</strong> |挑战</p><p id="972c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(本文后面会对内存位置进行一些讨论，但是除此之外，还有一些相当不错的图表可以帮助您。)</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="4824" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">先决条件</h1><ul class=""><li id="cb5f" class="my mz it lb b lc na lf nb li nc lm nd lq ne lu nf ng nh ni bi translated">数组的一些知识。</li><li id="610a" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">在后面的小节中，您需要了解数组范围。</li><li id="c4d6" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">一些关于<a class="ae ky" href="https://medium.com/@stevenpcurtis.sc/your-own-subscript-in-swift-5ac0a87410af" rel="noopener">订阅</a>的知识，以及<a class="ae ky" href="https://docs.swift.org/swift-book/LanguageGuide/Subscripts.html" rel="noopener ugc nofollow" target="_blank">苹果指南</a>会很有用。</li><li id="74e9" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">本文后面会用到一些字符串插值。</li><li id="4ebe" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">对Swift中引用的一些理解。</li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="6e0c" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">术语</h1><ul class=""><li id="615c" class="my mz it lb b lc na lf nb li nc lm nd lq ne lu nf ng nh ni bi translated">数组:一系列有序的相同类型的对象。</li><li id="9c1f" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><code class="fe lv lw lx ly b">ArraySlice</code>:一个<code class="fe lv lw lx ly b">Array</code>、<code class="fe lv lw lx ly b">ContiguousArray</code>或<code class="fe lv lw lx ly b">ArraySlice</code>实例的一部分，它使得在更大的数组上执行操作变得更快更有效。</li><li id="6150" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">集合:可以被遍历(次数不限)并可以通过索引下标访问的元素序列。</li><li id="c3aa" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">枚举:集合中项目的完整有序列表。</li><li id="0efb" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">Index:元素在数组中的位置</li><li id="bd9d" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">Indices:赋予数组的数字位置。</li><li id="d30f" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">整数:没有小数部分的数字，即小数点后没有数字。</li><li id="2664" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">Offset:在数组或其他数据结构中，offset是一个整数，表示数据结构的起点和所讨论的对象之间的距离。</li><li id="b395" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">下标:访问数组(或任何集合或列表，取决于语言)中成员的快捷方式。</li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="8481" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">切片是什么？</h1><p id="965b" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">想象一个数组应该很简单。也许我们正在调查学校里学生的年龄。</p><p id="314f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简单。</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="94c0" class="nv mh it ly b gy nw nx l ny nz">let<strong class="ly iu"> </strong>ages = [1,5,12,15,2,26,67,36]</span></pre><p id="474b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用一个相当简洁的图表来展示(在盒子的顶部标出<code class="fe lv lw lx ly b">array</code>中的位置):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/429bc80102ee525b201fe413c522e3f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5zDpNx7FiSdt4fY1cCj9ww.png"/></div></div></figure><p id="d503" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，当然，斯威夫特的类型推断已经帮助我们解决了这个问题。也就是说，我们已经创建了一个<code class="fe lv lw lx ly b">Integer</code>的<code class="fe lv lw lx ly b">Array</code>，所以实际的<code class="fe lv lw lx ly b">Array</code>如下所示:</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="11ac" class="nv mh it ly b gy nw nx l ny nz">let<strong class="ly iu"> </strong>ages: [Integer] = [1,5,12,15,2,26,67,36]</span></pre><p id="9379" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以通过使用<code class="fe lv lw lx ly b">Array</code>的<code class="fe lv lw lx ly b">subscript(_:)</code>函数获取一个范围来获取第一个元素。</p><p id="3ec9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">厉害！</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b53b" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">使用数组的下标(_:)函数</h1><p id="91d2" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">我们可以使用订阅来访问一个<code class="fe lv lw lx ly b">collection</code>的成员元素。考虑到以上定义的我们的年龄<code class="fe lv lw lx ly b">array</code></p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="595f" class="nv mh it ly b gy nw nx l ny nz">let<strong class="ly iu"> </strong>initialAges = ages[0...1]</span></pre><p id="bd45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个人都喜欢这种技术——现在我们应该小心我们在这种情况下实际做了什么。这里的<em class="ob">不是</em>新的<code class="fe lv lw lx ly b">initialAges</code>T5的新存储，而是对现有<code class="fe lv lw lx ly b">array</code>的一种看法。</p><p id="af95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">等等。什么？</p><p id="7c72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一张图将帮助我们了解机器上<code class="fe lv lw lx ly b">ages</code>和<code class="fe lv lw lx ly b">intialAges</code>之间的关系。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/c1b705e5f6ab80b955fb1fbf75c5b54d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZkED09QSPvuPwQYuAgWM6w.png"/></div></div></figure><p id="e076" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以围绕<code class="fe lv lw lx ly b">arrays</code>和<code class="fe lv lw lx ly b">arrayslices</code>更深入地了解一些细节，并实际使用Swift来帮助我们。</p><p id="2778" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">证据就在内存分配中。</p><p id="8a0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们期待<code class="fe lv lw lx ly b">initialAges</code>(也就是上面定义的<code class="fe lv lw lx ly b">ArraySlice</code>)。</p><p id="e7ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，我们期望<code class="fe lv lw lx ly b"><em class="ob">initialAges</em></code>使用与初始<code class="fe lv lw lx ly b">array</code>相同的<em class="ob">内存位置</em> <strong class="lb iu"> <em class="ob"> </em> </strong>。也就是说，<code class="fe lv lw lx ly b">agesArray</code> <strong class="lb iu"> <em class="ob"> </em> </strong>和<strong class="lb iu"> <em class="ob"> </em> </strong> <code class="fe lv lw lx ly b">initialAges</code>都在你的主机内存的同一个位置吗？</p><p id="a969" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以查一下。</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="1192" class="nv mh it ly b gy nw nx l ny nz">ages.withUnsafeBytes {<br/>    print ($0)<br/>}</span><span id="43f4" class="nv mh it ly b gy oc nx l ny nz">initialAges.withUnsafeBytes{<br/>    print ($0)<br/>}</span></pre><p id="f9eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这会将以下内容打印到控制台(请记住，由于各种原因，实际内存位置在您的机器上会有所不同):</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="f413" class="nv mh it ly b gy nw nx l ny nz">UnsafeRawBufferPointer(start: 0x00006000025c0620, count: 64)</span><span id="72a6" class="nv mh it ly b gy oc nx l ny nz">UnsafeRawBufferPointer(start: 0x00006000025c0620, count: 16)</span></pre><p id="134d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">ages</code>和<code class="fe lv lw lx ly b">initialAges</code>起始位置相同，但长度不同！</p><p id="7332" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们所料，<code class="fe lv lw lx ly b">initialAges</code>只是<code class="fe lv lw lx ly b">array</code>上的一个视图。</p><p id="f6c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也就是说，<code class="fe lv lw lx ly b">ArraySlice</code>没有<em class="ob">而不是</em> <strong class="lb iu"> </strong>创建副本(也没有采用任何优化，比如写时复制来实现这一点)，而是一个到现有数组的视图。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="085a" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">数组切片的索引</h1><p id="d789" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">上面定义的<code class="fe lv lw lx ly b">ArraySlice</code>(以及同样的<code class="fe lv lw lx ly b">Array</code>)具有用于各个位置定位的<code class="fe lv lw lx ly b">indices</code>。</p><p id="1fa2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这个例子，我为数组使用了一个新的例子，一个<code class="fe lv lw lx ly b">heights</code>在那个<code class="fe lv lw lx ly b">array</code>的中间两个元素上有一个<code class="fe lv lw lx ly b">ArraySlice</code>视图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/6093ea81d9985ed5dff456f8ec8e37fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HEMgIIGTA2IRzALDLAtqgA.png"/></div></div></figure><p id="3a08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与任何数组一样，您可以遍历它，而如上所示的<code class="fe lv lw lx ly b">heights</code>则不能。</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="fe53" class="nv mh it ly b gy nw nx l ny nz">for i in 0...3 {<br/>    print (height[i])<br/>}</span></pre><p id="0303" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将打印175、159、192和184。</p><p id="efe8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们试图从<code class="fe lv lw lx ly b">sliceOfHeights</code> <strong class="lb iu"> <em class="ob"> </em> </strong> <code class="fe lv lw lx ly b">ArraySlice</code>中打印同样的内容时，我们得到了一个出<code class="fe lv lw lx ly b">index</code>的错误。这并不奇怪，因为视图中只有两个元素。</p><p id="7f82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，如果我们试图遍历前两个元素呢？</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="8f4e" class="nv mh it ly b gy nw nx l ny nz">for i in 0...1 {<br/>    print (sliceOfHeights[i])<br/>}</span></pre><p id="f008" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是<em class="ob">还是</em>产生指数越界错误！</p><p id="6f83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为什么？索引从最初的<code class="fe lv lw lx ly b">array</code>开始编号。让我们再看一下图表。</p><p id="722f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数组顶部的索引位置(0…3)适用于<em class="ob"/><code class="fe lv lw lx ly b">heights</code>和<code class="fe lv lw lx ly b">sliceOfHeights</code>，意味着0确实存在于<code class="fe lv lw lx ly b">heights</code>(并存储175)中，但不存在于<code class="fe lv lw lx ly b">sliceOfHeights</code> <strong class="lb iu"> </strong>(因为<code class="fe lv lw lx ly b">sliceOfHeights</code>直到索引1才开始)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/6093ea81d9985ed5dff456f8ec8e37fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HEMgIIGTA2IRzALDLAtqgA.png"/></div></div></figure><p id="9f18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，解决办法是什么呢？这里有一个<em class="ob">不足</em>的解决方案:</p><h2 id="05f5" class="nv mh it bd mi oe of dn mm og oh dp mq li oi oj ms lm ok ol mu lq om on mw oo bi translated">相对解决方案</h2><p id="f327" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">以下<code class="fe lv lw lx ly b">enumeration</code>解决方案是相对解决方案:</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="6d7d" class="nv mh it ly b gy nw nx l ny nz">for<strong class="ly iu"> </strong>item in<strong class="ly iu"> </strong>sliceOfHeights.enumerated() {<br/>    print(item.offset)<br/>}</span></pre><p id="fe7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管这确实有效，但它确实提供了一个有点混乱的结果(因为<code class="fe lv lw lx ly b">slideOfHeights</code>的偏移量是一个相对数字)。</p><p id="51f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此输出为0和1，因为根据定义项目<code class="fe lv lw lx ly b">offset</code>是相对的<em class="ob">。</em></p><p id="e190" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下图中，绝对值用绿色显示，而报复性的用相当吸引人的蓝色标记。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/b9a965dab1c1febda8fe5fc1f4338e89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7o5Xd6Ds4BfPgrRoNXAvzw.png"/></div></div></figure><h2 id="2ae8" class="nv mh it bd mi oe of dn mm og oh dp mq li oi oj ms lm ok ol mu lq om on mw oo bi translated">绝对解决方案</h2><p id="081c" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">或者，我们可以生成一个输出我们的<code class="fe lv lw lx ly b">array</code>和<code class="fe lv lw lx ly b">arrayslice</code>的<code class="fe lv lw lx ly b">indices</code>的解决方案，我们将使用Swift的<code class="fe lv lw lx ly b">startIndex</code>和<code class="fe lv lw lx ly b">endIndex</code>如下:</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="bb2c" class="nv mh it ly b gy nw nx l ny nz">for<strong class="ly iu"> </strong>i in<strong class="ly iu"> </strong>sliceOfHeights.startIndex ..&lt; sliceOfHeights.endIndex {<br/>    print ("index: \(i), value: \(sliceOfHeights[i])")<br/>}</span></pre><p id="92ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它打印以下内容:</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="7ecf" class="nv mh it ly b gy nw nx l ny nz">index: 1, value: 159<br/>index: 2, value: 192</span></pre><p id="e200" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，打印到控制台的索引代表(绝对)<code class="fe lv lw lx ly b">indices</code>，因此，该值按预期打印出来(在下图中以红色显示)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/56d67c34063827f3722059892401ade5.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*YTGZsdRjACpBrIkp0duzRg.png"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b7c9" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">内存:说明数组切片和数组之间的关系</h1><p id="36f1" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated"><code class="fe lv lw lx ly b">ArraySlice</code>保存对数组的强引用。因此，如果你存储一个<code class="fe lv lw lx ly b">ArraySlice</code>，<code class="fe lv lw lx ly b">Array</code>将持续存在(即使<code class="fe lv lw lx ly b">array</code>的生命周期应该已经结束)。</p><p id="bdd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着一件事:小心使用<code class="fe lv lw lx ly b">ArraySlice</code>，确保那些<code class="fe lv lw lx ly b">Arrays</code>不会留在你机器的内存中。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="a555" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="2359" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated"><code class="fe lv lw lx ly b">ArraySlices</code>很有用，实际上与适用于任何<code class="fe lv lw lx ly b">collection</code>的Slice非常相似。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="f1de" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">扩展你的知识</h1><ul class=""><li id="ee9b" class="my mz it lb b lc na lf nb li nc lm nd lq ne lu nf ng nh ni bi translated">苹果有一个<a class="ae ky" href="https://docs.swift.org/swift-book/LanguageGuide/Subscripts.html" rel="noopener ugc nofollow" target="_blank">下标指南</a>。</li></ul></div></div>    
</body>
</html>