<html>
<head>
<title>How to Use Custom Angular Form Controls in Jest and Storybook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在笑话和故事书中使用自定义角形控件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-custom-angular-form-controls-in-jest-and-storybook-6479e52b7636?source=collection_archive---------6-----------------------#2020-03-20">https://betterprogramming.pub/how-to-use-custom-angular-form-controls-in-jest-and-storybook-6479e52b7636?source=collection_archive---------6-----------------------#2020-03-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="09a3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">开发功能强大且美观的自定义窗体控件</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4f2f0acd9c35940d3524b4cf76b8b3cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5q8PloYuDfH2_diK"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@kaleidico?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">万花筒</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="8663" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大多数网站和应用程序都有表单。Angular提供了许多功能来构建可重用的复杂表单。</p><p id="e37a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以构建<a class="ae ky" href="https://angular.io/api/forms/FormsModule" rel="noopener ugc nofollow" target="_blank">模板驱动表单</a>和<a class="ae ky" href="https://angular.io/api/forms/ReactiveFormsModule" rel="noopener ugc nofollow" target="_blank">反应式表单</a>。表单不仅应该从用户那里收集数据，还应该提供一个很好的UX来避免用户的混乱。</p><p id="b3ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Angular有一个名为<a class="ae ky" href="https://angular.io/api/forms/ControlValueAccessor" rel="noopener ugc nofollow" target="_blank"> ControlValueAccessor </a>的接口，自定义表单控件需要实现这个接口。</p><p id="51a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">模板驱动的表单对于初学者和简单的组件来说是一个很好的选择。另一方面，对于更高级的用法，反应式更强大。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="566a" class="ma mb it lw b gy mc md l me mf">&lt;!-- Template-driven Forms --&gt;<br/>&lt;app-select [(ngModel)]="selectValue" (ngModelChange)="onSelectChange()"&gt;&lt;/app-select&gt;<br/>&lt;!-- Reactive Forms --&gt;<br/>&lt;app-select formControlName="selectValue"&gt;&lt;/&lt;app-select&gt;</span></pre><p id="f572" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您有多个前端开发人员和UX设计人员，就需要协作来创建一致且易于使用的ui。<a class="ae ky" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank"> Storybook </a>是一个UI组件浏览器和开发工具，可以与Angular、React等一起使用。</p><p id="ad72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Storybook提供了一个很好的开发环境，有助于独立地创建UI组件。开发人员和设计人员都有一个现有UI组件的概述，这有助于创建更加一致的UI。</p><p id="25d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你以前没有用过Storybook，Storybook的网站上有一些来自IBM等公司的例子。</p><p id="9abb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然漂亮的用户界面看起来很好，但功能性不应该被牺牲。为了确保我们不会意外破坏现有的功能，开发人员会编写不同种类的测试，这些测试通常会在像<a class="ae ky" href="https://jenkins.io/" rel="noopener ugc nofollow" target="_blank"> Jenkins </a>或<a class="ae ky" href="https://gitlab.com/" rel="noopener ugc nofollow" target="_blank"> GitLab </a>这样的配置项上自动运行。</p><p id="d937" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Jest 是一个流行的JavaScript测试框架，对于编写和执行测试来说，它既快速又简单。这使得Jest成为编写组件测试的好选择。</p><p id="fcb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将展示如何在Jest中测试一个自定义的表单控件Angular组件，并在Storybook中展示它。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="dd0f" class="mn mb it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">如何在故事书中使用自定义角形控件</h1><ol class=""><li id="7504" class="ne nf it lb b lc ng lf nh li ni lm nj lq nk lu nl nm nn no bi translated">创建一个包含这些故事的新文件。</li><li id="22be" class="ne nf it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">导入组件和必要的依赖项。</li><li id="846f" class="ne nf it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">将必要的道具传递给组件。我们需要传递<code class="fe nu nv nw lw b">ngModel</code>来启用数据绑定，传递<code class="fe nu nv nw lw b">ngModelChange</code>来监听自定义表单控件组件的值变化。</li><li id="6c58" class="ne nf it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">可选:提供<a class="ae ky" href="https://github.com/storybookjs/storybook/tree/master/addons/knobs" rel="noopener ugc nofollow" target="_blank">旋钮</a>来轻松编辑故事书UI中的道具，以查看组件的不同状态。</li></ol><p id="3840" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个使用故事书来创建我们的<code class="fe nu nv nw lw b">JsonFormControlComponent</code>的两个故事的例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Storybook显示自定义表单控件组件</p></figure><p id="9043" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想了解Storybook如何在内部处理自定义的角形控件，请查看GitHub 上的<a class="ae ky" href="https://github.com/storybookjs/storybook/blob/d0b93325d94095dbcdb417d49552509eb6148b1d/app/angular/src/client/preview/angular/components/app.component.ts#L117" rel="noopener ugc nofollow" target="_blank">源代码。</a></p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="80be" class="mn mb it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">如何在Jest中使用自定义角形控件</h1><ol class=""><li id="c02d" class="ne nf it lb b lc ng lf nh li ni lm nj lq nk lu nl nm nn no bi translated">创建一个包含测试的新文件。</li><li id="a93d" class="ne nf it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">使用<code class="fe nu nv nw lw b"><a class="ae ky" href="https://angular.io/api/core/testing/TestBed" rel="noopener ugc nofollow" target="_blank">TestBed</a></code>导入您的组件和必要的依赖项。</li><li id="b05b" class="ne nf it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">编写测试用例。我们可以监视触发表单控件值更改的函数，以检查是否发出了正确的值。</li></ol><p id="8e80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个用Jest测试我们的自定义<code class="fe nu nv nw lw b">JsonFormControlComponent</code>的例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Jest测试自定义表单控件组件</p></figure><p id="50c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">顺便说一下:如果你使用Jasmine 作为测试框架，上面的例子也是有效的。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="4e8a" class="mn mb it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">结论</h1><p id="59a0" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li nz lk ll lm oa lo lp lq ob ls lt lu im bi translated">感谢您阅读这篇关于如何使用Jest和Storybook在Angular中开发和测试自定义表单控件的短文。</p><p id="fbed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你对笑话和故事书有什么体验？请在评论中告诉我。</p></div></div>    
</body>
</html>