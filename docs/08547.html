<html>
<head>
<title>How To Set Up Firebase Push Notifications in a React Native App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React本机应用程序中设置Firebase推送通知</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-set-up-firebase-push-notifications-in-a-react-native-app-a9405af32093?source=collection_archive---------0-----------------------#2021-05-13">https://betterprogramming.pub/how-to-set-up-firebase-push-notifications-in-a-react-native-app-a9405af32093?source=collection_archive---------0-----------------------#2021-05-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cc7e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">帮助您将FCM集成到React本机应用程序中的分步教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9399c9601407388a81181fa5cefde662.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TuEBJcPYNJ83VhNX"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@scalabis?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">路易斯·佩尔迪戈</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="feca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">推送通知是增加用户参与度和让用户了解最新消息和更新的好方法。在我看来，向移动应用添加推送通知的最简单方法是使用Firebase云消息。FCM可用于多种平台(iOS、Android、Unity、web ),它们的文档非常丰富。</p><p id="c922" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您根据自己的需求决定如何使用服务时，您有多种选择。例如，您可以直接从控制台发送通知，任何人都可以这样做。在这里，您可以为通知提供标题和正文，以及一些以键值对表示的可选数据。另一种选择(在我看来，也是更优雅的解决方案)是在后端完成。通过这样做，发送通知将不再需要人工干预。此外，当您拥有成千上万的用户，每个用户都根据他们的活动和更新接收个性化通知时，从控制台手动发送通知将是不可能的。</p><p id="6b5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，我们将研究如何将Firebase推送通知支持添加到React本机应用程序中。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b9d5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">需要什么库？</h1><p id="76a5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，您需要向您的项目添加一些依赖项。</p><p id="7b55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请确保您仔细遵循每一步！哪怕是一行代码或者错过一个步骤，都会导致无休止的调试。</p><h2 id="3c43" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">反应自然燃烧基</h2><p id="a0f3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">将资源库添加到项目中:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="55bd" class="mz md it nm b gy nq nr l ns nt">yarn add @react-native-firebase/app</span></pre><p id="5a1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们配置库。</p><p id="a899" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于Android端，首先需要将<code class="fe nu nv nw nm b">google-services.json</code>(从Firebase控制台下载)添加到项目的<code class="fe nu nv nw nm b">android/app</code>目录中。然后，让我们在您的应用程序中启用谷歌服务。</p><p id="3daf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">前往<code class="fe nu nv nw nm b">android/build.gradle</code>，将高亮显示的行添加到<code class="fe nu nv nw nm b">buildscript dependencies</code>部分:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="ff5d" class="mz md it nm b gy nq nr l ns nt">buildscript {<br/>  dependencies {<br/>    <em class="nx">// ... other dependencies</em><br/>    classpath 'com.google.gms:google-services:4.3.4' // ADD THIS<br/>  }<br/>}</span></pre><p id="3318" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nu nv nw nm b">android/app/build.gradle</code>中，添加这一行:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="51d9" class="mz md it nm b gy nq nr l ns nt">apply plugin: 'com.google.gms.google-services'</span></pre><p id="690a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于iOS端，我们首先需要配置Firebase SDK。</p><p id="23b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nu nv nw nm b">AppDelegate.m</code>中，添加以下导入:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="3f7c" class="mz md it nm b gy nq nr l ns nt">#import &lt;Firebase.h&gt; // ADD THIS</span><span id="ee0f" class="mz md it nm b gy ny nr l ns nt">// Make sure that Firebase.h is before FB_SONARKIT_ENABLED<br/>#ifdef FB_SONARKIT_ENABLED </span></pre><p id="3797" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nu nv nw nm b">didFinishWithLaunching</code>方法中，您应该在顶部添加以下内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="e5c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们将<code class="fe nu nv nw nm b">GoogleService-Info.plist</code>添加到项目中。如果你还没有，你需要在Firebase控制台上创建一个iOS应用程序。确保您在那里使用的包ID是正确的。</p><p id="914a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将<code class="fe nu nv nw nm b">.plist</code>文件添加到项目中时，使用Xcode添加非常重要。我犯了一个错误，只是将文件粘贴到了<code class="fe nu nv nw nm b">ios</code>目录中。然后我不明白为什么我的同事不能在他们的机器上运行这个项目。我也将解释如何解决这个问题。</p><p id="8ecc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正确的做法是在Xcode中打开你的<code class="fe nu nv nw nm b">.xcworkspace</code>文件，然后右键点击项目，“将文件添加到项目名”，然后选择<code class="fe nu nv nw nm b">.plist</code>文件。出现提示时，勾选“需要时复制项目”框。</p><p id="4d03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您不小心使用了复制粘贴将文件添加到项目中，那么不用担心！在Xcode中的“构建阶段”选项卡中找到您的目标。找到“复制包资源”一节，确保包含了正确路径的<code class="fe nu nv nw nm b">.plist</code>文件(如果没有包含，就在这里包含它)。</p><p id="7b9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">剩下要做的就是连接库。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="e6b6" class="mz md it nm b gy nq nr l ns nt">cd ios &amp;&amp; pod install</span></pre><p id="5aa0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您喜欢手动链接，您可以在<a class="ae ky" href="https://rnfirebase.io/" rel="noopener ugc nofollow" target="_blank">文档</a>中找到如何操作。</p><p id="042d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您对上面的任何步骤感到困惑，请访问<a class="ae ky" href="https://rnfirebase.io/" rel="noopener ugc nofollow" target="_blank"> RNFirebase网站</a>来完成配置。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c5e5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">对本机推送通知做出反应</h1><p id="7ed9" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><a class="ae ky" href="https://github.com/zo0r/react-native-push-notification" rel="noopener ugc nofollow" target="_blank">这个库</a>在你的应用中增加了对本地和远程通知的支持。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="32da" class="mz md it nm b gy nq nr l ns nt">yarn add react-native-push-notification</span></pre><p id="3637" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于iOS，我们将需要再添加一个库，但是我们会马上研究这个问题。首先，让我们配置Android。</p><p id="b8cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nu nv nw nm b">android/build.gradle</code>中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="bab0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nu nv nw nm b">android/app/build.gradle</code>中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="b4cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nu nv nw nm b">MainApplication.java</code>中，您只需要添加这个导入:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="da55" class="mz md it nm b gy nq nr l ns nt">import com.dieam.reactnativepushnotification.ReactNativePushNotificationPackage;</span></pre><p id="af14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在您的<code class="fe nu nv nw nm b">AndroidManifest.xml</code>文件中，您将添加以下内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="386b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">iOS推送通知</h1><p id="2861" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，在继续修改<code class="fe nu nv nw nm b">index.js</code>和<code class="fe nu nv nw nm b">App.tsx</code>之前，我们将安装<a class="ae ky" href="https://github.com/react-native-push-notification-ios/push-notification-ios" rel="noopener ugc nofollow" target="_blank">支持推送通知的库</a>。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="5f21" class="mz md it nm b gy nq nr l ns nt">yarn add @react-native-community/push-notification-ios</span></pre><p id="a0ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">别忘了链接:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="40a9" class="mz md it nm b gy nq nr l ns nt">cd ios &amp;&amp; pod install</span></pre><p id="6ac1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Xcode中进行以下更改。他们会帮助你格式化，并找出你是否有任何错误。</p><p id="0be8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nu nv nw nm b">AppDelegate.h</code>中，您将添加以下导入:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="ac71" class="mz md it nm b gy nq nr l ns nt">#import &lt;UserNotifications/UNUserNotificationCenter.h&gt;</span></pre><p id="6527" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后您将在同一个文件中添加<code class="fe nu nv nw nm b">UNUserNotificationCenterDelegate</code>协议:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="6d67" class="mz md it nm b gy nq nr l ns nt"><a class="ae ky" href="http://twitter.com/interface" rel="noopener ugc nofollow" target="_blank">@interface</a> AppDelegate : UIResponder &lt;UIApplicationDelegate, RCTBridgeDelegate, UNUserNotificationCenterDelegate&gt;</span></pre><p id="38e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nu nv nw nm b">AppDelegate.m</code>中，您将做一些补充:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="10b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样在同一个文件中，您将更改:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f0e5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">您必须进行的其他iOS配置</h1><p id="3b05" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">您需要为iOS添加通知功能。为了做到这一点，在Xcode中转到您的目标，到“签名和功能”标签，并添加一个新的功能:<code class="fe nu nv nw nm b">Push Notifications</code>。</p><p id="edce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的推送通知不会在iOS设备上工作，除非你给Firebase控制台添加一个APN键。转到控制台中的“项目设置”。在这里，你会看到一个应用程序列表(如果你没有使用flavors，可能是一个Android和一个iOS)。转到云消息选项卡。在“iOS应用程序配置”部分，您会看到“APNs认证密钥”小节。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/c02b16a80ade6117a4e4cff09bebfd26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xS5jJ6tFzrG5im8ZhUahWA.png"/></div></div></figure><p id="ca03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">名单上有两个iOS应用，因为我们用的是flavors。如果你只有一个，不用担心。</p><p id="a42f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们获取您在屏幕截图中看到的APNs身份验证密钥。我以前忘记了这一步，不明白为什么我的iOS通知不会进来！不要重复我的错误。</p><p id="8647" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">前往Apple开发者控制台。在“证书、标识符和配置文件”部分，选择“密钥”子部分。</p><p id="64bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nx">专业提示:如果你以前从未使用过这个控制台，或者你只是对知识如饥似渴，我有一个非常简单易懂的教程</em>  <em class="nx">，它将教你如何创建一个iOS应用程序，如何配置方案，什么是证书，等等。</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/c83ae1116811a12e38937e0fb96e6274.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dpijhp_0CFO4f3QDzl2T9Q.png"/></div></div></figure><p id="2e97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加新密钥。切换APN并为您的键设置一个名称:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/1de5d2c14afee24d83647bc0bcccf385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ntOX5dz8q_RSKK-zafAAVw.png"/></div></div></figure><p id="7f62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下载它，但不要关闭标签。上传到APN区的Firebase，并输入所需的id。你会在你没有关闭的苹果开发者标签上找到它们。</p><p id="03f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还和我在一起吗？厌倦了配置？好消息是:他们完成了。剩下要做的就是编写实际的代码来处理收到的通知。这不会花太长时间。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7aef" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">代码</h1><p id="9074" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我通常会在项目中添加一个<code class="fe nu nv nw nm b">NotificationManager</code>，这样我们就可以把所有东西都放在一个地方。以下要点包含了接收推送通知和本地通知(如果需要实现的话)所需的一切:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="0a08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一步是修改您的<code class="fe nu nv nw nm b">index.js</code>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="f3a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要点是，我给了你推送通知可能需要的所有东西。您可以自由使用与您相关的部分。同样，如果您也感兴趣的话，gist还会处理本地通知。</p><p id="45a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将收到的通知可能包含一些附加数据，例如当您从通知中打开应用程序时，您应该导航到用户的目的地。</p><p id="0b2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尝试从Firebase控制台发送通知(云消息传递-&gt;新通知)。选择您的两个项目(iOS和Android)以确保它们都可以工作。请记住，iOS模拟器不能用于测试推送通知:为此，您需要一个物理iOS设备。Android对我们有好处:我们可以毫无困难地在模拟器上测试通知。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5490" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">通知故障排除</h1><p id="b6d0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果您的通知没有到达:</p><ul class=""><li id="d04c" class="oe of it lb b lc ld lf lg li og lm oh lq oi lu oj ok ol om bi translated">验证您是否已经将<code class="fe nu nv nw nm b">.plist</code>和<code class="fe nu nv nw nm b">google-services.json</code>文件添加到它们应该在的地方。</li><li id="68b2" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">检查包名和包id。</li><li id="0687" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">确保Xcode项目确实检测到了<code class="fe nu nv nw nm b">.plist</code>文件(我在上面解释了如何做)。</li><li id="7c42" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">不要忘记给Firebase控制台添加APN键，否则iOS通知将无法工作。</li></ul><p id="79aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在配置了通知并确保可以从Firebase控制台发送它们(它们正在到达两个平台)之后，当应用程序启动时，您需要将Firebase令牌发送到后端服务器。当然，只有当你的应用程序有后台支持时，你才会这么做。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8bdf" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="9697" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">向React本地项目添加推送通知有点乏味，并且涉及大量配置。此外，漏掉一行可能会导致几个小时的调试，所以请确保您仔细遵循了每一步。我确信这些步骤将导致一个工作的推送通知项目。</p><p id="506d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这对你有所帮助。感谢阅读和快乐编码！</p></div></div>    
</body>
</html>