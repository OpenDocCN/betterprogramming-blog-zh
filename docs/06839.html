<html>
<head>
<title>A Case for Event Batching in Amazon EventBridge</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Amazon EventBridge中的事件批处理案例</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-case-for-event-batching-in-amazon-eventbridge-303f5c3eecee?source=collection_archive---------7-----------------------#2020-11-10">https://betterprogramming.pub/a-case-for-event-batching-in-amazon-eventbridge-303f5c3eecee?source=collection_archive---------7-----------------------#2020-11-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0b72" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">批处理事件时可以做什么</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/772b652d670e4790728e5fca09f00dd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7k8nPpHzp0KXKf0Vsf8ztg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3200849" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>以色列</p></figure><p id="80c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事件是在某一特定时间点发生的重要事情。它是独一无二的。它是单数。用技术术语来说，事件携带的信息有可能影响一个或多个应用程序。</p><p id="be54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是一些示例事件。</p><ul class=""><li id="d8cc" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">产品X的状态已更改</li><li id="8d90" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">付款Y被授权</li><li id="09ad" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">客户C下了订单</li><li id="ab6a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">账户A记入100英镑的贷方</li></ul><p id="6f1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">典型的应用程序在其运行过程中会发出大量事件。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="0c66" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">事件构成</h1><p id="99ac" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">当我们想到一个事件时，我们主要将其与携带一条消息的简单数据结构联系起来。尽管大多数事件都是如此，但事件的内容和规模会因其来源而异。</p><p id="6355" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大多数事件都有一些共同的属性。标识符、其来源和时间戳是一些常见的特征。</p><p id="5839" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个通知提交订单的示例事件。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="c3c8" class="ns mr it no b gy nt nu l nv nw">{<br/>  "id": "0c90d427-c90bb8ae53fd",<br/>  "detail-type": "event",<br/>  "source": "service-checkout",<br/>  "time": "2019-12-17T10:29:48Z",<br/>  "detail": {<br/>      "type": "ORDER",<br/>      "status": "SUBMITTED",<br/>      "orderNumber": "T123123123"<br/>    }<br/>  }<br/>}</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="5300" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">事件分类</h1><p id="31a9" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">事件可以用许多方式分类和分组。常见的分类是基于领域的。属于特定域的事件具有特定于该域的子类别。例如，属于Employee域的事件可以有与个人详细信息、学习、帐户、部门等相关的类别。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/39a8fc3aa9fa059389e5163238a5f989.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TeS67d6h9rF_alWRtDjKww.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="fd3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对事件进行分类的另一种方式是根据它所携带的信息的关键程度。并非所有的事件在处理时都表现出同等的重要性和紧迫性。</p><p id="d519" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，对一个应用程序至关重要的事件不会对另一个应用程序造成同等程度的影响。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="9ce0" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">关键事件</h1><p id="a1f2" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">一个<em class="ny">关键事件</em>是需要立即采取行动的事件。同样，包含关键数据且因此不会丢失的事件也是关键事件。</p><ul class=""><li id="009f" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">成功的支付授权对于订单处理应用程序来说是一个重要事件。</li><li id="0183" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">每天凌晨2点触发批处理作业的系统事件是独一无二的，也是一个关键事件。</li><li id="4399" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">警告未授权访问的安全事件是高优先级事件。</li></ul><p id="7bbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于这些事件的性质和响应的紧迫性，关键事件可能需要单独处理。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="031f" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">非关键事件</h1><p id="7104" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">尽管被归类为非关键事件，但这些事件也包含重要信息。然而，对这些事件的反应不必是即时的。因此，可以一起(批量)接收几个事件，而不是单独接收。</p><p id="052a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在很大程度上，这种分类是由目标应用程序和此类事件的内容驱动的。</p><ul class=""><li id="d49c" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">例如，产品评级事件对于企业来说是一个重要的事件，但就其处理的紧迫性而言，可以被视为非关键事件。</li><li id="6ac2" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">来自网站的点击流事件对商业洞察很有价值，但可以多次处理。</li><li id="d745" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">来自测量城市空气质量的物联网设备的事件是重要的数据，但就处理速度而言并不重要。</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="ee2d" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">亚马逊事件桥</h1><p id="c5b9" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">简单来说，<a class="ae ky" href="https://aws.amazon.com/eventbridge/" rel="noopener ugc nofollow" target="_blank"> Amazon EventBridge </a>是一个无服务器的事件总线，帮助连接服务和数据。在事件驱动的架构中，Amazon EventBridge充当协调者，使用事件来编排不同微服务之间的交互。</p><p id="4fc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它通常被称为星型模式，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/29cbeb5cf99ae147bab16a0a20778df8.png" data-original-src="https://miro.medium.com/v2/resize:fit:818/format:webp/1*fMLfgLnIrj4GWrR7G1xy5w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="2371" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然事件总线构成了EventBridge的核心，但是它的事件过滤和路由规则增加了识别和路由事件到一个或多个目标服务的能力和灵活性。</p><h2 id="9a6a" class="ns mr it bd ms oa ob dn mw oc od dp na li oe of nc lm og oh ne lq oi oj ng ok bi translated">灵活的事件结构</h2><p id="be10" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在EventBridge中，事件是一个简单的JSON文档。顶层有几个强制属性和一个用于添加自定义数据的<code class="fe ol om on no b">detail</code> <strong class="lb iu"> <em class="ny"> </em> </strong>部分，如AWS文档中的<a class="ae ky" href="https://docs.aws.amazon.com/eventbridge/latest/userguide/aws-events.html" rel="noopener ugc nofollow" target="_blank">所述。</a></p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="bfef" class="ns mr it no b gy nt nu l nv nw">{<br/>  "id": "0c90d427-c90bb8ae53fd",<br/>  "detail-type": "event",<br/>  "source": "email-registration",<br/>  "time": "2019-12-17T10:29:48Z",<br/>  "detail": {<br/>    "metadata": {<br/>      "domain": "LEGO-SHOP",<br/>      "service": "email-registration",<br/>      "type": "REGISTRATION_REQUEST",<br/>      "status": "REQUEST"<br/>    },<br/>    "data": {<br/>      "requestId": "unique_request_id",<br/>      "email": "<a class="ae ky" href="mailto:some_email@address.com" rel="noopener ugc nofollow" target="_blank">some_email@address.com</a>",<br/>      "product": "987654",<br/>      "notificationType": "SOLD_OUT"<br/>    }<br/>  }<br/>}</span></pre><p id="db51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于源自微服务的自定义事件，<code class="fe ol om on no b">detail</code>部分是必不可少的部分。它允许我们添加任意数量的有效JSON数据，只要整个事件的大小在允许的256 KB以内(在撰写本文时)。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="2700" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">一个事件，两种含义</h1><p id="4044" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">重要的是要理解，我们发送和接收的事件并不完全是在AWS内部看到的。</p><p id="24cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然我们的应用程序将一个事件视为一个完整的数据实体，但对于EventBridge billing，AWS将一个<em class="ny">事件</em>计为一组数据块。</p><h2 id="f671" class="ns mr it bd ms oa ob dn mw oc od dp na li oe of nc lm og oh ne lq oi oj ng ok bi translated">事件—在数据上下文中</h2><p id="bc01" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">数据事件就是我们在这个博客中讨论的内容。对于应用程序事件，256 KB的最大大小允许打包合理数量的数据。然而，在大多数情况下，事件都比较小，小于KB。</p><p id="002c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不管大小如何，最佳实践是在每个事件中只添加所需的数据。避免填写对任何人都没有用的细节。还有，考虑数据的敏感性，剔除不需要的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/31d5dfbfb0508356f71a046508b3f720.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*KxZuXyQ7-qnbfeult2TBfg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据事件与计费事件</p></figure><h2 id="8372" class="ns mr it bd ms oa ob dn mw oc od dp na li oe of nc lm og oh ne lq oi oj ng ok bi translated">事件—在计费环境中</h2><p id="bdc4" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated"><em class="ny">计费事件</em>是我用来描述AWS内部认为的定价和计费事件的术语。</p><p id="688c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上所示，对于定价，每个64 KB的数据块被计为一个事件。例如，一个256 KB的数据事件是四个计费事件。</p><ul class=""><li id="7de6" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">64 KB数据= 1个计费事件</li><li id="f79b" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">100 KB数据事件= 2次计费事件</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="0a87" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">批量事件</h1><p id="fb05" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">简单地说，一个<em class="ny">批处理事件</em>是一个承载多个业务事件的EventBridge事件——换句话说，一个EventBridge事件中的一批业务事件！</p><h2 id="a10d" class="ns mr it bd ms oa ob dn mw oc od dp na li oe of nc lm og oh ne lq oi oj ng ok bi translated">为什么？</h2><p id="d178" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">正如我们前面讨论的，发送和接收非关键事件的应用程序不需要单独处理它们。有一种情况是，在某些情况下，这样的事件可以作为一束发送并一起处理。</p><h2 id="b13e" class="ns mr it bd ms oa ob dn mw oc od dp na li oe of nc lm og oh ne lq oi oj ng ok bi translated">示例使用案例</h2><p id="e7d3" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated"><a class="ae ky" href="https://aws.amazon.com/ses/" rel="noopener ugc nofollow" target="_blank">Amazon Simple Email Service(SES)</a>作为电子邮件发送服务，可以对您发送的电子邮件进行配置，以接收不同类型的反馈。如果您使用这种配置发送大量电子邮件，您可能会收到大量反馈事件。</p><p id="32c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些反馈事件虽然对业务有用，但不需要立即处理，也不需要单独发送给目标。</p><p id="6e81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个类型为<code class="fe ol om on no b">Send</code>的SES反馈事件的精简版本。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="38a4" class="ns mr it no b gy nt nu l nv nw">{<br/>  "eventType": "Send",<br/>  "mail": {<br/>    "timestamp": "2020-10-23T13:10:09.270Z",<br/>    "source": "<a class="ae ky" href="mailto:sample.user@mail.com" rel="noopener ugc nofollow" target="_blank">sample.user@mail.com</a>",<br/>    "sendingAccountId": "1234567",<br/>    "messageId": "010701755594b076",<br/>    "destination": [<br/>      "<a class="ae ky" href="mailto:sample.user@mail.com" rel="noopener ugc nofollow" target="_blank">sample.user@mail.com</a>"<br/>    ],<br/>    "headersTruncated": false,<br/>    "headers": [<br/>      {<br/>        "name": "From",<br/>        "value": "<a class="ae ky" href="mailto:sample.user@mail.com" rel="noopener ugc nofollow" target="_blank">sample.user@mail.com</a>"<br/>      },<br/>      {<br/>        "name": "To",<br/>        "value": "<a class="ae ky" href="mailto:sample.user@mail.com" rel="noopener ugc nofollow" target="_blank">sample.user@mail.com</a>"<br/>      }<br/>    ],<br/>    "tags": {<br/>      "country": [<br/>        "GB"<br/>      ],<br/>      "ses:configuration-set": [<br/>        "email-notifications"<br/>      ],<br/>      "ses:from-domain": [<br/>        "sample.domian.com"<br/>      ],<br/>      "notificationType": [<br/>        "BACKORDER"<br/>      ],<br/>      "sku": [<br/>        "987654"<br/>      ]<br/>    }<br/>  },<br/>  "send": {}<br/>}</span></pre><p id="cca8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果这些SES反馈事件是通过亚马逊Kinesis DataFirehose获取的，那么这就允许我们批量处理这些SES事件。该处理可以通过删除不需要的数据来清理SES事件，按照类型和其他参数对它们进行分组，重新打包，并将其作为EventBridge事件发送，如下图所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/ae4a9cd136d703ec0e69d9d55d085517.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ohQKkgqN6T96THJTP0n4aA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><h2 id="1133" class="ns mr it bd ms oa ob dn mw oc od dp na li oe of nc lm og oh ne lq oi oj ng ok bi translated">批量事件示例</h2><p id="68d9" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">下面显示的是一个包含两个反馈事件的示例批处理EventBridge事件。<code class="fe ol om on no b">metadata</code>部分包含常见的属性，如<code class="fe ol om on no b">feedbackType</code> <em class="ny"> </em>和<code class="fe ol om on no b">emailType</code>、<em class="ny"> </em>，而数据部分包含一组经过修整的SES事件。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="d501" class="ns mr it no b gy nt nu l nv nw">{<br/>  "id": "0c90d427-c90bb8ae53fd",<br/>  "detail-type": "event",<br/>  "source": "email-feedback-processor",<br/>  "time": "2019-12-17T10:29:48Z",<br/>  "detail": {<br/>    "metadata": {<br/>      "domain": "LEGO-SHOP",<br/>      "service": "email-feedback-processor",<br/>      "feedbackType": "Send",<br/>      "emailType": "BACKORDER"<br/>    },<br/>    "data": [<br/>      {<br/>        "timestamp": "2020-10-23T13:10:09.270Z",<br/>        "messageId": "010701755594b076",<br/>        "email": "<a class="ae ky" href="mailto:sample.user@mail.com" rel="noopener ugc nofollow" target="_blank">sample.user@mail.com</a>",<br/>        "country": "GB",<br/>        "sku": "987654"<br/>      },<br/>      {<br/>        "timestamp": "2020-10-23T13:10:08.280Z",<br/>        "messageId": "010701755594b098",<br/>        "email": "<a class="ae ky" href="mailto:new.user@mail.com" rel="noopener ugc nofollow" target="_blank">new.user@mail.com</a>",<br/>        "country": "US",<br/>        "sku": "123456"<br/>      }<br/>    ]<br/>  }<br/>}</span></pre><h2 id="2000" class="ns mr it bd ms oa ob dn mw oc od dp na li oe of nc lm og oh ne lq oi oj ng ok bi translated">利益</h2><p id="c750" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">看情况！它不是一个放之四海而皆准的解决方案，而是针对具体的使用案例。这里有几个好处。</p><ul class=""><li id="4218" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu">减少事件噪音。</strong>与上面的用例一样，这种方法减少了淹没EventBridge的事件数量。使用EventBridge APIs发送自定义事件有<a class="ae ky" href="https://docs.aws.amazon.com/eventbridge/latest/userguide/cloudwatch-limits-eventbridge.html" rel="noopener ugc nofollow" target="_blank">配额和限制，详见AWS文档</a>。</li><li id="5bc5" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">减少事件消费者的负担。</strong>在lambda函数作为事件消费者的情况下，这将减少并发执行的数量，从而不会不必要地消耗帐户并发性。</li><li id="96e2" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">降低成本。</strong>由于事件是以64 KB数据块为单位进行计费的，因此事件批处理可以降低总体成本。</li><li id="f078" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">减少数据泄露。</strong>组织非常重视数据保护和数据隐私。降低非预期数据的可见性有助于缓解部分担忧。</li></ul><h2 id="639c" class="ns mr it bd ms oa ob dn mw oc od dp na li oe of nc lm og oh ne lq oi oj ng ok bi translated">最佳实践</h2><ul class=""><li id="f130" class="lv lw it lb b lc ni lf nj li oq lm or lq os lu ma mb mc md bi translated"><strong class="lb iu">知道事件有效载荷大小限制</strong>。不要一次打包太多。</li><li id="e0ae" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">避免在一个批次中混合不同类型的数据项</strong>。这将有助于简化过滤和路由规则配置。</li><li id="6746" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">考虑潜在的事件目标。了解他们的数据大小限制。并非所有使用者都匹配EventBridge事件负载大小。</li><li id="9361" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">了解事件</strong>的重要性及其处理要求。如果有疑问，那就不要批。</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="74cc" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">结论</h1><p id="43d4" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">AWS提供多种无服务器服务，使我们能够更快地创新和开发。我们获得的知识和经验使我们能够尝试新事物，识别新模式，并使我们的方法更加实用。</p><p id="dbaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重要的是要有一个务实的心态来实施最适合我们的解决方案！</p></div></div>    
</body>
</html>