# 审阅者和作者的拉式请求礼仪

> 原文：<https://betterprogramming.pub/pull-request-etiquettes-for-reviewer-and-author-f4e80360f92c>

## 小心那些 LGTMs

![](img/87b97ef033f416b75af334089e81a475.png)

在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上由 [Helloquence](https://unsplash.com/@helloquence?utm_source=medium&utm_medium=referral) 拍摄的照片

pull request (PR)是一个过程，在合并新代码以开发 Git 资源库(如 GitHub)中的分支或主分支之前，对新代码进行审查。

作者创建 PR，而评审者评审 PR。如果做错了，公关可能会很耗时、烦人，甚至伤脑筋。

常见的公关问题有:

*   PR 太长了。公关是开放的。没有人审查公关。
*   这位评论家不停地挑剔小错误。作者不断重复同样的错误。
*   对话没有响应。讨论变得激烈起来。什么都没有解决。

为了培养一个健康的公关过程，作者和审查者都应该对公共关系审查中的常见行为和禁忌有一个共同的理解。

纯粹基于个人经验，以下 16 个礼仪可以作为你的团队或组织公关审查的指南。

# 1.快速但不狂暴

健康公关过程的第一个关键是反应。通俗地说，快！有多快？足够快以至于没有人想等待永恒。

从收到审核请求到打开拉动式请求，您需要多长时间？如果你的平均时间超过一个小时，你就是在折磨作者。这可能会妨碍他创作下一个依赖公关的故事。

回复评论也是一样。无论是作为一个评论者还是作为一个作者，你都应该积极地保持对话，直到问题得到解决。但是，如果对方没有回应，也不要大发雷霆。他们可能在处理更紧急的事情。

上下文切换代价很高。长时间后的上下文切换代价更高，因为你必须回忆起你做了什么。当提到记住他们写的东西时，开发人员有金鱼记忆。

# 2.小的

快速公关的关键在于小。一句台词改的 PR 就是甜！没有人愿意花半个工作日去审查 1867 行修改。一些公司如谷歌有拒绝超过 500 行的公关的文化。

如果你能把你的修改分成更小的不相关的部分，这对你自己和审查者都有帮助。

# 3.精确的

公关应该专注于一个故事或一个 bug。它应该*只*做它该做的事情。你不应该在一次公关中修复几个 bug。一个错误一个公关，你会惊讶这些公关被批准的速度有多快。

如果这不是故事的要求，您不应该不必要地重命名变量、更改 CSS 样式或修复缩进。

你很想重构一个功能，因为它写得太差了，但这不是你公关的重点，所以把它留给另一个公关吧。有那些不相关的变化会增加 PR 的大小，以及不必要的增加审查工作。

# 4.创建前检查

作为一个作者，你应该在创建 PR 之前最后一次检查你自己的代码。在那之前，你应该喝杯咖啡或者上个厕所，因为当你看你的代码时，这会让你有一个清新的头脑。

令人惊讶的是，您可能会发现自己无意中检查了一些正在进行的代码或实验代码。也可能有打字错误、无意的缩进或额外的换行。

没有人乐意就这些琐碎的问题发表或接受评论，因为这会分散评论者和作者的注意力。

安装插件来防止这些错误。使用 [ESLint](https://eslint.org/) 加强造型。使用[更漂亮的](https://prettier.io/)来重新格式化代码。使用 [Husky](https://github.com/typicode/husky) 在提交前运行棉绒检查。

# 5.回复和反应

永远回复每一条评论，不管它是不是一个问题。回复类似这样的话:“会做的”、“完成了”或“接得好”。一个简单的表情符号，比如竖起大拇指👍或者笑脸😀是一个简单的表示感谢的手势。

如果你不同意，解释原因。总比 GitHub 自动解决后某个评论无人问津好。(GitHub 会在文件中的新更改被推送后解析该文件中的所有注释。)

审稿人不知道作者是同意还是不同意评论，所以他们必须自己看到修改，以确保作者不会意外忘记解决它。

# 6.不要总是 LGTM

*对我来说看起来不错* 通常表示公关看起来不错……有时，它表示“太长了，无法阅读，无论如何都要批准”*。*

LGTM 只有在有几行变化时才有意义。LGTM 只是一个给予适当评论的借口，不管公关是好还是需要更多的工作。

# 7.不要什么都同意

公关审查更多的是讨论，而不是单方面的谈话。审查者可能是有多年经验的资深开发人员，但他们可能没有你在简历中所描述的那么多背景知识。

当评论者提出修改建议时，在你开始修改之前一定要三思，因为修改可能是不必要的，而且可能会打破你原来的逻辑。

不要害怕反驳任何建议，但是给出一个你认为你的解决方案足够好的理由。

# 8.要有礼貌

这是各种交际中的常识。有礼貌没有坏处。使用:“你介意把它改成……”、“这样不是更好吗……”、“我认为我们应该……”等。如果你误解了什么或者给了一个错误的建议，说:“对不起”。

# 9.不要尖叫

不要使用尖叫案例！没有人想被骂，不管是口头上还是短信上。

也不要用感叹号，除非是赞美。情感是可以通过文字读出的。即使你尖叫或者表达你的愤怒，对任何人都没有任何好处。

# 10.不粗俗

这在任何时候都应该避免。虽然粗俗可以被当作一个笑话，但并不是每个人都对此感到舒服。一份公关可以被其他人看到，所以要专业。

避免:

*   WTF！
*   我不同意这种说法。
*   这太他妈的牛逼了！

# 11.关于执行的建议

不要听起来像你在命令作者改变你喜欢的东西。不要强制执行一条潜规则，除非它是你的团队或组织明确强制执行的指导方针。

遵守*礼貌*规则。选择恰当的词语来表达建议而不是强制。

不要说:“将这三行提取到另一个函数中”，而应该说:“你应该将这三行提取到另一个函数中。”

# 12.给出一个理由和例子

如果你不同意某事，给出一个理由和一个更好的解决方案的例子。让作者确切地知道你认为什么更好。

如果作者改到你还觉得不够好的地方，那只是再浪费一轮努力。这里有一个很好的例子:

```
+ if (results.length > 1) {
+   return true;
+ } else {
+   return false;
+ }For better readability, wouldn't it better to shorten this logic to:```
return results.length > 1
```
```

非建设性意见的例子:

*   我觉得应该有更好的解决办法。(比如什么？)
*   我发现很难读懂这行代码。(那么，你觉得什么比较好？)

# 13.离线讨论

如果你和你的同事在同一个办公室工作，离线解决复杂的问题。不要在公关中制造话题，而是走向对方的办公桌，直接向他们解释。

浪费时间来来回回发评论是没有意义的。一定要把讨论的结果作为最后的评论，这样其他人就知道它是如何解决的。

# 14.开心点

没有人认为公关有趣，所以你应该让它有趣。公关是一个累人的过程，因为当你阅读代码时，你需要收集大量的上下文，尤其是当代码是由一个没有经验的开发人员编写的时候。有时候，你的疲劳会让你下意识地写下刺耳的评论。

如果搜索表情符号或 GIF 不需要太多时间，可以使用它们。例如，使用太空入侵者👾以指示不必要的空白空间。

# 15.还人情

如果审查员及时审查了你的公关，以同样的方式审查他们的下一次公关。如果大家都这么想，世界岂不是更美好了？

# 16.表示感谢

如果有人审核并通过，在评论中说谢谢。可能没人这么做，但你应该这么做。

公关是一个学习的机会。如果你学到了什么，说谢谢。如果评论者在你的公关上花了大量时间，对他们的时间和努力表示感谢。

作为作者，在发现改动很出彩的时候，也要给作者点赞。将杂乱的代码块重构为几行的作者值得称赞。

再说一次，它总是比 LGTM 好。

# 遗言

归根结底，这完全是移情作用。公关是一个需要人际互动的过程。设身处地为他人着想，这样你就能感受到人们是如何渴望被对待的。

如果做得好，公关应该是有趣的、合作的和建设性的。

有什么经验和建议？请在下面的评论中分享。复习愉快！