<html>
<head>
<title>Designing Beautiful Command-Line Applications With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python设计漂亮的命令行应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/designing-beautiful-command-line-applications-with-python-72bd2f972ea?source=collection_archive---------0-----------------------#2022-02-09">https://betterprogramming.pub/designing-beautiful-command-line-applications-with-python-72bd2f972ea?source=collection_archive---------0-----------------------#2022-02-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ee65" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">五个库，让你的主机更漂亮</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/42f4a83f706c5d9cc6a5006c286dbaeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*trF_3uejajpEwp49.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Textual允许您创建这样令人惊奇的终端应用程序，它具有对鼠标光标位置作出反应的交互元素。绝对令人难以置信的是这是可能的。图片来自<a class="ae ky" href="https://github.com/Textualize/textual#creating-widgets" rel="noopener ugc nofollow" target="_blank">自述文字</a>。</p></figure><p id="20d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很多人仍然用Argparse甚至Optparse plus <code class="fe lv lw lx ly b">input()</code>编写他们的命令行应用程序。创建输出通常直接通过<code class="fe lv lw lx ly b">print</code>和格式化字符串来完成——当您想要打印表格或有一些颜色/强调时，这就变得非常麻烦了。</p><p id="0712" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有四个库可以让你做得更好。我保证最后两个会让你大吃一惊——让我们开始吧！</p><h1 id="0ea2" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">№1和2:为CLI使用click或Typer</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/7b2222553c656191ba39e38738dbebd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vrv9NdR4126ESr-luwUpVw.png"/></div></div></figure><p id="b349" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://pypi.org/project/click/" rel="noopener ugc nofollow" target="_blank"> click </a>是Flask生态系统中的一个库，用于创建非交互式命令行界面。它解析命令行参数/选项，但是以一种非常聪明的方式使用了decorators。尤其是创建子命令的选项是一流的</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="47bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看起来像这样:</p><pre class="kj kk kl km gt mu ly mv mw aw mx bi"><span id="fbab" class="my ma it ly b gy mz na l nb nc">$ python click-example.py --help                 <br/>Usage: click-example.py [OPTIONS] COMMAND [ARGS]...</span><span id="1f3e" class="my ma it ly b gy nd na l nb nc">Awesome app doing awesome things.</span><span id="21c7" class="my ma it ly b gy nd na l nb nc">Options:<br/>  --help  Show this message and exit.</span><span id="1533" class="my ma it ly b gy nd na l nb nc">Commands:<br/>  print   Print the file.<br/>  spread  Spread the love.<br/></span><span id="9a20" class="my ma it ly b gy nd na l nb nc">$ python click-example.py print --help <br/>Usage: click-example.py print [OPTIONS] FILE</span><span id="87b1" class="my ma it ly b gy nd na l nb nc">Print the file.</span><span id="52e5" class="my ma it ly b gy nd na l nb nc">Options:<br/>  --show-meta<br/>  --help       Show this message and exit.</span></pre><p id="e361" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://pypi.org/project/typer/" rel="noopener ugc nofollow" target="_blank"> Typer </a>是FastAPI生态系统中的一个库，与click非常相似。事实上，它使用了引擎盖下的click。Typer充分利用了类型注释，让您可以不费吹灰之力就创建漂亮的命令行界面。</p><p id="11d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下脚本创建了与上面的click脚本几乎相同的输出:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="588e" class="lz ma it bd mb mc nl me mf mg nm mi mj jz nn ka ml kc no kd mn kf np kg mp mq bi translated">№3:使用rich进行输出格式化</h1><p id="a112" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated"><a class="ae ky" href="https://pypi.org/project/rich/" rel="noopener ugc nofollow" target="_blank"> Rich </a>是一个Python库，用于终端中丰富的文本和漂亮的格式。它的文档非常优秀，所以我将只使用其中的一些例子。</p><h2 id="fa09" class="my ma it bd mb nv nw dn mf nx ny dp mj li nz oa ml lm ob oc mn lq od oe mp of bi translated">进度条</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/4c3bcf7386a8c1f1033a5182e8bcc476.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xpc_lhOC9E_hdlX6r9__SQ.png"/></div></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="144b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有一个基本的例子:</p><pre class="kj kk kl km gt mu ly mv mw aw mx bi"><span id="fa73" class="my ma it ly b gy mz na l nb nc"><strong class="ly iu">from</strong> rich.progress <strong class="ly iu">import</strong> track<br/><br/><strong class="ly iu">for</strong> n <strong class="ly iu">in</strong> track(range(n), description="Processing..."):<br/>    do_work(n)</span></pre><h2 id="82ab" class="my ma it bd mb nv nw dn mf nx ny dp mj li nz oa ml lm ob oc mn lq od oe mp of bi translated">桌子</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/e4c056063974d21dcb4b2bb2d04e7b88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S5MWmGdfBXGyCdaoo_xXkA.png"/></div></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h2 id="ef95" class="my ma it bd mb nv nw dn mf nx ny dp mj li nz oa ml lm ob oc mn lq od oe mp of bi translated">语法突出显示</h2><p id="d84c" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">控制台中的语法突出显示令人惊叹。显然<a class="ae ky" href="https://rich.readthedocs.io/en/latest/reference/syntax.html" rel="noopener ugc nofollow" target="_blank"> rich.syntax.Syntax </a>在幕后使用pygments，所以你可以在许多不同的<a class="ae ky" href="https://pygments.org/styles/" rel="noopener ugc nofollow" target="_blank">语法高亮主题</a>中进行选择。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/948726ca69155b077225d8be1d656f3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RMczWztDkY-jb6q6xtfN7w.png"/></div></div></figure><h2 id="7d0f" class="my ma it bd mb nv nw dn mf nx ny dp mj li nz oa ml lm ob oc mn lq od oe mp of bi translated">树</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/5fa41365587e058432f7e6d018ee8d18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mgMA4HGBH3K_QBWHb1dGrQ.png"/></div></div></figure><h2 id="93de" class="my ma it bd mb nv nw dn mf nx ny dp mj li nz oa ml lm ob oc mn lq od oe mp of bi translated">提示和确认</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/c6faf88dc37f525aae1ae2189c219f65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cR3mJ4QiUuFnHK7v1vaISw.png"/></div></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h2 id="a84d" class="my ma it bd mb nv nw dn mf nx ny dp mj li nz oa ml lm ob oc mn lq od oe mp of bi translated">额外收获:REPL的富人</h2><p id="1a04" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">如果您想直接在Python REPL中进行漂亮的打印，请尝试以下方法:</p><pre class="kj kk kl km gt mu ly mv mw aw mx bi"><span id="ee05" class="my ma it ly b gy mz na l nb nc">&gt;&gt;&gt; from rich import pretty<br/>&gt;&gt;&gt; pretty.install()<br/>&gt;&gt;&gt; ["Rich and pretty", True]</span></pre><p id="51db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Rich还提供了一个<code class="fe lv lw lx ly b">inspect</code>函数，这个函数可以很好地计算出一个给定的对象能做什么:</p><pre class="kj kk kl km gt mu ly mv mw aw mx bi"><span id="1327" class="my ma it ly b gy mz na l nb nc">&gt;&gt;&gt; <strong class="ly iu">from</strong> rich <strong class="ly iu">import</strong> inspect<br/>&gt;&gt;&gt; <strong class="ly iu">from</strong> rich.color <strong class="ly iu">import</strong> Color<br/>&gt;&gt;&gt; color = Color.parse("red")<br/>&gt;&gt;&gt; <strong class="ly iu">inspect</strong>(color, methods=True)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/0da24afe955c919b25f935486b65da4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*FEFyqzA0Tadqh95vWD-xtg.png"/></div></figure><h1 id="dbf6" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">№4:为TUI应用程序使用文本</h1><p id="7de4" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated"><a class="ae ky" href="https://pypi.org/project/textual/" rel="noopener ugc nofollow" target="_blank"> Textual </a>是Python的一个TUI(文本用户界面)框架。它允许您与鼠标移动/点击进行交互，让组件监听按键，重新呈现部分屏幕。我一直认为这只有在GUI开发中才有可能。疯狂。我喜欢它</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/e707b44f11a06ee83a6a4e92c7bafc4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0TtT8_8rLJvQo6hS.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Textual允许您定义用户界面的独立元素，即所谓的小部件。图片来自文字的<a class="ae ky" href="https://github.com/Textualize/textual#widgets" rel="noopener ugc nofollow" target="_blank">自述。</a></p></figure><p id="1d8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">textual的自述文件中的以下代码从头开始生成交互式示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="4f04" class="lz ma it bd mb mc nl me mf mg nm mi mj jz nn ka ml kc no kd mn kf np kg mp mq bi translated">№5:终端中的图形</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/205b3a095503db69228390520e145938.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sy2QLEcUtiGPmBYe"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pypi.org/project/plotext/" rel="noopener ugc nofollow" target="_blank"> Savino Piccolomo在PyPI </a>上提供(本贴已获得许可)</p></figure><p id="f9eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果rich和textual的功能对你来说还不够疯狂，那么试试<code class="fe lv lw lx ly b">plotext</code>。<code class="fe lv lw lx ly b"><a class="ae ky" href="https://pypi.org/project/plotext/" rel="noopener ugc nofollow" target="_blank">plotext</a></code>直接在终端上绘图:语法与matplotlib非常相似，它没有依赖项(除了图像绘图所需的可选依赖项),可以将绘图保存为文本或彩色HTML🤯</p><pre class="kj kk kl km gt mu ly mv mw aw mx bi"><span id="9c26" class="my ma it ly b gy mz na l nb nc">import plotext as plt # &lt;--- this is plotext, not matplotlib!<br/>y = plt.sin() # sinusoidal signal <br/>plt.scatter(y)<br/>plt.title("Scatter Plot")<br/>plt.show()</span></pre><div class="oo op gp gr oq or"><a href="https://stackoverflow.com/questions/37288421/how-to-plot-a-chart-in-the-terminal" rel="noopener  ugc nofollow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd iu gy z fp ow fr fs ox fu fw is bi translated">如何在终端中绘制图表？</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">我正在研究ML/Theano，最近偶然发现了这个脚本…</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">stackoverflow.com</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf ks or"/></div></div></a></div></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="64bc" class="lz ma it bd mb mc nl me mf mg nm mi mj jz nn ka ml kc no kd mn kf np kg mp mq bi translated">摘要</h1><p id="c729" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated"><code class="fe lv lw lx ly b"><strong class="lb iu">click</strong>/<strong class="lb iu">typer</strong></code>允许你为你的应用程序创建一个漂亮的静态界面，<code class="fe lv lw lx ly b">rich</code>给你很多格式选项，比如进度条和表格。如果你想留在终端上，但得到类似GUI的特性，试试<code class="fe lv lw lx ly b">textual</code>和<code class="fe lv lw lx ly b">plotext</code>。</p><p id="92e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然您已经知道了如何用Python创建漂亮的终端应用程序，那么您应该确保您的终端也是闪亮的:</p><div class="oo op gp gr oq or"><a href="https://towardsdatascience.com/how-to-get-an-amazing-terminal-91619a0beeb7" rel="noopener follow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd iu gy z fp ow fr fs ox fu fw is bi translated">如何获得一个令人惊叹的终端</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">在Windows和Linux中；包括提示、字体和颜色</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">towardsdatascience.com</p></div></div><div class="pa l"><div class="pg l pc pd pe pa pf ks or"/></div></div></a></div></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><pre class="kj kk kl km gt mu ly mv mw aw mx bi"><span id="89ab" class="my ma it ly b gy mz na l nb nc"><a class="ae ky" href="https://martinthoma.medium.com/membership" rel="noopener">Sign up for the Medium membership using my link</a> if you haven’t done it yet. It encourages me to write more.</span></pre></div></div>    
</body>
</html>