<html>
<head>
<title>How to Import Swift URLRequests Into Postman</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将Swift URLRequests导入Postman</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-import-swift-urlrequests-into-postman-ef6c65c20834?source=collection_archive---------2-----------------------#2020-05-24">https://betterprogramming.pub/how-to-import-swift-urlrequests-into-postman-ef6c65c20834?source=collection_archive---------2-----------------------#2020-05-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9af3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">连接流行的API测试客户端和Swift的本地URLRequest</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a055aad20385015303e178c5f7822860.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gEM4NvPnGdiUmxFA-qIgaw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">如何将Swift URLRequests导入Postman</p></figure><p id="93d0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Postman是一个创建和启动API请求的简单工具。在这篇文章中，我将分享我们如何从我们的iOS应用程序中捕获Swift URLRequests，并将它们导入Postman。这项技术将有助于在开发过程中在团队成员之间共享请求。作为奖励，我还将展示如何拦截Firebase HTTP请求。</p><p id="4db2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在你的<code class="fe lu lv lw lx b">Podfile</code>里，加上<code class="fe lu lv lw lx b">pod 'URLRequest-cURL'</code>。</p><div class="ly lz gp gr ma mb"><a href="https://github.com/depoon/URLRequest-cURL" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab fo"><div class="md ab me cl cj mf"><h2 class="bd iu gy z fp mg fr fs mh fu fw is bi translated">depoon/URLRequest-cURL</h2><div class="mi l"><h3 class="bd b gy z fp mg fr fs mh fu fw dk translated">创建cURL命令字符串的URLRequest扩展URLRequest-cURL可通过CocoaPods获得。</h3></div><div class="mj l"><p class="bd b dl z fp mg fr fs mh fu fw dk translated">github.com</p></div></div><div class="mk l"><div class="ml l mm mn mo mk mp ks mb"/></div></div></a></div><p id="6bfb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是一个cocoapod库，试图重新设计用于构建<code class="fe lu lv lw lx b">URLRequest</code>对象的组件。</p><p id="5a6a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用法非常简单。调用getter变量<code class="fe lu lv lw lx b">cURL</code>(通过扩展应用)获取<code class="fe lu lv lw lx b">String</code>中格式化的<code class="fe lu lv lw lx b">cURL</code>命令:</p><pre class="kj kk kl km gt mq lx mr ms aw mt bi"><span id="9914" class="mu mv it lx b gy mw mx l my mz">// let request = URLRequest()<br/>print(request.cURL)</span></pre><p id="de20" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是一个关于<code class="fe lu lv lw lx b">String</code>值的例子。不要惊讶地看到附加到您的请求的额外标题。尝试在Xcode控制台上打印cURL命令:</p><pre class="kj kk kl km gt mq lx mr ms aw mt bi"><span id="761e" class="mu mv it lx b gy mw mx l my mz">curl -X POST 'https://www.anonymousapi.com/checksPassword?apikey=XXYYZZ' -H 'Accept-Language: en' -H 'Content-Length: 91' -H 'Content-Type: application/json' -d '{<br/>  "email" : "alpha2@gmail.com",<br/>  "returnSecureToken" : true,<br/>  "password" : "password"<br/>}'</span></pre><p id="8d67" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以将<code class="fe lu lv lw lx b">cURL</code>命令作为原始文本导入Postman:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/4a2ffae716830cc7227f40387d5cf614.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R7aQI8aTnHVvF-6h_llu1A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在Postman中导入cURL请求</p></figure><p id="9a0e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">导入后，您可以在Postman中查看所有的头和有效负载体值。这对试图调试API问题的开发人员非常有用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/2bd4de2ffdd9f868e37949bee4b1d069.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*642GqlRv36Iw2ahJIHtKKw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在邮递员中检查请求有效负载</p></figure><p id="7f80" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，只有当我们能够在源代码中获得<code class="fe lu lv lw lx b">URLRequest</code>的实例时，上面的场景才有效。对于依赖于第三方库发出的API请求的项目，我们将需要另一个库在<code class="fe lu lv lw lx b">URProtocol</code>级别拦截请求。</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="bb81" class="nj mv it bd nk nl nm nn no np nq nr ns jz nt ka nu kc nv kd nw kf nx kg ny nz bi translated">Podfile: pod网络拦截器</h1><div class="ly lz gp gr ma mb"><a href="https://github.com/depoon/NetworkInterceptor" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab fo"><div class="md ab me cl cj mf"><h2 class="bd iu gy z fp mg fr fs mh fu fw is bi translated">depoon/网络拦截器</h2><div class="mi l"><h3 class="bd b gy z fp mg fr fs mh fu fw dk translated">这个简单的框架演示了我们如何在iOS应用程序中拦截URLRequest。这个框架允许你检查细节…</h3></div><div class="mj l"><p class="bd b dl z fp mg fr fs mh fu fw dk translated">github.com</p></div></div><div class="mk l"><div class="oa l mm mn mo mk mp ks mb"/></div></div></a></div><p id="afab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个库使用<code class="fe lu lv lw lx b">URLRequest-cURL</code> pod作为依赖库。NetworkInterceptor创建一个定制的URLProtocol并确定其优先级，目的是拦截和检查iOS应用程序发出的请求。您只需注册一个<code class="fe lu lv lw lx b">RequestSniffer</code>对象并启动设置:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure><h2 id="b012" class="mu mv it bd nk od oe dn no of og dp ns lh oh oi nu ll oj ok nw lp ol om ny on bi translated">让我们试一试</h2><p id="0e23" class="pw-post-body-paragraph ky kz it la b lb oo ju ld le op jx lg lh oq lj lk ll or ln lo lp os lr ls lt im bi translated">在本例的<a class="ae ot" href="https://github.com/depoon/ios-movies-app" rel="noopener ugc nofollow" target="_blank">中，我们将使用Firebase认证在我们的应用程序中注册新用户。</a></p><h2 id="e109" class="mu mv it bd nk od oe dn no of og dp ns lh oh oi nu ll oj ok nw lp ol om ny on bi translated">1.设置网络拦截器</h2><p id="f63a" class="pw-post-body-paragraph ky kz it la b lb oo ju ld le op jx lg lh oq lj lk ll or ln lo lp os lr ls lt im bi translated">在Podfile中使用以下pod:</p><ul class=""><li id="d580" class="ou ov it la b lb lc le lf lh ow ll ox lp oy lt oz pa pb pc bi translated"><code class="fe lu lv lw lx b">pod 'NetworkInterceptor'</code></li><li id="3cb6" class="ou ov it la b lb pd le pe lh pf ll pg lp ph lt oz pa pb pc bi translated"><code class="fe lu lv lw lx b">pod 'Firebase/Auth'</code></li></ul><h2 id="08c6" class="mu mv it bd nk od oe dn no of og dp ns lh oh oi nu ll oj ok nw lp ol om ny on bi translated">2.设置网络拦截器</h2><p id="5768" class="pw-post-body-paragraph ky kz it la b lb oo ju ld le op jx lg lh oq lj lk ll or ln lo lp os lr ls lt im bi translated">按照上面的方法设置<code class="fe lu lv lw lx b">NetworkInterceptor</code>代码。</p><h2 id="a067" class="mu mv it bd nk od oe dn no of og dp ns lh oh oi nu ll oj ok nw lp ol om ny on bi translated">3.使用这些凭据通过FirebaseAuth创建一个新用户</h2><ul class=""><li id="e416" class="ou ov it la b lb oo le op lh pi ll pj lp pk lt oz pa pb pc bi translated">电子邮件:<code class="fe lu lv lw lx b">abcstrawberry@gmail.com</code></li><li id="3b37" class="ou ov it la b lb pd le pe lh pf ll pg lp ph lt oz pa pb pc bi translated">密码:<code class="fe lu lv lw lx b">password1</code></li></ul><pre class="kj kk kl km gt mq lx mr ms aw mt bi"><span id="6236" class="mu mv it lx b gy mw mx l my mz">import FirebaseAuth</span><span id="435d" class="mu mv it lx b gy pl mx l my mz">Auth.auth().createUser(withEmail: email, password: password) { [weak self] (authResult, error) in</span><span id="3856" class="mu mv it lx b gy pl mx l my mz">    //implement post registration logic<br/>}</span></pre><h2 id="2c6c" class="mu mv it bd nk od oe dn no of og dp ns lh oh oi nu ll oj ok nw lp ol om ny on bi translated">4.检查cURL命令的控制台</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/caa1651078611d99a5e2004126aa879e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kLu1n7Bl40agmUTUaHXQow.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">cURL命令出现在XCode控制台中</p></figure><p id="3ef9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用于<code class="fe lu lv lw lx b">create user</code> API请求的<code class="fe lu lv lw lx b">cURL</code>命令出现在Xcode控制台中。你可以简单地复制它，并导入到邮差。注意，API根据<code class="fe lu lv lw lx b">Content-Length</code>头值检查有效负载。如果您使用不同的电子邮件/密码值，您需要修改<code class="fe lu lv lw lx b">Content-Length</code>值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pn"><img src="../Images/b75406d5892a61bba77636ac6a49ca0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v0wVUMKE5HATdnRaAmDm7g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">将URLRequest导入Postman的步骤</p></figure></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="4155" class="nj mv it bd nk nl nm nn no np nq nr ns jz nt ka nu kc nv kd nw kf nx kg ny nz bi translated">我以前在哪里见过这个NetworkInterceptor库？</h1><p id="cf6a" class="pw-post-body-paragraph ky kz it la b lb oo ju ld le op jx lg lh oq lj lk ll or ln lo lp os lr ls lt im bi translated">NetworkInterceptor在我之前的一篇文章中有所介绍。</p><p id="3a7e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它是为了拦截SSL固定的HTTPS请求而创建的。然而，我很快发现它是调试API相关问题的一个非常有用的工具。事实上，我的许多队友和少数读者都说它在开发过程中给了他们很大的帮助。</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="9b06" class="nj mv it bd nk nl nm nn no np nq nr ns jz nt ka nu kc nv kd nw kf nx kg ny nz bi translated">有什么我可以帮忙改进的吗？</h1><p id="d4de" class="pw-post-body-paragraph ky kz it la b lb oo ju ld le op jx lg lh oq lj lk ll or ln lo lp os lr ls lt im bi translated">是的。我当前的一个问题是为Firebase Analytics事件日志请求生成<code class="fe lu lv lw lx b">cURL</code>命令。了解Firebase Analytics的确切<code class="fe lu lv lw lx b">cURL</code>将允许我为XCUITest构建一个模拟服务器。请随意在GitHub 上创建一个拉取请求<a class="ae ot" href="https://github.com/depoon/URLRequest-cURL" rel="noopener ugc nofollow" target="_blank">来帮助我。</a></p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="a1cf" class="nj mv it bd nk nl nm nn no np nq nr ns jz nt ka nu kc nv kd nw kf nx kg ny nz bi translated">结论</h1><p id="c225" class="pw-post-body-paragraph ky kz it la b lb oo ju ld le op jx lg lh oq lj lk ll or ln lo lp os lr ls lt im bi translated">这篇文章的灵感来自我的好朋友Rizwan Ahmed的《哦，我的雨燕》。在他的作品中，他展示了任何人如何使用Postman创建示例URLSession Swift代码。他的文章和我的文章都展示了在iOS开发中使用Postman的不同方式。</p><p id="f902" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请随意将<code class="fe lu lv lw lx b">NetworkInterceptor</code>和<code class="fe lu lv lw lx b">URLRequest-cURL</code>放到您的iOS Xcode项目中，如果有帮助，请告诉我。感谢阅读。</p></div></div>    
</body>
</html>