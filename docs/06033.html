<html>
<head>
<title>Build Your First Chatbot With Python and Integrate It on Telegram</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python构建您的第一个聊天机器人，并将其集成到Telegram上</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-your-first-chatbot-with-python-and-integrate-it-on-telegram-39d7e058b709?source=collection_archive---------5-----------------------#2020-08-27">https://betterprogramming.pub/build-your-first-chatbot-with-python-and-integrate-it-on-telegram-39d7e058b709?source=collection_archive---------5-----------------------#2020-08-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6b14" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Python的自然语言工具包</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/72f4c46414f1ae58cd365141cd8a863c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r8OttW_VlBzZL_jg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">丹尼尔·科尔派在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="3754" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你知道吗？</p><blockquote class="ls lt lu"><p id="8c2e" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">“聊天机器人可以削减高达30%的运营成本。电子商务聊天机器人统计数据显示，企业每年在客户请求上花费约1.3万亿美元。在聊天机器人的帮助下，这笔费用可以减少30%。”——<a class="ae kv" href="https://www.smallbizgenius.net/by-the-numbers/chatbot-statistics/#gref" rel="noopener ugc nofollow" target="_blank">未来就在眼前——丹妮卡·乔维奇的37个有趣的聊天机器人统计数据</a></p></blockquote><p id="f2d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">几天前，我参加了一个来自MAD-Alpha的在线研讨会，在那里我了解了各种类型聊天机器人的开发和部署，如数据驱动聊天机器人、机器学习聊天机器人和通过Rasa框架的非常健壮的聊天机器人。在本文中，我将分享开发聊天机器人时所涉及的术语，并向您展示如何开发数据驱动的聊天机器人并将其部署在<a class="ae kv" href="https://telegram.org/" rel="noopener ugc nofollow" target="_blank"> Telegram </a>上。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="ec3f" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">什么是聊天机器人？</h1><p id="f3e8" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">从本质上来说，聊天机器人是一种电脑程序，它重现并形成人类对话，允许人们与计算机化的小工具合作，就像他们在与一个真实的人交谈一样。聊天机器人可以像用一行反应回答基本查询一样简单，也可以像计算机化的助理一样先进，在收集和处理数据时，它可以学习和发展以响应不断扩展的个性化水平(或者，我们可以说，是一个机器学习机器人)。</p><p id="8d3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">公司使用聊天机器人的一些方式有:</p><ul class=""><li id="46ee" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated">作为客户支持</li><li id="3bd9" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">从企业预订商品</li></ul><h2 id="eeb1" class="nr mh iq bd mi ns nt dn mm nu nv dp mq lf nw nx ms lj ny nz mu ln oa ob mw oc bi translated">聊天机器人的类型</h2><p id="66e8" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">聊天机器人主要有两种:<em class="lv"> </em>数据驱动的聊天机器人和上下文相关的聊天机器人。</p><ul class=""><li id="b2bf" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated">在数据驱动的聊天机器人中，机器人分析来自用户问题的关键词，并将关键词与预定选项进行匹配，以提供正确的响应。这些都是用Python中的<a class="ae kv" href="https://www.nltk.org/" rel="noopener ugc nofollow" target="_blank"> NLTK </a>(自然语言工具包)<em class="lv"> </em>库实现的。</li><li id="a297" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">上下文聊天机器人要高级得多。它比数据驱动的聊天机器人更好地模拟了接近人类的交互，因为当用户键入一个问题时，机器人会试图学习用户查询背后的意图和情绪。这些聊天机器人利用机器学习来学习并随着时间的推移而前进。</li></ul><p id="bf79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将基于Python中的NLTK库构建一个数据驱动的聊天机器人，并将其部署在Telegram上，以便与我们的机器人进行对话。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="a54c" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">聊天机器人的先决条件和术语</h1><h2 id="70c0" class="nr mh iq bd mi ns nt dn mm nu nv dp mq lf nw nx ms lj ny nz mu ln oa ob mw oc bi translated">先决条件</h2><p id="1995" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">对于任何想做这个聊天机器人的人来说，Python的基础知识已经足够了。</p><h2 id="0074" class="nr mh iq bd mi ns nt dn mm nu nv dp mq lf nw nx ms lj ny nz mu ln oa ob mw oc bi translated">自然语言处理</h2><p id="d5e4" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">自然语言处理帮助计算机用人们的语言与他们交流，并扩展其他与语言相关的任务。例如，NLP使计算机理解文本、听语音和翻译它、测量结论以及找出哪些部分是重要的变得可行。通过使用NLP，开发人员可以执行诸如文本摘要、命名实体关系、情感分析和语音识别等任务。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="bbba" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">NLTK</h1><p id="4503" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">NLTK(自然语言工具包)是构建Python项目以处理人类语言信息的主要平台。它为超过50个语料库和词汇资源提供了易于使用的接口<a class="ae kv" href="http://www.nltk.org/nltk_data/" rel="noopener ugc nofollow" target="_blank">，例如WordNet，以及用于分类、标记化、词干化、标记、解析和语义思考的文本处理库的设置，以及工业级NLP库的包装器。</a></p><h2 id="a87a" class="nr mh iq bd mi ns nt dn mm nu nv dp mq lf nw nx ms lj ny nz mu ln oa ob mw oc bi translated">下载和安装NLTK</h2><ol class=""><li id="e5b8" class="nd ne iq ky b kz my lc mz lf od lj oe ln of lr og nj nk nl bi translated">安装NLTK:运行<code class="fe oh oi oj ok b">pip install nltk</code></li><li id="f3f0" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr og nj nk nl bi translated">测试安装:运行<code class="fe oh oi oj ok b">python</code>，然后键入<code class="fe oh oi oj ok b">import nltk</code> <br/>获取特定于平台的指令，阅读<a class="ae kv" href="https://www.nltk.org/install.html" rel="noopener ugc nofollow" target="_blank">NLTK文档</a>。</li></ol><h2 id="4fa8" class="nr mh iq bd mi ns nt dn mm nu nv dp mq lf nw nx ms lj ny nz mu ln oa ob mw oc bi translated">安装NLTK包</h2><p id="e4f6" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">在您的Python解释器中，运行以下命令:<br/> <code class="fe oh oi oj ok b">import nltk</code>并运行<code class="fe oh oi oj ok b">nltk.download()</code>。这将打开NLTK downloader，您可以从中选择要下载的语料库、模型和其他数据包。你也可以一次下载所有的包，或者在<code class="fe oh oi oj ok b">nltk.download()</code>中指定你需要的包作为参数。</p><h2 id="b42c" class="nr mh iq bd mi ns nt dn mm nu nv dp mq lf nw nx ms lj ny nz mu ln oa ob mw oc bi translated">使用NLTK进行文本预处理</h2><p id="83c4" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">文本信息的主要问题是它们都在字符串(一组文本)中。然而，机器学习计算需要一种数值元素向量来执行任务。因此，在我们开始任何NLP项目之前，我们必须对其进行预处理，以使其适合工作。基本的文本预处理包括:</p><ul class=""><li id="958d" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated">将整个内容转换为大写<strong class="ky ir">或小写</strong>，目的是计算不会在不同的上下文中处理相同的单词。</li><li id="c8c8" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir">记号化</strong>是将字符串的文本转换成记号列表的过程。有一个句子分词器可以用来查找句子列表，还有一个单词分词器可以用来查找字符串中的单词列表。</li><li id="76e8" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">去除噪声将去除所有非标准字母或数字的东西，比如标点符号、多余的空格等。</li><li id="b260" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">去除<strong class="ky ir">停用词:</strong>停用词是常用词(如<em class="lv">中的</em>、<em class="lv">中的</em>、<em class="lv">中的</em>、中的<em class="lv">等)。)在根据用户查询选择匹配短语时没有什么价值。</em></li><li id="7ede" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir">词干化:</strong>是将一个词的派生形式还原为其词干、词根或词根形式的过程。例如，如果我们对以下单词进行词干处理:<em class="lv"> walks </em>，<em class="lv"> walking </em>，walked，那么词干单词将是一个单词，<em class="lv"> walk </em>。</li><li id="7a32" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir">词汇化</strong>:词干的一个变换版本是<em class="lv">词汇化</em>。这两者之间的显著区别是词干处理在不知道上下文的情况下对单个单词进行操作，并且经常会创建一个不存在的单词。相比之下，在词汇化之后，我们将获得一个在字典中有意义的有效单词。词汇化是基于一个单词的词类，应该确定该词类以获得该单词的正确词汇。词汇化的一个例子是<em class="lv">是</em>,<em class="lv">am</em>,<em class="lv">are</em>是动词<em class="lv"> to be </em>的形式；因此，他们的引理是<em class="lv"> be </em>。</li></ul><h2 id="7f8f" class="nr mh iq bd mi ns nt dn mm nu nv dp mq lf nw nx ms lj ny nz mu ln oa ob mw oc bi translated">一袋单词</h2><p id="4230" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">在最初的清理和处理阶段之后，我们需要将文本转换成一个有意义的数字向量(或集群)。根据杰森·布朗利对词汇袋模型的温和介绍，</p><blockquote class="ls lt lu"><p id="75bd" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">单词包是描述单词在文档中出现的文本表示。它包括两件事:</p><p id="07ec" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">1.已知单词的词汇表</p><p id="c9dd" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">2.所有已知单词存在的度量”</p></blockquote><p id="78bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在单词袋模型中，文本(如句子或文档)被表示为其单词袋，不考虑语法甚至词序，但保持多样性。使用它的主要原因是检查句子的内容是否与文档相似。</p><p id="349f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设词汇表中包含的单词:{ <em class="lv">知道</em>，<em class="lv">必须</em>，<em class="lv">做</em>，<em class="lv">足够</em> }。而我们有下面这句话:“知道是不够的；我们必须申请。”那么这个词的词包表示将会有结果向量:[1，1，0，1]。</p><h2 id="91c1" class="nr mh iq bd mi ns nt dn mm nu nv dp mq lf nw nx ms lj ny nz mu ln oa ob mw oc bi translated">TF-IDF方法</h2><p id="3cba" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">使用单词袋模型的主要缺点是，由于词汇的大尺寸，它导致高维特征向量，这导致高度稀疏的向量，因为在对应于句子中出现的单词的维度中存在非零值。</p><p id="e894" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了克服单词袋的缺点，我们对频率值进行归一化。一种新的方法，TF-IDF(术语频率-逆文档频率)，被发明用于文档搜索和相似性以及信息检索。因此，在每个文档中常见的单词(如<em class="lv"> this </em>、<em class="lv"> what </em>和【T4 if)排名较低，即使它们可能出现多次，因为它们对该文档没有多大意义。</p><p id="6727" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> TF(词频)</strong>:对一个词在当前文档中出现的频率进行评分。</p><pre class="kg kh ki kj gt ol ok om on aw oo bi"><span id="4dae" class="nr mh iq ok b gy op oq l or os">TF = (Number of times term t appears in a document)/(Number of terms in the document)</span></pre><p id="1a96" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">逆文档频率</strong>:是对单词在文档中出现的频率的评分。</p><pre class="kg kh ki kj gt ol ok om on aw oo bi"><span id="3e8b" class="nr mh iq ok b gy op oq l or os">IDF = log(N/n), where, N is the total number of documents and n is the number of documents a term t has appeared in.</span></pre><p id="dbe2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，通过取TF和IDF的乘积值，我们得到TF-IDF分数。</p><pre class="kg kh ki kj gt ol ok om on aw oo bi"><span id="ae54" class="nr mh iq ok b gy op oq l or os">TF-IDF = TF * IDF</span></pre><p id="da26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">举个例子，我们有一个四个单词的文档，其中<em class="lv"> best </em>出现了一次。因此，字<em class="lv">最佳</em>的TF为(1/4) = 0.25。<br/>现在假设，我们有五个文档，单词<em class="lv"> best </em>出现在其中两个文档中。则IDF计算为log(5/2) = 0.39。因此，TF-IDF是这些量的乘积:0.25 * 0.39 = 0.0975。</p><p id="a98e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">余弦相似度</strong></p><p id="0d9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们应用TF-IDF将文档的文本转换成向量空间中的实值向量。我们可以获得余弦相似度来确定向量的相似程度，而不考虑它们的大小。然后，我们可以得到任何一对向量的余弦相似性，方法是取它们的点积，然后除以它们的范数的积。得出矢量间夹角的余弦值。使用下面的公式，我们可以找出任意两个文档d1和d2之间的相似性，其中d1、d2是两个非零向量。</p><pre class="kg kh ki kj gt ol ok om on aw oo bi"><span id="025d" class="nr mh iq ok b gy op oq l or os">Cosine Similarity (d1, d2) =  d1 • d2 / ||d1|| * ||d2||</span></pre></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="d862" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">聊天机器人创建</h1><p id="5a5f" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">现在我们知道了一些聊天机器人创建中使用的术语，并且对自然语言处理过程有了一个大致的概念。我们将在Telegram中创建并部署一个聊天机器人，它将为您提供有关冠状病毒症状和预防的信息，并提供有关印度新冠肺炎病例的更新信息。</p><p id="fc19" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在我的<a class="ae kv" href="https://github.com/ShubhamSood1406/Corona-ChatBot" rel="noopener ugc nofollow" target="_blank"> Github库</a>中找到完整的代码。</p><p id="a847" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在接下来的聊天机器人创建过程中，我使用了<a class="ae kv" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> Jupyter笔记本</a>来编写Python代码。我会推荐你使用Jupyter笔记本。如果你不想在你的机器上安装Jupyter，你可以使用<a class="ae kv" href="https://colab.research.google.com/notebooks/intro.ipynb#recent=true" rel="noopener ugc nofollow" target="_blank"> Google Colab </a>。</p><h2 id="c17f" class="nr mh iq bd mi ns nt dn mm nu nv dp mq lf nw nx ms lj ny nz mu ln oa ob mw oc bi translated">导入必要的库</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ot ou l"/></div></figure><h2 id="904b" class="nr mh iq bd mi ns nt dn mm nu nv dp mq lf nw nx ms lj ny nz mu ln oa ob mw oc bi translated">文集</h2><p id="2948" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">在NLP中，<em class="lv">语料库</em>指的是文本的集合。语料库包含用户查询匹配的文本，聊天机器人试图获取最可靠的句子作为对用户的响应。在我们的例子中，语料库将是来自维基百科页面的关于新冠肺炎的信息。我们将把信息存储在<code class="fe oh oi oj ok b"><a class="ae kv" href="https://github.com/ShubhamSood1406/Corona-ChatBot/blob/master/content.txt" rel="noopener ugc nofollow" target="_blank">content.txt</a></code>文件中。</p><h2 id="a3ba" class="nr mh iq bd mi ns nt dn mm nu nv dp mq lf nw nx ms lj ny nz mu ln oa ob mw oc bi translated">读取数据</h2><p id="003b" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">我们将从<code class="fe oh oi oj ok b">content.txt</code>文件中读取整个文本，并应用该句子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ot ou l"/></div></figure><h2 id="7623" class="nr mh iq bd mi ns nt dn mm nu nv dp mq lf nw nx ms lj ny nz mu ln oa ob mw oc bi translated">关键词匹配</h2><p id="4371" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">我们将定义问候及其响应，以便我们的聊天机器人可以从预定义的列表中匹配它，并在开始和结束对话时适当地问候用户。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="d3c0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们举一个<code class="fe oh oi oj ok b">sent_tokens</code>和<code class="fe oh oi oj ok b">word_tokens</code>的例子:</p><pre class="kg kh ki kj gt ol ok om on aw oo bi"><span id="de9c" class="nr mh iq ok b gy op oq l or os"><strong class="ok ir">sent_tokens[:1]</strong><br/>['COVID-19 affects different people in different ways.']</span><span id="910d" class="nr mh iq ok b gy ov oq l or os"><strong class="ok ir">word_tokens[:7]<br/></strong>['COVID-19', 'affects', 'different', 'people', 'in', 'different', 'ways']</span></pre><h2 id="ae01" class="nr mh iq bd mi ns nt dn mm nu nv dp mq lf nw nx ms lj ny nz mu ln oa ob mw oc bi translated">预处理原始文本</h2><p id="c820" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">在下面的代码片段中，函数<code class="fe oh oi oj ok b">Normalize</code> <strong class="ky ir"> </strong>将对文本进行标记化，然后降低其大小写并删除标点符号，在该函数之后，<code class="fe oh oi oj ok b">LemTokens</code> <strong class="ky ir"> </strong>将对每个标记进行词汇化。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ot ou l"/></div></figure><h2 id="1f51" class="nr mh iq bd mi ns nt dn mm nu nv dp mq lf nw nx ms lj ny nz mu ln oa ob mw oc bi translated">生成响应</h2><p id="8159" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">为了从聊天机器人生成对用户查询的响应，我们将使用文档相似性:TF-IDF矢量器和余弦相似性。</p><p id="8a83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在下面的代码片段中，<code class="fe oh oi oj ok b">response</code>函数将获取从<code class="fe oh oi oj ok b">bot_initialize</code>函数传递来的<code class="fe oh oi oj ok b">user_response</code>，并将其附加到语料库中，以对文本进行矢量化，并找到<code class="fe oh oi oj ok b">user_response</code>和语料库中的单词之间的相似性。如果<code class="fe oh oi oj ok b">user_response</code>和语料库没有相似性，聊天机器人将返回<code class="fe oh oi oj ok b">I am sorry! I don’t understand. Please rephrase your query.</code> <strong class="ky ir"> </strong>，否则将从语料库中返回与<code class="fe oh oi oj ok b">user_response</code> <em class="lv">匹配度第二高的<code class="fe oh oi oj ok b">cosine_similarity</code> <strong class="ky ir"> <em class="lv"> </em> </strong>的句子。</em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="51df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的<code class="fe oh oi oj ok b">bot_initialize</code>函数将从电报中获取用户查询的输入，并开始处理它以生成可信的响应。我们还应该让我们的聊天机器人变得复杂，这样它就可以在对话开始和结束时问候用户。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="615e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">到目前为止，我们让我们的聊天机器人响应用户的查询，但是机器人从哪里得到查询来做出响应呢？我们现在要将我们的聊天机器人与电报集成，这样用户就可以通过电报与我们的机器人交谈。</p><h2 id="2fa4" class="nr mh iq bd mi ns nt dn mm nu nv dp mq lf nw nx ms lj ny nz mu ln oa ob mw oc bi translated">激活数据驱动的电报机器人</h2><p id="73bb" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">要在Telegram上激活和部署您的聊天机器人，您必须满足一些初始先决条件。</p><ol class=""><li id="5eb2" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr og nj nk nl bi translated">首先，你要对<a class="ae kv" href="https://telegram.org/" rel="noopener ugc nofollow" target="_blank">电报</a>有个交代。</li><li id="50c1" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr og nj nk nl bi translated">在Telegram上创建您的帐户后，搜索<a class="ae kv" href="https://web.telegram.org/#/im?p=@BotFather" rel="noopener ugc nofollow" target="_blank">机器人父亲</a>，并按照机器人父亲的指示创建您的聊天机器人。成功创建聊天机器人后，机器人父亲会给你一个令牌来授权机器人，并向机器人API发送请求。你应该会得到这样的消息:<code class="fe oh oi oj ok b">Use this token to access the HTTP API: </code> <br/> <code class="fe oh oi oj ok b">1245993642:AAGc_EZbIoHag4SXXXXXXXXXXXXXX</code>。</li><li id="2e26" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr og nj nk nl bi translated">成功获得电报机器人API后，在<code class="fe oh oi oj ok b">bot_initialize</code>函数后编写以下代码片段。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="e657" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以复制这几行代码，让你的聊天机器人通过Telegram工作。您可以阅读<a class="ae kv" href="https://core.telegram.org/bots/api" rel="noopener ugc nofollow" target="_blank"> Telegram Bot API文档</a> <strong class="ky ir"> </strong>，深入了解如何为您的Telegram聊天机器人添加更多功能。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="77c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们通过NLTK制作了一个聊天机器人，当Jupyter笔记本运行在我们的系统上时，它可以通过电报与我们交谈。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/ce78d0886ca68519e3228e8c7b2f75cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*SpwFLjMRYyNHz5qi7CX9bA.gif"/></div></figure><p id="74be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在Telegram上看到我和聊天机器人的对话。它几乎能够找到用户响应和语料库之间的相似性，并尝试用最大相似性的句子进行回复。您还可以看到，当我发送<strong class="ky ir"/>“okay<em class="lv">”</em><em class="lv"/>bot无法从问候的语料库中找到任何合适的匹配；所以，它在回复，“对不起！我不理解你。请重新表述您的查询。”</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="14a7" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">结论</h1><p id="a6cd" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">作为结论，我想说的是，上面的聊天机器人只是为了让你理解NLP的概念，数据驱动的聊天机器人被认为是聊天机器人的基础。此外，为了更可靠地开发聊天机器人，人们应该了解机器学习聊天机器人。你也可以为人工智能聊天机器人考虑一个类似<a class="ae kv" href="https://rasa.com/" rel="noopener ugc nofollow" target="_blank"> Rasa </a>的框架。</p></div></div>    
</body>
</html>