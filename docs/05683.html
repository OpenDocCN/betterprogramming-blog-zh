<html>
<head>
<title>Using iOS 14's Menu as a Picker in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中将iOS 14的菜单用作选取器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/using-ios-14s-menu-as-a-picker-in-swiftui-b036c772037?source=collection_archive---------2-----------------------#2020-07-28">https://betterprogramming.pub/using-ios-14s-menu-as-a-picker-in-swiftui-b036c772037?source=collection_archive---------2-----------------------#2020-07-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3cbc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">与苹果的全新采摘者合作</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a80e869b21cfbe9228190fd6df61239b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RM2QEC1OejmADHcAqP5lQw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">令人垂涎的菜单让我们开始！<a class="ae ky" href="https://unsplash.com/@sunrisephotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">日出照片</a>拍摄于<a class="ae ky" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>。</p></figure><p id="54b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在iOS 13之前，在线挑选者的选择有限。我们可以内联显示轮子，但是在表格视图、列表和表单中看起来不太好。另一个选择是使用导航栈。但是如果我们不想使用导航栈，处理选择器可能会很痛苦。</p><p id="d561" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了iOS直接支持的那两个选项，很多应用都试图通过在键盘区域显示滚轮来解决这个问题。一些应用程序甚至决定使用动作表，在我看来这是一个糟糕的设计选择。</p><p id="6be4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">iOS 14会帮助我们解决这个问题吗？如果我们看一下<a class="ae ky" href="https://developer.apple.com/documentation/swiftui/pickerstyle" rel="noopener ugc nofollow" target="_blank"> PickerStyle </a>的文档，iOS 14没有更新。我们还能去哪里看？</p><p id="f3a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在看WWDC 20的带有iOS菜单和Pickers session 的<a class="ae ky" href="https://developer.apple.com/videos/play/wwdc2020/10205/" rel="noopener ugc nofollow" target="_blank">设计，其中提到了使用菜单进行选择。</a></p><p id="bb7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是Xcode中简单菜单的外观:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="ccb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是它在iPhone上的应用:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lx"><img src="../Images/5ae2ac46db7fc375367992c4af820a5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lUzOJ26NsGVh8hIuyLzpSQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">iOS 14示例菜单截图</p></figure><p id="7ca8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这可以解决内嵌选择器的问题，但是我在文档中没有找到关于如何使用它进行选择的帮助<a class="ae ky" href="https://developer.apple.com/documentation/swiftui/menu" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="fddd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我将菜单用作选取器的尝试:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="c94e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以传入一组值，这些值可以映射到一个<code class="fe ly lz ma mb b">View</code>和一个引用当前所选索引的整数。</p><p id="0172" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe ly lz ma mb b">Menu</code>的核心工作发生在第30-53行之间。当要显示菜单时，我们循环遍历数组并显示其各自索引的视图。在所选索引的视图附近，我们添加了一个复选标记。</p><p id="5fea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">初始化器接受一个可选字符串，就像古老的<code class="fe ly lz ma mb b">Picker</code>一样。如果您想在所选值附近显示一个名称，这将很有帮助。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lx"><img src="../Images/adf7531332c592c30ee550792c0aa268.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7HQyrduxrWuMPRMoEMvtrw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们的定制菜单选择器正在运行</p></figure><p id="bb46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在大多数情况下，这可以很好地工作，因为我们的旧拾取器没有帮助。最重要的是，我们甚至可以在导航栏中这样做，效果是一样的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lx"><img src="../Images/f76549501277be0ae0a4e57b3f5aa1b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HMl6cPpSbUVa_x-pWE7p2Q.png"/></div></div></figure><p id="3090" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以在需要内联选项从值列表中进行选择的任何地方使用这个新的<code class="fe ly lz ma mb b">MenuPicker</code>。完整代码可以在<a class="ae ky" href="https://gist.github.com/imthath-m/469cee5dde579d7892e4233811f7b17c" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上看到。</p><p id="8e27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！</p></div></div>    
</body>
</html>