<html>
<head>
<title>What Are Try/Except Statements in Python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中有哪些Try/Except语句？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-start-using-try-statements-in-python-5043fe69058d?source=collection_archive---------5-----------------------#2020-01-27">https://betterprogramming.pub/how-to-start-using-try-statements-in-python-5043fe69058d?source=collection_archive---------5-----------------------#2020-01-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8290" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">保护代码的介绍</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e7c8c7b2a5e1260413be3b1f0c25efb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-NfgBteJ0tzuzx3WSSqW3Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">卡斯帕·卡米尔·鲁宾在<a class="ae ky" href="https://unsplash.com/s/photos/free-code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="730a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们开始编程时，我们的脚本简单明了，最重要的是，我们倾向于假设一个完美的操作环境。每一个变量都会一直存在，数据也会适当地形成。要是现实世界这么可靠就好了！</p><p id="e749" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实是，如果某件事会失败，它就会失败。对任何程序员来说，为这些失败做好准备都是一个重要的里程碑。</p><p id="ba00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Python中——以及大多数其他语言——我们使用<code class="fe lv lw lx ly b">try</code>语句来保护我们的代码。</p><p id="e39b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们了解一下try语句的作用以及如何开始使用它们！</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="177d" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">什么是例外？</h1><p id="2016" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">在我们深入研究try语句的语法和实现之前，确定什么是异常是很重要的。</p><p id="6bbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">异常是try语句中的代码失败的结果。把一个异常想象成你的代码被侮辱——“我反对这个请求！”</p><p id="51c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有各种各样的异常类型，我们将通过本教程介绍其中的一些。</p><h1 id="b59f" class="mg mh it bd mi mj nd ml mm mn ne mp mq jz nf ka ms kc ng kd mu kf nh kg mw mx bi translated">如何使用Try语句</h1><p id="d760" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">try语句通常被称为try块，实际上至少由两部分组成:<code class="fe lv lw lx ly b">try</code>和<code class="fe lv lw lx ly b">except</code>。</p><p id="9ea0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们想要保护的代码放在块的<code class="fe lv lw lx ly b">try</code>部分。之后，我们定义当<code class="fe lv lw lx ly b">except</code>中出现问题时会发生什么。</p><pre class="kj kk kl km gt ni ly nj nk aw nl bi"><span id="ab9e" class="nm mh it ly b gy nn no l np nq">try:<br/>   print(x)<br/>except Exception:<br/>   print("Something broke!")</span><span id="9720" class="nm mh it ly b gy nr no l np nq"># Something broke!</span></pre><p id="2b9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，我们使用catch-all值<code class="fe lv lw lx ly b">Exception</code>将任何异常发送到块的这一部分。我们还打印了一个模糊的信息。但是如果我们想要来自Python的实际错误消息呢？</p><p id="829d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在一个try中定义多个except块，指定应该路由到每个块的确切异常类型。此外，您可以将错误消息设置为一个变量——<code class="fe lv lw lx ly b">e</code>很常见——以便在您的程序中使用。</p><pre class="kj kk kl km gt ni ly nj nk aw nl bi"><span id="714f" class="nm mh it ly b gy nn no l np nq">try:<br/>   print(int(x))<br/>except NameError:<br/>  print("The variable is undefined")   <br/>except Exception as e:<br/>   print(e)</span><span id="201a" class="nm mh it ly b gy nr no l np nq"># with x undefined =&gt; The variable is undefined<br/># with x as 'text' =&gt; invalid literal for int() with base 10: 'text'</span></pre><p id="a04c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们开始工作了！我们的代码是安全的、有组织的，并且易于扩展。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="bf6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看这个任务是收集整数输入的<code class="fe lv lw lx ly b">while</code>循环是什么样子的。</p><pre class="kj kk kl km gt ni ly nj nk aw nl bi"><span id="96e9" class="nm mh it ly b gy nn no l np nq">while True:<br/>  try:<br/>    num = int(input("Enter an int: "))<br/>    break<br/>  except Exception as e:<br/>    print(e)</span><span id="e541" class="nm mh it ly b gy nr no l np nq">print("Your number is",num)</span><span id="4a1a" class="nm mh it ly b gy nr no l np nq"># Enter an int: a<br/># invalid literal for int() with base 10: 'a'<br/># Enter an int: 1.1<br/># invalid literal for int() with base 10: '1.1'<br/># Enter an int: 1<br/># Your number is 1</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="ccaa" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">不同的尝试/例外变体</h1><p id="bfa0" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">到目前为止，我们已经使用了一个<code class="fe lv lw lx ly b">try</code> / <code class="fe lv lw lx ly b">except</code>，甚至一个<code class="fe lv lw lx ly b">try</code> / <code class="fe lv lw lx ly b">except</code> / <code class="fe lv lw lx ly b">except</code>，但这只是故事的三分之二。</p><p id="268d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个<code class="fe lv lw lx ly b">try</code>块还有另外两个可选段:<code class="fe lv lw lx ly b">else</code>和<code class="fe lv lw lx ly b">finally</code>。这两个可选的区块将在<code class="fe lv lw lx ly b">try</code>和<code class="fe lv lw lx ly b">except</code>之后<strong class="lb iu">出现。此外，没有什么可以阻止你在一个语句中同时使用<code class="fe lv lw lx ly b">else</code>和<code class="fe lv lw lx ly b">finally</code>——但是如果你这样做的话，保持它们的顺序。</strong></p><p id="edb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们逐个检查一下，看看它们是如何扩展简单的<code class="fe lv lw lx ly b">try/except</code>的行为的。</p><h2 id="1080" class="nm mh it bd mi ns nt dn mm nu nv dp mq li nw nx ms lm ny nz mu lq oa ob mw oc bi translated">试试/Except/Else</h2><p id="ef3c" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">当将<code class="fe lv lw lx ly b">else</code>语句附加到<code class="fe lv lw lx ly b">try/except</code>的末尾时，该代码将在<code class="fe lv lw lx ly b">try</code>的完成后<strong class="lb iu">执行，但只有在<strong class="lb iu">没有异常发生</strong>时才会执行。</strong></p><p id="86d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以举前面的例子，提示用户输入一个整数，并使用一个<code class="fe lv lw lx ly b">else</code>块来感谢用户的有效输入和跳出<code class="fe lv lw lx ly b">while</code>循环。</p><pre class="kj kk kl km gt ni ly nj nk aw nl bi"><span id="b7a8" class="nm mh it ly b gy nn no l np nq">while True:<br/>  try:<br/>    num = int(input("Enter an int: "))<br/>  except Exception as e:<br/>    print(e)<br/>  else:<br/>    print("Thank you for the integer!")<br/>    break</span><span id="cd59" class="nm mh it ly b gy nr no l np nq"># Enter an int: a<br/># invalid literal for int() with base 10: 'a'<br/># Enter an int: 3<br/># Thank you for the integer</span></pre><h2 id="1f53" class="nm mh it bd mi ns nt dn mm nu nv dp mq li nw nx ms lm ny nz mu lq oa ob mw oc bi translated">尝试/例外/最后</h2><p id="ffa4" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">当将<code class="fe lv lw lx ly b">finally</code>语句附加到<code class="fe lv lw lx ly b">try/except</code>的末尾时，该代码将在<code class="fe lv lw lx ly b">try</code><strong class="lb iu">完成后<strong class="lb iu">执行，不考虑异常</strong>。</strong></p><p id="0ebc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，我们将使用前面的示例并添加一个简单的计数器来说明这种行为。</p><pre class="kj kk kl km gt ni ly nj nk aw nl bi"><span id="d5ce" class="nm mh it ly b gy nn no l np nq">count = 0<br/>while True:<br/>  try:<br/>    num = int(input("Enter an int: "))<br/>    break<br/>  except Exception as e:<br/>    print(e)<br/>  finally:<br/>    count += 1<br/>    print("Attempt #:",count)</span><span id="14f4" class="nm mh it ly b gy nr no l np nq"># Enter an int: a<br/># invalid literal for int() with base 10: 'a'<br/># Attempt #: 1<br/># Enter an int: 3<br/># Attempt #: 2</span></pre><p id="a88e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这可能看起来有点奇怪，因为<code class="fe lv lw lx ly b">break</code>仍然在<code class="fe lv lw lx ly b">try</code>内部。有理由认为<code class="fe lv lw lx ly b">finally</code>在适当的输入下会被缩短，然而事实并非如此。无论<code class="fe lv lw lx ly b">try</code>如何退出，<code class="fe lv lw lx ly b">finally</code>部分仍将执行。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="e35a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="od">把我们在这里演示的东西拿来，形成一个</em> <code class="fe lv lw lx ly b"><em class="od">try/except/else/finally</em></code> <em class="od">陈述，这是很小的一步。我相信你不会有任何问题，所以我把它留给你去试验和尝试。</em></p><p id="d5aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="od">如果你习惯于使用</em> <code class="fe lv lw lx ly b"><em class="od">try</em></code> <em class="od">语句，你最常见的用例是什么？下面分享一下你的经历吧！</em></p></div></div>    
</body>
</html>