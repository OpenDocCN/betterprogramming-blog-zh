<html>
<head>
<title>Make Your React Components Sortable</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使您的React组件可排序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/make-your-react-components-sortable-7ef479085dd8?source=collection_archive---------5-----------------------#2020-12-14">https://betterprogramming.pub/make-your-react-components-sortable-7ef479085dd8?source=collection_archive---------5-----------------------#2020-12-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b161" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">简单有效的分类</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/60fd2d00c8ad40e0b24e7612dcb34eb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5ElKtMF3X3OBY_iArRM2mg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@cathrynlavery?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Cathryn Lavery </a>在<a class="ae ky" href="https://unsplash.com/s/photos/list?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="63bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最近在做一个代码挑战，包括从列表中添加/删除项目，以及按照特定的顺序组织它们。为了避免任何无关的导航或元素，我决定实现拖放逻辑，以便使我的项目易于从一个位置移动到另一个位置。</p><p id="0895" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React中有很多很棒的拖放功能库，但是其中一些需要更多的配置，提供的功能也比我需要的多。最终我还是用了<code class="fe lv lw lx ly b">react-sortable-hoc</code>。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="ff52" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">反应-可排序-特定</h1><p id="5b33" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">当您需要一个可排序的组件列表时,<code class="fe lv lw lx ly b"><a class="ae ky" href="https://www.npmjs.com/package/react-sortable-hoc" rel="noopener ugc nofollow" target="_blank">react-sortable-hoc</a></code>是一个易于使用的库。我能够在几分钟内将它与我自己的组件结合起来。对于这个演示，我们将创建一个to-do React应用程序(据我所知是原创的)。让我们从安装带有<code class="fe lv lw lx ly b">npm i react-sortable-hoc</code>的包开始。</p><p id="eecd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于本文，我还将安装<code class="fe lv lw lx ly b"><a class="ae ky" href="https://www.npmjs.com/package/array-move" rel="noopener ugc nofollow" target="_blank">array-move</a></code>，这是一个方便的包，可以帮助您将项目移动到数组中的不同位置。<code class="fe lv lw lx ly b">react-sortable-hoc</code>不依赖<code class="fe lv lw lx ly b">array-move</code>。我只是为了方便而使用它。</p><p id="0bd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一系列待办事项:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="034d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于应用程序，我们有两个组件。<code class="fe lv lw lx ly b">ToDoItem</code>将是待办事项的组件。<code class="fe lv lw lx ly b">ToDoList</code>是呈现<code class="fe lv lw lx ly b">ToDoItems</code>列表的组件。现在针对<code class="fe lv lw lx ly b">react-sortable-hoc</code>提供的两个组件。</p><h2 id="a938" class="nf mh it bd mi ng nh dn mm ni nj dp mq li nk nl ms lm nm nn mu lq no np mw nq bi translated">可分类集装箱</h2><p id="b01f" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><code class="fe lv lw lx ly b">SortableContainer</code>包装我们的<code class="fe lv lw lx ly b">ToDoList</code>组件，使其能够包含可拖动的组件:</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="2b2a" class="nf mh it ly b gy nv nw l nx ny">import {SortableContainer} from 'react-sortable-hoc';<br/>import ToDoList from './components/ToDoList';</span><span id="88b5" class="nf mh it ly b gy nz nw l nx ny">const SortableList = SortableContainer(ToDoList);</span></pre><p id="c7d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有许多它可以接受的道具，但是在这个例子中，我们只使用两个。<code class="fe lv lw lx ly b">items</code>将是我们的待办事项数组。另一个道具是<code class="fe lv lw lx ly b">onSortEnd</code>，这是一个在拖动/排序结束时被调用的函数。下面是我们的<code class="fe lv lw lx ly b">App</code>组件，它包含了我们的<code class="fe lv lw lx ly b">onSortEnd</code>函数和<code class="fe lv lw lx ly b">SortableList</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="e66d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">arrayMove</code>接受数组、原始索引和新索引作为参数。新旧索引可以在<code class="fe lv lw lx ly b">onSortEnd</code>捕获的事件中找到。一旦创建了新数组，我们就将其设置为<code class="fe lv lw lx ly b">todos</code>的新值。这将我们带到我们将使用的第二个<code class="fe lv lw lx ly b">react-sortable-hoc</code>组件。</p><h2 id="ca56" class="nf mh it bd mi ng nh dn mm ni nj dp mq li nk nl ms lm nm nn mu lq no np mw nq bi translated">排序元素</h2><p id="0c49" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><code class="fe lv lw lx ly b">SortableElement</code>的用法与<code class="fe lv lw lx ly b">SortableContainer</code>相似，它包装一个组件，使其可排序。我们可以用它来包装<code class="fe lv lw lx ly b">ToDoList</code>中的<code class="fe lv lw lx ly b">ToDoItem</code>组件，如下所示:</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="f298" class="nf mh it ly b gy nv nw l nx ny">import {SortableElement} from 'react-sortable-hoc';<br/>import ToDoItem from './ToDoItem';</span><span id="d1b1" class="nf mh it ly b gy nz nw l nx ny">const SortableItem = SortableElement(ToDoItem)</span></pre><p id="0411" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的return语句中，我们可以映射到<code class="fe lv lw lx ly b">items</code>，而不是为每个<code class="fe lv lw lx ly b">item</code>呈现<code class="fe lv lw lx ly b">ToDoItem</code>，我们使用<code class="fe lv lw lx ly b">SortableItem</code>。参见下面的<code class="fe lv lw lx ly b">ToDoList</code>组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="143e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于我们的用例，我们需要传递给<code class="fe lv lw lx ly b">SortableItem</code>的唯一道具是<code class="fe lv lw lx ly b">todo</code>(因为<code class="fe lv lw lx ly b">ToDoItem</code>需要它)以及<code class="fe lv lw lx ly b">index</code>和<code class="fe lv lw lx ly b">key</code>。这些道具确保组件可以准确、干净地分类。如果你不包括这些道具，你就不会过得愉快。</p><p id="bd80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然我们已经将组件包装在了<code class="fe lv lw lx ly b">react-sortable-hoc</code>组件中，我们的最终产品应该是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/008e39e078ccaa727567b5664dc44bac.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*w9gF7jtxpxbvIprFqz0Xuw.gif"/></div></figure><p id="7eaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文附带的代码可以在<a class="ae ky" href="https://github.com/macro6461/medium-react-sortable" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="acfd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里将你的免费中级会员升级为付费会员，每月只需5美元，你就可以获得数以千计作家的无限量、无广告的故事。这是一个附属链接，你的会员资格的一部分帮助我为我创造的内容获得奖励。谢谢大家！</p><h1 id="ac14" class="mg mh it bd mi mj oc ml mm mn od mp mq jz oe ka ms kc of kd mu kf og kg mw mx bi translated">参考</h1><div class="oh oi gp gr oj ok"><a href="https://www.npmjs.com/package/react-sortable-hoc" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">反应-可排序-特定</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">一套高阶组件，将任何列表变成一个动画，可访问和触摸友好的可排序列表更高…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">www.npmjs.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy ks ok"/></div></div></a></div><div class="oh oi gp gr oj ok"><a href="https://www.npmjs.com/package/array-move" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">数组移动</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">将阵列项目移动到不同的位置$ npm安装阵列-移动克隆给定的阵列，将项目移动到新的…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">www.npmjs.com</p></div></div><div class="ot l"><div class="oz l ov ow ox ot oy ks ok"/></div></div></a></div><div class="oh oi gp gr oj ok"><a href="https://github.com/macro6461/medium-react-sortable" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">macro 6461/中等反应-可分类</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">这个项目是用Create React App引导的。在项目目录中，您可以运行:在…中运行应用程序</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">github.com</p></div></div><div class="ot l"><div class="pa l ov ow ox ot oy ks ok"/></div></div></a></div></div></div>    
</body>
</html>