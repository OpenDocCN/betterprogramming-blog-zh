<html>
<head>
<title>Build a Computer Vision Web App — Flask, OpenCV, and MongoDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建一个计算机视觉网络应用——Flask、OpenCV和MongoDB</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-computer-vision-webapp-flask-opencv-and-mongodb-62a52d38738a?source=collection_archive---------2-----------------------#2022-09-01">https://betterprogramming.pub/build-a-computer-vision-webapp-flask-opencv-and-mongodb-62a52d38738a?source=collection_archive---------2-----------------------#2022-09-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="baf7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">具备一些软件工程技能已经成为就业市场上一项非常重要的技能。如果你能建立一个模型，我建议你提高简单的应用程序开发和模型部署技能。</h2></div><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div class="ab gu cl kk"><img src="../Images/a65f3c82e9706f6890ec6053e5a40dbd.png" data-original-src="https://miro.medium.com/v2/1*IIJ2jY1M53I2KKC4zNP_Cw.gif"/></div></figure><h1 id="5e46" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">该项目</h1><p id="f717" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我最近接到一个带回家的任务，在一周内使用Flask、<a class="ae mb" href="https://learnopencv.com/getting-started-with-opencv/" rel="noopener ugc nofollow" target="_blank"> OpenCV </a>和任何NoSQL数据库平台创建一个对象检测应用程序。我最后一次使用Flask是在2年前，当时我还是一名数据科学家，所以这是一个很好的复习项目。</p><p id="9295" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">该应用程序允许用户上传图像或视频，对上传的文件进行对象检测，并将结果输出到<a class="ae mb" href="https://www.mongodb.com/nosql-explained" rel="noopener ugc nofollow" target="_blank"> MongoDB </a>或<a class="ae mb" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Introduction.html" rel="noopener ugc nofollow" target="_blank"> AWS DynamoDB。</a></p><p id="6073" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">如果你是Windows用户，我建议你下载Ubuntu子系统，它允许你使用Linux终端/cmd来运行应用程序脚本。</p><h1 id="b1e5" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">瓶</h1><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/e2387288f0e24d53df9330b152854f9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*4nRQvTOzgwOolMhg15pHhQ.jpeg"/></div></figure><blockquote class="mi mj mk"><p id="1926" class="lf lg ml lh b li mc jr lk ll md ju ln mm me lq lr mn mf lu lv mo mg ly lz ma ij bi translated">Flask是一个允许使用Python无缝开发web应用程序的框架。</p></blockquote><p id="f160" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">与其他框架不同，Flask非常Pythonic化。所以它没有很长的学习曲线，而且非常清晰，增加了可读性。</p><p id="bfdb" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">要使用Flask，我建议查看一下简单易懂的<a class="ae mb" href="https://assertible.com/blog/7-http-methods-every-web-developer-should-know-and-how-to-test-them#put" rel="noopener ugc nofollow" target="_blank"> HTTPS请求方法</a>。它们为您的应用程序(使用flask)提供了一种与您创建的网页进行通信的方式。它们指定是否将数据发布到您的网站、从您的网站获取数据等等。</p><h1 id="0560" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">OpenCV</h1><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/0db89c39121212e9eba82906b0f38a1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*ZCfptKe92usI8_IQ8OcNZw.png"/></div></figure><blockquote class="mi mj mk"><p id="885b" class="lf lg ml lh b li mc jr lk ll md ju ln mm me lq lr mn mf lu lv mo mg ly lz ma ij bi translated">OpenCV(开源计算机视觉库)是一个开源的计算机视觉和机器学习软件库。OpenCV旨在为计算机视觉应用提供一个公共基础设施。</p></blockquote><p id="96e4" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">通过我们将要浏览的代码，我们将看到OpenCV的一个实现，它带有帮助理解的注释。如果你已经熟悉深度学习和计算机视觉，你将能够更快地理解代码。</p><h1 id="a9d1" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">MongoDB</h1><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/2714226567ba47a82b38b5f833993283.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*Ne2UV5clIdjovn_OACb-Pg.png"/></div></figure><blockquote class="mi mj mk"><p id="d92c" class="lf lg ml lh b li mc jr lk ll md ju ln mm me lq lr mn mf lu lv mo mg ly lz ma ij bi translated"><strong class="lh ir"> MongoDB </strong>是一个面向文档的NoSQL数据库，用于大容量数据存储。MongoDB不像传统的关系数据库那样使用表和行，而是使用类似JSON的文档。</p></blockquote><p id="ac62" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">常见的关系数据库具有带固定模式(指定数据类型)的表，并使用SQL(结构化查询语言)来管理数据。</p><p id="b5bc" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">使用NoSQL，您可以将非结构化或半结构化数据存储在一起，而不是连接规范化的数据表；通常在键值对或JSON文档中。NoSQL在易用性、可伸缩性、弹性和高效可用性方面表现出色。</p><h2 id="22d3" class="mr ko iq bd kp ms mt dn kt mu mv dp kx lo mw mx kz ls my mz lb lw na nb ld nc bi translated"><strong class="ak">连接到MongoDB Atlas </strong>:</h2><p id="53cd" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这允许我们在云中使用MongoDB。</p><ol class=""><li id="d5b0" class="nd ne iq lh b li mc ll md lo nf ls ng lw nh ma ni nj nk nl bi translated">在这里创建一个免费账户<a class="ae mb" href="https://www.mongodb.com/atlas/database" rel="noopener ugc nofollow" target="_blank">，点击<strong class="lh ir">“免费试用”</strong>。</a></li><li id="753d" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma ni nj nk nl bi translated">点击<code class="fe nr ns nt nu b">&lt;Databases&gt;</code> <strong class="lh ir">，</strong> &lt;创建数据库&gt; <strong class="lh ir"> </strong>并选择自由层。</li><li id="ca82" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma ni nj nk nl bi translated">通过选择所需的云服务提供商、集群层和集群名称，创建一个启动集群。</li><li id="915b" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma ni nj nk nl bi translated">创建一个用户，选择使用一个本地环境，然后点击<code class="fe nr ns nt nu b">&lt;Add My Current IP Address&gt;</code>使事情变得简单。</li><li id="f2b3" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma ni nj nk nl bi translated">点击<databases> <strong class="lh ir">，</strong>在刚刚创建的集群上点击<strong class="lh ir"> </strong> <code class="fe nr ns nt nu b">&lt;Browse Collections&gt;</code>。</databases></li><li id="b3d7" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma ni nj nk nl bi translated">点击<code class="fe nr ns nt nu b">&lt;Add My Own Data&gt;</code>，添加数据库名称和集合名称，创建。</li><li id="b661" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma ni nj nk nl bi translated">回到你的集群，点击<code class="fe nr ns nt nu b">&lt;connect&gt;</code>，会弹出一个窗口:</li><li id="a902" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma ni nj nk nl bi translated">选择<code class="fe nr ns nt nu b">&lt;Connect your application&gt;</code>并选择你的驱动和版本——对我来说，是Python和3.6版或更高版本。</li><li id="dc44" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma ni nj nk nl bi translated">创建一个空的python文件，将其命名为<code class="fe nr ns nt nu b">db.py</code>粘贴这段代码，并用您创建的值/名称替换<code class="fe nr ns nt nu b">&lt;username&gt;</code>、<code class="fe nr ns nt nu b">&lt;password&gt;</code>、<code class="fe nr ns nt nu b">&lt;your_db_name&gt;</code>和<code class="fe nr ns nt nu b">&lt;your_collection_name&gt;</code>。</li></ol><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="27c6" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">要了解我们如何使用这个<code class="fe nr ns nt nu b">db.py</code>文件，请阅读文章末尾标题为<code class="fe nr ns nt nu b">utils.py</code>中的&gt;帮助函数</p><h1 id="dccd" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">项目结构</h1><pre class="kf kg kh ki gt nx nu ny nz aw oa bi"><span id="b402" class="mr ko iq nu b gy ob oc l od oe">├── app.py       <br/>├── utils.py     <br/>├── db.py        <br/>└── setup/<br/>│       ├── requirements.txt <br/>│       ├── setup.sh <br/>└── static/<br/>│     ├── images <br/>│     ├── videos <br/>│     ├── output <br/>│     ├── uploads <br/>└── templates/<br/>│    ├── index.html<br/>│    ├── show_file.html<br/>└── README.md</span></pre><p id="677f" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">我们上面提到了HTTPS请求方法，现在让我们简单地浏览一下html网站模板。</p><h2 id="bd01" class="mr ko iq bd kp ms mt dn kt mu mv dp kx lo mw mx kz ls my mz lb lw na nb ld nc bi translated"><strong class="ak">模板</strong></h2><p id="321c" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">Flask使用<a class="ae mb" href="https://codeburst.io/jinja-2-explained-in-5-minutes-88548486834e" rel="noopener" target="_blank"> Jinja2 </a>，允许我们使用Python生成<code class="fe nr ns nt nu b">html</code>网页(即模板)。</p><blockquote class="mi mj mk"><p id="27f4" class="lf lg ml lh b li mc jr lk ll md ju ln mm me lq lr mn mf lu lv mo mg ly lz ma ij bi translated">模板包含的变量是替换值，当模板通过我们在<code class="fe nr ns nt nu b">@app.routes() </code>下创建的函数 <em class="iq"> </em>渲染<strong class="lh ir">时，这些变量被传入(我们将在下一节进一步解释路径)<em class="iq">。</em></strong></p></blockquote><p id="fda0" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">这里有一个如何创建模板的指南→ <a class="ae mb" href="https://jinja.palletsprojects.com/en/3.1.x/templates/" rel="noopener ugc nofollow" target="_blank">点击这里</a>。</p><p id="612b" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">我们为应用程序创建的模板有:</p><ul class=""><li id="1dae" class="nd ne iq lh b li mc ll md lo nf ls ng lw nh ma of nj nk nl bi translated">我们将用于用户上传的登陆/主页。</li><li id="bc0e" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">show_file.html:</code>我们将用于显示用户上传的图像或视频的页面。</li></ul><p id="969c" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">要查看模板的完整代码，请访问我的<code class="fe nr ns nt nu b">templates/</code>目录下的<a class="ae mb" href="https://github.com/ZaheedaT/computer-vision-flaskapp" rel="noopener ugc nofollow" target="_blank">GitHub repo</a>→<a class="ae mb" href="https://github.com/ZaheedaT/computer-vision-flaskapp" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="69fd" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">在本教程中，我将只强调html页面的重要部分。为了以互动的方式学习更多关于HTML的知识，我建议使用W3schools。</p><h2 id="95e7" class="mr ko iq bd kp ms mt dn kt mu mv dp kx lo mw mx kz ls my mz lb lw na nb ld nc bi translated">应用代码</h2><p id="05c8" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们从实际的Flask应用程序创建开始，然后我们将浏览对象检测代码。我们首先创建一个空的python文件，并将其命名为<code class="fe nr ns nt nu b">app.py</code>，导入flask及其库，然后创建一个App对象。</p><pre class="kf kg kh ki gt nx nu ny nz aw oa bi"><span id="1c5d" class="mr ko iq nu b gy ob oc l od oe">from flask import Flask, render_template, request, session</span><span id="7851" class="mr ko iq nu b gy og oc l od oe">app = Flask(__name__)</span></pre><p id="2429" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated"><code class="fe nr ns nt nu b">app = Flask(__name__)</code>在我们正在创建的当前Python文件中创建一个<strong class="lh ir"> Flask应用对象</strong>。<code class="fe nr ns nt nu b">app</code>变量是一个名为Flask的Python类的<em class="ml">实例</em>，我们在文件的顶部导入了它。现在拥有Flask的所有功能、方法和属性。</p><p id="740f" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">我们还指定了环境变量来显示上传和输出数据的存储路径。</p><pre class="kf kg kh ki gt nx nu ny nz aw oa bi"><span id="634c" class="mr ko iq nu b gy ob oc l od oe">UPLOAD_FOLDER = os.path.join('staticFiles', 'uploads')<br/>OUTPUT_FOLDER = os.path.join('staticFiles', 'output')</span></pre><p id="e512" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">然后我们创建路线。</p><h2 id="5350" class="mr ko iq bd kp ms mt dn kt mu mv dp kx lo mw mx kz ls my mz lb lw na nb ld nc bi translated"><strong class="ak">路线</strong></h2><p id="9d67" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">路径将网站URL附加或映射到python代码或函数，这些代码或函数决定了在特定路径(URL)上会发生什么。我们将创建这些功能。</p><p id="214c" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">对于我们将创建的每一个<code class="fe nr ns nt nu b">@app.route(' ')</code>，我们将加载特定路由将使用的html模板/页面。我们写的任何路线名称都附在我们网站URL的末尾。</p><p id="f757" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">我们将创建的示例路线将以<code class="fe nr ns nt nu b">https://ourwebapp.com/</code>、<code class="fe nr ns nt nu b">https://ourwebapp.com/show_file</code>或<code class="fe nr ns nt nu b">https://ourwebapp.com/detect-obect</code>结束。请记住，在每条路线上，我们的应用程序都会执行与路线相关的代码。</p><h2 id="5d33" class="mr ko iq bd kp ms mt dn kt mu mv dp kx lo mw mx kz ls my mz lb lw na nb ld nc bi translated"><code class="fe nr ns nt nu b"><strong class="ak">1. @app.route( '/' )</strong></code></h2><p id="a6a1" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这是我们将创建的第一条路线，它将把我们带到我们的主页。</p><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="904a" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">我们可以看到这个主页路由仅由一个空的<code class="fe nr ns nt nu b">'/'</code>表示，因为它的URL仅停留在登录页面上。</p><p id="74ae" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">在这里，我们声明了与这个路径<code class="fe nr ns nt nu b">def main():</code>相关的函数，我们将其命名为main，因为它是我们网站的主页，它可以被命名为任何您喜欢的名称。我们告诉该函数返回<code class="fe nr ns nt nu b">render_template("index.html")</code>，它将加载<code class="fe nr ns nt nu b">index.html</code>模板/页面，并使其显示在我们的网站上。</p><p id="a8b5" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated"><code class="fe nr ns nt nu b"><strong class="lh ir">index.html</strong></code> <strong class="lh ir">模板</strong> —这是所有网站中用于主页的页面。在我们的网站上，我们将使用它从用户那里获取输入文件，所以我们需要使用一个html表单。</p><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="nv nw l"/></div></figure><ul class=""><li id="7267" class="nd ne iq lh b li mc ll md lo nf ls ng lw nh ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">action=”/”</code>调用我们刚刚创建的@app.route( '/')。</li><li id="c093" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">method="POST"</code>我们指定POST请求方法，因为用户将在我们的网站上发布数据。</li><li id="34a7" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">name = "file-uploaded"</code>指定上传文件的名称。这将在我们创建Flask应用程序时派上用场，因为我们将使用上传的文件来执行对象检测。</li><li id="2e4f" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">action="/show_file"</code>调用我们稍后将创建的<code class="fe nr ns nt nu b">@app.route('/show_file')</code>。它将用户带到<code class="fe nr ns nt nu b">show_file.html</code>页面。当用户点击“显示文件”提交按钮时，就会发生这种情况。</li></ul><p id="dbc0" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">当<code class="fe nr ns nt nu b">index.html</code>被渲染时，这将是我们的结果(让它看起来漂亮的代码再次出现，在我的<a class="ae mb" href="https://github.com/ZaheedaT/computer-vision-flaskapp" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>的<code class="fe nr ns nt nu b">static/css/main.css</code>下，在<a class="ae mb" href="https://www.w3schools.com/css/" rel="noopener ugc nofollow" target="_blank"> W3schools </a>了解更多关于css的信息):</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="oi oj di ok bf ol"><div class="gh gi oh"><img src="../Images/e44261759276ecd64b0af6669df052ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4HpBBnH1-fnwLZxVebUsRQ.png"/></div></div><p class="om on gj gh gi oo op bd b be z dk translated">我们的index.html页面</p></figure><h2 id="22bf" class="mr ko iq bd kp ms mt dn kt mu mv dp kx lo mw mx kz ls my mz lb lw na nb ld nc bi translated"><strong class="ak"> 2。</strong> <code class="fe nr ns nt nu b"><strong class="ak">@app.route('/', methods=[“POST”])</strong></code></h2><p id="f6b2" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们创建允许用户上传文件的路径。</p><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="2028" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">我们看到了在主页路径中看到的相同的<code class="fe nr ns nt nu b">'/’</code>,这意味着我们停留在主页上，但是这次我们指定了<code class="fe nr ns nt nu b">method="POST"</code>,因为我们将创建用户将他们的文件发布到我们站点的部分。</p><ul class=""><li id="8df0" class="nd ne iq lh b li mc ll md lo nf ls ng lw nh ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">_img = request.files['file-uploaded']</code>允许我们拍摄用户上传的图像或视频，<code class="fe nr ns nt nu b">request.files</code>是包含所有上传文件的字典对象。回想一下，在我们的index.html模板中，我们将用户上传的文件命名为<code class="fe nr ns nt nu b">name = "file-uploaded"</code>，因此我们在这里使用相同的名称。</li><li id="1088" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated">我们从上面的<code class="fe nr ns nt nu b">request.files</code>对象中获取文件名，然后将它传递给一个简短的帮助函数(在本教程的末尾),该函数决定我们的应用程序中是否允许该文件类型。</li><li id="e4b6" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated">然后，我们将图像保存到我们之前指定的上传文件夹路径中。</li><li id="9a23" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">session[‘uploaded_img_file_path’] = …</code>一个<a class="ae mb" href="https://en.wikipedia.org/wiki/Session_(computer_science)" rel="noopener ugc nofollow" target="_blank">会话</a>(从上面的flask导入)用于存储用户与web应用程序交互时的相关信息。在其中，我们存储了上传文件的路径。我们以后还会用到它。</li><li id="64bb" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated">就像其他路线一样，我们返回<code class="fe nr ns nt nu b">render_template ( )</code>——这次是<code class="fe nr ns nt nu b">inde.html</code>页面，但是我们使用我们创建的<code class="fe nr ns nt nu b">Bool = True</code>变量<code class="fe nr ns nt nu b">success</code>。这个变量将帮助index.html页面知道，当文件成功上传时，使用Jinja2加载一个绿色的成功消息。</li></ul><p id="2273" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated"><code class="fe nr ns nt nu b"><strong class="lh ir">index.html</strong></code> <strong class="lh ir">模板(成功部分)</strong></p><p id="13a9" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">它与<code class="fe nr ns nt nu b">index.html</code>模板完全相同，只是这次我们添加了以下html行:</p><pre class="kf kg kh ki gt nx nu ny nz aw oa bi"><span id="dc98" class="mr ko iq nu b gy ob oc l od oe">&lt;p style="color:green;"&gt;File uploaded successfully&lt;/p&gt;</span></pre><p id="fdbe" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">这是渲染成功模板的一部分:</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="oi oj di ok bf ol"><div class="gh gi oq"><img src="../Images/7a61687e3334cb430c287636014db400.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7HaRgg-HtbURPVwO3WfYqA.png"/></div></div></figure><h2 id="f8f9" class="mr ko iq bd kp ms mt dn kt mu mv dp kx lo mw mx kz ls my mz lb lw na nb ld nc bi translated">3.<code class="fe nr ns nt nu b">@app.route( ‘/show_file’)</code></h2><p id="0c5a" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">接下来是<code class="fe nr ns nt nu b">show_file</code>路线:</p><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="nv nw l"/></div></figure><ul class=""><li id="c1ad" class="nd ne iq lh b li mc ll md lo nf ls ng lw nh ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">session.get(‘uploaded_img_file_path’, None)</code>允许我们提取/获取会话数据，即上传的图像路径，我们将其放入上面创建的<code class="fe nr ns nt nu b">uploadFile</code>路径中。</li><li id="f197" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated">我们为<code class="fe nr ns nt nu b">show_file.html</code>返回<code class="fe nr ns nt nu b">render_template()</code>来显示上传的文件。</li><li id="acb0" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated">为了知道要显示的文件是否是图像，我们创建了一个<code class="fe nr ns nt nu b">Bool</code>变量<code class="fe nr ns nt nu b">is_image</code>来与使用Jinja2的模板进行通信，我们创建了另一个变量<code class="fe nr ns nt nu b">is_show_button</code>来告诉模板加载一个按钮来单击，这样我们就可以执行对象检测。</li><li id="a677" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">user_image</code>是我们创建的一个变量，允许我们将图像插入到渲染的网页中，并使用Jinja2显示它。</li></ul><p id="720a" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated"><code class="fe nr ns nt nu b"><strong class="lh ir">show_file.html</strong></code>模板<strong class="lh ir">模板</strong></p><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="d3c5" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">在Jinja2中，双花括号允许我们计算Python表达式、变量或函数调用，并将结果打印到模板中。</p><p id="1583" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">我们使用Jinja2代码来创建关于在这个模板上显示哪种文件类型的<code class="fe nr ns nt nu b">if statements</code>。我们应该能够理解代码，因为它是Pythonic式的:</p><ul class=""><li id="d0a9" class="nd ne iq lh b li mc ll md lo nf ls ng lw nh ma of nj nk nl bi translated">外部的<code class="fe nr ns nt nu b">if statement</code>是加载一个图像:</li><li id="8546" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">&lt;img src=”{{ user_image }}” alt=”User Image” width=”500" &gt;&lt;/img&gt;</code>使用<code class="fe nr ns nt nu b">&lt;img&gt;</code>标签让html知道期待一个图像，使用<code class="fe nr ns nt nu b">{{ user_image }}</code>变量显示<code class="fe nr ns nt nu b">user_image </code>变量，即上传的图像。</li><li id="7a98" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated">和<code class="fe nr ns nt nu b">&lt;button type=”submit” style=”width:200px”&gt;Detect Object&lt;/button&gt;</code>显示“检测物体”按钮</li><li id="2c05" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated">当我们点击上面的按钮时，我们创建的<code class="fe nr ns nt nu b">action = 'detect-object'</code>路线会加载。<code class="fe nr ns nt nu b">else</code>我们只是在完成对象检测后显示图像。</li><li id="7150" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated">外层的<code class="fe nr ns nt nu b">else</code>是加载一段视频:</li><li id="fa02" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">&lt;video src=”{{ user_image }}” controls=”controls” &gt; &lt;/video&gt;</code>使用<code class="fe nr ns nt nu b">&lt;video&gt;</code>标签让html知道期待一个视频，我们使用相同的<code class="fe nr ns nt nu b">button</code>和表单<code class="fe nr ns nt nu b">action</code>，当点击时加载<code class="fe nr ns nt nu b">'detect-object'</code>路径。</li></ul><p id="16af" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">上传文件并渲染<code class="fe nr ns nt nu b">show_file.html</code>模板后，我们得到的结果如下:</p><div class="kf kg kh ki gt ab cb"><figure class="or kj os ot ou ov ow paragraph-image"><div role="button" tabindex="0" class="oi oj di ok bf ol"><img src="../Images/d298e87e7b0caeab5d105e9443a41d1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/1*dUKDpTqwpRPHnU-hqYs9qA.gif"/></div></figure><figure class="or kj ox ot ou ov ow paragraph-image"><div role="button" tabindex="0" class="oi oj di ok bf ol"><img src="../Images/8e66aa4c0508486142e3195ff687a06b.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*Mb3hCMGuemRz2UYeeKcsGg.png"/></div></figure></div><h2 id="6516" class="mr ko iq bd kp ms mt dn kt mu mv dp kx lo mw mx kz ls my mz lb lw na nb ld nc bi translated">4.<code class="fe nr ns nt nu b">@app.route( ‘/detect_object’)</code>:</h2><p id="1580" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们创建将执行计算机视觉任务的路线:</p><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="nv nw l"/></div></figure><ul class=""><li id="bd35" class="nd ne iq lh b li mc ll md lo nf ls ng lw nh ma of nj nk nl bi translated">我们再次从会话中获得<code class="fe nr ns nt nu b">uploaded_image_path</code>，然后运行我们的对象检测函数<code class="fe nr ns nt nu b"> def detect_and_draw_box()</code>:我们将很快检查它。</li><li id="bdba" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated">从中，我们得到保存图像结果的<code class="fe nr ns nt nu b">output_image_path</code>和让我们的route函数知道文件输出是“图像”还是“视频”的<code class="fe nr ns nt nu b">file_type</code>，以便可以呈现相应的模板。</li><li id="d730" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated">同样，我们创建一个<code class="fe nr ns nt nu b">Bool</code>变量<code class="fe nr ns nt nu b">is_image</code>来将文件类型传递给模板，创建另一个变量<code class="fe nr ns nt nu b">is_show_button</code>来告诉模板<strong class="lh ir">而不是</strong>加载一个按钮，因为这是最后一个路径<code class="fe nr ns nt nu b">'detect_object'</code>。</li></ul><p id="3129" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">我们将在前面的上传中得到这个输出。可爱！！</p><div class="kf kg kh ki gt ab cb"><figure class="or kj paragraph-image"><div class="ab gu cl kk"><img src="../Images/a65f3c82e9706f6890ec6053e5a40dbd.png" data-original-src="https://miro.medium.com/v2/1*IIJ2jY1M53I2KKC4zNP_Cw.gif"/></div></figure><figure class="or kj paragraph-image"><img src="../Images/227517c701a91f1a5367e840d0f36e28.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*YUF4fb_zlMNKJXs-g4osEA.png"/></figure></div><p id="0322" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">让我们来看看计算机视觉代码！！</p><h1 id="3d4f" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">目标检测代码</h1><p id="327f" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们创建一个名为<code class="fe nr ns nt nu b">utils.py</code>的python文件。这是代码的核心，我们将在这里编写实际的对象检测和辅助函数。</p><p id="6570" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">导入我们将需要的所有库:</p><pre class="kf kg kh ki gt nx nu ny nz aw oa bi"><span id="7c2e" class="mr ko iq nu b gy ob oc l od oe">import os<br/>import cv2<br/>import cvlib as cv<br/>from cvlib.object_detection import draw_bbox</span></pre><h2 id="344c" class="mr ko iq bd kp ms mt dn kt mu mv dp kx lo mw mx kz ls my mz lb lw na nb ld nc bi translated">图像检测功能</h2><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="0e2b" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">它采用了我们从<code class="fe nr ns nt nu b">@app.route(‘/detect_object’)</code>路线节省下来的<code class="fe nr ns nt nu b">img_filepath</code>。</p><p id="a82d" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">您可以选择是使用<code class="fe nr ns nt nu b">yolo.h5</code>还是<code class="fe nr ns nt nu b">yolov3</code>模式，并设置<code class="fe nr ns nt nu b">confidence</code>值，通常为0.5(使用50%)。</p><p id="307f" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">置信度是模型有多“确信”它将正确的标签分配给检测到的对象。编码器设置其阈值或截止点，以决定在哪个点上应该给预测对象一个正标签。</p><ul class=""><li id="c59d" class="nd ne iq lh b li mc ll md lo nf ls ng lw nh ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">img = cv2.imread(img_filepath)</code> : OpenCV将图像读入一个numpy数组，以便我们的模型能够理解。</li><li id="4bc5" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">bbox, label, conf = cv.detect_common_objects(img,confidence, model)</code> : <code class="fe nr ns nt nu b">detect_common_objects</code>使用预训练的来检测80个常见对象。</li><li id="b510" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated">它返回边界框坐标(检测到的对象周围的框)、相应的预测标签以及图像中检测到的对象的置信度得分。</li><li id="312e" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">output_image = draw_bbox(img, bbox, label, conf)</code>:然后我们在图像上画出方框和标签，得到一个输出图像。</li><li id="8211" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">output_image_path = os.path.join(OUTPUT_FOLDER, 'output_image.jpg')</code>:我们声明图像输出名称和保存路径。</li><li id="1bd6" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">cv2.imwrite(output_image_path, output_image)</code>用于将图像保存到任何存储设备或路径。</li></ul><p id="6ae3" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">代码的其余部分使用我们创建的helper函数在本地将模型输出保存为JSON(我们称之为“响应”)，并以如下格式将其推入MongoDB:</p><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h2 id="c76d" class="mr ko iq bd kp ms mt dn kt mu mv dp kx lo mw mx kz ls my mz lb lw na nb ld nc bi translated"><strong class="ak">视频检测</strong>功能:</h2><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="nv nw l"/></div></figure><ul class=""><li id="ee6d" class="nd ne iq lh b li mc ll md lo nf ls ng lw nh ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">cap = cv2.VideoCapture(video_filepath):</code>创建一个视频捕获对象，它将允许我们读取上传或流式视频。</li><li id="c8ee" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">fourcc = cv2.VideoWriter_fourcc(*’MJPG’):</code>以MJPG格式保存输出视频。</li></ul><p id="20c5" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated"><strong class="lh ir"> FourCC </strong>(“四字符码”)是由四个<a class="ae mb" href="https://en.wikipedia.org/wiki/Byte" rel="noopener ugc nofollow" target="_blank">字节</a>(通常为<a class="ae mb" href="https://en.wikipedia.org/wiki/ASCII" rel="noopener ugc nofollow" target="_blank"> ASCII </a>)组成的序列，用于唯一标识<a class="ae mb" href="https://en.wikipedia.org/wiki/File_format" rel="noopener ugc nofollow" target="_blank">数据格式</a>。</p><ul class=""><li id="6294" class="nd ne iq lh b li mc ll md lo nf ls ng lw nh ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">while cap.isOpened()</code>:在您捕捉到视频后，您可以使用此方法来检查您的视频是否成功打开。否则你会得到一个错误信息。</li><li id="5d8f" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">ret, frame = cap.read():</code>用于通过创建循环并一次读取一帧来捕获视频的每一帧。它返回一个元组bool和frame，如果ret是<code class="fe nr ns nt nu b">True</code>，那么就有一个视频帧要读取。</li></ul><p id="8fc7" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">如果<code class="fe nr ns nt nu b">ret</code>返回<code class="fe nr ns nt nu b">False</code>，那么<code class="fe nr ns nt nu b">print(“Can’t receive frame (stream end?). Exiting …”)</code>则中断循环。</p><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="nv nw l"/></div></figure><ul class=""><li id="88b6" class="nd ne iq lh b li mc ll md lo nf ls ng lw nh ma of nj nk nl bi translated">然后我们翻转图像，因为它可能会上下颠倒。</li><li id="954d" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated">类似于<code class="fe nr ns nt nu b">image</code>检测代码，我们使用<code class="fe nr ns nt nu b">detect_common_objects</code>模型和<code class="fe nr ns nt nu b">draw_bbox</code>函数来显示每个检测到的对象的边界框和预测标签。</li><li id="8279" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">out = cv2.VideoWriter(out_path, fourcc, 10.0, (width, height)):</code>声明如何保存视频。指定输出文件夹，fourcc格式，帧率(每秒帧数)为10.0，我们设置一个理想的大小。</li><li id="becd" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">out.write(output_frame):</code>将帧写入输出文件。</li></ul><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="nv nw l"/></div></figure><ul class=""><li id="f758" class="nd ne iq lh b li mc ll md lo nf ls ng lw nh ma of nj nk nl bi translated">我们可以使用<code class="fe nr ns nt nu b">imshow()</code>方法在窗口中显示输出帧。如前所述，我们保存响应JSON。</li><li id="38a9" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">waitKey()</code>声明视频之间暂停多长时间，并监控用户输入的键盘。当用户按下<code class="fe nr ns nt nu b">q</code>键时(当窗口在屏幕上打开时),我们退出循环并结束流式传输。</li></ul><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="nv nw l"/></div></figure><ul class=""><li id="af0c" class="nd ne iq lh b li mc ll md lo nf ls ng lw nh ma of nj nk nl bi translated">我们使用助手函数<code class="fe nr ns nt nu b">add_data()</code>将数据推送到MongoDB Atlas。</li><li id="4649" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">cap.release()</code>一旦视频流被完全处理或用户过早退出循环，就释放视频捕获，</li><li id="6a96" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">out.release()</code>释放视频写入对象，并</li><li id="fbed" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><code class="fe nr ns nt nu b">cv2.destroyAllWindows()</code>关闭窗口。最后，我们在本地保存模型输出<code class="fe nr ns nt nu b">response</code> JSON。</li></ul><h2 id="21f1" class="mr ko iq bd kp ms mt dn kt mu mv dp kx lo mw mx kz ls my mz lb lw na nb ld nc bi translated">utils.py中的帮助器函数:</h2><p id="a8a9" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><em class="ml">其余可以在</em> <a class="ae mb" href="https://github.com/ZaheedaT/computer-vision-flaskapp" rel="noopener ugc nofollow" target="_blank"> <em class="ml"> GitHub回购</em> </a> <em class="ml"> * </em>上找到</p><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="nv nw l"/></div></figure><pre class="kf kg kh ki gt nx nu ny nz aw oa bi"><span id="965b" class="mr ko iq nu b gy ob oc l od oe">import db # imports the MongoDB db.py file we created earlier </span></pre><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h1 id="e06c" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">运行应用程序</h1><p id="ff4d" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">按照<a class="ae mb" href="https://github.com/ZaheedaT/computer-vision-flaskapp" rel="noopener ugc nofollow" target="_blank"> <em class="ml"> GitHub Repo </em> </a>上的设置和安装步骤之后，我们在Ubuntu cmd中运行应用程序:</p><pre class="kf kg kh ki gt nx nu ny nz aw oa bi"><span id="a087" class="mr ko iq nu b gy ob oc l od oe">$ python3 app.py</span></pre><p id="bdec" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">我们得到:</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="oi oj di ok bf ol"><div class="gh gi oy"><img src="../Images/e4940d1269ee3e52c3fae1360167573f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3cmf2K_Vi1PL9ttYpXqJvw.png"/></div></div></figure><p id="db47" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">在您的网络浏览器上复制并粘贴本地主机:<strong class="lh ir"/><a class="ae mb" href="http://127.0.0.1:5000/" rel="noopener ugc nofollow" target="_blank"><strong class="lh ir">http://127 . 0 . 0 . 1:5000/</strong></a></p><p id="9a1c" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated"><code class="fe nr ns nt nu b">index.html</code>页面将显示:</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/ca91e6e1ed65874e9200b00853f584ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*9CLQTmJE4IExtCtv_sUUsQ.png"/></div></figure><p id="2027" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">尝试应用程序并研究你想更好理解的方面。</p><p id="feb7" class="pw-post-body-paragraph lf lg iq lh b li mc jr lk ll md ju ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">感谢阅读！！</p></div><div class="ab cl pa pb hu pc" role="separator"><span class="pd bw bk pe pf pg"/><span class="pd bw bk pe pf pg"/><span class="pd bw bk pe pf"/></div><div class="ij ik il im in"><h1 id="6a7d" class="kn ko iq bd kp kq ph ks kt ku pi kw kx jw pj jx kz jz pk ka lb kc pl kd ld le bi translated"><em class="pm">参考文献</em></h1><ul class=""><li id="3f33" class="nd ne iq lh b li lj ll lm lo pn ls po lw pp ma of nj nk nl bi translated"><a class="ae mb" href="https://pythonbasics.org/what-is-flask-python/" rel="noopener ugc nofollow" target="_blank">https://pythonbasics.org/what-is-flask-python/</a></li><li id="dbdc" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><a class="ae mb" href="https://python-adv-web-apps.readthedocs.io/en/latest/flask.html" rel="noopener ugc nofollow" target="_blank">https://python-adv-we b-apps . readthedocs . io/en/latest/flask . html</a></li><li id="dd82" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><a class="ae mb" href="https://tedboy.github.io/flask/" rel="noopener ugc nofollow" target="_blank">https://tedboy.github.io/flask/</a></li><li id="2501" class="nd ne iq lh b li nm ll nn lo no ls np lw nq ma of nj nk nl bi translated"><a class="ae mb" href="https://www.python-engineer.com/posts/opencv-videos/" rel="noopener ugc nofollow" target="_blank">https://www.python-engineer.com/posts/opencv-videos/</a></li></ul></div></div>    
</body>
</html>