<html>
<head>
<title>Make Your Web Apps Like Native Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让您的Web应用程序像本机应用程序一样</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/make-your-webapps-like-native-apps-6fb3a10bc25b?source=collection_archive---------5-----------------------#2022-10-10">https://betterprogramming.pub/make-your-webapps-like-native-apps-6fb3a10bc25b?source=collection_archive---------5-----------------------#2022-10-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c378" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用JavaScript模糊本地和混合之间的界限</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ec48097688835214c5ef5def95376fde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pe6ibd8O4G225zvqGA1wNQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Pixabay发自Pexels的照片:<a class="ae ky" href="https://www.pexels.com/photo/facebook-application-icon-147413/" rel="noopener ugc nofollow" target="_blank">https://www . Pexels . com/photo/Facebook-application-icon-147413/</a></p></figure><p id="21f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当开发一个移动应用程序时，我们有两个主要的选择:创建原生的或者混合的。如果您的应用程序不需要大量的硬件能力，通常最好创建一个混合应用程序。这样，仅使用JavaScript和HTML，我们就可以拥有一个同时服务于web和移动的应用程序。</p><p id="9b6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章将向你展示在大多数现代浏览器中可用的十个API，它们将模糊本地和混合应用之间的界限。</p><p id="ebc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些API并不是100%兼容所有的网络浏览器，但是它们在大多数情况下都能很好地工作。</p><h1 id="3781" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1.振动API</h1><p id="9001" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这个API让WebApps能够访问设备的振动硬件(如果它存在的话),如果设备不支持它，它就什么也不做。你可以用这个API让一个设备在你需要的时候振动。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">振动API js示例。</p></figure><h1 id="4208" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2.通知API</h1><p id="8720" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">该API用于向用户显示桌面通知，并在应用程序中发生重大事件时提醒用户。</p><p id="9a3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要使用它，你首先要检查的是你是否有权限这样做。您可以通过下面的代码看到如何做到这一点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">通知API js示例。</p></figure><p id="c591" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您没有权限，可以使用<code class="fe mu mv mw mx b">Notification.requestPermission()</code>向用户请求:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">通知API js示例。</p></figure><p id="1334" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">授予权限后，您可以使用以下代码创建通知:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">通知API js示例。</p></figure><h1 id="e292" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3.电池API</h1><p id="aa1b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">电池API可以监控设备的电池电量，并在电池电量或充电状态发生变化时发出通知。</p><p id="cd84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">电池API公开了用于处理电池电量变化的事件处理程序。</p><p id="df2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，为您的<code class="fe mu mv mw mx b">WebApp</code>提供低功耗模式，或者警告用户(使用通知API)电池电量即将耗尽，以便他们可以采取适当的措施，例如保存他们正在做的事情。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">电池API js示例。</p></figure><h1 id="c596" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">4.地理定位API</h1><p id="9ed7" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">地理位置API是一个基于浏览器的API，允许网站请求用户的物理位置信息(纬度和经度)。</p><p id="7b50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过调用<code class="fe mu mv mw mx b">navigator.geolocation</code>来访问地理定位API这将导致用户的浏览器询问他们是否允许访问他们的位置数据。</p><p id="93e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有主流浏览器都支持地理定位API。</p><p id="bc05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">地理定位API js示例。</p></figure><h1 id="749f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">5.游戏手柄API</h1><p id="2aad" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">游戏手柄API是浏览器访问和响应来自游戏手柄或其他控制器设备的信号的一种方式，通常通过USB连接。</p><p id="8b4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">游戏手柄API引入了窗口对象上的事件来读取游戏手柄和控制器的状态。除了这些事件，API还添加了一个gamepad对象，您可以使用它来查询连接的Gamepad的状态。</p><p id="861e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">连接到游戏手柄时要做什么:</p><p id="d378" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">游戏手柄事件包括事件对象上的一个<code class="fe mu mv mw mx b">&lt;gamepad&gt;</code>属性，该属性返回一个<code class="fe mu mv mw mx b">&lt;GamePad&gt;</code>对象。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">游戏手柄API js示例。</p></figure><p id="5b3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如何断开游戏手柄:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">游戏手柄API js示例。</p></figure><p id="4c29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当第一个按钮被按下时，如何使用它来开始游戏，下面是一个基本的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">游戏手柄API js示例。</p></figure><p id="54a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们保持第一个游戏手柄连接([0])，并查询游戏手柄的第一个按钮<code class="fe mu mv mw mx b">(gp.buttons[0].pressed)</code>是否被按下。</p><h1 id="afe6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">6.页面可见性API</h1><p id="4fa9" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">页面可见性API检测页面对用户是否可见或处于焦点上。</p><p id="065f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它在不同的场景中很有用，比如当一个特定的页面不可见时停止向服务器请求数据。当用户最小化网页或移动到不同的标签时。在这些情况下，API发送一个<code class="fe mu mv mw mx b">visibilityChange</code>事件。</p><p id="b9d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可能的值有:</p><ul class=""><li id="9426" class="my mz it lb b lc ld lf lg li na lm nb lq nc lu nd ne nf ng bi translated"><code class="fe mu mv mw mx b">visible</code></li><li id="8bf2" class="my mz it lb b lc nh lf ni li nj lm nk lq nl lu nd ne nf ng bi translated"><code class="fe mu mv mw mx b">hidden</code></li><li id="9f6b" class="my mz it lb b lc nh lf ni li nj lm nk lq nl lu nd ne nf ng bi translated"><code class="fe mu mv mw mx b">prerender</code></li><li id="706e" class="my mz it lb b lc nh lf ni li nj lm nk lq nl lu nd ne nf ng bi translated"><code class="fe mu mv mw mx b">unloaded</code></li></ul><p id="7336" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在以下示例中，您可以看到如何检测可见性变化:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">页面可见性API js示例。</p></figure><h1 id="f81a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">7.网络蓝牙API</h1><p id="ea59" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">网络蓝牙API是一种从网络浏览器连接到蓝牙低能耗设备的方式。这个API可以帮助连接各种各样的设备。</p><p id="c356" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个API非常复杂和强大，所以我给你留了一个到它的官方文档的链接，以防你需要使用它，因为它超出了这篇假装简单易懂的文章的范围。</p><p id="c244" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Bluetooth_API" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/API/Web _ Bluetooth _ API</a></p><h1 id="4405" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">8.屏幕捕获API</h1><p id="fef4" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">屏幕捕获API提供了对设备屏幕的访问，能够对当前屏幕进行截图。此外，这个API允许您选择一个屏幕或屏幕的一部分(比如一个窗口)来捕获为媒体流。</p><p id="6eb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个API使用起来很简单。它只有一个方法:<code class="fe mu mv mw mx b">MediaDevices.getDisplayMedia()</code>，它的工作是询问用户选择一个屏幕或屏幕的一部分来以<code class="fe mu mv mw mx b">MediaStream</code>的形式捕获。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">截屏API js示例。</p></figure><p id="69c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个异步方法返回一个解析为MediaStream的承诺，media stream对捕获的媒体进行流式传输。</p><h1 id="4009" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">9.图像捕获API</h1><p id="24b5" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这个API提供了一个简单的接口，用于从相机或用户的照片库中捕获照片和视频。</p><p id="6165" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">API被设计得简单易用。例如，它可以从相机或用户的照片库中捕捉照片或视频。</p><p id="6328" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mu mv mw mx b">MediaDevices.getUserMedia()</code>方法提示用户允许使用媒体输入，产生包含所请求的媒体类型的媒体流。该流可以包括例如视频轨道(由硬件或虚拟视频源产生，如照相机、视频记录设备、屏幕共享服务等。)</p><p id="a771" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个如何使用它的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图像捕获API js示例。</p></figure><h1 id="150a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">10.WebXR设备API</h1><p id="1f70" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">WebXR设备API向Web公开VR和AR设备的能力。这个特性是实验性的，并且只在上下文中(比如HTTPS，在一些或所有支持的浏览器中。)</p><p id="3015" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有关更多信息:</p><p id="882c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/WebXR_Device_API" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/API/WebXR _ Device _ API</a></p><h1 id="97d8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">最后的想法</h1><p id="e5d3" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我希望这些API能够让您了解这组API有多强大，以及您可以用它们做什么。要了解更多信息，我将官方文档留在下面，在那里您可以找到目前可用的所有浏览器API。</p><h1 id="d2f8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">参考</h1><p id="aac9" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API" rel="noopener ugc nofollow" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API</a></p></div></div>    
</body>
</html>