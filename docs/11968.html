<html>
<head>
<title>Want to Make API Calls From Your Rails App? Try These 3 HTTP Clients</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">想从你的Rails应用程序进行API调用吗？试试这三个HTTP客户端</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/making-api-calls-in-your-rails-app-try-these-http-clients-47b90ebca70?source=collection_archive---------5-----------------------#2022-05-01">https://betterprogramming.pub/making-api-calls-in-your-rails-app-try-these-http-clients-47b90ebca70?source=collection_archive---------5-----------------------#2022-05-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7301" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">法拉第、Excon和Rest客户</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/aa3503adcf4deca1727a6e517e0e95ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*57IbftYZc7p6dATo"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">迈克尔·泽兹奇在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="f394" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您正在开发一个利用API的应用程序，那么您将不得不选择一个HTTP客户端来发出请求。Ruby有自己的名为<code class="fe ls lt lu lv b">Net::HTTP</code>的内置HTTP客户端，但是使用起来很痛苦。</p><p id="100d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者，有一些库可以使API请求变得更加容易。这些库的数量之多会让找到合适的库变得非常困难，所以这里有一些小技巧来帮助你找到适合你项目的库。</p><h1 id="c787" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">法拉第</h1><p id="00bc" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">虽然Faraday本身并不是一个真正的HTTP客户端，但它充当了其他客户端的包装器，比如Ruby的内置<code class="fe ls lt lu lv b">Net::HTTP</code>。它作为一个抽象层来定制和简化请求。这种多功能性是法拉第成为最受欢迎的选择的原因。不想使用<code class="fe ls lt lu lv b">Net::HTTP</code>作为HTTP客户端？没问题，只是从许多其他支持的客户端中选择一个。只要确保你为它安装了相应的宝石。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="4e1e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个gem的其他特性包括一个连接对象，它可以用来创建默认的请求头/参数和通用的URL基路径。这个系统被称为<code class="fe ls lt lu lv b">Faraday::Connection</code>，是进行API调用的推荐方式。Faraday还允许使用中间件。它包括它所描述的“机架启发的中间件堆栈”,但也支持大量的外部gem来进一步定制请求。这些都是在<code class="fe ls lt lu lv b">Faraday::Connection</code>内部实现的，以设定一些选项。然后可以轻松地提出请求。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="1c33" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">法拉第的多功能性和大量的选项使其成为受欢迎的选择。支持的HTTP客户端和中间件列表可以在<a class="ae kv" href="https://github.com/lostisland/awesome-faraday/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h1 id="1d11" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">Rest客户端</h1><p id="29ab" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">这个HTTP客户端在<a class="ae kv" href="https://rubygems.org/" rel="noopener ugc nofollow" target="_blank"> RubyGems </a>上有超过2亿次下载。虽然它没有法拉第那么多的功能或定制选项，但它的简单和直接的方法使它成为一个受欢迎的选择。如果您不想选择适配器或者需要所有复杂的中间件和额外的特性，而只想进行简单的HTTP请求，那么Rest Client是一个明智的选择。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="67d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它又快又简单，而且很有效。Rest客户端需要注意的一点是，如果头没有作为参数在<code class="fe ls lt lu lv b">RestClient.get(url, headers = {})</code>中提供，默认情况下请求体将作为字符串返回。Rest Client确实有一些可以实现的更高级的选项，但总的来说，它是一个没有装饰，没有大惊小怪的宝石，这正是人们喜欢它的地方。点击查看文档<a class="ae kv" href="https://www.rubydoc.info/gems/rest-client/2.1.0" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="2dbe" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">执委会</h1><p id="226a" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">Excon介于Faraday和Rest客户端之间，由于其较浅的学习曲线，同时也提供一些高级选项和中间件支持，因此也很受欢迎。</p><p id="28fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它不像Rest客户端那样简单，也不提供Faraday的大量功能和定制。基本要求轻而易举。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="1643" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Excon的另一个很好的特性是持久连接的能力。当需要频繁调用API时，可以打开与服务器的连接以提高性能。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="cbe5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意，当<code class="fe ls lt lu lv b">:persistent =&gt; true</code>用作参数时，连接将保持打开，并在每个请求中重用，直到有一个请求使用<code class="fe ls lt lu lv b">:persistent =&gt; false</code>作为参数。该连接将用于该请求，并在请求完成后关闭。</p><p id="c2db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Excon既简单又快速，同时也比Rest客户端先进一些。如果您需要频繁进行API调用，但不需要Faraday的所有额外功能，这是一个很好的选择。查看<a class="ae kv" href="https://github.com/excon/excon/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">文档</a>了解更多信息。</p><h1 id="9177" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">结论</h1><p id="ed6b" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">在选择用于Rails应用程序的HTTP客户端时，有很多选项可供选择。这里介绍的三种方法很受欢迎，因为它们都根据您的需求提供了独特的优势。尝试每一种方法，并利用这些API来提升您的Rails应用程序。</p><ul class=""><li id="8858" class="mv mw iq ky b kz la lc ld lf mx lj my ln mz lr na nb nc nd bi translated"><a class="ae kv" href="https://lostisland.github.io/faraday/" rel="noopener ugc nofollow" target="_blank">法拉第</a></li><li id="7059" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated"><a class="ae kv" href="https://github.com/rest-client/rest-client" rel="noopener ugc nofollow" target="_blank"> Rest客户端</a></li><li id="850a" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated"><a class="ae kv" href="https://github.com/excon/excon" rel="noopener ugc nofollow" target="_blank">执委会</a></li></ul></div></div>    
</body>
</html>