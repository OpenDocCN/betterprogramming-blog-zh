<html>
<head>
<title>How to Use TriState Toggle in Jetpack Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Jetpack撰写中使用三态切换</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/tristate-toggle-in-jetpack-compose-5b080e537c64?source=collection_archive---------11-----------------------#2022-03-22">https://betterprogramming.pub/tristate-toggle-in-jetpack-compose-5b080e537c64?source=collection_archive---------11-----------------------#2022-03-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e6bb" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在Android用户界面的多个状态之间切换</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/545483ecb3a4dca7bd727695ec5a9612.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oNk0kYOpodgDhky28B6S2Q.png"/></div></div></figure><p id="c13e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了在Jetpack Compose中处理双重状态(例如:在白天和夜晚模式之间切换),我们使用开关，如下所示:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="c303" class="ls lt iq lo b gy lu lv l lw lx">val checkedState = remember { mutableStateOf(true) }</span><span id="997f" class="ls lt iq lo b gy ly lv l lw lx">Switch( checked = checkedState.value, onCheckedChange = { checkedState.value = it }</span><span id="f4e6" class="ls lt iq lo b gy ly lv l lw lx">)</span></pre><p id="9ea9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是，Compose没有提供任何可以让我们处理多种状态的组件。</p><p id="9948" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如，除了白天和夜晚模式，我们还想拥有白天、夜晚和夜晚状态。或者这些州的数量会增加。一个解决方案是我们可以将<code class="fe lz ma mb lo b">RadioGroup</code>和<code class="fe lz ma mb lo b">RadioButtons</code>一起使用，但是这样看起来不太好。</p><p id="ce23" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了克服这一点，我们可以设计我们的自定义切换状态按钮，将有两个以上的状态。首先，让我们看一下代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="a250" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们正在创建一个状态列表，它将决定切换按钮有多少个状态。</p><p id="e980" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，我们通过记住保存配置更改来创建<code class="fe lz ma mb lo b">selectedOption</code>，这将存储当前活动状态的值。</p><p id="db71" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后用λ来更新<code class="fe lz ma mb lo b">selected</code>选项的值。</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="6a28" class="ls lt iq lo b gy lu lv l lw lx">val onSelectionChange = { text: String -&gt;        <br/>    selectedOption = text    <br/>}</span></pre><p id="0665" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后我们创建顶层视图作为一个表面，给我们的按钮一个漂亮的外观。并使其围绕我们正在使用的<code class="fe lz ma mb lo b">children</code>视图的内容:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="2914" class="ls lt iq lo b gy lu lv l lw lx">Modifier.wrapContentSize()</span></pre><p id="caa9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，为了模仿一个漂亮的切换按钮的外观，我们使用了一个<code class="fe lz ma mb lo b">Row</code>。给它一个圆形的外观。</p><p id="0ff5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后我们遍历我们的<code class="fe lz ma mb lo b">states</code>列表，在该行中添加所需的状态。在<code class="fe lz ma mb lo b">clickable</code>属性中，我们用被点击项目的文本更新<code class="fe lz ma mb lo b">selectedOption</code>的值。</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="09ac" class="ls lt iq lo b gy lu lv l lw lx">.clickable {<br/>    onSelectionChange(text)                        <br/>}</span></pre><p id="5fab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在<code class="fe lz ma mb lo b">background</code>属性中，我们检查该项目是否是选中的项目，如果是，则将其背景颜色更改为“洋红色”,否则保持为“浅灰色”。</p><p id="34ef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是模仿切换按钮的主要成分。因为被选择的项目将与其余项目具有不同的颜色。</p><p id="af61" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注意:您可以更改此背景属性，以符合您自己的设计要求。</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="54bb" class="ls lt iq lo b gy lu lv l lw lx">.background(  <br/>if (text == selectedOption) {<br/>     Color.Magenta<br/>} else {                                <br/>     Color.LightGray                           <br/>  }                       <br/>)</span></pre><p id="ee24" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以利用<code class="fe lz ma mb lo b">selectedItem</code>的值来实现您的结果。</p><p id="fe8a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，最后的结果会是这样的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi me"><img src="../Images/aa72c55f3b3f538117c286635c7f9b79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*DCsBRdRAAxeesavhAmMHrg.gif"/></div></div></figure><p id="3f33" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">谢谢，就这些。</p></div></div>    
</body>
</html>