<html>
<head>
<title>Build Bar Charts in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中构建条形图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-bar-charts-in-swiftui-372322eea420?source=collection_archive---------11-----------------------#2019-12-10">https://betterprogramming.pub/build-bar-charts-in-swiftui-372322eea420?source=collection_archive---------11-----------------------#2019-12-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c4a1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">只有几行代码的漂亮的条形图</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/03dd8cd8282afdd2411048cab009e615.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BMX5wsjW9ArjhoBMUybaOA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://mockuper.net" rel="noopener ugc nofollow" target="_blank">样机</a>生成的样机</p></figure><p id="a82d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://developer.apple.com/xcode/swiftui/" rel="noopener ugc nofollow" target="_blank"> SwiftUI </a>是一种创新的、极其简单的方式，利用Swift的力量在所有苹果平台上构建用户界面。只使用一套工具和API为任何苹果设备构建用户界面。</p><p id="b4c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">SwiftUI具有易于阅读和自然书写的声明性Swift语法，可与新的Xcode设计工具无缝协作，使您的代码和设计完美同步。</p><p id="135c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">SwiftUI使用声明性语法，因此您可以简单地说明您的用户界面应该做什么。您的第一行SwiftUI代码已经是您编写过的最强大的UI代码。</p><p id="df67" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这篇文章旨在用SwiftUI构建条形图。我们将使用分段选择器视图来绑定不同的条形图形状。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><blockquote class="lz ma mb"><p id="4b57" class="kw kx mc ky b kz la jr lb lc ld ju le md lg lh li me lk ll lm mf lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="iq">如果你正在准备你的技术编码面试，或者你想学习递归来提高你解决问题的技能，那么你应该查看这个udemy课程</em> </strong> <a class="ae kv" href="https://www.udemy.com/course/master-the-recursion-from-beginner-to-advance-level/?referralCode=75F57675BDABF6D104C0" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">递归大师班，从C++ </strong> </a> <strong class="ky ir"> <em class="iq">的初级到高级水平，或者你可以在</em></strong><a class="ae kv" href="https://skl.sh/3PTOCns" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="iq">Skillshare</em></strong></a><strong class="ky ir"><em class="iq">上查看这个递归课程。</em>T25】</strong></p><p id="8f8c" class="kw kx mc ky b kz la jr lb lc ld ju le md lg lh li me lk ll lm mf lo lp lq lr ij bi translated"><strong class="ky ir">如果你想从初学者到专家水平学习ARKit 3，那么点击</strong> <a class="ae kv" href="https://www.udemy.com/course/ios-13-swift-5-the-complete-arkit-3-course/?couponCode=FORCREATOR" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">这里</strong> </a> <strong class="ky ir">获得课程，你还将获得97%的折扣。</strong></p><p id="3203" class="kw kx mc ky b kz la jr lb lc ld ju le md lg lh li me lk ll lm mf lo lp lq lr ij bi translated"><strong class="ky ir">如果你对学习iOS移动开发充满热情，并希望将你的iOS开发技能提升到一个新的水平，那么使用CloudKit framework的核心数据应该是你的首选。点击</strong> <a class="ae kv" href="https://www.udemy.com/course/mastering-coredata-with-cloudkit-in-swift-5-for-ios/?couponCode=FORDEVS" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">此处</strong> </a> <strong class="ky ir">获取课程，您还将获得97%的折扣。</strong></p><p id="b825" class="kw kx mc ky b kz la jr lb lc ld ju le md lg lh li me lk ll lm mf lo lp lq lr ij bi translated"><strong class="ky ir">从头开始学习SwiftUI点击</strong> <a class="ae kv" href="https://www.udemy.com/course/swiftui-the-complete-course-building-real-world-apps/?couponCode=FORCODERS" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">此处</strong> </a> <strong class="ky ir">获取课程，因为在本课程中，我们将使用SwiftUI构建许多应用，如脸书克隆、新闻应用、笔记应用等等。</strong></p></blockquote></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="23ae" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">入门指南</h1><p id="bafc" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">打开<a class="ae kv" href="https://developer.apple.com/xcode/" rel="noopener ugc nofollow" target="_blank"> Xcode，</a>创建一个新的Xcode项目。在iOS模板部分选择单视图应用程序，然后单击下一步。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/217b99664fb9db7b6d561e66c77a1457.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*E9fFJdH7XB5oXfjG.png"/></div></div></figure><p id="e70c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输入您的产品名称，并选择SwiftUI作为用户界面。单击下一步，并在桌面上创建它。</p><p id="3f28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是你完成设置后看到的。</p><div class="kg kh ki kj gt ab cb"><figure class="ne kk nf ng nh ni nj paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/112c81a4301ae2a9c8b4fce00262f45b.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*Kep7CPorkVQZlhQ-qghs0w.png"/></div></figure><figure class="ne kk nk ng nh ni nj paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/ce374c599bb4bacec5da09bfd0adab33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*drgyqvJvYgeNS16wyzdmjw.png"/></div></figure></div><p id="0521" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">默认情况下，SwiftUI视图文件声明两个结构。第一个结构符合<code class="fe nl nm nn no b">View</code>协议，描述了视图的内容和布局。第二个结构声明了该视图的预览。</p><p id="15ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在SwiftUI中实现条形图之前，我们先来看看什么是属性包装器。</p><h2 id="6d0f" class="np mh iq bd mi nq nr dn mm ns nt dp mq lf nu nv ms lj nw nx mu ln ny nz mw oa bi translated">什么是状态属性包装？</h2><p id="76c9" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">SwiftUI使用<code class="fe nl nm nn no b">@State</code>属性包装器来允许我们修改结构内部的值，这通常是不允许的，因为结构是值类型。当我们将<code class="fe nl nm nn no b">@State</code>放在一个属性之前时，我们有效地将其存储从我们的结构中移出，并移入由SwiftUI管理的共享存储。</p><p id="cdaa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这意味着SwiftUI可以在任何需要的时候销毁和重新创建我们的结构(这可能会经常发生),而不会丢失它所存储的状态。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="85da" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">履行</h1><p id="506f" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">首先按Command+N创建一个新的SwiftUI <code class="fe nl nm nn no b">View</code>文件。调用文件<code class="fe nl nm nn no b">BarView</code>，并将下面的代码粘贴到<code class="fe nl nm nn no b">BarView.</code></p><pre class="kg kh ki kj gt ob no oc od aw oe bi"><span id="90e9" class="np mh iq no b gy of og l oh oi"><strong class="no ir">struct</strong> BarView: View {</span><span id="ed3e" class="np mh iq no b gy oj og l oh oi"><strong class="no ir">var</strong> value: CGFloat = 0<br/><strong class="no ir">var</strong> week: String = ""</span><span id="507a" class="np mh iq no b gy oj og l oh oi"><strong class="no ir">var</strong> body: <strong class="no ir">some</strong> View {</span><span id="8991" class="np mh iq no b gy oj og l oh oi">VStack {</span><span id="7f07" class="np mh iq no b gy oj og l oh oi">ZStack(alignment: .bottom) {</span><span id="e05d" class="np mh iq no b gy oj og l oh oi">Capsule().frame(width: 30, height: value)</span><span id="0c83" class="np mh iq no b gy oj og l oh oi">.foregroundColor(Color( colorLiteral(red: 0.6666070223, green: 0.6667048931, blue: 0.6665855646, alpha: 1)))</span><span id="6c24" class="np mh iq no b gy oj og l oh oi">Capsule().frame(width: 30, height: value)<br/>.foregroundColor(Color(.white))<br/>}</span><span id="41a4" class="np mh iq no b gy oj og l oh oi">Text(week)</span><span id="250b" class="np mh iq no b gy oj og l oh oi">     }<br/>  }<br/>}</span></pre><p id="fa41" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码中，我们有两个变量:<code class="fe nl nm nn no b">value</code>和<code class="fe nl nm nn no b">week</code>。第一个变量跟踪<code class="fe nl nm nn no b">Capsule()</code>的高度，第二个变量显示星期。</p><p id="141d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们构建了一个<code class="fe nl nm nn no b">VStack</code>来添加一个垂直的视图。然后，我们有一个<code class="fe nl nm nn no b">ZStack </code>——一个覆盖其子视图的视图，在两个轴上对齐它们。在<code class="fe nl nm nn no b">ZStack</code>中，我们有两个胶囊(一个<code class="fe nl nm nn no b">Capsule()</code>是一个<code class="fe nl nm nn no b">struct</code>，其形状与包含它的视图的框架对齐)来显示条形图。</p><p id="a8ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回到你的<code class="fe nl nm nn no b">contentview .swift</code>文件，粘贴下面的代码。</p><pre class="kg kh ki kj gt ob no oc od aw oe bi"><span id="a506" class="np mh iq no b gy of og l oh oi"><strong class="no ir">struct</strong> ContentView: View {</span><span id="1fbf" class="np mh iq no b gy oj og l oh oi">@State <strong class="no ir">private</strong> <strong class="no ir">var</strong> pickerSelectedItem = 0<br/>@State <strong class="no ir">private</strong> <strong class="no ir">var</strong> dataPoints: [[CGFloat]] = [</span><span id="2054" class="np mh iq no b gy oj og l oh oi">[50, 100, 150],<br/>[150, 100, 50],<br/>[100, 50, 150]</span><span id="de6c" class="np mh iq no b gy oj og l oh oi">]</span><span id="9cbf" class="np mh iq no b gy oj og l oh oi"><strong class="no ir">var</strong> body: <strong class="no ir">some</strong> View {</span><span id="da7b" class="np mh iq no b gy oj og l oh oi">ZStack {</span><span id="50b3" class="np mh iq no b gy oj og l oh oi">Color.blue.edgesIgnoringSafeArea(.all)</span><span id="5d51" class="np mh iq no b gy oj og l oh oi">VStack {</span><span id="fa3b" class="np mh iq no b gy oj og l oh oi">Text("BAR CHART")</span><span id="5c5a" class="np mh iq no b gy oj og l oh oi">.font(.system(size: 28))<br/>.fontWeight(.medium)</span><span id="6ec8" class="np mh iq no b gy oj og l oh oi">Picker(selection: $pickerSelectedItem, label: Text("")) {</span><span id="5e3d" class="np mh iq no b gy oj og l oh oi">Text("Weekly").tag(0)<br/>Text("Monthly").tag(1)<br/>Text("Yearly").tag(2)</span><span id="681b" class="np mh iq no b gy oj og l oh oi">}.pickerStyle(SegmentedPickerStyle())<br/>.padding(.horizontal, 24)</span><span id="3dbf" class="np mh iq no b gy oj og l oh oi">HStack(spacing: 8) {</span><span id="ff5c" class="np mh iq no b gy oj og l oh oi">BarView(value: dataPoints[pickerSelectedItem][0], week: "D")<br/>BarView(value: dataPoints[pickerSelectedItem][1], week: "D")<br/>BarView(value: dataPoints[pickerSelectedItem][2], week: "D")</span><span id="622f" class="np mh iq no b gy oj og l oh oi">}.padding(.top, 24)<br/>.animation(.default)</span><span id="4f85" class="np mh iq no b gy oj og l oh oi">       }<br/>    }<br/>  }<br/>}</span><span id="d917" class="np mh iq no b gy oj og l oh oi"><strong class="no ir">struct</strong> ContentView_Previews: PreviewProvider {</span><span id="eac3" class="np mh iq no b gy oj og l oh oi"><strong class="no ir">static</strong> <strong class="no ir">var</strong> previews: <strong class="no ir">some</strong> View {</span><span id="4ad5" class="np mh iq no b gy oj og l oh oi">ContentView()</span><span id="b754" class="np mh iq no b gy oj og l oh oi">  }<br/>}</span></pre><p id="24ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码中，我们有两个<code class="fe nl nm nn no b">@State</code>变量:<code class="fe nl nm nn no b">pickerSelectedItem</code>和<code class="fe nl nm nn no b">dataPoints</code>。利用这些变量，我们调整了条形图。</p><p id="b505" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们在<code class="fe nl nm nn no b">ZStack</code>里面建一个<code class="fe nl nm nn no b">ZStack</code>，在那里我们有一个<code class="fe nl nm nn no b">VStack</code>。在<code class="fe nl nm nn no b">VStack</code>中，我们设置了<code class="fe nl nm nn no b">Text</code>、<code class="fe nl nm nn no b">Picker</code>、<code class="fe nl nm nn no b">BarView</code>，以及<code class="fe nl nm nn no b">BarView.</code>上的一些默认动画</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="a414" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">构建并运行</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/39ea2d3be71990d33c33f75f96e53b66.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/1*mUi-vB6pvY4qaJo_2Zmzgg.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最终的结果看起来是这样的</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="c9d7" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">结论</h1><p id="5f2a" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">这件作品到此为止。我希望你喜欢这篇文章，并且你已经学会了如何在SwiftUI中构建动画条形图。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><blockquote class="lz ma mb"><p id="6c8f" class="kw kx mc ky b kz la jr lb lc ld ju le md lg lh li me lk ll lm mf lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="iq">如果你正在准备你的技术编码面试，或者你想学习递归来提高你解决问题的技能，那么你应该查看这个udemy课程</em> </strong> <a class="ae kv" href="https://www.udemy.com/course/master-the-recursion-from-beginner-to-advance-level/?referralCode=75F57675BDABF6D104C0" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">递归大师班，从C++ </strong> </a> <strong class="ky ir"> <em class="iq">的初级到高级水平，或者你可以在</em></strong><a class="ae kv" href="https://skl.sh/3PTOCns" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="iq">Skillshare</em></strong></a><strong class="ky ir"><em class="iq">上查看这个递归课程。</em> </strong></p></blockquote></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="8748" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">额外资源</h1><blockquote class="lz ma mb"><p id="462c" class="kw kx mc ky b kz la jr lb lc ld ju le md lg lh li me lk ll lm mf lo lp lq lr ij bi translated"><strong class="ky ir">如果你想从初学者到专家水平学习ARKit 3，那么点击</strong> <a class="ae kv" href="https://www.udemy.com/course/ios-13-swift-5-the-complete-arkit-3-course/?couponCode=FORCREATOR" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">这里</strong> </a> <strong class="ky ir">获得课程，你还将获得97%的折扣。</strong></p><p id="f698" class="kw kx mc ky b kz la jr lb lc ld ju le md lg lh li me lk ll lm mf lo lp lq lr ij bi translated"><strong class="ky ir">如果你对学习iOS移动开发充满热情，并希望将你的iOS开发技能提升到一个新的水平，那么使用CloudKit framework的核心数据应该是你的首选。点击</strong> <a class="ae kv" href="https://www.udemy.com/course/mastering-coredata-with-cloudkit-in-swift-5-for-ios/?couponCode=FORDEVS" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">此处</strong> </a> <strong class="ky ir">获取课程，你还将获得97%的折扣。</strong></p><p id="0ab0" class="kw kx mc ky b kz la jr lb lc ld ju le md lg lh li me lk ll lm mf lo lp lq lr ij bi translated"><strong class="ky ir">从头开始学习SwiftUI点击</strong> <a class="ae kv" href="https://www.udemy.com/course/swiftui-the-complete-course-building-real-world-apps/?couponCode=FORCODERS" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">此处</strong> </a> <strong class="ky ir">获取课程，因为在本课程中，我们将使用SwiftUI构建许多应用，如脸书克隆、新闻应用、笔记应用等等。</strong></p></blockquote></div></div>    
</body>
</html>