# 上下文和您自己的 React 挂钩

> 原文：<https://betterprogramming.pub/context-and-your-own-react-hook-a73e32435880>

## 编写简单身份验证 React 挂钩的教程

![](img/0f4b923a7efe2535d46c0d14be393cb8.png)

Artem Sapegin 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

真的，很简单。起初，这看起来很复杂。但这真的很简单。首先，你需要弄清楚你想钩住什么。如果你不理解新的上下文 API，在你阅读之前做一点复习可能是好的。

在这个简短的教程中，我们将创建一个小的认证挂钩。完成本教程后，您可以将它插入到您的 API 中，也可以按照自己的意愿构建它。

# 设置您的上下文

这并不太难。如果您使用的是 React 的最新版本，那么您应该在 React 核心中有上下文。

我创建了一个`auth.js`文件，并为上下文添加了以下代码。

如您所见，我们已经从 React 库导入了上下文。我们有一些暂时不需要的额外导入，但是这段代码应该是可以运行的。

您将注意到的第一件事是我们已经创建了一个`Provider`组件。这个组件将被添加到我们的`app.js`文件中。你在这里看到的下一个函数实际上将是上下文消费者。这个消费者就是我们的钩子。这可能看起来很奇怪，因为它目前根本不做任何事情。但是您可以现在导入它，并尝试执行钩子提供的测试函数。

这里有一个你的`app.js file`可能看起来像什么的例子。

现在，让我们开始编写一个简单的 auth Hook。

我们将添加一个名为`useProvideAuth()`的功能组件。这个函数将包含我们钩子的所有肉。

这是它的样子。

大部分代码只是您的身份验证过程的存根。我们有一个登录和退出的方法。在这些函数中，你可以把你的 API 调用签入或签出。

我还加了一个方便的方法叫做`getCurrentUser()`。您可以使用这个方法调用后端来填充当前用户。这样做的真正原因是为了展示你可以在这个方法中使用`useEffect()`钩子来实现你所需要的。

因此，如果我们看看如何实现它，我们可以做到以下几点。

现在，你可以看到我们已经实现了刚刚创建的`useAuth`钩子。它不太破旧，也不太难。

这个例子并不是如何创建身份验证组件的完整例子。相反，它的意思是解释一下如何使用上下文来创建 React 挂钩。

我希望这给了你一个很好的介绍。