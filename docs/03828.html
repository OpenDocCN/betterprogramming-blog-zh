<html>
<head>
<title>Better Side-Bar Menus With SwiftUIMenu</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUIMenu带来更好的侧栏菜单</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/better-side-bar-menus-with-swiftuimenu-7daff6306217?source=collection_archive---------17-----------------------#2020-03-06">https://betterprogramming.pub/better-side-bar-menus-with-swiftuimenu-7daff6306217?source=collection_archive---------17-----------------------#2020-03-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d164" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">快速菜单救援</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/f9475abf4a51d3e351fe655de367049f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*S8w-ACUkyBdUfH3k4CH2Dg.png"/></div></figure><h1 id="7f7a" class="kq kr it bd ks kt ku kv kw kx ky kz la jz lb ka lc kc ld kd le kf lf kg lg lh bi translated">介绍</h1><p id="6301" class="pw-post-body-paragraph li lj it lk b ll lm ju ln lo lp jx lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">前段时间，我决定写一篇关于SwiftUI中菜单导航模式实现的文章:</p><div class="me mf gp gr mg mh"><a href="https://medium.com/better-programming/may-i-see-the-swiftui-menu-please-b9d40246c2f5" rel="noopener follow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd iu gy z fp mm fr fs mn fu fw is bi translated">我可以看看SwiftUI菜单吗？</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">在SwiftUI中实现菜单导航</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">medium.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv ko mh"/></div></div></a></div><p id="0547" class="pw-post-body-paragraph li lj it lk b ll mw ju ln lo mx jx lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">菜单导航模式在许多应用程序中广泛使用。虽然有些人会认为这更像是Android的事情，苹果从未试图将其作为内置组件，但许多人仍然觉得它很有用，并要求在他们的应用程序中使用它。</p><p id="876d" class="pw-post-body-paragraph li lj it lk b ll mw ju ln lo mx jx lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">在本文中，我将介绍SwiftUIMenu，并让您快速浏览一下它的主要特性。最后，我们将通过一个简单的示例项目来测试这个框架。</p><div class="me mf gp gr mg mh"><a href="https://github.com/fermoya/SwiftUIMenu" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd iu gy z fp mm fr fs mn fu fw is bi translated">fermoya/SwiftUIMenu</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">SwiftUIMenu是一个组件，允许您在应用程序中实现菜单导航模式。菜单显示一个内容…</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">github.com</p></div></div><div class="mq l"><div class="nb l ms mt mu mq mv ko mh"/></div></div></a></div></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="a9e0" class="kq kr it bd ks kt nj kv kw kx nk kz la jz nl ka lc kc nm kd le kf nn kg lg lh bi translated">基本实现</h1><p id="c273" class="pw-post-body-paragraph li lj it lk b ll lm ju ln lo lp jx lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">创建新的<code class="fe no np nq nr b">Menu</code>相对简单。你只需要通过:</p><ul class=""><li id="11f5" class="ns nt it lk b ll mw lo mx lr nu lv nv lz nw md nx ny nz oa bi translated">绑定到选定的索引</li><li id="3a51" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated">显示/隐藏抽屉的绑定</li><li id="e820" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated">用于填充菜单的项目</li><li id="7183" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated"><code class="fe no np nq nr b">ViewBuilder</code>创建抽屉行</li><li id="905e" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated"><code class="fe no np nq nr b">ViewBuilder</code>创建章节内容</li></ul><pre class="kj kk kl km gt og nr oh oi aw oj bi"><span id="094e" class="ok kr it nr b gy ol om l on oo">Menu(indexSelected: self.$index,<br/>     isOpen: self.$isMenuOpen,<br/>     menuItems: menuItems,<br/>     id: \.name,<br/>     menuItemRow: { item in MyMenuRow(item) },<br/>     menuItemContent: { indexSelected in<br/>         MySectionContent(index: indexSelected) <br/>     })</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/7d6e9f2a35b0997b8808ce8f1fac507f.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/1*gpUTBcYcCzOfyd9WkNSX_A.gif"/></div></figure><p id="de91" class="pw-post-body-paragraph li lj it lk b ll mw ju ln lo mx jx lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">默认情况下，<code class="fe no np nq nr b">Menu</code>被初始化为:</p><ul class=""><li id="aa21" class="ns nt it lk b ll mw lo mx lr nu lv nv lz nw md nx ny nz oa bi translated">向左对齐，因此向右显示</li><li id="79bb" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated">它会占据整个屏幕</li><li id="a2ec" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated">可拖动，这意味着您可以将抽屉拖入和拖出</li><li id="3fef" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated">重叠样式—也就是说，菜单抽屉与部分内容重叠</li></ul></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="d1b8" class="kq kr it bd ks kt nj kv kw kx nk kz la jz nl ka lc kc nm kd le kf nn kg lg lh bi translated">用户界面定制</h1><p id="c681" class="pw-post-body-paragraph li lj it lk b ll lm ju ln lo lp jx lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你可以在<code class="fe no np nq nr b">Menu</code>上使用一些视图修改器，让它看起来更有吸引力。你可以这样做:</p><ul class=""><li id="ce86" class="ns nt it lk b ll mw lo mx lr nu lv nv lz nw md nx ny nz oa bi translated">将<code class="fe no np nq nr b">alignment</code>更改为<code class="fe no np nq nr b">.right</code>或<code class="fe no np nq nr b">.left</code></li><li id="d47e" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated">通过<code class="fe no np nq nr b">revealRatio</code>修改抽屉将占用的可用空间比例</li><li id="0027" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated">将分隔缝<code class="fe no np nq nr b">style</code>定制为<code class="fe no np nq nr b">.overlap</code>、<code class="fe no np nq nr b">.push</code>或<code class="fe no np nq nr b">.stretch</code></li><li id="1344" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated">向抽屉菜单添加一个<code class="fe no np nq nr b">footer</code>和一个<code class="fe no np nq nr b">header</code></li><li id="e3b0" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated">用<code class="fe no np nq nr b">menuRowBackground</code>给菜单行着色</li><li id="b6f1" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated">用<code class="fe no np nq nr b">shadeContent</code>遮蔽章节内容</li><li id="9a33" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated"><code class="fe no np nq nr b">disableDragging</code></li></ul><p id="d29a" class="pw-post-body-paragraph li lj it lk b ll mw ju ln lo mx jx lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">以下是一些例子:</p><pre class="kj kk kl km gt og nr oh oi aw oj bi"><span id="5c79" class="ok kr it nr b gy ol om l on oo">Menu(...)<br/>    .alignment(.right)<br/>    .style(.push)<br/>    .revealRatio(0.8)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/5b657d48769eda268865115c75d17528.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/1*JV38_-_1nXrDPK8iSe9Emw.gif"/></div></figure><pre class="kj kk kl km gt og nr oh oi aw oj bi"><span id="6332" class="ok kr it nr b gy ol om l on oo">Menu(...)<br/>    .style(.stretch)<br/>    .revealRatio(0.8)<br/>    .header(header: { ProfileHeader() })<br/>    .footer(footer: { MenuFooter() })<br/>    .shadeContent()<br/>    .edgesIgnoringSafeArea(.all)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/58364b63c420ca656220b70ce21023ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/1*StgKQicU-jiddULuJNUdgw.gif"/></div></figure></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="dfa2" class="kq kr it bd ks kt nj kv kw kx nk kz la jz nl ka lc kc nm kd le kf nn kg lg lh bi translated">示例项目</h1><p id="8dfa" class="pw-post-body-paragraph li lj it lk b ll lm ju ln lo lp jx lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这是我们要做的。我们将创建一个菜单:</p><ol class=""><li id="7423" class="ns nt it lk b ll mw lo mx lr nu lv nv lz nw md oq ny nz oa bi translated">可以通过点击导航条按钮以编程方式打开</li><li id="7051" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md oq ny nz oa bi translated">抽屉占据了80%的可用空间</li><li id="bcdb" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md oq ny nz oa bi translated">通过推送内容来展示</li><li id="5823" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md oq ny nz oa bi translated">从左侧显示</li><li id="0e70" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md oq ny nz oa bi translated">抽屉打开时遮蔽内容。我们还将有一个导航条按钮来以编程方式打开<code class="fe no np nq nr b">Menu</code>。</li><li id="c4be" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md oq ny nz oa bi translated">添加页脚和页眉</li><li id="daed" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md oq ny nz oa bi translated">将行染成浅灰色</li><li id="86ac" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md oq ny nz oa bi translated">忽略边缘</li></ol><p id="3384" class="pw-post-body-paragraph li lj it lk b ll mw ju ln lo mx jx lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">我们将在整个示例中使用这个列表作为待办事项列表来指出这些特性的实现。</p><p id="4ea7" class="pw-post-body-paragraph li lj it lk b ll mw ju ln lo mx jx lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">让我们把事情做好。为什么我们不从创建构建<code class="fe no np nq nr b">Menu</code>所需的依赖项开始呢？继续定义将填充行的模型:</p><pre class="kj kk kl km gt og nr oh oi aw oj bi"><span id="9d1a" class="ok kr it nr b gy ol om l on oo">struct MenuItem: Equatable {<br/>    var name: String<br/>    var color: Color<br/>}</span><span id="becc" class="ok kr it nr b gy or om l on oo">let menuItems: [MenuItem] = [<br/>    MenuItem(name: "Section 1", color: .blue),<br/>    MenuItem(name: "Section 2", color: .red),<br/>    MenuItem(name: "Section 3", color: .green),<br/>    MenuItem(name: "Section 4", color: .orange),<br/>    MenuItem(name: "Section 5", color: .yellow),<br/>    MenuItem(name: "Section 6", color: .purple)<br/>]</span></pre><p id="d646" class="pw-post-body-paragraph li lj it lk b ll mw ju ln lo mx jx lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">继续使用两个<code class="fe no np nq nr b">state</code>变量来管理选择的索引和抽屉可见性:</p><pre class="kj kk kl km gt og nr oh oi aw oj bi"><span id="814b" class="ok kr it nr b gy ol om l on oo">@State var index = 0<br/>@State var isMenuOpen = false</span></pre><p id="d2e1" class="pw-post-body-paragraph li lj it lk b ll mw ju ln lo mx jx lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">干得好！现在，是时候根据<code class="fe no np nq nr b">menuItem</code>和<code class="fe no np nq nr b">indexSelected</code>创建行和内容了。我们将保持简单，因为这只是概念验证:</p><pre class="kj kk kl km gt og nr oh oi aw oj bi"><span id="540b" class="ok kr it nr b gy ol om l on oo">func menuRow(for item: MenuItem) -&gt; some View {<br/>    Text(item.name)<br/>        .foregroundColor(item.color)<br/>}</span><span id="8a42" class="ok kr it nr b gy or om l on oo">func menuContent(at index: Int) -&gt; some View {<br/>    let welcomeText = Text("Welcome to ")<br/>        .font(.system(size: 20))</span><span id="83e8" class="ok kr it nr b gy or om l on oo">    let menuItem = menuItems[self.index]<br/>    let sectionText = Text(menuItem.name)<br/>        .font(.system(size: 30))<br/>        .bold()<br/>        .italic()</span><span id="dac2" class="ok kr it nr b gy or om l on oo">    return ZStack {<br/>        Rectangle().fill(menuItems[self.index].color)<br/>        (welcomeText + sectionText)<br/>    }<br/>}</span></pre><p id="0f05" class="pw-post-body-paragraph li lj it lk b ll mw ju ln lo mx jx lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">至此，我们已经准备好实现我们的<code class="fe no np nq nr b">Menu</code>。转到SwiftUI视图的主体，并将其定义为:</p><pre class="kj kk kl km gt og nr oh oi aw oj bi"><span id="63ec" class="ok kr it nr b gy ol om l on oo">var body: some View {<br/>    NavigationView {<br/>        Menu(indexSelected: self.$index,<br/>             isOpen: self.$isMenuOpen,<br/>             menuItems: menuItems,<br/>             id: \.name,<br/>             menuItemRow: {<br/>                 self.menuRow(for: $0)<br/>             },<br/>             menuItemContent: { section in<br/>                 self.menuContent(at: section)<br/>                     // 1. <br/>                     .navigationBarItems(leading: self.menuButton)<br/>                     .navigationBarTitle(Text("SwiftUIMenu"), <br/>                                         displayMode: .inline)<br/>             })<br/>         // 2-8. Menu customization here<br/>    }<br/>}</span><span id="863b" class="ok kr it nr b gy or om l on oo">var menuButton: some View {<br/>    let imageName = isMenuOpen ? "xmark" : "list.bullet"</span><span id="d353" class="ok kr it nr b gy or om l on oo">    return Button(action: {<br/>        withAnimation {<br/>            self.isMenuOpen.toggle()<br/>        }<br/>    }) {<br/>        Image(systemName: imageName)<br/>            .padding()<br/>        }<br/>}</span></pre><p id="d6d7" class="pw-post-body-paragraph li lj it lk b ll mw ju ln lo mx jx lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">现在，我们已经完成了列表中的第一点:我们创建了一个导航栏按钮来管理菜单显示。让我们检查一下剩余的项目符号，将它们从我们的列表中划掉，并定制<code class="fe no np nq nr b">Menu</code>:</p><pre class="kj kk kl km gt og nr oh oi aw oj bi"><span id="f76b" class="ok kr it nr b gy ol om l on oo">Menu(...)<br/>    // 2.<br/>    .revealRatio(0.8)</span><span id="b870" class="ok kr it nr b gy or om l on oo">    // 3.<br/>    .style(.push)</span><span id="a436" class="ok kr it nr b gy or om l on oo">    // 4.<br/>    .alignment(.left)</span><span id="8e16" class="ok kr it nr b gy or om l on oo">    // 5.<br/>    .shadeContent()</span><span id="bf78" class="ok kr it nr b gy or om l on oo">    // 6.<br/>    .header(header: {<br/>        self.menuHeader<br/>    }<br/>    .footer(footer: {<br/>        self.menuFooter<br/>    }</span><span id="012b" class="ok kr it nr b gy or om l on oo">    // 7.<br/>    .menuRowBackground(Color.gray.opacity(0.2))</span><span id="e611" class="ok kr it nr b gy or om l on oo">    // 8.<br/>    .edgesIgnoringSafeArea(.all)</span></pre><p id="677a" class="pw-post-body-paragraph li lj it lk b ll mw ju ln lo mx jx lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">最后但同样重要的是，使用<code class="fe no np nq nr b">onAppear</code>移除菜单抽屉中的分隔线:</p><pre class="kj kk kl km gt og nr oh oi aw oj bi"><span id="2d78" class="ok kr it nr b gy ol om l on oo">NavigationView {<br/>    // menu here<br/>}.onAppear {<br/>    UITableView.appearance().separatorStyle = .none<br/>}</span></pre><p id="7aaa" class="pw-post-body-paragraph li lj it lk b ll mw ju ln lo mx jx lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">让我们试试这个。运行应用程序，并查看其外观:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/a652240c2a09ffb8bd8dd2d4114050e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/1*GOETLPN05hFBQEef3QZuzQ.gif"/></div></figure><p id="44c1" class="pw-post-body-paragraph li lj it lk b ll mw ju ln lo mx jx lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">漂亮！那不是超级简单吗？SwiftUIMenu让你轻松搞定。</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="fb75" class="kq kr it bd ks kt nj kv kw kx nk kz la jz nl ka lc kc nm kd le kf nn kg lg lh bi translated">结论</h1><p id="ad52" class="pw-post-body-paragraph li lj it lk b ll lm ju ln lo lp jx lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">SwiftUIMenu可让您在应用程序中轻松实现菜单导航模式。你再也不用担心过渡了。你需要做的就是添加SwiftUIMenu作为一个依赖项，然后chill。</p><p id="05c1" class="pw-post-body-paragraph li lj it lk b ll mw ju ln lo mx jx lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">SwiftUIMenu遵循SwiftUI指南，具有很强的声明性和描述性。它带有一些修改器，可以根据你的需要定制<code class="fe no np nq nr b">Menu</code>。</p></div></div>    
</body>
</html>