<html>
<head>
<title>Deploy EVM-Based dApp on Algorand With Milkomeda A1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Milkomeda A1在Algorand上部署dApp</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/algorand-deploying-evm-based-dapps-with-milkomeda-a1-f30b8b513ca7?source=collection_archive---------2-----------------------#2022-10-23">https://betterprogramming.pub/algorand-deploying-evm-based-dapps-with-milkomeda-a1-f30b8b513ca7?source=collection_archive---------2-----------------------#2022-10-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c587" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用(主要)Python</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b66538d8f81ddd3f9e66bc9a15d52f86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BCI-RRNwNmMajgMoFiX1mg.jpeg"/></div></div></figure><p id="48df" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本文中，我将展示在algrand-Milkomeda A1上部署基于EVM的dApp是多么简单，主要使用Python。</p><p id="1516" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Milkomeda是一种新协议，它将EVM功能带到了非EVM区块链。在撰写本报告时，L2通过EVM的algrand-milk omeda A1和Cardano通过EVM的Cardano-Milkomeda C1侧链为algrand提供了解决方案。</p><p id="69be" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">A1 Rollup使用包装ALGOs (milkALGOs)作为其基础货币，可以使用Milkomeda免权限桥轻松桥接。用户可以通过几个简单的步骤将他们的ALGOs和其他Algorand原生资产(asa)打包到A1汇总中。这使得他们能够使用他们的milkALGOs与部署在A1 Rollup上的基于EVM的dApps进行交互。</p><p id="0098" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我假设用户从未使用过Algorand，并将从头开始展示所有步骤:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="737e" class="ls lt iq lo b gy lu lv l lw lx">Table of Contents</span><span id="6fab" class="ls lt iq lo b gy ly lv l lw lx">Setup an Algorand Wallet<br/><a class="ae lz" href="#53b9" rel="noopener ugc nofollow">Get Some Testnet ALGO</a><br/><a class="ae lz" href="#932a" rel="noopener ugc nofollow">Add the Milkomeda Algorand Testnet to Metamask</a><br/><a class="ae lz" href="#5516" rel="noopener ugc nofollow">Create a Dummy EVM Account To Test</a><br/><a class="ae lz" href="#6e1b" rel="noopener ugc nofollow">Bridge Testnet ALGO to Milkomeda A1</a><br/><a class="ae lz" href="#d07c" rel="noopener ugc nofollow">Compile and Deploy to Milkomeda A1 a SimpleStorage Contract Written in Solidity Using Brownie</a><br/><a class="ae lz" href="#b185" rel="noopener ugc nofollow">BONUS: Compile the Same Contract Using Vyper and Deploy Using web3py</a></span></pre><h1 id="15e8" class="ma lt iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">第1步——设置Algorand钱包</h1><p id="9bbd" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">Algorand有几种钱包可供选择。要获得几乎完整的列表，我建议读者去Algorand开发者门户上的discover &gt; wallets部分，但在本例中，我将使用MyAlgo wallet。</p><p id="61fe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">MyAlgo是一个Algorand网络钱包，具有非托管和安全机制。它帮助用户在处理自己的私钥时直接与Algorand区块链进行交互，方法是将私钥安全地加密存储在本地浏览器中，或者使用总账硬件钱包。</p><p id="b06d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要设置钱包，请(I)访问<a class="ae lz" href="https://wallet.myalgo.com/new-account" rel="noopener ugc nofollow" target="_blank">https://wallet.myalgo.com/new-account</a>,( ii)选择一个密码来保护您的钱包，以及(iii)点击添加新帐户并按照步骤安全保存您的助记短语。</p><p id="ae0f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您现在应该有一个如下图所示的Algorand地址:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/9e53bb1c30deea5ed51de982a7440cac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pC6Q45Z5k_peM4mVNbZ9XA.png"/></div></div><p class="mx my gj gh gi mz na bd b be z dk translated">MyAlgo钱包截图</p></figure><h1 id="53b9" class="ma lt iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">第二步——获取一些测试网ALGO</h1><p id="fde0" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">现在，在你的MyAlgo钱包的右上方，从MAINNET更改为Testnet，然后访问Algorand Testnet分配器(【https://testnet.algoexplorer.io/dispenser】)并粘贴你新创建的帐户以获得一些TESTNET算法。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/e51d0e8d714ab89fef350e1724312785.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9f2Gzh1GAlZr6ICHR0yryQ.png"/></div></div></figure><p id="e2ad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，您应该可以在MyAlgo钱包中看到十个testnet算法。</p><h1 id="932a" class="ma lt iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">步骤3 —将Milkomeda Algorand测试网添加到Metamask</h1><p id="109c" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">在元掩码中，转到设置&gt;网络&gt;添加网络，并填写以下信息:</p><p id="a1ad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">网络名称:Milkomeda algrand Testnet<br/>新RPC URL:<a class="ae lz" href="https://rpc-devnet-algorand-rollup.a1.milkomeda.com" rel="noopener ugc nofollow" target="_blank">https://rpc-devnet-algorand-rollup.a1.milkomeda.com</a><br/>Chain ID:200202<br/>货币符号(可选):milkTALGO <br/> Block Explorer URL(可选):<a class="ae lz" href="https://testnet-algorand-rollup.a1.milkomeda.com" rel="noopener ugc nofollow" target="_blank">https://testnet-algorand-rollup.a1.milkomeda.com</a></p><h1 id="5516" class="ma lt iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">步骤4-创建一个虚拟EVM帐户进行测试</h1><p id="cafe" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">为了测试包装算法到Milkomeda的桥接，让我们用一个简单的Python片段创建一个虚拟的EVM帐户。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="b685" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这将生成一个私钥，您现在可以使用它将帐户导入元掩码。</p><p id="7ad3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">重要提示:请不要将这样生成的账户用于真实资金。提议过程的随意性不足以保证你的资金安全。</p><h1 id="6e1b" class="ma lt iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">步骤5-将ALGO测试网连接到Milkomeda A1</h1><p id="dd58" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">转到Milkomeda A1桥页面<a class="ae lz" href="https://algorand-bridge-dev.milkomeda.com/" rel="noopener ugc nofollow" target="_blank">https://algorand-bridge-dev.milkomeda.com/</a>并遵循以下步骤:</p><ol class=""><li id="a305" class="ne nf iq kt b ku kv kx ky la ng le nh li ni lm nj nk nl nm bi translated">在右上角的选择框中选择“Devnet”</li><li id="8fdf" class="ne nf iq kt b ku nn kx no la np le nq li nr lm nj nk nl nm bi translated">在网络起点上，选择“阿尔格兰德至米尔科米达”</li><li id="e4d9" class="ne nf iq kt b ku nn kx no la np le nq li nr lm nj nk nl nm bi translated">在令牌上，选择“ALGO”</li><li id="57d8" class="ne nf iq kt b ku nn kx no la np le nq li nr lm nj nk nl nm bi translated">点击“连接钱包”algrand，选择MyAlgo钱包，输入您的密码，然后选择您的algrand帐户</li><li id="4ad1" class="ne nf iq kt b ku nn kx no la np le nq li nr lm nj nk nl nm bi translated">点击“连接钱包”元掩码以连接到A1上您的EVM地址</li><li id="673a" class="ne nf iq kt b ku nn kx no la np le nq li nr lm nj nk nl nm bi translated">点击“下一步”，然后点击“签名并发送”</li></ol><p id="d984" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果一切顺利，你会看到下面的屏幕，现在应该在Metamask中看到你的桥接算法。跟随链接将在A1桥浏览器上显示事务。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/f34c1a52e7aa715f67bbb7abc63e3abe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8zr3lx8Ug4fPVvkZfyF68A.png"/></div></div></figure><h1 id="d07c" class="ma lt iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">步骤6——使用Brownie编译并部署一个用Solidity编写的简单存储契约到Milkomeda A1</h1><p id="c9cf" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">假设没有安装Brownie，创建一个虚拟环境并通过以下方式安装Brownie:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="cb6c" class="ls lt iq lo b gy lu lv l lw lx">python -m venv venv<br/>source venv/bin/activate<br/>pip install eth-brownie</span></pre><p id="bc6d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在新的工作目录中初始化一个brownie项目:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="3036" class="ls lt iq lo b gy lu lv l lw lx">brownie init milkomeda &amp;&amp; cd milkomeda</span></pre><p id="048c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在让我们创建一个非常简单的可靠性契约。在contracts文件夹中，创建一个名为<code class="fe nt nu nv lo b">Storage.sol</code>的文件，并添加以下实体代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="3b75" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从创建的工作目录的根目录运行以下命令来编译该协定:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="d099" class="ls lt iq lo b gy lu lv l lw lx">brownie compile</span></pre><p id="a6df" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要检查brownie安装中配置的可用网络，请运行:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="3bc6" class="ls lt iq lo b gy lu lv l lw lx">brownie networks list</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/1a9790a2117aebe7de3fb8320a068f73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*biNwxI6nGCjm1c7ppL4p3w.png"/></div></figure><p id="361d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Milkomeda A1默认是不可用的，我们需要添加它。为此，编辑文件<code class="fe nt nu nv lo b">~/.brownie/network-config.yaml</code>并添加以下行:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="09e7" class="ls lt iq lo b gy lu lv l lw lx">- name: Milkomeda<br/>    networks:<br/>     - name: Algorand Testnet<br/>       id: milkomeda-algorand-testnet<br/>       host: <a class="ae lz" href="https://rpc-devnet-algorand-rollup.a1.milkomeda.com" rel="noopener ugc nofollow" target="_blank">https://rpc-devnet-algorand-rollup.a1.milkomeda.com</a><br/>       chainid: 200202<br/>       explorer: <a class="ae lz" href="https://testnet-algorand-rollup.a1.milkomeda.com" rel="noopener ugc nofollow" target="_blank">https://testnet-algorand-rollup.a1.milkomeda.com</a></span></pre><p id="0466" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者使用brownie CLI:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="52f4" class="ls lt iq lo b gy lu lv l lw lx">brownie networks add Milkomeda milkomeda-algorand-testnet chainid=200202 explorer=https://testnet-algorand-rollup.a1.milkomeda.com host=https://rpc-devnet-algorand-rollup.a1.milkomeda.com name="Milkomeda Testnet"</span></pre><p id="5d06" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果成功，现在应该可以在列表中看到它，可以通过以下方式查询完整的详细信息:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="eb4d" class="ls lt iq lo b gy lu lv l lw lx">brownie networks list true</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/6e286e805f9f33eb8f0fbe5d4d2c050c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*CtkTuSJ7qL-2SLrGTzq_zA.png"/></div></figure><p id="4d54" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将添加私钥以使用创建的(EVM)帐户。在根目录下创建一个名为<code class="fe nt nu nv lo b">brownie-config.yml</code>的文件，直接添加私钥。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="46c3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者将私钥保存在. env文件中，并在brownie配置中指向它。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="5524" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们已经做好了在Milkomeda A1上部署存储智能合同的一切准备。在<code class="fe nt nu nv lo b">scripts</code>文件夹中，创建一个名为<code class="fe nt nu nv lo b">deploy.py</code>的文件，并添加以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="bcc0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从brownie中，我们导入了<code class="fe nt nu nv lo b">Storage</code>以便能够使用编译后的契约，<code class="fe nt nu nv lo b">accounts</code>以便我们能够通过私有密钥添加帐户，以及<code class="fe nt nu nv lo b">config</code>以便能够访问存储在<code class="fe nt nu nv lo b">brownie-config.yml</code>文件中的密钥/值对。</p><p id="49cf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，我们可以创建签名者帐户，并在main函数中部署合同。</p><p id="acb3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们现在可以在Milkomeda A1上部署契约，方法是从终端运行脚本并指示A1网络:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="cde8" class="ls lt iq lo b gy lu lv l lw lx">brownie run scripts/deploy.py --network milkomeda-algorand-testnet</span></pre><p id="3b47" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">输出应该是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/04248a96fb55e5b8edb2bad33e6e2755.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KGyvSxBCIIlLPl9wNfLKwQ.png"/></div></div></figure><p id="3da3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">合同已经部署，您可以在A1 Milkomeda Devnet explorer上检查事务:</p><div class="nz oa gp gr ob oc"><a href="https://explorer-devnet-algorand-rollup.a1.milkomeda.com/tx/0x881eaedcdbe6b965d77bf84383d5e4235bb46aeeaaedffddc385ed4ed1b59909" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">事务0x 881 aeedcdb 6b 965d 77 BF 84383 d5e 4235 bb 46 aaeedfddc 385 ed 4 ed 1b 59909—A1浏览器</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">查看A1上的事务0x 881 aeedcdb 6b 965d 77 BF 84383 d5e 4235 bb 46 aeeaedfddc 385 ed 4 ed 1b 59909</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">explorer-devnet-algorand-rollup.a1.milkomeda.com</p></div></div></div></a></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/d9aed02ef8f795d40ffd701ac0c7ec65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BqXc82WNs5M2HomZV2hdug.png"/></div></div></figure><p id="24de" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了与智能合约交互，让我们在脚本目录中创建一个名为<code class="fe nt nu nv lo b">call.py</code>的单独文件，并添加以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="70ba" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里唯一的新导入是通过调用<code class="fe nt nu nv lo b">.from_abi</code>方法创建契约对象的<code class="fe nt nu nv lo b">Contract</code>类，该方法将名称、abi和契约地址作为输入。合同地址是从部署输出中复制的，并在这里进行了硬编码。</p><p id="2178" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，我们调用契约上的retrieve方法来读取“number”变量中的存储值。然后我们存储一个新值并再次读取它。要从终端调用该脚本，请运行以下命令:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="dc98" class="ls lt iq lo b gy lu lv l lw lx">brownie run scripts/call.py --network milkomeda-algorand-testnet</span></pre><p id="0a54" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">输出应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/b23ef4b73a13e8cf1bbde4dad103146e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ncotDlEMJO5GAA8v-HpGPQ.png"/></div></div></figure><p id="3f39" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们完了。我们已经在Milkomeda A1上部署了一个合同并与之交互，所以在某种程度上，我们已经在Algorand上使用了一个基于EVM的智能合同。</p><p id="a37f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我承认这个教程可以很容易地适应任何EVM兼容链，所以它不是真正的阿尔格兰德特定的，但它只是显示了如何无缝地将现有的EVM dApp移植到阿尔格兰德。</p><h1 id="b185" class="ma lt iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">好处:使用Vyper编译相同的合同，使用web3py部署</h1><p id="b8b9" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">我们现在可以看一个部署相同的智能契约的例子，但它是用Vyper编写的，只使用了web3py。</p><p id="033b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们需要契约的abi和字节码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="bab2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在让我们通过RPC URL连接到Milkomeda A1。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="218c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从生成的私钥设置帐户(假设它在。环境文件)</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="20c4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从abi和字节码创建契约对象，并调用构造函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="d09f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">至此，代码将产生以下输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/77a2e916c6323453f2421936b58908fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m5UvwwnWN7u9_PZUAZuJJw.png"/></div></div></figure><p id="1b08" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以在A1 devnet explorer上查找事务或已部署的合同:</p><div class="nz oa gp gr ob oc"><a href="https://explorer-devnet-algorand-rollup.a1.milkomeda.com/address/0x39013492b1bC84D9dF64d79e67D99f71F71BDA8B" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">合同0x 39013492 B1 BC 84d 9 df 64d 79 e 67d 99 f 71 f 71 BDA 8 b—A1 Explorer</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">在Milkomeda上查看0x 39013492 B1 BC 84d 9 df 64d 79 e 67d 99 f 71 f 71 BDA 8 b的帐户余额、交易和其他数据</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">explorer-devnet-algorand-rollup.a1.milkomeda.com</p></div></div></div></a></div><p id="53b8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，为了与契约进行交互，我们可以调用retrieve函数来获取存储的值，用“store”函数更改该值，然后再次检索该值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="e6c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">输出…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/fc09e2d15ce8a7daee936e6e2db3edce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ou537mdxQ_HpdK42sXXk4g.png"/></div></div></figure><p id="f4a7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢阅读！</p><p id="e499" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">敬请关注更多内容。</p></div></div>    
</body>
</html>