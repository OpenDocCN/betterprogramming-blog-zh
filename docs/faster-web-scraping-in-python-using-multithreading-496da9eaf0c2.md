# 使用这个 Python 库将您的网页抓取速度提高 10 倍

> 原文：<https://betterprogramming.pub/faster-web-scraping-in-python-using-multithreading-496da9eaf0c2>

## 使用多线程在 Python 中实现更快的 web 抓取

![](img/9b6d4b4b43b6a6580876888be55f79d6.png)

来源: [Undraw](https://undraw.co/search)

你有没有因为网页抓取速度太慢而烦恼过？你有很多网站要刮吗？是的，你不是一个人。

在数据科学过程中，我们都需要数据集。但事情不可能进展顺利。许多数据集的格式都不清晰。在某些情况下，我们需要从互联网上提取。

网络抓取是提取数据集的完美方式。我们可以使用编程语言自动提取数据集，而不是在电子表格上手动输入。

但是有一个问题。刮削过程相当缓慢。如果我们不优化它，它可能需要几个小时到几天的时间来抓取大量的网站。那么我们能做什么呢？这篇文章将告诉你如何做。

在本文中，我将向您展示如何使用多线程来提高 Python 中 web 抓取的速度。我们将使用一个名为`concurrent.futures`的库来完成这个过程。

通过这种方法，我们可以根据数据集的大小将 web 抓取过程提高 10 倍。

当我们使用小数据集时，你可能看不到好处。但是如果你在大数据集上使用它，你会看到好处。事不宜迟，我们开始吧！

# 什么是多线程？

为了理解多线程，我们必须理解这些术语。这些术语是异步和线程。

异步(async)是同时运行许多任务的一种方式。与异步相反的是同步，任务应该按顺序运行。

为了以异步的方式运行任务，线程来帮忙。线程是操作系统中最小的部分。

有了这个东西，计算过程就可以完成了。一台计算机可以由多个线程组成。因此，多线程应运而生。

`concurrent.futures`库允许您在 async away 上运行作业。因此，您可以比以往更快地解决任务。

在抓取过程中，我们对许多链接应用一个函数。我们可以假设这些数据是相互独立的。因此，我们可以将数据分成块。从那里，这些块将被放入所有可用的线程中。

# 履行

现在我们知道了多线程的概念。现在让我们进入实现阶段。

## 源头

对于这篇文章，我们将尝试从一个名为 FBRef.com**的网站收集数据。FBRef 是一个汇编足球(英式足球)统计数据的网站。**

该网站包含许多联赛的数据，从英超联赛到职业足球大联盟。除此之外，我们可以捕捉球队或球员水平的数据。

## 问题是

对于这个问题，我们希望提取球员姓名等数据，以及重定向到球员信息和统计数据的链接。

> 请记住。我不会教你如何刮一个网站。相反，我只向您演示如何应用多线程处理。

## 初始代码

最初，我们有一个类似这样的代码:

在这段代码中，我们使用循环来提取玩家的名字和链接。使用它的原因是没有一个单独的页面来收集所有球员的名字。

这就是问题所在。我们必须打开许多包含数据的页面。因为我们一次打开一页，这个过程变得非常慢。有了代码，任务在 15 分 29 秒内完成。

> 有了代码，任务在 15 分 29 秒内完成。

从这个问题出发，`concurrent.futures`库来帮助我们。

## 多线程管道

从上一节中，我们可以看到刮擦过程相当缓慢。为了加快进程，我们可以使用多线程的概念来解决问题。

我们将使用来自`concurrent.futures`库中的一个名为`ThreadPoolExecutor`的对象。

应用多线程的蓝图如下所示:

我们需要实现三个部分。首先，我们需要导入库。第二，我们实现了这个函数，它是用来抓取数据的。最后，运行多线程。

## 并发期货的代码

那么我们如何将多线程应用到我们的初始函数中呢？代码如下所示:

现在我们有了密码。看起来差不多吧？您只需将前面的代码包装到一个函数中，并添加 ThreadPoolExecutor 对象来将函数映射到数据块中。正如我之前提到的，螺纹可以加速刮削过程。但是有多快呢？

在我的例子中，代码在 72 秒内完成了任务。这几乎比之前的代码快了 12 倍！想象一下。如果你有超过十万个链接，你可以从中节省很多时间。

我得到了另一个案例，我刮网站的链接数量。最初，完成这项任务的估计时间约为 65 小时。

有了多线程，我可以在 6 小时内完成这项工作！

看看我节省了多少时间！有了节省下来的时间，我们可以做任何我们喜欢的事情。

> 代码在 72 秒内完成了任务。这几乎比之前的代码快了 12 倍！

# 结束语

干得好！现在，您已经学习了如何在 Python 中实现多线程来加速您的 web 抓取过程。通过使用它，我们可以将任何任务的速度提高 10 倍。

我希望这个概念能解决你在网页抓取过程中的问题。因此，您可以利用节省下来的时间专注于解决任何任务。或者也许你可以用来看你喜欢的电视剧，哈哈。

如果你想要完整的笔记本，你可以看看这个[链接](https://jovian.ai/khalidmeister/multithreading-fbref)。

谢谢你看我的文章！