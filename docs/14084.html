<html>
<head>
<title>Animating Fonts in Jetpack Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jetpack合成中的动画字体</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/animating-fonts-in-jetpack-compose-15ba183b6d4f?source=collection_archive---------4-----------------------#2022-11-03">https://betterprogramming.pub/animating-fonts-in-jetpack-compose-15ba183b6d4f?source=collection_archive---------4-----------------------#2022-11-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ec10" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何在Jetpack Compose中轻松制作不同字体之间的动画</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/40fcf7cbe27dd795faeb049ba496e5ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*R17VJO0IBeWVQwVV.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="642d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Jetpack Compose提供了许多不同的动画助手功能。我们可以很容易地动画浮动，颜色，密度像素等。这些辅助函数通常是这样调用的:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="d127" class="lz ma it lv b gy mb mc l md me">val animatedColor by animateColorAsState(  <br/>    targetValue = color,  <br/>    animationSpec = tween(durationMillis = 300, easing = LinearEasing)  <br/>)</span></pre><p id="10eb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">函数返回一个状态对象，我们可以简单地在我们的composable中监听它。我们必须传入一个<code class="fe mf mg mh lv b">targetState</code>。在这种情况下，<code class="fe mf mg mh lv b">targetState</code>是我们想要制作动画的颜色。我们还可以传入一个<code class="fe mf mg mh lv b">animationSpec</code>来控制动画的时间和行为。这部分是可选的，默认为<code class="fe mf mg mh lv b">spring</code>T5。</p><p id="99af" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我们将创建一个助手函数，我们可以使用它来轻松地在不同的<code class="fe mf mg mh lv b">TextStyles</code>之间制作动画。</p><h1 id="a681" class="mi ma it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">Lerp函数</h1><p id="cdfd" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">设置我们的助手函数的关键是一个<code class="fe mf mg mh lv b">lerp </code>函数。简单地说，<code class="fe mf mg mh lv b">lerp</code>函数接受两个值——一个起点和一个终点——并根据从0到1的浮点数在这两个值之间进行动画处理。有了这个功能，我们可以在起点和终点之间制作动画。</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="9230" class="lz ma it lv b gy mb mc l md me">fun lerp(start: Int, end: Int, fraction: Float): Int<br/>// lerp(0, 100, .71f) will return 71</span></pre><p id="34d0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Jetpack Compose有几个lerp函数，包括一个用于<code class="fe mf mg mh lv b">TextStyle</code>的函数。看起来是这样的:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="a99a" class="lz ma it lv b gy mb mc l md me">fun lerp(start: TextStyle, stop: TextStyle, fraction: Float): TextStyle</span></pre><p id="3083" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">并且可以这样使用:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="82fb" class="lz ma it lv b gy mb mc l md me">lerp(previousTextStyle, nextTextStyle, fraction)</span></pre><p id="9071" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用这个函数和一个浮动动画将会得到一个很酷的文本动画。我们可以这样写:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/f86e27fa019a4d5a9cb846f7361c7e5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*N_dKlUpi41tejAvwJTXNRw.gif"/></div></figure><p id="6ce2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要使用lerp函数，我们需要设置一个从0到1的浮动动画。我们使用<code class="fe mf mg mh lv b">Animatable</code>来做这件事。我们还需要使用来自浮动动画的值来获取当前的<code class="fe mf mg mh lv b">TextStyle</code>。</p><p id="6d3b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个方法提供了一个很好的文本动画，但是我们为一个动画创造了很多开销。必须为每个动画手动创建一个<code class="fe mf mg mh lv b">Animatable</code>，随着我们添加更多的动画，代码会变得更加复杂。</p><h1 id="fb35" class="mi ma it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">作为状态动画</h1><p id="88e3" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">解决这种复杂性的方法是创建一个函数来为我们处理这个问题，并给我们一些额外的灵活性。前面，我们看到了一个“作为状态动画”函数的例子。现在，我们将创建自己的应用程序，如下所示:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="f4fb" class="lz ma it lv b gy mb mc l md me">val animatedTextStyle by animateTextStyleAsState(  <br/>    targetState = textStyle,  <br/>    animationSpec = tween(durationMillis = 300, easing = LinearEasing)  <br/>)</span></pre><p id="b66e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe mf mg mh lv b">animateTextStyleAsState</code>函数将处理<code class="fe mf mg mh lv b">Animatable</code>的创建，并跟踪当前<code class="fe mf mg mh lv b">TextStyle</code>的状态。最终，它返回一个我们可以在函数中监听和使用的状态对象。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="0bda" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该函数接受与默认Jetpack Compose函数类似的参数，但是我们可以用其他定制元素来扩展它。我们有<code class="fe mf mg mh lv b">targetValue</code>来定义我们想要动画的文本样式。<code class="fe mf mg mh lv b">animationSpec</code>用于指定所需的动画。还有一个<code class="fe mf mg mh lv b">finishedListener</code>，以防万一，我们希望在动画完成时得到通知。</p><p id="71d7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用这个函数，我们可以制作一个稍微复杂一点的例子，在更多的文本样式之间制作动画。除了拥有更多不增加复杂性的动画之外，我们还获得了可中断的动画。我们不需要担心不和谐的动画变化。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/14deba01356463b512910aeab3bbbb5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Ms6RGokWGMpEAPoYEoxUvQ.gif"/></div></figure><p id="acff" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从这里，我们可以添加更多的文本样式，并在它们之间制作动画，从而轻松地制作出酷酷的效果。例如，在改变字体的同时在多种随机字体之间制作动画，以重新创建“Loki”标题序列动画。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/980c7a4c75e974f4f6a83c0239373dcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*5MfAqpdViys0zkIxHAq5pg.gif"/></div></figure><p id="6661" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在compose中制作动画元素的辅助函数可以节省大量时间和代码。这不仅仅局限于颜色和字体。让我在<a class="ae nh" href="https://twitter.com/sinasamaki" rel="noopener ugc nofollow" target="_blank">推特</a>上知道你用这个做了什么。</p><p id="cf2b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读，祝你好运！</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><p id="752f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="np">原载于2022年11月3日</em><a class="ae nh" href="https://www.sinasamaki.com/animating-fonts-in-jetpack-compose/" rel="noopener ugc nofollow" target="_blank"><em class="np">https://www.sinasamaki.com</em></a><em class="np">。</em></p></div></div>    
</body>
</html>