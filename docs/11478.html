<html>
<head>
<title>Applying DevOps to API Development for APIOps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将DevOps应用于APIOps的API开发</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/applying-devops-to-api-development-for-apiops-21e2e605333e?source=collection_archive---------10-----------------------#2022-03-23">https://betterprogramming.pub/applying-devops-to-api-development-for-apiops-21e2e605333e?source=collection_archive---------10-----------------------#2022-03-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="db79" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">DevOps + GitOps = APIOps</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9752f8939e71856cc8a7c0a85b470826.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2tBaVCG4TjB8MGfm38Q2ig.jpeg"/></div></div></figure><p id="c27b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在与客户建立短期和长期目标的过程中，我的重点是在麦肯锡三地平线模型中建立地平线二和地平线三目标。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lo"><img src="../Images/6dda25dd5e6f3a6383f6e24f9b50415b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p1aySgxefoxK2UqsaBkfJQ.png"/></div></div></figure><p id="03ec" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于那些不了解这个框架的人来说，horizons和horizons主要关注新的和下一代的特性和功能。在这个项目中，我最优先考虑的是采用一个<a class="ae ln" href="https://konghq.com/learning-center/api-gateway/?utm_source=guest&amp;utm_medium=devspotlight&amp;utm_campaign=community" rel="noopener ugc nofollow" target="_blank"> API网关</a>。</p><p id="e27e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">基于我对<a class="ae ln" href="https://konghq.com/kong/?utm_source=guest&amp;utm_medium=devspotlight&amp;utm_campaign=community" rel="noopener ugc nofollow" target="_blank"> Kong Gateway </a>的现有了解，我注意到了“<a class="ae ln" href="https://konghq.com/blog/what-is-apiops/?utm_source=guest&amp;utm_medium=devspotlight&amp;utm_campaign=community" rel="noopener ugc nofollow" target="_blank"> APIOps:贯穿API生命周期的端到端自动化</a>”。这是我第一次看到术语“APIOps”，我需要了解更多—尤其是对于我作为复杂服务层的技术架构师的角色。</p><p id="b280" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我的观点是APIOps可以总结如下:</p><ol class=""><li id="9bee" class="lp lq iq kt b ku kv kx ky la lr le ls li lt lm lu lv lw lx bi translated">API ops =<a class="ae ln" href="https://en.wikipedia.org/wiki/DevOps" rel="noopener ugc nofollow" target="_blank">devo PS</a>+<a class="ae ln" href="https://www.gitops.tech/" rel="noopener ugc nofollow" target="_blank">GitOps</a>应用于微服务层。</li><li id="082d" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm lu lv lw lx bi translated">大量利用规范，如OpenAPI，在流程早期定义API。</li><li id="0e46" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm lu lv lw lx bi translated">从头到尾缩短了周转时间。</li><li id="e877" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm lu lv lw lx bi translated">承诺随着原料药的生产质量将会提高。</li></ol><p id="095c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从特性团队的角度来看，我很快理解了APIOps如何帮助我的服务层开发团队取得积极的进展。然而，这个练习让我真的想了解采用API网关对DevOps有什么影响——因为DevOps是橡胶与道路相遇的地方。</p><p id="e519" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这个练习中，我需要从DevOps的角度来可视化APIOps，并关注这些核心概念:</p><ul class=""><li id="ef1c" class="lp lq iq kt b ku kv kx ky la lr le ls li lt lm md lv lw lx bi translated">设计和测试</li><li id="cff5" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm md lv lw lx bi translated">部署</li><li id="2374" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm md lv lw lx bi translated">维护</li></ul><h1 id="3385" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">建立设计</h1><p id="c7e8" class="pw-post-body-paragraph kr ks iq kt b ku mw jr kw kx mx ju kz la my lc ld le mz lg lh li na lk ll lm ij bi translated">2021年，我写了两篇文章，阐述了API网关可以为提供API消费的项目和团队带来的价值:</p><ul class=""><li id="ba86" class="lp lq iq kt b ku kv kx ky la lr le ls li lt lm md lv lw lx bi translated"><a class="ae ln" href="https://medium.com/nerd-for-tech/how-i-stopped-coding-repetitive-service-components-with-kong-1308be4000e3" rel="noopener">我如何用孔停止编写重复的服务组件</a></li><li id="0805" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm md lv lw lx bi translated"><a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/breaking-up-a-monolithic-database-with-kong-4a70f55d4f63">与孔一起破解单片数据库</a></li></ul><p id="8081" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">由于Kong Gateway是一个开源解决方案，我觉得将Kong的工具结合到我的探索中是理想的。事实上，孔为一份技术领导者名人录(思科、葛兰素史克、霍尼韦尔、PayPal、纳斯达克、三星)提供底层API技术，这进一步支持了我的决定。</p><p id="fa13" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们假设以下设计:</p><ol class=""><li id="2ae4" class="lp lq iq kt b ku kv kx ky la lr le ls li lt lm lu lv lw lx bi translated">使用<a class="ae ln" href="https://www.openapis.org/" rel="noopener ugc nofollow" target="_blank"> OpenAPI </a>在<a class="ae ln" href="https://insomnia.rest/" rel="noopener ugc nofollow" target="_blank">失眠</a>中引入标准驱动的契约。</li><li id="bba6" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm lu lv lw lx bi translated"><a class="ae ln" href="https://konghq.com/kong-konnect/?utm_source=guest&amp;utm_medium=devspotlight&amp;utm_campaign=community" rel="noopener ugc nofollow" target="_blank"> Kong Konnect </a>将作为API消费者的服务中心。</li><li id="9c84" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm lu lv lw lx bi translated">Kong Gateway将集中跨微服务共享的公共方面。</li></ol><p id="ad9e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">考虑下面的例子，它记录了我的方法:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/17df6341e7b8729dc46341ece18f3d63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IFjCCF8BcZudfyS2fhWT2w.png"/></div></div></figure><p id="ce57" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这个流程中，API开发人员最初将专注于使用标准驱动的OpenAPI规范创建他们的设计。这一步发生在编写任何程序代码之前。由此产生的工件作为一个契约存在于服务中心——可供寻求API服务的人发现。</p><p id="0994" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当选择使用已发布的API时，对该API的每个请求都要通过API网关来利用任何共享组件(如身份验证、日志记录、速率限制和安全性)。最后，请求被转发到专门处理独特功能的激光聚焦微服务。</p><p id="5400" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这种方法的结果是，从API开始到API管理，将会存在一个完全干燥的(不要重复自己)设计。这对创作API的服务层开发人员和使用这些API的特性团队开发人员来说都是非常好的。但是补充这些团队的DevOps工程师呢？</p><h1 id="8b3b" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">采用APIOps和DevOps</h1><p id="5739" class="pw-post-body-paragraph kr ks iq kt b ku mw jr kw kx mx ju kz la my lc ld le mz lg lh li na lk ll lm ij bi translated">当引入新的API设计时，对DevOps工程师的影响常常被遗忘。DevOps工程师需要理解和支持这种设计，以保证项目的成功。</p><p id="0830" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">幸运的是，Kong的工具可以利用声明性方法，将服务和配置的所有方面存储在基于git的存储库中。成功的设计不止于此，因为测试、部署和维护方面与声明式设计一样重要。</p><p id="5d7f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们深入了解一下Kong是如何让将DevOps应用于API开发变得简单的。</p><h1 id="f374" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">设计和测试</h1><p id="3edb" class="pw-post-body-paragraph kr ks iq kt b ku mw jr kw kx mx ju kz la my lc ld le mz lg lh li na lk ll lm ij bi translated">失眠症不仅仅是一个HTTP客户端和一个OpenAPI (YAML)编辑器。在部署到Kong Konnect之前，它可以验证、调试和测试新的API设计。因此，对于服务层开发人员来说，失眠症应该被认为与他们用于创建实际服务API的主要IDE一样重要。</p><p id="51c4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">API设计者可以将以下流程应用于失眠症，以引入基于标准的服务:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/926acf4dd5be5266939edec3c89047fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KFVLuR7SmZz7yptgs2R6bw.png"/></div></div></figure><p id="f1bf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Kong的<a class="ae ln" href="https://konghq.com/blog/api-specifications/?utm_source=guest&amp;utm_medium=devspotlight&amp;utm_campaign=community" rel="noopener ugc nofollow" target="_blank">Speed-Review API Specifications with nimbness</a>文章贯穿了这个流程的每一步，包括使用nimbness将代码推送到Kong Konnect ServiceHub。</p><h1 id="eeb4" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">部署</h1><p id="b425" class="pw-post-body-paragraph kr ks iq kt b ku mw jr kw kx mx ju kz la my lc ld le mz lg lh li na lk ll lm ij bi translated">从DevOps的角度来看，通过利用<a class="ae ln" href="https://github.com/Kong/insomnia/tree/develop/packages/insomnia-inso" rel="noopener ugc nofollow" target="_blank"> Inso </a>，这些相同的工件可以成为自动化持续集成(CI)处理的一部分，这是失眠症的命令行版本。</p><p id="126a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下图展示了Inso如何作为驻留在基于git的存储库中的CI管道的一部分来执行自动化任务:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/82ac2e4966d2810769aa5a4d783ea820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YqLiDfY1eXpG2rqaSaRTFQ.png"/></div></div></figure><p id="2b33" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://docs.insomnia.rest/inso-cli/introduction" rel="noopener ugc nofollow" target="_blank">Inso CLI简介</a>文档是快速了解Inso与现有CI/CD管道配合使用的绝佳方式。</p><h1 id="423f" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">维持</h1><p id="fdc8" class="pw-post-body-paragraph kr ks iq kt b ku mw jr kw kx mx ju kz la my lc ld le mz lg lh li na lk ll lm ij bi translated">在API网关级别，Kong提供了一个<a class="ae ln" href="https://docs.konghq.com/deck/#documentation" rel="noopener ugc nofollow" target="_blank">声明式配置工具</a>(称为decK)来更新配置，包括跨运行在Kong Gateway上的所有已发布API的横切更新。甲板流程如下图所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/a927e46b221c724fc72293108f13075a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YDrrVHRYBsuhmsHaAo7mTw.png"/></div></div></figure><p id="4d06" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">来自Kong的<a class="ae ln" href="https://konghq.com/blog/automating-developer-pipeline-apiops/?utm_source=guest&amp;utm_medium=devspotlight&amp;utm_campaign=community" rel="noopener ugc nofollow" target="_blank">用APIOps </a>自动化您的开发人员管道文章提供了使用CI/CD管道维护API的逐步过程。</p><p id="ed0e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如，在一个API发布后，我们可以使用decK来修改跨API的通用速率限制组件，以满足业务需求。上面的流程允许对现有的配置进行分析，可以对其进行更新，然后部署回处理组件的API网关。除了进行修改所需的基于git的更新之外，剩余的流程流可以是CI/CD管道的一部分。</p><h1 id="bfbd" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">结论</h1><p id="cf35" class="pw-post-body-paragraph kr ks iq kt b ku mw jr kw kx mx ju kz la my lc ld le mz lg lh li na lk ll lm ij bi translated">DevOps是橡胶与路面相遇的地方。这意味着功能团队和服务层开发人员可以试验和设计解决方案。但是，如果开发人员无法成功部署这些解决方案，它们很容易失败。</p><p id="564f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Kong的团队不仅提供了与API开发的每个阶段进行交互的优秀产品套件，还提供了验证、部署和维护这些API的必要工具。更令人印象深刻的是在声明性和基于git的级别上运行的能力，坚持DevOps工程师继续推荐的管道驱动方法。</p><p id="2c37" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从去年开始，我一直努力按照下面的使命宣言生活，我觉得它可以适用于任何IT专业人士:</p><blockquote class="ne nf ng"><p id="1e8d" class="kr ks nh kt b ku kv jr kw kx ky ju kz ni lb lc ld nj lf lg lh nk lj lk ll lm ij bi translated"><em class="iq">“将您的时间集中在提供扩展您知识产权价值的特性/功能上。将框架、产品和服务用于其他一切。”</em></p><p id="2b1e" class="kr ks nh kt b ku kv jr kw kx ky ju kz ni lb lc ld nj lf lg lh nk lj lk ll lm ij bi translated"><em class="iq">——j·维斯特</em></p></blockquote><p id="416b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过承诺使APIOps成为一个现实的选择，Kong无疑坚持了我的个人使命宣言。自Kong产品套件问世以来，声明式设计和DevOps集成一直是重点关注的领域。</p><p id="c5a4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">未能认识到这些不成文的需求可能会产生诸如陈旧的API规范、对手工过程的依赖以及API生命周期中的重复等后果。任何选择的解决方案都应该确保在整个API生命周期中考虑到这些挑战。</p><p id="a3d6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">祝你今天过得愉快！</p></div></div>    
</body>
</html>