<html>
<head>
<title>Shred Your First-Person-Shooter Opponents With AI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用AI粉碎你的第一人称射击对手</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/shred-your-first-person-shooter-opponents-with-ai-390b60046997?source=collection_archive---------11-----------------------#2019-08-23">https://betterprogramming.pub/shred-your-first-person-shooter-opponents-with-ai-390b60046997?source=collection_archive---------11-----------------------#2019-08-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4d0e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用对象检测来提前发现敌人</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/de21f264f1494db29564a7f4ec5ff045.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wa5K9uVn0QFRoiwBMQ4iTA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">虚幻竞技场预阿尔法</p></figure><p id="b77e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">早在1958年，一位物理学家创造了第一个视频游戏:一种让你控制虚拟世界实体的娱乐形式。从那以后，游戏加快了步伐，给我们提供了可以启发人生的平台和故事。从在《超级马里奥》中从怪物的愤怒中拯救公主，到在《极品飞车》中以非法速度驾驶汽车，从在《使命召唤》中经历激烈的战争般的情况，到成为一名职业杀手，几百万行代码可以给计算机注入魔力，产生一个沉浸式环境，等待你去探索。</p><p id="9c3f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">站住。故事并不是游戏提供的唯一好东西。游戏可以让你在世界各地的高手面前测试你的勇气，并结交新朋友。也就是说，有时候你需要消灭你的对手才能达到神一般的表现。作为一名深度学习工程师，我总是努力让机器变得更智能，利用它们拥有的精度和计算能力。“那么，为什么不让我们的游戏机做更多的事情呢?”深藏在我邪恶想法地牢里的双角暗黑破坏神说道。:)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lu"><img src="../Images/eaf3f7122b321b1cfc66ee05a7f77109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4YDgidNs05YJ9XvBpdBmqA.jpeg"/></div></div></figure><p id="e6bf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对象检测是检测视觉数据中不同实体的概念。对象检测器在GPU上加速。游戏是视觉数据，也运行在GPU上。看看我是如何制定精确的总体规划的？(穆哈哈。)</p><p id="44b5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这篇文章中，我将带你设置YOLOv3物体检测器，并把你喜欢的FPS游戏放入其中。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="87cb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">全系统设置</h1><p id="d3cf" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">我只支持Linux，特别是Ubuntu 18.04以上的版本，因为Windows太烂了！继续在您的机器上安装以下软件。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="c003" class="ne md it na b gy nf ng l nh ni">sudo apt update -y &amp;&amp; sudo apt -y upgrade<br/>sudo apt install python3.7 python3.7-dev<br/>sudo apt install python3-protobuf<br/>sudo apt install ffmpeg</span></pre><p id="e20d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们主要使用Python来编写代码。是的，这很简单，不需要我使用C语言，也不需要我想象自己缺乏其他语言的知识。(开玩笑，我是c处的pro)</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bd56" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">用于GPU加速的CUDA和CUDNN</h1><p id="92b6" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">如果你有一个NVIDIA GPU，并希望提高推理速度，我建议你继续设置CUDA和CUDNN以提高性能。</p><h2 id="a78d" class="ne md it bd me nj nk dn mi nl nm dp mm lh nn no mo ll np nq mq lp nr ns ms nt bi translated"><strong class="ak">删除任何以前版本的CUDA </strong></h2><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="59e4" class="ne md it na b gy nf ng l nh ni">sudo apt --purge remove "cublas*" "cuda*"<br/>sudo apt --purge remove "nvidia*"</span></pre><h2 id="54f9" class="ne md it bd me nj nk dn mi nl nm dp mm lh nn no mo ll np nq mq lp nr ns ms nt bi translated"><strong class="ak">为Ubuntu 18.04下载并安装CUDA 10.0】</strong></h2><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="bc76" class="ne md it na b gy nf ng l nh ni"># Download the deb file installer<br/>wget https://developer.nvidia.com/compute/cuda/10.0/Prod/local_installers/cuda-repo-ubuntu1804-10-0-local-10.0.130-410.48_1.0-1_amd64 -O cuda-repo-ubuntu1804-10-0-local-10.0.130-410.48_1.0-1_amd64.deb</span><span id="5345" class="ne md it na b gy nu ng l nh ni"># Run the installer<br/>sudo dpkg -i cuda-repo-ubuntu1804-10-0-local-10.0.130-410.48_1.0-1_amd64.deb</span><span id="23b5" class="ne md it na b gy nu ng l nh ni"># Add Public Key<br/>sudo apt-key add /var/cuda-repo-ubuntu1804-10-0-local-10.0.130-410.48/7fa2af80.pub</span><span id="2744" class="ne md it na b gy nu ng l nh ni"># Perform an update<br/>sudo apt update</span><span id="5095" class="ne md it na b gy nu ng l nh ni"># Install CUDA<br/>sudo apt install cuda</span></pre><h2 id="9aed" class="ne md it bd me nj nk dn mi nl nm dp mm lh nn no mo ll np nq mq lp nr ns ms nt bi translated"><strong class="ak">为CUDA 10.0下载并安装cud nn 7 . 5 . 0</strong></h2><p id="3778" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">前往<a class="ae nv" href="https://developer.nvidia.com/rdp/cudnn-archive" rel="noopener ugc nofollow" target="_blank"> cudnn-archive </a>下载Ubuntu 18.04的运行时库、开发者库和代码示例。</p><p id="4482" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意:您将需要一个帐户；如果你没有，就注册吧。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="43e0" class="ne md it na b gy nf ng l nh ni">sudo dpkg -i libcudnn7_7.5.0.56-1+cuda10.0_amd64.deb <br/>sudo dpkg -i libcudnn7-dev_7.5.0.56-1+cuda10.0_amd64.deb <br/>sudo dpkg -i libcudnn7-doc_7.5.0.56-1+cuda10.0_amd64.deb</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9932" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">使用虚拟环境进行Python依赖</strong></h1><p id="e02a" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">建议使用虚拟环境来安装依赖项。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="8f44" class="ne md it na b gy nf ng l nh ni">pip3 install virtualenv virtualenvwrapper</span></pre><p id="9daa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，如果使用Bash shell，在<code class="fe nw nx ny na b">.bashrc</code>中设置环境变量；如果使用Zsh shell，在<code class="fe nw nx ny na b">.zshrc</code>中设置环境变量。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="4c53" class="ne md it na b gy nf ng l nh ni"># For ZSH<br/>echo '# virtualenv and virtualenvwrapper' &gt;&gt; .zshrc<br/>echo 'export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3' &gt;&gt; .zshrc<br/>echo 'export WORKON_HOME=$HOME/.virtualenvs' &gt;&gt; .zshrc<br/>echo 'source ~/.local/bin/virtualenvwrapper.sh' &gt;&gt; .zshrc # For Python 3.7 only</span><span id="d4d5" class="ne md it na b gy nu ng l nh ni"># For BASH<br/>echo '# virtualenv and virtualenvwrapper' &gt;&gt; .bashrc<br/>echo 'export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3' &gt;&gt; .bashrc<br/>echo 'export WORKON_HOME=$HOME/.virtualenvs' &gt;&gt; .bashrc<br/>echo 'source ~/.local/bin/virtualenvwrapper.sh' &gt;&gt; .bashrc # For Python 3.7 only</span></pre><p id="91b1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，运行下面的命令，或者启动一个新的终端。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="3262" class="ne md it na b gy nf ng l nh ni">source ~/.zshrc # For ZSH<br/>source ~/.bashrc # For BASH</span></pre><p id="b930" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要创建虚拟环境，请使用以下内容:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="35fb" class="ne md it na b gy nf ng l nh ni">mkvirtualenv &lt;name_of_env&gt;</span></pre><p id="2cda" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要启用/禁用您的虚拟环境:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="c62c" class="ne md it na b gy nf ng l nh ni"># To enable<br/>workon &lt;name_of_env&gt;<br/># To disable<br/>deactivate</span></pre><p id="a96a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">专业提示:要删除您的虚拟环境，请使用以下命令。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="7a10" class="ne md it na b gy nf ng l nh ni">rmvirtualenv &lt;name_of_env&gt; # Be as sure as you can...</span></pre><h2 id="fcf5" class="ne md it bd me nj nk dn mi nl nm dp mm lh nn no mo ll np nq mq lp nr ns ms nt bi translated"><strong class="ak">安装依赖关系</strong></h2><p id="d16c" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">本节列出了您必须安装的依赖项。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="4c02" class="ne md it na b gy nf ng l nh ni">absl-py==0.7.1<br/>astor==0.8.0<br/>certifi==2019.6.16<br/>chardet==3.0.4<br/>Click==7.0<br/>Flask==1.1.1<br/>gast==0.2.2<br/>google-pasta==0.1.7<br/>grpcio==1.23.0<br/>gunicorn==19.9.0<br/>h5py==2.9.0<br/>idna==2.8<br/>itsdangerous==1.1.0<br/>Jinja2==2.10.1<br/>Keras-Applications==1.0.8<br/>Keras-Preprocessing==1.1.0<br/>Markdown==3.1.1<br/>MarkupSafe==1.1.1<br/>mss==2.0.22<br/>numpy==1.17.0<br/>opencv-python==4.1.0.25<br/>Pillow==6.1.0<br/>protobuf==3.9.1<br/>requests==2.22.0<br/>six==1.12.0<br/>tensorboard==1.14.0<br/>tensorflow-estimator==1.14.0<br/>tensorflow-gpu==1.14.0<br/>termcolor==1.1.0<br/>urllib3==1.25.3<br/>Werkzeug==0.15.5<br/>wrapt==1.11.2</span></pre><p id="8a5c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">运行此命令安装所有依赖项:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="8d07" class="ne md it na b gy nf ng l nh ni"># Activate the virtual environment<br/>workon &lt;env-you-created&gt;<br/>## After you run the command, look for a change in the prompt.<br/>## The nameof the env must be displayed.</span><span id="f1ef" class="ne md it na b gy nu ng l nh ni"># Now, run the following to install the dependencies<br/>pip3 install -r requirements.txt</span></pre><p id="5278" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">也可以自己安装。参考上面的列表。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="eab8" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">让代码运行起来！</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/918a49113d9d5d0a39a9138ce134a732.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*MreZCD78XZTi9cAuTpwmdQ.gif"/></div></div></figure><p id="dc68" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你还没有Git，那就安装一些代码管理工具吧！</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="5058" class="ne md it na b gy nf ng l nh ni">sudo apt install git </span></pre><p id="130f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">克隆以下存储库:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="a967" class="ne md it na b gy nf ng l nh ni">git clone <a class="ae nv" href="https://github.com/aj-ames/ShredFPSOpponents.git" rel="noopener ugc nofollow" target="_blank">https://github.com/aj-ames/ShredFPSOpponents.git</a></span></pre><p id="e596" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我使用Git大型文件系统来存储YOLOv3模型。你需要下面的包来访问它。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="ca67" class="ne md it na b gy nf ng l nh ni">sudo apt install git-lfs</span></pre><p id="7955" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要获取模型，请运行以下命令:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="3923" class="ne md it na b gy nf ng l nh ni">cd path_to_repo<br/>git lfs pull</span></pre><p id="44f5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">厉害！现在你准备好摇滚了！我使用了服务器-客户端架构进行推理。要启动推理服务器，请使用以下命令:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="6d4f" class="ne md it na b gy nf ng l nh ni">gunicorn inferenceserver:flaskserver --bind=127.0.0.1 --threads=8 --timeout=100</span></pre><p id="e296" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要启动将您的屏幕作为输入并执行推理的客户端，请使用以下命令:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="9756" class="ne md it na b gy nf ng l nh ni">python3 ingame_detector.py</span></pre><p id="398c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">就是这样。这将把你屏幕的一部分作为神经网络的输入。要改变作为检测输入的屏幕分辨率，改变<code class="fe nw nx ny na b">args.py</code>中的<code class="fe nw nx ny na b">mon</code>变量。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="970e" class="ne md it na b gy nf ng l nh ni">mon = {'top': 0, 'left': 0, 'width': 800, 'height': 600}</span></pre><p id="ba5c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">无论你选择什么游戏，一定要将它设置在<code class="fe nw nx ny na b">Window Mode</code>中，并相应地调整你的屏幕，或者使用多个显示器来获得更身临其境的体验。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lu"><img src="../Images/725f048fdd1eabbef0c6f056547324c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gSSoaeY7zijbDYmTwaTt8w.png"/></div></div></figure><p id="3ec8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是我在虚幻竞技场上彻底消灭敌人的视频！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="ebfc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">去吧！代码是你能获得的最强大的武器。征服这个游戏并获得新的等级:)去用高射炮粉碎他们！</p></div></div>    
</body>
</html>