<html>
<head>
<title>3 Ways To Create Your Own API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建自己的API的3种方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/3-ways-to-create-your-own-api-f99f7fb739b1?source=collection_archive---------0-----------------------#2021-02-13">https://betterprogramming.pub/3-ways-to-create-your-own-api-f99f7fb739b1?source=collection_archive---------0-----------------------#2021-02-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3f2d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">从头开始创建API的三种初学者友好的方法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fe429b99158d412bb1bef0e651d3cbea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7ZuKANl9b0DuDdvL"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@lorenzoherrera?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Lorenzo Herrera </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="ae23" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">API无处不在，它们在现代技术中扮演着至关重要的角色。从支付平台到股市更新，如今一切都是API，学习自己创建一个API是成为全栈开发人员的基本步骤。</p><p id="c19c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">注意:如果你不确定什么是API，我有</em> <a class="ae kv" href="https://www.elletownsend.co.uk/blog/posts/top-5-apis/" rel="noopener ugc nofollow" target="_blank"> <em class="ls">一个方便的介绍给你</em> </a> <em class="ls">。</em></p><p id="3124" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我将讨论三种初学者友好的创建API的方法:</p><ol class=""><li id="dd08" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">JSON服务器</li><li id="eab1" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">Node.js和Express</li><li id="3f76" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">Python和Flask RESTful</li></ol><p id="d7d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每种方法都有不同的用例，并使用不同的技术。你想和哪一个一起去由你决定。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="337c" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">JSON服务器</h1><p id="9215" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated"><em class="ls">要求:</em> <a class="ae kv" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> <em class="ls">节点安装</em> </a></p><p id="65bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JSON Server是一个可以通过NPM获得的包，它允许我们仅使用一个JSON文件创建一个带有CRUD(创建、读取、更新、删除)操作的REST API。</p><p id="7ab5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们需要通过在终端中运行以下命令来安装该包(全局地):</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="c01c" class="nq mp iq nm b gy nr ns l nt nu">npm install -g json-server</span></pre><p id="b33e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们需要一些数据来服务。用一些数据创建一个<code class="fe nv nw nx nm b">db.json</code>文件(这可以是您希望API提供的任何内容):</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="a3a3" class="nq mp iq nm b gy nr ns l nt nu">{ <br/>  "dogs": [<br/>    { "id": 1,<br/>      "breed": "pembroke-welsh-corgi",<br/>      "name": "Charles"<br/>    },<br/>    { "id": 2,<br/>      "breed": "pug",<br/>      "name": "cheese"<br/>    },<br/>    { "id": 3,<br/>      "breed": "dachshund",<br/>      "name": "ralph"<br/>    }<br/>  ],<br/>  "cats": [<br/>    { "id": 1,<br/>      "breed": "ragdoll",<br/>      "name": "mimi"<br/>    },<br/>    { "id": 2,<br/>      "breed": "siamese",<br/>      "name": "mocha"<br/>    },<br/>    { "id": 3,<br/>      "breed": "russian-blue",<br/>      "name": "bean"<br/>    }<br/>  ]<br/>}</span></pre><p id="2481" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了启动并运行我们的服务器，请运行:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="c649" class="nq mp iq nm b gy nr ns l nt nu">json-server --watch db.json --port 8080</span></pre><p id="3921" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们现在向<a class="ae kv" href="http://localhost:8080/dogs/1" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/dogs/1</a>发出请求，我们应该得到:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="4b0d" class="nq mp iq nm b gy nr ns l nt nu">{ "id": 1, "breed": "pembroke-welsh-corgi", "name": "charles" }</span></pre><p id="11c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JSON服务器也将自动创建以下HTTP端点:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="0a20" class="nq mp iq nm b gy nr ns l nt nu">GET /dogs <br/>GET /dogs/{id} <br/>GET /cats <br/>GET /cats/{id} </span><span id="4895" class="nq mp iq nm b gy ny ns l nt nu">POST /dogs <br/>POST /cats </span><span id="9915" class="nq mp iq nm b gy ny ns l nt nu">PUT /dogs/{id} <br/>PUT /cats/{id} </span><span id="1e19" class="nq mp iq nm b gy ny ns l nt nu">PATCH /dogs/{id} <br/>PATCH /cats/{id} </span><span id="7cf5" class="nq mp iq nm b gy ny ns l nt nu">DELETE /dogs/{id} <br/>DELETE /cats/{id}</span></pre><p id="595c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用JSON Server，我们可以通过向请求添加查询参数来过滤结果。如果我们打<a class="ae kv" href="http://localhost:8080/cats?breed=siamese" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080/cats？breed=siamese </a>，它应该返回数据中符合给定标准的所有cat对象的数组。</p><p id="1485" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们也可以用<code class="fe nv nw nx nm b">p</code>参数做全文搜索:<a class="ae kv" href="http://localhost:8080/cats?q=m" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080/cats？q=m </a>。</p><p id="9d65" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所有这些信息以及更多信息都可以在JSON服务器GitHub repo中找到。</p><p id="6407" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想更深入地了解这一点，并找出如何部署您的JSON服务器API，我推荐<a class="ae kv" href="https://www.youtube.com/watch?v=FLnxgSZ0DG4&amp;feature=youtu.be" rel="noopener ugc nofollow" target="_blank"> Ania Kubow的YouTube教程</a>关于如何创建和部署模拟API。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="cf77" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">Node.js和Express.js</h1><p id="edcd" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated"><em class="ls">要求:</em> <a class="ae kv" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> <em class="ls">节点安装</em> </a></p><p id="6747" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于这种方法，我们将创建一个新的快速应用程序。为此，创建一个名为<code class="fe nv nw nx nm b">node-api</code>的项目文件夹，并在其中创建一个<code class="fe nv nw nx nm b">server.js</code>文件。完成后，在我们的<code class="fe nv nw nx nm b">node-api</code>文件夹中打开一个新的终端并运行:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="6d2f" class="nq mp iq nm b gy nr ns l nt nu">npm init</span></pre><p id="fbe5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将初始化我们的项目并创建一个<code class="fe nv nw nx nm b">package.json</code>文件(对于设置问题，只需按回车键并保留所有内容为空/默认即可)。</p><p id="a5ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们需要安装Express！我们可以通过运行以下命令来实现NPM:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="fec7" class="nq mp iq nm b gy nr ns l nt nu">npm install express</span></pre><p id="dc8a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的<code class="fe nv nw nx nm b">server.js</code>文件中，我们现在可以如下创建我们的服务器:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="40a3" class="nq mp iq nm b gy nr ns l nt nu">var express = require("express");</span><span id="87ed" class="nq mp iq nm b gy ny ns l nt nu">var app = express();</span><span id="397e" class="nq mp iq nm b gy ny ns l nt nu">app.listen(8080, () =&gt; {<br/> console.log("Server running on port 8080!");<br/>});</span></pre><p id="e1a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要的东西都用快递准备好了。现在我们将为我们的请求创建端点。在本教程中，我们将仅为GET请求创建端点。</p><p id="a2b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以使用两个包含数据对象的常量变量将数据添加到文件中，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="845b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe nv nw nx nm b">var app = express();</code>之后，让我们添加一些函数来处理GET请求，用“200 OK”状态代码发送回所请求资源上的所有数据:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="0753" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了通过ID获取特定的条目，我们必须使用<code class="fe nv nw nx nm b">:id</code> URL参数来搜索我们的数组，以找到匹配给定ID的条目。在我们的标准GET请求下，添加以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="780f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在可以访问<a class="ae kv" href="http://localhost:3000/posts/1" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/dogs/</a>和<a class="ae kv" href="http://localhost:3000/posts/1" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/dogs/1</a>或<a class="ae kv" href="http://localhost:3000/posts/1" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/cats/</a>(等等。)并看到我们的API正常工作。我们已经创建了一个非常简单的节点API！</p><p id="f5d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想进一步开发它，并为你的节点API添加更多的端点和功能，我推荐<a class="ae kv" href="https://medium.com/javascript-in-plain-english/create-rest-api-web-services-using-node-js-and-express-js-with-crud-operations-ff790d6ae030" rel="noopener"> Ankit Maheshwari的CRUD Rest API教程</a>用简单的英语从JavaScript开始。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="df4e" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">Python和Flask RESTful</h1><p id="3417" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated"><em class="ls">需求:</em><a class="ae kv" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank"><em class="ls">Python 3</em></a><em class="ls">和PIP安装</em></p><p id="3e00" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们需要通过运行以下命令来安装<a class="ae kv" href="https://flask-restful.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Flask-RESTful </a>:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="4296" class="nq mp iq nm b gy nr ns l nt nu">pip install flask-restful</span></pre><p id="62eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://flask-restful.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Flask RESTful </a>是一个Python模块，它扩展了Python Flask模块的功能，帮助我们快速构建REST APIs。</p><p id="6161" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，在一个新的Python项目文件中，创建一个<code class="fe nv nw nx nm b">api.py</code>文件，并在顶部导入以下内容:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="680a" class="nq mp iq nm b gy nr ns l nt nu">from flask import Flask<br/>from flask_restful import Api, Resource</span></pre><p id="1e4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们必须创建一个<code class="fe nv nw nx nm b">Flask</code>类的实例，并将其传递给一个<code class="fe nv nw nx nm b">Flask</code> RESTful API的实例:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="8ca0" class="nq mp iq nm b gy nr ns l nt nu">app = Flask(__name__)<br/>api = Api(app)</span></pre><p id="166f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，让我们创建一些列表来存储我们的数据:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="7e64" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在来看看更复杂的东西。根据<a class="ae kv" href="https://flask-restful.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Flask RESTful文档</a>，我们需要创建资源类来定义我们的HTTP方法。我们必须为猫/狗列表创建一个资源，为单个猫/狗创建一个资源(按ID):</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="6605" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了将这些资源添加为我们的API的端点，我们将使用<code class="fe nv nw nx nm b">add_resource()</code>方法并传入我们的资源和我们希望从其访问这些资源的各个端点:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="1762" class="nq mp iq nm b gy nr ns l nt nu">api.add_resource(DogList, '/dogs')<br/>api.add_resource(Dog, '/dogs/&lt;int:dog_id&gt;')<br/><br/>api.add_resource(CatList, '/cats')<br/>api.add_resource(Cat, '/cats/&lt;int:cat_id&gt;')</span></pre><p id="4321" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们在文件的末尾添加这一行:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="170f" class="nq mp iq nm b gy nr ns l nt nu">if __name__ == '__main__':<br/>    app.run(debug=True)</span></pre><p id="0711" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，我们在运行代码时启用Flask调试模式，这样当发生更改时它会重新加载(像nodemon一样),并在出错时给出更详细的错误消息。</p><p id="8976" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在如果你尝试<a class="ae kv" href="http://localhost:5000/dogs" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/dogs</a>、<a class="ae kv" href="http://localhost:5000/dogs" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/</a>cats、<a class="ae kv" href="http://localhost:5000/dogs" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/dogs/1</a>等。，您将看到您的API完美地工作！</p><p id="fa0c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想进一步开发你的Python Flask API项目，我推荐<a class="ae kv" href="https://rapidapi.com/blog/how-to-build-an-api-in-python/" rel="noopener ugc nofollow" target="_blank"> RapidAPI的Python APIs指南</a>。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="14e6" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">结论</h1><p id="38a6" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">现在你已经知道了:REST APIs有三种不同的方式！我希望这篇文章能帮助你开始开发自己的API。</p><p id="8c2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这三种方法的所有示例文件都可以在GitHub 上找到<a class="ae kv" href="https://github.com/elletownsend/create-an-api" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>