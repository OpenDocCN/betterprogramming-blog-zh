<html>
<head>
<title>Understand How a Blockchain Peer to Peer Network Works</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解区块链对等网络如何工作</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/understand-how-a-blockchain-peer-to-peer-network-works-565ecd34c6d2?source=collection_archive---------11-----------------------#2022-04-25">https://betterprogramming.pub/understand-how-a-blockchain-peer-to-peer-network-works-565ecd34c6d2?source=collection_archive---------11-----------------------#2022-04-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3e71" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">区块链如何使用p2p网络来解决重复消费问题以及排除金融机构？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f60852cd6257372fc298d72f2e99cdd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hv8bYLIvcO4DC3Noy-Ut_w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">区块链p2p网|图片来源:<a class="ae ky" href="https://www.stockvault.net/user/profile/139626" rel="noopener ugc nofollow" target="_blank">杰克·莫雷</a></p></figure><p id="59b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，您将看到加密货币P2P网络是如何工作的。您将通过将P2P网络分为五层来探索不同的区块链政策，以及一般的P2P网络。</p><h1 id="35ce" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">涵盖的主题</h1><ol class=""><li id="a4ee" class="mn mo it lb b lc mp lf mq li mr lm ms lq mt lu mu mv mw mx bi translated">共识层</li><li id="18f4" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">矿工层</li><li id="e7de" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">传播层</li><li id="7391" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">语义层</li><li id="a0d8" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">应用层</li></ol><h1 id="ceda" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">共识机制</h1><p id="b829" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">共识机制是网络即使在出现故障的情况下也能正常运行所需的协议。它需要能够在分布式p2p网络中对网络数据达成一致。</p><p id="1381" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在传统的中央系统(如银行)中，有一台主计算机被委托处理交易分类账。显然，银行可以信任自己的计算机，因此，作为负责主计算机的安全性和完整性的一方，银行没有任何问题。</p><p id="f360" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您处理共享分类帐的不受信任的对等方时，需要制定规则来确保分类帐的安全性和完整性，以防止重复支出和其他潜在的黑客攻击。这些规则和协议被称为<em class="ng">共识机制</em>。</p><p id="c86b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">P2P网络使用互联网连接在全球范围内工作，<br/>能够提供一个平台来实现全球分布式共识机制。在加密货币中，共识/协议是关于区块是否有效。如果某个块有效，该块将被添加到区块链中。如果一个块无效，它将被拒绝添加到区块链。</p><p id="e029" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是共识政策发挥作用的地方。网络中的大多数对等体<br/>在其经验证的最佳区块链中持有相同的块，并且遵循相同的规则(共识规则)；这就是区块链确保安全的方式。</p><p id="c9b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着区块链越来越受欢迎，许多共识机制政策应运而生。第一个是由比特币创造的，其他许多是为了解决其他机制中存在的问题而建立的。我们来讨论几个比较流行的:</p><ol class=""><li id="3736" class="mn mo it lb b lc ld lf lg li nh lm ni lq nj lu mu mv mw mx bi translated"><strong class="lb iu">工作证明(PoW): </strong>它是第一个也是最受欢迎的机制；由比特币和以太坊使用，这两种货币是撰写本文时最流行的加密货币。PoW是通过拥有一个矿工网络并向矿工提出一个数学问题来实现的。当矿工解决了一个问题，他们会得到一种加密货币的奖励。报酬是所做“工作”的证明，这就是这个名字的由来。在PoW上，随着难度的增加，意味着利润的减少。利润越少，开采硬币的动力就越小。</li><li id="c0af" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated"><strong class="lb iu">股权证明(PoS): </strong>它是由Sunny King和Scott Nadal在2012年创建的，作为解决前面提到的PoW cons的替代方案。PoS依赖于一个对等体持有多少硬币。对等体需要下注它想要挖掘的硬币的数量。我们不再拥有权力，而是拥有权力，而且不依赖于能源消耗，因为没有难题需要解决。PoS提供了类似于比特币PoW的散列块方案，但它限制了对等点的数量。这提供了所需的安全性，同时降低了成本和功耗。网络费用被提供给同伴，而不是像在PoW中那样对解决数学难题给予奖励。PoS通过对等体持有的股份大小来确定哪个对等体做工作。这以更少的能量和更低的成本实现了分布式共识。DDOS攻击和欺诈仍然是可能的。然而，攻击者不能交易比他们下注更多的数字货币。否则，他们会失去存款，因此遭受攻击的几率会降低。请记住，攻击者可以用其他人的硬币做赌注，不会在意丢失这些硬币，因为它们不是他们的，所以仍然有DDOS攻击的方法。以下是一些流行的使用PoS的加密货币硬币列表:</li></ol><ul class=""><li id="f96f" class="mn mo it lb b lc ld lf lg li nh lm ni lq nj lu nk mv mw mx bi translated"><strong class="lb iu"> <em class="ng">破折号</em> </strong>:你需要1000个单位做主节点。它的年回报率约为7.5%。</li><li id="5277" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu nk mv mw mx bi translated"><strong class="lb iu"> <em class="ng"> NEO </em> </strong>:押注钱包的年回报率约为5.5%。没必要挖矿；你只要拿着硬币就能得到气币。</li><li id="526d" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu nk mv mw mx bi translated"><strong class="lb iu"> <em class="ng">其他</em> </strong> : LSK，PIVX，NAV，RDD，比恩，琳达，DCR，NEBL，OK，STRAT。</li></ul><p id="4951" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.<strong class="lb iu">委托股权证明(DPoS): </strong>委托股权证明是Dan Larimer发明的一种普查算法方法，在<a class="ae ky" href="https://github.com/EOSIO/Documentation/blob/master/TechnicalWhitePaper.md" rel="noopener ugc nofollow" target="_blank">白皮书</a>中讨论过。DPoS旨在通过提供民主而不是选择矿工的随机过程来改善PoS cons。</p><p id="db73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">DPoS通过将采矿过程分为两部分来实现技术民主。</p><ul class=""><li id="5d3c" class="mn mo it lb b lc ld lf lg li nh lm ni lq nj lu nk mv mw mx bi translated"><strong class="lb iu">选举</strong>:选举一组区块生产者时，只有21个区块生产者，而不是像PoW那样无限。</li><li id="d51a" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu nk mv mw mx bi translated"><strong class="lb iu">安排生产</strong>:21个积木生产商每3秒钟轮流生产一个积木。</li></ul><p id="d3a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">选举过程提供了一种技术民主，并确保利益相关者处于控制之中，因为如果一个网络出现故障，大的利益相关者损失最大。</p><p id="f4ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个块生产者轮流生产一个块，最长的可能链被采用(就像在PoW中一样)。</p><h1 id="60c7" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">开采层</strong></h1><p id="1177" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">矿工们在网络上做的幕后工作可以被描述为竞争区块链的工作，这实际上是在做网络簿记。对于比特币和大多数利用PoW的硬币来说，每个对等体都需要持有完整的公共账本，其中包含所有交易的记录。PoW miners基于计算能力和池，而其他网络会考虑其他因素。</p><p id="c641" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于比特币，交易必须由矿工验证，矿工检查账本，确保发送者没有转移其不拥有的资金，然后才将交易添加到账本中。最后，为了确保免受黑客攻击，矿工们将这些交易密封在多层计算工作之后，这需要黑客完成太多的工作。这项服务的回报是向矿工提供比特币作为费用。</p><h1 id="a94b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">传播层</strong></h1><p id="9370" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">传播层负责决定如何在P2P网络上传输共享的分类帐和数据块。这一层在区块链白皮书中有详细描述。</p><p id="771c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个对等体可以向网络上的其他节点传输新的事务。这种架构允许节点间接通信。例如，您可以发送一个影响两个钱包的交易，而每个钱包不直接连接到另一个钱包。</p><p id="d9ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">任何接收到它以前没有见过的有效事务的节点将立即把它转发给它所连接的所有其它节点。这是一种被称为<em class="ng">泛滥</em>的繁殖技术。因此，交易在P2P网络中快速传播，在几秒钟内到达大部分节点。</p><h1 id="1d40" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">语义层</strong></h1><p id="47d8" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">语义层负责新的块如何与先前的块相关联，并提供用于验证共识规则的协议。</p><p id="a807" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，根据连接的可信机器数量、赌注、速度、散列能力等，存在不同类型的共识机制，但它们的工作方式与新块如何与以前的块相关联以确保安全性类似。每个区块链都有规格。在这一层，交易发生在账户之间转移硬币/代币的地方。区块链的共识在他们有效的最佳区块链中拥有相同的区块，并遵循相同的规则(共识规则)。这就是区块链如何确保安全。</p><h1 id="7849" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">应用层</strong></h1><p id="ff87" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">这一层负责在区块链之上部署应用程序。例如，dapps、智能合约、交易所和提供区块链信息的网站都是建立在区块链之上的应用程序。</p><p id="8f84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于应用层，区块链需要公开API。不同的区块链是相似的，因为它们都为客户端提供了与网络通信的方式。</p><p id="725e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比特币提供了一个完整的节点，目前约为27 GB，包括一个完全强制执行的节点和区块链的所有规则。这对于挖掘以及确保您运行的连接到应用层的对等体与最新的块同步是必需的。</p><p id="4d10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些完整节点有助于P2P网络的功能，并有助于支持网络及其安全性。</p><h1 id="36de" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">摘要</h1><p id="7965" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">在本文中，我介绍了区块链P2P网络以及构成网络的不同层:共识层、挖掘层、传播层、语义层和应用层。您还了解了对等网络核心逻辑和工作证明(PoW)、利益证明(PoS)以及委托利益证明区块链(DPOS)。</p></div></div>    
</body>
</html>