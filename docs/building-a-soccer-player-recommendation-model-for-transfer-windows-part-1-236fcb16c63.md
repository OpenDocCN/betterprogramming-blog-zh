# 构建足球运动员推荐模型(第 1 部分)

> 原文：<https://betterprogramming.pub/building-a-soccer-player-recommendation-model-for-transfer-windows-part-1-236fcb16c63>

## 帮助球队在转会窗口做出积极的改变

![](img/83d2e8000d854fbbc1fb6b0b1a21df7f.png)

在 [Unsplash](https://unsplash.com/s/photos/soccer?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上由 [KAKUDMI](https://unsplash.com/@kakudmi?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 拍摄的照片

## **背景信息**

目前，签下一名新的足球运动员很大程度上是基于知名度、进球率，有时只是炒作。

围绕世界级球员建立一支球队是每个人都想要的，但有时，如果他们的自然位置已经被另一位超级巨星占据，即使是世界级球员也必须适应新的位置。

像莱昂内尔·梅西、路易斯·苏亚雷斯和安托万·格里兹曼都是超级巨星，但在进攻的三分之一区很难建立化学反应。这部分是因为格里兹曼需要适应一个比他在以前的俱乐部更广阔的位置。在他以前的俱乐部，格里兹曼会是攻击的焦点，而现在，在巴塞罗那，他不是。相反，当苏亚雷斯受伤时，他踢边路或者前锋。

这不仅仅限于格里兹曼，其他足球运动员也是如此。希尔文·洛扎诺是目前那不勒斯最昂贵的签约，为 4650 万美元。意大利的权威人士对这次转会持严厉的批评态度，因为他没能像在老东家那样产生影响。

我们还可以看看内马尔创纪录的 2.63 亿美元的巴黎圣日耳曼转会费。他没能对他的团队的整体表现产生影响。内马尔的情况可能有点不同，因为有一些与他的足球能力无关的问题阻碍了他的表现，但重点是一样的。

作为俱乐部经理或所有者，我们如何才能知道一名球员会对他们的球队有很大的帮助？仅仅因为球员有很大的天赋并不一定使他们完美契合。

在巴萨的情况下，如果一个天生打左边锋的人来代替内马尔，就没有必要给格里兹曼施加这么大的压力，让他迅速适应一个不是他天生角色的新角色。他仍然可以做好这份工作，但是他不如在以前的俱乐部那样有效率了。从俱乐部经理的角度来看，看到像格里兹曼这样以 1.35 亿美元转会的球员没有取得预期的成绩令人沮丧。

同样重要的是，玩家对不能产生相似的结果和花很长时间去适应感到沮丧。适应期越长，球迷、专家、俱乐部老板，甚至球员本人就会越不耐烦。事实上，球员需要时间来适应一个新的角色，而经理需要尽快看到积极的结果，如果球员不在他的自然位置上，这是一个很难实现的平衡。

# **接近**

随着球队的弱点被发现，转会窗口提供了一个机会来寻找可以填补所需角色的球员。

我将使用无监督聚类算法来推荐具有相似比赛风格的球员，以补充球队的整体弱点。玩家活动热图图像和团队活动热图图像将是我们的主要数据来源。

我需要的数据并不容易以我需要的格式获得来构建我们的模型。相反，我们将从 StatsBomb 获取开放数据，以生成我们自己的图像数据集进行处理。

由于数据的限制，这个作品将集中于生成玩家在单个游戏过程中运动的图像。这些图像将成为我们新的数据集，并将用于这个项目的下一阶段——也是这个系列的下一阶段。

# **数据收集和清理**

Statsbomb 有一个公共 repo，定期更新特定足球比赛的公共数据。我收集的数据最初是 227 万行，一旦汇总在一起。考虑到甚至在分析数据之前就需要进行数据清理，这就需要处理大量的数据。

经过重新评估，我决定关注巴塞罗那队，因为大约 875，000 行与巴塞罗那比赛有关。

数据清理包括将存储为 JSON 文件中 Python 字典等价物的信息解包。一些数据包含嵌套字典，数据争论成为项目中非常耗时的部分。创建函数是为了使过程自动化。

此外，我将范围缩小到这篇文章的基本概念证明案例。当扩大到每个球员和整体数据的更大数量的比赛时，这个过程将变得更加顺利。

# **可视化**

最后，为了让我们看到每五分钟游戏中玩家的活动密度，gif 被制作出来。以下是巴萨三名最具影响力球员的 GIF 图片:内马尔(现已转会巴黎圣日耳曼)、苏亚雷斯和梅西。

**内马尔:**

![](img/03c940ca6afef346bd97933d3520a81c.png)

**苏亚雷斯:**

![](img/24d3d98b688a32dc0a49a6bbf211e36e.png)

**梅西:**

![](img/fcab1de733c7f0a355d7f50c26401191.png)

**注意:**如果它们在任何时间点被替换或没有任何活动，热图将显示为空。

# **前进**

当缩放以包括玩家在整个赛季的活动密度时，该玩家的自然位置将被显示。

这是因为一场比赛不足以确定一个球员的自然位置。由于另一名球员的受伤或战术实验，一名球员可以在下一场比赛中打不同的位置。球员甚至可能因伤缺席几场比赛，所以一场比赛绝对不够。

在整个赛季中，我们能够通过改变我们在每个热图中包含的内容来确定哪些位置得到了有效和持续的发挥。

如果你有兴趣在这方面合作，或者有兴趣跟随我的旅程，当我完成这个问题的下一阶段时，我会写更多。现在，享受令人敬畏的 gif！