<html>
<head>
<title>isEmpty vs. count == 0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">isEmpty vs. count == 0</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/strings-comparison-isempty-vs-count-0-be80d701901b?source=collection_archive---------2-----------------------#2019-05-25">https://betterprogramming.pub/strings-comparison-isempty-vs-count-0-be80d701901b?source=collection_archive---------2-----------------------#2019-05-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c403" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在Swift中比较字符串大小似乎很简单，但有不同的方法可以做到这一点</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ee4f327067c7a437f3d0b283f75e1f4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jDdCa7rKPNSRNa0bxhk6pQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/photos/yUOLdcAdVpg?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Linh Pham </a>在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="9464" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">苹果说用<code class="fe lv lw lx ly b">isEmpty</code>比用<code class="fe lv lw lx ly b">count</code>好。<em class="lz"> </em>我们来过一遍原因。</p><h1 id="5e46" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">订单比较</h1><p id="5bc0" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">就性能而言，<code class="fe lv lw lx ly b">isEmpty</code> <em class="lz"> </em>在O(1)中执行，而<code class="fe lv lw lx ly b">count</code>在O(N)中执行，其中N是字符串的字符数。</p><p id="7820" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在短字符串中，您不会注意到任何执行时间问题，但是当处理长字符串时，差别(以秒计)是相当大的。我做了一个实验，计算了使用不同大小的字符串执行<code class="fe lv lw lx ly b">count</code> <em class="lz"> </em>和<code class="fe lv lw lx ly b">isEmpty</code> <em class="lz"> </em>所需的时间。结果显示，虽然<code class="fe lv lw lx ly b">isEmpty</code>显示几乎恒定的值，但是当字符串变长时，<code class="fe lv lw lx ly b">count</code>会显著增加执行时间。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/d71ed03f120ec5c2028cab788d57f98b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BZoJn27FhLamiUJAxPiIZQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">实验结果</p></figure><h1 id="748e" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated"><strong class="ak">可读性</strong></h1><p id="555f" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">就代码的可读性而言，<code class="fe lv lw lx ly b">isEmpty</code> <em class="lz"> </em>比<code class="fe lv lw lx ly b">count</code>可读性强得多。让我们来看看下面这段代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="6d76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们把代码翻译成文字，当使用<code class="fe lv lw lx ly b">isEmpty</code>时你可以很容易地读到:“如果文本是空的，做点什么”。然而，“如果文本计数等于零，做点什么”就不那么可读了——你需要思考这是什么意思。<br/>基本上，<code class="fe lv lw lx ly b">isEmpty</code>为布尔型问题提供布尔型答案。</p><h1 id="8fcf" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">选项</h1><p id="290c" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">当字符串是可选类型时，我们需要考虑一些事情。<br/>为了检查一个<em class="lz">可选</em>字符串<code class="fe lv lw lx ly b">isEmpty</code> <em class="lz"> </em>你不能以一种简单的方式来做:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="bed0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您需要选择以下方法之一:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="4ee5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当使用带有可选字符串的<code class="fe lv lw lx ly b">count</code>时，你不需要有任何特别的考虑——这是<code class="fe lv lw lx ly b">count</code>的一个优势。</p><p id="2cbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就个人而言，我更喜欢使用第三种或第四种方法，这取决于我是否知道字符串为零。</p><p id="28cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意不要使用<em class="lz"> == nil </em>来检查你的字符串是否为空——那只会告诉你这个字符串存在，所以空字符串将通过这个检查。</p><h1 id="0eb2" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">定义</h1><p id="a539" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">苹果定义，<code class="fe lv lw lx ly b">isEmpty</code>是“表示一个字符串是否没有字符的布尔值，<code class="fe lv lw lx ly b">count</code>是“一个字符串的字符数”。</p><p id="ab89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">count</code>统计从索引0到索引N的元素数量，所以表现为O(N)。但是，检查一个字符串<code class="fe lv lw lx ly b">isEmpty</code> <em class="lz"> </em>是否只是访问一个布尔值，那么O(1)。</p><h1 id="0960" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">良好实践</h1><p id="c48c" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">SwiftLint 提供了两个有用的规则:</p><ul class=""><li id="7502" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated"><a class="ae ky" href="https://github.com/realm/SwiftLint/blob/master/Rules.md#empty-count" rel="noopener ugc nofollow" target="_blank"> empty_count </a>:通过比较<code class="fe lv lw lx ly b">count</code>与零来检查<code class="fe lv lw lx ly b">isEmpty</code>的使用情况。</li><li id="c56a" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><a class="ae ky" href="https://github.com/realm/SwiftLint/blob/master/Rules.md#empty-string" rel="noopener ugc nofollow" target="_blank"> empty_string </a>:检查<code class="fe lv lw lx ly b">isEmpty</code>的用法，而不是将字符串与空字符串文字进行比较。</li></ul><p id="9356" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这两个规则都是可选的，您需要在您的<code class="fe lv lw lx ly b">.swiftlint.yml </code>文件中指定它们。然后，您可以配置是否要在Xcode中抛出警告或编译错误。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/e097c346ff12d5812bdfbe4b3928cf93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UOQql9WE_ATvnB3P54y4xA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SwiftLint: empty_count和empty_string</p></figure><h1 id="b18d" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">摘要</h1><p id="29c2" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">经过分析，很清楚为什么苹果推荐使用<code class="fe lv lw lx ly b">isEmpty</code>而不是<code class="fe lv lw lx ly b">count:</code></p><ul class=""><li id="efb5" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">性能:<code class="fe lv lw lx ly b">isEmpty</code>比<code class="fe lv lw lx ly b">count</code>更有性能:O(1) vs O(N)</li><li id="e052" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">可读性:<code class="fe lv lw lx ly b">isEmpty</code>比<code class="fe lv lw lx ly b">count</code>更容易阅读</li><li id="c057" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">可选方案:使用可选方案时，<code class="fe lv lw lx ly b">count</code>的优势并不明显，所以建议使用<code class="fe lv lw lx ly b">isEmpty</code>。</li><li id="5935" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">良好实践:SwiftLint提供了有用的规则来检查您的代码是否遵循了这一良好实践。</li></ul></div></div>    
</body>
</html>