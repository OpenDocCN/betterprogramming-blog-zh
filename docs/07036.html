<html>
<head>
<title>Upgrade Create React App-Based Projects to Version 4 (CRA 4)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将基于Create React App的项目升级到版本4 (CRA 4)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/upgrade-create-react-app-based-projects-to-version-4-cra-4-d7962aee11a6?source=collection_archive---------0-----------------------#2020-12-01">https://betterprogramming.pub/upgrade-create-react-app-based-projects-to-version-4-cra-4-d7962aee11a6?source=collection_archive---------0-----------------------#2020-12-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="18de" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于如何将基于Create React App的项目升级到最新版本的深入指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/543eb62307625a09352b68c0d55dfde0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kByzus8FV_fzwR25ebCIYA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="760c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://medium.com/better-programming/10-fun-facts-about-create-react-app-eb7124aa3785" rel="noopener">创建React应用</a>是搭建React项目的快捷方式。可以通过命令<code class="fe lv lw lx ly b">npx create-react-app &lt;project name&gt;</code>轻松生成。然后您就有了React项目的最新包和执行环境。方便有效。</p><p id="a568" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">新鲜的东西都很棒。</p><p id="9ccd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">随着时间的推移，会有新版本的Create React应用程序具有新的功能和改进。然后呢？</p><p id="8eeb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我们将使用Create React App 4 (CRA 4)作为一个示例，来浏览升级基于Create React App的项目的过程。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="c23b" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">升级反应脚本</h1><p id="3491" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated"><a class="ae lu" href="https://create-react-app.dev/docs/updating-to-new-releases/" rel="noopener ugc nofollow" target="_blank">官方文档</a>建议运行以下命令进行升级:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="1233" class="nh mh it ly b gy ni nj l nk nl">npm install --save react-scripts@latest</span></pre><p id="fe82" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe lv lw lx ly b">react-scripts</code>包括脚本和配置。通过运行这个命令，我们将<code class="fe lv lw lx ly b">react-scripts</code>从版本<code class="fe lv lw lx ly b">3.4.3</code>顺利升级到版本<code class="fe lv lw lx ly b">4.0.0</code>。</p><p id="783f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是<code class="fe lv lw lx ly b">package.json</code>的区别:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/9ea2a7fcebf2f23e5be7623d71c4911a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DmvZq0EqxzzxSx6VvbkqNg.png"/></div></div></figure><p id="efdb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">是的，我们升级了<code class="fe lv lw lx ly b">react-scripts</code>的版本。然而，如果将<code class="fe lv lw lx ly b">package.json</code>与新安装的Create React App 4的<code class="fe lv lw lx ly b">package.json</code>进行比较，还有更多事情需要注意:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/858b37d89caf8592352bdbc5a70e0afe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D-OkYS4Vt6DouOrEpl31XQ.png"/></div></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="919c" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">升级React版本</h1><p id="3055" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">最明显的区别是React版本。<code class="fe lv lw lx ly b">react</code>和<code class="fe lv lw lx ly b">react-scripts</code>保持<code class="fe lv lw lx ly b">^16.13.1</code>，而最新的Create React App则在<code class="fe lv lw lx ly b">^17.0.1</code>有。</p><p id="9588" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们必须手动更新<code class="fe lv lw lx ly b">package.json</code>的<a class="ae lu" href="https://medium.com/better-programming/package-jsons-dependencies-in-depth-a1f0637a3129" rel="noopener">依赖关系</a>中的React版本:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="a154" class="nh mh it ly b gy ni nj l nk nl">"dependencies": {<br/>  "react": "^17.0.1",<br/>  "react-dom": "^17.0.1",<br/>  ...<br/>}</span></pre><p id="7bd1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过执行<code class="fe lv lw lx ly b">npm i</code>安装React 17。</p><p id="9958" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们在另一篇文章的<a class="ae lu" href="https://medium.com/better-programming/6-steps-to-create-a-multi-version-react-application-1c3e5b5df7e9" rel="noopener">中介绍了React 17。这个版本没有新特性，但是<code class="fe lv lw lx ly b">react@17.0.1</code>提供了延迟加载和深度集成多个版本的React的能力。这个<em class="nn">无功能</em>比任何功能都大，这是一个允许现代新应用与现有传统应用共存的范例的垫脚石。</a></p><p id="2d56" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">除了这一根本性的变化，还有其他变化包括:</p><ul class=""><li id="2b89" class="no np it la b lb lc le lf lh nq ll nr lp ns lt nt nu nv nw bi translated">React 16在底层的<code class="fe lv lw lx ly b">document</code>级别附加事件处理程序。React 17将它们附加到呈现React树的根DOM容器:</li></ul><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="716c" class="nh mh it ly b gy ni nj l nk nl">const rootNode = document.getElementById('root');<br/>ReactDOM.render(&lt;App /&gt;, rootNode);</span></pre><p id="c17b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有了这一改变，将由一个版本管理的React树嵌入到由不同版本的React管理的树中是安全的。它还可以更容易地将React嵌入到用其他技术构建的应用程序中。</p><ul class=""><li id="dce8" class="no np it la b lb lc le lf lh nq ll nr lp ns lt nt nu nv nw bi translated">React提供了对新JSX变换的支持。有了新的转换，使用JSX不需要导入React。它还编译包大小略有减少的输出。</li></ul><p id="b26d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个例子来自官方文档:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="0c63" class="nh mh it ly b gy ni nj l nk nl">import React from 'react';<br/><br/>function App() {<br/>  return &lt;h1&gt;Hello World&lt;/h1&gt;;<br/>}</span></pre><p id="a4eb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面的代码被转换为:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="170c" class="nh mh it ly b gy ni nj l nk nl">import React from 'react';<br/><br/>function App() {<br/>  return React.createElement('h1', null, 'Hello world');<br/>}</span></pre><p id="f459" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过新的转换，它变成了:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="999a" class="nh mh it ly b gy ni nj l nk nl">// Inserted by a compiler (don't import it yourself!)<br/>import {jsx as _jsx} from 'react/jsx-runtime';<br/><br/>function App() {<br/>  return _jsx('h1', { children: 'Hello world' });<br/>}</span></pre><p id="fc6e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe lv lw lx ly b">src/App.js</code>中的以下代码不再需要第1行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="9cd0" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">升级TypeScript版本</h1><p id="da71" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">如果使用TypeScript，可以通过运行以下命令来创建新项目:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="2bae" class="nh mh it ly b gy ni nj l nk nl">npx create-react-app --template typescript <!-- -->&lt;project name&gt;</span></pre><p id="51a0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是JavaScript的Create React App <code class="fe lv lw lx ly b">package.json</code>和TypeScript的Create React App <code class="fe lv lw lx ly b">package.json</code>的区别:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/5fab875afc49a28ab0354a24e4729e67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tDuS0pPLhkwKaY3uze9TDQ.png"/></div></div></figure><p id="1447" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">TypeScript支持4.1.0及更高版本中的新JSX变换。TypeScript的Create React应用程序中有一个未解决的bug:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="257f" class="nh mh it ly b gy ni nj l nk nl">TypeError: Cannot assign to read only property 'jsx' of object '#&lt;Object&gt;</span></pre><p id="f5fa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你得先去掉<code class="fe lv lw lx ly b">tsconfig.json</code>，然后执行<code class="fe lv lw lx ly b">npm start</code>。新生成的<code class="fe lv lw lx ly b">tsconfig.json</code>作品。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="880b" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">升级ESLint</h1><p id="7654" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">从<code class="fe lv lw lx ly b">react-scripts@3.4.3</code>到<code class="fe lv lw lx ly b">react-scripts@4.0.0</code>版本，ESLint从版本6更新到版本7。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/99a51b3a1a3d562624b5aeb102d0ba02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C7eDS9YEOlf91uo6DiOUkA.png"/></div></div></figure><p id="01b8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Jest和React测试库的新规则已经添加。通过升级<code class="fe lv lw lx ly b">react-scripts</code>执行<code class="fe lv lw lx ly b">package.json</code>中的ESLint配置。不需要额外的步骤。</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="bf9d" class="nh mh it ly b gy ni nj l nk nl">"eslintConfig": {<br/>  "extends": [<br/>    "react-app",<br/>    "react-app/jest"<br/>  ]<br/>},</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="e769" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">升级Jest和测试库</h1><p id="ac08" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">从<code class="fe lv lw lx ly b">react-scripts@3.4.3</code>到<code class="fe lv lw lx ly b">react-scripts@4.0.0</code>版本，Jest从24版本更新到26版本。不需要额外的步骤。</p><p id="e185" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，升级不包括升级测试库。我们必须在<code class="fe lv lw lx ly b">package.json</code>中手动进行更改:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="2d51" class="nh mh it ly b gy ni nj l nk nl">"dependencies": {<br/>  "<a class="ae lu" href="http://twitter.com/testing" rel="noopener ugc nofollow" target="_blank">@testing</a>-library/jest-dom": "^5.11.6",<br/>  "<a class="ae lu" href="http://twitter.com/testing" rel="noopener ugc nofollow" target="_blank">@testing</a>-library/react": "^11.2.2",<br/>  "<a class="ae lu" href="http://twitter.com/testing" rel="noopener ugc nofollow" target="_blank">@testing</a>-library/user-event": "^12.2.2",<br/>  ...<br/>}</span></pre><p id="b02d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过执行<code class="fe lv lw lx ly b">npm i</code>安装测试库包。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="fe97" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">采用快速刷新</h1><p id="e2fe" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated"><a class="ae lu" href="https://github.com/facebook/create-react-app/pull/8582" rel="noopener ugc nofollow" target="_blank">快速刷新</a>已取代React热加载器。它在热重装期间保留组件状态。</p><p id="7ed2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是改装过的<code class="fe lv lw lx ly b">src/App.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="5888" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们看到以下用户界面，并在输入字段中键入<code class="fe lv lw lx ly b">aaa</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/b79902294f2e3c647e49a2a341a83b5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*PrDijQ78FpIZXvW3by5Hjg.png"/></div></figure><p id="12db" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后在第8行，更改<code class="fe lv lw lx ly b">Random Text</code>并保存。<code class="fe lv lw lx ly b">aaa</code>的状态保持不变，与热重装无关。</p><p id="dfd7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">是不是很酷？</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="a7d0" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">PWA/工具箱改进</h1><p id="850b" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">创建React App 4开关到Workbox的InjectManifest插件。这允许对服务人员进行更多的控制。此GitHub页面提供了变更的详细信息。这是对PWAs的增强。</p><p id="881b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当比较每个<code class="fe lv lw lx ly b">src/index.js</code>时，我们看到<code class="fe lv lw lx ly b">serviceWorker</code>已被移除。PWA模板已被移至他们自己的<a class="ae lu" href="https://github.com/cra-template/pwa" rel="noopener ugc nofollow" target="_blank">库</a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/f7c6161b5a74f3cc889b8a187b994478.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gFW19NLTAa16e5ePJ8FRxg.png"/></div></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="0462" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">网络生命支持</h1><p id="3baf" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">从上面<code class="fe lv lw lx ly b">src/index.js</code>的对比中，我们也看到<code class="fe lv lw lx ly b">reportWebVitals</code>被加入。</p><p id="b4f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://github.com/GoogleChrome/web-vitals" rel="noopener ugc nofollow" target="_blank"> Web Vitals </a>是谷歌Chrome团队的一个库，旨在捕捉网页的用户体验。Create React App 4支持即时可用的Web生命体征。但是，对于升级后的项目，需要在<code class="fe lv lw lx ly b">package.json</code>中手动安装<code class="fe lv lw lx ly b">web-vitals</code>:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="ed3c" class="nh mh it ly b gy ni nj l nk nl">"dependencies": {<br/>  ...<br/>  "web-vitals": "^0.2.4"<br/>}</span></pre><p id="6912" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">添加完依赖关系后，执行<code class="fe lv lw lx ly b">npm i</code>。</p><p id="5d71" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是改装过的<code class="fe lv lw lx ly b">src/index.js</code>。第17行向<code class="fe lv lw lx ly b">console.log</code>函数发送报告:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="7294" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是控制台上显示的一些测量值:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/22f5d23e09bb1a7ad4a411ae24950c81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j8-UQDMrf6cFVxm2ZdrPNA.png"/></div></div></figure><p id="b39e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们已经在Chrome DevTools的<a class="ae lu" href="https://medium.com/better-programming/lighthouse-a-performance-and-optimization-tool-for-webpages-e0b4eeaef3e4" rel="noopener"> Lighthouse </a>上使用了这些指标。现在，Create React App 4提供了一个直接从应用程序测量它们的选项。</p><ul class=""><li id="187d" class="no np it la b lb lc le lf lh nq ll nr lp ns lt nt nu nv nw bi translated">到达第一个字节的时间(TTFB):它测量浏览器接收页面内容的第一个字节的时间。</li><li id="6af1" class="no np it la b lb od le oe lh of ll og lp oh lt nt nu nv nw bi translated">First Contentful Paint (FCP):它测量从页面开始加载到页面内容的任何部分呈现在屏幕上的时间。</li><li id="8301" class="no np it la b lb od le oe lh of ll og lp oh lt nt nu nv nw bi translated">累积布局偏移(CLS):它衡量视觉稳定性——页面上的元素是否以用户意想不到的方式移动，并可能干扰他们的交互。</li><li id="e4e3" class="no np it la b lb od le oe lh of ll og lp oh lt nt nu nv nw bi translated">最大内容绘制(LCP):它测量感知的加载速度，因为它标记了页面加载时间线中页面主要内容可能已经加载的点。</li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="587e" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="c0af" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">Create React App 4为我们提供了新的功能和性能改进。</p><p id="4e05" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您已有Create React App 3项目，请按照上述说明升级到Create React App 4。</p><p id="f427" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">目前，最新的Create React App在版本5，跟随<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/an-in-depth-guide-for-create-react-app-5-cra-5-b94b03c233f2">这篇文章</a>升级到Create React App 5。</p><p id="3623" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读。我希望这有所帮助。你可以在这里看到我的其他媒体出版物<a class="ae lu" href="https://medium.com/@jenniferfubook/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener"/>。</p></div></div>    
</body>
</html>