<html>
<head>
<title>Managing API Requests in React Native Using Axios</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Axios在React Native中管理API请求</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/managing-api-requests-http-https-in-react-native-using-axios-9ebf75cbca9b?source=collection_archive---------1-----------------------#2019-12-03">https://betterprogramming.pub/managing-api-requests-http-https-in-react-native-using-axios-9ebf75cbca9b?source=collection_archive---------1-----------------------#2019-12-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ae61" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解Axios的基础知识</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4873e3e5dcc3e6d01efb9a9d5b02ae00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wLi76DoyhYsxnjiaSTae4Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@verneho?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">凡尔纳何</a>在<a class="ae ky" href="https://unsplash.com/s/photos/build?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="c82f" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="35d3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Axios是一个基于promise的HTTP客户端，可以在浏览器和node.js环境中工作。它提供了一个API来处理XMLHttpRequests和节点的HTTP接口。除此之外，它还使用一个polyfill for ES6 new promise语法来包装请求。我们还可以拦截和取消请求，并且有内置的客户端保护来防止跨站点请求伪造。</p><p id="f682" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在React本地项目中使用它很简单！在本文中，我们将使用Axios来访问React本机应用程序中的通用HTTP或HTTPS API。我们首先向我们的项目添加Axios。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="a1bb" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">安装过程</h1><p id="b167" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">就像任何其他库一样，根据您使用的软件包管理器的模式，您可以选择这些命令中的任何一个来安装Axios:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="f811" class="nj la it nf b gy nk nl l nm nn"> yarn add axios<br/><br/> npm install axios --save</span></pre><p id="d770" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在进入主要部分之前，让我们复习一些基础知识。如果你是一个初学者，请仔细阅读这篇文章，因为这些是你应该如何在你的应用程序中进行API调用的一些基础知识。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="9c86" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">获取请求</h1><p id="46a1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">get方法用于执行GET请求。它有两个参数:端点和回调函数。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="e95b" class="nj la it nf b gy nk nl l nm nn">import React from 'react';<br/>import axios from 'axios';<br/><br/>export default class Requests extends React.Component {<br/>  state = {<br/>    nameList: []<br/>  }</span><span id="17c1" class="nj la it nf b gy no nl l nm nn">// make the GET request to fetch data from the URL then using promise function to handle response.</span><span id="d198" class="nj la it nf b gy no nl l nm nn">  componentDidMount() {<br/>    axios.get(`url`)<br/>      .then(res =&gt; {<br/>        const nameList = res.data;<br/>        this.setState({ nameList });<br/>      })<br/>  }<br/><br/>  render() {<br/>   const {nameList} = this.state;<br/>   return (<br/>      &lt;ul&gt;<br/>        { <br/>        nameList.map(user =&gt; &lt;li&gt;{user.name}&lt;/li&gt;)<br/>        }<br/>      &lt;/ul&gt;<br/>    )<br/>  }<br/>}</span></pre></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="f9f8" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">发布请求</h1><p id="44de" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">post方法是向服务器发送数据的另一种方式。它有三个参数:URL、要发布的数据和一个回调函数。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="15f3" class="nj la it nf b gy nk nl l nm nn">// Rest code is same as GET post</span><span id="3264" class="nj la it nf b gy no nl l nm nn">.post('access_token', {</span><span id="0ae1" class="nj la it nf b gy no nl l nm nn">// data to be sent<br/>  email : 'redjames@gmail.com" ,<br/>  password: '12346'<br/>})<br/>.then(response =&gt; {<br/>  if (response.data.status) {<br/>   console.log(response);<br/> } <br/>}).catch(error =&gt; {console.log(error)});</span></pre><p id="52cf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">你刚刚忽略了吗？我必须说我对你很有信心。</p><p id="1f80" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">无论如何，继续…我将向您简要介绍如何同时发出多个请求。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="58f9" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">在单个请求中处理多个API URLs</h1><p id="a169" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在开发代码时，可能会出现这样的情况:您必须在同一个文件中进行多个API调用，它们可能会也可能不会同时尝试获取数据。调用的顺序可能会导致接收或发送数据的延迟。</p><p id="6478" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">以下是如何使用<code class="fe nq nr ns nf b">Axios.all</code>功能同时拨打多个电话的方法。它同时处理多个API调用。如果您正在处理React Native，您可以轻松地创建一个函数，添加此代码并在<code class="fe nq nr ns nf b">componentDidMount</code>函数中调用它:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="4e53" class="nj la it nf b gy nk nl l nm nn">import axios from 'axios';  </span><span id="e06d" class="nj la it nf b gy no nl l nm nn">let one = "https://api.storyblok.com/v1/cdn/stories/health?version=published&amp;token=wANpEQEsMYGOwLxwXQ76Ggtt" </span><span id="a7e5" class="nj la it nf b gy no nl l nm nn">let two = "https://api.storyblok.com/v1/cdn/datasources/?token=wANpEQEsMYGOwLxwXQ76Ggtt" </span><span id="1827" class="nj la it nf b gy no nl l nm nn">let three = "https://api.storyblok.com/v1/cdn/stories/vue?version=published&amp;token=wANpEQEsMYGOwLxwXQ76Ggtt"  </span><span id="9d0b" class="nj la it nf b gy no nl l nm nn">const requestOne = axios.get(one); <br/>const requestTwo = axios.get(two); <br/>const requestThree = axios.get(three);  </span><span id="840d" class="nj la it nf b gy no nl l nm nn">axios.all([requestOne, requestTwo, requestThree]).then(axios.spread((...responses) =&gt; {   <br/>const responseOne = responses[0]   <br/>const responseTwo = responses[1]   <br/>const responesThree = responses[2]   <br/><em class="np">// use/access the results </em> <br/>})).catch(errors =&gt; {<br/>   <em class="np">// react on errors.</em> <br/>})</span></pre></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="a400" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">使用通用基本URL管理URL</h1><p id="db38" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这是我写这篇文章的主要原因。总是需要在一个应用程序中使用多个URL和一个公共的基本URL。有多种方法可以让API请求从这些URL获取数据。如果你是专业的专家，请告诉我是否有替代方案——我将不胜感激！</p><h2 id="fa2d" class="nj la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated">第一步</h2><p id="8d49" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在您的应用程序中创建一个配置文件夹。此文件夹必须位于您的应用程序项目中(无论您如何命名)。添加一个文件并将其命名为config.js。在该文件中添加以下代码:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="0d5c" class="nj la it nf b gy nk nl l nm nn">export const apiConfig = {</span><span id="4b72" class="nj la it nf b gy no nl l nm nn">baseUrl: 'https://nameofthedomain.net/api/v1/', <br/>// should end with a slash</span><span id="1b9e" class="nj la it nf b gy no nl l nm nn">clientId: '1',<br/>clientSecret: 'xc34jamesDevV41XwKbWhrsGgHvR3hjwG8',<br/>};</span><span id="a4d3" class="nj la it nf b gy no nl l nm nn">// Ask your backend expert if you have no idea about client id and clientSecret if you are new to it.</span></pre><h2 id="a1a1" class="nj la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated">第二步</h2><p id="91d0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在应用程序中创建另一个文件夹。将其命名为apiAuth，并在其中创建三个文件，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/af2019b2faa0ae63ba961b49b68d1ea6.png" data-original-src="https://miro.medium.com/v2/resize:fit:412/format:webp/1*J8pgaWqiEaa7Ze1nMM1XZA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">检查config和apiAuth文件夹</p></figure><p id="780d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们向刚刚创建的空文件添加代码。你可能已经从它们的名字中了解了它们的含义，但是让我们深入了解更多的细节。</p><h2 id="9925" class="nj la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated"><span class="l of og oh bm oi oj ok ol om di">A</span>T3】将下面的代码添加到guestClient.js </h2><p id="cb9f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这个文件用于进行不需要任何令牌生成或任何用户管理来维护状态的调用。这些都是简单的全球通用的URL，具有共同的基础。我们已经在这个文件中启动了Axios，并添加了基本URL和与它们相关联的头。如果有任何数据要发送，您可以按照下面代码中提到的方式发送。</p><p id="15a7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">拦截器基本上是为了在调用完成后从浏览器获得响应。在这一部分中，随机呼叫被分类。那些不需要任何身份验证或用户详细信息的请求被称为访客URL。如果您仍然感到困惑:访客客户端是用于匿名访客的，该访客在没有任何身份验证和授权的情况下进行呼叫。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="7654" class="nj la it nf b gy nk nl l nm nn"><br/>import axios from 'axios';<br/>import {apiConfig} from '../config/config';</span><span id="ed78" class="nj la it nf b gy no nl l nm nn">const client = axios.create({<br/>  baseURL: apiConfig.baseUrl,<br/>  headers: { <br/>     Accept: 'application/json'<br/>  },<br/>  data:{<br/>   scope: '',<br/>   id: 34,<br/>});</span><span id="64fc" class="nj la it nf b gy no nl l nm nn">export default client;</span><span id="9961" class="nj la it nf b gy no nl l nm nn">function getUrl(config) {<br/> if (config.baseURL) {<br/>  return config.url.replace(config.baseURL, '');<br/> } <br/>  return config.url;<br/> }</span><span id="72c5" class="nj la it nf b gy no nl l nm nn">// Intercept all requests<br/>client.interceptors.request.use(<br/> config =&gt; {<br/> console.log(`%c ${config.method.toUpperCase()} - ${getUrl(config)}:`,'color: #0086b3; font-weight: bold',config,);<br/>return config;<br/>}, error =&gt; Promise.reject(error),);</span><span id="02ee" class="nj la it nf b gy no nl l nm nn">// Intercept all responses<br/>client.interceptors.response.use(<br/>async response =&gt; {console.log(`%c ${response.status} - ${getUrl(response.config)}:`,<br/>'color: #008000; font-weight: bold',<br/>response,);return response;},</span><span id="4eba" class="nj la it nf b gy no nl l nm nn">error =&gt; {console.log(`%c ${error.response.status} - ${getUrl(error.response.config)}:`,'color: #a71d5d; font-weight: bold',error.response,);<br/>return Promise.reject(error);<br/>},<br/>);</span></pre><h2 id="464b" class="nj la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated">将下面的代码添加到loggedInClient.js中</h2><p id="aa9d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><code class="fe nq nr ns nf b">LoggedInClient</code>，顾名思义，由用户登录后需要的API组成，需要进行一些API调用以从服务器获取数据——例如，支持请求、与帐户相关的名称列表或用户详细信息。所有这些类型的请求都可以使用以下代码:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="3f45" class="nj la it nf b gy nk nl l nm nn">import axios from 'axios';<br/>import {Alert} from 'react-native';<br/>import AsyncStorage from '@react-native-community/async-storage';<br/>import {apiConfig} from '../config/config';</span><span id="b017" class="nj la it nf b gy no nl l nm nn">const getAccessToken = async () =&gt; {<br/>try {<br/>const retrievedItem = await AsyncStorage.getItem('tokenData');<br/>if (retrievedItem !== null) {<br/>const item = JSON.parse(retrievedItem);<br/>console.log(item);<br/>const authorization = `Bearer ${item.token}`;<br/>// We have data!!<br/>return authorization;<br/>} return null;<br/>} catch (error) {<br/>// Error retrieving data<br/>}};</span><span id="4c92" class="nj la it nf b gy no nl l nm nn">const loginClient = axios.create({<br/>baseURL: apiConfig.baseUrl,<br/>headers: {<br/>  Accept: 'application/json',<br/>},<br/>});</span><span id="27ed" class="nj la it nf b gy no nl l nm nn">const getLoginClient = async () =&gt; {<br/>loginClient.defaults.headers.common.Authorization = await getAccessToken();<br/>return loginClient;<br/>};</span><span id="29d8" class="nj la it nf b gy no nl l nm nn">export default getLoginClient;</span><span id="b57e" class="nj la it nf b gy no nl l nm nn">function getUrl(config) {<br/>if (config.baseURL) {<br/>return config.url.replace(config.baseURL, '');<br/>}<br/>return config.url;<br/>}</span><span id="4bc9" class="nj la it nf b gy no nl l nm nn">// Intercept all requests<br/>loginClient.interceptors.request.use(<br/>config =&gt; {<br/>console.log(`%c ${config.method.toUpperCase()} - ${getUrl(config)}:`,'color: #0086b3; font-weight: bold',config,);<br/>return config;<br/>},error =&gt; Promise.reject(error),);</span><span id="4c0d" class="nj la it nf b gy no nl l nm nn">// Intercept all responses</span><span id="890b" class="nj la it nf b gy no nl l nm nn">loginClient.interceptors.response.use(<br/>async response =&gt; {if (response.status === 401) {<br/>try {<br/>const value = await AsyncStorage.getItem('tokenData');<br/>if (value !== null) {<br/>// We have data!!<br/>AsyncStorage.clear();<br/>NavigationService.navigate('AuthStackScreen');<br/>}<br/>} catch (error) {<br/>// Error retrieving data<br/>console.log(error, 'logged in client error');<br/>}} console.log(`%c ${response.status} - ${getUrl(response.config)}:`,'color: #008000; font-weight: bold',response,);return response;},</span><span id="4ec3" class="nj la it nf b gy no nl l nm nn">error =&gt; {console.log(error, 'error console');<br/>if (error.response.status === 429) {<br/>Alert.alert('Too many requests. Please try again later.');<br/>} console.log(`%c ${error.response.status} - ${getUrl(error.response.config)}:`,'color: #a71d5d; font-weight: bold',error.response,);<br/>return Promise.reject(error);<br/>},);</span></pre><h2 id="f8dd" class="nj la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated">将以下代码添加到tokenClient.js</h2><p id="6f5f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">令牌客户机请求是那些我们需要生成并保存令牌作为响应的请求。例如，当我们注册一个应用程序或在注册过程中。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="916f" class="nj la it nf b gy nk nl l nm nn">import axios from 'axios';<br/>import {apiConfig} from '../config/config';</span><span id="eae0" class="nj la it nf b gy no nl l nm nn">const client = axios.create({<br/>baseURL: apiConfig.baseUrl,<br/>headers: {<br/> Accept: 'application/json',<br/>},<br/> data: {<br/>   // client_id: apiConfig.clientId,<br/>   // client_secret: apiConfig.clientSecret,<br/>   id: 'password',<br/>   scope: '*',<br/> },<br/>});<br/>export default client;</span><span id="c9b7" class="nj la it nf b gy no nl l nm nn">function getUrl(config) {<br/>if (config.baseURL) {return config.url.replace(config.baseURL, '');}<br/>return config.url;<br/>}</span><span id="f41b" class="nj la it nf b gy no nl l nm nn">// Intercept all request</span><span id="8608" class="nj la it nf b gy no nl l nm nn">client.interceptors.request.use(<br/>config =&gt; {<br/>console.log(<br/>`%c ${config.method.toUpperCase()} - ${getUrl(config)}:`,<br/>'color: #0086b3; font-weight: bold',config,);<br/>return config;<br/>},error =&gt; Promise.reject(error),<br/>);</span><span id="1d18" class="nj la it nf b gy no nl l nm nn">// Intercept all responses</span><span id="1181" class="nj la it nf b gy no nl l nm nn">client.interceptors.response.use(<br/>async response =&gt; {<br/>console.log(<br/>`%c ${response.status} - ${getUrl(response.config)}:`,<br/>'color: #008000; font-weight: bold',<br/>response,<br/>);<br/>return response;<br/>},</span><span id="15b8" class="nj la it nf b gy no nl l nm nn">error =&gt; {<br/>console.log(<br/>`%c ${error.response.status} - ${getUrl(error.response.config)}:`,<br/>'color: #a71d5d; font-weight: bold',<br/>error.response,<br/>);return Promise.reject(error);},);</span></pre><h2 id="3940" class="nj la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated">最后一步</h2><p id="97e4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们已经完成了基本代码。现在，我们所要做的就是在需要的时候和地点在我们的文件中调用它们。</p><p id="3be2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们如何使用上面所有的代码？</p><p id="7474" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">总结整篇文章，你就有答案了。只需导入文件，根据API的性质，您可以发出POST或GET请求来分别发送或接收数据。响应是必须的，可以根据开发人员的需要进行存储和配置。查看代码以便更好地理解。</p><h2 id="c927" class="nj la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated"><strong class="ak">导入文件</strong></h2><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="f828" class="nj la it nf b gy nk nl l nm nn">import loginRequest from '../apiAuth/tokenClient';<br/>//Import the file if you are generating token</span><span id="5e7d" class="nj la it nf b gy no nl l nm nn">import getLoginClient from '../apiAuth/loggedInClient';<br/>//Import the file if you are logged in</span><span id="0646" class="nj la it nf b gy no nl l nm nn">import guestRequest from '../apiAuth/guestClient';<br/>//Import the file if you are using no token required API</span></pre><h2 id="6bfb" class="nj la it bd lb nt nu dn lf nv nw dp lj ma nx ny ll me nz oa ln mi ob oc lp od bi translated">提出请求</h2><p id="5f7c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这里列出了URL，并发出post请求来发送数据和处理响应。请注意，在请求中只调用端点，而不是整个URL。这就是为什么我们已经走了这么远——请不要犯愚蠢的错误，再次调用整个API URL！</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="ca4c" class="nj la it nf b gy nk nl l nm nn">import getLoginClient from '../apiAuth/loggedInClient';</span><span id="3212" class="nj la it nf b gy no nl l nm nn">//The url is https://nameofthedomain.net/api/v1/contactSupport</span><span id="85cf" class="nj la it nf b gy no nl l nm nn">onButtonPress = async () =&gt; {<br/>const {randomMesage} = this.state;<br/>const client = await getLoginClient();<br/>client<br/>.post('contactSupport', {<br/>  message: randomMessage,<br/>})<br/>.then(response =&gt; {<br/> console.log('response is', response);<br/>})<br/>.catch(error =&gt; {<br/>console.log(error);});<br/>};</span></pre><p id="016d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">get方法是这样调用的:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="cc9a" class="nj la it nf b gy nk nl l nm nn">import apiClient from '../../api/loggedInClient';<br/>//The url is https://nameofthedomain.net/api/v1/flashcards</span><span id="e7d1" class="nj la it nf b gy no nl l nm nn">onPress= async () =&gt; {<br/>const client = await apiClient();<br/>client.get('flashcards')<br/>.then(async res =&gt; {<br/>console.log(res);<br/>})<br/>.catch(error =&gt; console.log(error));<br/>},</span></pre></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="4379" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated"><span class="l of og oh bm oi oj ok ol om di"> C </span>结论</h1><p id="7645" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们已经成功地将API与一个公共的基本URL集成在一起，并向服务器发出所有类型的基本请求。</p><p id="3251" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这里需要考虑的一点是，API调用并不局限于这两种请求类型——还有更多需要探索的地方。如果您有任何与API处理相关的问题，请随时联系。乐意帮忙。如果你需要整个代码，请随时通过我的网站给我发电子邮件。</p><p id="0857" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">不断学习，不断成长！<br/>到达<a class="ae ky" href="https://www.instagram.com/navigatorkumar/" rel="noopener ugc nofollow" target="_blank">https://www.instagram.com/navigatorkumar/</a></p></div></div>    
</body>
</html>