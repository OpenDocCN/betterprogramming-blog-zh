<html>
<head>
<title>Create a Letter Picture Like Google Does With React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建一个字母图片，就像谷歌用React做的那样</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-a-letter-picture-like-google-with-react-ae12a7a4390e?source=collection_archive---------0-----------------------#2020-06-28">https://betterprogramming.pub/create-a-letter-picture-like-google-with-react-ae12a7a4390e?source=collection_archive---------0-----------------------#2020-06-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="546b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为没有个人资料图片的用户添加一个漂亮的默认图像</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/54088ec8d5552d29936d3a2b030e7f12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*f1gERXRCDxSLY69i"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@faultycamera?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">翔音</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a>.</p></figure><p id="02d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设您的下一个请求是执行这个功能:如果用户没有个人资料图像，系统必须采用他们的名字，并以最纯粹的Google风格从他们的姓名首字母创建一个图像。</p><p id="2132" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你说这是可能的，但你仍然不知道怎么做。所以你来到了这里…</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="c1c6" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">什么是字母图？</strong></h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/879c602648924367ddff8e36243c859e.png" data-original-src="https://miro.medium.com/v2/resize:fit:302/format:webp/1*9zxZkXCHwhE6hfcu7yTlEg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Gmail信函图片</p></figure><p id="ab54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当谷歌服务找不到你的个人资料的照片时，它会提取你的姓名首字母，并创建一个你的个人资料的小型代表图像。对于用户体验来说，这是一个非常愉快的实践。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="5a5c" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">让我们开始</strong></h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/e7afe2757bdfe51e60a8b5edba5abc85.png" data-original-src="https://miro.medium.com/v2/resize:fit:476/format:webp/1*Wvl2YCJLj1B5oxRLwmCsOg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">项目结构</p></figure><p id="bd8f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将致力于应用组件。我们将创建一个名为<code class="fe mt mu mv mw b">utilities</code>的组件，它将包含创建图像所需的所有函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">App.js</p></figure><p id="bbd8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的应用程序将非常简单，因为我们将导出我们需要的两个函数。您的<code class="fe mt mu mv mw b">src</code>所在的图像将有一个条件。如果<code class="fe mt mu mv mw b">src</code>字段为空，我们将调用我们的函数来生成一个带有首字母的图像。否则，<code class="fe mt mu mv mw b">src</code>将是我们从数据库中得到的图像。</p><p id="e1e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的函数将接收三个参数:图像大小、用户名和颜色。<br/>为了使最后一个值更加个性化，我们将发送一个函数，该函数将在每次页面重新加载时生成一个随机颜色。</p><p id="8d29" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以忽略这个函数，传递一个十六进制的颜色。</p><p id="6c68" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将开始处理<code class="fe mt mu mv mw b">utils</code>的文件。首先，我们将创建随机生成颜色的函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">函数生成随机颜色</p></figure><p id="065d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们将详细了解获取用户名首字母的函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="b232" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们的名字是空的，我们将立即返回，因为我们将不能做任何事情。否则，我们用<code class="fe mt mu mv mw b">split</code>将字符串转换成数组。<br/>正如<a class="ae kv" href="https://www.w3schools.com/jsref/jsref_split.asp" rel="noopener ugc nofollow" target="_blank"> W3Schools </a>所指出的那样，“<code class="fe mt mu mv mw b">split()</code>方法用于将一个字符串拆分成一个数组。”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/0efd2ae007b04db1a3ef2313fa715179.png" data-original-src="https://miro.medium.com/v2/resize:fit:444/format:webp/1*J46KaMC1aD3_98XA3nvESQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">拆分方法</p></figure><p id="0093" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦我们有了这个数组，我们就会知道名字在位置<code class="fe mt mu mv mw b">[0]</code>上，姓氏在位置<code class="fe mt mu mv mw b">[1]</code>上。我们继续使用<code class="fe mt mu mv mw b">subString</code>。<br/>根据<a class="ae kv" href="https://www.w3schools.com/jsref/jsref_substring.asp" rel="noopener ugc nofollow" target="_blank">W3Schools</a>,<code class="fe mt mu mv mw b">substring()</code>方法从字符串中提取两个指定索引之间的字符。在这种情况下，由于我们只想使用第一个字母，我们的索引将是<code class="fe mt mu mv mw b">0</code>和<code class="fe mt mu mv mw b">1</code>。最后，我们连接结果并返回新字符串:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最重要的功能，创建图像功能</p></figure><p id="d063" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是创建我们的图像的函数:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/e412050dd92fa379c227e8ae9f8a3890.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*en6x67PEFzRBr75UBp4rlQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建画布</p></figure><p id="9c2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mt mu mv mw b">canvas</code> <strong class="ky ir"> </strong>元素本身没有绘制能力。它只是一个图形容器。</p><p id="a391" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如在<a class="ae kv" href="https://books.google.ca/books?id=ib7cDwAAQBAJ&amp;pg=PA121&amp;lpg=PA121&amp;dq=#v=onepage&amp;q&amp;f=false" rel="noopener ugc nofollow" target="_blank"> <em class="nb"> JavaScript和jQuery make Easy</em></a>中所写的那样，<code class="fe mt mu mv mw b">getContext()</code>方法“返回一个对象，该对象为在画布上进行绘制提供方法和属性。”</p><p id="d797" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mt mu mv mw b">canvas.width=canvas.height</code>用于为画布创建一个正方形。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/562288e6ee1707e0db664efe9dff10a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*xylvnM1eUUfp3py_--LtSw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">填满画布</p></figure><p id="3e20" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">方法绘制一个“填充”的矩形。根据我们传递的大小，我们填充一个正方形。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/52c946adf4e908fbf09439574ced35c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*xzxMSgMX6dAIi9NomDjCLA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">管理文本</p></figure><p id="a8a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们将管理<code class="fe mt mu mv mw b">text</code>属性，使我们的首字母位于正方形的中心。记得指定字体。否则，默认文本会显得很小，忽略大小。</p><p id="b91d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的最终结果是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/9c50705951ea8a5b90d8e762480a5790.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*iEHC7cySa1JaXN1cWPBxfQ.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最终方案</p></figure><p id="b19c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完整代码:</p><div class="nf ng gp gr nh ni"><a href="https://github.com/danilo95/letter-picture-like-Google-with-React" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">Danilo 95/letter-picture-like-Google-with-React</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">这个项目是用Create React App引导的。在项目目录中，您可以运行:在…中运行应用程序</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">github.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw kp ni"/></div></div></a></div><p id="29e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这个教程是有用的。感谢阅读！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/35912122c73488dfc2a9ea889ca7213e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OuHHdGCUOgUr2yaGBWIgDg.jpeg"/></div></div></figure></div></div>    
</body>
</html>