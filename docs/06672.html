<html>
<head>
<title>Create an Image Slideshow in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Swift中创建图像幻灯片</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-an-image-slideshow-in-swift-b21af9f4ecf3?source=collection_archive---------2-----------------------#2020-10-23">https://betterprogramming.pub/create-an-image-slideshow-in-swift-b21af9f4ecf3?source=collection_archive---------2-----------------------#2020-10-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="216c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在你的应用中制作一个漂亮的幻灯片</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/7107f6b1453c461a913c50feb2c64734.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*CvYHlQ5jtYwReqtYyBxGQQ.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者照片。</p></figure><p id="a073" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在开发iOS应用程序时，在一个水平幻灯片中包装多个图像是一项常见的任务。不要认为它是你在网页上看到的同样的旧滑块。幻灯片可能比你想象的更常见、更有用。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="8ef3" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">应用程序</h1><p id="896f" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">幻灯片对于帖子、竞赛、旋转木马(不是真正的旋转木马，而是类似的东西)等feed内容非常有用。我在各种各样的iOS应用程序中使用过幻灯片，当我需要在小视图中显示多个图像时，它们总是能帮我。</p><p id="fe57" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">此外，您可以使用手势识别器轻松地将用户交互应用于它们，提供滑动行为来显示容器内的下一个和上一个项目，甚至点击或长按手势来应用事件。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="e5e2" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">UIScrollView —这是您所需要的一切</h1><p id="a7f7" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">首先我们来看看这个<code class="fe mu mv mw mx b">UIView</code>子类。<code class="fe mu mv mw mx b">UIScrollView</code>整合了封装内容的行为，即简单地水平或垂直“滚动”。<code class="fe mu mv mw mx b">UITableViews</code>、<code class="fe mu mv mw mx b">UICollectionViews</code>和类似的UI对象只是<code class="fe mu mv mw mx b">UIScrollView</code>类的子类。实际上，它们都以相似的方式滚动。</p><p id="c22a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用<code class="fe mu mv mw mx b">UIScrollViews</code>的好处在于，它们提供了委托方法，让您从拥有“钩子”中受益，并在<code class="fe mu mv mw mx b">UIScrollView</code>滚动、停止滚动、开始滚动甚至减速时定制行为和代码应用程序。</p><p id="9ddc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们来看看<code class="fe mu mv mw mx b">UIScrollView</code>对象的基本属性:</p><ul class=""><li id="600b" class="my mz it kw b kx ky la lb ld na lh nb ll nc lp nd ne nf ng bi translated"><code class="fe mu mv mw mx b">contentSize</code> : <code class="fe mu mv mw mx b">CGSize</code>。确定<code class="fe mu mv mw mx b">UIScrollView</code>的内容大小。它用于指定<code class="fe mu mv mw mx b">UIScrollView</code>中的内容有多长。</li><li id="420a" class="my mz it kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated"><code class="fe mu mv mw mx b">contentOffset</code> : <code class="fe mu mv mw mx b">CGPoint</code>。它使用具有<code class="fe mu mv mw mx b">x</code>和<code class="fe mu mv mw mx b">y</code>坐标的<code class="fe mu mv mw mx b">CGPoint</code>来指定内容的偏移量。它用于偏移内容(例如“移动”<code class="fe mu mv mw mx b">UIScrollView</code>内的内容)。</li><li id="1006" class="my mz it kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated"><code class="fe mu mv mw mx b">contentInset</code> : <code class="fe mu mv mw mx b">UIEdgeInsets</code>。与任何<code class="fe mu mv mw mx b">UIEdgeInset</code>对象一样，它用于在<code class="fe mu mv mw mx b">UIScrollView</code>内部设置一个嵌入空间。这就像在<code class="fe mu mv mw mx b">UIScrollView</code>内部应用填充一样。</li><li id="8353" class="my mz it kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated"><code class="fe mu mv mw mx b">isScrollEnabled</code> : <code class="fe mu mv mw mx b">Bool</code>。确定<code class="fe mu mv mw mx b">UIScrollView</code>是否应该滚动。当您必须锁定或解锁<code class="fe mu mv mw mx b">UIScrollView</code>上的用户交互时非常有用。</li><li id="88bf" class="my mz it kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated"><code class="fe mu mv mw mx b">isPagingEnabled</code> : <code class="fe mu mv mw mx b">Bool</code>。如果启用，它使用分页使UIScrollView滚动，并避免自由和不确定的滚动行为。例如，如果你向左滑动，<code class="fe mu mv mw mx b">UIScrollView</code>会滑动到下一页内容。</li><li id="1d15" class="my mz it kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated"><code class="fe mu mv mw mx b">bounces</code> : <code class="fe mu mv mw mx b">Bool</code>。如果启用，当<code class="fe mu mv mw mx b">UIScrollView</code>的内容到达结尾或开始时，会使其反弹，提供您可以在许多UI iOS控件中看到的经典反弹效果。</li></ul></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="a1cc" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">将我们的UIScrollView构建为幻灯片容器</h1><p id="1ab2" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">很明显，您可以使用故事板或编程方式构建一个<code class="fe mu mv mw mx b">UIScrollView</code>,当然，您甚至可以使用SwiftUI声明性方法创建一个<code class="fe mu mv mw mx b">UIScrollView</code>。</p><p id="dc96" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们使用界面构建器和遗留的Autolayout方法尝试第一种方法:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi nm"><img src="../Images/6ce952a21202aebf09844c74160ebed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AaKg_EK648YG4xBrHvWveg.jpeg"/></div></div></figure><p id="4900" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本例中，我们将使用:</p><ul class=""><li id="6ae8" class="my mz it kw b kx ky la lb ld na lh nb ll nc lp nd ne nf ng bi translated">顶部有一个<code class="fe mu mv mw mx b">UILabel</code>，对安全区域有一个顶部约束，也有一个相对于安全区域的中心水平约束。</li><li id="5098" class="my mz it kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated">标签正下方的<code class="fe mu mv mw mx b">UIScrollView</code>对象。我们应用相对于上面<code class="fe mu mv mw mx b">UILabel</code>的顶部约束边界，以及相对于安全区域或超级视图(我们<code class="fe mu mv mw mx b">UIViewController</code>的主<code class="fe mu mv mw mx b">UIView</code>)的尾部和前导约束。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/fc1263aa694c54f0a14f831b6bbceb87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*gnn1R5OlgVdTBDu4U8Ompw.jpeg"/></div></figure><p id="4860" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你会注意到Xcode会提示两个关于宽度和高度不明确的<code class="fe mu mv mw mx b">UIScrollView</code>内容大小的警告。我们没有在滚动视图中设置任何内容，也不可能确定这个对象实际上会显示多少内容。这些可以被认为是XIB的错误(即自动布局问题)。不要太担心它们，因为XIB会显示错误，忽略您将在控制器内部编码的内容。显然，我们将包含提供关于<code class="fe mu mv mw mx b">UIScrollView</code>内容大小的规范的代码。</p><p id="6218" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您没有XIB，或者更喜欢对布局进行编码，那么基本原理是一样的。根据项目的规格，我经常用Swift而不是Interface builder来构建我的UI。只要确保以正确的方式放置对象，并使用Swift类或库(如<a class="ae ns" href="https://snapkit.io" rel="noopener ugc nofollow" target="_blank"> SnapKit </a>)应用其约束即可。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="8332" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">用图像填充滚动视图并应用推送行为</h1><p id="1475" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">一旦你在<code class="fe mu mv mw mx b">UIViewController</code>中有了对象，你就可以用图像填充它。图像通常由web服务器作为资源提供，并且是动态的。这就是为什么我会假设您有一个从任何地方(存储、互联网、缓存等)检索的图像集合。)只是想把它们放在幻灯片里面。</p><p id="53a2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下是步骤:</p><ol class=""><li id="b9e5" class="my mz it kw b kx ky la lb ld na lh nb ll nc lp nt ne nf ng bi translated">遍历<code class="fe mu mv mw mx b">UIImages</code>的数组。</li><li id="db8a" class="my mz it kw b kx nh la ni ld nj lh nk ll nl lp nt ne nf ng bi translated">创建一个与<code class="fe mu mv mw mx b">UIScrollView</code>的水平边界宽度相同的<code class="fe mu mv mw mx b">UIImageView</code>，并在其中添加图像。</li><li id="7111" class="my mz it kw b kx nh la ni ld nj lh nk ll nl lp nt ne nf ng bi translated">使用<code class="fe mu mv mw mx b">UIScrollView</code>上的<code class="fe mu mv mw mx b">addSubview()</code>方法将<code class="fe mu mv mw mx b">UIImageView</code>添加到滚动视图中。在这一步，你必须考虑水平偏移，因为每个<code class="fe mu mv mw mx b">UIImageView</code>必须在前一个之后插入。</li><li id="65b0" class="my mz it kw b kx nh la ni ld nj lh nk ll nl lp nt ne nf ng bi translated">当循环完成时，设置<code class="fe mu mv mw mx b">UIScrollView</code>的<code class="fe mu mv mw mx b">contentSize</code>。该步骤不是自动的，必须进行编码。<code class="fe mu mv mw mx b">UIScrollView</code>对象不会根据其内部的内容获取其<code class="fe mu mv mw mx b">contentSize</code>。它必须以编程方式设置。</li></ol><p id="5d1a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">正如您所看到的，您可以通过设置我们之前讨论过的基本属性，用几行代码构建一个幻灯片。唯一棘手的部分是实例化<code class="fe mu mv mw mx b">UIImageView</code>并设置偏移量使它们水平堆叠的块。你甚至可以尝试使用一个<code class="fe mu mv mw mx b">UIStackView</code>来使它更加舒适和易于编码，但这并没有太大的不同。</p><p id="323a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请记住，如果您需要使用分页滚动效果使幻灯片水平滑动，您必须设置<code class="fe mu mv mw mx b">isPagingEnabled</code>属性。否则，它将只是一个scrollview，不会将滚动动画粘贴到其中的每一页。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="a5c0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想添加一个<code class="fe mu mv mw mx b">UIPageControl</code>来显示当前页面指示器，你只需要使用一个最重要的<code class="fe mu mv mw mx b">UIScrollViewDelegate</code>协议方法:</p><pre class="kj kk kl km gt nw mx nx ny aw nz bi"><span id="8588" class="oa ly it mx b gy ob oc l od oe">func scrollViewDidEndDecelerating(_ scrollView: UIScrollView) {<br/>        let x = scrollView.contentOffset.x<br/>        let w = scrollView.bounds.size.width<br/>        pager.currentPage = Int(ceil(x/w)) <br/>}</span></pre><p id="1185" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">其中名为<code class="fe mu mv mw mx b">pager</code>的对象就是你的<code class="fe mu mv mw mx b">UIPageControl IBOutlet</code>。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="42a0" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">结论</h1><p id="0d5e" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">首先，不要“原样”复制/粘贴代码。试着理解这个实现的登录和输出。一些特性和规范应该取决于你想要达到的目标和整个应用的外观和感觉。</p><p id="3cbc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">其中一个关键因素是<code class="fe mu mv mw mx b">UIImageView</code>设置。改变框架，改变每个<code class="fe mu mv mw mx b">UIImageView</code>中图像的<code class="fe mu mv mw mx b">contentMode</code>，甚至在那个物体上应用效果，都会让你的应用看起来大不相同。您可以尝试在每个图像、标题、渐变、点击效果等上添加阴影层。所以把这当成一个模拟幻灯片，试着从中获得更多的乐趣吧！</p></div></div>    
</body>
</html>