# 使用这 5 个 Python 代码约定来使你的代码库更好

> 原文：<https://betterprogramming.pub/use-these-5-python-code-conventions-to-make-your-codebase-better-c9bc5f30dc74>

## 编写简洁干净的代码

![](img/946692d21bd18200e7fdbdeda3cf1ab3.png)

图片由作者 Nik Piepenbreier 提供。

Python 中有一些编码约定，不仅使你的代码突出为入门级，而且效率更低！在这篇文章中，你将学习其中的 5 个习惯，以及如何改正它们，让你的代码更整洁，让你看起来像一个更高级的程序员。

这些编码习惯使您的代码更简单，并且通常更容易调试。所以，这些不仅仅是要打破的虚荣心习惯，而是真正要改变你用 Python 编码的方式。

让我们开始吧！

# 习惯 1:优化你的任务

你知道那些时候你写一个`if-else`块只是为了给一个新变量赋值吗？让我们看看这个是什么样子的:

在上面的代码中，您对一个表达式求值以检查它是否为真。如果是，变量`a`被赋值`10`。否则，该变量被赋予`20`。

虽然这种方法可行，但它也有四行长！虽然我不鼓励为了简洁而简洁，但是让我们来看看一个三元赋值，它将上面的代码简化为一行代码:

我喜欢上面这种方法的原因是代码更具表现力。代码清楚地表明我们希望给变量`a`赋值。我们不知道代码希望完成什么！

# 习惯 2:使用 all()和 any()代替 For 循环

在许多情况下，您可能会发现自己在遍历一个列表或元组，以检查某些或所有值是否匹配某个条件。例如，您可能希望检查列表中的所有值是否都大于或等于 10。让我们看看如何使用 for 循环来实现这一点:

在上面的代码中，我们检查是否所有的值都大于或等于 10。让我们来分解一下我们做了什么:

1.  第 2 行实例化了一个值列表
2.  第 4 行将一个条件变量设置为`True`
3.  第 7 行到第 10 行循环遍历每个项目，检查值是否≤10。如果是，条件被设置为`False`并且循环被中断。

通过使用令人难以置信的`all()`函数，我们可以让这变得非常非常简单！该函数采用一个布尔的 iterable，如果所有值都是`True.`，将返回`True`

让我们看看如何重构我们的代码来使用`all()`函数:

在上面的代码中，我们遍历列表，评估每个值是否≤10。这将返回一个布尔值，`all()`函数可以处理！

专业提示:如果您只想检查任何值是否满足条件，您可以使用`any()`函数！

# 习惯 3:使用 enumerate()代替复杂的循环

这无疑是本文中我最喜欢的技巧！当您开始使用 Python 时，您会发现自己经常迭代一个列表。在某些情况下，您可能希望访问该项以及该项的索引位置。

让我们看看你会怎么做:

在上面的代码中，我们使用`range()`函数访问列表的索引，然后打印出索引和相应的条目。

同样，这种方法是可行的——但是它与 Pythonic 相差甚远。如果需要从 iterable 中访问索引和条目，可以使用`enumerate()`函数更好地完成。

enumerate 函数返回一个生成器对象，包含索引和项目的元组。让我们深入了解如何重构我们的代码！

更好的是，我们可以设置一个可选参数，从不同的计数器开始。在我们的例子中，我们从“步骤 0”开始，因为 Python 使用基于 0 的索引。然而，它并不完全可读！

专业提示:尝试在函数中设置`start=1`参数，看看你的结果如何变化！

# 习惯 4:使用 in 检查成员资格

在许多情况下，您将编写`if-else`块来检查字典中项的成员资格。在这些情况下，您感兴趣的是一个键是否存在。

让我们看看您通常会遇到什么样的代码，它显式地检查字典的键:

虽然这种方法工作得很好，但是您实际上并不需要显式地检查`.keys()`方法！主要的好处是这使得你的代码更加清晰。

让我们看看如何重新格式化我们的方法:

在下一节中，您将学习如何应用它！

# 习惯 5:用计数器让计数变得容易

清点物品是你经常会遇到的任务。假设您有一个姓名列表，并且想要创建一个包含列表中所有条目的字典。虽然使用 for 循环很容易做到这一点，但是您很快就会发现这并不是最有效的方法。

首先，让我们来看看如何使用 for 循环来实现这一点:

让我们来分解一下上面的代码在做什么:

1.  第 2 行实例化了一个名称列表
2.  第 4 行创建了一个空字典
3.  第 5 行到第 9 行遍历列表中的每个名字。如果该名称存在，则该名称的键值将增加 1。如果没有，则创建的键的值为 1。

编写干净代码的一个重要部分是确保你的代码的意图对你的读者来说是清楚的。如果没有 for 循环的注释，就很难理解你为什么要写这些代码。

正因为如此，内置 collections 模块中的`Counter`类可以派上用场了！该类接受一个 iterable，比如一个 list，并返回一个类似字典的对象，自动添加每一项的计数。

让我们看看如何使用`Counter`类来计数对象:

# 结论

唷！您已经完成了这篇文章的结尾部分！但是，你将何去何从？继续培养您的 Python 技能！找到更多的方法让你的代码更加整洁！Python 是一种优雅的语言，允许你以多种不同的方式编写代码。

努力获得干净、可读的代码是很重要的。这段代码不仅通常写起来更快，而且更有目的性。这使得你的代码的未来读者(可能包括你！)来更好地理解你的代码在做什么。