<html>
<head>
<title>How To Set Up Multiple SSH Keys on Your Computer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在电脑上设置多个SSH密钥</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-set-up-multiple-ssh-keys-ae6688f76570?source=collection_archive---------0-----------------------#2021-01-14">https://betterprogramming.pub/how-to-set-up-multiple-ssh-keys-ae6688f76570?source=collection_archive---------0-----------------------#2021-01-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e223" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">对于需要为多台主机设置多个SSH密钥的人来说，这是一个快速指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/87408ea9966133845d3ee2999766664b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qNjiGQTmKq5lkLgW"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@nguyendqnhu?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阮晋勇</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="3f0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你好！我写这篇文章的灵感来自于我在设置多个SSH密钥时偶然发现的一些问题。</p><p id="b45c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我最初是为我的个人GitHub设置的。几天前，我开始为一个需要另一组SSH密钥对的非营利组织做志愿者。我不知道的是，我不应该用新的SSH密钥对覆盖旧的SSH密钥对，并期望它们能够工作。有一天，我正在做我的一个个人项目，试图推送到GitHub，但是我的终端告诉我:<strong class="ky ir">“拒绝许可(publickey)。”在花了无数个小时搜索之后，我终于解决了问题，并从错误中吸取了教训。我将带您了解这一过程，以便您可以快速高效地设置自己的产品。</strong></p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="b955" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">目录</h1><p id="f271" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated"><code class="fe mw mx my mz b">▹ <a class="ae kv" href="#54ba" rel="noopener ugc nofollow">Step 1</a>: Double-check if you have an existing SSH key.<br/>▹ <a class="ae kv" href="#f204" rel="noopener ugc nofollow">Step 2a</a>: If you don’t have an existing SSH key, generate a new SSH key<br/>▹ <a class="ae kv" href="#eed2" rel="noopener ugc nofollow">Step 2b</a>: Save the SSH key in the according file of your choice.<br/>▹ <a class="ae kv" href="#e58a" rel="noopener ugc nofollow">Step 3</a>: Add the SSH to the ssh-agent<br/>▹ <a class="ae kv" href="#bb5f" rel="noopener ugc nofollow">Step 4</a>: Add your SSH private key to the ssh-agent<br/>▹ <a class="ae kv" href="#354c" rel="noopener ugc nofollow">Step 5</a> It depends: Add the SSH key to your GitHub account<br/>▹ <a class="ae kv" href="#d2c5" rel="noopener ugc nofollow">Step 6</a> Optional: To double-check if your git is connecting to your server</code></p><h2 id="54ba" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">步骤1:仔细检查您是否有一个现有的SSH密钥。</h2><p id="342e" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">★开放终端(针对Windows用户的Git Bash。)</p><p id="e71f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">★输入<code class="fe mw mx my mz b">ls ~/.ssh</code> (/。ssh/是一个隐藏文件夹。可以通过终端访问，或者Mac:<code class="fe mw mx my mz b">cmd + shift + .</code>；Windows:勾选<a class="ae kv" href="https://support.microsoft.com/en-us/windows/view-hidden-files-and-folders-in-windows-10-97fbc472-c603-9d90-91d0-1166d1d9f4b5#" rel="noopener ugc nofollow" target="_blank">显示隐藏文件</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/5442ee91de4e799631e66433e0c935af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*gRYcp0iEDnw0i90CQZTnqw.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">(如果没有加载，您可能需要刷新浏览器才能看到)</p></figure><h2 id="f204" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">步骤2a:如果您没有现有的SSH密钥，那么生成一个新的SSH密钥</h2><p id="ff10" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">★输入<code class="fe mw mx my mz b">ssh-keygen -t ed25519 -C "<em class="nn">your_email@example.com</em>"</code>(用您与GitHub关联的电子邮件替换该电子邮件)或简单地用<code class="fe mw mx my mz b">ssh-keygen</code>替换其他主机。</p><p id="90d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">★如果是为了GitHub，你应该看看<code class="fe mw mx my mz b">Generating public/private ed25519 key pair</code>，或者<code class="fe mw mx my mz b">Generating public/private rsa key pair</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/1b4f6be8852081d8aa2a935e14b5257f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*q24fOQNHbc0MyS1tNfs6kQ.gif"/></div></figure><h2 id="dee1" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">暂停！！</h2><p id="0f15" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">通常，您只需按下<code class="fe mw mx my mz b">Enter</code>(或者Mac用户按下<code class="fe mw mx my mz b">Return</code>)继续，因为SSH密钥会存储在提示符指定的默认文件中(<code class="fe mw mx my mz b">id_rsa</code>)。但是，由于我们正在设置多个SSH密钥，我们希望用不同的名称命名这些密钥，这样您就可以区分哪个是哪个，也便于以后使用。</p><h2 id="eed2" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">步骤2b:将SSH密钥保存在您选择的相应文件中。</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/f06bea0c20544c5e29416e15f469a3a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Z1NqA6QgYnVPh0mFmCG0_g.gif"/></div></figure><p id="b566" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不幸的是，您必须键入要保存它的完整路径名，并确保用不同的名称命名这些键。</p><p id="43a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好了，现在按<code class="fe mw mx my mz b">Enter</code>！你应该看看<code class="fe mw mx my mz b">Enter passphrase(empty for no passphrase):</code>。你想不想要密码完全取决于你。否则，当您看到这个:<code class="fe mw mx my mz b">Enter same passphrase again:</code>时，您可以按<code class="fe mw mx my mz b">Enter</code>和<code class="fe mw mx my mz b">Enter</code>来跳过输入任何密码短语的过程。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/ec662d947eddbb00466aa4068dcdd3ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-5hYs6mmFW_mkP0xzR4qBg.png"/></div></div></figure><p id="9154" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您应该会看到类似这样的内容👆🏻</p><h2 id="e58a" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">步骤3:将ssh添加到SSH代理</h2><p id="ae3e" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">Mac用户:根据GitHub文档，如果要向代理添加SSH密钥，请使用默认的macOS <code class="fe mw mx my mz b">ssh-add</code>命令。</p><p id="3fa5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我假设您在ssh文件夹中获得了配置文件，因为这不是您第一次设置SSH密钥。</p><p id="c4f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你不知道或者你只是想仔细检查，你可以:</p><p id="5c17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">★在后台启动ssh-agent<code class="fe mw mx my mz b">eval "$(ssh-agent -s)"</code></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/6fa99887f3e1fafe1c34fabda3621672.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*0RP89yiuKN5xvrvTK2sfrg.gif"/></div></figure><p id="0a6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">别担心，你和我会有不同的特工编号。</p><p id="3476" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">★查看你的<code class="fe mw mx my mz b">~/.ssh/config</code>是否存在。</p><p id="d929" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">★你可以在<code class="fe mw mx my mz b">~/.ssh/</code>中输入<code class="fe mw mx my mz b">ls</code></p><p id="aeeb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(对不起，Windows用户。这一点我了解的不多，但是根据GitHub的说法，你可以跳过这一部分，直接去设置私钥。)</p><p id="94ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">★类型<code class="fe mw mx my mz b">vim config</code>。这将打开配置文件，无论您是否有该文件。您可以使用Vim文本编辑器编辑配置文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/059cd6790aae8f67312675736011fcad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*7m0Cy6adU7D01i-OSythxw.gif"/></div></figure><p id="8a2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">★进入该页面后，按下<code class="fe mw mx my mz b">i</code>即可插入您的ssh-agent。按住键盘上的<code class="fe mw mx my mz b">Option</code>(Windows上的<code class="fe mw mx my mz b">alt</code>)并单击您想要复制和粘贴以下项目的任意位置。</p><p id="eaf0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于GitHub，您可以复制并粘贴以下内容:</p><pre class="kg kh ki kj gt np mz nq nr aw ns bi"><span id="e9b5" class="na ma iq mz b gy nt nu l nv nw">Host *<br/>  AddKeysToAgent yes<br/>  UseKeychain yes<br/>  IdentityFile ~/.ssh/id_rsa_github2 &lt;- change this to whatever you name your ssh-key, in my case, it would be id_rsa_github2</span></pre><p id="486a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您使用其他站点，比如AWS CodeCommit，您需要找到相应的ssh-agent名称:</p><pre class="kg kh ki kj gt np mz nq nr aw ns bi"><span id="7b25" class="na ma iq mz b gy nt nu l nv nw">Host git-codecommit.*.amazonaws.com   <br/>  User <em class="nn">APKAEIBAERJR2EXAMPLE</em>  &lt;- You would find this when you upload the SSH key and it's under SSH Key ID<br/>  IdentityFile ~/.ssh/<em class="nn">codecommit_rsa </em>&lt;- change this to whatever you name your ssh-key</span></pre><h2 id="f7cf" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">在<code class="fe mw mx my mz b">vim config</code>之后</h2><p id="9414" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">★完成后，按键盘上的<code class="fe mw mx my mz b">esc</code>退出“插入”模式，键入<code class="fe mw mx my mz b">:wq</code>，然后按<code class="fe mw mx my mz b">Enter </code>退出文本编辑器。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/5bd767f5bffd88ac6aaff0819e05f265.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*M6BZolj2_ycwVV2xc0zhzw.gif"/></div></figure><h2 id="bb5f" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">步骤4:将您的ssh私有密钥添加到SSH代理中</h2><pre class="kg kh ki kj gt np mz nq nr aw ns bi"><span id="79cb" class="na ma iq mz b gy nt nu l nv nw">ssh-add -K ~/.ssh/id_rsa_github2</span></pre><h2 id="354c" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">视情况而定:将SSH密钥添加到您的GitHub帐户</h2><p id="35e7" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">这里有来自GitHub的<a class="ae kv" href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/adding-a-new-ssh-key-to-your-github-account" rel="noopener ugc nofollow" target="_blank">详细说明和指导</a>，你可以遵循。</p><h2 id="d2c5" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">步骤6可选:仔细检查您的git是否连接到您的服务器</h2><p id="3d2d" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">(那是我设置好我的钥匙后去找的。)</p><p id="ade8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于GitHub，请键入以下内容:</p><pre class="kg kh ki kj gt np mz nq nr aw ns bi"><span id="776f" class="na ma iq mz b gy nt nu l nv nw">ssh -T <em class="nn">GITHUB-USERNAME</em>@github.com</span></pre><p id="712b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你有<code class="fe mw mx my mz b">Permission denied (publickey)</code>，继续复制粘贴:</p><pre class="kg kh ki kj gt np mz nq nr aw ns bi"><span id="fa81" class="na ma iq mz b gy nt nu l nv nw">ssh -T git@github.com<br/>&gt; Hi <em class="nn">username</em>! You've successfully authenticated...</span></pre><p id="41c2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您仍然有<code class="fe mw mx my mz b">Permission denied</code>，您可能想要检查您的SSH密钥是否在您的主机代理、您的配置等中设置正确。更多信息<a class="ae kv" href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/error-permission-denied-publickey" rel="noopener ugc nofollow" target="_blank">此处</a>专门针对GitHub。</p><h2 id="024f" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">步骤7:如有必要，重复说明(回到<a class="ae kv" href="#54ba" rel="noopener ugc nofollow">步骤1 </a></h2><p id="e976" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">如果您还需要设置更多的SSH密钥，只需重复上面的说明，就可以了😉。我还建议仔细检查您正在尝试连接的主机代理的说明。如果您对如何设置多个SSH密钥感兴趣，那么本文是一个通用案例。</p><p id="b20b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意:如果我错过了什么，我会感谢任何意见。我希望在这篇文章中包括Windows用户。让我知道你还做了什么让它工作！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/6b637383ad9b4555b56b8b1195479dcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:448/0*JdXXcLms_M1IDJwO.gif"/></div></figure><div class="ny nz gp gr oa ob"><a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd ir gy z fp og fr fs oh fu fw ip bi translated">用SSH连接到GitHub</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">您可以使用SSH连接到GitHub。使用SSH协议，您可以连接到远程服务器并进行身份验证，并且…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">docs.github.com</p></div></div></div></a></div></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><div class="kg kh ki kj gt ob"><a href="https://docs.aws.amazon.com/codecommit/latest/userguide/setting-up-ssh-unixes.html" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd ir gy z fp og fr fs oh fu fw ip bi translated">Linux、macOS或Unix上AWS CodeCommit存储库的SSH连接的设置步骤</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">在第一次连接到CodeCommit之前，您必须完成一些初始配置步骤。你先请…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">docs.aws.amazon.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op kp ob"/></div></div></a></div></div></div>    
</body>
</html>