<html>
<head>
<title>How To Toggle Dark Theme With Ant Design 5.0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用蚂蚁设计5.0切换黑暗主题</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-toggle-dark-theme-with-ant-design-5-0-eb68552f62b8?source=collection_archive---------0-----------------------#2022-12-19">https://betterprogramming.pub/how-to-toggle-dark-theme-with-ant-design-5-0-eb68552f62b8?source=collection_archive---------0-----------------------#2022-12-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="88a2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过这一简单的切换提升您的用户体验</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4d049d8de58a6d77fec74a0548a7e6db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YhrR0En-skdXKhfN"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Oleksandr Kuzmin 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="6212" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Ant Design支持深色主题已经有一段时间了，在浅色和深色主题之间切换并不容易。您将有一些现成的组件支持，并且您必须使用像<a class="ae kv" href="https://www.npmjs.com/package/@callstack/react-theme-provider" rel="noopener ugc nofollow" target="_blank">@ call stack/react-theme-provider</a>这样的库来在不同的CSS文件之间切换。幸运的是，Design 5让生活变得简单多了。</p><h1 id="8a59" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">我们开始吧</h1><h2 id="7299" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">第一步</h2><p id="cb64" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">您将需要一个运行Ant Design 5.0.0或更高版本的react应用程序。</p><p id="5408" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要安装antd，请使用<code class="fe nb nc nd ne b">npm i antd</code>。</p><h2 id="11db" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">第二步</h2><p id="685f" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">转到React应用程序中的<code class="fe nb nc nd ne b">App.js</code>文件，导入以下内容:</p><pre class="kg kh ki kj gt nf ne ng bn nh ni bi"><span id="778c" class="nj lt iq ne b be nk nl l nm nn">import { useState } from "react";<br/>import { ConfigProvider, theme, Button, Card } from "antd";</span></pre><h2 id="cf74" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">第三步</h2><p id="f4d8" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">使用AntD提供的<code class="fe nb nc nd ne b">theme</code>来解构和使用AntD提供的不同主题算法。AntD提供了<code class="fe nb nc nd ne b">darkAlgorithm</code>、<code class="fe nb nc nd ne b">compactAlgorithm</code>和<code class="fe nb nc nd ne b">defaultAlgorithm</code>，但是对于我们的用例，我们将只使用<code class="fe nb nc nd ne b">darkAlgorithm</code>和<code class="fe nb nc nd ne b">defaultAlgorithm</code>。</p><pre class="kg kh ki kj gt nf ne ng bn nh ni bi"><span id="cff2" class="nj lt iq ne b be nk nl l nm nn">const { defaultAlgorithm, darkAlgorithm } = theme;</span></pre><h2 id="4d4d" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">第四步</h2><p id="7b74" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">创建一个状态来跟踪我们当前使用的主题和切换主题。理想情况下，您应该为此使用一些状态管理，但是对于我们的用例来说，<code class="fe nb nc nd ne b">useState()</code>完成了这项工作。</p><pre class="kg kh ki kj gt nf ne ng bn nh ni bi"><span id="e7da" class="nj lt iq ne b be nk nl l nm nn">const [isDarkMode, setIsDarkMode] = useState(false);</span></pre><h2 id="f492" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">第五步</h2><p id="e7fc" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">用我们从AntD导入的<code class="fe nb nc nd ne b">ConfigProvider</code>包装您的应用程序组件。这允许我们选择使用哪种算法，并根据自己的喜好定制主题。</p><pre class="kg kh ki kj gt nf ne ng bn nh ni bi"><span id="7f42" class="nj lt iq ne b be nk nl l nm nn">return (<br/>  &lt;ConfigProvider&gt;<br/>    ...<br/>  &lt;/ConfigProvider&gt;<br/>);</span></pre><h2 id="7cb7" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">第六步</h2><p id="668e" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">让我们创建一个组件，通过添加一个切换按钮来改变它的主题。</p><pre class="kg kh ki kj gt nf ne ng bn nh ni bi"><span id="63f4" class="nj lt iq ne b be nk nl l nm nn">return (<br/>  &lt;ConfigProvider&gt;<br/>    &lt;Card style={{ width: "max-content" }}&gt;<br/>      &lt;Button&gt;<br/>        Change Theme to {isDarkMode ? "Light" : "Dark"}<br/>      &lt;/Button&gt;<br/>    &lt;/Card&gt;<br/>  &lt;/ConfigProvider&gt;<br/>);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/93df1662378a332e0e3f81a08608225f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*qPFYGmXEIZpADffOPItQhw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">带有改变主题按钮的卡片</p></figure><p id="405c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">大家可以看到，Antd的<code class="fe nb nc nd ne b">ConfigProvider</code>用的是<code class="fe nb nc nd ne b">defaultAlgorithm</code>，是光主题。</p><h2 id="f21b" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">第七步</h2><p id="11c7" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">我们现在可以使用<code class="fe nb nc nd ne b">ConfigProvider</code>提供的选项在主题之间切换。</p><pre class="kg kh ki kj gt nf ne ng bn nh ni bi"><span id="ec50" class="nj lt iq ne b be nk nl l nm nn">return (<br/>  &lt;ConfigProvider<br/>    theme={{<br/>      algorithm: isDarkMode ? darkAlgorithm : defaultAlgorithm,<br/>    }}&gt;<br/>    &lt;Card style={{ width: "max-content" }}&gt;<br/>      &lt;Button&gt;<br/>        Change Theme to {isDarkMode ? "Light" : "Dark"}<br/>      &lt;/Button&gt;<br/>    &lt;/Card&gt;<br/>  &lt;/ConfigProvider&gt;<br/>);</span></pre><p id="e9b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将根据<code class="fe nb nc nd ne b">isDarkMode</code>是<code class="fe nb nc nd ne b">true</code>还是<code class="fe nb nc nd ne b">false</code>来改变主题。</p><h2 id="75ba" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">第八步</h2><p id="7688" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">虽然我们创建了一个状态来跟踪主题，但是我们没有办法改变这个状态，所以让我们创建一个<code class="fe nb nc nd ne b">onClick</code>处理程序来处理这个问题。</p><pre class="kg kh ki kj gt nf ne ng bn nh ni bi"><span id="a58a" class="nj lt iq ne b be nk nl l nm nn">const handleClick = () =&gt; {<br/>  setIsDarkMode((previousValue) =&gt; !previousValue);<br/> };</span></pre><p id="231d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后将处理程序添加到<code class="fe nb nc nd ne b">Button</code>的<code class="fe nb nc nd ne b">onClick</code>中。</p><pre class="kg kh ki kj gt nf ne ng bn nh ni bi"><span id="7dc6" class="nj lt iq ne b be nk nl l nm nn">return (<br/>  &lt;ConfigProvider<br/>    theme={{<br/>      algorithm: isDarkMode ? darkAlgorithm : defaultAlgorithm,<br/>    }}&gt;<br/>    &lt;Card style={{ width: "max-content" }}&gt;<br/>      &lt;Button onClick={handleClick}&gt;<br/>        Change Theme to {isDarkMode ? "Light" : "Dark"}<br/>      &lt;/Button&gt;<br/>    &lt;/Card&gt;<br/>  &lt;/ConfigProvider&gt;<br/>);</span></pre><p id="a381" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在你完了！</p><h1 id="70a8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">最终结果</h1><p id="c309" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">最后，你的<code class="fe nb nc nd ne b">App.js</code>应该是这样的:</p><pre class="kg kh ki kj gt nf ne ng bn nh ni bi"><span id="c40a" class="nj lt iq ne b be nk nl l nm nn">import { useState } from "react";<br/>import { ConfigProvider, theme, Button, Card } from "antd";<br/><br/>function App() {<br/> const { defaultAlgorithm, darkAlgorithm } = theme;<br/> const [isDarkMode, setIsDarkMode] = useState(false);<br/><br/> const handleClick = () =&gt; {<br/>  setIsDarkMode((previousValue) =&gt; !previousValue);<br/> };<br/><br/> return (<br/>  &lt;ConfigProvider<br/>   theme={{<br/>    algorithm: isDarkMode ? darkAlgorithm : defaultAlgorithm,<br/>   }}&gt;<br/>   &lt;Card style={{ width: "max-content" }}&gt;<br/>    &lt;Button onClick={handleClick}&gt;<br/>     Change Theme to {isDarkMode ? "Light" : "Dark"}<br/>    &lt;/Button&gt;<br/>   &lt;/Card&gt;<br/>  &lt;/ConfigProvider&gt;<br/> );<br/>}<br/><br/>export default App;</span></pre><p id="cd9c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，每当你点击<code class="fe nb nc nd ne b">Button</code>，你应该能够在亮暗主题之间切换。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/3c595c9f19e97e7989beba64bedc8c7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F_HSGbuZhzLMQCDPuulG8w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">轻音乐主题</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/8680b4aff7399098ccc88a252cff826c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7AdEwAKcGpBo9pNx7RonGQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">黑暗主题</p></figure><p id="b051" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">多年来，我一直是Ant Design的粉丝，但直到现在我才真正喜欢上他们处理主题切换的方式。Ant Design 5让切换主题和定制主题变得超级简单。</p><p id="1056" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要阅读更多关于定制的内容，请查看<a class="ae kv" href="https://ant.design/docs/react/customize-theme" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="968b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">希望这有帮助！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/4f0fc85cdaf76fc42d428d18a081b23d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/0*5xFiuckRO0GXGiSo.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">彼得·帕克开关</p></figure></div></div>    
</body>
</html>