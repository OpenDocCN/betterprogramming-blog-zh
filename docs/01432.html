<html>
<head>
<title>A Quick Guide to Integrating Leaflet.js and React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">集成Leaflet.js和React的快速指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-quick-guide-to-integrating-leaflet-js-and-react-ed89ff92790e?source=collection_archive---------8-----------------------#2019-09-09">https://betterprogramming.pub/a-quick-guide-to-integrating-leaflet-js-and-react-ed89ff92790e?source=collection_archive---------8-----------------------#2019-09-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b5e0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在React应用程序中显示地图上不同位置的简单教程</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8d4ed94c07f076228715ba7a12036a9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jK6iDgnjlGNADckZ"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@s_hietsch?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">塞巴斯蒂安·希奇</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="f9b3" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">概观</h1><p id="8c8d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">对于web开发人员来说，我们生活在一个迷人而又困惑的时代。有这么多的框架、库、插件和其他东西，有时很难决定使用哪一个以及如何集成它们以协同工作。</p><p id="48a9" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">假设您需要在React应用程序中的地图上显示不同的位置。你可以选择的最好的库之一是<a class="ae kv" href="https://leafletjs.com/" rel="noopener ugc nofollow" target="_blank"> Leaflet.js </a>，“一个用于移动友好的交互式地图的开源JavaScript库”。</p><p id="0a94" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">它使您能够轻松显示托管在公共服务器上的切片web地图，以及可选的切片叠加图。</p><p id="0338" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">因此，让我们看看如何用最少的步骤将其集成到React应用程序中。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="8db4" class="kw kx iq bd ky kz mw lb lc ld mx lf lg jw my jx li jz mz ka lk kc na kd lm ln bi translated">发展</h1><p id="b0d8" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">对于我们的例子，我们将使用我们钟爱的<a class="ae kv" href="https://github.com/facebook/create-react-app/blob/master/README.md" rel="noopener ugc nofollow" target="_blank"> Create React App </a>。(有关如何开始的说明，请使用<a class="ae kv" href="https://github.com/facebook/create-react-app/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">快速指南</a>)。</p><p id="d503" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">截至2019年9月，已创建项目的结构如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/cdcde5edf70739a8b4ade96c029a7e11.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*Ix_sHEKLfZDJdlpnBxsMVw.png"/></div></figure><p id="0675" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在，让我们添加传单库。在项目目录中，运行:</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="4f4f" class="nh kx iq nd b gy ni nj l nk nl">npm install leaflet</span></pre><p id="1b5c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">最后，我们应该在我们的<code class="fe nm nn no nd b">index.html</code>中添加CSS引用:</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="c5e3" class="nh kx iq nd b gy ni nj l nk nl">&lt;link rel="stylesheet" href="https://npmcdn.com/leaflet@1.0.0-rc.2/dist/leaflet.css" /&gt;</span></pre><p id="5e60" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">酷，现在我们准备创建我们的地图组件。我们将使用<a class="ae kv" href="https://www.openstreetmap.org/" rel="noopener ugc nofollow" target="_blank"> OpenSteetMap </a>作为我们的瓷砖来源，并将中心设在我的家乡保加利亚索非亚。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="0283" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">下一步是提高水平，并添加一个标记到我们的地图。作为一个例子，我将使用保加利亚国会大厦的坐标。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="e11c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在，你可能会说:“是的，一张带有静态标记的地图…非常有用，谢谢”。但是等等，传单可以做得更多，我们只是在热身。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="b5c0" class="kw kx iq bd ky kz mw lb lc ld mx lf lg jw my jx li jz mz ka lk kc na kd lm ln bi translated">GeoJSON简介</h1><p id="76d3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">当我第一次了解这个图书馆时，让我着迷的是在地图上显示简单的地理特征是多么容易，以<a class="ae kv" href="https://en.wikipedia.org/wiki/GeoJSON" rel="noopener ugc nofollow" target="_blank"> GeoJSON </a>格式呈现。</p><p id="0f25" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">基本上，GeoJSON是一种开放标准格式，旨在表示简单的地理要素-点(地址和位置)、线串(街道、公共交通线路等)。)、多边形(区域、状态等。).</p><p id="5c0c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">它的伟大之处在于它基于众所周知的JSON格式。</p><p id="6c2f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">对于我们的例子，我将使用一个简单的GeoJSON，<a class="ae kv" href="https://mellyan.carto.com/tables/sofia_regions/public/map" rel="noopener ugc nofollow" target="_blank">在互联网上找到</a>，代表索菲亚的不同地区。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="72c6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这是结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/05723d338b2725044dd18ca05f158acf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bseRYxHSnQ5juhAHjk-a2Q.png"/></div></div></figure><p id="3057" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在让我们在此基础上更进一步。我们将添加这样的功能，当用户单击一个多边形并将其涂上不同的颜色时，可以在多边形的中心移动标记。</p><p id="ee7d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">为此，我们需要两样东西:</p><ol class=""><li id="ae14" class="ns nt iq lq b lr mk lu ml lx nu mb nv mf nw mj nx ny nz oa bi translated">将所选要素(多边形)存储在组件状态中。</li><li id="78d7" class="ns nt iq lq b lr ob lu oc lx od mb oe mf of mj nx ny nz oa bi translated">将其添加到<code class="fe nm nn no nd b">useEffect</code>钩子的依赖项中。</li></ol><p id="4dac" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果你还是React Hooks新手，我强烈推荐看看丹·阿布拉莫夫的帖子<a class="ae kv" href="https://medium.com/@dan_abramov/making-sense-of-react-hooks-fdbde8803889" rel="noopener"> <em class="og">让React Hooks </em> </a>有意义。</p><p id="d4d8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">为了计算多边形的中心，我们将使用<a class="ae kv" href="https://en.wikipedia.org/wiki/Centroid#Of_a_polygon" rel="noopener ugc nofollow" target="_blank">公式</a>来寻找非自相交闭合多边形的质心，由<em class="og"> n </em>顶点(<em class="og"> x </em> 0，<em class="og"> y </em> 0)，(<em class="og"> x </em> 1，<em class="og"> y </em> 1)，…，(<em class="og">xn</em>1，<em class="og">yn</em>1)定义。</p><p id="cee9" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这个 StackOverflow答案的道具。</p><p id="509e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">最后，我们将在每个要素上添加一个click处理程序，在这里我们将设置新选择的要素，计算质心，并设置标记的新位置。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="be84" class="kw kx iq bd ky kz mw lb lc ld mx lf lg jw my jx li jz mz ka lk kc na kd lm ln bi translated">结论</h1><p id="1d3a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">因此，这是在React组件中集成小叶子的一种简单快捷的方法。当然，有许多方法可以进一步改进它。</p><p id="4c2e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我希望这篇文章能为读者节省一些时间。</p></div></div>    
</body>
</html>