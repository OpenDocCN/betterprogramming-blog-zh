<html>
<head>
<title>The Ugly Truth About Text Shadowing in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android中文本阴影的丑陋真相</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-ugly-truth-about-text-shadowing-in-android-776816cd9970?source=collection_archive---------16-----------------------#2020-09-25">https://betterprogramming.pub/the-ugly-truth-about-text-shadowing-in-android-776816cd9970?source=collection_archive---------16-----------------------#2020-09-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="52dc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">未记录的限制</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5268c44ebfed5c36727044afca1fc3a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_LixzPJUM2-zUEXO"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@danielkcheung?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">张家瑜</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="3589" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">几乎所有的移动应用程序都包含文本。它占据了用户界面(UI)的很大一部分。这项研究表明<a class="ae ky" href="https://www.intercom.com/blog/text-in-mobile-app-design/" rel="noopener ugc nofollow" target="_blank">文本内容覆盖了一些最受欢迎的iOS应用程序UI </a>的30-40%。</p><p id="9b89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，在构思用户界面时，你应该关注文本的可读性。</p><p id="39b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们举个例子。您可能想要在图像上显示一些文本。你有没有考虑过你的文字颜色可以和图像的背景融合在一起？如果没有，很可能你的用户不能总是阅读它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/73c7d692d7d92e917860dde57989c400.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BRw6o0fM7caFsxcFdost0g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">标题融合了米色背景和米色。</p></figure><p id="c026" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大多数时候，你可能无法控制你正在加载的图像。然后由您提供渲染机制来突出显示文本内容。</p><p id="f809" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，你可以考虑使用阴影属性。它会在文本下面产生一个彩色的覆盖层，与图像的背景形成对比。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lw"><img src="../Images/4c8b28e7bc10e08db1989bdc6289f89e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5SEPx4dE5UHV8x4NjkAY0A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">有阴影时可读性更好。</p></figure><p id="167a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Android中，<code class="fe lx ly lz ma b">TextView</code> API提供了现成的<a class="ae ky" href="https://developer.android.com/reference/kotlin/android/widget/TextView#android:shadowcolor" rel="noopener ugc nofollow" target="_blank">隐藏属性</a>。您可以指定:</p><ul class=""><li id="06a6" class="mb mc it lb b lc ld lf lg li md lm me lq mf lu mg mh mi mj bi translated">一种颜色</li><li id="9616" class="mb mc it lb b lc mk lf ml li mm lm mn lq mo lu mg mh mi mj bi translated">半径——阴影的显著程度</li><li id="ad39" class="mb mc it lb b lc mk lf ml li mm lm mn lq mo lu mg mh mi mj bi translated">偏移(水平和垂直)</li></ul><p id="867e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有这些属性看起来都很简单。然而，有一些限制，你可能不知道半径。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="04da" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">阴影半径限制</h1><p id="b8c2" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">根据<a class="ae ky" href="https://developer.android.com/reference/kotlin/android/widget/TextView#android:shadowradius" rel="noopener ugc nofollow" target="_blank">文档</a>，半径应该是一个浮点数。你也可以注意到它指的是模糊。在移动应用程序中，出于性能原因，我们通常建议使用模糊处理。</p><p id="996a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么什么才算是合理的半径呢？事实证明，这不仅取决于你的硬件，还取决于你的操作系统。</p><p id="f968" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这主要取决于你的设备的渲染能力。此外，支持API 23及以下将崩溃你的应用程序，如果你使用的阴影半径超过25。在不知道这一点的情况下，当你调试这个崩溃时，你将处于痛苦的世界中。事实上，您不会得到任何堆栈跟踪。这是您从错误控制台获得的唯一帮助:</p><pre class="kj kk kl km gt nt ma nu nv aw nw bi"><span id="2820" class="nx mx it ma b gy ny nz l oa ob">RS CPP error: Blur radius out of 0-25 pixel bound<br/>RS CPP error (masked by previous error): Allocation creation failed<br/>RS CPP error (masked by previous error): Allocation creation failed<br/>RS CPP error (masked by previous error): Blur radius out of 0-25 pixel bound<br/>A/libc: Fatal signal 11 (SIGSEGV), code 1, fault addr 0x28 in tid 10781 (RenderThread)</span></pre><p id="17aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然控制台声明模糊半径发生了一些错误，但你必须自己找出它来自于你的文本阴影。你不会知道它在哪里坠毁或为什么坠毁。</p><p id="60e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在API 23之上，我没有观察到这个问题——尽管你应该记住性能。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="e550" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">这都是关于硬件的</h1><p id="2334" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">Android配备了大量不同的设备。它们没有相同的规格。</p><p id="e964" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当谈到添加模糊效果时，系统依赖于<a class="ae ky" href="https://developer.android.com/guide/topics/graphics/hardware-accel" rel="noopener ugc nofollow" target="_blank">硬件加速</a>来优化渲染。为了避免这个崩溃，应用一个更大的阴影半径，你可以决定<a class="ae ky" href="https://stackoverflow.com/questions/37182062/how-to-create-a-large-blurred-shadow-behind-a-textview" rel="noopener ugc nofollow" target="_blank">依靠软件渲染</a>。然而，它将极大地影响您的性能渲染，而这已经受到硬件加速的威胁。</p><p id="13fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请记住，不是所有的用户都拥有最新的旗舰产品。只要你知道Android中文本阴影是如何工作的，你就应该能够在可读性和性能之间找到适当的平衡。</p></div></div>    
</body>
</html>