<html>
<head>
<title>Build a Simple Notes App With Node.js and Mongoose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Node.js和Mongoose构建一个简单的Notes应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/simple-notes-app-with-node-js-and-mongoosejs-6595cd5d15b?source=collection_archive---------7-----------------------#2020-05-19">https://betterprogramming.pub/simple-notes-app-with-node-js-and-mongoosejs-6595cd5d15b?source=collection_archive---------7-----------------------#2020-05-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6f9f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个简单的项目来磨练你的编程技能</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7dfcbf1718492d9adf33d526d850a246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n6fbnxaK6NLglLPVc387lw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">迈克尔·多莱杰斯在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="d3ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">摆脱教程并开始编写我们自己的软件的最好方法之一是创建一个简单的项目来提高我们的编程技能并修改我们所学的内容。</p><p id="66cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将构建一个小的web应用程序，您可以在其中存储笔记。</p><p id="7b9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的应用程序中的注释列表将由两部分组成:标题和描述。这将是我们最终的结果:</p><div class="kj kk kl km gt ab cb"><figure class="lv kn lw lx ly lz ma paragraph-image"><img src="../Images/feca06b4d1ba14665e31fd3b74674ca6.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*UfM0JyMPbqwc2U7KOtg_xA.png"/></figure><figure class="lv kn mb lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/59a76f6f03df73f7ea6f91ed6cbe1d93.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/1*OLhXaaMv1BuHC2elbJQuAw.png"/></div></figure><figure class="lv kn mc lx ly lz ma paragraph-image"><img src="../Images/cba136fa389c5b5afb61a0d192a93e78.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*Ogb74wLGFOgIHO8YmPDX4Q.png"/><p class="ku kv gj gh gi kw kx bd b be z dk md di me mf translated">从左到右:创建注释的页面、查看注释的页面和更新注释的页面</p></figure></div><p id="47c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始吧！</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="de0f" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">入门指南</h1><p id="b657" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">只需安装:</p><ul class=""><li id="e3a4" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated"><code class="fe nt nu nv nw b">express</code>处理路由的模块</li><li id="0cef" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><code class="fe nt nu nv nw b">mongoose</code>数据库集成模块</li><li id="fd1b" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><code class="fe nt nu nv nw b">body-parser</code>处理我们收到的数据将如何处理</li><li id="1734" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated">最后，<code class="fe nt nu nv nw b">pug</code>作为我们的视图引擎，它将充当我们的前端</li></ul><pre class="kj kk kl km gt oc nw od oe aw of bi"><span id="01b9" class="og mo it nw b gy oh oi l oj ok">npm install express<br/>npm install mongoose<br/>npm install body-parser<br/>npm install pug</span></pre><p id="3559" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们为我们的应用程序实现一个数据库。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="aabc" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">创建数据库</h1><h2 id="6a4e" class="og mo it bd mp ol om dn mt on oo dp mx li op oq mz lm or os nb lq ot ou nd ov bi translated">database.js</h2><p id="c6a7" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">我们需要一个存储系统来存放我们的笔记，这样即使项目结束，它们也可以保存下来。为了添加持久存储，我们将使用数据库。</p><p id="b5d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用文件<code class="fe nt nu nv nw b">database.js</code>连接到数据库，创建一个集合，并将我们的集合命名为<code class="fe nt nu nv nw b">Notes</code>。</p><p id="890c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个名为<code class="fe nt nu nv nw b">database.js</code>的文件，并编写以下代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/c22a6cbb4cbf6e8fe17d1fc3a1f78a41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oIU4dsv0cr-79R2yDUGh_w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">连接到数据库的代码</p></figure><ul class=""><li id="f3d8" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated"><code class="fe nt nu nv nw b">Line 1</code>:导入<code class="fe nt nu nv nw b">mongoose</code>库</li><li id="b6a8" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated">告诉Mongoose连接到我们的数据库。如果出现任何错误，那么它们应该被注销。</li></ul><p id="9da8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们需要为我们的笔记创建一个模式。在<code class="fe nt nu nv nw b">database.js</code>中，添加下面这段代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/9de040398dfaca7332741ed92553bef0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HZcLZ3OBwV1yUopMb7WVSw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用模式的代码</p></figure><p id="806d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们为我们的笔记创建了一个模式，<code class="fe nt nu nv nw b">NotesSchema</code>。如代码所示，使用该模式的文档将有两个字段:</p><ul class=""><li id="9778" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated">类型为<code class="fe nt nu nv nw b">String</code>的<code class="fe nt nu nv nw b">title</code>字段</li><li id="6ffe" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated">类型为<code class="fe nt nu nv nw b">String</code>的<code class="fe nt nu nv nw b">description</code>字段</li></ul><p id="61ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们创建一个名为<code class="fe nt nu nv nw b">Notes</code>的集合，它将使用<code class="fe nt nu nv nw b">NotesSchema</code>。</p><p id="38ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，在<code class="fe nt nu nv nw b">database.js</code>中，编写这段代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/35bab274d84c8fb587608469fbf8d7e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J0Nh07wTyPncoT5WeUWR3g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建一个收藏，然后将其导出</p></figure><ul class=""><li id="fa60" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated">第3行:在我们的<code class="fe nt nu nv nw b">Notes</code>模型上使用<code class="fe nt nu nv nw b">module.exports</code>，这样我们就可以在代码中使用这个集合。</li></ul><p id="13ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，<code class="fe nt nu nv nw b">database.js</code>应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oz pa l"/></div></figure><p id="218e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们进入应用程序的第二部分，<code class="fe nt nu nv nw b">update-router.js</code>。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="5355" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">用于更新文档的中间件</h1><h2 id="54c6" class="og mo it bd mp ol om dn mt on oo dp mx li op oq mz lm or os nb lq ot ou nd ov bi translated">更新-router.js</h2><p id="9bb3" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">每当用户导航到以<code class="fe nt nu nv nw b">updatepage</code>开头的目录时，该文件将处理路由。正如路径所示，这里用户将更新他各自的笔记。</p><p id="6565" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该文件将执行以下操作</p><ul class=""><li id="3a65" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated">使用<code class="fe nt nu nv nw b">express.Router()</code>中间件将<code class="fe nt nu nv nw b">id</code>数据发送到路径<code class="fe nt nu nv nw b">updatepage</code>和<code class="fe nt nu nv nw b">updatepage:/__id</code></li><li id="a9cf" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated">这个<code class="fe nt nu nv nw b">__id</code>字段将是必需的，这样数据库可以选择具有指定ID的票据，这将是更新目的所需要的</li></ul><p id="769e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们首先创建一个<code class="fe nt nu nv nw b">express.Router()</code>的实例，并创建一个临时变量<code class="fe nt nu nv nw b">id</code>，来存储不同路由的ID。</p><p id="aa9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nt nu nv nw b">update-router.js</code>中，编写以下代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/c0708dfa19c67140920c9b45e439fc80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xEoZiXTIRUzQvJiN7vM-0w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">路由器和“id”变量的初始化</p></figure><ul class=""><li id="5e69" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated">第1行:创建一个快速路由器实例。</li></ul><p id="6d68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于这个文件是中间件，我们可以向<code class="fe nt nu nv nw b">request</code>对象添加属性。</p><p id="3482" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们对以<code class="fe nt nu nv nw b">/:__id</code>结尾的路线执行一个<code class="fe nt nu nv nw b">GET</code>请求，然后将<code class="fe nt nu nv nw b">req.id</code>属性赋给路线的<code class="fe nt nu nv nw b">__id</code>参数:</p><p id="0dc8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，在<code class="fe nt nu nv nw b">update-router.js</code>中，编写以下代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/9839d21779c3456da6324947ed2f26f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k4-_DxH9UJir0Ody4ZXirg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">路由器中的“GET”请求</p></figure><ul class=""><li id="19f6" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated">第1行:处理对<code class="fe nt nu nv nw b">/:_id</code>路径的<code class="fe nt nu nv nw b">GET</code>请求。</li><li id="fb9e" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated">第2行:<code class="fe nt nu nv nw b">id</code>变量被赋予了<code class="fe nt nu nv nw b">req.id</code>属性。换句话说，URL中的<code class="fe nt nu nv nw b">__id</code>参数现在存储在这个<code class="fe nt nu nv nw b">id</code>变量中。</li></ul><p id="00d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意临时变量<code class="fe nt nu nv nw b">id</code>也被赋予了相同的值。我们这样做是因为<code class="fe nt nu nv nw b">req.id</code>属性不会在不同的路径中保持不变。</p><p id="2ea0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，在<code class="fe nt nu nv nw b">update-router.js</code>中，编写下面这段代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/1b98d7ad3856cbb46bf47aa60a3a4af0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*T75-mmv1h3zM3SAKbX80Pw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“过帐”请求</p></figure><ul class=""><li id="1600" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated">第1行:现在对以<code class="fe nt nu nv nw b">/</code>结束的路线执行一个<code class="fe nt nu nv nw b">POST</code>请求。</li><li id="9bdc" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated">第3行:使用<code class="fe nt nu nv nw b">next</code>函数继续下一个请求。</li></ul><p id="800e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，<code class="fe nt nu nv nw b">req.id</code>属性在<code class="fe nt nu nv nw b">updatepage/</code>和<code class="fe nt nu nv nw b">updatepage/:__id</code>中都是持久的。</p><p id="a887" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，使用<code class="fe nt nu nv nw b">module.exports</code>导出<code class="fe nt nu nv nw b">Router</code>对象，这样它就可以在其他文件中使用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/94feacdba397d3415f5890e54a715376.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*ajT5Zayow05kwwY7SQGIJg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">导出路由器</p></figure><p id="d9af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最终，<code class="fe nt nu nv nw b">update-router.js</code>会是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oz pa l"/></div></figure></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="fefe" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">主JavaScript文件</h1><h2 id="b8de" class="og mo it bd mp ol om dn mt on oo dp mx li op oq mz lm or os nb lq ot ou nd ov bi translated">主页. js</h2><p id="e290" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">这个文件<code class="fe nt nu nv nw b">main.js</code>将处理以下内容:</p><ul class=""><li id="1217" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated">我们的路线</li><li id="22f2" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated">所有CRUD操作</li><li id="738c" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated">处理客户端发送的传入数据</li><li id="e04f" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated">向前端发送数据</li></ul><h2 id="0a31" class="og mo it bd mp ol om dn mt on oo dp mx li op oq mz lm or os nb lq ot ou nd ov bi translated">HTML文件</h2><p id="b51c" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">对于我们的前端，我们将创建以下文件。</p><ul class=""><li id="3799" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated"><code class="fe nt nu nv nw b">notes-add</code>:用于添加我们的注释。这将是我们的主页。</li><li id="38d4" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><code class="fe nt nu nv nw b">view</code>:查看我们创建的笔记</li><li id="cfb3" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><code class="fe nt nu nv nw b">updatepage</code>:用于更新我们选择的便笺</li></ul><h2 id="9872" class="og mo it bd mp ol om dn mt on oo dp mx li op oq mz lm or os nb lq ot ou nd ov bi translated">导入库</h2><p id="7d29" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">假设已经安装了所有模块，让我们使用<code class="fe nt nu nv nw b">require</code>在您的代码中使用它们的功能，并使用我们刚刚导出的<code class="fe nt nu nv nw b">Notes</code>集合。</p><p id="7862" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nt nu nv nw b">main.js</code>中，编写以下代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/dca1a1c58962dd437c36656e24723b6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cB1PN0E2wJRc_MRcBL3D7A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们需要的模块</p></figure><h2 id="989e" class="og mo it bd mp ol om dn mt on oo dp mx li op oq mz lm or os nb lq ot ou nd ov bi translated">配置和中间件</h2><p id="feae" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">现在我们需要配置Express的视图引擎，并使用中间件来处理数据。在<code class="fe nt nu nv nw b">main.js</code>中，编写以下代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/474a6efc9bf1bee68e05bef5cd78ef6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sOzUcDGONZhG4iOHn1YDFA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">中间件的配置和使用</p></figure><ul class=""><li id="a0af" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated"><strong class="lb iu">第1-2行:</strong>将前端的视图引擎设置为<code class="fe nt nu nv nw b">pug</code>，然后指定我们的<code class="fe nt nu nv nw b">pug</code>文件将保存在哪个文件夹中。在这种情况下，文件将保存在<code class="fe nt nu nv nw b">views</code>文件夹中。</li><li id="c003" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><strong class="lb iu">第4行:</strong>使用<code class="fe nt nu nv nw b">body-parser</code>模块解析传入的数据。<code class="fe nt nu nv nw b">urlencoded()</code>方法意味着模块将解析来自简单HTML表单的数据。</li><li id="b9a6" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><strong class="lb iu">第6行:</strong>每当用户导航到以<code class="fe nt nu nv nw b">/updatepage</code>开头的目录时，使用<code class="fe nt nu nv nw b">updateRouter</code>中间件来处理路由</li><li id="9abc" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><strong class="lb iu">第7-10行:</strong>查看用户已经导航到的目录以及执行了什么类型的HTTP请求(例如<code class="fe nt nu nv nw b">GET</code>、<code class="fe nt nu nv nw b">POST</code>等)。)在我们的服务器端终端中</li></ul><h2 id="ff4a" class="og mo it bd mp ol om dn mt on oo dp mx li op oq mz lm or os nb lq ot ou nd ov bi translated">创建笔记</h2><p id="d479" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">每当用户导航到我们的主页，他执行一个<code class="fe nt nu nv nw b">GET</code>请求。因此，如果用户导航到主页，我们希望呈现一个名为<code class="fe nt nu nv nw b">notes-add.pug</code>的<code class="fe nt nu nv nw b">pug</code>文件。</p><p id="a85e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nt nu nv nw b">main.js</code>中，编写以下代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/5bd694d041718db488462e28a141b985.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*905ZhMc1eSeHe3Y79APrzw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">主页的“获取”请求</p></figure><ul class=""><li id="57d8" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated">第1行:处理对<code class="fe nt nu nv nw b">/notes-add</code>目录的GET请求。</li><li id="c3bb" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated">第2行:渲染<code class="fe nt nu nv nw b">notes-add.pug</code>文件。</li></ul><p id="f312" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个页面将由一个简单的HTML表单组成。</p><p id="cf9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nt nu nv nw b">notes-add.pug</code>中，每当提交一个表单时，就会执行一个<code class="fe nt nu nv nw b">POST</code>请求。</p><p id="6364" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了处理这个<code class="fe nt nu nv nw b">POST</code>请求，在<code class="fe nt nu nv nw b">main.js</code>中编写以下代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/1d77b99184d00fb9a2082c3b662a8095.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uIBVjNJsn-ISKAcg1WwZAw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">处理“发布”请求</p></figure><ul class=""><li id="c287" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated"><strong class="lb iu">第5-6行:</strong>将字段分配给表单将返回的各自的<code class="fe nt nu nv nw b">req.body </code>属性</li><li id="f3ba" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><strong class="lb iu">第8-10行:</strong>将文档保存到数据库，并输出文档</li><li id="1ff2" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><strong class="lb iu">第12行:</strong>操作完成后，重定向到<code class="fe nt nu nv nw b">/index</code>，查看我们的文档</li></ul><p id="bf91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，<code class="fe nt nu nv nw b">main.js</code>应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oz pa l"/></div></figure><p id="7555" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在已经完成了，我们只需要创建一个名为<code class="fe nt nu nv nw b">notes-add.pug</code>的文件。这将是我们的前端。<code class="fe nt nu nv nw b">notes-add.pug</code>的代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oz pa l"/></div></figure><p id="7515" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这只是一个简单的HTML表单。当按下<code class="fe nt nu nv nw b">submit</code>按钮时，执行路径<code class="fe nt nu nv nw b">/notes-add</code>的<code class="fe nt nu nv nw b">POST</code>请求。</p><p id="4ee2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过键入以下命令尝试运行代码:</p><pre class="kj kk kl km gt oc nw od oe aw of bi"><span id="082b" class="og mo it nw b gy oh oi l oj ok">node main</span></pre><p id="3a52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到<code class="fe nt nu nv nw b">localhost:3000/notes-add</code>。在表单中键入任何内容，然后按回车键。您可能会在下一页遇到错误。但是，在终端窗口中，输出可能如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/4cf937fcf4a65236dac1220b0dbe5de8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*xcKKFVyUyzgLVbcYBh3azA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出</p></figure><p id="8852" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经添加了我们的笔记，我们想要真正地阅读它们。</p><h2 id="2dc1" class="og mo it bd mp ol om dn mt on oo dp mx li op oq mz lm or os nb lq ot ou nd ov bi translated">查找/阅读我们的笔记</h2><p id="bcb3" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">如上所述，<code class="fe nt nu nv nw b">/index</code>路径将帮助我们查看笔记。如果客户端只从这个路径接收数据，我们应该处理哪种HTTP请求？</p><p id="7c4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这次我们将处理的请求类型是一个<code class="fe nt nu nv nw b">GET</code>请求，因为我们只获取数据。</p><p id="b493" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nt nu nv nw b">main.js</code>中，编写下面这段代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/bb6aaf6985325a4a57375443e8c9f73a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XPQl1C5R6q3oVqz9ie-h8A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用于处理/索引“GET”请求的代码</p></figure><ul class=""><li id="bc1a" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated">第1行:处理对<code class="fe nt nu nv nw b">/index</code>路径的<code class="fe nt nu nv nw b">GET</code>请求。</li><li id="57dd" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated">第2-6行:我们在数据库中运行一个查询。由于<code class="fe nt nu nv nw b">query</code>参数为空，这表示我们希望所有的文档都出现在数据库中。</li><li id="8af7" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><strong class="lb iu">第4行:</strong>打印出符合查询条件的文档</li></ul><p id="c7ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在要运行这段代码，请转到<code class="fe nt nu nv nw b">localhost:3000/index</code>。控制台中的输出可能如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/717cc586ab2715f801c917aa8b42bc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*MH4cg93DwANf8jj4haVy9g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码的输出</p></figure><p id="0e6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了构建这个路径的前端，我们需要在一个名为<code class="fe nt nu nv nw b">view.pug</code>的文件中渲染它。</p><p id="4152" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nt nu nv nw b">view.pug</code>的代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oz pa l"/></div></figure><p id="4108" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最终，我们现在需要修改我们的<code class="fe nt nu nv nw b">GET</code>请求。在<code class="fe nt nu nv nw b">main.js</code>中，编写以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oz pa l"/></div></figure><ul class=""><li id="5816" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated">第1行:处理<code class="fe nt nu nv nw b">/index</code> GET请求。</li><li id="de69" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated">第2行:告诉Mongoose列出<code class="fe nt nu nv nw b">Notes</code>集合中的所有文档。</li><li id="4434" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><strong class="lb iu">第7行:</strong>渲染<code class="fe nt nu nv nw b">view.pug</code>文件，将返回的文档发送到前端(<code class="fe nt nu nv nw b">view.pug</code>)以便渲染。</li></ul><p id="ef59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在转到<code class="fe nt nu nv nw b">localhost:3000/index</code>。输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/06ffe681c75314965ffd05084c4a5ab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*pNSOQ___1EXFnC2JFXPbdg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">/索引页的前端</p></figure><p id="42f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">客户想要删除一个便笺。现在让我们实现删除功能。</p><h2 id="122b" class="og mo it bd mp ol om dn mt on oo dp mx li op oq mz lm or os nb lq ot ou nd ov bi translated">删除注释</h2><p id="6e97" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">看一下<code class="fe nt nu nv nw b">view.pug</code>文件。我们可以这样做:</p><ul class=""><li id="aeb2" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated">每当用户点击删除按钮时，用户被重定向到一个<code class="fe nt nu nv nw b">/delete</code>路径，文档的<code class="fe nt nu nv nw b">id</code>作为一个参数被发送</li><li id="c4db" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated">我们可以使用这个<code class="fe nt nu nv nw b">id</code>字段来识别文档，然后删除它</li></ul><p id="c5bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们对<code class="fe nt nu nv nw b">/delete</code>路径执行一个<code class="fe nt nu nv nw b">GET</code>请求:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oz pa l"/></div></figure><ul class=""><li id="3ab8" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated"><code class="fe nt nu nv nw b">Line 1</code>:处理对<code class="fe nt nu nv nw b">/delete/:_id</code>路径的<code class="fe nt nu nv nw b">GET</code>请求。</li><li id="dc35" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><strong class="lb iu">第2行:</strong>执行一个查询，查找参数中有<code class="fe nt nu nv nw b">id</code>的文档。一旦找到这份文件。将其从<code class="fe nt nu nv nw b">Notes</code>收藏中移除。</li><li id="070a" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><strong class="lb iu">第6行:</strong>将用户重定向到<code class="fe nt nu nv nw b">/index</code>路径，这将允许他们在操作完成后查看他们所有的文档</li></ul><p id="f40f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转至<code class="fe nt nu nv nw b">localhost:3000/index</code>，然后按下删除按钮。</p><div class="kj kk kl km gt ab cb"><figure class="lv kn pl lx ly lz ma paragraph-image"><img src="../Images/60e03d72e776ca8d4871113df0b1f28c.png" data-original-src="https://miro.medium.com/v2/resize:fit:582/format:webp/1*aPfnkHIEFbr53Ypmz3RRlQ.png"/></figure><figure class="lv kn pm lx ly lz ma paragraph-image"><img src="../Images/0d451727accdccabd51435afc73c893d.png" data-original-src="https://miro.medium.com/v2/resize:fit:508/format:webp/1*WWTdiw2bEYMWiMWihnHU8Q.png"/><p class="ku kv gj gh gi kw kx bd b be z dk pn di po mf translated">从左到右:单击删除之前和单击删除之后</p></figure></div><p id="767a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，我们在数据库中有一个文档。删除后，不会留下任何文档。</p><p id="c021" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是终端中的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/f61244e03b53df691ef843c83574f566.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*_dowzB510dHaGallDKPDng.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">终端中的输出</p></figure><p id="f5ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，客户不是删除，而是想纠正笔记中的打字错误。现在让我们在应用程序中实现编辑。</p><h2 id="0cd9" class="og mo it bd mp ol om dn mt on oo dp mx li op oq mz lm or os nb lq ot ou nd ov bi translated">更新/编辑我们的笔记</h2><p id="da4d" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">在<code class="fe nt nu nv nw b">view.pug</code>文件内:</p><ul class=""><li id="dcfc" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated">注意，当用户点击更新按钮时，应用程序将用户重定向到参数中带有<code class="fe nt nu nv nw b">id</code>的<code class="fe nt nu nv nw b">/updatepage</code>目录</li></ul><p id="f553" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以这样做:</p><ul class=""><li id="eeff" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated">对<code class="fe nt nu nv nw b">/updatepage</code>目录执行一个<code class="fe nt nu nv nw b">GET</code>请求，并获取参数中的<code class="fe nt nu nv nw b">id</code>字段</li><li id="697a" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated">找到带有给定<code class="fe nt nu nv nw b">id</code>的文档，并将其发送到一个单独的页面<code class="fe nt nu nv nw b">updatepage.pug</code>，用于更新目的</li></ul><p id="f57f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nt nu nv nw b">main.js</code>中，编写以下代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/eba19332a947f6e426326038084d5b7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bLCi4z8tuI9542oG-U-H9A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">对“更新页面”执行“获取”请求</p></figure><ul class=""><li id="d42d" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated"><strong class="lb iu">线1 </strong>:处理<code class="fe nt nu nv nw b">/updatepage/:_id</code>路径的<code class="fe nt nu nv nw b">GET</code>请求。</li><li id="a623" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><strong class="lb iu">第3行</strong>:执行查询，获取相关<code class="fe nt nu nv nw b">id</code>的票据。</li><li id="eeba" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><strong class="lb iu">第6行:</strong>将这个返回的文档发送到<code class="fe nt nu nv nw b">updatepage.pug</code>文件</li></ul><p id="a82a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">记得我们在<code class="fe nt nu nv nw b">main.js</code>文件的开头构建了一个中间件，它将把<code class="fe nt nu nv nw b">req.id</code>属性分配给URL中的<code class="fe nt nu nv nw b">id</code>参数。</p><p id="542b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到<code class="fe nt nu nv nw b">localhost:3000/index</code>，点击更新按钮。</p><div class="kj kk kl km gt ab cb"><figure class="lv kn pq lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/8f7f34ae1c5b09ab9f7c352fc9f3c6d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*PZ6ASyiRYEjK4iXXSnATMQ.png"/></div></figure><figure class="lv kn pr lx ly lz ma paragraph-image"><img src="../Images/cb813bc8bf4660d4a9f201f8494d38dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*sl7DtIlBIvVQ5F2SZdp8Jg.png"/><p class="ku kv gj gh gi kw kx bd b be z dk ps di pt mf translated">按下更新按钮(左)会在终端(右)中给出以下输出</p></figure></div><p id="8a98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nt nu nv nw b">updatepage.pug</code>的代码是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oz pa l"/></div></figure><ul class=""><li id="c249" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated"><strong class="lb iu">第4行和第6行:</strong>将相应的输入值设置到<code class="fe nt nu nv nw b">title</code>和<code class="fe nt nu nv nw b">description</code></li></ul><p id="398f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">提交按钮会将用户重定向到<code class="fe nt nu nv nw b">/updatepage</code>，它还会执行一个<code class="fe nt nu nv nw b">POST</code>请求。</p><p id="d2ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来处理<code class="fe nt nu nv nw b">POST</code>请求:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pu"><img src="../Images/485e275890721fc0405794ac4eb8f717.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e5jF409popF1huhUZ-z-8Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">处理“POST”请求</p></figure><ul class=""><li id="0381" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated"><strong class="lb iu">第1行</strong>:处理对<code class="fe nt nu nv nw b">/updatepage</code> URL的<code class="fe nt nu nv nw b">POST</code>请求。</li><li id="87ce" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><strong class="lb iu">第3-7行:</strong>执行查询以找到具有特定<code class="fe nt nu nv nw b">id</code>的文档。分别更新<code class="fe nt nu nv nw b">title</code>和<code class="fe nt nu nv nw b">description</code>字段。</li><li id="0ba9" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><strong class="lb iu">第11行:</strong>重定向到<code class="fe nt nu nv nw b">/index</code>目录</li></ul><p id="e8ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在按下更新按钮，它将渲染<code class="fe nt nu nv nw b">updatepage</code>。代码的输出是这样的:</p><div class="kj kk kl km gt ab cb"><figure class="lv kn pv lx ly lz ma paragraph-image"><img src="../Images/1982b2f13e9f3e0a32dbdd87106565ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:508/format:webp/1*SOsBEh2-usQh5AcOCHdbCA.png"/></figure><figure class="lv kn pw lx ly lz ma paragraph-image"><img src="../Images/a22e1f17e0df3ebd13f49de9b9c327c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/format:webp/1*2P5sFnHt2h-A79Tbw4XZng.png"/></figure><figure class="lv kn px lx ly lz ma paragraph-image"><img src="../Images/f1a55fe7f66085398126b6794756ee27.png" data-original-src="https://miro.medium.com/v2/resize:fit:564/format:webp/1*aXoXOFY9hSre22ODf6KvMg.png"/><p class="ku kv gj gh gi kw kx bd b be z dk py di pz mf translated">按下更新按钮(左)，然后更新(中)。最后，结果(右)。</p></figure></div><p id="c62b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最终，处理<code class="fe nt nu nv nw b">POST</code>和<code class="fe nt nu nv nw b">GET</code>请求的代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oz pa l"/></div></figure></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="f894" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">资源</h1><h2 id="f720" class="og mo it bd mp ol om dn mt on oo dp mx li op oq mz lm or os nb lq ot ou nd ov bi translated">密码</h2><p id="6b32" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated"><a class="ae ky" href="https://github.com/HussainArif12/SimpleNoteList/tree/master" rel="noopener ugc nofollow" target="_blank">项目的GitHub库</a></p><h2 id="5291" class="og mo it bd mp ol om dn mt on oo dp mx li op oq mz lm or os nb lq ot ou nd ov bi translated">其他资源/刷新者</h2><ul class=""><li id="ea63" class="nk nl it lb b lc nf lf ng li qa lm qb lq qc lu np nq nr ns bi translated"><a class="ae ky" href="https://medium.com/better-programming/express-js-routing-1b48f459d43a" rel="noopener">快速路由</a></li><li id="3e0f" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><a class="ae ky" href="https://medium.com/javascript-in-plain-english/express-js-middleware-ddcc79d98dc9" rel="noopener">Express中的中间件</a></li><li id="156e" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><a class="ae ky" href="https://medium.com/easyread/introduction-to-express-js-246191ec05f2" rel="noopener">使用Express作为网络服务器</a></li><li id="3deb" class="nk nl it lb b lc nx lf ny li nz lm oa lq ob lu np nq nr ns bi translated"><a class="ae ky" href="https://medium.com/better-programming/how-to-use-mongoose-with-node-js-913a8073b29c" rel="noopener">使用Mongoose和Node.js </a></li></ul></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="0350" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">结论</h1><p id="6752" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">在下一篇文章中，我们将开始React库的学习之旅。</p><p id="a035" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经成功构建了一个具有所有CRUD功能的notes应用程序。代码一开始可能看起来很复杂；然而，只有当你自己编写代码时，学习才有可能。你将通过做而不是看来学习。</p><p id="608e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我真的希望你从上面的代码中学到了很多。</p><p id="9fe6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">呆在家里。注意安全。</p></div></div>    
</body>
</html>