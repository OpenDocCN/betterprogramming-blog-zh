<html>
<head>
<title>A New Way of Dispatching Actions With Ngxs for Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一种利用Ngxs为Angular调度动作的新方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-new-way-of-dispatching-actions-with-ngxs-for-angular-7541f0adb812?source=collection_archive---------7-----------------------#2019-12-13">https://betterprogramming.pub/a-new-way-of-dispatching-actions-with-ngxs-for-angular-7541f0adb812?source=collection_archive---------7-----------------------#2019-12-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><p id="bc5c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">用这个新的库整理你的代码</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/154fbdfff9ef37f9aef9eaf8940efc5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nrtdVXRHYcxGt1dQ4wGZmA.jpeg"/></div></div><p class="lb lc gk gi gj ld le bd b be z dk translated">照片由<a class="ae lf" href="https://www.pexels.com/photo/brown-and-black-wooden-wall-decor-1816230/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae lf" href="https://www.pexels.com/@zachtheshooter?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">扎卡里·德波蒂斯</a>拍摄</p></figure><p id="e870" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">开发中的另一个基本优先事项是尽量减少样板文件的使用。一般来说，保持代码尽可能简单是一个好的做法，避免冗长以控制技术债务。</p><p id="a272" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">对我来说，没有什么比一个有数百行代码的文件更令人沮丧的了，这就是为什么我总是在寻找以一种更干净和更清晰的方式编写的方法。在这篇文章中，我将向您展示一种更好的方法来将动作分派给Angular NgXs <code class="fe lg lh li lj b">Store</code>。</p></div><div class="ab cl lk ll hy lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="in io ip iq ir"><h1 id="1ca6" class="lr ls iu bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">问题是</h1><p id="de42" class="pw-post-body-paragraph jr js iu jt b ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko in bi translated">为我们的状态管理编写样板代码可能是一个漫长的过程。如果我们正在开发一个复杂的应用程序，其中有大量的操作由<code class="fe lg lh li lj b">Store</code>处理，我们可能需要几十个不同的<code class="fe lg lh li lj b">@Select()</code> <em class="mu"> </em>函数(以及<code class="fe lg lh li lj b">Action</code> <em class="mu"> </em>声明)。</p><p id="40e7" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">当涉及到从我们的组件分派动作时，我们可以很容易地找到下面这样的情况，我们将多个更新分派给<code class="fe lg lh li lj b">Store</code>，以在路由到<code class="fe lg lh li lj b">success</code>页面之前执行一系列不同的动作:</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="mv mw l"/></div></figure></div><div class="ab cl lk ll hy lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="in io ip iq ir"><h1 id="e16f" class="lr ls iu bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">解决方案:引入<em class="mx">分派</em>装饰器</h1><p id="9ade" class="pw-post-body-paragraph jr js iu jt b ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko in bi translated"><a class="ae lf" href="https://www.npmjs.com/package/@ngxs-labs/dispatch-decorator" rel="noopener ugc nofollow" target="_blank">@ ngxs-Labs/dispatch-decorator</a>是NGXS实验室为<a class="ae lf" href="https://www.ngxs.io/" rel="noopener ugc nofollow" target="_blank"> NGXS </a>开发的另一个有趣的实验特性。</p><p id="cf4d" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">尽管它仍然不是官方NGXS软件包的一部分，但它很可能会很快成为官方特性。这个包允许我们使用@Dispatch装饰器，而不用在组件的构造函数中注入<code class="fe lg lh li lj b">Store</code>。此外，它帮助我们编写更加紧凑的代码。</p><p id="a1eb" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我们可以使用脚本来安装它:</p><pre class="kq kr ks kt gu my lj mz na aw nb bi"><span id="129a" class="nc ls iu lj b gz nd ne l nf ng">npm i @ngxs-labs/dispatch-decorator</span></pre><p id="19a2" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">并且我们可以把它包含在我们的<code class="fe lg lh li lj b">app.module.ts</code> <em class="mu"> : </em>中</p><pre class="kq kr ks kt gu my lj mz na aw nb bi"><span id="8b16" class="nc ls iu lj b gz nd ne l nf ng"><strong class="lj iv">import</strong> { NgModule } <strong class="lj iv">from</strong> '@angular/core';<br/><strong class="lj iv">import</strong> { NgxsModule } <strong class="lj iv">from</strong> '@ngxs/store';<br/><strong class="lj iv">import</strong> { NgxsDispatchPluginModule } <strong class="lj iv">from</strong> '@ngxs-labs/dispatch-decorator';</span><span id="caf7" class="nc ls iu lj b gz nh ne l nf ng">@NgModule({<br/>imports: [<br/>NgxsModule.forRoot(CartState, ProductState),<br/>NgxsDispatchPluginModule.forRoot()<br/>]<br/>})</span><span id="27f0" class="nc ls iu lj b gz nh ne l nf ng"><strong class="lj iv">export</strong> class AppModule {}</span></pre><p id="1c12" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">现在，我们准备用@Dispatch装饰器替换对<code class="fe lg lh li lj b">Store</code>的调用:</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="mv mw l"/></div></figure><p id="ecf6" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">好多了。尽情享受吧！</p></div><div class="ab cl lk ll hy lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="in io ip iq ir"><h1 id="2c3c" class="lr ls iu bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">进一步阅读</h1><div class="ni nj gq gs nk nl"><a href="https://medium.com/better-programming/how-i-got-rid-of-state-observables-in-angular-2c69cbbbbd0e" rel="noopener follow" target="_blank"><div class="nm ab fp"><div class="nn ab no cl cj np"><h2 class="bd iv gz z fq nq fs ft nr fv fx it bi translated">我是如何在Angular中消除状态可观测量的</h2><div class="ns l"><h3 class="bd b gz z fq nq fs ft nr fv fx dk translated">我不会回去的</h3></div><div class="nt l"><p class="bd b dl z fq nq fs ft nr fv fx dk translated">medium.com</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz kz nl"/></div></div></a></div><div class="ni nj gq gs nk nl"><a href="https://medium.com/better-programming/how-to-create-a-simple-store-in-angular-577a8f21a3d6" rel="noopener follow" target="_blank"><div class="nm ab fp"><div class="nn ab no cl cj np"><h2 class="bd iv gz z fq nq fs ft nr fv fx it bi translated">如何在Angular中创建一个简单的商店</h2><div class="ns l"><h3 class="bd b gz z fq nq fs ft nr fv fx dk translated">用单一的事实来源增强你的应用</h3></div><div class="nt l"><p class="bd b dl z fq nq fs ft nr fv fx dk translated">medium.com</p></div></div><div class="nu l"><div class="oa l nw nx ny nu nz kz nl"/></div></div></a></div></div></div>    
</body>
</html>