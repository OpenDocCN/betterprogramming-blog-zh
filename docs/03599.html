<html>
<head>
<title>4 Linux Monitoring Tools You Should Use</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您应该使用的4个Linux监控工具</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/4-linux-monitoring-tools-you-should-use-38a136e68639?source=collection_archive---------7-----------------------#2020-02-20">https://betterprogramming.pub/4-linux-monitoring-tools-you-should-use-38a136e68639?source=collection_archive---------7-----------------------#2020-02-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="132c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用这些工具看看到底发生了什么</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/19195e3fb994eb1e9dac366dea212180.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wZAZ1OQ0YrzGwiGEGm98qg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">卢卡斯·布拉塞克在<a class="ae ky" href="https://unsplash.com/s/photos/graph?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="7539" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你不知道你的服务器的底层操作系统正在发生什么，你就是瞎飞。你可以做出有根据的猜测，但是当它发生时，你需要原始数据——而且你很快就需要它。</p><p id="e33b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了对系统变更做出明智的决策，您需要能够查明问题并检查清晰的数据。</p><p id="e834" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你有没有注意到一台机器运行缓慢，但CPU使用率似乎不是很高？您是否发现了系统上极高的网络利用率，但却不知道违规的进程？</p><p id="8db1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些工具会有所帮助。最好的部分是，它们中的大多数可以在没有GUI的情况下使用，并且可以很容易地安装在大多数服务器上。</p><p id="a085" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是我日常使用的一些最好的Linux监控工具，帮助我快速准确地诊断问题。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5c64" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.iotop</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/37926f965229edefc387b0aea41af2ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eZ4yegDrlxZipvYJf0GlNA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">谁在使用I/O，iotop中有多少？</p></figure><p id="391d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想知道你宝贵的I/O有多少被某些进程消耗掉了，<a class="ae ky" href="https://linux.die.net/man/1/iotop" rel="noopener ugc nofollow" target="_blank"> iotop </a>来拯救你！我无数次使用这种方法来观察渴求磁盘的进程啃噬IOPS。</p><p id="f539" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你无法从像top这样的传统工具中获得原始数据。当您使用iotop时，您得到的正是它听起来的样子:以I/O为中心查看进程和系统使用情况。</p><p id="94cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以将它用于多种目的，但最重要的一个目的是查看磁盘使用情况并标记潜在的瓶颈。将该工具与其他工具(如top或htop)结合使用，可以让您更全面地了解您的机器上正在发生的事情。</p><p id="4d10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不建议使用iotop的一个原因是基准测试速度。尽管您可以清楚地了解每个进程使用了多少I/O，但这更适合于实时监控，而不是重复测试。如果你对基准测试I/O感兴趣，我会看看一个叫做<a class="ae ky" href="https://fio.readthedocs.io/en/latest/fio_doc.html" rel="noopener ugc nofollow" target="_blank"> fio </a>的工具。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5395" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.htop</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/b3099c02639094e93bc3ac3d9609617e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mLIXkyNbmxd9Gp4wLUTu4w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">所有重要信息都在一个单一的窗口中。</p></figure><p id="98fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我个人的最爱之一。<a class="ae ky" href="https://hisham.hm/htop/" rel="noopener ugc nofollow" target="_blank">这个工具</a>比普通的上衣更具视觉吸引力，并且有一个很棒的默认配色方案。很快，你就能清楚地了解系统的情况。</p><p id="9c2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在一个清晰的水平条形图上看到机器有多少个内核以及它们的利用率。您可以以同样的方式轻松获得内存使用统计数据，并且在底部还有经典的top process列表。</p><p id="d8d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我如此喜欢htop的主要原因是它能迅速给我我所关心的信息。我想看看我的每个内核的CPU使用率和内存利用率，不是一个无聊的百分比。</p><p id="1b63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你认为某个东西正在耗尽你系统上的所有内核，然后你打开htop，那么你会看到很多红色。它的<em class="mw">快而</em>简洁。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b03a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.IPTraf</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/fe061d5d00080f408efe69b8a536129c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ik1rkiwxOocaoyqzaW521A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在iptraf-ng中监视时向Google发送pings。</p></figure><p id="404e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是<a class="ae ky" href="http://iptraf.seul.org/" rel="noopener ugc nofollow" target="_blank">诊断网络问题的一个非常有用的工具</a>。使用这个工具，您可以监控通过您系统的所有网络流量。您可以为特定的接口或流量类型(如特定的TCP端口)设置过滤器。这与<a class="ae ky" href="https://www.wireshark.org/" rel="noopener ugc nofollow" target="_blank"> Wireshark、</a>非常相似，只是它更轻量级，也可以在没有GUI的情况下运行。</p><p id="c8bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以做一些简单的事情，比如按总数据包大小对流量进行统计分析:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/22eecd4dbbbd3ddfd2ccb2be9aa5b1e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nxLez03HtE_tjF4vTNUaDw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">iptraf-ng中按数据包大小的统计细分。</p></figure><p id="49c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用类似于<code class="fe mz na nb nc b">tcpdump</code>或<code class="fe mz na nb nc b">tshark</code>的命令行工具来做类似的事情，但是这个工具是菜单驱动的，更容易导航。如果你喜欢交互式过滤和查看你的流量，那么IPTraf是一个游戏改变者。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="32d5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.莫尼特</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/8b6a2bf2c525fff67de4e0a518bd0c77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mZaicnnznIou8-UcqFljvA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">对一些受监控的进程运行monit status的结果。</p></figure><p id="148d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是您可以在Linux上利用的最通用、最健壮的监控工具之一。<a class="ae ky" href="https://mmonit.com/" rel="noopener ugc nofollow" target="_blank"> Monit </a>已经问世多年，可以通过多种方式进行配置，以支持不同种类的阈值和性能警报。</p><p id="1b41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Monit允许您指定要在Linux系统上监控的进程、端口、文件等等。您可以使用复杂的回退计时器和消息来设置动态警报模式。</p><p id="375e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，您可能希望监控特定的进程以确保它正在运行。如果进程崩溃一次，只需重新启动它。如果它开始崩溃循环多次，不要重新启动进程，而是发送一个警报。像这样的进程监控可以通过Monit的几行配置轻松实现。</p><p id="ec28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Monit甚至为守护进程提供了一个漂亮的轻量级web界面，让您一目了然地了解正在发生的事情:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/947c136cc59e3c827e9fa423027505cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H8HN2Rq5bIHrhoeGMtw8Vw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Monit web界面。资料来源:mmonit.com。</p></figure><p id="6594" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论您管理的是一台服务器还是一群服务器，Monit都是最简单、最高效、最具成本效益的(免费！)关注事物状态的方法。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3f83" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="6830" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">感谢您抽出时间阅读。我希望您喜欢了解我最喜欢的一些Linux监控工具，以及为什么它们在分析行为不当的系统时会产生如此大的影响。</p></div></div>    
</body>
</html>