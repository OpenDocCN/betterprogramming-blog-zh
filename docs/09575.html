<html>
<head>
<title>Ruby is Dead. Wait, Really?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">露比死了。等等，真的吗？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/ruby-is-dead-wait-really-60ca85b8dd06?source=collection_archive---------4-----------------------#2021-09-13">https://betterprogramming.pub/ruby-is-dead-wait-really-60ca85b8dd06?source=collection_archive---------4-----------------------#2021-09-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1db2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">对Ruby发展现状的矛盾印象</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8ba7c716dac444946841dce69001530d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5a-7tQEIV56fZ-UN"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@stillnes_in_motion?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">静止不动</a></p></figure><p id="6583" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于许多观察家来说，Ruby似乎在走下坡路。但是，对于许多ruby爱好者来说，这门语言将迎来第二个春天。这是什么原因呢？让我们来了解一下！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="779c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">露比死了吗？</h1><p id="e0cd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">近年来，Ruby的受欢迎程度在各种“流行编程语言”指数上有所下降，如<a class="ae ky" href="https://www.tiobe.com/tiobe-index/" rel="noopener ugc nofollow" target="_blank"> Tiobe </a>或<a class="ae ky" href="https://pypl.github.io/PYPL.html" rel="noopener ugc nofollow" target="_blank"> Pypl </a>。</p><p id="f458" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Ruby最著名的软件Rails是web开发的王者，但它最近也失去了活力。尤其是node的异军突起和Django的稳步崛起，动摇了Rails的地位。</p><p id="b22d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Ruby社区的另一个问题是这种语言因为“对于网络规模来说太慢”而臭名昭著。(见我对可伸缩性问题的回应<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/scalable-ruby-concurrency-and-parallelism-explained-68b09a7aeb53">这里</a>)这种声誉在Twitter脱离Rails并使用Scala来满足他们的需求之后尤其明显。</p><p id="25fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一切导致了“露比死了”的谣言。但是，为什么许多Ruby爱好者认为Ruby确实有一个辉煌的未来呢？</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a3ac" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Ruby辉煌的未来</h1><h2 id="15e0" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">Ruby 3x3及其未来</h2><p id="4942" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Ruby的创造者Matz试图通过发布Ruby 3x3目标来阻止这种发展。天哪，这让Ruby社区的乐观情绪复活了！许多开发人员满怀希望地期待着这个版本。而随着《圣诞2020》的上映，终于来了！</p><p id="250d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它实现了所有的承诺吗？嗯，算是吧。</p><p id="4c3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在某些基准测试中，其性能是Ruby 2.0的三倍，但对于大型Rails应用程序来说却不是这样。但是对性能改进的投资并没有随着Ruby 3的发布而停止，事实上，它们还在不断增加。例如，最近，Ruby/Rails的最大用户之一Shopify雇佣了一些Ruby开发人员在CRuby实现中实现JIT编译器。有了这个，性能应该会继续变得越来越好。此外，在Euruko的最后一次主题演讲中，Matz再次强调了对性能的关注，他说Ruby 3.x将比3.0快3倍。</p><p id="3f62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于大型web应用程序，大多数时候，CPU限制的性能不是主要问题。问题出在IO绑定操作上，而Ruby在那里做了一些巨大的<strong class="lb iu"> </strong>改进！我们现在有一个用于纤程的API来构建类似绿色线程的东西。</p><p id="e4e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，Ruby解释器就能够同时处理许多请求，并大大提高了吞吐量。有了<a class="ae ky" href="https://github.com/socketry/async" rel="noopener ugc nofollow" target="_blank">异步gem </a>，我们已经有了一个参考实现，它可能成为Ruby标准gem的一部分。其他gem维护者还需要一点时间来使用这个新选项，但这最终将对Ruby生态系统产生巨大的推动作用！</p><p id="83db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我看来，这将是所有为3x3目标而添加到Ruby中的特性中影响最大的。</p><p id="d116" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://twitter.com/ioquatix" rel="noopener ugc nofollow" target="_blank">Samuel Williams</a>,<code class="fe nl nm nn no b">async gemset</code>的开发者最近在推特上发布了一些<a class="ae ky" href="https://twitter.com/ioquatix/status/1407979904071655430/photo/1" rel="noopener ugc nofollow" target="_blank">非常</a> <a class="ae ky" href="https://twitter.com/ioquatix/status/1407977541940367360" rel="noopener ugc nofollow" target="_blank">令人印象深刻的</a>基准测试，展示了这种方法的可扩展性。</p><p id="a122" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为Ruby 3x3目标的另一个好处，Ruby社区现在有了一些更好的IDE工具选择。</p><p id="ad78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Stripe开源的<a class="ae ky" href="https://sorbet.org/" rel="noopener ugc nofollow" target="_blank"> Sorbet </a>，你的Ruby程序的类型检查器。如果你不喜欢冰糕，那么你可以用浸泡。这种方法适用于不同类型的独立文件，类似于TypeScript。</p><h2 id="5eb7" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">替代的高品质宝石</h2><p id="aaa3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Ruby社区的另一个重大发展是，我们有了一些真正高质量的知名宝石替代品。</p><ul class=""><li id="fdac" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated"><a class="ae ky" href="https://sequel.jeremyevans.net/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">续作</strong> </a>:这种宝石是由来已久的现役战绩的替代品。它有一个插件系统，可以加载许多附加功能。这款创业板的表现在大部分基准测试中也优于<code class="fe nl nm nn no b">ActiveRecord</code>。这个创业板的突出之处在于，几乎在任何给定的时间点都没有公开发行。维护者，<a class="ae ky" href="https://twitter.com/jeremyevans0" rel="noopener ugc nofollow" target="_blank">杰雷米·埃文斯</a>，在保持一切超级干净方面做得非常出色！</li><li id="6515" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><strong class="lb iu"> Hanami </strong> : Hanami是另一个历史悠久的网络框架，目前正处于过渡阶段。它已经做出了一些巨大的改进，未来的计划对我来说看起来非常有希望(这里是一个核心开发者的的<a class="ae ky" href="https://www.youtube.com/watch?v=20BCuKIRzLo" rel="noopener ugc nofollow" target="_blank">演示)。</a></li><li id="a2c4" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><strong class="lb iu">更小的非常专注的高质量库</strong>:Hanami web框架的一个基础是<code class="fe nl nm nn no b">dry-rb gemset</code>。这些是专门的库，对于几乎所有的Ruby应用程序来说都是有价值的补充，在这些应用程序中，任何gem都做一件事情并且做得很好。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="a937" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">对Ruby的持续投资</h2><p id="5e2c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Ruby的另一个希望之光是对Ruby持续不断的投资。如上所述，Shopify在Ruby上下了很大的赌注，并雇佣了几名Ruby/Rails核心开发人员。</p><p id="b726" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">他们中的一些人正在研究一种新型的JIT技术，叫做YJIT。这种JIT编译器背后的基本思想被称为基本块版本控制(BBV)，从事这项工作的开发人员之一，<a class="ae ky" href="https://github.com/maximecb" rel="noopener ugc nofollow" target="_blank">Maxime Chevalier-bois vert</a>，已经在她的博士论文中描述/研究过。这个JIT的大目标是与CRuby集成，并获得Rails服务器的性能提升。</p><p id="0efd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Shopify和Oracle的另一项投资是对TruffleRuby的研究，这是一个使用GraalVM技术的高性能Ruby实现。现在TruffleRuby还不能运行Rails，因为一些C扩展无法运行。但是对于可以用这种实现运行的较小的脚本和程序来说，性能提升是巨大的。</p><p id="647d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如最近在Ruby Kaigi 2021 <a class="ae ky" href="https://www.youtube.com/watch?v=RqwVEw-Rd5c" rel="noopener ugc nofollow" target="_blank">关于对象形状的讨论中所看到的那样，对这种实现的研究也为CRuby带来了成果。</a></p><p id="e4d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其他投资于该平台的Ruby大用户包括Stripe，它正在开发<a class="ae ky" href="https://sorbet.org/" rel="noopener ugc nofollow" target="_blank"> Sorbet </a>，GitHub，它有几名Rails核心开发人员，还有Heroku、Cookpad等等。</p><p id="a660" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这种对语言的共同开发，Ruby不太可能很快就倒下了！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3056" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">最后的想法</h1><p id="ba63" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">所以，在看了Ruby生态系统的现状之后，我个人认为Ruby有一个光明的未来，但是作为一个社区，我们必须继续努力去实现它。这项工作可以是开发和维护我们所依赖的或者期待使用的gems特别是使用最近Ruby开发所提供的改进，比如Fiber改进。</p><p id="927d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个需要改进的地方是这些gem的文档。因此，其他人可以开始使用替代品，并尽可能获得最佳体验。还有，让我们传播这个消息:Ruby没有死，但有一个辉煌的未来！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="644d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="od">不是中等会员？</em> <a class="ae ky" href="https://grnt-grdwhl.medium.com/membership" rel="noopener"> <em class="od">在这里报名</em> </a> <em class="od">并支持我的写作过程！</em></p></div></div>    
</body>
</html>