<html>
<head>
<title>How To Use Ant Forms in Your Web App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Web应用程序中使用Ant表单</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-ant-forms-in-your-web-app-3cc1a7468ff7?source=collection_archive---------2-----------------------#2021-08-05">https://betterprogramming.pub/how-to-use-ant-forms-in-your-web-app-3cc1a7468ff7?source=collection_archive---------2-----------------------#2021-08-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="54a9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Ant表单有助于管理web表单的样式、布局、验证和数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bd2bdf28792c8dde9aa09eb497e8ebd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sToa-e69r4QTU6tf"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@wocintechchat?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯蒂娜@ wocintechchat.com</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="8568" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Form_(HTML)" rel="noopener ugc nofollow" target="_blank">web表单</a>允许我们输入发送到服务器进行处理的数据。例如，当我们订购产品时，可以使用一个表单来输入送货地址和信用卡信息。HTML <code class="fe lv lw lx ly b">&lt;form&gt;</code>元素中包含了一个表单。它包含文本字段、选择、复选框、单选按钮等。</p><p id="9ebd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">表单是HTML/React中复杂的元素/组件。在上一篇文章中，我们解释了表单的另一个方面:<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/6-autofill-features-for-web-developers-ac76b725b28a">表单自动填充如何工作</a>。</p><p id="dfe4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将探讨Ant表单是如何帮助管理表单的样式、布局、验证和数据的。</p><h1 id="500b" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">为什么我们需要一个蚂蚁表单？</h1><p id="98c4" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">Ant表单是<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/understanding-the-ant-design-system-a-ui-design-for-enterprises-39afdb188b06"> Ant设计系统</a>的一部分，我们使用以下命令在<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/upgrade-create-react-app-based-projects-to-version-4-cra-4-d7962aee11a6"> Create React App </a>工作环境中设置它:</p><pre class="kj kk kl km gt mw ly mx my aw mz bi"><span id="3a5b" class="na ma it ly b gy nb nc l nd ne">npx create-react-app my-app<br/>cd my-app</span></pre><p id="e3bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要设置<code class="fe lv lw lx ly b">antd</code>，请执行以下操作:</p><pre class="kj kk kl km gt mw ly mx my aw mz bi"><span id="0f0d" class="na ma it ly b gy nb nc l nd ne">npm i antd</span></pre><p id="e3ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">antd</code>成为<code class="fe lv lw lx ly b">package.json</code>中<code class="fe lv lw lx ly b"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/package-jsons-dependencies-in-depth-a1f0637a3129">dependencies</a></code>的一部分；</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="9515" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在整篇文章中，我们修改<code class="fe lv lw lx ly b">src/App.js</code>来探索事物。下面是一个简单的表单:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="af43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它显示两个输入字段和一个提交按钮:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/4e54108207fe791c8944760f530a7e9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*KiajctudxcfLENOFz6g-ZA.png"/></div></figure><p id="b7f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该输出有许多问题:</p><ul class=""><li id="cb42" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu nn no np nq bi translated">这些部件不美观。</li><li id="7f38" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">没有标识输入字段的标签。</li><li id="1652" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">组件布局不合理。</li><li id="dd5f" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">没有对字段的验证。</li><li id="67f1" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">输入字段数据不受控制。</li><li id="2680" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">当点击提交按钮时，没有任何反应。</li></ul><p id="2d4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Ant表单就是为了解决这些问题而设计的。</p><h1 id="11ed" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">蚂蚁风格</h1><p id="030e" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">众所周知，原始的HTML元素并不美观。它们只是简单地挤在一起，没有边距或填充。每个元素看起来都很原始，在不同的浏览器中可能不会以相同的方式出现。Ant style并不能解决所有的样式问题，因此不能使用CSS对文件输入(<code class="fe lv lw lx ly b">&lt;input type="file"&gt;</code>)进行彻底的样式化；然而，Ant Design系统样式对于大多数封装在<code class="fe lv lw lx ly b">Form.Item</code>中的常用组件来说形成得很好。</p><p id="6cc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一种蚂蚁形式:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="d68d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第2行导入Ant样式。</p><p id="afe6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第7行设置表单名称，这将是表单项id的前缀。最佳做法是设置表单名称，尤其是当有多个表单时。</p><p id="0457" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第9–13行将输入字段(第12行)放在<code class="fe lv lw lx ly b">Form.Item</code>内。</p><p id="bf3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第14–18行将输入字段(第17行)放在<code class="fe lv lw lx ly b">Form.Item</code>内。</p><p id="1f52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第19–21行将提交按钮(第20行)包装在<code class="fe lv lw lx ly b">Form.Item</code>中。</p><p id="9b9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的显示看起来不是更好吗？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/29fe4e6483ff089e92a276ea9d81285d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*73XZXIivl_FeU2EIXCV3rw.png"/></div></figure><p id="9df8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于附加样式，<code class="fe lv lw lx ly b">Form</code>有一个属性<code class="fe lv lw lx ly b">size</code>，可以用来将一个表单设置为<code class="fe lv lw lx ly b">"small"</code>、<code class="fe lv lw lx ly b">"middle"</code>或<code class="fe lv lw lx ly b">"large"</code>。</p><h1 id="9057" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">蚂蚁布局</h1><p id="a99e" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><code class="fe lv lw lx ly b">&lt;label&gt;</code>是一个简单的元素，但是在<code class="fe lv lw lx ly b">Form.Item</code>中添加一个标签就更简单了。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="f072" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第10行配置标签<code class="fe lv lw lx ly b">"Name"</code>。</p><p id="c3c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第16行配置标签<code class="fe lv lw lx ly b">"Age"</code>。</p><p id="b911" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下显示具有有意义的标签:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/a363e2b268743a255801c603b5726264.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*fq0qGquGJfNBNu90yThWIA.png"/></div></figure><p id="e308" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，如果<code class="fe lv lw lx ly b">Form</code>的<code class="fe lv lw lx ly b">layout</code>为<code class="fe lv lw lx ly b">"horizontal"</code>，每个标签都会附加冒号(<code class="fe lv lw lx ly b">:</code>)。</p><p id="309f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">冒号可以用<code class="fe lv lw lx ly b">Form</code>的<code class="fe lv lw lx ly b">colon={false}</code>关闭。</p><p id="e9d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是<code class="fe lv lw lx ly b">layout</code>为<code class="fe lv lw lx ly b">"vertical"</code>时的显示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/ddc7ab04f33763d9a112a08a6fa7e51d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*CRe60sGOvAmsLuwv7rHEXA.png"/></div></div></figure><p id="b6f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">layout</code>也可以是<code class="fe lv lw lx ly b">"inline"</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/569ff5131e4d5b0f09b29f3bf05b735f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*Wbw-in7EZ7-ZzWczVfbE5g.png"/></div></figure><p id="1604" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当布局为<code class="fe lv lw lx ly b">"horizontal"</code>且显示尺寸较窄时，自动切换到<code class="fe lv lw lx ly b">"vertical"</code>布局是响应式设计。</p><p id="df52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于<code class="fe lv lw lx ly b">"horizontal"</code>布局，我们可能希望标签和输入字段网格对齐。<code class="fe lv lw lx ly b">labelCol</code>和<code class="fe lv lw lx ly b">wrapperCol</code>就是为此而设计的。蚂蚁设计系统是一个24网格系统。<code class="fe lv lw lx ly b">labelCol</code>和<code class="fe lv lw lx ly b">wrapperCol</code>可以是定义<code class="fe lv lw lx ly b">span</code>和/或<code class="fe lv lw lx ly b">offset</code>的对象，也可以是定义<code class="fe lv lw lx ly b">xs</code>、<code class="fe lv lw lx ly b">sm</code>、<code class="fe lv lw lx ly b">md</code>和/或<code class="fe lv lw lx ly b">lg</code>的响应对象。</p><p id="6157" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将<code class="fe lv lw lx ly b">labelCol</code>和<code class="fe lv lw lx ly b">wrapperCol</code>添加到布局中，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="72fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第8行隐藏了冒号。</p><p id="a62c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第9–11行将标签宽度定义为四个网格。</p><p id="ed9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第12–14行将换行的输入字段宽度定义为16个网格。</p><p id="9cc9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第29–32行定义了提交按钮的布局，它从左边偏移了四个网格。</p><p id="edee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为总共有20个网格，所以表单在可用空间中是左对齐的(额外的四个网格放在右侧)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/91953f89f9764c751604d4dfb47ba0eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*RbTAMJLNgTXpIFpDrl74gw.png"/></div></figure><p id="c553" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了<code class="fe lv lw lx ly b">Form.Item</code>之外，还有<code class="fe lv lw lx ly b">Form.List</code>，为字段提供数组输入管理。一个<code class="fe lv lw lx ly b">Form</code>组件可以包括<code class="fe lv lw lx ly b">Form.Item</code>和/或<code class="fe lv lw lx ly b">Form.List</code>。</p><p id="d0e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是<code class="fe lv lw lx ly b">Form.List</code>的官方示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h1 id="898d" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">Ant表单验证</h1><p id="8e13" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">表单验证是一种浏览器和/或web服务器，它检查表单数据的格式是否正确，是否在应用程序设置的约束范围内。在浏览器中完成的验证称为客户端验证，而在服务器上完成的验证称为服务器端验证。</p><p id="5668" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Ant表单验证由<code class="fe lv lw lx ly b">Form.Item</code>的<code class="fe lv lw lx ly b">rules</code> prop执行，它是一个返回承诺的配置对象和/或函数的数组。它可以处理客户端和服务器端的验证。</p><h2 id="fa37" class="na ma it bd mb nz oa dn mf ob oc dp mj li od oe ml lm of og mn lq oh oi mp oj bi translated">客户端验证</h2><p id="7f1e" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">让我们先用下面的代码来看看客户端验证:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="1032" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第19–28行定义了<code class="fe lv lw lx ly b">name</code>字段的<code class="fe lv lw lx ly b">rules</code>。它由两个对象组成。</p><p id="37cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个规则对象(第20–23行)有两个属性。它声明该字段是必需的(第21行)，并定义了一条错误消息(第22行)。</p><p id="aa3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二个规则对象(第24–27行)有两个道具。它指定了一个用于验证的正则表达式模式(第25行)，并定义了一个错误消息(第26行)。</p><p id="e34e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第35–42行定义了<code class="fe lv lw lx ly b">age</code>字段的<code class="fe lv lw lx ly b">rules</code>，它是一个<code class="fe lv lw lx ly b">InputNumber</code>。</p><p id="3741" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">规则对象(第36–41行)有四个属性，它们定义了类型(第37行)、最小值(第38行)、最大值(第39行)和错误消息(第40行)。</p><p id="72af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出显示如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/fbebbee16308953ebeee75a14e50c560.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*FQPjyZtSxO-ZHrCRLsKxtA.png"/></div></figure><p id="b66f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，<code class="fe lv lw lx ly b">InputNumber</code>字段具有固定宽度，而<code class="fe lv lw lx ly b">Input</code>字段具有<code class="fe lv lw lx ly b">100%</code>宽度。如果需要，您可以将<code class="fe lv lw lx ly b">InputNumber</code>设置为<code class="fe lv lw lx ly b">100%</code>宽度。</p><p id="8d8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然name字段是必需的，但是当该字段是原始的，即未被用户触及时，错误消息不会显示。字段变脏(被触摸)或单击提交按钮后，会显示错误。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/ffa3eeb5a9f94db0128d3eb56ddc370f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*_Eqi3qQhV_ofK9cW3_22Fw.png"/></div></figure><p id="2312" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您不想让必填字段显示红色星号，可以通过设置<code class="fe lv lw lx ly b">Form</code>的prop <code class="fe lv lw lx ly b">requiredMark={false}</code>将其关闭。</p><p id="ae05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还可以配置它，用<code class="fe lv lw lx ly b">requiredMark="optional"</code>显式显示标签<code class="fe lv lw lx ly b">(optional)</code>。在这种情况下，您可能还想设置<code class="fe lv lw lx ly b">labelAlign="left"</code>以获得良好的视觉外观。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/fe04d0f8ea7b08b0b618395d6943ac7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*zs0VoZVb8JyVc4TQM5V-Zw.png"/></div></figure><p id="8e3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">name</code>字段有两个规则:一个是必需的，一个是特定的模式。在这种情况下，如果<code class="fe lv lw lx ly b">name</code>为空字符串，则只会显示所需的错误。如果有两种模式并且都是错误的，则默认情况下会显示这两种错误。</p><p id="43b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将<code class="fe lv lw lx ly b">age</code>字段更新为以下内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="9eee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输入<code class="fe lv lw lx ly b">-1</code>显示两个错误:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/e3f483bcb33053180cb9653679be36eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*w4JghbaxDsMqf4Jtlrw9fg.png"/></div></figure><p id="acf5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">设置<code class="fe lv lw lx ly b">Form.Item</code>的道具<code class="fe lv lw lx ly b">validateFirst={true}</code>在遇到第一个错误时停止验证。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/671e3f4b9e9d90ecde1b3238122322b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*TTnBWSbwGSckN_y62jkyYw.png"/></div></figure><h2 id="edc9" class="na ma it bd mb nz oa dn mf ob oc dp mj li od oe ml lm of og mn lq oh oi mp oj bi translated">服务器端验证</h2><p id="4fcf" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">上述验证示例是在客户端进行的。如果第二次验证<code class="fe lv lw lx ly b">'Age needs to be 5 or older'</code>发生在服务器端会怎样？</p><p id="04ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="fcb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第4–10行模拟来自服务器的后端调用<code class="fe lv lw lx ly b">isTooYong()</code>。</p><p id="17da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">调用<code class="fe lv lw lx ly b">isTooYong()</code>时，第5行在控制台上打印出一条消息。</p><p id="4c41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第53–55行通过调用<code class="fe lv lw lx ly b">isTooYong()</code>来验证信息。</p><p id="6080" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们在“年龄”字段中键入“1111”时，该字段会在我们键入时得到验证。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/e69a8a89a9bb0bd720a33bfa49726630.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*SoHtj7L7lx0APs-7FGcNUw.png"/></div></figure><p id="7891" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，我们注意到它在控制台上打印出四条消息，如下所示:</p><pre class="kj kk kl km gt mw ly mx my aw mz bi"><span id="9720" class="na ma it ly b gy nb nc l nd ne">Validate 1<br/>Validate 11<br/>Validate 111<br/>Validate 1111</span></pre><p id="686f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为每次击键执行服务器端验证是非常昂贵的。设置<code class="fe lv lw lx ly b">Form.Item</code>的属性<code class="fe lv lw lx ly b">validateTrigger="onBlur"</code>确保只有当字段失去焦点时才进行验证。</p><h2 id="20f0" class="na ma it bd mb nz oa dn mf ob oc dp mj li od oe ml lm of og mn lq oh oi mp oj bi translated">验证功能</h2><p id="bfc2" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">除了对象之外，验证规则也可以是返回承诺的函数。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="aa51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第53–57行定义了一个调用<code class="fe lv lw lx ly b">isTooYong()</code>的验证函数。</p><p id="69fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个验证函数中，我们不使用输入参数，它是一个<code class="fe lv lw lx ly b">FormInstance</code>。如果记录了该参数，我们可以看到以下API:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/402d586d22c061e31cf34fdf8a97b9e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aoI7kr9osBQrDZ27PIn9jw.png"/></div></div></figure><p id="ce50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些API用于数据控制。使用它们可以执行复杂的任务。</p><h1 id="5c7e" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">Ant表单数据</h1><p id="4ee2" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">蚂蚁形态是一个<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/to-be-or-not-to-be-2c372198a01c#ba5c-4b7662162c8e-reply">受控组件</a>。表单状态和属性封装在表单组件中。不需要编写代码来保存或管理<code class="fe lv lw lx ly b">Form</code> / <code class="fe lv lw lx ly b">Form.Item</code>数据。我们只需要提供一个名字。表单数据存储为一个对象，其中每个表单项都是一个名称-值对。</p><h2 id="4117" class="na ma it bd mb nz oa dn mf ob oc dp mj li od oe ml lm of og mn lq oh oi mp oj bi translated">表单数据控件</h2><p id="5d7e" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">用作确认输入参数的<code class="fe lv lw lx ly b">FormInstance</code>可以通过<code class="fe lv lw lx ly b">Form.useForm</code>获得。API允许我们控制表单数据和验证数据。</p><p id="f48b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个使用<code class="fe lv lw lx ly b">FormInstance</code> API的<code class="fe lv lw lx ly b">setFieldsValue</code>生成<code class="fe lv lw lx ly b">age</code>字段的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="b502" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第5行从<code class="fe lv lw lx ly b">Form.useForm</code>生成表单实例<code class="fe lv lw lx ly b">form</code>。该实例在第10行被用作<code class="fe lv lw lx ly b">Form</code>的道具。</p><p id="bba2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第36–45行定义了<code class="fe lv lw lx ly b">onChange</code>处理器。基于<code class="fe lv lw lx ly b">name</code>值，<code class="fe lv lw lx ly b">age</code>字段由<code class="fe lv lw lx ly b">form.setFieldsValue()</code>填充。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/8391de56b01ce0ef35c8085125987990.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*4P-g0O6pQT00uIlDksdDKg.png"/></div></figure><h2 id="fedd" class="na ma it bd mb nz oa dn mf ob oc dp mj li od oe ml lm of og mn lq oh oi mp oj bi translated">数据初始化</h2><p id="2ea3" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">数据初始化可以发生在<code class="fe lv lw lx ly b">Form</code>级或<code class="fe lv lw lx ly b">Form.Item</code>级。</p><p id="31b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe lv lw lx ly b">Form</code>级别，属性<code class="fe lv lw lx ly b">initialValues</code>可用于初始化整个表单数据。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="068b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第20–23行根据<code class="fe lv lw lx ly b">Form.Item</code>的name键初始化表单数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/dee004febdd38e63de7aecf64613e0d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*zb_ONja0n83DYS1R2yNz-Q.png"/></div></figure><p id="69e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，每个<code class="fe lv lw lx ly b">Form.Item</code>可以初始化自己的值。看看下面的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="d5be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第34行，<code class="fe lv lw lx ly b">name</code>字段被初始化为<code class="fe lv lw lx ly b">"John"</code>。</p><p id="adac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第60行，<code class="fe lv lw lx ly b">age</code>字段被初始化为<code class="fe lv lw lx ly b">8</code>。</p><h2 id="7279" class="na ma it bd mb nz oa dn mf ob oc dp mj li od oe ml lm of og mn lq oh oi mp oj bi translated">数据提交</h2><p id="2f0b" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">当我们准备好提交表单时，将使用当前表单数据调用<code class="fe lv lw lx ly b">onFinish</code>处理程序。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="9e15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第7–9行定义了当点击提交按钮时将在第24行调用的<code class="fe lv lw lx ly b">onFinish</code>处理程序。</p><p id="d0b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们单击submit按钮，第8行将打印<code class="fe lv lw lx ly b">Received values of form: {name: “John”, age: 8}</code>。</p><h2 id="bab9" class="na ma it bd mb nz oa dn mf ob oc dp mj li od oe ml lm of og mn lq oh oi mp oj bi translated">多种形式</h2><p id="5aae" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">如果有多个表单，可以放在<code class="fe lv lw lx ly b">Form.Provider</code>下。当每个表单被提交时，它的<code class="fe lv lw lx ly b">onFinish</code>处理程序被正常调用。另外，<code class="fe lv lw lx ly b">Form.Provider</code>的<code class="fe lv lw lx ly b">onFormFinish</code>处理程序也被调用。它可以处理表单之间的数据。</p><p id="ba84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="6fad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第17–49行定义了<code class="fe lv lw lx ly b">userForm1</code>，它有一个正常的<code class="fe lv lw lx ly b">Form.Item</code>用于<code class="fe lv lw lx ly b">username</code>(第26–37行)，一个禁用的<code class="fe lv lw lx ly b">Form.Item</code>用于<code class="fe lv lw lx ly b">age</code>(第26–37行)，还有一个提交按钮<code class="fe lv lw lx ly b">Submit Name</code>(第41–48行)。</p><p id="497c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第50–83行定义了<code class="fe lv lw lx ly b">userForm2</code>，它有一个禁用的<code class="fe lv lw lx ly b">Form.Item</code>用于<code class="fe lv lw lx ly b">username</code>(第59–61行)，一个正常的<code class="fe lv lw lx ly b">Form.Item</code>用于<code class="fe lv lw lx ly b">age</code>(第62–74行)，以及一个提交按钮<code class="fe lv lw lx ly b">Submit Age</code>(第75–82行)。</p><p id="05d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第7–15行定义了<code class="fe lv lw lx ly b">onFormFinish</code>处理程序，它检查表单名称。如果是<code class="fe lv lw lx ly b">userForm1</code>，其<code class="fe lv lw lx ly b">username</code>被复制到<code class="fe lv lw lx ly b">userForm2</code>。如果是<code class="fe lv lw lx ly b">userForm2</code>，它的<code class="fe lv lw lx ly b">age</code>被复制到<code class="fe lv lw lx ly b">userForm1</code>。</p><p id="2ee0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">提交姓名和年龄后，将显示以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/ced4fcf0c1b09d259cfc245767e39a97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*L1CPfQDZ4xgY9VTNlJuCpg.png"/></div></figure><p id="0fcf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">onFormFinish</code>处理器有两个输入参数。第一个是提交表单名称，第二个是包含<code class="fe lv lw lx ly b">values</code>对象和<code class="fe lv lw lx ly b">forms</code>对象的对象。</p><p id="afc9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个例子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/ab6c27a7c29dfce9673fb4d25ebc5363.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*_dsmKVGi-IOIANANz7uvEw.png"/></div></figure><p id="cca7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对象包括每个表单的表单实例。</p><p id="35d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">values</code>对象包含提交表单的值对象。</p><h1 id="416f" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">结论</h1><p id="c475" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">Ant表单有助于管理表单的样式、布局、验证和数据。它解决了原始形式的问题:</p><ul class=""><li id="abe1" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu nn no np nq bi translated">蚂蚁的形态很有美感。</li><li id="4141" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">向Ant表单添加标签很容易。</li><li id="6a3a" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">布局一个Ant表单有很多道具。</li><li id="c7a1" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">许多规则都可以用来验证Ant表单。</li><li id="698c" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">Ant表单数据是完全受控的。</li><li id="ffd0" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">配置Ant表单提交很容易，包括多个表单之间的交互。</li></ul><p id="bdfd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。我希望这有所帮助。如果你有兴趣，可以看看<a class="ae ky" href="https://jenniferfubook.medium.com/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">我的其他媒体文章</a>。</p><p id="0a4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="om">注:感谢悉达多钦塔帕利审阅我的</em> <a class="ae ky" href="https://www.dominodatalab.com/" rel="noopener ugc nofollow" target="_blank"> <em class="om">多米诺数据实验室</em> </a> <em class="om">产品的表单代码！</em></p></div></div>    
</body>
</html>