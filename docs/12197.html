<html>
<head>
<title>Creating Web3 Projects With the Truffle for VS Code Extension</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Truffle for VS代码扩展创建Web3项目</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/creating-web3-projects-with-the-truffle-for-vs-code-extension-6e784070a5f3?source=collection_archive---------12-----------------------#2022-05-18">https://betterprogramming.pub/creating-web3-projects-with-the-truffle-for-vs-code-extension-6e784070a5f3?source=collection_archive---------12-----------------------#2022-05-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="032e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">深入探究项目成功的优秀工具</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/550987c42648b3f4ec37784132901de3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pk-hOwfIm6d0DBOFThi5_A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="45f8" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">介绍</h1><p id="005d" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">使用任何新技术都可能是既令人兴奋又令人恐惧的经历。一方面，你可能对使用一套新工具进行构建感到兴奋。但是，知道如何在所有可用的工具中选择正确的工具也是非常困难的。</p><p id="40d6" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">无论你是刚开始学习Web3还是有经验的构建者，你都会很好地理解这种令人生畏的体验。开发人员需要了解特定于Web3的概念，如区块链和智能合约，以及开发这些概念的全新工具。然而，开发人员可以通过正确的步骤和适当的工具相对快速有效地构建Web3技术。</p><p id="c282" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">本文将简要概述创建Web3智能合约所需的步骤。与此同时，我们将了解如何通过使用您已经知道的工具(Visual Studio Code (VS Code))和VS代码扩展的<a class="ae mr" href="https://trufflesuite.com/docs/vscode-ext/" rel="noopener ugc nofollow" target="_blank"> Truffle来编写、部署和测试智能合约，从而成功地导航这些步骤。</a></p><h1 id="6315" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">选择正确的工具</h1><p id="a057" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">在学习了区块链和以太坊的基础之后，你可能会受到启发，开始应用你的知识来构建你自己的Web3项目。在这个过程中，您可能已经从各种项目和教程中收集了一长串工具。不要迷失在这个列表中，让我们专注于探索通过使用这些工具之一(用于VS代码扩展的Truffle)来启动新的智能合约项目所需的步骤，并探索它如何帮助您的智能合约的创建、调试、部署、安全性和其他开发领域。</p><h1 id="4a41" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">项目创建</h1><p id="2a1f" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">首先，让我们看看如何创建您的初始项目。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/513800be06e4590e5c871605b887d7b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*b0wjVV1gVYilvoVl"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">VS代码扩展的块菌</p></figure><h2 id="0e31" class="mt kz it bd la mu mv dn le mw mx dp li lz my mz lk md na nb lm mh nc nd lo ne bi translated">VS代码扩展的块菌</h2><p id="9b92" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">一个成功的项目通常从良好的设置和文件结构开始。由于没有正确设置项目会导致许多问题，因此确保文件结构在命名上一致且直观是至关重要的。</p><p id="63f3" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">使用Truffle for VS代码扩展的一个很好的好处是，你可以从头开始快速构建一个具有正确结构的新项目，要么通过创建一个具有模板化文件结构和起始文件的新文件夹，要么通过简单地从<a class="ae mr" href="https://trufflesuite.com/boxes/" rel="noopener ugc nofollow" target="_blank"> Truffle Box </a>创建一个项目。</p><p id="e459" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">让我们开始一个新项目，看看一个合适的文件结构是什么样的。首先，你需要安装VS代码扩展的块菌。为了获得详细的安装说明和更多关于它的功能的信息，<a class="ae mr" href="https://trufflesuite.com/blog/build-on-web3-with-truffle-vs-code-extension/#installing-the-vs-code-extension-for-truffle" rel="noopener ugc nofollow" target="_blank">看看这篇文章</a>。</p><p id="ffe7" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">一旦安装了扩展，按<code class="fe nf ng nh ni b">SHIFT + CTRL</code> / <code class="fe nf ng nh ni b">CMD + P</code>键打开命令面板。接下来，输入命令<code class="fe nf ng nh ni b">Truffle New Solidity Project</code>并选择选项“创建基本项目”选择项目路径后，将创建一个具有正确文件结构的新项目。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/9a76aac9bb7e86fe16f1b1cb33d89ff5.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/0*YBPztPJqT62n-kDS"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">正确的文件结构</p></figure><p id="4bbe" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如您所见，模板项目有一个包含智能合同的文件夹，另一个用于迁移到区块链环境，第三个用于脚本，还有一个用于测试的文件夹。该项目还包括一个<code class="fe nf ng nh ni b">.gitignore</code>，用于存储您不想推送到存储库的信息、一个开源许可协议和一个<code class="fe nf ng nh ni b">truffle-config.js</code>文件。</p><p id="efba" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这种文件结构保持一切整洁有序，因此从一个文件导入到另一个文件或运行<a class="ae mr" href="https://trufflesuite.com/docs/truffle/reference/truffle-commands/" rel="noopener ugc nofollow" target="_blank"> Truffle命令</a>很简单，不容易出错。</p><h1 id="2f91" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">调试您的合同</h1><p id="e82f" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">不幸的是，我们并不是生活在一个代码没有错误的完美世界里。并且在构建您的智能合约时，您会遇到以前可能没有见过的错误消息。如果您总是需要参考像<a class="ae mr" href="https://etherscan.io/" rel="noopener ugc nofollow" target="_blank"> Etherscan </a>这样的区块链资源管理器来获取信息，调试这些事务可能会很棘手。</p><p id="ff96" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">一个解决方案是通过Truffle for VS代码扩展使用<a class="ae mr" href="https://trufflesuite.com/docs/vscode-ext/debugging-smart-contracts/" rel="noopener ugc nofollow" target="_blank">调试事务</a>特性。要使用调试器，请再次打开命令面板并键入Truffle Debug Transaction。从那里，您可以查看事务消息并一步一步地处理它们。这对开发人员很重要，因为某个交易中的错误通常会导致下一个交易尝试失败(就像特定钱包中的资金不可用)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/702c5c4c0e6a05509a5c8f60c5850118.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RarO9ZOAyoCUEgq5"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在键入以下命令后，选择要调试的事务:Truffle处女作事务</p></figure><p id="e6a7" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">选择事务后，调试器将变为可用。在这里，您可以执行典型的调试功能，如单步执行/单步执行/单步执行、查看调用堆栈、监视窗口等。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/d4011eb5bee0edfbc09e74a0d96ce570.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*38MpjtfwI4AgejR3"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">选择事务后，调试工具变得可用</p></figure><h1 id="fe3c" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">部署您的合同</h1><p id="95c6" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">有了有效的智能合同后，就该部署了。这里有三种方法。最佳实践是首先部署到本地区块链实例进行测试，比如<a class="ae mr" href="https://trufflesuite.com/docs/ganache/" rel="noopener ugc nofollow" target="_blank"> Ganache </a>。之后，您会希望将它部署到一个testnet中，以验证它在真实环境中是否正常工作。然后，只有在所有测试完成之后，您才能将您的项目发布到mainnet。所有这些测试将帮助您在智能合约中避免代价高昂且有时不可逆转的错误。</p><p id="f30b" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">在Truffle扩展中，您可以部署到所有三种类型的网络，而不需要离开VS代码。您可以通过右键单击。SOL文件并选择“部署合同”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/2a3c311e85d65ca4e9663f3358059c6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_HIRFiZ-seQ9jW7i"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">右键单击. sol文件后，轻松构建或部署智能合约</p></figure><p id="25d4" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">本地区块链:使用Ganache服务是一种简单的方法，可以创建一个具有多个钱包地址的本地区块链，并测试您可以用来与智能合约交互的Eth。您可以在扩展的VS代码中的Truffle-Networks窗格下创建一个新的Ganache网络。创建网络后，您可以根据需要启动/停止和重启服务器。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/72f2a0f878ea43eed5c1158546638f99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1O2zP_tIlS_CJdjP"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">轻松创建或连接到现有网络</p></figure><p id="1d12" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">测试网<strong class="ls iu"> : </strong>测试网被设计成以类似以太坊主网的方式工作，但是它们没有直接部署到主网的财务成本和风险。使用testnet是一个很好的方法，可以更好地理解一旦部署到mainnet上，您的契约将如何工作。</p><p id="c768" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">有几个以太坊测试网可供选择，它们都可以通过使用一个节点提供者服务来连接，比如<a class="ae mr" href="https://infura.io/" rel="noopener ugc nofollow" target="_blank"> Infura </a>。在扩展中设置您的Infura帐户后，您可以访问您现有的Infura项目，或者您可以轻松地创建新的项目。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/8ebed96e32c79e3ca7ecbc071008b39e.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/0*MwXg5EfEP_SQIhdn"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">要部署到的网络选项</p></figure><p id="638b" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">Mainnet <strong class="ls iu"> : </strong>如果测试网就像是智能合同代码的登台服务器，那么部署到Mainnet就像是将代码推向生产。测试智能合约代码的重要性怎么强调都不为过。如果有任何错误或漏洞，它们都可能并且将会被攻击者利用。这些错误对组织和用户来说都是昂贵的。</p><p id="0d0f" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">让我们看看在部署到mainnet之前，如何使用正确的工具和最佳实践来保护我们的合同。</p><h1 id="5760" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">保护您的合同</h1><p id="70bb" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">在开发智能合约时，安全性应该始终是一个主要的优先事项。<a class="ae mr" href="https://www.washingtonpost.com/business/expensive-crypto-hacks-are-becoming-part-of-web3-life/2022/04/01/4491fff0-b185-11ec-9dbd-0d4609d44c1c_story.html" rel="noopener ugc nofollow" target="_blank">黑客似乎定期损失数百万美元。作为一名Web3开发人员，你需要不断了解最新的</a><a class="ae mr" href="https://consensys.github.io/smart-contract-best-practices/" rel="noopener ugc nofollow" target="_blank">安全最佳实践</a>。</p><p id="2cc7" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">通过像<a class="ae mr" href="https://consensys.net/diligence/fuzzing/" rel="noopener ugc nofollow" target="_blank"> Diligence Fuzzing </a>或它们的开源替代品<a class="ae mr" href="https://consensys.net/diligence/scribble/" rel="noopener ugc nofollow" target="_blank"> Scribble </a>这样的工具运行你的智能合约，可以帮助你发现许多常见的安全漏洞。然而，如果您的项目旨在处理数百万用户的资金，最好的做法是专业地审核您的智能合同。</p><p id="6d24" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">尽管如此，开发人员在构建他们的项目时应该意识到常见的漏洞。Web3中一个常见的攻击媒介是黑客使用机器人扫描部署的合同，寻找潜在的漏洞和秘密信息，如测试代码中留下的钱包私钥。使用像<a class="ae mr" href="https://trufflesuite.com/docs/truffle/getting-started/using-the-truffle-dashboard/" rel="noopener ugc nofollow" target="_blank"> Truffle Dashboard </a>这样的工具是避免因开发错误而损失资金和资产的一种方法。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/bbea1e86f0217072274001afd8884586.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6XSZ7DGea4yiF8nP"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">将您的MetaMask钱包直接连接到Truffle仪表板</p></figure><p id="e02e" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">Truffle仪表板消除了开发人员在Solidity项目的配置文件中存储私钥的需要。开发人员可以进行一次性设置，将他们的元掩码钱包连接到浏览器上本地托管的仪表板。完成这些之后，使用dashboard关键字而不是将键复制并粘贴到配置文件中就足够了。它也兼容其他开发框架，比如Hardhat。</p><p id="fbd7" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">要使用Truffle仪表板，请安装最新版本的Truffle<a class="ae mr" href="https://trufflesuite.com/docs/truffle/quickstart/" rel="noopener ugc nofollow" target="_blank">并在您的终端中输入命令<code class="fe nf ng nh ni b">truffle dashboard</code>。现在，任何需要您的私钥的操作都可以通过仪表板进行。例如，要部署您的合同，确保在您的<code class="fe nf ng nh ni b">truffle-config.js</code>文件中指定了正确的端口，然后右键单击您的合同以部署它并选择<code class="fe nf ng nh ni b">dashboard: 24012</code>。默认为<code class="fe nf ng nh ni b">24012</code>。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/782b4dddd674f1500131d5438cf9f3da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fechPVan1ikKPnqg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">确保在truffle-config.js文件中选择了正确的端口</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/e1c23c750196b65e5be6b76383b46c86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KOwfcpU87A5Kd7xT"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">部署合同时选择仪表板选项</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/1eaa38c5e8de6c748d0e37b0614fb009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BHk1TGzZXV2PBXLB"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">所有交易都通过Truffle Dashboard进行，因此您不再需要共享您的私钥！</p></figure><h1 id="9012" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">正确的工具，正确的前进方向</h1><p id="8636" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">构建一个Web3项目并不复杂。有了正确的工具，前进的道路变得清晰。有许多方法可以改进您的工作流程，但是让Truffle for VS代码扩展为您所用将有助于您在您可能已经熟悉的环境中高效地工作。这个领域发展非常快，新的工具一直在被创造出来。因此，希望这篇文章能让你在浏览Web3工具栈时，有一种简单的方法来简化开发过程。</p></div></div>    
</body>
</html>