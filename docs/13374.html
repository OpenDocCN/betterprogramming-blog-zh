<html>
<head>
<title>3 Ways To Improve Your Try/Except Statements in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">改进Python中Try/Except语句的3种方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/3-ways-to-improve-your-try-except-statements-in-python-df46064a42bf?source=collection_archive---------6-----------------------#2022-08-22">https://betterprogramming.pub/3-ways-to-improve-your-try-except-statements-in-python-df46064a42bf?source=collection_archive---------6-----------------------#2022-08-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1530" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">确保有效异常处理的提示</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c18aa3b377fdcad22193e8604ce43fc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NDj61Y_6-XWBE7pAIbHSrA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由ThisIsEngineering拍摄:<a class="ae ky" href="https://www.pexels.com/photo/female-software-engineer-coding-on-computer-3861951/" rel="noopener ugc nofollow" target="_blank">https://www . pexels . com/photo/female-software-engineer-coding-on-computer-3861951/</a></p></figure><p id="0929" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Try和except语句是学习Python时最先接触的工具之一。它们使用户能够测试代码中的错误并处理异常。</p><p id="1cb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，人们很容易以这样的方式编写try和except子句，要么不会产生最大的好处，要么最终给他们带来很多麻烦。</p><p id="7c9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们回顾了用户在Python中编写有效的try/except语句可以做的三件事:</p><h1 id="9518" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1.避免使用Pass语句</h1><p id="e141" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">让我们从解决使用try/except语句时可能犯的一个更严重的错误开始:在except子句中包含pass语句。</p><p id="6821" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">pass语句充当占位符，在某些情况下确实有它的用途。然而，它不属于except子句。</p><p id="9314" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了说明为什么会出现这种情况，让我们编写代码，尝试将用户输入的两个数字相除，在except子句中插入一个pass语句。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="4780" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从表面上看，这些代码可能是良性的。毕竟，它将毫无问题地运行。但是，如果分割不成功并引发异常，我们将完全不知道。</p><p id="072d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常，这可能会造成问题，因为try/except语句的结果可能会影响后续操作。如果除法在Python脚本中很重要，我们需要知道何时获得或未获得该值。</p><p id="4621" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，跟踪except子句被触发的时间是一个很好的做法。</p><p id="b4bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过用print语句替换pass语句来改进前面的代码。这样，我们就知道何时可以或不可以执行分割。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="4c88" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2.在Except子句中指定异常</h1><p id="2405" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">虽然跟踪except块被触发的情况是一个好习惯，但是没有指定错误类型的用户将无法知道为什么try子句中的代码不能运行。</p><p id="7297" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python中有许多类型的异常。识别引发的异常使用户更容易理解他们的代码及其输出。查看一下<a class="ae ky" href="https://docs.python.org/3/library/exceptions.html" rel="noopener ugc nofollow" target="_blank"> Python的内置异常</a>以熟悉可能出现的错误类型是值得的。</p><p id="906e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过前面的代码，我们可以知道该分部何时会引发异常，但我们不知道它是什么类型的异常。理论上，如果用户输入一个字母而不是一个数字，除法会产生一个<code class="fe mu mv mw mx b">ValueError</code>，或者如果用户将<code class="fe mu mv mw mx b">0</code>指定给分母，除法会产生一个<code class="fe mu mv mw mx b">ZeroDivisionError</code>。这种分裂也可能引发一个我们没有预料到的错误。</p><p id="4d23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在except子句中指定异常可以给我们更详细的反馈。我们现在可以知道为什么会出现错误，而不是只知道错误何时出现。</p><p id="39cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们通过为每个异常创建单独的except子句来修改代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="b27b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这种安排，如果我们未能执行try块，我们可以判断错误是来自分配一个非数字输入，一个0到分母，还是另一个来源。</p><h1 id="e672" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3.包括F <code class="fe mu mv mw mx b">inally</code>条款(如适用)</h1><p id="4bf2" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><code class="fe mu mv mw mx b">finally</code>子句虽然不是强制性的，但是可以包含在try/except语句中。</p><p id="165b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论try/except语句中运行哪个子句，用户都可能希望在最后执行相同的任务。</p><p id="b362" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于我们当前的例子，让我们假设无论运行哪个代码块，我们都希望在末尾包含一个print语句。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="b3ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一种可行的方法，但是在多个块中重复同一行代码会导致冗余。此外，如果我们想改变这种说法，我们必须在每一个条款中进行修改。</p><p id="fbcd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户可以利用<code class="fe mu mv mw mx b">finally</code>子句来执行给定的代码，而不是在多个地方编写同一行代码，不管之前执行了哪个块。</p><p id="d785" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们修改了try/except语句，加入了以下子句:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="a16b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了<code class="fe mu mv mw mx b">finally</code>子句，我们可以用更简洁、可读性更好的代码获得同样的结果。此外，它使调试或任何种类的修改更容易执行。</p><h1 id="c02b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/18f34bdd6d59abb7ff16eae8580ab3b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tcyz0ituEt2z7rXd"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@prateekkatyal?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Prateek Katyal </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="e665" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最终，这些改进try/except语句的技巧是基于我编写和阅读他人脚本的经验。</p><p id="6c77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">避免pass语句、指定异常类型、利用<code class="fe mu mv mw mx b">finally</code>子句都是用户编写易于阅读和调试的try/except语句的方法。</p><p id="a04b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！</p></div></div>    
</body>
</html>