<html>
<head>
<title>Python 3.9 Is Bringing Some Exciting New Features</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 3.9带来了一些令人兴奋的新特性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/python-3-9-brings-some-exciting-features-a09a02c0fe22?source=collection_archive---------4-----------------------#2020-06-14">https://betterprogramming.pub/python-3-9-brings-some-exciting-features-a09a02c0fe22?source=collection_archive---------4-----------------------#2020-06-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c8a1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">新的更新正在进行中</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/12e7ef975275adb440c2fda7e6b110b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*euWb2EQy4Al6VSJS"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@maxcodes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">麦克斯韦·纳尔逊</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="ce49" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Python的新版本来了！很快，它就会出现在我们的机器上。Python已经发布了Python 3.9的测试版(3.9.0b3)，并将很快发布Python 3.9的完整版。</p><p id="fd0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">新版本引入了一些令人兴奋的功能和新模块。和他们一起动手练习会很有趣。在此之前，让我们了解一下这些特性和模块的功能。</p><h1 id="2e18" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">引入新功能</h1><h2 id="a7e6" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">字典合并和更新运算符</h2><p id="2c3d" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">Python 3.9在dict类中引入了合并(|)和更新(|=)操作符。如果你有两个字典<strong class="ky ir"> x </strong>和<strong class="ky ir"> y，</strong>你现在可以使用这些操作符来合并和更新它们。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="9394" class="mk lt iq nc b gy ng nh l ni nj">x = {1: "one", 2: "two"}<br/>y = {3: "three"}</span></pre><p id="36eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以使用|来合并这两个词典。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="e58d" class="mk lt iq nc b gy ng nh l ni nj">z=x|y<br/>print(z)</span><span id="71d1" class="mk lt iq nc b gy nk nh l ni nj"><strong class="nc ir">[Output]:</strong> {1: "one", 2: "two", 3: "three"}</span></pre><p id="bb99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果两个字典有一个公共键，那么输出将显示第二个键-值对。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="1cc5" class="mk lt iq nc b gy ng nh l ni nj">x = {1: "one", 2: "two",3: "3"}<br/>y = {3: "three"}</span><span id="24af" class="mk lt iq nc b gy nk nh l ni nj">z=x|y<br/>print(z)</span><span id="5e98" class="mk lt iq nc b gy nk nh l ni nj"><strong class="nc ir">[Output]:</strong> {1: "one", 2: "two", 3: "three"}</span></pre><p id="3af4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了更新字典，可以使用下面的操作符。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="9504" class="mk lt iq nc b gy ng nh l ni nj">x = {1: "one", 2: "three"}<br/>y = {2: "two"}<br/>x|=y<br/>print(x)</span><span id="5f4f" class="mk lt iq nc b gy nk nh l ni nj"><strong class="nc ir">[Output]: </strong>{1: "one", 2: "two"}</span></pre><h2 id="5e65" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">removeprefix()和removesuffix()字符串方法</h2><p id="e81a" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">在Python的str类中，新的更新引入了新的<code class="fe nl nm nn nc b">removeprefix()</code> <em class="no"> </em>和<code class="fe nl nm nn nc b">removesuffix()</code>方法。</p><p id="8021" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以使用<code class="fe nl nm nn nc b">removeprefix()</code>方法删除任何字符串的前缀。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="ccca" class="mk lt iq nc b gy ng nh l ni nj">'TestHook'.removeprefix('Test')<br/>'Hook'</span></pre><p id="3b1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果字符串不是以输入前缀开头，将返回原始字符串的副本。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="932c" class="mk lt iq nc b gy ng nh l ni nj">'BaseTestCase'.removeprefix('Test')<br/>'BaseTestCase'</span></pre><p id="96a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果字符串以输入后缀结尾，输出将类似于<code class="fe nl nm nn nc b">string[:-len(suffix)]</code>。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="9c18" class="mk lt iq nc b gy ng nh l ni nj">'MiscTests'.removesuffix('Tests')<br/>'Misc'<br/></span></pre><p id="1564" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果输入后缀为空或者字符串不以它结尾，则输出将是原始字符串的副本。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="92f5" class="mk lt iq nc b gy ng nh l ni nj">'TmpDirMixin'.removesuffix('Tests')<br/>'TmpDirMixin'</span></pre><h2 id="f0d9" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">新解析器</h2><p id="1524" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">Python 3.9使用了一种新的解析器，这是一种基于PEG的解析器。之前Python用的是LL(1)。在构建语言的新特性时，PEG比LL(1)更灵活。官方文档称，这种灵活性将在Python 3.10和更高版本中出现。</p><h2 id="c1b8" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">类型提示</h2><p id="45d0" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">Python动态地为变量指定数据类型。对于数据类型的静态分配，使用类型提示。这是在Python 3.5中引入的。</p><p id="07dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您现在可以使用内置的集合类型(<code class="fe nl nm nn nc b">list</code>和<code class="fe nl nm nn nc b">dict</code>)作为泛型类型。以前，您必须从<code class="fe nl nm nn nc b">typing</code>导入资本类型(<code class="fe nl nm nn nc b">List</code>或<code class="fe nl nm nn nc b">Dict</code>)。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="5bbf" class="mk lt iq nc b gy ng nh l ni nj">def greet_all(names: list[str]) -&gt; None:<br/>    for name in names:<br/>        print("Hello", name)</span></pre><p id="08be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在不需要从<code class="fe nl nm nn nc b">typing.List</code>调用<code class="fe nl nm nn nc b">List</code>。</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h1 id="9af5" class="ls lt iq bd lu lv nw lx ly lz nx mb mc jw ny jx me jz nz ka mg kc oa kd mi mj bi translated">欢迎新图书馆</h1><h2 id="d9b3" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">zoneinfo</h2><p id="4e26" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">新的Python更新引入了一个新的模块<code class="fe nl nm nn nc b">zoneinfo</code> <strong class="ky ir">。它将为标准图书馆带来对IANA时区数据库的支持。</strong></p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="2aff" class="mk lt iq nc b gy ng nh l ni nj"><strong class="nc ir">&gt;&gt;&gt; from</strong> <strong class="nc ir">zoneinfo</strong> <strong class="nc ir">import</strong> ZoneInfo<br/><strong class="nc ir">&gt;&gt;&gt; from</strong> <strong class="nc ir">datetime</strong> <strong class="nc ir">import</strong> datetime<br/><br/>&gt;&gt;&gt; dt = datetime(2020, 10, 31, 12, tzinfo=ZoneInfo("America/Los_Angeles"))</span><span id="4b36" class="mk lt iq nc b gy nk nh l ni nj">&gt;&gt;&gt; print(dt)<br/>2020-10-31 12:00:00-07:00</span><span id="260d" class="mk lt iq nc b gy nk nh l ni nj">&gt;&gt;&gt; dt.tzname()<br/>'PDT'</span></pre><p id="0a46" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们创建了一个<code class="fe nl nm nn nc b">datetime </code>对象，并在该对象中给出了一个时区参数。如果您现在使用<code class="fe nl nm nn nc b">dt.tzname()</code> <em class="no">，</em>查找时区，输出将是<em class="no"> </em> <code class="fe nl nm nn nc b">PDT</code> <em class="no">。</em></p><h2 id="291f" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated">图表库</h2><p id="2367" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">如果你想对图形进行拓扑排序，你可以在你的代码中添加<code class="fe nl nm nn nc b">graphlib</code>模块。</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h1 id="56d7" class="ls lt iq bd lu lv nw lx ly lz nx mb mc jw ny jx me jz nz ka mg kc oa kd mi mj bi translated">参考</h1><p id="3bfc" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated"><a class="ae kv" href="https://docs.python.org/3.9/whatsnew/3.9.html" rel="noopener ugc nofollow" target="_blank"> Python 3.9新特性</a></p><p id="0d95" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://docs.python.org/3.9/library/graphlib.html#module-graphlib" rel="noopener ugc nofollow" target="_blank">图形库模块</a></p><p id="c744" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">和平！</p></div></div>    
</body>
</html>