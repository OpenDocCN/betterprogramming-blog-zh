<html>
<head>
<title>Using Cookies in JavaScript Like a Pro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像专家一样使用JavaScript中的Cookies</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/using-cookies-in-javascript-like-a-pro-de618aee4594?source=collection_archive---------15-----------------------#2019-10-07">https://betterprogramming.pub/using-cookies-in-javascript-like-a-pro-de618aee4594?source=collection_archive---------15-----------------------#2019-10-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c623" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于JavaScript中的cookies、本地存储和会话存储的系列文章的第1部分</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a5137f5c77507e5637900195557cec62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qBCNOFY2f-QOYzT6"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@molliesivaram?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">莫丽·西瓦拉姆</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="d248" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">互联网是一个奇妙的地方，它充满了有用的信息，可爱动物的图片，以及各种其他伟大的事情。有时，我们想与这些东西互动，也许在网站上创建一个帐户。</p><p id="77d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不幸的是，建立网络的协议，HTTP(超文本传输协议)，本质上是无状态的。</p><p id="a064" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">HTTP无状态是什么意思？在HTTP中，每个命令都是独立执行的，不知道之前的命令是什么。那么，我们如何创建能记住用户及其行为的交互式网站呢？</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="c1cd" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">饼干到底是什么？</h1><ul class=""><li id="f36f" class="mr ms iq ky b kz mt lc mu lf mv lj mw ln mx lr my mz na nb bi translated">cookie是网站发送的一小段信息，存储在用户的计算机上。</li><li id="e4c3" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">用户的浏览器可以读取Cookies来告诉网站某种信息，比如用户是谁。</li><li id="9b08" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">Cookies只能存储字符串(我们马上会创建一个解决方法)。</li></ul><p id="f2e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用cookies我们需要完成四项基本任务。</p><ul class=""><li id="f40c" class="mr ms iq ky b kz la lc ld lf nh lj ni ln nj lr my mz na nb bi translated">创建一个cookie。</li><li id="3465" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">读一块饼干。</li><li id="91f8" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">更新cookie。</li><li id="cf2e" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">删除cookie。</li></ul><p id="cbe4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这四个动作的公共集合通常被称为CRUD。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="0306" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">用JavaScript创建Cookie</h1><p id="460c" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">这篇文章中的所有代码都可以在我的<a class="ae kv" href="https://github.com/wukrit/js-session-experiments/blob/master/js/main.js" rel="noopener ugc nofollow" target="_blank"> GitHub仓库中找到，这里是</a>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="d86c" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">用JavaScript读取Cookies</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="2d07" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">用JavaScript更新Cookie</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="ca54" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">在JavaScript中删除Cookie</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="fbd9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可能已经注意到，当我们试图读取<code class="fe np nq nr ns b">document.cookie</code>时，我们会得到一个分号分隔的cookies字符串。我们可以通过用分号分隔字符串来挑选特定的cookies。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="ab06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将返回一个包含所有cookies的数组。然后，我们可以遍历这个数组，找到我们需要的特定cookies。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="32f5" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">将对象存储为Cookie</h1><p id="796b" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">此外，我们可以使用cookies来存储更复杂的数据结构，比如一个对象。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="558f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">cookie确实有存储容量的限制，所以不要试图将整个API都塞进一个cookie中。</p><p id="1d0c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">既然我们已经在cookie中存储了一个对象，我们必须把它作为一个对象取出来。我们可以用下面的方法来完成。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="d23d" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">饼干的缺点</h1><ul class=""><li id="7b4b" class="mr ms iq ky b kz mt lc mu lf mv lj mw ln mx lr my mz na nb bi translated">Cookies所能容纳的数据量是有限的。</li><li id="90af" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">用户很容易阅读Cookies。</li><li id="d9d1" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">精明的用户可以使用浏览器扩展来编辑他们的cookies。</li></ul></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="eb94" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="ee92" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">Cookies是跟踪网站信息的好方法。您可以使用这些信息来跟踪谁登录(如果没有某种加密，请不要这样做)，跟踪用户的操作，甚至限制用户可以执行某个操作的次数。</p><p id="5bb6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的下一篇文章中，我将介绍另一个工具，我们可以用它来跟踪多种状态下的信息，这就是本地存储。</p></div></div>    
</body>
</html>