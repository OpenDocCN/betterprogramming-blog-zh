# 5 您应该知道的 React 组件最佳实践

> 原文：<https://betterprogramming.pub/best-practices-i-wish-all-react-developers-knew-part-1-ff6cdee0666a>

## 析构道具、命名组件等等

![](img/de4fede990e3121236aee020f377937f.png)

迈克尔·泽兹奇在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

React 是一个非常灵活的软件库，在应用程序结构或设计方面没有明确的最佳实践。然而，开发人员仍然可以使用一些最佳实践和通用规则来编写更好的 React 代码。

对于开发人员来说，软件架构意味着高效和灵活。好软件的目标是在需要任何修改或添加时，保持代码库的可维护性和模块化。

我收集了一些我为编写良好的 React 代码而挑选的最佳实践，这些实践已被证明在大大小小的应用程序中都是有效的。

然而，请记住，这些不是规则，这些是我发现的关于编写良好 React 代码的最佳实践的意见。

我们将把它分成几个部分，以便于理解。

# 成分

我们将开始讨论组件及其结构。

## 命名组件

始终命名您的 React 组件。它使得读取错误堆栈、使用 React 开发工具和搜索大型代码库变得更加容易。

它还有助于自动完成找到您想要使用的组件！

```
// This is an unnamed component. Don't do this
export default () => <div>...</div>// This is a named component :)
export default function Card() { return <div>...</div> )
```

## 编写一致组织的组件

无论您选择哪种风格来编写组件，都要确保在整个代码库中保持一致。这意味着组织，就像你把你的助手函数或者导出放在哪里，或者是相对于 lambda 函数的`function`语法(就像我上面做的)。如果每个文件的代码看起来和感觉起来都一样，那么每个开发人员的生活都会变得更加轻松和高效。

## 将常量和帮助器分离到不同的文件中

我在编写 React 组件时的目标是将每个文件控制在 200 行以内。这意味着将`helper`函数移动到一个单独的`component.utils.ts`文件中，将常量移动到一个`component.constants.ts`文件中，以使组件更小，更易于阅读。

这在处理大型状态对象时特别有效:

有了这种结构，理解甚至非常复杂的组件也变得容易得多，因为它们是模块化的，并且被分解成小块。

## 破坏道具

大多数 React 组件都是基本函数。他们接受一些道具并返回标记。大多数情况下，你直接使用传入的参数，所以析构`props`是有意义的，这样就不会到处重复。

除非您的组件有托管状态，否则将函数参数分解成单独的键几乎总是有意义的:

## 不要传递太多的道具

复杂的组件更难阅读和维护。如果你传入了很多道具，真的要考虑它们是否可以被分解成更多的部分。传入的道具数量通常与组件的工作量相关。

如果我传入了六个以上的道具，我通常知道有某种方法可以将组件分解成更小的块。在某些情况下，像输入，有大量的道具是可以的(它们需要很多值)；否则，提取并模块化。

## 避免嵌套渲染函数

这是我在审查的代码中最不喜欢看到的做法。当从一个组件中提取标记和逻辑时，不要在另一个组件中创建函数。嵌套组件几乎总是一个坏主意，会使代码难以阅读。

将新组件移动到它自己的文件中，并依赖 props，而不是使用全局嵌套状态。

## 条件渲染实践

有几个很好的方法可以进行条件渲染。短路运算符是进行条件渲染的一种非常简单快捷的方式:

这里有一个关于短路操作符的很棒的[栈溢出帖子](https://stackoverflow.com/questions/12554578/does-javascript-have-short-circuit-evaluation)，解释了你可以用这些来写更干净的代码的更多方法。

## 析构时分配默认属性

使用默认属性时，可以在组件上使用`defaultProps`属性，但不要。这使得组件更难阅读，因为值没有在定义键的地方声明。

我更喜欢在析构属性时指定默认值。这也使得从上到下阅读代码更加容易，而不必跳来跳去地寻找默认的属性，将定义和值放在一起。

## 喜欢路过的物体

限制传递的属性数量的一个好方法是传递一个对象，而不是一组原始值。例如，您可以将用户分组在一起，而不是传递用户的每个方面。接下来，如果用户获得了额外的数据，这个函数不需要修改来适应这种情况。

## 将列表移动到单独的组件中

React 中最常见的操作之一是使用一个`map`函数遍历一个列表来生成组件。然而，在组件中，这会导致一些混乱的代码:额外的标记、缩进和 Javascript，这些都无助于可读性。

当您需要映射元素时，将它们提取到它们自己的列表组件中。如果父组件只是显示列表，它不需要知道细节，这使得父组件更容易阅读。

但是，如果一个组件的主要职责是显示一个列表，那么就保留它。每个组件应该只有一个映射。如果有多个，那么它们都应该被提取到它们自己的组件中。

# 结论

请记住，这些只是建议，最佳实践是最适合您的团队的实践。在下一部分，我们将讨论状态管理的最佳实践。