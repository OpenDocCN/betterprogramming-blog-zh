<html>
<head>
<title>Theming in Jetpack Compose for Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android版Jetpack组合中的主题</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/theming-in-jetpack-compose-for-android-667d42b8279c?source=collection_archive---------14-----------------------#2021-03-09">https://betterprogramming.pub/theming-in-jetpack-compose-for-android-667d42b8279c?source=collection_archive---------14-----------------------#2021-03-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="84c6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">处理颜色、版式和形状</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/318941bfa094b0e78af6a1015ed405e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LPGAg663M1Id5yi9"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">丹尼尔·利维斯·佩鲁西在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片。</p></figure><p id="f96a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，您将了解如何为使用<a class="ae ky" href="https://developer.android.com/jetpack/compose" rel="noopener ugc nofollow" target="_blank"> Jetpack Compose </a>构建的应用程序实现主题化。Compose中的主题有三个主要方面:颜色、字体和形状。在本文结束时，您将学习如何创建和使用这三个工具。</p><p id="6fe0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">注意:Jetpack Compose最近已转移到测试版。这意味着API结构将不再有任何剧烈的变化。因此，这将是学习如何使用下一代UI套件进行Android开发的大好时机。从主题开始是一个完美的起点，所以好好享受这篇文章吧。</em></p><p id="962b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">需要安装Android Studio Canary，北极狐(2020 . 3 . 1)</em><strong class="lb iu"><em class="lv"/></strong><em class="lv">版本才能使用Jetpack Compose Beta。</em></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1723" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">介绍</h1><p id="a10d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在传统的UI套件(即基于视图/XML的布局)中，我们通常使用<code class="fe na nb nc nd b">themes.xml</code>文件来设计主题。但是当涉及到Jetpack Compose时，一切都将在Kotlin文件中完成。</p><p id="f1e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与传统主题相比，Jetpack编写主题主要有两个优点。</p><ol class=""><li id="269e" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">与传统方法相比，实现自定义主题或日夜主题选项要简单得多。</li><li id="10c0" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">Jetpack Compose中的主题是基于材料设计的，所以我们在Jetpack Compose中使用主题时不再需要担心遵循材料设计准则。</li></ol><p id="87e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢Kotlin，那么你会喜欢在Jetpack Compose中使用主题。Kotlin的命名参数、lambda函数、默认参数值和其他很酷的特性使得在Compose中实现主题化变得很有趣。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="0c89" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">关键领域</h1><p id="a6f2" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">当涉及到Compose中的主题化时，有三件重要的事情需要关注:颜色、字体和形状。每个区域都有其重要性，所以我们将学习如何一个一个地详细创建它们。最后，我们将在我们的作曲主题中使用它们。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="bcbe" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">颜色；色彩；色调</h1><p id="c18c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">说到主题，颜色是最需要关注的方面。在传统的主题化方法中，我们会在白天和夜晚的片段中维护一些颜色资源文件。这是一个不错的方法，但是在实现定制主题时，我们必须编写大量代码。</p><p id="4f91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Compose主要致力于使用来自<code class="fe na nb nc nd b">androidx.compose.material</code>库的<code class="fe na nb nc nd b">Colors</code>类以简洁的方式设计多个主题。</p><h2 id="da82" class="ns me it bd mf nt nu dn mj nv nw dp mn li nx ny mp lm nz oa mr lq ob oc mt od bi translated">如何定义颜色</h2><p id="3681" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们可以使用来自<code class="fe na nb nc nd b">androidx.compose.UI.graphics</code>的<code class="fe na nb nc nd b">Color</code>在Jetpack Compose中定义一种颜色。看一看:</p><pre class="kj kk kl km gt oe nd of og aw oh bi"><span id="7e25" class="ns me it nd b gy oi oj l ok ol">val <em class="lv">Purple200 </em>= <em class="lv">Color</em>(0xFFBB86FC)</span></pre><p id="0645" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">0xFF</code>代表颜色的alpha状态，而<code class="fe na nb nc nd b">BB86FC</code>代表颜色的十六进制代码。</p><p id="5230" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以使用RGB值来创建颜色:</p><pre class="kj kk kl km gt oe nd of og aw oh bi"><span id="d7c6" class="ns me it nd b gy oi oj l ok ol">val <em class="lv">redColor </em>= <em class="lv">Color</em>(red = 256, blue = 0, green = 0, alpha = 0xFF)</span></pre><h2 id="984b" class="ns me it bd mf nt nu dn mj nv nw dp mn li nx ny mp lm nz oa mr lq ob oc mt od bi translated">设计调色板</h2><p id="6235" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">为实现昼夜主题，作曲自带了<code class="fe na nb nc nd b">lightColors</code> <em class="lv"> </em>和<code class="fe na nb nc nd b">darkColors</code> <em class="lv"> </em>扩展了<em class="lv"/><em class="lv"/><code class="fe na nb nc nd b">Colors</code>类。<code class="fe na nb nc nd b">Color</code>类有12个参数来定义在整个应用程序中所有可组合函数上使用的颜色。让我们看看<code class="fe na nb nc nd b">Colors</code>类的构造函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="e0c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个参数代表材质主题中使用的相应颜色。在本文中，我们将关注最重要和最常用的颜色，如<code class="fe na nb nc nd b">primary</code>、<code class="fe na nb nc nd b">primaryVariant</code>、<code class="fe na nb nc nd b">secondary</code>、<code class="fe na nb nc nd b">background</code>、<code class="fe na nb nc nd b">surface</code>和<code class="fe na nb nc nd b">onSurface</code>。首先，让我们了解一下这些颜色在材料主题中的含义:</p><ul class=""><li id="c306" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu oo nk nl nm bi translated"><code class="fe na nb nc nd b">primary</code>:应用程序屏幕和组件中最常显示的颜色。<code class="fe na nb nc nd b">primary</code>代表您在应用程序中的品牌颜色。</li><li id="2550" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu oo nk nl nm bi translated"><code class="fe na nb nc nd b">primary variant</code>:颜色<code class="fe na nb nc nd b">primary</code>的色调变化。</li><li id="f6e1" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu oo nk nl nm bi translated"><code class="fe na nb nc nd b">secondary</code>:用于表示应用中的二级品牌颜色。</li><li id="1418" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu oo nk nl nm bi translated"><code class="fe na nb nc nd b">background</code>:根和可滚动内容后面出现<code class="fe na nb nc nd b">background</code>颜色。</li><li id="5d21" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu oo nk nl nm bi translated"><code class="fe na nb nc nd b">surface</code>:应用于卡片、菜单等表面组件的颜色。</li><li id="4124" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu oo nk nl nm bi translated"><code class="fe na nb nc nd b">onSurface</code>:在表面颜色之上绘制时，通过文本/图标可访问性指南的颜色。</li></ul><p id="861a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在创建调色板之前，我们需要定义颜色。创建一个Kotlin文件并将其命名为<code class="fe na nb nc nd b">Colors</code>。在文件中，定义所有需要的颜色。可以把它想象成传统的昼夜颜色资源文件的组合。看看简单的颜色文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="0b6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们需要创建两个调色板:<code class="fe na nb nc nd b"> LightColorPalette</code> <em class="lv"> </em>和<code class="fe na nb nc nd b">DarkColorPalette</code> <em class="lv">。首先，创建一个名为<code class="fe na nb nc nd b">Themes</code>的Kotlin文件，并在这里添加你的调色板<em class="lv">。</em>看看:</em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="d59d" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">排印</h1><p id="5d6e" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><code class="fe na nb nc nd b">Typography</code>是一个类，它提供了一种定义字体样式的方法，可以在整个应用程序中重用。它提供了应用不同样式方面的灵活性，如字体系列、字体粗细、行高、字体大小等等。默认情况下，材质主题具有以下值:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/53d6223cbb8b63a8826c819fe5d0d60d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CAchOhm0yRtVp7BC4yBPCA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://material.io/blog/design-material-theme-type" rel="noopener ugc nofollow" target="_blank">材料设计</a></p></figure><p id="9aa7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe na nb nc nd b">Typography</code>类构造函数，我们可以将任何<code class="fe na nb nc nd b">textstyle</code>从<code class="fe na nb nc nd b">H1</code>更改为<code class="fe na nb nc nd b">overline</code>。我们也可以通过更新<code class="fe na nb nc nd b">fontFamily</code>属性在每个<code class="fe na nb nc nd b">textstyle</code>上使用不同的字体。</p><p id="93e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了定义我们的排版，我们应该创建一个名为<code class="fe na nb nc nd b">AppTypography</code>的Kotlin文件，然后在一个排版对象中定义所有的文本样式:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="c4a1" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">形状</h1><p id="9bd8" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">您在应用程序中使用的任何形状都可以在一个<code class="fe na nb nc nd b">shapes</code>对象中定义，以便在不同的地方重用它。一个常见的用例是具有不同圆角半径或按钮形状的圆角布局。任何圆形、方形、三角形等。可以认为是一种形状。</p><p id="0ba1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与传统形状不同，在Jetpack Compose中创建形状非常简单。首先，我们需要创建一个Kotlin文件并将其命名为<code class="fe na nb nc nd b">Shapes</code>。在这个文件中，创建一个类型为<code class="fe na nb nc nd b">Shapes</code>的名为<code class="fe na nb nc nd b">AppShapes</code>的对象，然后定义应用程序中需要的所有形状。看一看:</p><pre class="kj kk kl km gt oe nd of og aw oh bi"><span id="4354" class="ns me it nd b gy oi oj l ok ol">val <em class="lv">AppShapes </em>= Shapes(<br/>    small = <em class="lv">RoundedCornerShape</em>(4.<em class="lv">dp</em>),<br/>    medium = <em class="lv">RoundedCornerShape</em>(6.<em class="lv">dp</em>),<br/>    large = <em class="lv">RoundedCornerShape</em>(8.<em class="lv">dp</em>)<br/>)</span></pre><p id="5440" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以根据自己的需求声明任何形状。为了简单起见，我们只使用了<code class="fe na nb nc nd b">RoundedCornerShape</code> <em class="lv">。我们已经完成了形状的定义。在下一节中，您将看到如何在<code class="fe na nb nc nd b">MaterialTheme</code>中使用它们。</em></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="6de9" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">材料主题</h1><p id="6b19" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们已经完成了颜色、字体和形状的创建。现在是时候创建一个自定义<code class="fe na nb nc nd b">MaterialTheme</code>并使用我们创建的所有资源了。作为最佳实践，开发人员创建一个带有两个参数的可组合函数:<code class="fe na nb nc nd b">isDarkTheme</code>和<code class="fe na nb nc nd b">content</code>。</p><ol class=""><li id="800a" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">isDarkTheme</code>:布尔型参数，默认值为<code class="fe na nb nc nd b">isSystemInDarkTheme()</code>。从它的名字，你就能明白它的用途。</li><li id="9bff" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">content</code>:这是一个需要通过应用材质主题来显示的可组合功能。</li></ol><p id="ad34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在函数内部，我们需要根据主题定义颜色(即暗模式或亮模式)。然后我们需要使用<code class="fe na nb nc nd b">MaterialTheme</code>对象来应用颜色、字体和形状。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="4434" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经完成了主题化部分。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="a49e" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">应用主题</h1><p id="72a7" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">要给任何组件充气，我们需要使用<code class="fe na nb nc nd b">setContent</code>函数。在函数内部，我们需要定义<code class="fe na nb nc nd b">AppTheme</code>并在<code class="fe na nb nc nd b">theme</code> lambda中声明应用程序内容。为了更好地理解，请看一下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="d051" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">奖金</h1><p id="bfe2" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">要了解有关JetPack Compose的更多信息，请查看以下文章:</p><ul class=""><li id="4512" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu oo nk nl nm bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/jetpack-compose-components-part-1-a80717dbfb59">“Jetpack合成组件(第1部分)”</a></li><li id="a672" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu oo nk nl nm bi translated"><a class="ae ky" href="https://medium.com/better-programming/jetpack-compose-a-new-and-simple-way-to-create-material-ui-in-android-f49c6fcb448b" rel="noopener">“Jetpack Compose——一种在Android中创建素材UI的简单新方法”</a></li><li id="cde7" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu oo nk nl nm bi translated"><a class="ae ky" href="https://medium.com/android-dev-hacks/jetpack-compose-with-server-driven-ui-396a19f0a661" rel="noopener">“使用服务器驱动的用户界面构建JetPack”</a></li><li id="ba21" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu oo nk nl nm bi translated"><a class="ae ky" href="https://medium.com/better-programming/jetpack-compose-how-to-build-a-messaging-app-e2cdc828c00f" rel="noopener">“Jetpack Compose:如何构建消息应用程序”</a></li></ul><p id="40aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前就这些。希望你学到了有用的东西。感谢阅读。</p></div></div>    
</body>
</html>