<html>
<head>
<title>Learn How to Crop and Optimize Your Images With Appwrite, an Open-Source Back-End Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解如何使用开源后端服务器Appwrite裁剪和优化您的图像</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-appwrite-open-source-platform-as-your-image-cropping-optimisation-service-2c5efab4edcb?source=collection_archive---------15-----------------------#2019-08-28">https://betterprogramming.pub/how-to-use-appwrite-open-source-platform-as-your-image-cropping-optimisation-service-2c5efab4edcb?source=collection_archive---------15-----------------------#2019-08-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7452" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">更快地传送更好的图像</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1640bdf81cf4d36e46d3d3d83f26cb20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*914xYOJOBCjSVOoxMBcZjg.jpeg"/></div></div></figure><p id="64d5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你还没有听说过<a class="ae lq" href="https://appwrite.io" rel="noopener ugc nofollow" target="_blank"> Appwrite </a>，这是一个新的web和移动开发，<a class="ae lq" href="https://github.com/appwrite/appwrite" rel="noopener ugc nofollow" target="_blank">开源</a>后端服务器，它抽象了常见的开发任务，帮助开发者更快地交付软件。</p><p id="abe0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Appwrite有很多服务可以帮助你更快的写代码。它可以帮助您管理用户的身份验证、持久数据库和文件管理。Appwrite最酷的功能之一是它能够帮助您裁剪图像文件，从而帮助您在应用程序中使用优化的图像并提高性能。</p><p id="8d1f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Appwrite是跨平台和框架不可知的，这意味着您可以将它与任何可用的Appwrite SDKs一起使用，或者直接使用HTTP API。您可以从您的客户端应用程序或后端直接与Appwrite API集成。您可以根据自己的特定用例和需求来决定如何与它集成。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="915a" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">开始</h1><p id="68a2" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">Appwrite是一个打包为Docker映像的自托管项目，因此要设置它，您需要做的就是在您选择的主机上运行Docker映像(Linux、Mac OS和Windows都支持)。最快的开始方式是从终端运行Appwrite快速安装命令。请注意，您需要安装Docker CLI才能工作。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="5c89" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦Docker完成了对Appwrite服务器环境的设置，就可以通过端口80 (http://localhost)访问您的本地主机，进入Appwrite控制台。如果您的主机已经使用了端口80，您可以在上面的命令中更改端口号。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="c366" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">创建您的第一个项目</h1><p id="7b25" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">Appwrite项目是数据库文档、存储文件和项目用户等应用资源的容器。要创建一个新项目，你需要做的就是从<a class="ae lq" href="http://localhost" rel="noopener ugc nofollow" target="_blank"> http://localhost </a>(或者你可能设置的任何其他主机)登录或者注册到你的新控制台，然后点击Create Project按钮。选择您的项目名称，并在创建后访问它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/56080489bf0d51395c1ea6759917bd89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3A0HAsTUnvrw6tDdzGOTpQ.jpeg"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">您的Appwrite项目仪表板</p></figure></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="ae25" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">上传您的文件</h1><p id="ea76" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">要了解图像裁剪是如何工作的，首先需要将一些文件上传到Appwrite服务器。最简单的方法是从Appwrite控制台UI上传文件。</p><p id="e954" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在新项目控制面板中，从左侧导航访问存储部分。进入后，点击屏幕右下角的圆形+添加按钮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/be865dd6b50457e4ab1eaba4aa35f0b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J_oQ3pCUqNNiU46mUkzMdg.png"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">Appwrite控制台文件创建表单。</p></figure><p id="92b7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">单击添加按钮后，您将访问文件创建表单，选择您的文件并单击创建按钮开始上传它们。如果您想知道什么是读和写权限字段，您可以在这里阅读关于Appwrite中的资源访问控制的更多信息。默认情况下，出于本教程的考虑，保留星号标记，为任何希望读写新文件的人提供通配符权限。</p><p id="87ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，尽管在这个示例中我们使用Appwrite控制台来上传文件，但是您可以在控制台中执行的任何操作也可以在Appwrite REST API和Appwrite团队提供的不同SDK中使用。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="83e8" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">裁剪您的文件</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/39ea76b2ec7f11ba5df2c280e2a5d762.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZzjUOdEzdddcx5Jg-xt-eA.png"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">单击文件名会显示更多信息，包括它的唯一ID。</p></figure><p id="3569" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要开始裁剪文件，您首先需要获得项目和文件的唯一id(uid)。要获得您的文件UID，您需要做的就是点击您想要裁剪的文件的名称，并从文件UID输入字段中复制其唯一的ID值。要获得新的项目UID，请从左侧导航按钮转到项目设置页面，并复制其UID输入字段值。</p><p id="3b18" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有了uid之后，使用这个API调用来调用文件，以查看新文件的预览:</p><p id="fb91" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lq" href="http://localhost/v1/storage/files/[FILE-UID]/preview?project=[PROJECT-UID]" rel="noopener ugc nofollow" target="_blank">http://localhost/v1/storage/files/[FILE-UID]/preview？project=[PROJECT-UID] </a></p><p id="5a84" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，要裁剪您的文件，请使用您选择的像素大小传递宽度和高度参数:</p><p id="1fb7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lq" href="http://localhost/v1/storage/files/[FILE-UID]/preview?project=[PROJECT-UID]&amp;width=100&amp;height=100" rel="noopener ugc nofollow" target="_blank">http://localhost/v1/storage/files/[FILE-UID]/preview？PROJECT =[PROJECT-UID]&amp;width = 100&amp;height = 100</a></p><p id="1cae" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当API调用只传递宽度或高度参数中的一个时，Appwrite服务器将自动调整第二个参数以保持图像的纵横比不变。</p><p id="b5ab" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">还要注意，为了避免滥用您的服务器，目前在宽度或高度上有一个最大4000像素的限制。有关详细文档，请访问完整的<a class="ae lq" href="https://appwrite.io/docs/storage#getFilePreview" rel="noopener ugc nofollow" target="_blank">预览API参考页面</a>。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="0c5f" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">优化您的预览图像</h1><p id="6e68" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">当在web上提供图像服务时，速度是至关重要的，这就是为什么Appwrite服务器为您提供了几个选项来加快图像服务的速度。</p><h2 id="774b" class="nc lz it bd ma nd ne dn me nf ng dp mi ld nh ni mk lh nj nk mm ll nl nm mo nn bi translated">更改图像质量</h2><p id="4ecf" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">默认情况下，您的图像质量设置为最高100，但如果可能，您可以更改它以减小图像大小。要更改图像大小，您只需将质量参数添加到API调用中:</p><p id="606d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lq" href="http://localhost/v1/storage/files/[FILE-UID]/preview?project=[PROJECT-UID]&amp;width=100&amp;height=100&amp;quality=75" rel="noopener ugc nofollow" target="_blank">http://localhost/v1/storage/files/[FILE-UID]/preview？project=[PROJECT-UID] &amp;宽度=100 &amp;高度=100 &amp;质量=75 </a></p><h2 id="1034" class="nc lz it bd ma nd ne dn me nf ng dp mi ld nh ni mk lh nj nk mm ll nl nm mo nn bi translated">使用WebP压缩提供图像</h2><p id="7fc8" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">WEBP是Google开发的一种压缩格式，有助于优化您的图像大小，而不会损失明显的图像质量。迄今为止，大多数现代web浏览器都支持WebP。为了避免不必要的错误，Appwrite服务器检查WebP客户端支持，并在必要时退回到使用旧的JPEG格式。</p><p id="baed" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要添加支持WebP的图像，您只需将输出参数添加到API调用中，并设置为WEBP:</p><p id="4334" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lq" href="http://localhost/v1/storage/files/[FILE-UID]/preview?project=[PROJECT-UID]&amp;width=100&amp;height=100&amp;output=webp" rel="noopener ugc nofollow" target="_blank">http://localhost/v1/storage/files/[FILE-UID]/preview？PROJECT =[PROJECT-UID]&amp;width = 100&amp;height = 100&amp;output = webp</a></p></div></div>    
</body>
</html>