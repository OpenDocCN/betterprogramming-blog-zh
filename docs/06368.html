<html>
<head>
<title>Master Python Lambda Functions With These 4 Don’ts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">掌握Python Lambda函数的这四个不要</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/master-python-lambda-functions-with-these-4-donts-655b212d36d7?source=collection_archive---------6-----------------------#2020-09-25">https://betterprogramming.pub/master-python-lambda-functions-with-these-4-donts-655b212d36d7?source=collection_archive---------6-----------------------#2020-09-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d4bb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用兰姆达斯，但不要误用它们</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a34669e566532c6edef819c5dbd56cfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9slRkVkDa86YSSIk"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@khachiksimonian?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">哈契克·西莫尼安</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="94b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Lambda函数是Python中的匿名函数。当您需要执行小型工作时，在本地环境中使用它们是一种方便的技术。有些人简单地称它们为lambdas，它们的语法如下:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c1d5" class="ma mb it lw b gy mc md l me mf">lambda arguments: expression</span></pre><p id="c3db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">lambda函数的创建由关键字<code class="fe mg mh mi lw b">lambda</code>表示，后跟一列参数和一个由冒号分隔的表达式。例如，<code class="fe mg mh mi lw b">lambda x: 2 * x</code>只是将任何输入的数字乘以2，而<code class="fe mg mh mi lw b">lambda x, y: x+y</code>只是计算两个数字的和。语法非常简单，对吗？</p><p id="aeb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您知道lambda函数是什么，本文旨在提供一些关于如何正确使用lambda函数的通用指南。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="0190" class="mq mb it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">1.不返回任何值</h1><p id="3b40" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">看一下语法，你可能会注意到我们没有为lambda函数返回任何东西。这都是因为lambda函数只能包含一个表达式。但是，使用<code class="fe mg mh mi lw b">return</code>关键字将构成一个与所需语法不兼容的语句，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在lambda中没有返回</p></figure><p id="fd10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个错误可能是由于不能区分表达式和语句而产生的。像那些涉及<code class="fe mg mh mi lw b">return</code>、<code class="fe mg mh mi lw b">try</code>、<code class="fe mg mh mi lw b">with</code>和<code class="fe mg mh mi lw b">if</code>的语句执行特定的动作。但是，表达式是那些可以计算为单个值的表达式，例如数字或其他Python对象。</p><p id="d04f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用lambda函数，单个表达式将计算随后使用的单个值，例如由<code class="fe mg mh mi lw b">sorted</code>函数排序。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="0778" class="mq mb it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">2.不要忘记更好的选择</h1><p id="6f02" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">一个最常见的用例是为一些内置实用函数的<code class="fe mg mh mi lw b">key</code>参数设置一个lambda函数，比如<code class="fe mg mh mi lw b">sorted()</code>和<code class="fe mg mh mi lw b">max()</code>，如上所示。根据情况，我们可以使用其他替代方案。考虑下面的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">内置函数的使用</p></figure><p id="0259" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在数据科学中，很多人使用<a class="ae ky" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> pandas </a>库来处理数据。我们可以使用lambda函数通过使用<code class="fe mg mh mi lw b">map()</code>函数从现有数据创建新数据，如下所示。不使用lambda函数，我们可以直接使用算术函数，因为它在pandas中受支持:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">串联λ函数</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="831e" class="mq mb it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">3.不要把它赋给变量</h1><p id="a05e" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">我见过一些人错误地认为lambda函数是声明一个简单函数的替代方法，你可能见过有人这样做:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">命名lambda函数</p></figure><p id="a6d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">命名lambda函数的唯一用途可能是用于教学目的，以表明lambda函数确实是一个像其他函数一样的函数——被调用并具有一种函数类型。除此之外，我们不应该把lambda函数赋给一个变量。</p><p id="2184" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">命名lambda函数的问题是它使得调试不那么简单。与其他使用常规关键字<code class="fe mg mh mi lw b">def</code>创建的函数不同，lambda函数没有名字，这就是为什么它们有时被称为匿名函数。考虑下面的小例子来了解这种细微差别:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">λ函数的调试</p></figure><ul class=""><li id="27a7" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated">当你的代码在一个lambda函数(即<code class="fe mg mh mi lw b">inversive0</code>)上有问题时，<code class="fe mg mh mi lw b">Traceback</code>错误信息只能告诉你一个lambda函数有bug。</li><li id="87d0" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">相比之下，对于定期定义的函数，<code class="fe mg mh mi lw b">Traceback</code>会清楚地通知您有问题的函数(即<code class="fe mg mh mi lw b">inversive1</code>)。</li></ul><p id="0430" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与此相关，如果您想不止一次地使用lambda函数，最佳实践是使用带有<code class="fe mg mh mi lw b">def</code>关键字的常规函数，这也将允许您拥有docstrings。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="8cf5" class="mq mb it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">4.不要忘记列表理解</h1><p id="5bdd" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">有些人喜欢用高阶函数的lambda函数，比如<code class="fe mg mh mi lw b">map</code>或者<code class="fe mg mh mi lw b">filter</code>。考虑下面这个用法的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">映射和过滤功能</p></figure><p id="15ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以不使用lambda函数，而是使用list comprehension，这样可读性更好。如下所示，我们使用列表理解来创建相同的列表对象。正如你所看到的，与list comprehension相比，前面使用lambda函数的<code class="fe mg mh mi lw b">map</code>和<code class="fe mg mh mi lw b">filter</code>函数更麻烦。所以当你创建包含高阶函数的列表时，你应该考虑使用列表理解。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">列表理解</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="146c" class="mq mb it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">结论</h1><p id="39c6" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">在本文中，我们回顾了一些人在使用lambda函数时可能犯的四个常见错误。通过避免这些错误，您应该能够在代码中正确使用lambda函数。</p><p id="68a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用lambda函数的经验法则是保持简单，并且只在本地使用一次。</p></div></div>    
</body>
</html>