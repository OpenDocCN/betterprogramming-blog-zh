<html>
<head>
<title>How to Terraform With Jenkins and Slack on Google’s Cloud Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Google的云平台上与Jenkins和Slack进行平台化</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-terraform-with-jenkins-and-slack-on-googles-cloud-platform-56c5e8b3aeeb?source=collection_archive---------12-----------------------#2020-04-06">https://betterprogramming.pub/how-to-terraform-with-jenkins-and-slack-on-googles-cloud-platform-56c5e8b3aeeb?source=collection_archive---------12-----------------------#2020-04-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d145" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">哈希公司地形图图解指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/233d5de4fdb9b7ecefc114e2b950df66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XnJVIsOVMAnxmGrQT0D4rg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">埃里克·穆尔在<a class="ae ky" href="https://unsplash.com/s/photos/infrastructure?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="e6a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.terraform.io/" rel="noopener ugc nofollow" target="_blank"> Terraform </a>是哈希公司提供的最流行的基础设施代码(IAC)工具。随着云和自助式基础设施的出现，一个名为<em class="lv">基础设施的开创性概念应运而生。</em></p><p id="c099" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">原因很简单。在IaC之前，团队通常手动构建和配置基础架构。慢慢地，基础设施的规模和复杂性逐渐增加，导致了不一致性，这导致了多种问题，如成本、可伸缩性和可用性。</p><p id="ecda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">手动构建的基础设施需要手动维护。如果您需要再次创建一个类似的基础设施，比如为了可伸缩性和可用性，您将需要一个专家团队来完成这项工作。</p><p id="9a95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于大型组织来说，这并不简单，因为他们的基础架构非常复杂，而且在管理基础架构的过程中涉及到许多团队。迁移项目耗时数月，因为没有基础架构和配置的单一真实来源。</p><p id="3d74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">人们过去依赖于大量的文件，这些文件通常不能反映事物的真实状态。由于这个原因，扩展基础设施是一个问题。</p><p id="bebc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">IaC解决了所有这些问题，因为现在您已经将所有的基础设施定义为代码，这些代码可以进入版本控制系统，比如Git。然后，您可以通过pull请求审查代码，并且可以维护单一的事实来源，因为您从代码中构建基础设施。</p><p id="b159" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Terraform是一个声明式IaC工具，这意味着您只需声明您需要的配置，Terraform将确保基础架构保持所需的状态。</p><p id="4fa7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这为组织提供了定义可重用模块以及通过模板应用策略和最佳实践的能力。这样做的好处是多方面的。</p><p id="1eed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Terraform使开发变得更加容易，因为开发人员不再需要学习另一种编程语言或编写复杂的代码来旋转基础设施。</p><p id="5093" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它促进了重用，没有太多基础设施经验的开发人员可以使用基础设施专家开发的模块，只需将变量传递到模块中。</p><p id="30a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，Terraform加快了整个基础设施供应流程，确保了定义过程的一致性，在开发人员将代码签入VCS并维护历史记录时，带来了更多的责任。</p><p id="2e90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您希望专家检查基础结构代码并确保其符合组织策略(如预算和安全性)，也可以创建审批工作流。</p><p id="915d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以做一些聪明的事情，比如在GitOps中挂钩和基于角色的访问控制，以确保人们只拥有他们需要的访问权限。</p><p id="bd70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于采用更有利于开发人员的方法和工作方式的组织来说，这是一个极好的促进因素。这提高了团队的整体效率，因为现在团队可以自己决定他们需要什么样的基础设施，编码它，透明地部署它，并根据他们的学习和反馈对它进行更改。</p><p id="2ea6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您不再需要过度供应基础设施，因为您总是可以在以后进行受控的更改，因此，它是组织内敏捷软件开发的优秀推动者。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="20dd" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">这是如何工作的？</h1><p id="4b1c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Hashicorp提出了以下管理基础设施的模型。</p><ul class=""><li id="1060" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">基础设施操作员负责创建可重用的模块，并将它们存储在模块注册中心。</li><li id="f91f" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">策略所有者负责编写代码形式的哨兵策略，确保Terraform配置符合安全、预算等组织指导原则。</li><li id="df26" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">然后，应用程序开发人员重用模块注册中心的模块来选择他们需要的东西，并根据他们的需求通过变量对它们进行定制。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/c3867cf3612e93e242942b161d60e9bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*07lfqj28cVTHGuhkQLBqOQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://www.datocms-assets.com/2885/1543882273-tfe-multi-cloud-diagram.jpg" rel="noopener ugc nofollow" target="_blank">哈希公司</a></p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="e5eb" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">使用Terraform的CI/CD工作流</h1><p id="50c6" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">借助Terraform，您可以为基础设施运行持续集成、持续交付的工作流程。下面是一个典型的工作流程:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/d2551eacc5c8b0520cecedc912b7219b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-3raD9T7GyzyN2-sb0_Jbg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">审批工作流</p></figure><ol class=""><li id="b2da" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nq ng nh ni bi translated">DevOps工程师编写基础设施代码并签入GitHub等VCS存储库。</li><li id="2a92" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nq ng nh ni bi translated">然后，VCS存储库触发一个提交后挂钩到CI/CD工具，比如<a class="ae ky" href="https://jenkins.io/" rel="noopener ugc nofollow" target="_blank"> Jenkins </a>。</li><li id="e61f" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nq ng nh ni bi translated">詹金斯然后运行一个地形计划。该计划详细说明了如果应用IaC，it将创建、修改和删除哪些基础架构组件。</li><li id="ddce" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nq ng nh ni bi translated">然后，Jenkins将Terraform计划发布到Slack，这样，如果该计划符合所有组织政策并实现了预期目标，批准人就可以审阅并批准该计划。</li><li id="d07d" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nq ng nh ni bi translated">然后，审批人批准了时差计划，时差触发了Jenkins的“应用”任务。</li><li id="a622" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nq ng nh ni bi translated">然后，Jenkins运行“Terraform apply”将更改应用到基础架构。</li></ol></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="631e" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">配置时差</h1><p id="8e79" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">您需要配置Slack来接收来自Jenkins的计划和通知。</p><p id="5188" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在您的Slack工作区中，创建一个名为<code class="fe nr ns nt nu b">terraform-approval</code>的新通道。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/7cefaf4328e32f5b1d7aa7617debab8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYYETQnbTcC9U3jHNf9fAQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/2850a0355bcabf0e32e5681e70a56cf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*PEeuiHXgfP82ABfvw--G7g.png"/></div></figure><h2 id="47c0" class="nw me it bd mf nx ny dn mj nz oa dp mn li ob oc mp lm od oe mr lq of og mt oh bi translated">在Slack上安装Jenkins CI应用程序</h2><p id="3e8d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">转到<code class="fe nr ns nt nu b">[your-workspace].slack.com/apps</code>并搜索Jenkins CI应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/e27426040d0b2715c2a3ed4ec0ab9f65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZdKacIt_Dkcz4CjomBMYLQ.png"/></div></div></figure><p id="e016" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击<em class="lv">添加到松弛时间</em>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/69897af1ebaeefec280f1740b0de5aec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iLxlC0G8WyzeKn3HhWrPqA.png"/></div></div></figure><p id="a744" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">选择<code class="fe nr ns nt nu b">terraform-approval</code>渠道和“添加Jenkins CI集成”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/58b6abc7d65f7690cdf68d8985c91a58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*irEWr7hA4AE1INLqdreKOw.png"/></div></div></figure><p id="f487" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下一页，你会找到一个<code class="fe nr ns nt nu b">Integration Token Credential Id</code>，放在手边。</p><h2 id="21c1" class="nw me it bd mf nx ny dn mj nz oa dp mn li ob oc mp lm od oe mr lq of og mt oh bi translated">在Slack上创建一个文件上传应用</h2><p id="3392" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">您现在需要创建一个自定义应用程序，以便Jenkins可以使用该应用程序将计划文件上传到Slack。</p><p id="dabd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到<code class="fe nr ns nt nu b">api.slack.com</code>并点击<em class="lv">开始建造</em>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/32ac75f225e3e87e547eb92d60b7a431.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CYN_seIWSXgBYrozf3aSjQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/251742870b7be860dcff860ac8fb562b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rVkjlfrNrFz0qzXCq-Rzrg.png"/></div></div></figure><p id="04eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到<em class="lv"> OAuth &amp;权限</em>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/619fbe1cb68ab4c68e241b0a06f562aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TTYLny8jbSfTFkngPGx_Zw.png"/></div></div></figure><p id="7600" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">向下滚动并向应用程序添加一个<code class="fe nr ns nt nu b">file:write</code> bot令牌OAuth范围。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/3ff4ae5d125343c7bc397319bb79a2d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zc4XJYrG23wLaYjQmMu9Og.png"/></div></div></figure><p id="ba0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击<em class="lv">将应用程序安装到工作区</em>并允许应用程序在频道和对话中执行操作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/81ba1523dabf13b6c9df86ff67a26ef8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FRJzUpJmz2Ig5Ey--vOfOg.png"/></div></div></figure><p id="2726" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将下一页生成的<code class="fe nr ns nt nu b">Bot User OAuth Access Token</code>复制下来，放在手边。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/2c4a4247527d3bb8bdbf973bd6d747cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-s9T8HHViuHm0OvugeEjkw.png"/></div></div></figure><p id="5df0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到您的Slack频道，将<code class="fe nr ns nt nu b">terraform_plan_upload</code>用户添加到您的频道。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/2ac6603a70148ddf2d3434e39827ad9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cfIuAcJ4YPygEwvWcrzjZQ.png"/></div></div></figure><p id="9cbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击“邀请进入频道”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/472517045713d47076cd70f6519dd67e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*V7v1AJSbS8msyX8lsFGs5w.png"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="f1cb" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">设置您的云环境</h1><p id="6572" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">您现在需要配置云环境，以允许Terraform远程管理基础设施。在这个故事中，我以谷歌云平台为例。您需要创建一个服务帐户。</p><p id="ad26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">进入<em class="lv"> IAM和管理</em>-&gt;-<em class="lv">服务账户</em>。</p><p id="b723" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个名为<em class="lv"> Terraform </em>的服务帐户。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/6b769e6d67915f8a9cf735d29f09d132.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LqsE4f5u1BfPBqgqTQIMGg.png"/></div></div></figure><p id="be49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">向服务帐户授予项目编辑器角色，以便它可以旋转资源。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/9dc3dad2b252ae7ebbbc6760d0f55ef7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jjO8SoNX4OypEnaPtT_qiA.png"/></div></div></figure><p id="a5d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">授予服务帐户“服务帐户用户”访问权限，并为Terraform生成一个JSON密钥，以作为服务帐户使用Google Cloud APIs进行身份验证。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/c95adfd1b2f20353d2e421ab0f1443e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ld-KvtUsr2P5PW29gOn9Rw.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="22c1" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">安装Terraform</h1><p id="ae2f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Terraform CLI是一个二进制文件，易于设置和使用。请访问Terraform的网站，根据您的环境下载合适的软件包。</p><p id="5396" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">解压缩软件包，然后设置指向Terraform二进制文件的路径，或者将Terraform二进制文件移动到您的bin目录。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="0bb1" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">旋转詹金斯</h1><p id="168d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">为Terraform运行以下命令来启动Jenkins。</p><pre class="kj kk kl km gt ow nu ox oy aw oz bi"><span id="698c" class="nw me it nu b gy pa pb l pc pd">git clone <a class="ae ky" href="https://github.com/bharatmicrosystems/terraform-ci-cd.git" rel="noopener ugc nofollow" target="_blank">https://github.com/bharatmicrosystems/terraform-ci-cd.git</a><br/>cd terraform-ci-cd/<br/>cp terraform.tfvars.example terraform.tfvars</span></pre><p id="a891" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">修改<code class="fe nr ns nt nu b">terraform.tfvars</code>文件，将变量替换为<code class="fe nr ns nt nu b">project</code>、<code class="fe nr ns nt nu b">region</code>、<code class="fe nr ns nt nu b">instance_zone</code>、<code class="fe nr ns nt nu b">subnet_name</code>和<code class="fe nr ns nt nu b">source_ranges</code>的相关值。</p><p id="5e7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将下载的JSON密钥复制到<code class="fe nr ns nt nu b">terraform-ci-cd/</code>中，并将其重命名为<code class="fe nr ns nt nu b">credentials.json</code>。</p><p id="b7d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用Terraform在Google Cloud上旋转Jenkins。</p><pre class="kj kk kl km gt ow nu ox oy aw oz bi"><span id="0b43" class="nw me it nu b gy pa pb l pc pd">terraform init<br/>terraform plan<br/>terraform apply</span></pre><p id="1d13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到<em class="lv"> Google计算引擎</em>部分，您会看到Terraform已经创建了一个名为<code class="fe nr ns nt nu b">jenkins-master</code>的GCE实例。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/a328df7e0f5f67a2d7da611c3eb54cec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xzLEi9aBy8rqgjoEijvEdw.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b442" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">陷害詹金斯</h1><p id="057f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在<code class="fe nr ns nt nu b"><a class="ae ky" href="http://External_IP:8080" rel="noopener ugc nofollow" target="_blank">http://External_IP:8080</a></code>访问詹金斯。</p><p id="d866" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SSH到您的<code class="fe nr ns nt nu b">jenkins-master</code>实例并打印<code class="fe nr ns nt nu b">initialAdminPassword</code>。</p><pre class="kj kk kl km gt ow nu ox oy aw oz bi"><span id="4192" class="nw me it nu b gy pa pb l pc pd">sudo cat /var/lib/jenkins/secrets/initialAdminPassword</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/97e6b4fcbebfb5795950b891fa3cb137.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7NchwWqIxg4PL9e7RhaViw.png"/></div></div></figure><p id="7da4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装建议的插件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/d936669a827c13035e5092d6a8f9e373.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aM_n8KdSHClCHWB8HtAX7g.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/1f607462946e5d5c2a028619c9e60fee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Og43us3N96BFGS34EdfqjA.png"/></div></div></figure><p id="f31c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个管理员用户帐户，然后点击“保存并继续”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/c36d340db067583d697b5e13d0251b58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aOF-MZ_7zsIIubLvCuEIfw.png"/></div></div></figure><h2 id="b123" class="nw me it bd mf nx ny dn mj nz oa dp mn li ob oc mp lm od oe mr lq of og mt oh bi translated">安装所需的插件</h2><p id="0b9c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">您现在需要安装Slack上传和Slack通知插件，以便Jenkins可以在您运行计划时上传计划并向Slack发送通知。</p><p id="246b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">去插件管理器(<code class="fe nr ns nt nu b">[your_jenkins_url]/pluginManager/available</code>)安装松弛上传和松弛通知插件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/43172d411d11adfd0cb0d3fcf80135ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cH87JvdW0nrXgj18BS_ypw.png"/></div></div></figure><p id="e30a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装“构建授权令牌根”插件，以允许远程触发构建。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/09c3ccc92d4588ab74a855ea30763610.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SbcYHfELtEYFc40nwp-7yg.png"/></div></div></figure><p id="0249" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装插件后，配置Jenkins Slack通知插件设置。</p><p id="fe23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">进入<em class="lv">管理詹金斯</em> - &gt; <em class="lv">配置系统</em> - &gt; <em class="lv">松弛通知</em>。</p><p id="ce00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个秘密文本凭证，并将您从Slack上的Jenkins CI应用程序获得的<code class="fe nr ns nt nu b">Integration Token Credential Id</code>粘贴到secret字段。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pj"><img src="../Images/028a58c4875f5ad3317d4d90be12fac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PbblDNmDCIS1EKLmTT9KoQ.png"/></div></div></figure><p id="c4d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加您的工作空间和通道名称，测试连接，然后保存。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/bddafb4d2673ef74354da78e2b3e5249.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ytRtYjvU_9tcz4IISQzLQQ.png"/></div></div></figure><h2 id="4e2e" class="nw me it bd mf nx ny dn mj nz oa dp mn li ob oc mp lm od oe mr lq of og mt oh bi translated">在詹金斯安装Terraform</h2><p id="f61c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">由于詹金斯将运行Terraform，我们需要将它安装在那里。</p><pre class="kj kk kl km gt ow nu ox oy aw oz bi"><span id="2cdf" class="nw me it nu b gy pa pb l pc pd">su  — jenkins<br/>wget <a class="ae ky" href="https://releases.hashicorp.com/terraform/0.12.24/terraform_0.12.24_linux_amd64.zip" rel="noopener ugc nofollow" target="_blank">https://releases.hashicorp.com/terraform/0.12.24/terraform_0.12.24_linux_amd64.zip</a><br/>yum install -y unzip<br/>unzip terraform_0.12.24_linux_amd64.zip <br/>mv terraform /usr/bin/<br/>chmod +x /usr/bin/terraform</span></pre><h2 id="b7eb" class="nw me it bd mf nx ny dn mj nz oa dp mn li ob oc mp lm od oe mr lq of og mt oh bi translated">设置地形环境</h2><p id="85b2" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">有一些东西是不能在VCS办理登机手续的，比如证件和机密、项目细节等。为此，Terraform提供了一种使用<code class="fe nr ns nt nu b">*.auto.tfvars</code>文件集中存储的方式。</p><p id="13c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将<code class="fe nr ns nt nu b">credentails.json</code>文件复制到<code class="fe nr ns nt nu b">/var/lib/jenkins/</code>。</p><pre class="kj kk kl km gt ow nu ox oy aw oz bi"><span id="10da" class="nw me it nu b gy pa pb l pc pd">$ vim terraform.auto.tfvars<br/>project = "&lt;your_project_name&gt;"<br/>region = "&lt;your_default_region&gt;"<br/>credentials = "/var/lib/jenkins/credentials.json"</span></pre><h2 id="0416" class="nw me it bd mf nx ny dn mj nz oa dp mn li ob oc mp lm od oe mr lq of og mt oh bi translated">在Jenkins上设置Terraform作业</h2><p id="02ce" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">使用以下配置创建一个名为<code class="fe nr ns nt nu b">terraform-gce-instance</code>的自由作业:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/3a7570a59eecfa243066c0e25eb61c0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bcp8FnJEucmoUJFKIHyItw.png"/></div></div></figure><p id="ee84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">选择<em class="lv"> Git </em>作为<em class="lv">源代码管理</em>。你可以把这个repo 作为源代码仓库的例子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/7b4fd2031e187e57cf42a1c55a6555f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pnSmkm22iVyS3AcUkyuCNA.png"/></div></div></figure><p id="0a08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">生成一个随机身份验证令牌，您将在下面的配置中使用它来触发构建添加。使用<a class="ae ky" href="https://www.random.org/strings/" rel="noopener ugc nofollow" target="_blank">这个链接</a>生成一个。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pn"><img src="../Images/a16a41d204ac6508d6eb02c754a74de0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*in-2lVovaCTRDDnl_8UIbg.png"/></div></div></figure><p id="bacf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加一个<code class="fe nr ns nt nu b">Execute Shell</code>构建步骤，并添加以下脚本:</p><pre class="kj kk kl km gt ow nu ox oy aw oz bi"><span id="23b2" class="nw me it nu b gy pa pb l pc pd">cp -a /var/lib/jenkins/terraform.auto.tfvars .<br/>terraform init<br/>if [ $action = ‘plan’ ]; then<br/> terraform plan &gt; plan.out<br/>elif [ $action = ‘apply’ ]; then<br/> terraform apply — auto-approve<br/>elif [ $action = ‘destroy’ ]; then<br/> terraform destroy — auto-approve<br/>fi</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/114d22546001fec3b7d202ac377a709c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N-dGb2SS6godTjUl4IECEA.png"/></div></div></figure><p id="85f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加后构建步骤<code class="fe nr ns nt nu b">Post files to Slack</code>和<code class="fe nr ns nt nu b">Slack Notifications</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi po"><img src="../Images/3627f86f47937441d40bbe7c4b4bede0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P8mxGZ_yeDCrz6Q6rH6Ubg.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pp"><img src="../Images/9b6615f43a5f958f8557afefa64e1395.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zGJG-FiCIaNsRIFzr2sKZg.png"/></div></div></figure><p id="4d80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将文件上传应用的<code class="fe nr ns nt nu b">Bot token</code>复制到<em class="lv">添加令牌</em>。</p><p id="d6ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击<em class="lv">高级</em>并添加自定义消息，并包含审批链接(<code class="fe nr ns nt nu b">[your_jenkins_url]/buildByToken/buildWithParameters?job=$JOB_NAME&amp;token=[YOUR_JENKINS_BUILD_TOKEN]&amp;action=apply</code>)，点击该链接将触发具有应用操作的作业。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/3ad23cbeed78425c3eeed0749715e108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*loKwtX3ZU8Qc0MhhYLyqmQ.png"/></div></div></figure><p id="6eee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">应用并保存。</p><h2 id="c2b6" class="nw me it bd mf nx ny dn mj nz oa dp mn li ob oc mp lm od oe mr lq of og mt oh bi translated">在存储库中设置提交后挂钩</h2><p id="5052" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在这个例子中，我将使用GitHub向Jenkins发送一个提交后钩子。您可以从您的存储库向Jenkins使用一个等效的webhook。</p><p id="3484" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到<code class="fe nr ns nt nu b"><a class="ae ky" href="https://github.com/bharatmicrosystems/terraform-ci-cd/settings/hooks" rel="noopener ugc nofollow" target="_blank">https://github.com/&lt;your_repo&gt;/settings/hooks</a></code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pr"><img src="../Images/d6b38b72ae6d14f7cdd72ae66a64bfb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eAVr4DnmMuWwaT2khViTdQ.png"/></div></div></figure><p id="a0a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加webhook。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/c6f40c5a87d832494eb3cdebb97162b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*trto4dnH-bOxCmXy0HHZmg.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="3430" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">测试配置</h1><p id="0b50" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">将配置推送到GitHub，这应该会触发运行计划的Jenkins作业。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pt"><img src="../Images/8b193ef1034d985eae0842af0a6472e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xrOnoqsO8J5qyFUZFQA87g.png"/></div></div></figure><p id="aaf3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，Jenkins将使用计划的输出和批准链接更新Slack。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/c03f38ef73d533433c1cf0e9ad4672c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ND0JhdTuD3QKw3pJFiE7qA.png"/></div></div></figure><p id="417f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击链接，看看它是否触发了Jenkins与<code class="fe nr ns nt nu b">terraform apply</code>的工作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pu"><img src="../Images/f6cbad5799c20edfbac84a0c926a1cd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8_9Mwzj0-HxfBo3DgKZLNQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pt"><img src="../Images/afb4fb0de032226001bbf808bad84b28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oWUSIN9-hdhMwwVyhrUBIw.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="f62f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">验证结果</h1><p id="91be" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">转到<em class="lv">谷歌云控制台</em>-&gt;-<em class="lv">计算引擎</em>，您应该会看到一个新实例<code class="fe nr ns nt nu b">test-instance</code>被创建。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pv"><img src="../Images/f40f835a46d973ab7c2d4db26f23cab7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k352sK8qR9yZEx21wVw2ig.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="34be" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结论</h1><p id="2103" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">感谢您的阅读。我希望你喜欢这篇文章！</p></div></div>    
</body>
</html>