<html>
<head>
<title>SwiftUI and WatchOS: Action Buttons Beneath the Navigation Bar</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI和WatchOS:导航栏下面的动作按钮</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swiftui-and-watchos-action-buttons-beneath-the-navigation-bar-2c62d0168c4c?source=collection_archive---------10-----------------------#2020-10-27">https://betterprogramming.pub/swiftui-and-watchos-action-buttons-beneath-the-navigation-bar-2c62d0168c4c?source=collection_archive---------10-----------------------#2020-10-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="926a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">更新您的watchOS应用程序，以符合新的Apple指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/14a62a725cc900f21f260c0282aab74b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5FqiysL6oqX3RTUsz1v9aw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来自<a class="ae kv" href="https://developer.apple.com/news/?id=gq4ajl5z" rel="noopener ugc nofollow" target="_blank">苹果开发者</a>。</p></figure><p id="bdcc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">众所周知，watchOS 7的推出扼杀了原力触控。事实上，在watchOS 7之前的watchOS版本中，人们可以按住显示屏打开与当前屏幕相关的隐藏菜单。</p><p id="291b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，苹果建议从我们的应用程序中删除隐藏的菜单，检查每个项目，以确定它是否提供信息，或者它执行一个动作。</p><p id="ea81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在他们的<a class="ae kv" href="https://developer.apple.com/design/human-interface-guidelines/watchos/elements/menus/" rel="noopener ugc nofollow" target="_blank">人机界面指南</a>中，他们为可操作项目提供了一些替代方案。其中一个是在导航栏下面放一个动作按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/4ad85d6ddae46ee71d7f500be8327ef1.png" data-original-src="https://miro.medium.com/v2/resize:fit:426/format:webp/1*kU9Gqy0Rthpl_ylqbZohcQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来自<a class="ae kv" href="https://developer.apple.com/design/human-interface-guidelines/watchos/elements/menus/" rel="noopener ugc nofollow" target="_blank">苹果开发者</a>。</p></figure><p id="7849" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个设计中，人们向下拖动以显示按钮。尽管这样的按钮在屏幕第一次打开时是不可见的，但人们可以很容易地发现它，因为拖动是一种非常常见的手势。例如,“邮件”会将“撰写”按钮从隐藏菜单重新定位到收件箱邮件列表上方的位置。撰写按钮是不碍事的，直到人们在屏幕上向下拖动来刷新消息列表。</p><p id="2902" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将研究这个解决方案。这是我们的应用程序的外观:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/0a3549db60e5d8573444b3f2789c6094.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/1*1B8ePxLquOibrpjV-zvnww.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">应用程序在运行</p></figure><p id="8880" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们首先创建一个新的SwiftUI watchOS项目:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lu"><img src="../Images/f4d799d7b2303fd62bde15e7830d7ace.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K_pnT1llS2xxUXxFYd7IRA.png"/></div></div></figure><p id="9fa3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择WatchOS，然后观看<strong class="ky ir">App:</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lv"><img src="../Images/3e1c1f86b44cd58bc0d3df281cad2154.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QN95gTf9hB3gw_EvEnUBsg.png"/></div></div></figure></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="b300" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">创建彩色列表</h1><p id="2585" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">让我们导航到<code class="fe na nb nc nd b">ContentView.swift</code>并在垂直方向上创建十个彩色圆圈<code class="fe na nb nc nd b">ScrollView</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="7a48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们用<code class="fe na nb nc nd b">@State</code>标记了<code class="fe na nb nc nd b">colors</code>，这是一个Color类型的数组，因为我们稍后需要用我们将要放在导航栏下面的按钮来修改它。</p><p id="4930" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，为了隐藏按钮，我们需要在我们的<code class="fe na nb nc nd b">ScrollView</code>中嵌入一个名为<code class="fe na nb nc nd b">ScrollViewReader</code>(在watchOS 7和iOS 14中引入)的结构:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="d0d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe na nb nc nd b">ScrollViewReader</code>结构提供了一个名为<code class="fe na nb nc nd b">scrollTo()</code>的方法，只需提供锚就可以移动到父<code class="fe na nb nc nd b">ScrollView</code>中的任何视图。这样，我们可以在<code class="fe na nb nc nd b">onAppear</code>方法内将<code class="fe na nb nc nd b">scrollTo()</code>值设置为列表的第一个元素(<code class="fe na nb nc nd b">scrollTo(0)</code>)，该方法在视图出现时执行。</p><p id="079b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还引入了一个新的<code class="fe na nb nc nd b">@State changed</code>来在需要的时候编辑<code class="fe na nb nc nd b">colors</code>数组。</p><p id="5578" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成我们的应用程序的最后一步是创建一个<code class="fe na nb nc nd b">Button</code>，并将其放在<code class="fe na nb nc nd b">ForEach</code>循环之前。</p><p id="5a29" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们现在运行我们的应用程序，“改变颜色”按钮应该是隐藏的，我们应该能够在拖动时显示它:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/0a3549db60e5d8573444b3f2789c6094.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/1*1B8ePxLquOibrpjV-zvnww.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">应用程序在运行</p></figure><p id="3dae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！我希望你喜欢这个小教程，你学到了一些新的东西。你可以在<a class="ae kv" href="https://github.com/andreac30/BTNNavBar" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到已经完成的项目。</p></div></div>    
</body>
</html>