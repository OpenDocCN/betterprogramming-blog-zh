<html>
<head>
<title>The Engineer’s Guide to Writing Meaningful Code Comments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写有意义的代码注释的工程师指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-engineers-guide-to-writing-meaningful-code-comments-b8ab50b4ecfa?source=collection_archive---------11-----------------------#2021-06-15">https://betterprogramming.pub/the-engineers-guide-to-writing-meaningful-code-comments-b8ab50b4ecfa?source=collection_archive---------11-----------------------#2021-06-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5b63" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解代码注释的重要性、不同的类型和四种最佳实践</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9f6ad01fa5ce24332729f78ecb7d730a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YqVReQKT442g6om8FoSbmw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><h1 id="ef35" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">为什么要写代码注释呢？</h1><p id="6492" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">在大多数情况下，你不是唯一一个在同一个项目或代码库中工作的人。这意味着其他人可以阅读你的代码并且必须理解它。对于您留下的代码注释也是如此。开发人员经常在没有太多上下文的情况下写快速而肮脏的评论，让其他开发人员对他们想说的一无所知。这是一种糟糕的做法，只会制造更多的混乱，而不是澄清事情。</p><p id="0c17" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">所以，是的，你应该为编写有意义的代码注释来帮助其他开发人员而烦恼。描述函数、函数背后的推理及其输入和输出的代码注释将加速其他开发人员的学习过程。尤其是对于初级开发人员来说，在学习代码时，这些信息非常有用。</p><p id="2456" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">另一方面，代码注释将我们引向是否应该编写它们的讨论。有相当多的开发人员反对编写代码注释，理由是代码应该是不言自明的。如果另一个开发人员不能通过查看你的代码来理解它的目的，那么它就是糟糕的代码。这可能是真的，但是想想代码注释需要的一点点努力和它返回的潜在好处。</p><p id="0e18" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">对于任何开发人员，尤其是初级开发人员来说，代码注释对于推进入职过程都是有价值的。</p><p id="6118" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">让我们看看不同类型的代码注释。</p><h1 id="f8c8" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">不同类型的代码注释</h1><p id="3999" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated"><strong class="ls iu"> 1。文档注释</strong> —这些注释的主要目的是快速阐明文件或组件的用途。您可以在<code class="fe mr ms mt mu b">index</code>文件的顶部包含一个代码注释来解释组件的功能，而不是阅读组件的整个代码来理解它的功能。</p><p id="22ff" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我不太喜欢这种代码注释，因为它会让你的代码非常嘈杂。我认为这些类型的架构评论应该存在于你的内部文档中，在那里你可以在一个集中的位置维护和讨论你的项目的架构。然而，对于开源项目来说，它确实为指导那些想要为项目做贡献的人带来了价值。</p><p id="3f71" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated"><strong class="ls iu"> 2。函数注释</strong> —函数注释是最有用的注释类型，可以在许多语言中自动生成。它们描述了函数的用途、接受的参数以及生成的输出。通常只描述公共函数就足够了，因为使用您代码的开发人员不会与私有函数进行交互。</p><pre class="kj kk kl km gt mv mu mw mx aw my bi"><span id="85dd" class="mz kz it mu b gy na nb l nc nd">/**<br/> * @desc Creates a welcome message<br/> */<br/>function sayHello(name) {<br/>    return `Hello ${name}`;<br/>}</span></pre><p id="39b0" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">‍ <strong class="ls iu"> 3。逻辑注释</strong> —逻辑注释是函数内的注释，用于阐明复杂的代码路径。正如你可能已经猜到的，这是一个明显的代码味道或技术债务表明你的代码太复杂了。</p><p id="3750" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">除此之外，逻辑注释通常会提供太多详细的信息。详细程度会造成更多的混乱，降低代码的可读性。这是一个过于详细的代码注释的例子。</p><pre class="kj kk kl km gt mv mu mw mx aw my bi"><span id="0aff" class="mz kz it mu b gy na nb l nc nd">let date = new Date(); // store today's date to calculate the elapsed time</span></pre><h1 id="c8d4" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">代码注释:四个最佳实践</h1><p id="2276" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">这里列出了代码注释的四个最佳实践。</p><h2 id="3385" class="mz kz it bd la nf ng dn le nh ni dp li lz nj nk lk md nl nm lm mh nn no lo np bi translated">1.利用代码注释或标记</h2><p id="6f91" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">许多编程语言都定义了代码注释的标准。Java使用<a class="ae ne" href="https://www.oracle.com/be/technical-resources/articles/java/javadoc-tool.html" rel="noopener ugc nofollow" target="_blank"> Javadoc </a>，而JavaScript使用被许多文档生成工具支持的<a class="ae ne" href="https://jsdoc.app/index.html" rel="noopener ugc nofollow" target="_blank"> JSDoc </a>代码注释系统。</p><p id="cf49" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">对于函数，您应该包括以下代码标记:</p><ul class=""><li id="29f1" class="nq nr it ls b lt mm lw mn lz ns md nt mh nu ml nv nw nx ny bi translated">写下对你的职能的描述。</li><li id="41e1" class="nq nr it ls b lt nz lw oa lz ob md oc mh od ml nv nw nx ny bi translated"><code class="fe mr ms mt mu b">@param</code> —描述函数接受的所有输入参数。确保定义输入类型。</li><li id="12ba" class="nq nr it ls b lt nz lw oa lz ob md oc mh od ml nv nw nx ny bi translated"><code class="fe mr ms mt mu b">@returns</code> —描述返回的输出。确保定义输出类型。</li><li id="8144" class="nq nr it ls b lt nz lw oa lz ob md oc mh od ml nv nw nx ny bi translated"><code class="fe mr ms mt mu b">@throws</code> —描述函数可能抛出的错误类型。</li><li id="0c87" class="nq nr it ls b lt nz lw oa lz ob md oc mh od ml nv nw nx ny bi translated"><code class="fe mr ms mt mu b">@example</code> —包括一个或多个显示输入和预期输出的示例。</li></ul><p id="7585" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">下面是<code class="fe mr ms mt mu b">chunk</code>功能的<a class="ae ne" href="https://github.com/lodash/lodash/blob/master/chunk.js" rel="noopener ugc nofollow" target="_blank">代码</a>的一个例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><h2 id="8759" class="mz kz it bd la nf ng dn le nh ni dp li lz nj nk lk md nl nm lm mh nn no lo np bi translated">2.写下你为什么做某事</h2><p id="8506" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">许多开发人员使用注释来描述他们的代码在做什么。这不一定是错的。但是，不要忘记包括你为什么创建一个特定的函数或组件。这个信息被称为<em class="og">上下文</em>。上下文对于让开发人员更深入地了解功能或组件背后的设计决策至关重要。当其他开发人员想要对您的功能或组件进行更改时，这个上下文是至关重要的。</p><p id="c1eb" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">您经常会在函数描述中看到使用函数名的代码注释。你可能已经猜到了，这样的评论不会增加价值。上下文是指添加无法从函数名或其输入变量中提取的信息。下面你会看到一个没有上下文的代码注释的糟糕例子。</p><pre class="kj kk kl km gt mv mu mw mx aw my bi"><span id="06c7" class="mz kz it mu b gy na nb l nc nd">/**<br/> * Sets the label property of a new form.<br/> *<br/> * @param label text for label of form<br/> */<br/>function setFormLabel(label) {<br/>    // logic<br/>}</span></pre><p id="68ef" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated"><strong class="ls iu"> Pro提示:</strong>尝试使用免费的<a class="ae ne" href="https://bit.ly/3vVZsis" rel="noopener ugc nofollow" target="_blank">步长</a> VSCode扩展，为技术债务、重构或待办事项添加代码上下文。</p><h2 id="fd85" class="mz kz it bd la nf ng dn le nh ni dp li lz nj nk lk md nl nm lm mh nn no lo np bi translated">3.不要参考其他文件或评论</h2><p id="1cbd" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">参考其他代码注释或内部文档来阐明一个功能或组件并不是一个好主意。</p><p id="133a" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果一个开发人员想快速浏览代码以获得更好的理解，代码注释应该是清晰的。你不想花时间搜索其他代码注释或阅读大量的设计文档。如果你认为你需要添加一个文档来阐明一个代码的目的，这是一个坏代码的危险信号。</p><pre class="kj kk kl km gt mv mu mw mx aw my bi"><span id="f126" class="mz kz it mu b gy na nb l nc nd">/**<br/> * Sets the label property of a new form.<br/> *<br/> * @see {@link <a class="ae ne" href="https://myinternaldocument.com}" rel="noopener ugc nofollow" target="_blank">https://myinternaldocument.com}</a><br/> */<br/>function setFormLabel(label) {<br/>    // logic<br/>}</span></pre><h2 id="63fb" class="mz kz it bd la nf ng dn le nh ni dp li lz nj nk lk md nl nm lm mh nn no lo np bi translated">4.一边写代码一边写注释</h2><p id="29dc" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">在编写代码的同时编写注释听起来可能很明显，但是许多开发人员在这条规则上作弊。我自己也为此感到内疚。在某些情况下，我在编写任何代码注释来提交我的拉请求以供审查之前已经完成了我的代码。</p><p id="6572" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">在这种情况下，您可能会忘记自己编写的部分逻辑，从而导致代码注释质量下降。如果您在一个拉取请求上工作了多天，这一点尤其正确。最好在完成一个函数或者模块的时候写注释。</p><h1 id="89c4" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">代码注释是一门艺术吗？</h1><p id="fac4" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">如果你关心<a class="ae ne" href="https://www.stepsize.com/blog/the-engineers-complete-guide-to-code-quality" rel="noopener ugc nofollow" target="_blank">代码质量</a>，花时间写有意义的代码注释。这需要一些练习，但可以很快学会。要记住的关键概念是向代码注释中添加上下文。描述你创建的代码背后的原因，而不仅仅是表面的信息。开发人员不需要“什么”,因为他们可以阅读您的代码、输入参数和输出，以便更好地理解代码。</p><p id="07b5" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">记住尽可能保持代码注释的简洁。你不想花比写代码更多的时间写代码注释。</p></div></div>    
</body>
</html>