<html>
<head>
<title>13 Security Tips for Front-End Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">前端应用的13个安全提示</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/frontend-app-security-439797f57892?source=collection_archive---------1-----------------------#2020-04-09">https://betterprogramming.pub/frontend-app-security-439797f57892?source=collection_archive---------1-----------------------#2020-04-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e387" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">锁定你的应用程序，使其不容易受到不良行为者的影响</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c1c68f8a4c7bfc2a8a94272169525495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l05_KIL40_5tcPcHcvVyNg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@fantasyflip?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">菲利普·卡森伯格</a>在<a class="ae ky" href="https://unsplash.com/s/photos/security?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="407d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论你是React.js、Angular、Vue.js，还是单纯的前端开发人员，你的代码都可能成为黑客的邀约之门。</p><p id="ba65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为前端开发人员，我们最关心的是性能、SEO和UI/UX——安全性经常被忽略。</p><p id="f59b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能会惊讶地发现，大型框架会让您面临跨站点脚本(XSS)攻击。React中有危险的操作名，如<code class="fe lv lw lx ly b">dangerouslySetInnerHTML</code>或Angular中的<code class="fe lv lw lx ly b">bypassSecurityTrust</code>API。</p><p id="e4d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们应该记住，在安全性方面，前端现在与后端或开发人员分担同等的责任。前端可能会发生数千种恶意攻击。</p><p id="2d67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来了解一下最常见的攻击——它们将涵盖这些攻击类型中的很大一部分。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lz"><img src="../Images/518ddc1a856a46c1811085f31c1f7837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QOkqygancKoG8HQ-"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@vipul_uthaiah?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> vipul uthaiah </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="8c2c" class="ma mb it bd mc md me dn mf mg mh dp mi li mj mk ml lm mm mn mo lq mp mq mr ms bi translated">1.<strong class="ak">无限制文件上传</strong></h2><p id="2d9b" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">这是一种攻击，其中恶意文件被上传到服务器，然后被执行，以攻击系统。攻击可能<strong class="lb iu"> </strong>包括:文件系统或数据库过载、完全系统接管、客户端攻击、向后端系统转发攻击或简单的破坏。</p><h2 id="be18" class="ma mb it bd mc md me dn mf mg mh dp mi li mj mk ml lm mm mn mo lq mp mq mr ms bi translated">2.<strong class="ak">点击顶升</strong></h2><p id="b1f0" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">这是一种攻击，用户被诱骗点击不属于该网站的网页或元素。这种攻击可能会导致用户无意中提供凭据或敏感信息、下载恶意软件、访问恶意网页、在线购买产品或转账。</p><h2 id="6e48" class="ma mb it bd mc md me dn mf mg mh dp mi li mj mk ml lm mm mn mo lq mp mq mr ms bi translated">3.<strong class="ak"> XSS遇袭</strong></h2><p id="c778" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">这是一种<strong class="lb iu"> </strong>攻击，恶意脚本以浏览器端脚本的形式注入网页。网站上的缺陷使得这些攻击得以成功并广泛传播。</p><h2 id="1318" class="ma mb it bd mc md me dn mf mg mh dp mi li mj mk ml lm mm mn mo lq mp mq mr ms bi translated">4.<strong class="ak"> SQL注入</strong></h2><p id="3552" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">这是一种攻击，其中SQL语句中的恶意代码通过输入字段被注入以破坏您的数据库。</p><h2 id="2fdb" class="ma mb it bd mc md me dn mf mg mh dp mi li mj mk ml lm mm mn mo lq mp mq mr ms bi translated"><strong class="ak"> 5。拒绝服务攻击</strong> ( <strong class="ak">拒绝服务攻击</strong>)</h2><p id="32aa" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">这是一种攻击，通过用流量轰炸您的服务器，使目标用户无法使用服务器或其资源。</p><h2 id="e1fc" class="ma mb it bd mc md me dn mf mg mh dp mi li mj mk ml lm mm mn mo lq mp mq mr ms bi translated">6.<strong class="ak">中间人攻击或会话劫持</strong></h2><p id="f3bc" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">这是一种攻击，在这种攻击中，客户端和服务器之间的通信被拦截，以窃取密码、帐号或任何个人信息。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><p id="486b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">攻击者总是试图在前端找到一些漏洞来到达服务器并完成他的工作。在本文中，我们将看到一些在编写前端代码时应该牢记的最佳实践。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="cfc7" class="nf mb it bd mc ng nh ni mf nj nk nl mi jz nm ka ml kc nn kd mo kf no kg mr np bi translated">1.严格的用户输入(第一个攻击点)</h1><p id="0404" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">用户输入本质上应该是严格的，以避免类似SQL注入、点击劫持等漏洞。因此，在将用户输入发送到后端之前对其进行验证或净化是非常重要的。</p><p id="5e40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以通过删除或替换上下文危险的字符来净化数据，比如使用白名单和对输入数据进行转义。</p><p id="a91a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，我意识到净化和编码对于所有现有的可能性来说都不是一件容易的事情，所以我们可以使用下面的开源库:</p><ul class=""><li id="e92b" class="nq nr it lb b lc ld lf lg li ns lm nt lq nu lu nv nw nx ny bi translated"><code class="fe lv lw lx ly b"><a class="ae ky" href="https://www.npmjs.com/package/dompurify" rel="noopener ugc nofollow" target="_blank">DOMPurify</a></code>。这是使用起来最简单的，并且有一种方法来净化用户的输入。它有一个定制规则的选项，并且支持HTML5、SVG和MathML。</li><li id="a424" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated"><code class="fe lv lw lx ly b"><a class="ae ky" href="https://www.npmjs.com/package/secure-filters" rel="noopener ugc nofollow" target="_blank">secure-filters</a></code>。Salesforce库，提供清理HTML、JavaScript、内联CSS样式和其他上下文的方法。如果您想在其他地方使用用户输入，例如生成CSS或JavaScript，这将非常有用。</li></ul><p id="8673" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在文件上传的情况下，始终检查文件类型并使用文件过滤功能，只允许某些文件类型上传。详见<a class="ae ky" href="https://owasp.org/www-community/vulnerabilities/Unrestricted_File_Upload" rel="noopener ugc nofollow" target="_blank">本</a>。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="f60b" class="nf mb it bd mc ng nh ni mf nj nk nl mi jz nm ka ml kc nn kd mo kf no kg mr np bi translated">2.小心隐藏在浏览器内存中的字段或数据</h1><p id="d50c" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">如果我们添加输入<code class="fe lv lw lx ly b">type="hidden"</code>来隐藏页面中的敏感数据，或者在浏览器中添加<code class="fe lv lw lx ly b">localStorage</code>、<code class="fe lv lw lx ly b">sessionStorage</code>、<code class="fe lv lw lx ly b">cookies</code>，并认为这是安全的，我们需要再想想。</p><p id="88fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">攻击者可以轻松访问添加到浏览器中的所有内容。攻击者可以打开开发工具并更改所有内存中的变量。如果您根据<code class="fe lv lw lx ly b">localStorage</code>、<code class="fe lv lw lx ly b">sessionStorage</code>和<code class="fe lv lw lx ly b">cookies</code>的值隐藏了验证页面会怎么样？</p><p id="e4d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">浏览器中有像<a class="ae ky" href="https://www.zaproxy.org/" rel="noopener ugc nofollow" target="_blank"> ZapProxy </a>这样的工具，甚至检查工具，如果攻击者找到注入脚本的方法，就可以将这些值暴露给他们，然后他们可以使用它们进行进一步的攻击。</p><p id="1e93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此避免使用<code class="fe lv lw lx ly b">type="hidden"</code>并且尽可能避免在浏览器内存存储中存储密钥、认证令牌等。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="321a" class="nf mb it bd mc ng nh ni mf nj nk nl mi jz nm ka ml kc nn kd mo kf no kg mr np bi translated">3.使用强大的内容安全策略(CSP)</h1><p id="602a" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">永远不要相信服务器发送的所有内容，永远要定义一个强内容安全策略HTTP头，它只允许某些可信内容在浏览器上执行或提供更多资源。</p><p id="0b97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有一个白名单是一个好习惯，白名单是一个允许来源的列表。现在，即使攻击者注入脚本，脚本也不会与白名单匹配，不会被执行。</p><p id="ae28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如:</p><pre class="kj kk kl km gt of ly og oh aw oi bi"><span id="28da" class="ma mb it ly b gy oj ok l ol om">content-security-policy: script-src ‘self’ <a class="ae ky" href="https://apis.google.com/" rel="noopener ugc nofollow" target="_blank">https://</a>apis.xyz.com</span></pre><p id="d1bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，应用程序只信任来自<code class="fe lv lw lx ly b">apis.xyz.com</code>和我们自己(<code class="fe lv lw lx ly b">self</code>)的脚本。对于其余的源，控制台中会抛出一个错误。</p><p id="4f5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:强大的内容安全策略不能解决内联脚本执行的问题，因此XSS攻击仍然有效。</p><p id="1ad7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy" rel="noopener ugc nofollow" target="_blank"> MDN网站</a>上阅读CSP指令的完整列表。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="175b" class="nf mb it bd mc ng nh ni mf nj nk nl mi jz nm ka ml kc nn kd mo kf no kg mr np bi translated">4.启用XSS保护模式</h1><p id="61e0" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">如果攻击者以某种方式从用户输入中注入恶意代码，我们可以通过提供<code class="fe lv lw lx ly b">"X-XSS-Protection": "1; mode=block"</code>头来指示浏览器阻止响应。</p><p id="957f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大多数现代浏览器都默认启用了XSS保护模式，但是仍然推荐包含<code class="fe lv lw lx ly b">X-XSS-Protection</code>标题。这有助于确保不支持CSP头的旧浏览器具有更好的安全性。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="0198" class="nf mb it bd mc ng nh ni mf nj nk nl mi jz nm ka ml kc nn kd mo kf no kg mr np bi translated">5.避免典型的XSS错误</h1><p id="1529" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">XSS攻击通常追溯到DOM API的<code class="fe lv lw lx ly b">innerHTML.</code>，例如:</p><pre class="kj kk kl km gt of ly og oh aw oi bi"><span id="4f90" class="ma mb it ly b gy oj ok l ol om">document.querySelector('.tagline').innerHTML = nameFromQueryString</span></pre><p id="16bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">任何攻击者都可以用上面的代码注入恶意代码。</p><p id="94cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑使用<code class="fe lv lw lx ly b">textContent</code>而不是<code class="fe lv lw lx ly b">innerHTML</code>来完全避免生成HTML输出。如果不生成HTML，就没有办法插入JavaScript——你可以看到内容，但什么也不会发生。</p><p id="5c94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">密切关注一个新的<a class="ae ky" href="https://developers.google.com/web/updates/2019/02/trusted-types" rel="noopener ugc nofollow" target="_blank">可信类型规范</a>，它旨在防止所有基于DOM的跨站点脚本攻击。</p><p id="216f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在react.js的情况下，<code class="fe lv lw lx ly b">dangerouslySetInnerHTML</code>是明确的和警告性的，可以产生与<code class="fe lv lw lx ly b">innerHTML</code>类似的影响。</p><p id="371c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oe">注意:不要基于用户输入设置</em> <code class="fe lv lw lx ly b"><em class="oe">innerHTML</em></code> <em class="oe">值，尽可能使用textContent代替</em> <code class="fe lv lw lx ly b"><em class="oe">innerHTML</em></code> <em class="oe">。</em></p><p id="70dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，HTTP响应头<code class="fe lv lw lx ly b">Content-Type</code>和<code class="fe lv lw lx ly b">X-Content-Type-Options</code>应该按照它们的预期行为正确设置。例如，JSON数据不应该编码为text/HTML，以防止意外执行。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="112d" class="nf mb it bd mc ng nh ni mf nj nk nl mi jz nm ka ml kc nn kd mo kf no kg mr np bi translated">6.禁用iframe嵌入</h1><p id="f32b" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">禁用iframe可以使我们免受<strong class="lb iu">点击劫持攻击。</strong>我们应该总是在请求中使用<code class="fe lv lw lx ly b">"X-Frame-Options": "DENY"</code>头，禁止在框架中呈现网站。</p><p id="e293" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，我们可以使用<code class="fe lv lw lx ly b">frame-ancestors</code> CSP指令，它提供了对哪些父页面可以嵌入iframe的更多控制。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="7e0d" class="nf mb it bd mc ng nh ni mf nj nk nl mi jz nm ka ml kc nn kd mo kf no kg mr np bi translated">7.保持错误的一般性</h1><p id="5a6c" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">类似“您的密码不正确”这样的错误可能对用户有帮助，但对攻击者也有帮助。他们可能会从这些错误中找出有助于他们计划下一步行动的信息。</p><p id="7008" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在处理账户、邮件和PII时，我们应该尽量使用像“不正确的登录信息”这样的模糊错误</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="9dd1" class="nf mb it bd mc ng nh ni mf nj nk nl mi jz nm ka ml kc nn kd mo kf no kg mr np bi translated">8.使用验证码</h1><p id="6608" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">在面向公众的端点使用验证码(登录、注册、联系)。验证码是一种计算机程序或系统，旨在区分人类和机器人，并可以帮助阻止DoS(拒绝服务)攻击。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="8daa" class="nf mb it bd mc ng nh ni mf nj nk nl mi jz nm ka ml kc nn kd mo kf no kg mr np bi translated">9.始终设置<code class="fe lv lw lx ly b">Referrer-Policy</code></h1><p id="6cfb" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">每当我们使用锚标签或导航到网站之外的链接时，请确保您使用标题策略<code class="fe lv lw lx ly b">"Referrer-Policy": "no-referrer"</code>，或者在锚标签的情况下，设置<code class="fe lv lw lx ly b">rel = noopener or noreferrer</code>。</p><p id="15e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们不设置这些头和rel时，目标网站可以获得像会话令牌和数据库id这样的数据。</p><h1 id="02a0" class="nf mb it bd mc ng on ni mf nj oo nl mi jz op ka ml kc oq kd mo kf or kg mr np bi translated">10.使用有限的浏览器功能和API</h1><p id="57a4" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">在CSP中，有限的域可以连接到网站，同样的原理也可以应用于浏览器功能&amp; APIs。我们可以添加一个<code class="fe lv lw lx ly b">Feature-Policy</code>头来拒绝对某些特性和API的访问。<a class="ae ky" href="https://www.smashingmagazine.com/2018/12/feature-policy/" rel="noopener ugc nofollow" target="_blank">阅读更多</a>。</p><p id="b99c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oe">提示:将</em> <code class="fe lv lw lx ly b"><em class="oe">none</em></code> <em class="oe">设置为所有不使用的功能。</em></p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="72ec" class="nf mb it bd mc ng nh ni mf nj nk nl mi jz nm ka ml kc nn kd mo kf no kg mr np bi translated">11.定期审核依赖关系</h1><p id="41db" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">定期运行<code class="fe lv lw lx ly b">npm audit</code>以获取易受攻击的软件包列表，并升级它们以避免安全问题。</p><p id="4a0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">GitHub现在标记易受攻击的依赖项。我们也可以使用<a class="ae ky" href="https://snyk.io/" rel="noopener ugc nofollow" target="_blank"> Snyk </a>，它会自动检查你的源代码，并打开pull请求来提升版本。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="2ffa" class="nf mb it bd mc ng nh ni mf nj nk nl mi jz nm ka ml kc nn kd mo kf no kg mr np bi translated">12.划分你的应用程序</h1><p id="284d" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">在后端，我们有一个微服务架构，其中单片应用程序被分成更小的独立组件，每个组件单独运行。</p><p id="986a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样的原理也适用于前端。例如，一个应用程序可以分为公共部分、认证部分和管理部分，每个部分都托管在单独的子域上，如<code class="fe lv lw lx ly b"><a class="ae ky" href="https://public.example.com/" rel="noopener ugc nofollow" target="_blank">https://public.example.com</a></code>、<code class="fe lv lw lx ly b"><a class="ae ky" href="https://users.example.com/" rel="noopener ugc nofollow" target="_blank">https://users.example.com</a></code>和<code class="fe lv lw lx ly b"><a class="ae ky" href="https://admin.example.com/" rel="noopener ugc nofollow" target="_blank">https://admin.example.com</a></code>、T6。</p><p id="6ab7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将确保更少的客户端漏洞。</p><p id="772a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oe">注意:适当的划分还可以防止应用程序公共部分中的XSS漏洞，防止它自动泄露用户信息。</em></p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="f799" class="nf mb it bd mc ng nh ni mf nj nk nl mi jz nm ka ml kc nn kd mo kf no kg mr np bi translated">13.避免第三方服务</h1><p id="08dc" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">一行代码像谷歌分析、谷歌标签管理器、对讲机、Mixpanel这样的第三方服务会使你的网络应用程序易受攻击。想象一下这些第三方服务受到威胁的情况。</p><p id="299c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">制定强有力的CSP政策非常重要。大多数第三方服务都有一个定义好的CSP指令，所以一定要添加它们。</p><p id="9eaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，在添加脚本标签时，一定要尽可能包含<code class="fe lv lw lx ly b">integrity</code>属性。<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity" rel="noopener ugc nofollow" target="_blank">子资源完整性</a>功能可以验证脚本的加密哈希，确保它没有被篡改。</p><pre class="kj kk kl km gt of ly og oh aw oi bi"><span id="1440" class="ma mb it ly b gy oj ok l ol om">&lt;script src= "https://example.com/example-framework.js" integrity= "sha384-oqVuAfXRKap7fdgcCY5uykM6+R9GqQ8K/ux..." crossorigin= "anonymous" &gt;&lt;/script&gt;</span></pre></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="99f3" class="nf mb it bd mc ng nh ni mf nj nk nl mi jz nm ka ml kc nn kd mo kf no kg mr np bi translated">仔细考虑自动填充字段</h1><p id="a642" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">存储在浏览器自动填充中的个人身份信息对用户和攻击者都很方便。</p><p id="20a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">攻击者添加第三方脚本来利用浏览器的内置自动填充功能提取电子邮件地址，以建立跟踪标识符。他们可以利用这些来建立用户浏览历史档案，然后卖给坏人。点击阅读更多关于此<a class="ae ky" href="https://freedom-to-tinker.com/2017/12/27/no-boundaries-for-user-identities-web-trackers-exploit-browser-login-managers/" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><p id="d2b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们中的许多人甚至不知道他们浏览器的自动填充存储了什么信息。</p><p id="63a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oe">提示:禁用敏感数据的自动填充表单。</em></p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><p id="b8d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谢谢你。</p></div></div>    
</body>
</html>