<html>
<head>
<title>Bored Ape Yacht Club: Smart Contract Breakdown</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">无聊猿游艇俱乐部:智能合同破裂</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/bored-ape-yacht-club-smart-contract-breakdown-6c254c774394?source=collection_archive---------1-----------------------#2022-03-01">https://betterprogramming.pub/bored-ape-yacht-club-smart-contract-breakdown-6c254c774394?source=collection_archive---------1-----------------------#2022-03-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4260" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过对代码行进行分组来解释其功能</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b113b830c466b299a14ca2c01b1a85cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1YY6xS4I1OGKKxIy0ib9Jw.png"/></div></div></figure><p id="694b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">无聊的猿不需要介绍。当我决定对BAYC进行分解时，我决定回答我长期以来的问题:</p><ul class=""><li id="5189" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">猿有什么用？买一个真的能得到什么？</li><li id="be98" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">他们实际上是如何实现他们承诺的商业之地、独家使用权等的呢？</li><li id="7aa6" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">访问控制是如何实现的？</li><li id="d93d" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">二次支付(版税)是如何实现的？</li></ul><p id="c0ef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这篇文章中，我们正在回答这些问题。在探索过程中，我们还将了解</p><ul class=""><li id="b1b4" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">NFT拍卖期间的市场动态</li><li id="fac6" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">BAYC的创始人赚了多少钱</li><li id="ef0c" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">BAYC的一个傻bug以及其他NFT是如何盲目抄袭的</li></ul><p id="b85f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是这篇文章的提纲:</p><ul class=""><li id="9b88" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">ERC 721—NFT标准</li><li id="5a7b" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">BAYC合同源代码</li><li id="10c0" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">合同部署后发生了什么</li></ul><h1 id="2761" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">ERC 721—NFT标准</h1><p id="7ae3" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">ERC721是用于实现NFT(不可替换令牌)的标准。它类似于用于Dogecoin等可替换令牌的ERC20。主要区别在于，ERC20令牌都是相同的，而每个ERC721令牌都是唯一的。</p><p id="65cd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是根据<a class="ae my" href="https://eips.ethereum.org/EIPS/eip-721" rel="noopener ugc nofollow" target="_blank"> ERC721 </a>应该实现的功能:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="7cc9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">大多数函数应该很简单，因为它们非常类似于ERC20(如果你感兴趣，我有一个ERC20 的<a class="ae my" href="https://ilamanov.medium.com/erc20-smart-contract-breakdown-9dab65cec671" rel="noopener">分解)。不同的功能是:</a></p><ul class=""><li id="1cc8" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated"><code class="fe nb nc nd ne b">tokenURI</code> —令牌元数据的路径(如图像、令牌质量等)</li><li id="c042" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated"><code class="fe nb nc nd ne b">tokenByIndex</code> —返回指定索引处令牌的<code class="fe nb nc nd ne b">tokenId</code></li><li id="e9bd" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated"><code class="fe nb nc nd ne b">tokenOfOwnerByIndex</code> —与<code class="fe nb nc nd ne b">tokenByIndex</code>相同，但针对指定的所有者</li></ul><p id="4d58" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了比较，下面是<a class="ae my" href="https://eips.ethereum.org/EIPS/eip-20" rel="noopener ugc nofollow" target="_blank"> ERC20 </a>标准要求的功能:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><h2 id="50a7" class="nf mc iq bd md ng nh dn mh ni nj dp ml la nk nl mn le nm nn mp li no np mr nq bi translated">BAYC如何实施ERC721</h2><p id="8f50" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">BAYC只是使用了它的<a class="ae my" href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC721/ERC721.sol" rel="noopener ugc nofollow" target="_blank"> OpenZeppelin实现</a>。OpenZeppelin是最常见标准的实现库。</p><p id="7368" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以检查代码，但没有什么惊喜。您期望从标准实施中获得的一切:</p><ul class=""><li id="5498" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">他们使用映射来管理令牌的所有权:</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/657bfed74f87203c439812c84bf863d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lHVAHg1si1aEEs4O4D-Vsw@2x.png"/></div></div></figure><ul class=""><li id="a513" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">所有权是如何转移的(只需在映射中重新分配值):</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/a1313b3ae7a34fff72a9a0caa92c5db6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nDNgmlLeZPP6GBFggFVe4w@2x.png"/></div></div></figure><ul class=""><li id="093e" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">映射还用于管理<strong class="kt ir">批准</strong>和<strong class="kt ir">操作员</strong>:</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/5a9c266784404d95ca72438f8ff4077a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9G4D_NPxqhixSn411od8aQ@2x.png"/></div></div></figure><blockquote class="nu nv nw"><p id="e483" class="kr ks nx kt b ku kv jr kw kx ky ju kz ny lb lc ld nz lf lg lh oa lj lk ll lm ij bi translated"><strong class="kt ir">什么是审批和操作员？<br/> </strong>批准—允许其他人管理(转让、出售等)我的令牌<br/>操作员—批准，但由OpenSea等第三方使用的所有令牌<br/>除外，以管理我的令牌</p></blockquote><ul class=""><li id="9335" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">尽管不是标准的一部分，Openzeppelin增加了用于添加/移除令牌的<code class="fe nb nc nd ne b">mint</code> / <code class="fe nb nc nd ne b">burn</code>函数:</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/5e90ba13ee3c9f62c165fca9fd45eee9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zOQgqjnk4QiOv_iD_P9ffA@2x.png"/></div></div><p class="oc od gj gh gi oe of bd b be z dk translated">“刻录”功能只是“薄荷”的镜像</p></figure><blockquote class="nu nv nw"><p id="6741" class="kr ks nx kt b ku kv jr kw kx ky ju kz ny lb lc ld nz lf lg lh oa lj lk ll lm ij bi translated">顺便说一句，通过阅读这段代码，我终于知道了<code class="fe nb nc nd ne b">safeTransfer</code>中“安全”一词的来源。它只是检查NFT(如果是合同)的接收者是否知道ERC721协议，以防止令牌被永远锁定。</p></blockquote><h1 id="c330" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">BAYC合同源代码</h1><p id="79b7" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">BAYC合同扩展了OpenZeppelin的ERC721，以添加特定于BAYC的功能。合同源代码可以在<a class="ae my" href="https://etherscan.io/address/0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d#code" rel="noopener ugc nofollow" target="_blank"> Etherscan </a>上找到(或者<a class="ae my" href="https://gist.github.com/JofArnold/bf2c4a094fcdd4aee2f52983c7714de8" rel="noopener ugc nofollow" target="_blank"> Github </a>以获得更好的可读性)。</p><p id="d4c0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">文件看起来很长，但大部分都是OpenZeppelin导入的(ERC721、SafeMath、Ownable等)。实际的BAYC代码是一个非常短的契约，名为<a class="ae my" href="https://gist.github.com/JofArnold/bf2c4a094fcdd4aee2f52983c7714de8#file-boredapeyachtclub-sol-L1906" rel="noopener ugc nofollow" target="_blank"> BoredApeYachtClub </a>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/26feac698429a125156c289cbddbdbb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ieGz9V9Yl0jTLBduNebArA@2x.png"/></div></div></figure><p id="a628" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">截图中没有解释的几件事:</p><ul class=""><li id="47f5" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated"><strong class="kt ir">出处</strong>——这应该是整个NFT系列独一无二的签名(哪怕换一张图片，签名都不匹配)。出处的BAYC页面解释了这个签名是如何生成的:</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/51e9671b9f9d939ac3c57490a3bd2e2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8NbCl2kXuKs1ddzrn_YbEQ@2x.png"/></div></div></figure><ul class=""><li id="1e48" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">不幸的是，出处不是不变的，可以随时被所有者改变。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/8a268bec09c228cb55d2af997d173633.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hl_1YwwRvzbs--h9U0cZdg@2x.png"/></div></div></figure><ul class=""><li id="7817" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">另外两个无法解释的事情:<code class="fe nb nc nd ne b"><strong class="kt ir">baseUri</strong></code>和<code class="fe nb nc nd ne b"><strong class="kt ir">startingIndex</strong></code>将在本文后面解释。</li></ul><p id="80b3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过检查BAYC代码，我意识到它远没有Uniswap 的<a class="ae my" href="https://ilamanov.medium.com/uniswap-smart-contract-breakdown-ea20edf1a0ff" rel="noopener">优雅和高效。一些例子:</a></p><ul class=""><li id="1002" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated"><strong class="kt ir">浪费气体</strong> — BAYC计算显示构造函数中的时间戳。这可以通过传递已经计算好的值来避免。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/1d11f66874b91c606e230e5176f20b19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pdHxfQ1cRkczotNWCNTsfA@2x.png"/></div></div></figure><ul class=""><li id="01a5" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">虽然<code class="fe nb nc nd ne b">REVEAL_TIMESTAMP</code>用大写字母拼写，但是<strong class="kt ir">并不是常量</strong>——主人可以随时更改。<code class="fe nb nc nd ne b">BAYC_PROVENANCE</code>也一样。</li><li id="513e" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">猿可以由主人在<strong class="kt ir">无限量</strong>中预定👌。</li></ul><h2 id="edbc" class="nf mc iq bd md ng nh dn mh ni nj dp ml la nk nl mn le nm nn mp li no np mr nq bi translated">BAYC的一个愚蠢的错误，以及其他NFT是如何盲目复制它的</h2><p id="58a6" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">至此，我们已经跳过了神秘的变量<code class="fe nb nc nd ne b">startingIndex</code>。感谢<a class="ae my" href="https://medium.com/northwest-nfts/bored-ape-yacht-club-contract-review-80dce503308e" rel="noopener">另一篇关于BAYC智能合约的文章</a>，我了解了它的用途。</p><p id="e42b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">BAYC团队试图通过随机排列代币顺序来防止预售期间对稀有代币的狙击。<code class="fe nb nc nd ne b">startingIndex</code>应该作为随机偏移来随机化顺序。</p><p id="2ea0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面的代码说明了<code class="fe nb nc nd ne b">startingIndex</code>是如何计算的。这是一种非常复杂的生成随机数的方法！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/36f2db896d43e9fd5b5af4426b32d8f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JcFE4JU9xW4p4sROftXWZg@2x.png"/></div></div></figure><p id="b8dd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是……这个随机偏移量实际上并没有被用到任何地方！代码没用！尽管BAYC的<a class="ae my" href="https://boredapeyachtclub.com/#/provenance" rel="noopener ugc nofollow" target="_blank">声称</a>猿的顺序是随机的，但实际上不是！而<code class="fe nb nc nd ne b">startingIndex</code>只是浪费汽油！</p><p id="b0d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">关于BAYC 的<a class="ae my" href="https://medium.com/northwest-nfts/bored-ape-yacht-club-contract-review-80dce503308e" rel="noopener">文章还声称，其他NFT只是盲目地复制/粘贴BAYC代码，而不理解它是做什么的。所以他们继承了这个<code class="fe nb nc nd ne b">startingIndex</code> bug。我想证实这一说法，但懒得去搜索“受BAYC启发的NFTs”。如果你知道任何这样的合同，请在评论中留下它们。</a></p><h1 id="e855" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">合同部署后发生了什么</h1><p id="0ffc" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">我们看到了代码。但是代码是静态的，它没有告诉我们动态的画面。部署合同后发生了什么？</p><p id="e773" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以在Etherscan 上查看该合同<a class="ae my" href="https://etherscan.io/address/0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d" rel="noopener ugc nofollow" target="_blank">的全部交易历史。让我们回到开头:</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/41d62956163ad01b241b6b4c34757aa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3gahClaWwXlI1Yn8jT9CFQ@2x.png"/></div></div></figure><p id="24be" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">点击第一条交易消息:该合同于2021年4月22日<a class="ae my" href="https://etherscan.io/tx/0x22199329b0aa1aa68902a78e3b32ca327c872fab166c7a2838273de6ad383eba" rel="noopener ugc nofollow" target="_blank">部署</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/951bf1085c8027ecdd6152d3db7f875e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*11KH6YjLCjaIe_jyJRNa5w@2x.png"/></div></div></figure><p id="8958" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">大约25小时后(第二个txn)，30只猿被创作者<a class="ae my" href="https://etherscan.io/tx/0xcfb197f62ec5c7f0e71a11ec0c4a0e394a3aa41db5386e85526f86c84b3f2796" rel="noopener ugc nofollow" target="_blank">保留</a>。以一只Ape在82 ETH的底价(23万美元)为例，<strong class="kt ir">这30只Ape在今天的估值约为690万美元</strong>😳。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/b3b83318f3b10052f04520c1269dd0de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hz1aODmmA2zvJYJR8ZfUEw@2x.png"/></div></div><p class="oc od gj gh gi oe of bd b be z dk translated">30只猿被保留</p></figure><blockquote class="nu nv nw"><p id="f78a" class="kr ks nx kt b ku kv jr kw kx ky ju kz ny lb lc ld nz lf lg lh oa lj lk ll lm ij bi translated"><strong class="kt ir">沉默寡言的类人猿的命运是什么？<br/> </strong> BAYC团队把他们转移到不同的地址。不确定这些地址是否属于BAYC团队。</p></blockquote><p id="9e9a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下一个txn设置<code class="fe nb nc nd ne b">baseUri</code>。这是合同中的<code class="fe nb nc nd ne b">baseUri</code>变量:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/ff0d686d20f47ee00036cc35bf930b58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eWJ2lHE6ReR8LU_cbUthxg@2x.png"/></div></div></figure><h2 id="00d3" class="nf mc iq bd md ng nh dn mh ni nj dp ml la nk nl mn le nm nn mp li no np mr nq bi translated">什么是baseUri？</h2><p id="0264" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">有点像存储所有图像元数据的根路径。如果我们<a class="ae my" href="https://etherscan.io/address/0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d#readContract" rel="noopener ugc nofollow" target="_blank">检查合同中<code class="fe nb nc nd ne b">baseUri</code>的当前值</a>，它显示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/b8a00fb90ef2500104985b76ea6f29a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*13x6uTW2CiUsIqPia3ZsPQ@2x.png"/></div></div></figure><p id="d0db" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以，Ape 0元数据在<code class="fe nb nc nd ne b">ipfs://QmeSjSinHpPnmXmspMjwiXyN6zS4E9zccariGR3jxcaWtq<strong class="kt ir">/0</strong></code>。该元数据是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/3e2f38f9855b7bdfe38933354f33f81e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k0HIP0Vw-f4uTSXThsugkQ@2x.png"/></div></div></figure><p id="2088" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里有一个<code class="fe nb nc nd ne b">image</code>字段指向:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/8c2367dad8f57d5574789ea13bb25e6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QWXeU8dWktKsBkMoQ8ocOQ@2x.png"/></div></div></figure><p id="43aa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">事实上，所有这些元数据都与BAYC网站上的内容相匹配:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/64a2b92831fab56ebc4f11fe5bb7e3fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I6SK-FRDPRv40OtqXTVPEA@2x.png"/></div></div></figure><p id="9473" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">理想情况下，<code class="fe nb nc nd ne b">baseUri</code>应该在这个契约中保持不变。然而，它可以被创作者随意修改多次。</p><h2 id="74a7" class="nf mc iq bd md ng nh dn mh ni nj dp ml la nk nl mn le nm nn mp li no np mr nq bi translated">回到交易的历史</h2><p id="4edf" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">设置<code class="fe nb nc nd ne b">baseUri</code>后，合同创建者</p><ul class=""><li id="a2d8" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">开始销售</li><li id="e016" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">然后改变了主意</li><li id="d855" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">16个小时后，又开始了</li><li id="d138" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">铸造过程开始了</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/9026dd7957d36be9f6615fc2b2322d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SAHEqAm-ODMdklNaMPNfDA@2x.png"/></div></div></figure><p id="f5e7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你看得更远，</p><ul class=""><li id="fb7d" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">有很多<code class="fe nb nc nd ne b">mintApe</code>txn</li><li id="cb60" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">然后你开始看到<code class="fe nb nc nd ne b">transferFrom</code>和<code class="fe nb nc nd ne b">setApproval</code>txn</li><li id="068b" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">然后，在销售开始后<strong class="kt ir"> 4天</strong>，我们看到BAYC团队第一次撤回<strong class="kt ir">14 ETH</strong>(175 Ape，0.08 ETH/Ape)。</li></ul><p id="4caf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">之后，更多的猿被铸造，更多的ETH被回收。这种情况一直持续到所有的猿类(包括10K)都被铸造出来。之后，只有二次销售(在OpenSea上)在Etherscan上显示为<code class="fe nb nc nd ne b">transfer</code>事件。</p><h2 id="32d1" class="nf mc iq bd md ng nh dn mh ni nj dp ml la nk nl mn le nm nn mp li no np mr nq bi translated">结束语</h2><p id="2ecd" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">那么，猿的所有权到底给了你什么？BAYC网站上说，你可以获得俱乐部的某种独家使用权，在那里你可以在板上添加自己的涂鸦。基本上没什么有用的。我觉得主要是作为一种投机工具。</p><p id="6b0c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如何实施专属俱乐部的出入控制？这应该很简单，因为所有其他所有权数据都公开存储在区块链上。</p><p id="2f32" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在进入BAYC的兔子洞之前，我的印象是NFTs向原创者提供二次付款(版税)。所以，每次交易一个代币，最初的创造者会得到一小部分。代码没有实现这个功能，所以看来我错了。但是谁知道呢，也许“现代”NFT确实实现了它。我将在另一个智能合同分解中找到答案:)</p><p id="629c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">更正:感谢<a class="ae my" href="https://medium.com/@zikyfranky" rel="noopener"> Isaac </a>在评论中指出这一点，版税没有在NFT智能合同级别实现。它们在市场中实现。市场就像一个中间人，收取一部分佣金，然后将一部分转给最初的创造者。</p></div><div class="ab cl ot ou hu ov" role="separator"><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy"/></div><div class="ij ik il im in"><p id="0d0e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">BAYC合同破裂到此为止！我希望这有所帮助。如果你有任何问题，请在评论中告诉我。</p><p id="8800" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我计划对流行的智能合约进行更多的分解，如<strong class="kt ir"> Axie Infinity </strong>和<strong class="kt ir"> Aave、</strong>，所以请在Medium或Twitter上关注我以获取更新。</p><p id="1ffc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在solidnoob.com<a class="ae my" href="https://www.solidnoob.com/" rel="noopener ugc nofollow" target="_blank"/>，你还可以查看其他智能合同的细目表以及更多关于Solidity noobs的东西。</p><pre class="kg kh ki kj gt pa ne pb pc aw pd bi"><span id="d829" class="nf mc iq ne b gy pe pf l pg ph"><strong class="ne ir">Want to Connect?</strong></span><span id="b507" class="nf mc iq ne b gy pi pf l pg ph">Follow me on <a class="ae my" href="https://twitter.com/nazar_ilamanov" rel="noopener ugc nofollow" target="_blank">Twitter</a>.</span></pre></div></div>    
</body>
</html>