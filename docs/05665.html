<html>
<head>
<title>Automate and Schedule Your Python Code Executions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动化并安排Python代码的执行</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/automate-and-schedule-your-python-code-executions-22c3ed27794e?source=collection_archive---------0-----------------------#2020-07-26">https://betterprogramming.pub/automate-and-schedule-your-python-code-executions-22c3ed27794e?source=collection_archive---------0-----------------------#2020-07-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2bb4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让您的代码按照您的计划工作</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/65edb876a1a6fa311f957260f68844af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uxbN-xibzOeHqpbo"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马库斯·斯皮斯克</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="9e6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此时，你已经写了许多行代码，重写了它们，删除了其中的一些(或全部)，最后，经过一些眼泪和压力，你完成了！</p><p id="eec4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它运行得很好，但是你需要每天早上5点运行它，或者每周周日运行一次。起床后只需点击五个按钮就可以开始执行，或者需要在会议或任务进行到一半时停下来初始化，这些都不是你一天中最快乐的时刻。</p><p id="5d74" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么，如何轻松实现自动化呢？</p><p id="3044" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您只需要三个文件(如下)和任务调度程序:</p><ul class=""><li id="da1d" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">你的。py文件。</li><li id="82e7" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">答。嘘，那会叫Python给你。</li><li id="f0e3" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">答。蝙蝠，这样我们就可以安排它。</li></ul></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="5402" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">一个简单的例子</h1><h2 id="0e52" class="nf mo iq bd mp ng nh dn mt ni nj dp mx lf nk nl mz lj nm nn nb ln no np nd nq bi translated">第一个文件:test_PY_sh_bat.py</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="8679" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这段代码只是打开一个对话框。没什么重要的，但是你看到<code class="fe nt nu nv nw b">execute()</code>了吗？你只需要用你想执行的函数替换它。</p><p id="bfb6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意:不要忘记你需要在这个文件中有你的主函数或者从另一个文件中导入它。</p><h2 id="240c" class="nf mo iq bd mp ng nh dn mt ni nj dp mx lf nk nl mz lj nm nn nb ln no np nd nq bi translated">第二个文件:test_py_SH_bat.sh</h2><pre class="kg kh ki kj gt ny nw nz oa aw ob bi"><span id="2b65" class="nf mo iq nw b gy oc od l oe of">export PATH="$PATH:/c/ProgramData/Anaconda3"<br/>python test_PY_sh_bat.py |&amp; tee ./logfiles/`date '+%Y_%m_%d'`_test_py_sh_bat.txt</span></pre><p id="f99f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个将会说，“嘿，我想使用这个文件夹中的<code class="fe nt nu nv nw b">python.exe</code>来运行这个脚本，并以这个名称在另一个文件夹中保存一个执行日志。”这样，你可以知道你的执行是否一切正常。</p><h2 id="b9a4" class="nf mo iq bd mp ng nh dn mt ni nj dp mx lf nk nl mz lj nm nn nb ln no np nd nq bi translated">第三个文件:test_py_sh_BAT.bat</h2><pre class="kg kh ki kj gt ny nw nz oa aw ob bi"><span id="9c4c" class="nf mo iq nw b gy oc od l oe of"><a class="ae kv" href="http://twitter.com/echo" rel="noopener ugc nofollow" target="_blank">@echo</a> on<br/>cd "C:\Users\51028915\Documents\codes\scheduling_python_execution"<br/>start test_py_SH_bat.sh<br/>exit</span></pre><p id="893b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">的。bat将被用作调用方，所以只需说出它在哪里以及它要做什么(在这种情况下，启动流程)。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="5d45" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">计划执行</h1><p id="5c32" class="pw-post-body-paragraph kw kx iq ky b kz og jr lb lc oh ju le lf oi lh li lj oj ll lm ln ok lp lq lr ij bi translated">打开任务计划程序:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/e99731e7c5ca7b96b34e17256270538c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Zy3z__tst_YgcjQVeJNQQ.png"/></div></div></figure><p id="915f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">单击“任务计划程序库”:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/d46f6be615e5a0421520dbc7bb0809a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u7wq1g32HjWUWnz7oCx38Q.png"/></div></div></figure><p id="5260" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择“创建基本任务”:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/190cbc44c9c2e2373ec5d81996298932.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ex29-3C0TbBO2gPMzgV9Dw.png"/></div></div></figure><p id="bbee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输入任务的名称和描述:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/b80ddcbac4ddecefb4acfceed41a4f1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o4MMFJ9pl9U12tsKBY8PyA.png"/></div></div></figure><p id="b019" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在“触发”部分选择执行频率<strong class="ky ir"> </strong>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/9f4b487401298f59dee6abb191b64b73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IyE7tSpPd_wWXPfOcMvdKg.png"/></div></div></figure><p id="c863" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择执行任务的时间和日期:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/ea32eda7a3bb0f77258daea1e6f688ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zTt-pWIAA9-oYFIb-AcQKg.png"/></div></div></figure><p id="f422" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在“操作”部分，选择“启动程序”选项:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/ca583e5a2ecbd73cac1a3d134dc3092a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_LfgtbKphJ9yAJa-lSy60w.png"/></div></div></figure><p id="5aeb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">浏览。bat文件:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/de9f0406aa23871b590d33a94105fbba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cfz_LSbyrLaDyCIFcO-O5Q.png"/></div></div></figure><p id="71ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击“完成”:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/e035b89c9101ba2441f91f4d3023a4eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ywy8pgf2Xkti5ZLkHk2k2g.png"/></div></div></figure><p id="a5cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样！从现在开始，您不需要手动运行您的代码！</p><p id="bda3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">希望这篇文章对你有所帮助。你可以在<a class="ae kv" href="https://github.com/rfpcordeiro/scheduling_python_executions" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上下载示例文件。</p></div></div>    
</body>
</html>