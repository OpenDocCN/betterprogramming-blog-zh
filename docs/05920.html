<html>
<head>
<title>How to Create the Snake Game in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在SwiftUI中创建贪吃蛇游戏</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-the-snake-game-in-swiftui-14a7e8162bf3?source=collection_archive---------3-----------------------#2020-08-18">https://betterprogramming.pub/how-to-create-the-snake-game-in-swiftui-14a7e8162bf3?source=collection_archive---------3-----------------------#2020-08-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0c30" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在SwiftUI中创建没有网格的经典贪吃蛇游戏</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/18259397726b03db9f3c38d7e1bc0dce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tc9lx2hACKaBK5tR"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@zmachacek?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">zdenk Macháek</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="066f" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">枚举和变量</h1><p id="6262" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">我们将检测滑动方向，让蛇不断地向那个方向移动，直到方向改变。让我们首先为方向创建一个枚举:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="3cfc" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh my mj mk ml mz mn mo mp na mr ms mt im bi translated">我们会有一个计时器来控制蛇的速度。为了让蛇更慢或更快，我们可以改变计时器的间隔。使用蛇的大小来代替网格。这将帮助我们控制蛇的位置和它的食物。我们在游戏中需要以下变量:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="6ece" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">蛇形视图元素</h1><p id="c47d" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">在我们的身体里面，加一个<code class="fe nb nc nd ne b">ZStack</code>。在里面，你可以为你的背景添加颜色。我们将需要另一个<code class="fe nb nc nd ne b">ZStack</code>用于我们的蛇矩形和食物矩形。为了创建蛇的身体，我们将迭代保存蛇身体位置的数组。给这两个矩形我们的<code class="fe nb nc nd ne b">snakeSize</code>变量的宽度和高度。我们的视图中的最后一个元素是一个文本视图，当我们的<code class="fe nb nc nd ne b">gameOver</code>变量被打开时出现:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="8dd6" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">功能</h1><p id="cb19" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">创建一个确定矩形位置的函数。要将蛇和食物放置在一个不可见的网格中，我们需要利用蛇的大小来确定我们的视图中可以有多少行和多少列:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="ceba" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh my mj mk ml mz mn mo mp na mr ms mt im bi translated">在我们的<code class="fe nb nc nd ne b">ZStacks</code>中，我们可以添加<code class="fe nb nc nd ne b">.onAppear</code>来使用上面创建的函数设置蛇和食物的位置:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="1136" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh my mj mk ml mz mn mo mp na mr ms mt im bi translated">创建一个函数来检查蛇是在屏幕边框的内部还是外部，检查用户滑动的方向，然后将蛇向那个方向移动:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="a57a" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh my mj mk ml mz mn mo mp na mr ms mt im bi translated">我们可以使用下面的代码来确定用户向哪个方向滑动，该代码使用<code class="fe nb nc nd ne b">DragGesture</code>来获取滑动的开始和结束位置，然后计算x坐标和y坐标之间的差异来确定滑动方向。在我们的第一个<code class="fe nb nc nd ne b">ZStack</code>中添加以下函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="73f9" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh my mj mk ml mz mn mo mp na mr ms mt im bi translated">我们需要添加到我们的<code class="fe nb nc nd ne b">ZStack</code>中来结束游戏的是一个<code class="fe nb nc nd ne b">.onReceieve</code>函数，它使用我们的定时器并更新蛇和食物的位置。当蛇在食物上面时，在我们的蛇身体位置数组中添加一个新位置，使蛇变长:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/764e83c77eb040b8799e6ee5f6ebbea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/1*e1OChFvy8x8vqWy5bL8ykg.gif"/></div></figure><p id="499d" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh my mj mk ml mz mn mo mp na mr ms mt im bi translated">全部完成！感谢阅读。</p></div></div>    
</body>
</html>