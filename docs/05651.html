<html>
<head>
<title>Understanding SwiftUI Grids in iOS 14</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解iOS 14中的SwiftUI网格</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swiftui-grids-in-ios-14-49df6aa28541?source=collection_archive---------5-----------------------#2020-07-24">https://betterprogramming.pub/swiftui-grids-in-ios-14-49df6aa28541?source=collection_archive---------5-----------------------#2020-07-24</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="ce23" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">让我们看看这个强大的新工具，它可以构建类似集合视图的布局</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/285252e77672cbdd12b8b762230e098e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_4Z3q8PT3hpx7HEn"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@jltps?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Julie Tupas </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="ce86" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">SwiftUI的第二次迭代没有给我们一个开箱即用的<code class="fe lw lx ly lz b">UICollectionView</code>实现，但它确实给了我们两个强大的组件<code class="fe lw lx ly lz b">LazyVGrid</code>和<code class="fe lw lx ly lz b">LazyHGrid</code>，来构建强大的基于网格的布局。</p><p id="8420" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在接下来的几节中，我们将探索:</p><ul class=""><li id="91f4" class="ma mb iu lc b ld le lg lh lj mc ln md lr me lv mf mg mh mi bi translated">如何构建SwiftUI网格</li><li id="6b38" class="ma mb iu lc b ld mj lg mk lj ml ln mm lr mn lv mf mg mh mi bi translated">如何设置网格的项目</li><li id="a87c" class="ma mb iu lc b ld mj lg mk lj ml ln mm lr mn lv mf mg mh mi bi translated">如何构建不同种类的网格布局</li><li id="888f" class="ma mb iu lc b ld mj lg mk lj ml ln mm lr mn lv mf mg mh mi bi translated">如何在SwiftUI网格中定义部分</li></ul><p id="857d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们开始吧。</p></div><div class="ab cl mo mp hy mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="in io ip iq ir"><h1 id="c7e2" class="mv mw iu bd mx my mz na nb nc nd ne nf ka ng kb nh kd ni ke nj kg nk kh nl nm bi translated">SwiftUI网格</h1><p id="ea95" class="pw-post-body-paragraph la lb iu lc b ld nn jv lf lg no jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">顾名思义，<code class="fe lw lx ly lz b">LazyVGrid</code>用于垂直定位视图，而<code class="fe lw lx ly lz b">LazyHGrid</code>用于水平方向设置视图。需要注意的是，这些项目是按需缓慢加载的。</p><p id="3f9d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为了设置网格布局的类型，我们需要在初始化器中指定一个网格项数组。</p><p id="23b0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe lw lx ly lz b">GridItem</code>基本上允许您指定单个项目的大小、它们之间的间距，以及<code class="fe lw lx ly lz b">LazyHGrid</code>的行内对齐和<code class="fe lw lx ly lz b">LazyVGrid</code>的列内对齐。</p><p id="b0a3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们看看创建网格项的不同方法。</p></div><div class="ab cl mo mp hy mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="in io ip iq ir"><h1 id="cac3" class="mv mw iu bd mx my mz na nb nc nd ne nf ka ng kb nh kd ni ke nj kg nk kh nl nm bi translated">如何设置网格项目</h1><p id="a440" class="pw-post-body-paragraph la lb iu lc b ld nn jv lf lg no jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">下面的代码展示了一种创建网格布局的方法，该布局基于我们传递它的位置，具有两个元素的行或两个元素的列。</p><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="5435" class="nw mw iu lz b gz nx ny l nz oa">private var columns: [GridItem] = [<br/>    GridItem(.fixed(50)),<br/>    GridItem(.fixed(100))<br/>]</span></pre><p id="e818" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">上面的<code class="fe lw lx ly lz b">GridItem</code>数组可以传入一个<code class="fe lw lx ly lz b">LazyVGrid</code>或<code class="fe lw lx ly lz b">LazyHGrid</code>。让我们看看如何:</p><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="1dd6" class="nw mw iu lz b gz nx ny l nz oa">LazyVGrid(columns: columns, alignment: .center, spacing: 10)</span></pre><p id="510b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">本质上，从上面的布局创建的SwiftUI网格在一行的每一列中都有两个元素，第一个元素的大小为50，另一个元素的大小为100。上面的<code class="fe lw lx ly lz b">LazyVGrid</code>初始化器中定义的间距是每行之间的间距。</p><p id="6c6c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们可以通过以下方式设置列间距:</p><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="3641" class="nw mw iu lz b gz nx ny l nz oa">private var columns: [GridItem] = [<br/>    GridItem(.fixed(50), spacing: 50),<br/>    GridItem(.fixed(100)),<br/>    GridItem(.fixed(100))<br/>]</span></pre><p id="1060" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们来看看SwiftUI网格在上述两种列类型下的运行情况:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ob oc l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj od"><img src="../Images/b3f61f306236e3e71c2699011b8dee71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8URuGMAiHQbJVl817NHtqw.png"/></div></div></figure></div><div class="ab cl mo mp hy mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="in io ip iq ir"><h1 id="7cbf" class="mv mw iu bd mx my mz na nb nc nd ne nf ka ng kb nh kd ni ke nj kg nk kh nl nm bi translated">如何调整网格项目的大小</h1><p id="ed39" class="pw-post-body-paragraph la lb iu lc b ld nn jv lf lg no jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">我们之前看到的是通过定义固定大小来设置网格项的最基本的方法。</p><p id="cb41" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是你可能不希望每次都硬编码项目大小，考虑到有这么多不同大小和方向的设备。</p><p id="2a5a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">幸运的是，除了用<code class="fe lw lx ly lz b">fixed</code>来定义<code class="fe lw lx ly lz b">GridItem</code>尺寸，我们还可以用<code class="fe lw lx ly lz b">adaptive</code><strong class="lc iv"/><strong class="lc iv"/><code class="fe lw lx ly lz b">flexible</code>。</p><h2 id="c27c" class="nw mw iu bd mx oe of dn nb og oh dp nf lj oi oj nh ln ok ol nj lr om on nl oo bi translated">自适应项目大小调整</h2><p id="d1ce" class="pw-post-body-paragraph la lb iu lc b ld nn jv lf lg no jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">顾名思义，<code class="fe lw lx ly lz b">adaptive</code>条目让我们根据指定的约束来放置适应父视图宽度或高度的条目。</p><p id="6200" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如:</p><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="947f" class="nw mw iu lz b gz nx ny l nz oa">GridItem(.adaptive(minimum: 100))</span><span id="6ea3" class="nw mw iu lz b gz op ny l nz oa">GridItem(.adaptive(minimum: 50, maximum: 100))</span></pre><p id="4344" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">第一行代码表明，在指定最小宽度的情况下，<code class="fe lw lx ly lz b">LazyVGrid</code>或<code class="fe lw lx ly lz b">LazyHGrid</code>的每一行或每一列将分别容纳尽可能多的项目。</p><p id="9571" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">第二行设置行或列中每个项目的最大宽度或高度的上限。让我们在<code class="fe lw lx ly lz b">LazyVGrid</code>中比较这两者:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ob oc l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oq"><img src="../Images/7e0b37292c15c2e5d63dd8c32a79a34f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*L0xEsbA8T7YLKBqhOxuktQ.gif"/></div></div></figure><h2 id="865a" class="nw mw iu bd mx oe of dn nb og oh dp nf lj oi oj nh ln ok ol nj lr om on nl oo bi translated">灵活的项目规模</h2><p id="5b07" class="pw-post-body-paragraph la lb iu lc b ld nn jv lf lg no jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">这个函数让我们指定网格中的列数，默认情况下每个列占用相等的空间。</p><p id="8321" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是您也可以通过设置最小和最大宽度来定制它，这将自动处理该项目的扩展和收缩。</p><p id="f76f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">看看我们如何设置下面的<code class="fe lw lx ly lz b">flexible</code>三列网格布局:</p><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="479e" class="nw mw iu lz b gz nx ny l nz oa">Array(repeating: GridItem(.flexible(), spacing: 10), count: 3)</span></pre><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ob oc l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj or"><img src="../Images/ff8d43b66b35fe0c2b33040908f73b09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bDB4h7EGKLEyZf_obIeP6g.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/anupamchugh/507d227c161cf4140bb46bfcae57e751" rel="noopener ugc nofollow" target="_blank">要点链接</a></p></figure><p id="f7aa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">请注意，在第二个网格布局中，我们将对齐方式设置为向左。此外，这些项目不会像<code class="fe lw lx ly lz b">adaptive</code>布局那样占据屏幕上的所有可用空间。这是<code class="fe lw lx ly lz b">adaptive</code>和<code class="fe lw lx ly lz b">flexible</code>布局之间的关键区别。</p><p id="d0e5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您还可以在构建网格项目时混合使用<code class="fe lw lx ly lz b">flexible</code>、<code class="fe lw lx ly lz b">adaptive</code>和<code class="fe lw lx ly lz b">fixed</code>类型。</p></div><div class="ab cl mo mp hy mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="in io ip iq ir"><h1 id="1617" class="mv mw iu bd mx my mz na nb nc nd ne nf ka ng kb nh kd ni ke nj kg nk kh nl nm bi translated">如何在SwiftUI网格中设置部分</h1><p id="9951" class="pw-post-body-paragraph la lb iu lc b ld nn jv lf lg no jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">我们看到了如何创建网格布局、调整项目大小、设置间距和对齐方式。现在让我们看看另一个有趣的特性——创建节。</p><p id="bc45" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">要定义一个标题，我们可以简单地将网格布局包装在一个<code class="fe lw lx ly lz b">section</code>中。要定义页脚，我们可以简单地将它放在布局代码的下面，如下所示:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj or"><img src="../Images/d118c99f0733642ba292f7fd0f06c955.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6FkCwQ6EUpkDlPRoZTn-cQ.png"/></div></div></figure><p id="326a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这看起来很简单，但是有时候，你会想把页眉或页脚放在分页的网格布局中。</p><p id="8735" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">幸运的是，<code class="fe lw lx ly lz b">LazyVGrid</code>和<code class="fe lw lx ly lz b">LazyHGrid</code>初始化器拥有一个可选的参数<code class="fe lw lx ly lz b">pinnedViews</code>,允许您指定将节固定在顶部或底部或顶部和底部，如下所示:</p><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="425e" class="nw mw iu lz b gz nx ny l nz oa">//pins at top<br/>LazyVGrid(columns: columns, pinnedViews: [.sectionHeaders])</span><span id="92fe" class="nw mw iu lz b gz op ny l nz oa">//pins at bottom<br/>LazyVGrid(columns: columns, pinnedViews: [.sectionFooters])</span><span id="2ba2" class="nw mw iu lz b gz op ny l nz oa">//both<br/>LazyVGrid(columns: columns, pinnedViews: [.sectionHeaders, .sectionFooters])</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj os"><img src="../Images/1b98c86a7fa966395093e83dd34c5eb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-yjvwmZetCLM7g7ECV7Zqg.gif"/></div></div></figure><p id="f474" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">上述粘性和非粘性头的SwiftUI结果是使用以下代码生成的:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ob oc l"/></div></figure><p id="4be8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您还可以设置嵌套的<code class="fe lw lx ly lz b">for</code>循环来填充每个网格部分中的项目。</p></div><div class="ab cl mo mp hy mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="in io ip iq ir"><h1 id="9806" class="mv mw iu bd mx my mz na nb nc nd ne nf ka ng kb nh kd ni ke nj kg nk kh nl nm bi translated">结论</h1><p id="5f1a" class="pw-post-body-paragraph la lb iu lc b ld nn jv lf lg no jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">因此，我们用不同的<code class="fe lw lx ly lz b">GridItem</code>类型和大小构建了<code class="fe lw lx ly lz b">LazyVGrid</code>布局。随后，我们构建部分，并查看如何固定它们。你也可以设置一个<code class="fe lw lx ly lz b">LazyHGrid</code>作为<code class="fe lw lx ly lz b">LazyVGrid</code>的一部分来构建一个Instagram Stories类型的布局。</p><p id="3899" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这一次到此为止。感谢阅读。</p></div></div>    
</body>
</html>