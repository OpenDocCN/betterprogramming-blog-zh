<html>
<head>
<title>How to Inject HTML into React Using IFrame</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用IFrame将HTML注入React</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/inject-html-in-react-using-iframe-ea3c85bdeec0?source=collection_archive---------1-----------------------#2020-06-25">https://betterprogramming.pub/inject-html-in-react-using-iframe-ea3c85bdeec0?source=collection_archive---------1-----------------------#2020-06-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b7f2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">因为有时在新的React代码中需要iframe</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/737414bc76582bed1302af236c944dda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PzZyBxNe87ExyLezFfcm-g.png"/></div></div></figure><p id="c01c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本文中，我将解释如何在不使用<code class="fe lq lr ls lt b">dangerouslySetInnerHTML</code> <strong class="kw iu"> <em class="lu"> </em> </strong>的情况下在React组件中注入HTML，因为使用起来不安全。它会导致跨站点脚本(XSS)攻击。</p><p id="7717" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">React文档称:</p><blockquote class="lv lw lx"><p id="2a89" class="ku kv lu kw b kx ky ju kz la lb jx lc ly le lf lg lz li lj lk ma lm ln lo lp im bi translated"><code class="fe lq lr ls lt b">dangerouslySetInnerHTML</code>是React对浏览器DOM中使用<code class="fe lq lr ls lt b">innerHTML</code>的替代。一般来说，从代码中设置HTML是有风险的，因为很容易无意中让您的用户受到跨站点脚本(XSS)攻击。</p></blockquote><p id="7fc9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用<code class="fe lq lr ls lt b"><em class="lu">dangerouslySetInnerHTML</em></code>非常简单:</p><pre class="kj kk kl km gt mb lt mc md aw me bi"><span id="5a3c" class="mf mg it lt b gy mh mi l mj mk">&lt;div dangerouslySetInnerHTML={{ __html: "&lt;p&gt;Hello world!&lt;/p&gt;"}} /&gt;</span></pre><p id="f403" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这样做的问题是，您注入的HTML可能是畸形的，它可能有破坏您的应用程序的CSS/JavaScript，或者更糟的是，从您的应用程序中窃取数据的JavaScript。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="5062" class="ms mg it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">还有什么？</h1><p id="bf3b" class="pw-post-body-paragraph ku kv it kw b kx nj ju kz la nk jx lc ld nl lf lg lh nm lj lk ll nn ln lo lp im bi translated">一种选择是使用<code class="fe lq lr ls lt b">srcdoc</code>属性。它允许您指定iframe的内容，因此使用它非常简单:</p><pre class="kj kk kl km gt mb lt mc md aw me bi"><span id="803d" class="mf mg it lt b gy mh mi l mj mk">&lt;iframe srcdoc="&lt;p&gt;Hello world!&lt;/p&gt;" /&gt;</span></pre><p id="474b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但问题是<code class="fe lq lr ls lt b">srcdoc</code>对浏览器的支持非常有限。IE和Edge不支持。有一个<a class="ae no" href="https://github.com/jugglinmike/srcdoc-polyfill" rel="noopener ugc nofollow" target="_blank">多孔填充物</a>可用，但在这种情况下没有用，因为它需要<code class="fe lq lr ls lt b">allow-scripts</code>，这是不安全的。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="b656" class="ms mg it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">为什么不用iframe . document . open()/write()/close()？</h1><p id="ac0c" class="pw-post-body-paragraph ku kv it kw b kx nj ju kz la nk jx lc ld nl lf lg lh nm lj lk ll nn ln lo lp im bi translated">让我们编写自己的自定义Iframe吧！</p><p id="8dfd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这并不像使用<code class="fe lq lr ls lt b">srcdoc</code>那么简单，但它仍然可以在任何浏览器中安全使用和工作:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="c1db" class="ms mg it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">使用</h1><pre class="kj kk kl km gt mb lt mc md aw me bi"><span id="5c22" class="mf mg it lt b gy mh mi l mj mk">import Iframe from './Iframe';</span><span id="c315" class="mf mg it lt b gy nr mi l mj mk">&lt;Iframe content={&lt;p&gt;Hello world!&lt;/p&gt;} /&gt;</span></pre><p id="956a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">简单不是吗？</p><p id="91fc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你今天学到新东西了吗？评论和反馈总是让作者开心！</p></div></div>    
</body>
</html>