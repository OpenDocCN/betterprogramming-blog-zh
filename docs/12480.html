<html>
<head>
<title>Convert Emojis to Text Using This Python Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用这个Python库将表情符号转换成文本</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/using-emoji-to-convert-emojis-to-text-f1969352083c?source=collection_archive---------6-----------------------#2022-06-08">https://betterprogramming.pub/using-emoji-to-convert-emojis-to-text-f1969352083c?source=collection_archive---------6-----------------------#2022-06-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dc94" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何用语言表达所有的乐趣</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/19c8104c72678b95b5c97f1c90f04d66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YLLVHQq6TvL2OSRN"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·温克勒在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="f3fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我目前正在进行一个Twitter抓取项目(改天再谈)，我碰到了这个:</p><blockquote class="lv lw lx"><p id="4778" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><em class="it">'通信🌿🖤 |我来买爆米花。🍿</em></p></blockquote><p id="3c0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不用说，我必须做点什么。</p><p id="f335" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对我来说幸运的是，有一个很棒的图书馆可以把这个:</p><blockquote class="lv lw lx"><p id="368c" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><em class="it">🗣@赌博播客\n🚀@theSGPNetwork🤝@ bluewirepods \ n \ n # together blue | # Hokies🦃| #比特币\n \投资者名下的1H帐户\ n🎥</em></p></blockquote><p id="1a60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">变成这样:</p><blockquote class="lv lw lx"><p id="dcd9" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><em class="it">:speaking _ head:@ gambling podcast \ n:rocket:@ the SGP network:handshake:@ bluewirepods \ n \ n # together blue | # Hokies:turkey:| # bit coin \ n \ n投资人名下的1H \ n:movie _ camera:</em></p></blockquote><p id="04a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你问这是哪个图书馆？当然是为什么表情符号😁。</p><h1 id="8a41" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">如何使用<a class="ae ky" href="https://pypi.org/project/emoji/" rel="noopener ugc nofollow" target="_blank">表情符号</a></h1><h1 id="d282" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">装置</h1><p id="5997" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">安装<code class="fe mz na nb nc b">emoji</code>再简单不过了:</p><p id="a0fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">$ pip install emoji</code></p><p id="9f4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦安装完毕，我们就可以探索它的功能了。</p><h1 id="4ea7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">基本使用案例</h1><p id="90f3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">虽然你可以像这样把短代码转换成表情符号:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="f81f" class="nh md it nc b gy ni nj l nk nl">result = emoji.emojize('Python is the :bomb:')<br/>print(result)</span><span id="7200" class="nh md it nc b gy nm nj l nk nl">Python is the 💣</span></pre><p id="e6b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个库的真正价值是将表情符号转换成短代码，如下所示:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="c635" class="nh md it nc b gy ni nj l nk nl">result = emoji.demojize('Python is the 💣')<br/>print(result)</span><span id="f9f4" class="nh md it nc b gy nm nj l nk nl">'Python is the :bomb:'</span></pre><p id="b983" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用于清洁、过滤和/或将来的分析。</p><h1 id="317a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">英语以外的语言</h1><p id="cd00" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如文档中所述，默认语言是英语，但它也支持以下欧洲语言:德语、葡萄牙语、意大利语、法语和西班牙语。Por ejemplo:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="99fa" class="nh md it nc b gy ni nj l nk nl">result = emoji.demojize('Python es la 💣', language='es')<br/>print(result)</span><span id="15da" class="nh md it nc b gy nm nj l nk nl">Python es la :bomba:</span></pre><p id="a9a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我知道你在想什么了:</p><blockquote class="lv lw lx"><p id="fd22" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">“我如何清洗整个熊猫系列？”</p></blockquote><p id="75cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谢谢你的关心。</p><h1 id="f814" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">清洁熊猫系列</h1><p id="af1e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">假设你有一个熊猫系列，如下图所示:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="620f" class="nh md it nc b gy ni nj l nk nl">sentences = ["I want a 🍔", "I don't want a 🍔",<br/>             "I ❤️ 🍔", "I 💩 🍔", "I am 💩 ⚽"]</span><span id="d404" class="nh md it nc b gy nm nj l nk nl">pd.Series(sentences)</span><span id="5719" class="nh md it nc b gy nm nj l nk nl">0 I want a 🍔<br/>1 I don't want a 🍔 <br/>2 I ❤️ 🍔 <br/>3 I 💩 🍔 <br/>4 I am 💩 ⚽</span></pre><p id="b9fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要用短代码替换表情符号，你只需像这样在lambda函数中传递<code class="fe mz na nb nc b">emoji.demojize()</code>:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="db39" class="nh md it nc b gy ni nj l nk nl">pd.Series(sentences).apply(lambda x: emoji.demojize(x))</span></pre><p id="46f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于我们的玩具示例，您将获得期望的输出:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="0dc6" class="nh md it nc b gy ni nj l nk nl">0 I want a :hamburger: <br/>1 I don't want a :hamburger: <br/>2 I :red_heart: :hamburger: <br/>3 I :pile_of_poo: :hamburger: <br/>4 I am :pile_of_poo: :soccer_ball:</span></pre><p id="5093" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，<a class="ae ky" href="https://pevansimpson.medium.com/building-custom-datasets-with-beautiful-soup-d037f14c469d" rel="noopener">生活不是一场小马秀</a>，所以我们不能确定<code class="fe mz na nb nc b">pd.Series</code>中的每一条记录都包含像上面玩具例子中的文本。例如，如果我们的<code class="fe mz na nb nc b">pd.Series</code>包含一个像这样的<code class="fe mz na nb nc b">Nan</code>值:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="9ede" class="nh md it nc b gy ni nj l nk nl">sentences = ["I want a 🍔", "I don't want a 🍔",<br/>             "I ❤️ 🍔", "I 💩 🍔", "I am 💩 ⚽, np.nan"]</span><span id="1e75" class="nh md it nc b gy nm nj l nk nl">pd.Series(sentences)</span><span id="e2ba" class="nh md it nc b gy nm nj l nk nl">0 I want a 🍔<br/>1 I don't want a 🍔 <br/>2 I ❤️ 🍔 <br/>3 I 💩 🍔 <br/>4 I am 💩 ⚽<br/>5 NaN</span></pre><p id="89ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将得到以下错误:</p><p id="8fff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">TypeError: object of type ‘float' has no len()</code></p><p id="6c17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，我们需要一种方法来处理<code class="fe mz na nb nc b">NaN</code>值，尽管我毫不怀疑还有其他更简洁/高效/python式的方法来处理这个问题(如果你知道其中一个，请在评论中留下)，下面概述的方法对我来说很有效，而且非常简单。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="5e42" class="nh md it nc b gy ni nj l nk nl">def emoji_to_text(text):<br/>    if type(text) != float:<br/>        return emoji_cleaner(text)<br/>    else:<br/>        return text</span></pre><p id="50d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简单地说，只要我们系列中的值不是浮点数(这就是<code class="fe mz na nb nc b">NaN</code>值)，我们就是好的。</p><p id="acdb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们将我们的<code class="fe mz na nb nc b">emoji_to_text()</code>函数传递给<code class="fe mz na nb nc b">pd.apply()</code>来创建一个新的<code class="fe mz na nb nc b"> pd.Series</code>:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="36a4" class="nh md it nc b gy ni nj l nk nl">pd.Series.apply(emoji_to_text)</span></pre><p id="15ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">瞧啊。你现在有了一个<code class="fe mz na nb nc b">pd.Series</code>，每个表情符号都被替换成了相应的短代码。</p><blockquote class="lv lw lx"><p id="df93" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">太好了，我正在处理一个数据框架。我该怎么办？</p></blockquote><p id="1f8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">哦，那真的很简单！</p><p id="8670" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需在您的<code class="fe mz na nb nc b">pd.DataFrame</code>中想要转换的列上调用<code class="fe mz na nb nc b">apply()</code>，并将输出保存到一个新列，如下所示:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="f0a4" class="nh md it nc b gy ni nj l nk nl">df['clean_sentences'] = df['sentences'].apply(cleaner)</span></pre><h1 id="5283" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结束语</h1><p id="e995" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果是做社交媒体帖子的文字分析，遇到表情符号的可能性接近100%。因此，拥有一个能够快速、轻松地将它们转换成可用文本的工具是至关重要的。</p><p id="8bd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，<code class="fe mz na nb nc b">emoji</code>库就是这样一个工具。</p></div></div>    
</body>
</html>