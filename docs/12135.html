<html>
<head>
<title>React “Polymorphic Components” With TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用类型脚本反应“多态组件”</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/react-polymorphic-components-with-typescript-real-practice-example-94c8a205d079?source=collection_archive---------0-----------------------#2022-05-14">https://betterprogramming.pub/react-polymorphic-components-with-typescript-real-practice-example-94c8a205d079?source=collection_archive---------0-----------------------#2022-05-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3e7b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一个真实的实践例子</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6d9c36b36cf80066badee73dce7a9013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6vN110Ofa8VvNB05rngR-w.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">(来源:<a class="ae kv" href="https://www.pexels.com/" rel="noopener ugc nofollow" target="_blank"><strong class="bd kw">pexels.com</strong></a>)</p></figure><p id="73f0" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在本文中，我们将学习如何在React中实现多态组件。此外，我们将根据我们想要呈现的元素类型对我们的道具进行强类型化。在我们的例子中，我们将创建一个多态按钮<em class="lt">。</em></p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="070e" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">那么什么是‘多态成分’呢？</h1><p id="dfea" class="pw-post-body-paragraph kx ky iq kz b la mt jr lc ld mu ju lf lg mv li lj lk mw lm ln lo mx lq lr ls ij bi translated">简而言之，它是一个组件，让我们指定想要使用哪个React元素作为它的根。如果你用过一些UI库，比如<a class="ae kv" href="https://mui.com/material-ui/api/button-base/#props" rel="noopener ugc nofollow" target="_blank"> <strong class="kz ir"> Material UI </strong> </a>，你就已经遇到多态组件了。</p><blockquote class="my mz na"><p id="bd5b" class="kx ky lt kz b la lb jr lc ld le ju lf nb lh li lj nc ll lm ln nd lp lq lr ls ij bi translated">例如，MUI有一个<a class="ae kv" href="https://mui.com/material-ui/react-typography/" rel="noopener ugc nofollow" target="_blank">“排版”</a>，它能够为根节点呈现任何HTML元素。这是一个非常强大的想法，给了我们更健壮和可重用的组件。</p></blockquote><h1 id="a602" class="mb mc iq bd md me ne mg mh mi nf mk ml jw ng jx mn jz nh ka mp kc ni kd mr ms bi translated">我们想要达到的结果</h1><p id="a55a" class="pw-post-body-paragraph kx ky iq kz b la mt jr lc ld mu ju lf lg mv li lj lk mw lm ln lo mx lq lr ls ij bi translated">我们想要创建一个按钮，它将能够主要表现为一个普通的按钮、锚和反应路由器链接(或者任何其他HTML标签|组件，取决于您的需求)。此外，我们希望有所有需要的打字。比如平常的按钮有“type”属性，没有“href”，但是锚按钮有相反的道具。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们的使用案例</p></figure><p id="37dd" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这段代码向我们展示了如何使用我们的按钮。</p><h1 id="3fbe" class="mb mc iq bd md me ne mg mh mi nf mk ml jw ng jx mn jz nh ka mp kc ni kd mr ms bi translated">制作我们的组件</h1><p id="80d8" class="pw-post-body-paragraph kx ky iq kz b la mt jr lc ld mu ju lf lg mv li lj lk mw lm ln lo mx lq lr ls ij bi translated">让我们创建名为<code class="fe nl nm nn no b">Button.tsx</code>的文件，并定义基本的react组件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">没什么特别的，只是基本组件</p></figure><p id="8af6" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">那么，我们应该做些什么来为按钮支持多种类型的HTML元素呢？我们可以通过定义属性“as”来实现这一点，它将是<code class="fe nl nm nn no b">React.ElementType</code> <strong class="kz ir"> </strong>的类型，然后使用它来呈现我们的根元素。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">现在我们的组件是多态的</p></figure><blockquote class="my mz na"><p id="c076" class="kx ky lt kz b la lb jr lc ld le ju lf nb lh li lj nc ll lm ln nd lp lq lr ls ij bi translated">注意，我们必须将“Tag”大写，否则它将被视为一个普通的HTML元素<tag/>。</p></blockquote><p id="7af8" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">现在我们有了一个多态按钮，但是我们没有任何用于各种“as”值的属性类型。但是，如果它们依赖于动态“as”prop，我们将如何得到它们呢？</p><p id="b6a9" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这就是我们应该使用<a class="ae kv" href="https://www.digitalocean.com/community/tutorials/how-to-use-generics-in-typescript" rel="noopener ugc nofollow" target="_blank">类型脚本泛型</a>来正确键入所有内容的确切情况。因此，让我们尝试编写一些更高级的类型。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">自有道具类型</p></figure><p id="7d35" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们已经创建了一个新的类型<code class="fe nl nm nn no b">ButtonOwnProps</code>包含按钮基础道具。此外，它使用泛型<code class="fe nl nm nn no b">E</code>，后者扩展了<code class="fe nl nm nn no b">React.ElementType</code>，并为‘as’赋值。</p><p id="76bc" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">接下来，我们应该创建一个名为<code class="fe nl nm nn no b">ButtonProps</code>的类型，它将我们的基础道具与通用元素道具结合在一起。</p><p id="d65d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">此外，我们应该从已经在基类中声明的泛型组件中排除props。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">拥有的属性与通用组件类型的属性联合</p></figure><p id="a4fe" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在第一行，没有什么特别的事情发生。我们声明了一个类型，它接收扩展了<code class="fe nl nm nn no b">React.ElementType</code>的泛型<code class="fe nl nm nn no b">E</code>。</p><p id="bd4f" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在第二行中，我们只是将其传递给我们的基础道具以获得正确的<code class="fe nl nm nn no b">as</code>类型。</p><p id="9ea8" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在第三行中，我们省略了通用组件的所有属性，这些属性已经存在于我们的<code class="fe nl nm nn no b">ButtonOwnProps</code>中。</p><h1 id="92b7" class="mb mc iq bd md me ne mg mh mi nf mk ml jw ng jx mn jz nh ka mp kc ni kd mr ms bi translated">决赛成绩</h1><p id="764c" class="pw-post-body-paragraph kx ky iq kz b la mt jr lc ld mu ju lf lg mv li lj lk mw lm ln lo mx lq lr ls ij bi translated">最后，我们需要将泛型传递给我们的<code class="fe nl nm nn no b">ButtonProps</code>类型，并给它一个默认值。因此，最终的组件将如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">现在我们的按钮组件终于完成了</p></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><div class="kg kh ki kj gt np"><a href="https://javascript.plainenglish.io/how-to-become-frontend-dev-in-4-months-ec3f61576251" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd ir gy z fp nu fr fs nv fu fw ip bi translated">如何在4个月内成为前端开发人员</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">寿命测试指南</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od kp np"/></div></div></a></div><div class="oe of gp gr og np"><a href="https://javascript.plainenglish.io/5-react-usestate-mistakes-that-will-get-you-fired-b342289debfe" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd ir gy z fp nu fr fs nv fu fw ip bi translated">对那些会让你被解雇的错误做出反应</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">5种常见的反应使用状态错误以及如何避免它们</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ny l"><div class="oh l oa ob oc ny od kp np"/></div></div></a></div><div class="oe of gp gr og np"><a href="https://javascript.plainenglish.io/frontend-architectures-classic-approach-no-architecture-d3c839e46403" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd ir gy z fp nu fr fs nv fu fw ip bi translated">前端架构:“经典”方法(无架构)</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">了解最常见前端架构的优缺点</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ny l"><div class="oi l oa ob oc ny od kp np"/></div></div></a></div><p id="e98a" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">本文到此为止。现在我们的<code class="fe nl nm nn no b">Button</code>组件已经可以使用了。</p><p id="7c52" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我希望你喜欢这篇文章，我能够给你一些新的东西。如果你有任何问题或建议，请写在评论里。</p><p id="37c3" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">祝你好运！</p></div></div>    
</body>
</html>