<html>
<head>
<title>The Day I Wrote My First npm Utility Module</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我写第一个npm实用模块的那一天</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-day-i-wrote-my-first-npm-utility-module-74b8098df003?source=collection_archive---------9-----------------------#2019-10-18">https://betterprogramming.pub/the-day-i-wrote-my-first-npm-utility-module-74b8098df003?source=collection_archive---------9-----------------------#2019-10-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fcab" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个关于编码的不简单的故事</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/50caf91faf864e4be66c688acadc7abc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iXrsFUOxDoGN8v-8ff4vCw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/photos/NZ-K01i0Hmo?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">保罗·吉尔摩</a>在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="c6e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文原载<a class="ae ky" href="https://www.24joursdeweb.fr/2018/le-periple-vers-mon-premier-module-utilitaire-npm/" rel="noopener ugc nofollow" target="_blank">法文</a>。由于我是一个很好的拖延者，我决定一年后把它翻译成英文。快乐阅读！</p><p id="87f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时候，我会问自己:“这些人是如何为JavaScript社区发布这么好的实用程序的？”</p><p id="6329" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的，怎么做？答案很简单。他们没有在互联网上长长的npm模块列表或其他库中找到他们想要的东西。所以，他们决定把手伸进泥土里，自己编码。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0a11" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">从一个简单的方法开始</h1><p id="953b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这个故事开始于我测量我的一个网页的性能。我试图列出代码中的瓶颈，以及如何修复导致我的页面出现灾难性性能的模式。</p><p id="a6d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从页面上，我跳到了一个React组件。然后，从组件开始，我跳到了实现。而且从实现开始，我就开始写一点函数提取一些逻辑。</p><p id="8595" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，一切都失控了…</p><p id="6fd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的问题是我想检查一个字符串值是否代表一个“数字”。</p><p id="fae8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们深入了解一下:</p><ul class=""><li id="0822" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">字符串值:这意味着传递给函数的参数应该是一个<code class="fe ni nj nk nl b">string</code>类型。</li><li id="dcee" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated">数字:在JavaScript中，<code class="fe ni nj nk nl b">number</code>是一个原语，许多符号可以返回一个<code class="fe ni nj nk nl b">number</code>——指数符号、十六进制基数，或者使用<a class="ae ky" href="https://medium.com/@nikjohn/cast-to-number-in-javascript-using-the-unary-operator-f4ca67c792ce" rel="noopener">一元(+)运算符</a>。我选择关注用固定记数法(熟悉的记数法)和十进制数书写的数字。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">可以返回“数字”的符号示例。</p></figure><p id="a68c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在网上做了些调查。看看过去的<code class="fe ni nj nk nl b"><a class="ae ky" href="https://api.jquery.com/jQuery.isNumeric/" rel="noopener ugc nofollow" target="_blank">jQuery.isNumeric</a></code>。或者伟大的<code class="fe ni nj nk nl b"><a class="ae ky" href="https://www.npmjs.com/package/is-number" rel="noopener ugc nofollow" target="_blank">is-number</a></code>模块。或者其他一些关于堆栈溢出的问题。</p><p id="20a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我看了看我能用全局顶级<code class="fe ni nj nk nl b"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseFloat" rel="noopener ugc nofollow" target="_blank">parseFloat</a></code>函数编码什么。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1cbd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">跳转到npm模块</h1><p id="fa57" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我写了一个似乎适合我的用例的简短函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><ul class=""><li id="1c99" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated"><code class="fe ni nj nk nl b">parseFloat</code>函数帮助我摆脱了每一个不是<code class="fe ni nj nk nl b">number</code>或<code class="fe ni nj nk nl b">string</code>的参数。例如，对于一个数组或函数，它返回<code class="fe ni nj nk nl b">NaN</code>。我的第一部<em class="nt"> </em>《提前归来》处理了所有这些案件。</li><li id="560f" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated">第二次“提前归还”处理了环球地产的案子<code class="fe ni nj nk nl b">Infinity</code>。</li><li id="2acd" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated">最终相等检查传递的参数是否严格等于被转换为<code class="fe ni nj nk nl b">number</code>的参数。这个检查处理了带有<code class="fe ni nj nk nl b">string</code>输入的科学指数符号的情况:<code class="fe ni nj nk nl b">'42'</code>将匹配，但是<code class="fe ni nj nk nl b">'42e4'</code>不匹配。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b36f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">模块的第一步</h1><p id="ebd8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">然后，我就在想这个助手函数放在哪里。我的组件中的某个地方—作为一个实例方法？这样我就可以在另一个组件中使用它了。</p><p id="37ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我如此渴望使用那种助手功能，其他一些前端开发人员也应该有。也可能不是。</p><p id="764c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我意识到，我自己可以在许多其他项目中使用这个功能。所以，我决定完全提取这个函数并<a class="ae ky" href="https://docs.npmjs.com/creating-node-js-modules" rel="noopener ugc nofollow" target="_blank">创建一个npm模块</a>。天真地，我认为模块的代码几乎准备好了，因为它服务于我的项目的目的。剧透警告:我错了。</p><p id="9454" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我决定调用模块<code class="fe ni nj nk nl b">is-plain-number</code>，因为它是一个<em class="nt">谓词函数</em> <strong class="lb iu"> </strong>，检查一个值是否是一个<em class="nt">“普通的”</em>、简单的<em class="nt"> </em>数字，也就是用固定符号和十进制基数写成的“<em class="nt">”。</em></p><p id="0719" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，我发布了模块的<a class="ae ky" href="https://www.npmjs.com/package/is-plain-number" rel="noopener ugc nofollow" target="_blank">第一版:</a></p><ul class=""><li id="6976" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">没有依赖性，因为模块只是一个函数。</li><li id="3a47" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated">一个测试套件，描述了我想要涵盖的所有用例。</li><li id="ed15" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated">一个可靠的自述文件，帮助其他开发人员快速有效地理解该模块的内容。</li></ul><p id="514c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这三点对我来说非常重要。显然，它们对使用我的模块的人很有用。但是，更重要的是，他们帮助我理解我自己的代码，解释它，挑战它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">自述文件中“is-plain-number”模块的一些代码示例。</p></figure><p id="8f5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，重读模块后，我被它的名字和它的测试套件所困扰。当你考虑命名一个实用程序时，你必须考虑它的目的，尤其是它应该包含的所有用例。所以，你也要想好考什么。</p><p id="f4b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个功能的目的是什么？</p><p id="b9ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那一刻，我彻底重新考虑了<code class="fe ni nj nk nl b"><a class="ae ky" href="https://www.npmjs.com/package/is-plain-number" rel="noopener ugc nofollow" target="_blank">is-plain-number</a></code>模块。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="255b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">模块的新版本</h1><p id="60d6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">正如我之前所说，我个人的用例是检查一个<code class="fe ni nj nk nl b">string</code>值是否是一个用固定符号和十进制表示的数字。这就是我错过了语言中非常重要的一点:</p><p id="b90a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“用固定记数法和十进制写”是什么意思？我对用JavaScript显示数字了解多少？</p><p id="d9c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们回到我的函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="874b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该函数的最后一行是强制转换为<code class="fe ni nj nk nl b">string</code>的<code class="fe ni nj nk nl b">number</code>(从<code class="fe ni nj nk nl b">parseFloat</code>返回)和传递给该函数的也强制转换为<code class="fe ni nj nk nl b">string</code>的参数之间的严格等式。</p><p id="ac66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过这个实现，我的意图是抛弃科学符号:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">耶！当参数类型是以科学指数表示法编写的字符串时，我的模块返回“false”。</p></figure><p id="24b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，这只适用于<code class="fe ni nj nk nl b">string</code>参数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">༼ つ ಥ_ಥ ༽つ:哦，不！当参数类型是用科学指数表示法写的数字时，我的模块返回“true”。</p></figure><p id="e017" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">起初，我没有抓住我错过的有<code class="fe ni nj nk nl b">number</code>论据的案例。在JavaScript中，<code class="fe ni nj nk nl b">number</code>值以二进制浮点存储，但其输出主要是十进制和固定记数法。</p><p id="222d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">语言的这一方面让我意识到，如果值是一个<code class="fe ni nj nk nl b">number</code>，就没有办法知道原始输入是否是以科学指数记数法的十六进制为基础编写的。</p><p id="35a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种对语言的误读指出了我的模块的不一致性:它返回了用不同于固定记数法或不同于十进制记数法编写的<code class="fe ni nj nk nl b">number</code>的<code class="fe ni nj nk nl b">true</code>。但是，对于参数为<code class="fe ni nj nk nl b">string</code>的完全相同的情况，它返回<code class="fe ni nj nk nl b">false</code>。</p><p id="6abb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你知道吗？我不喜欢前后矛盾。</p><p id="79ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我回到了最初的需求，选择放弃带有参数为<code class="fe ni nj nk nl b">number</code>的案例，并编写了一个新的模块:<a class="ae ky" href="https://www.npmjs.com/package/is-string-a-number" rel="noopener ugc nofollow" target="_blank"> is-string-a-number </a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们可以看到“普通数字”模块和“字符串数字”模块之间的区别。</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b42b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">边缘案例</h1><p id="5cf1" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">有了这些新知识，我没有想到的其他问题就出现了。</p><p id="06ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后的<code class="fe ni nj nk nl b">string</code>严格平等仍在实施<code class="fe ni nj nk nl b">is-string-a-number</code>:</p><pre class="kj kk kl km gt nu nl nv nw aw nx bi"><span id="2b0e" class="ny md it nl b gy nz oa l ob oc">return String(float) === String(value)</span></pre><p id="dc95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，我发现，<code class="fe ni nj nk nl b">number</code>的输出主要是固定记数法，但有时也可能是指数记数法。因此，对于我想要处理的所有情况，我的严格等式不返回<code class="fe ni nj nk nl b">true</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">\_(ツ)_/是我的严格平等不起作用的新案例！</p></figure><p id="c08c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的，我的模块不能处理大于T5的T4数字和以T6开头后面跟五个以上零的数字。</p><p id="23ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了理解这个问题，我将让您阅读Axel Rauschmayer的非常好的文章中用于在JavaScript中显示数字的算法。与此同时，我还在考虑如何处理这个问题。</p><p id="96aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，我对大数字也有异议。ECMAScript标准只有一种类型的数字:<a class="ae ky" href="http://2ality.com/2012/04/number-encoding.html" rel="noopener ugc nofollow" target="_blank"> 64位浮点数</a>。大整数(现在从TC39提案中称为<a class="ae ky" href="https://github.com/tc39/proposal-bigint" rel="noopener ugc nofollow" target="_blank"> <em class="nt"> BigInt </em>)不能全部用这种类型表示。</a></p><p id="5fab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前，我选择不处理它:模块不能处理大整数，仅此而已。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0dd3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">你对你的模块还满意吗？</h1><p id="ad8a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在这个漫长而不完整的旅程之后，你可能会怀疑我是否还能适应我编写的模块。我可以非常自信地回答:</p><p id="dd0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的。</p><p id="755b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的，因为，我告诉你的这几个步骤只是开始。我可以迭代边缘案例。最重要的是，我学到了很多，很多，很多。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7249" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">撰写好的自述文件</h1><p id="b2fd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这一点我怎么说都不为过:好的读物是至关重要的。他们帮助用户快速理解你的模块的范围，以及它到底能不能满足他们的需求。</p><p id="5ead" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我花了很多时间写<code class="fe ni nj nk nl b">is-string-a-number</code>的自述，尤其是动机部分。这让我明白了为什么我认为我的模块是有用的。</p><p id="b65e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这完全是主观的，也许我错了。但是，至少，我解释了上下文，如果其他开发人员不同意，他们可以用这些信息来帮助或挑战我。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3b32" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">编写一整套测试</h1><p id="4be4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">当然，用我小小的函数，我写了一组测试。这些测试几乎检查了我可以传递给函数的每一种可能的值。</p><p id="4fb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有趣的是，我第一次写它们的时候——在编写我的模块的第一个版本的时候，我已经感觉到有些东西不一致了。</p><p id="59dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试是检查<code class="fe ni nj nk nl b">'42e24'</code>返回<code class="fe ni nj nk nl b">false</code>而<code class="fe ni nj nk nl b">42e24</code>返回<code class="fe ni nj nk nl b">true</code>。向代码气味问好…</p><p id="8c01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果测试的不是正确的事情，不是你真正想做的事情，那么测试就不是好的。这就是我如何结束重写模块。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9069" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">挑战你自己的代码</h1><blockquote class="od"><p id="55e7" class="oe of it bd og oh oi oj ok ol om lu dk translated">"当有疑问时，就没有疑问了。"索莱娜·马特</p></blockquote><p id="b5e6" class="pw-post-body-paragraph kz la it lb b lc on ju le lf oo jx lh li op lk ll lm oq lo lp lq or ls lt lu im bi translated">因为我觉得我的模块的目的对我来说不够清楚，而且我错过了关于语言的一些非常重要的东西，我停止了编码，开始阅读大量关于JavaScript中的数字。</p><p id="2884" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢Axel Rauschmayer的博客，我了解了很多关于数字的知识:它们是如何显示的，它们是如何编码的，甚至是零的含义。</p><p id="7c56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些知识帮助我定义了我的模块的边界:</p><ul class=""><li id="e409" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">它能处理什么。</li><li id="5395" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated">为什么会这样，为什么不会。</li><li id="576f" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated">我能改进的地方。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="42d8" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">出版</h1><p id="8086" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我认为在编码和共享一个库之前做一些研究是很重要的，即使它很小。我们不需要重新发明轮子。有些人在我们之前做得很好。</p><p id="d9f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谦逊的态度对于观察案例和其他人已经解决的问题很重要。</p><p id="926e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，这不应该阻止我们尝试和创造新事物。如果一段代码对我们有用，即使我们是它的唯一用户，它也是值得的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="69c5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="69c4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">用开源库为JavaScript社区做贡献对我来说是一次很棒的经历。如果你有一个以前没有探索过的想法，或者不是以你看到的方式的想法，征求意见，三思而后行，然后尝试发布你自己的模块！</p><p id="7760" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，也许像我一样，你会发现你的模块中有很多漏洞，但这正是开源领域如此丰富的原因:它建立在经验和合作的基础上。</p><p id="e394" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nt">感谢Sunny Ripert的再次阅读，感谢Florent DUVEAU和24 jours de web团队的支持！</em></p></div></div>    
</body>
</html>