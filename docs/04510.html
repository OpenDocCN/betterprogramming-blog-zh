<html>
<head>
<title>Create a Telegram Bot With Jovo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Jovo创建一个电报机器人</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-a-telegram-bot-with-jovo-6a1250e53427?source=collection_archive---------10-----------------------#2020-04-17">https://betterprogramming.pub/create-a-telegram-bot-with-jovo-6a1250e53427?source=collection_archive---------10-----------------------#2020-04-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e64c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们建立一个基于Jovo的电报机器人</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1fcade82348ef8a6bcfe59314e6430d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IJof5qPLsa8CHv2CkP5fXw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">克里斯蒂安·威迪格在<a class="ae kv" href="https://unsplash.com/photos/GWkioAj5aB4" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="a53d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Telegram是一个流行的在线消息应用程序，就像WhatsApp和Facebook Messenger一样。关于Telegram有一件事引起了我的注意，那就是在<a class="ae kv" href="https://core.telegram.org/bots" rel="noopener ugc nofollow" target="_blank">机器人父亲</a>的指导下，用一些简单的命令建立一个机器人并让它运行起来是多么容易。正如Telegram所描述的:</p><blockquote class="ls lt lu"><p id="c11a" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">机器人父亲是统治他们所有人的机器人。它将帮助您创建新的机器人和改变现有的设置。</p></blockquote><p id="40d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么，我们如何创建我们的电报机器人呢？我们开始吧！</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="680e" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">创建电报帐户</h1><p id="4843" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">在您创建帐户之前，您需要下载Telegram应用程序。请点击以下链接从您喜欢的商店下载:</p><ul class=""><li id="074b" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated"><a class="ae kv" href="https://play.google.com/store/apps/details?id=org.telegram.messenger&amp;hl=en" rel="noopener ugc nofollow" target="_blank">谷歌Play商店</a></li><li id="9d3e" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><a class="ae kv" href="https://apps.apple.com/us/app/telegram-messenger/id686449807" rel="noopener ugc nofollow" target="_blank">苹果商店</a></li></ul><p id="6054" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装完成后，打开你的浏览器，进入<a class="ae kv" href="https://web.telegram.org/" rel="noopener ugc nofollow" target="_blank">https://web.telegram.org/</a>。输入您的国家和电话号码，然后单击“下一步”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/aa1806b2b384aa2be8f87ef85a9a7d8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4J7toq3lNvTG1-QwEm2EdA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">电报签到屏幕</p></figure><p id="9c32" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它会要求您确认您的号码。单击“确定”。该代码将被发送到您的手机上—复制并粘贴它以进行确认。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/f9852f8efcf40d27d53f35bae184b66f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c300R2viVzCm2Y3eB92APQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">确认代码</p></figure><p id="d353" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">确认代码后，您就可以开始使用Telegram了。在Android手机上，屏幕看起来像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/aed4a925b5c2f47b23d0e9027e9a57ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*z-A8KZBHYtDnATUvpAsHMw.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Android手机上的电报主屏幕</p></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="27ed" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">创建一个电报机器人</h1><p id="c6ea" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">正如你在上面的图片中看到的，我已经和机器人父亲聊天了，因为我之前已经创建了一个机器人。新冠肺炎追踪器机器人。你可以通过点击屏幕右上方的搜索按钮并输入“机器人父亲”来找到机器人父亲这将是第一个结果。</p><p id="3180" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击它并开始设置你的机器人:</p><ul class=""><li id="23c9" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated">点击屏幕底部的“开始”按钮。你会得到一堆命令，作为与机器人父亲对话的指令。</li><li id="9774" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">键入“/new bot”<strong class="ky ir"/>开始设置您的第一个机器人。</li><li id="4113" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">为您的机器人键入一个名称。</li><li id="28b1" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">最后，输入你的机器人的用户名。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/1945f79a46b7943151d763e74b4fabf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MhIqOv7FFm8-ORVsuoxqQA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">设置您的第一个电报机器人</p></figure><p id="fd69" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">复制上一步中的令牌—我们将在下一节中使用它。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="58eb" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">将您的Bot连接到Dialogflow</h1><p id="bdac" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">Dialogflow是最流行的自然语言理解引擎之一。你可以从谷歌助手、Facebook Messenger、Slack、Twitter、Skype、Telegram等平台连接机器人。</p><p id="adca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要做的第一件事是为我们的机器人创建一个新的代理。在左侧面板中，单击“创建新代理”菜单，并为您的代理命名。然后点击“创建”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/429dae33c3916ee2f6e41c0dba2ad643.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GKWHrBG7meVolM9LvlmpcA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建对话流代理</p></figure><p id="4823" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，进入“集成”菜单，找到“电报”平台并点击它。在会弹出的对话框中，输入你在BotFather中设置bot时得到的令牌，点击“开始”。然后点击“关闭”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/eaecc90ca44d9980d2fb4805ae00fda1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tpto9FHq7-LfuPHbyQ9lZQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/ad37d31367e506fe4e426a23d8d2fcb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YTHjO5ySl0zGLutzSP9yKg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">输入来自机器人父亲的令牌</p></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="e800" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">运行一个Jovo项目来管理对话</h1><p id="c163" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated"><a class="ae kv" href="https://www.jovo.tech/" rel="noopener ugc nofollow" target="_blank"> Jovo </a>是一个跨平台的框架，你可以使用它来构建和运行跨设备和平台的语音体验，包括亚马逊Alexa、谷歌助手、手机、Raspberry Pi等等。它还可以轻松连接到Facebook Messenger、Slack、Telegram等bot平台。</p><p id="0746" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">既然我们已经准备好与bot对话，并且Dialogflow代理理解对话，我们需要捕捉用户所说的意图并返回响应。我准备了一个简单的TelegramJovoHelloWorld项目，您可以将其用作您的bot的模板。继续克隆<a class="ae kv" href="https://github.com/omenocal/TelegramJovoHelloWorld" rel="noopener ugc nofollow" target="_blank">库</a>。</p><p id="969d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你是Jovo的新手，我推荐你去看看他们为新手准备的<a class="ae kv" href="https://www.jovo.tech/courses/project-1-hello-world" rel="noopener ugc nofollow" target="_blank"> HelloWorld </a>项目。</p><p id="0c26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下假设您熟悉Jovo项目结构。我们需要做的第一件事是创建要在Dialogflow中恢复的Dialogflow代理zip文件。为此，运行以下命令:<code class="fe ny nz oa ob b">jovo deploy</code>。</p><p id="7dc6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该命令只会在项目的以下路径中创建代理的zip文件:/platforms/Google action/dialog flow _ agent . zip。</p><p id="d21b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">转到Dialogflow代理，单击“设置”，单击“导出和导入”选项卡，然后单击“从ZIP还原”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/7f46da6878d50b807d6fa23ba0948266.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OVoz___cLCI9Gy0AglUtFw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">从zip文件恢复</p></figure><p id="7abc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上传您的zip文件，在文本框中键入“恢复”以确认操作，然后单击“恢复”按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/570169eecd6bf6ccfa7d12d1becea44e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ky8rfl0UEVzl2JEa8Ulbgw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">确认恢复操作</p></figure><p id="79ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将Dialogflow连接到我们的Jovo项目的最后一步是添加一个履行URL。在您的计算机中，转到终端窗口并运行以下命令:</p><pre class="kg kh ki kj gt oe ob of og aw oh bi"><span id="087f" class="oi mh iq ob b gy oj ok l ol om">npm install / yarn install</span><span id="ed8a" class="oi mh iq ob b gy on ok l ol om">jovo run -w</span></pre><p id="b8a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您没有安装Jovo-CLI，您可以运行:</p><pre class="kg kh ki kj gt oe ob of og aw oh bi"><span id="52c2" class="oi mh iq ob b gy oj ok l ol om">npm install -g jovo-cli</span></pre><p id="f607" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您的服务器正在运行时，您会在终端窗口中看到您本地机器的Jovo URL:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/6f285e1b2353167470eb3ec1929a3cf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4T_cpN15Rpod_HKAV3aaUg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在你的终端窗口中运行你的Jovo项目</p></figure><p id="11dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">复制此URL，然后在左侧面板的Dialogflow代理中，转到Fulfillment，启用Webhook设置，并粘贴您的服务器的URL。在页面底部，单击“保存”按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/9efbb233db1b02d39cb49f5dc10cb637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FKQ_7PoPb7CkbRZ2k8ai2Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">对话流代理实现</p></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="aece" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">最后的话</h1><p id="3d9c" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">在这一点上，你应该能够和你的电报机器人说话，并问:“你好吗？”它会回复:“谢谢你的询问。我过得很好，你呢？”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/3ae8ec816e7e42c42bb979a82fbda135.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*9Nn1cXstvrAp98VzWVupzw.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">电报机器人对话示例</p></figure><p id="2785" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以把你的Jovo项目放在你自己的服务器上，或者如果对你来说更容易的话，你可以把它保存在Google Cloud或者AWS上。一旦你完成了你的项目，你就可以用你的机器人的电报网址与其他人分享。例如:</p><p id="e7eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ny nz oa ob b"><a class="ae kv" href="http://t.me/JovoTestBot" rel="noopener ugc nofollow" target="_blank">http://t.me/JovoTestBot</a></code></p><p id="dbf3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我在这篇文章中创建的机器人的URL。如果你测试它，它不会总是工作，因为我没有让我的服务器一直在我的机器上运行！</p></div></div>    
</body>
</html>