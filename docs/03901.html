<html>
<head>
<title>5 Ways to Open and Read Your Dataset Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python打开和读取数据集的5种方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-ways-to-open-and-read-your-dataset-using-python-780770199776?source=collection_archive---------7-----------------------#2020-03-11">https://betterprogramming.pub/5-ways-to-open-and-read-your-dataset-using-python-780770199776?source=collection_archive---------7-----------------------#2020-03-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1349" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">不同目的的不同方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ffc64eb393ca8b5c221b19869da38398.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LIHcNJYRB9gfJriu"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="e73a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据分析过程的第一步是什么？我相信首先你要打开数据集来获取数据。如果使用Tableau，那么它会执行大部分检测文件类型、数据类型、分隔符和编码的工作。但是如果直接在Jupyter工作应该怎么进行呢？</p><p id="afb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据分析的目的和文档的类型，有几种打开数据集的方法。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0f88" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.用于自定义分析的自定义文件</h1><p id="0ea4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">处理原始或未准备好的数据是一种常见的情况。嗯，为进一步分析或建模准备数据集是数据科学家工作的一个阶段。没有友好的CSV格式，没有结构，自定义分隔符等。这就是为什么掌握有关原生Python文件功能的技能非常重要。</p><p id="b854" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们有<a class="ae ky" href="https://archive.ics.uci.edu/ml/datasets/sms+spam+collection" rel="noopener ugc nofollow" target="_blank">一个针对<a class="ae ky" href="https://towardsdatascience.com/comparing-a-variety-of-naive-bayes-classification-algorithms-fc5fa298379e" rel="noopener" target="_blank">垃圾邮件检测</a> <a class="ae ky" href="https://towardsdatascience.com/how-to-build-and-apply-naive-bayes-classification-for-spam-filtering-2b8d3308501" rel="noopener" target="_blank">算法</a>的短信数据集</a>。但是所有的信息都有标点符号，不同的单词大小写，还有一些问题。因此，我们的任务是将每条消息转换成一组标记或至少是单独的单词。在这种情况下，我们将借助Python文件函数读取每一行，并手动拆分:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="eb57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们有了某种秩序:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/ca6d2df08a3b8342a89157f56b67b68e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*or-S5HIYbtFa77PKbn83YA.png"/></div></div></figure><p id="cf71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看起来这种方法可行，但是如果我们有一个非标准编码的文件呢？</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8f9c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.带有自定义编码的文件</h1><p id="d66c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">与Python中几乎所有的东西一样，已经存在一个库(<a class="ae ky" href="https://docs.python.org/3/library/codecs.html#module-codecs" rel="noopener ugc nofollow" target="_blank">编解码器</a>)，它提供了对不同类型编码的访问。除了额外的包装器之外，代码与前面的示例几乎相同:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="d729" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如预测的那样，输出是相同的。</p><p id="0d85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，这是处理数据集最灵活的方式。但是，如果我们对已定义的数据类型已经有了解决方案，为什么我们还需要重新发明轮子呢？</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8101" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.带本地库的CSV文件</h1><p id="89a3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我认为CSV格式是最常见和最方便的——至少在我的经验中是这样。Python <a class="ae ky" href="https://docs.python.org/3/library/csv.html" rel="noopener ugc nofollow" target="_blank">为这种类型提供了一个单独的库</a>，这并不奇怪。此外，它还可以处理几乎任何带有单分隔符符号的有组织的数据集。让我们将它应用于垃圾邮件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="e5ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们看到，使用不同分隔符的解析有不同的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/3bdb66fc93d88e2e6d7ca6359af86836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i9u4KTiDV4bKHZbTIBz1jw.png"/></div></div></figure><p id="c363" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这可能没什么大不了的，因为我们可以用几行代码<a class="ae ky" href="https://medium.com/better-programming/10-python-tricks-and-scripts-for-strings-transformation-and-decomposing-e82ecac0a4d0" rel="noopener">来纠正它，或者提供额外的解析</a>。但是我相信您会更喜欢一种更方便的方式来解析您的数据集。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8ea4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.熊猫</h1><p id="4db1" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">是的，我知道<a class="ae ky" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> pandas </a> <strong class="lb iu"> </strong>库被过度使用了，但是我需要提到它，因为它的文件读取功能是我遇到的所有功能中最方便的。它允许你用几个分隔符读取文件，跳过一些行，选择具体的列，等等。<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_table.html" rel="noopener ugc nofollow" target="_blank">深入文档</a>了解更多详情。还有，由于标准的<code class="fe nd ne nf ng b">read_csv()</code>和其他函数都建立在<code class="fe nd ne nf ng b">read_table()</code>之上，所以单个例子就足够了。我们将使用带有热循环变量参数的数值数据集:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="873f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，它是最短的变体，因为它已经吸收了我们手工编写的所有包装器。作为输出，我们得到了一个结构良好的表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/aeff986e658802db64c14eccbca7d280.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PpZvkWpVvkC3X-nK-cMVVw.png"/></div></div></figure><p id="4e20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，如果存在一种更整洁的数据集读取变体，并且具有具体的功能焦点，那会怎么样呢？</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="da0f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">5.读取数值数据集</h1><p id="075e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><a class="ae ky" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"> NumPy </a> <strong class="lb iu"> </strong>库也有文件读取功能，但是它们被低估了，并被pandas <strong class="lb iu"> </strong>模拟所掩盖。<code class="fe nd ne nf ng b">np.loadtxt()</code>不像<code class="fe nd ne nf ng b">pd.read_table()</code>那样通用，但是它非常适合数值数据集，就像我们前面的例子一样。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="70a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果，我们有了一个纯功能的NumPy <strong class="lb iu"> </strong>表准备进行分析和计算:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/95fce87bd84a6de7764d3fbac55cae13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FVaRFZ6vIAyhl_Tf2ueuXw.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="85ae" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="4ea7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">几乎任何编程任务都可以用几种方式来完成，尤其是当我们在谈论Python的时候。这就是为什么打开一个文件有不止一种方法。也就是说，每个功能都有其目的和能力。</p><p id="bf5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在我的GitHub上找到带有工作示例的Jupyter笔记本:</p><div class="nj nk gp gr nl nm"><a href="https://github.com/Midvel/medium_jupyter_notes/blob/master/read_dataset/read-dataset.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">中级/中等_jupyter_notes</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">permalink dissolve GitHub是4000多万开发人员的家园，他们一起工作来托管和审查代码，管理…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">github.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa ks nm"/></div></div></a></div><p id="50e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，您可以自由分享自己的数据处理方法。</p></div></div>    
</body>
</html>