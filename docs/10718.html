<html>
<head>
<title>Integrating RxSwift as XCFramework With CocoaPods</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将RxSwift作为XCFramework与CocoaPods集成</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/integrating-rxswift-as-xcframework-with-cocoapods-41595f045336?source=collection_archive---------13-----------------------#2022-01-24">https://betterprogramming.pub/integrating-rxswift-as-xcframework-with-cocoapods-41595f045336?source=collection_archive---------13-----------------------#2022-01-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="e862" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">可能吗？</h2><div class=""/><div class=""><h2 id="2ee9" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">您可以通过一个简单的变通方法进行集成</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/f5969c36a8612daafd176cf03211c9ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Ada8tkYscNYrcEtSZIXug.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">rx swift+xc framework+cocoa pods</p></figure><p id="17ad" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">你好！</p><p id="8c3b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">几周前，我试图通过CocoaPods集成RxSwift从版本6 开始提供的预编译XCFrameworks。但是，令我惊讶的是，用椰子脚掌是不可能做到的。唯一的方法是手动集成它们。</p><p id="ef3e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我想出了一个解决这个限制的方法，并认为分享它是一个好主意。这里我会一步一步解释。</p><p id="5157" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们开始吧！</p><h2 id="2c59" class="mb mc iq bd md me mf dn mg mh mi dp mj ln mk ml mm lr mn mo mp lv mq mr ms iw bi translated">首先是小小的免责声明</h2><p id="e4f8" class="pw-post-body-paragraph le lf iq lg b lh mt ka lj lk mu kd lm ln mv lp lq lr mw lt lu lv mx lx ly lz ij bi translated">该解决方法是在以下环境下开发和测试的:</p><ul class=""><li id="9ea8" class="my mz iq lg b lh li lk ll ln na lr nb lv nc lz nd ne nf ng bi translated"><code class="fe nh ni nj nk b">RxSwift 6.5.0</code></li><li id="1d35" class="my mz iq lg b lh nl lk nm ln nn lr no lv np lz nd ne nf ng bi translated"><code class="fe nh ni nj nk b">Xcode 13.2.1</code></li><li id="cf82" class="my mz iq lg b lh nl lk nm ln nn lr no lv np lz nd ne nf ng bi translated"><code class="fe nh ni nj nk b">CocoaPods 1.11.2</code></li></ul></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="5dfe" class="nx mc iq bd md ny nz oa mg ob oc od mj kf oe kg mm ki of kj mp kl og km ms oh bi translated">上下文:我为什么关心这个？</h1><p id="8b36" class="pw-post-body-paragraph le lf iq lg b lh mt ka lj lk mu kd lm ln mv lp lq lr mw lt lu lv mx lx ly lz ij bi translated">我从事一个大型项目。</p><p id="0ed2" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们项目的很大一部分依赖于<code class="fe nh ni nj nk b">RxSwift</code>和他的伙伴们(<code class="fe nh ni nj nk b">RxCocoa</code>、<code class="fe nh ni nj nk b">RxBlocking</code>和<code class="fe nh ni nj nk b">RxTest</code>)。我们不打算将现有的代码库迁移到<code class="fe nh ni nj nk b">Combine</code>或<code class="fe nh ni nj nk b">async/await</code>。</p><p id="a7e2" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们使用CocoaPods作为依赖管理器。我们也不打算将其迁移到Swift Package Manager。</p><p id="673f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们的项目从零开始构建需要几分钟时间(例如，我们的CI每次都是从零开始构建)。为了减少编译时间，我们已经用一些依赖项提供的XCFrameworks替换了“普通”依赖项(拥有源代码并需要编译的依赖项)。</p><p id="eba0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">从版本6开始，RxSwift为XCFrameworks提供了更好的支持。现在每个新版本都附加了所有需要的XCFrameworks。</p><p id="c539" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">所以我们认为将它们集成到我们的项目中是一个好主意，可以节省一些编译时间。但是不幸的是，在写这篇文章的时候，XCFrameworks还没有在CocoaPods下发布。</p><p id="35f9" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">但这不会阻止我们。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="e755" class="nx mc iq bd md ny nz oa mg ob oc od mj kf oe kg mm ki of kj mp kl og km ms oh bi translated">解决方法:想法</h1><p id="1b31" class="pw-post-body-paragraph le lf iq lg b lh mt ka lj lk mu kd lm ln mv lp lq lr mw lt lu lv mx lx ly lz ij bi translated">我们需要为每个需要的依赖关系定制<code class="fe nh ni nj nk b">podspec</code>文件。那些<code class="fe nh ni nj nk b">podspecs</code>将被调整以从<a class="ae ma" href="https://github.com/ReactiveX/RxSwift/releases" rel="noopener ugc nofollow" target="_blank"> RxSwift的GitHub发布页面</a>获得vendored框架。</p><p id="e104" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">编辑后的<code class="fe nh ni nj nk b">podspecs</code>可以本地保存在项目中，也可以远程保存在不同的规范库中。</p><p id="6ed0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">然后，我们需要做的就是在我们的Podfile中使用那些编辑过的<code class="fe nh ni nj nk b">podspecs</code>。</p><p id="a3ab" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们准备好出发了。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><blockquote class="oi oj ok"><p id="ebbe" class="le lf ol lg b lh li ka lj lk ll kd lm om lo lp lq on ls lt lu oo lw lx ly lz ij bi translated">如果您不想一步一步地完成整个过程<a class="ae ma" href="https://github.com/pmanuelli/RxSwiftXCFrameworkCocoapodsExample" rel="noopener ugc nofollow" target="_blank">，这里有一个存储库</a>，其中有两个使用变通方法的示例项目:一个项目在本地修改了podspecs，另一个项目使用远程托管的<a class="ae ma" href="https://github.com/pmanuelli/RxSwiftSpecs" rel="noopener ugc nofollow" target="_blank">pod specs</a>。</p><p id="eaa1" class="le lf ol lg b lh li ka lj lk ll kd lm om lo lp lq on ls lt lu oo lw lx ly lz ij bi translated">仅对修改后的podspecs感兴趣？你可以在这里找到它们。</p></blockquote></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="90b2" class="nx mc iq bd md ny nz oa mg ob oc od mj kf oe kg mm ki of kj mp kl og km ms oh bi translated">解决方法:循序渐进</h1><p id="4415" class="pw-post-body-paragraph le lf iq lg b lh mt ka lj lk mu kd lm ln mv lp lq lr mw lt lu lv mx lx ly lz ij bi translated">我将一步一步地解释这些变化。为了简单起见，我将在示例中只使用<code class="fe nh ni nj nk b">RxSwift 6.5.0</code>。但是同样的变化也适用于所有其他Rx框架和任何其他版本。</p><h2 id="0846" class="mb mc iq bd md me mf dn mg mh mi dp mj ln mk ml mm lr mn mo mp lv mq mr ms iw bi translated">podspec文件的更改</h2><p id="64fd" class="pw-post-body-paragraph le lf iq lg b lh mt ka lj lk mu kd lm ln mv lp lq lr mw lt lu lv mx lx ly lz ij bi translated">我们需要对<code class="fe nh ni nj nk b">RxSwift.podspec</code>文件进行一些修改。你可以在这里找到<a class="ae ma" href="https://github.com/ReactiveX/RxSwift/blob/6.5.0/RxSwift.podspec" rel="noopener ugc nofollow" target="_blank">的原始文件</a>。这些变化是:</p><ul class=""><li id="19e0" class="my mz iq lg b lh li lk ll ln na lr nb lv nc lz nd ne nf ng bi translated">改变<code class="fe nh ni nj nk b">s.version</code>。为了避免混淆，我们需要改变依赖关系的版本。因为我想将XCFramework用于6.5.0版本，所以我将版本改为<code class="fe nh ni nj nk b">6.5.0-xcframework</code>。</li><li id="469f" class="my mz iq lg b lh nl lk nm ln nn lr no lv np lz nd ne nf ng bi translated">改变<code class="fe nh ni nj nk b">s.source</code>。它需要指向包含XCFramework的zip文件。在这种情况下，信号源变为<code class="fe nh ni nj nk b">{ :http =&gt; "https://github.com/ReactiveX/RxSwift/releases/download/6.5.0/RxSwift..xcframework.zip" }</code></li><li id="7ab8" class="my mz iq lg b lh nl lk nm ln nn lr no lv np lz nd ne nf ng bi translated">拆下<code class="fe nh ni nj nk b">s.source_files</code>和<code class="fe nh ni nj nk b">s.exclude_files</code>。我们不想要它们。</li><li id="b157" class="my mz iq lg b lh nl lk nm ln nn lr no lv np lz nd ne nf ng bi translated">将<code class="fe nh ni nj nk b">s.vendored_frameworks</code>与值<code class="fe nh ni nj nk b">"RxSwift.xcframework"</code>相加</li></ul><p id="729e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">你可以在这里找到完整的编辑文件<a class="ae ma" href="https://github.com/pmanuelli/RxSwiftSpecs/blob/main/Specs/RxSwift/6.5.0-xcframework/RxSwift.podspec" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="aa1c" class="mb mc iq bd md me mf dn mg mh mi dp mj ln mk ml mm lr mn mo mp lv mq mr ms iw bi translated">pod文件上的更改</h2><p id="bb78" class="pw-post-body-paragraph le lf iq lg b lh mt ka lj lk mu kd lm ln mv lp lq lr mw lt lu lv mx lx ly lz ij bi translated">最后一步是修改项目的Podfile。这里你必须做出选择:</p><p id="30b0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果你选择本地存储<code class="fe nh ni nj nk b">podspecs</code>，那么你必须改变你的依赖声明来使用本地<code class="fe nh ni nj nk b">podspec</code>。您可以通过<code class="fe nh ni nj nk b">:podspec</code>参数来实现这一点。例如，如果您的自定义<code class="fe nh ni nj nk b">podspecs</code>存储在名为<code class="fe nh ni nj nk b">RxSwiftSpecs</code>的文件夹中，那么更改将是:</p><pre class="kp kq kr ks gt op nk oq or aw os bi"><span id="6596" class="mb mc iq nk b gy ot ou l ov ow">pod 'RxSwift', :podspec =&gt; './RxSwiftSpecs/RxSwift.podspec'</span></pre><blockquote class="oi oj ok"><p id="0098" class="le lf ol lg b lh li ka lj lk ll kd lm om lo lp lq on ls lt lu oo lw lx ly lz ij bi translated">您可以在这里看到使用这种方法的项目<a class="ae ma" href="https://github.com/pmanuelli/RxSwiftXCFrameworkCocoapodsExample/tree/main/LocalPodspecsExample" rel="noopener ugc nofollow" target="_blank">。检查<code class="fe nh ni nj nk b"><a class="ae ma" href="https://github.com/pmanuelli/RxSwiftXCFrameworkCocoapodsExample/tree/main/LocalPodspecsExample/RxSwiftSpecs" rel="noopener ugc nofollow" target="_blank">RxSwiftSpecs</a></code> </a><a class="ae ma" href="https://github.com/pmanuelli/RxSwiftXCFrameworkCocoapodsExample/tree/main/LocalPodspecsExample/RxSwiftSpecs" rel="noopener ugc nofollow" target="_blank">文件夹</a>中的<a class="ae ma" href="https://github.com/pmanuelli/RxSwiftXCFrameworkCocoapodsExample/blob/main/LocalPodspecsExample/Podfile" rel="noopener ugc nofollow" target="_blank"> Podfile </a>和本地podspecs。</p></blockquote><p id="48cc" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja"> B. </strong>如果您选择将您的规范存储在远程规范存储库中，那么首先您需要将规范存储库的URL添加到Podfile，如下所示:</p><pre class="kp kq kr ks gt op nk oq or aw os bi"><span id="211d" class="mb mc iq nk b gy ot ou l ov ow">source 'https://github.com/pmanuelli/RxSwiftSpecs.git'</span></pre><p id="5e42" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">然后指定您在podspec上设置的版本:</p><pre class="kp kq kr ks gt op nk oq or aw os bi"><span id="ab0e" class="mb mc iq nk b gy ot ou l ov ow">pod 'RxSwift', '6.5.0-xcframework'</span></pre><blockquote class="oi oj ok"><p id="c2fa" class="le lf ol lg b lh li ka lj lk ll kd lm om lo lp lq on ls lt lu oo lw lx ly lz ij bi translated">你可以在这里看到一个使用这种方法的项目<a class="ae ma" href="https://github.com/pmanuelli/RxSwiftXCFrameworkCocoapodsExample/tree/main/RemotePodspecsExample" rel="noopener ugc nofollow" target="_blank">。在这种情况下，检查</a><a class="ae ma" href="https://github.com/pmanuelli/RxSwiftXCFrameworkCocoapodsExample/blob/main/RemotePodspecsExample/Podfile" rel="noopener ugc nofollow" target="_blank"> Podfile </a>和远程规格库<a class="ae ma" href="https://github.com/pmanuelli/RxSwiftSpecs" rel="noopener ugc nofollow" target="_blank">这里的</a>。</p></blockquote></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="79c9" class="nx mc iq bd md ny nz oa mg ob oc od mj kf oe kg mm ki of kj mp kl og km ms oh bi translated">一个特例:RxCocoa</h1><p id="6abf" class="pw-post-body-paragraph le lf iq lg b lh mt ka lj lk mu kd lm ln mv lp lq lr mw lt lu lv mx lx ly lz ij bi translated">对<code class="fe nh ni nj nk b">RxSwift</code>、<code class="fe nh ni nj nk b">RxRelay</code>、<code class="fe nh ni nj nk b">RxBlocking</code>和<code class="fe nh ni nj nk b">RxTest</code>的修改非常简单。</p><p id="1d5a" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">但是<code class="fe nh ni nj nk b">RxCocoa</code>更具挑战性。</p><h2 id="62d1" class="mb mc iq bd md me mf dn mg mh mi dp mj ln mk ml mm lr mn mo mp lv mq mr ms iw bi translated">RxCocoa</h2><p id="a535" class="pw-post-body-paragraph le lf iq lg b lh mt ka lj lk mu kd lm ln mv lp lq lr mw lt lu lv mx lx ly lz ij bi translated"><a class="ae ma" href="https://github.com/ReactiveX/RxSwift#xcframeworks" rel="noopener ugc nofollow" target="_blank">如RxSwift的XCFramework安装指南</a>所述，如果您想要导入<code class="fe nh ni nj nk b">RxCocoa</code>，那么您还需要导入<code class="fe nh ni nj nk b">RxCocoaRuntime</code>。但是我查了一下<a class="ae ma" href="https://github.com/ReactiveX/RxSwift/blob/6.5.0/RxCocoa.podspec" rel="noopener ugc nofollow" target="_blank">原</a> <code class="fe nh ni nj nk b">RxCocoa.podspec</code>文件，发现<code class="fe nh ni nj nk b">RxCocoaRuntime</code>并没有设置为依赖。这让我很惊讶。</p><p id="b36f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">因此，如果没有<code class="fe nh ni nj nk b">RxCocoaRuntime</code><code class="fe nh ni nj nk b">RxCocoa</code>就无法工作，那么对<code class="fe nh ni nj nk b">podspec</code>的一个额外的改变就是添加依赖关系:</p><pre class="kp kq kr ks gt op nk oq or aw os bi"><span id="dc40" class="mb mc iq nk b gy ot ou l ov ow">s.dependency 'RxCocoaRuntime', '6.5.0-xcframework'</span></pre><p id="464b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">最后的<code class="fe nh ni nj nk b">RxCocoa.podspec</code>文件是这里的<a class="ae ma" href="https://medium.com/r?url=https%3A%2F%2Fgithub.com%2Fpmanuelli%2FRxSwiftSpecs%2Fblob%2Fmain%2FSpecs%2FRxCocoa%2F6.5.0-xcframework%2FRxCocoa.podspec" rel="noopener"/>。</p><p id="5583" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在剩下的就是应用对<code class="fe nh ni nj nk b">RxCocoaRuntime.podspec</code>的修改。</p><h2 id="2359" class="mb mc iq bd md me mf dn mg mh mi dp mj ln mk ml mm lr mn mo mp lv mq mr ms iw bi translated">RxCocoaRuntime</h2><p id="66eb" class="pw-post-body-paragraph le lf iq lg b lh mt ka lj lk mu kd lm ln mv lp lq lr mw lt lu lv mx lx ly lz ij bi translated">但是RxSwift上没有<code class="fe nh ni nj nk b">RxCocoaRuntime.podspec</code>。我认为既然它不在CocoaPods下发布，就没有理由发布。</p><p id="0f4e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">但是这个解决方法需要一个。</p><p id="be94" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我检查了<a class="ae ma" href="https://github.com/ReactiveX/RxSwift/blob/6.5.0/Package.swift" rel="noopener ugc nofollow" target="_blank"> SPM清单文件</a>上的<code class="fe nh ni nj nk b">RxCocoaRuntime </code>依赖项，发现<a class="ae ma" href="https://github.com/ReactiveX/RxSwift/blob/6.5.0/Package.swift#L30" rel="noopener ugc nofollow" target="_blank">只依赖于RxSwift </a>。因此，知道了它的依赖关系，创建<code class="fe nh ni nj nk b">podspec</code>就很容易了。</p><p id="f53d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">最后的<code class="fe nh ni nj nk b">RxCocoaRuntime.podspec</code>档是这里的<a class="ae ma" href="https://github.com/pmanuelli/RxSwiftSpecs/blob/main/Specs/RxCocoaRuntime/6.5.0-xcframework/RxCocoaRuntime.podspec" rel="noopener ugc nofollow" target="_blank"/>。</p><blockquote class="oi oj ok"><p id="0ac7" class="le lf ol lg b lh li ka lj lk ll kd lm om lo lp lq on ls lt lu oo lw lx ly lz ij bi translated">关于这个框架的一个细节是它没有<code class="fe nh ni nj nk b">6.5.0</code>版本。在撰写本文时，最新版本是<code class="fe nh ni nj nk b"><em class="iq">6.2.0</em></code>。我认为如果框架没有变化，就不会产生新的版本。这很有道理，但对我来说很不幸，因为我更喜欢我所有的Rx依赖项都有相同的版本。</p><p id="9f9f" class="le lf ol lg b lh li ka lj lk ll kd lm om lo lp lq on ls lt lu oo lw lx ly lz ij bi translated">如果你喜欢，创建一个<code class="fe nh ni nj nk b">6.2.0-framework</code>版本是完全可以的。</p><p id="acb6" class="le lf ol lg b lh li ka lj lk ll kd lm om lo lp lq on ls lt lu oo lw lx ly lz ij bi translated">但是我更喜欢把它命名为<code class="fe nh ni nj nk b"><em class="iq">6.5.0-framework</em></code>，尽管它使用了预编译的<code class="fe nh ni nj nk b"><em class="iq">6.2.0</em></code>版本。这样，在Podfile上，我所有的Rx依赖项都有相同的版本。</p></blockquote></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="7979" class="nx mc iq bd md ny nz oa mg ob oc od mj kf oe kg mm ki of kj mp kl og km ms oh bi translated">我们完了！</h1><p id="49f5" class="pw-post-body-paragraph le lf iq lg b lh mt ka lj lk mu kd lm ln mv lp lq lr mw lt lu lv mx lx ly lz ij bi translated">在应用了所有提到的更改之后，剩下唯一要做的事情就是运行<code class="fe nh ni nj nk b">pod install</code>并看到XCFrameworks出现在项目上。</p><p id="8cc1" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们必须在左边编译的所有代码现在都被右边一些漂亮的XCFrameworks取代了。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ox"><img src="../Images/de2fd7dae62bb17c5dff789180bb3e66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ztu3rDHofsXTLJ50dkxfYA.png"/></div></div></figure></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="790a" class="nx mc iq bd md ny nz oa mg ob oc od mj kf oe kg mm ki of kj mp kl og km ms oh bi translated">版本更新呢？</h1><p id="d30b" class="pw-post-body-paragraph le lf iq lg b lh mt ka lj lk mu kd lm ln mv lp lq lr mw lt lu lv mx lx ly lz ij bi translated">这种解决方案的一个缺点是，现在版本更新过程比“正常”依赖关系更复杂。</p><p id="1491" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">首先，您需要为更新的版本创建新的<code class="fe nh ni nj nk b">podspecs</code>。您应该更改<code class="fe nh ni nj nk b">podspec</code>上的版本号，并将路径更改为zip，指向新版本。</p><p id="07d1" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">下一步取决于你把<code class="fe nh ni nj nk b">podspecs</code>存放在哪里。</p><p id="d808" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果您将它们存储在本地，您可以覆盖之前的<code class="fe nh ni nj nk b">podspecs</code>。但是如果您将它们托管在一个远程规范存储库中，您需要首先将它们添加到存储库中，然后更新您的Podfile上的版本号。</p><p id="15ea" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">最后运行<code class="fe nh ni nj nk b">pod update</code>就大功告成了。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="be47" class="nx mc iq bd md ny nz oa mg ob oc od mj kf oe kg mm ki of kj mp kl og km ms oh bi translated">结论</h1><p id="b447" class="pw-post-body-paragraph le lf iq lg b lh mt ka lj lk mu kd lm ln mv lp lq lr mw lt lu lv mx lx ly lz ij bi translated">我不得不承认，这比我最初预计的要多一点额外的工作。但是我对最后的结果很满意。我们设法最终使用了XCFrameworks，通过CocoaPods集成了它们！</p><p id="b00b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这样我们就避免了一遍又一遍地编译这些依赖项(例如在我们的配置项上),并节省了一些宝贵的时间。但是这是以更复杂的解决方案和稍微困难的版本更新过程为代价的。</p><p id="0408" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对我来说，完全值这个价！</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><blockquote class="oi oj ok"><p id="3961" class="le lf ol lg b lh li ka lj lk ll kd lm om lo lp lq on ls lt lu oo lw lx ly lz ij bi translated">再一次，<a class="ae ma" href="https://github.com/pmanuelli/RxSwiftXCFrameworkCocoapodsExample" rel="noopener ugc nofollow" target="_blank">这里的</a>是使用这种变通方法的示例项目，两种方法都用于存储podspecs。</p><p id="e80e" class="le lf ol lg b lh li ka lj lk ll kd lm om lo lp lq on ls lt lu oo lw lx ly lz ij bi translated">如果你只想要版本6.5.0的修改过的podspec文件，你可以在这里找到它们<a class="ae ma" href="https://github.com/pmanuelli/RxSwiftXCFrameworkCocoapodsExample/tree/main/LocalPodspecsExample/RxSwiftSpecs" rel="noopener ugc nofollow" target="_blank">。</a></p></blockquote><div class="oy oz gp gr pa pb"><a href="https://github.com/pmanuelli/RxSwiftXCFrameworkCocoapodsExample" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd ja gy z fp pg fr fs ph fu fw iz bi translated">GitHub-pmanuelli/RxSwiftXCFrameworkCocoapodsExample:演示如何使用…</h2><div class="pi l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">github.com</p></div></div><div class="pj l"><div class="pk l pl pm pn pj po ky pb"/></div></div></a></div></div></div>    
</body>
</html>