<html>
<head>
<title>11 Rare JavaScript One-Liners That Will Amaze You</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">11个罕见的JavaScript一行程序会让你大吃一惊</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/11-rare-javascript-one-liners-that-will-amaze-you-331659832301?source=collection_archive---------3-----------------------#2021-08-17">https://betterprogramming.pub/11-rare-javascript-one-liners-that-will-amaze-you-331659832301?source=collection_archive---------3-----------------------#2021-08-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="73ce" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">因为谁不喜欢只用一条线来建造东西呢</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e7d45f0a6b3d42a695f1d959178e6327.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-0ag6JFjkLmmXTJVVZPVmA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://www.pexels.com/photo/blue-eyed-man-staring-at-the-mirror-54377/" rel="noopener ugc nofollow" target="_blank">像素</a></p></figure><p id="7ce9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想给专业开发人员留下深刻印象，你应该做什么？很简单:用简单的逻辑和尽可能少的代码行解决一个复杂的问题。随着ES6 arrow函数的引入，可以创建看起来优雅而简单的一行程序。</p><p id="84f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，你将学到11个非常罕见却非常强大的一行程序。然后，准备好，我们从第一个开始！</p><h1 id="1eac" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1.获取字符串中的字符数</h1><p id="4b27" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">获取字符数是一个有用的工具，在很多情况下都很有用。你可以用它来计算空格数和单词数，也可以用它来计算字符串中某个分隔符的个数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/5f9eda808f828db5b87cdfccd8466a63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4JTq7Wv6G1Tu0GUkHjJqNA.png"/></div></div></figure><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="7fe8" class="my lw it mu b gy mz na l nb nc">const characterCount = (str, char) =&gt; str.split(char).length - 1</span></pre><p id="0fbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个想法非常简单。我们使用传递的参数<code class="fe nd ne nf mu b">char</code>分割字符串，并获得返回数组的长度。由于每一次拆弦，都会比拆弦者多一块；减去1，我们就有了一个<code class="fe nd ne nf mu b">characterCount</code>一行程序。</p><h1 id="ed32" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2.检查对象是否为空</h1><p id="6daf" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">检查一个物体的空性实际上比看起来要困难得多。每次检查一个对象是否等于<code class="fe nd ne nf mu b">{}</code>都会返回false，即使这个对象是空的。</p><p id="b161" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，下面的一行程序正是我们想要的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/1effd1a17df83b489424f2d61a034bb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*raLs5fvNEPlEUQnU4z-Chw.png"/></div></div></figure><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="b9cf" class="my lw it mu b gy mz na l nb nc">const isEmpty = obj =&gt; Reflect.ownKeys(obj).length === 0 &amp;&amp; obj.constructor === Object</span></pre><p id="fdbb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个一行程序中，我们检查对象的键的长度是否等于零，以及传递的参数是否是一个实际的对象。</p><h1 id="a524" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3.在执行前等待一段时间</h1><p id="bc2f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在这个一行程序中，我们将尝试一些异步编程。这个想法很简单。在运行代码时，如果您想等待一定的时间，这里是<code class="fe nd ne nf mu b">wait</code>一行程序:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/3935a38ea6d6bc5695cded48bf2d49ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zED3kVo1HB1p-rMsEB-rbw.png"/></div></div></figure><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="f1bd" class="my lw it mu b gy mz na l nb nc">const wait = async (milliseconds) =&gt; new Promise((resolve) =&gt; setTimeout(resolve, milliseconds));</span></pre><p id="ae65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nd ne nf mu b">wait</code>一行程序中，我们创建一个承诺，并在给定时间后使用<code class="fe nd ne nf mu b">setTimeout</code>函数解决它。</p><h1 id="cea6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">4.获取两个日期之间的时差</h1><p id="ed48" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在开发web应用程序时，日期通常是最难实现的部分，因为有许多概念很容易被误算。</p><p id="5672" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个强大的一行程序来计算两个日期之间的时差。但是还有更多的事情要做。正如我所做的，您可以创建自己的一行程序来计算月、年差异等。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/5784ddf58c64c5731775eff3b0e363c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pWjSKnUvpmNYGi2F7VZWLQ.png"/></div></div></figure><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="8d35" class="my lw it mu b gy mz na l nb nc">const daysBetween = (date1, date2) =&gt; Math.ceil(Math.abs(date1 - date2) / (1000 * 60 * 60 * 24))</span></pre><p id="4b73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个一行程序背后的逻辑非常容易理解。当两个日期相减时，返回值是以毫秒计的差值。要把毫秒转换成天，我们得把它一个一个地除以毫秒、秒、分、小时。</p><h1 id="6d98" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">5.重定向到另一个URL</h1><p id="090b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果您曾经创建过现实生活中的网站，我敢肯定您遇到过认证逻辑。例如，非管理员用户不应该能够访问<code class="fe nd ne nf mu b">/admin</code>路线。如果用户尝试，那么你必须将其重定向到另一个网址。</p><p id="f556" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个一行程序正是针对我上面提到的情况，但是我认为您可以找到更多的用例。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/8485e51a3cfbc2342d80d2d628923843.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ab_JYkkPUZ1wdOksFFqGZQ.png"/></div></div></figure><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="1e4f" class="my lw it mu b gy mz na l nb nc">const redirect = url =&gt; location.href = url</span></pre><p id="b17c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nd ne nf mu b">location</code>是全局<code class="fe nd ne nf mu b">window</code>对象上的方法，设置<code class="fe nd ne nf mu b">href</code>属性的行为与用户点击链接相同。</p><h1 id="67a2" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">6.检查设备上的触摸支持</h1><p id="4a81" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">随着可以连接到互联网的设备越来越多，创建响应性网站的必要性也在增加。20年前，开发者应该考虑网站的桌面版本，但今天超过50%的网络流量来自触摸设备。因此，基于设备的触摸支持采取一些行动是一个非常重要的概念。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/9ace6cef14b3af82c10d5cf785a7e23e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hCg1ziRq2M2JniqKfc2sBA.png"/></div></div></figure><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="2020" class="my lw it mu b gy mz na l nb nc">const touchSupported = () =&gt; ('ontouchstart' in window || DocumentTouch &amp;&amp; document instanceof DocumentTouch)</span></pre><p id="b1d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个一行程序中，我们检查文档是否支持<code class="fe nd ne nf mu b">touchstart</code>事件。</p><h1 id="a9a9" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">7.在元素后插入一个HTML字符串</h1><p id="e02c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">开发web应用程序时，使用JavaScript更新DOM是很常见的事情。有一些基本的方法来完成事情，但当情况变得复杂时，就很难克服了。</p><p id="81cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个在HTML元素后插入HTML字符串的一行程序。经过几分钟的思考和谷歌搜索，我确信你可以在这个一行程序的版本之前找到<em class="nl">。</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/d7d891ee14efa3f7ba86a5252619bfe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*52MWqa-s4AMOMSKOIqgODw.png"/></div></div></figure><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="1256" class="my lw it mu b gy mz na l nb nc">const insertHTMLAfter = (html, el) =&gt; el.insertAdjacentHTML('afterend', html)</span></pre><h1 id="2cb0" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">8.打乱数组</h1><p id="27aa" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在开发中混洗一组数据是您随时都会遇到的常见情况，不幸的是，JavaScript中没有内置数组的<code class="fe nd ne nf mu b">shuffle</code>方法。</p><p id="961c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，这里有一个你可以日常使用的<code class="fe nd ne nf mu b">shuffle</code>一行程序:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/eeb3fd090b0bc84fccf8281443ef8d86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*__MeJCilbgX-QPSqpquOYQ.png"/></div></div></figure><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="2d35" class="my lw it mu b gy mz na l nb nc">const shuffle = arr =&gt; arr.sort(() =&gt; 0.5 - Math.random())</span></pre><p id="b5ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它利用数组的<code class="fe nd ne nf mu b">sort</code>方法，在数组的前一个元素之前或之后随机排序。</p><h1 id="a134" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">9.获取网页上的选定文本</h1><p id="3e92" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">浏览器在全局<code class="fe nd ne nf mu b">windows</code>对象上有一个名为<code class="fe nd ne nf mu b">getSelection</code>的内置方法。使用这种方法，您可以创建一个返回网页上高亮显示或选定文本的单行程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/cf95384a182f8ca4a11eda158cced486.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HKml5QxPBuZWWymaNC26GQ.png"/></div></div></figure><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="be44" class="my lw it mu b gy mz na l nb nc">const getSelectedText = () =&gt; window.getSelection().toString()</span></pre><h1 id="07a5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">10.获取随机布尔值</h1><p id="a7e1" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在编程的时候，尤其是当你在编写游戏代码的时候，有时候你会想随机地采取行动。在这种情况下，下面的一行程序非常有用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/f8755280affd7e5fb158ae000d3cbf1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xpI9zORD0YwiQwtd1Qr_0w.png"/></div></div></figure><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="5714" class="my lw it mu b gy mz na l nb nc">const getRandomBoolean = () =&gt; Math.random() &gt;= 0.5</span></pre><p id="3159" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的一行程序有50%的机会返回<code class="fe nd ne nf mu b">true</code>或<code class="fe nd ne nf mu b">false</code>。因为生成的随机数大于0.5的概率等于更小的概率。</p><p id="ebaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，举例来说，如果你想得到一个概率为70% <code class="fe nd ne nf mu b">false</code>的随机布尔值，那么你可以简单地将0.5改为0.7，以此类推。</p><h1 id="0248" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">11.计算数组的平均值</h1><p id="f203" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">数组的平均值可以用多种方法计算。但是所有人的逻辑都是一样的。你必须得到数组和它的长度；然后除法给出平均值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/b9b00122576f9c3ab4289c8158397e88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z2pUB4_rZKS7vfbW4YDubw.png"/></div></div></figure><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="4d78" class="my lw it mu b gy mz na l nb nc">const average = (arr) =&gt; arr.reduce((a, b) =&gt; a + b) / arr.length</span></pre><p id="a424" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nd ne nf mu b">average</code>一行代码中，我们使用reduce在一行中获得数组的和，而不是使用循环。然后，我们把它除以数组长度，这是数组的平均值。</p></div><div class="ab cl nq nr hx ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="im in io ip iq"><p id="b200" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样，各位！现在你知道了11个简单而强大的JavaScript一行程序。我试着选择那些不太受欢迎和知名的，这样你可以学到新的东西。我每天都在使用它们，我想你也会的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://mailchi.mp/a45f8fb96cc9/subscribe"><div class="gh gi nx"><img src="../Images/9617ff4f7d33119c4d4e3d20c90708a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TtX3EIdGpUqGCOW6LtO42Q.png"/></div></a><p class="ku kv gj gh gi kw kx bd b be z dk translated">订阅获得你的<strong class="bd ny">免费<em class="nz">订户专属</em>T5】故事。</strong></p></figure><p id="140f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果你喜欢它，一定要鼓掌，如果你对这篇文章有什么要说的，请留下回应。下一篇文章再见。</p><p id="a79c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="nl">延伸阅读</em> </strong></p><div class="oa ob gp gr oc od"><a rel="noopener  ugc nofollow" target="_blank" href="/7-must-know-websites-to-boost-your-frontends-b3ea0bb282e6"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">7个必须知道的网站来提升你的前端</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">简单而有用的网站，你会每天使用</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">better编程. pub</p></div></div><div class="om l"><div class="on l oo op oq om or ks od"/></div></div></a></div><div class="oa ob gp gr oc od"><a rel="noopener  ugc nofollow" target="_blank" href="/3-marvelous-javascript-tips-to-speed-up-the-development-process-ba1bb8e3fb7a"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">加速开发过程的3个奇妙的JavaScript技巧</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">下面是我最喜欢的节省时间的JavaScript技巧</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">better编程. pub</p></div></div><div class="om l"><div class="os l oo op oq om or ks od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://medium.com/nerd-for-tech/3-extremely-useful-react-tips-to-speed-up-the-development-process-c4c966814c52" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">3个非常有用的React技巧来加速开发过程</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">如今，React已经慢慢成为了web应用程序的新标准，而且看起来它不会有任何发展…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="ot l oo op oq om or ks od"/></div></div></a></div></div></div>    
</body>
</html>