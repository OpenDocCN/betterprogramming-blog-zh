<html>
<head>
<title>How to Communicate from Unity to a Native iOS Swift Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从Unity与原生iOS Swift项目进行沟通</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-communicate-from-unity-to-ios-swift-project-81c8780a9752?source=collection_archive---------6-----------------------#2019-05-28">https://betterprogramming.pub/how-to-communicate-from-unity-to-ios-swift-project-81c8780a9752?source=collection_archive---------6-----------------------#2019-05-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ed1e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将字符串从Unity传递到iOS</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0005d4072e93284a24b011ee1244b063.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jv5T0maXe7yVmm7_Z8VcCg.jpeg"/></div></div></figure><p id="29e0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我想在一个iOS项目中嵌入Unity，并通过点击Unity中的一个按钮将一个字符串从Unity传递到iOS项目。</p><h1 id="4e4d" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">第1部分:Unity脚本</h1><ol class=""><li id="56cd" class="mi mj it kw b kx mk la ml ld mm lh mn ll mo lp mp mq mr ms bi translated">在您的Unity场景的C#脚本中，在您的<code class="fe mt mu mv mw b">public Class{}</code>中添加以下行。在我的例子中，我将它添加到我的<code class="fe mt mu mv mw b">SimpleCloudHandler</code>类中。</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mx my l"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">添加内部Unity C#脚本</p></figure><p id="7cca" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这样，我们告诉Unity，我们有一个名为<code class="fe mt mu mv mw b">unityToIOS</code>的函数在Unity之外被定义。</p><p id="3913" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">2.我想通过点击Unity中一个名为<code class="fe mt mu mv mw b">More Details</code>的按钮将字符串<code class="fe mt mu mv mw b">name</code>从Unity传递到iOS。在<code class="fe mt mu mv mw b">void OnGUI(){}</code>内，添加:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mx my l"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">创建一个按钮并在Unity中被点击时调用函数</p></figure><p id="258c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们已经完成了团结的部分。</p><h1 id="7f28" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">第2部分:将Unity嵌入iOS Swift项目</h1><p id="e61d" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld nd lf lg lh ne lj lk ll nf ln lo lp im bi translated">请看我之前关于将Unity嵌入iOS Swift项目的<a class="ae ng" href="https://medium.com/better-programming/how-to-embed-unity-with-vuforia-in-a-native-ios-swift-project-e9c82dfe53c" rel="noopener">作品</a>。在本文中，我将重点讨论通信部分。</p><h1 id="37df" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">第3部分:iOS Swift项目</h1><p id="d28f" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld nd lf lg lh ne lj lk ll nf ln lo lp im bi translated">如果你按照<a class="ae ng" href="https://medium.com/better-programming/how-to-embed-unity-with-vuforia-in-a-native-ios-swift-project-e9c82dfe53c" rel="noopener">我的教程</a>在iOS项目内部嵌入Unity，你会在<code class="fe mt mu mv mw b">Unity</code>文件夹下有<code class="fe mt mu mv mw b">UnityUtils.mm</code>。</p><ol class=""><li id="9974" class="mi mj it kw b kx ky la lb ld nh lh ni ll nj lp mp mq mr ms bi translated">在<code class="fe mt mu mv mw b">UnityUtils.mm</code>的底部声明<code class="fe mt mu mv mw b">unityToIOS</code>函数，在里面我们发布一个通知来传递字符串:</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mx my l"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">声明我们从Unity调用的函数</p></figure><p id="ffad" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对上面的代码做一点解释:</p><p id="d87a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu"> NSNotificationCenter </strong>支持向注册观察员广播信息。</p><p id="d2a0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">post notification name:object:userInfo</strong>用给定的名称、发送者和信息创建一个通知，并将它发布到通知中心。</p><p id="e173" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">2.在显示Unity场景的视图控制器中，我们在<code class="fe mt mu mv mw b">viewDidLoad()</code>中添加了一个观察者来接收我们在上面步骤中发布的通知:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mx my l"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">在视图控制器中添加通知观察者</p></figure><p id="d908" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">更多关于<code class="fe mt mu mv mw b">NotificationCenter</code>的信息，请看<a class="ae ng" href="https://developer.apple.com/documentation/foundation/notificationcenter" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="d4cc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">3.然后我们添加一个名为<code class="fe mt mu mv mw b">isDataGet</code>的函数，在这里我们指定我们想要执行的活动。例如，这里我打印了我从Unity发送的字符串:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mx my l"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">指定我们要执行的活动</p></figure><p id="07a5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，您应该能够将Unity中的数据打印到您的iOS项目中。</p></div></div>    
</body>
</html>