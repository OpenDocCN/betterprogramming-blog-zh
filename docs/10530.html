<html>
<head>
<title>5 Obscure Python Syntaxes You Should Try</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你应该尝试的5种晦涩的Python语法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/obscure-python-syntax-you-should-try-831dbc96777e?source=collection_archive---------2-----------------------#2022-01-13">https://betterprogramming.pub/obscure-python-syntax-you-should-try-831dbc96777e?source=collection_archive---------2-----------------------#2022-01-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e6c9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">完成常见任务的有趣方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9de33dceaae8f0696783e4a1d31faa24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M_tqSQVG6bANnZgSYExjdQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Godfrey Nyangechi 在<a class="ae ky" href="https://unsplash.com/s/photos/code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="6fa7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python编程语言的语法简单明了，并且相对容易上手。</p><p id="e459" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然像<a class="ae ky" href="https://pep8.org/" rel="noopener ugc nofollow" target="_blank"> PEP 8 </a>这样的样式指南对于批准什么语法可能相当严格，只留下少数选项，但是如果你深入一点，有大量不同的方法可以解决常见的问题。</p><p id="0366" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我的Python工作中，我学到了该语言允许的一些有趣的语法选项。其中一些风格没有被广泛使用，甚至被认为没有更传统的风格那么“Pythonic化”。我会让你来判断，并在适当的时候使用它们。</p><p id="8d67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看。</p><h1 id="59ee" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1.带元组的三元算子</h1><p id="27f8" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">通常，在Python中执行三元赋值，如下所示:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="3657" class="mx lw it mt b gy my mz l na nb">my_variable = 1 if &lt;condition&gt; else 2</span></pre><p id="50fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很简单。如果<code class="fe nc nd ne mt b">&lt;condition&gt;</code>为真，你就给<code class="fe nc nd ne mt b">1</code>赋值，否则就给<code class="fe nc nd ne mt b">2</code>赋值。但是让我们来看一个稍微不同的方法:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="551a" class="mx lw it mt b gy my mz l na nb">my_variable = (2, 1)[condition]</span></pre><p id="f780" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，我们通过使用这个简洁的元组语法进一步缩短了语句。如果条件为真，则返回第二个元素<code class="fe nc nd ne mt b">1</code>。如果条件为假，则返回第一个元素<code class="fe nc nd ne mt b">2</code>。</p><p id="979e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然这是执行三元赋值的一种不太清晰的方式，但是它非常简洁。如果您正在处理一些密集的、元组密集的代码区域，这可能会派上用场。只要记住明确变量命名，不应该有任何混淆。</p><h1 id="9253" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2.带括号的多行字符串</h1><p id="ca3d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">有许多打印字符串、连接字符串、操作字符串的技术。你说吧。Python可以与其中的佼佼者切块切块。</p><p id="d081" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我总是发现有一件事是需要的，那就是将长字符串语句拆分成多行。一种方法是通过转义换行符来欺骗解释器，使其认为所有内容都是一大行:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="5930" class="mx lw it mt b gy my mz l na nb">print(<br/>    "this is a " + \<br/>    "really long " + \<br/>    "string"<br/>)</span></pre><p id="7a48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是那看起来很恶心，不是吗？到处都有一堆转义会污染你的代码，并且不是最有趣的事情。</p><p id="f149" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，试着用括号把事情分开。你可以这样写同样的语句:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="94be" class="mx lw it mt b gy my mz l na nb">print((<br/>    "this is a "<br/>    "really long "<br/>    "string"<br/>))</span></pre><p id="60d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">干净多了。这种使用圆括号构造字符串的方法经常被忽视，并被像转义连接或连接字符串列表这样的方法所取代。</p><p id="a2e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就我个人而言，我认为这种方法更容易阅读，虽然它看起来类似于标准元组，但我认为当与字符串或打印语句一起使用时，区别是足够明显的，以避免混淆。</p><h1 id="f8ac" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3.与运算符库的显式比较</h1><p id="728c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们都知道标准运算符，如<code class="fe nc nd ne mt b">+</code>、<code class="fe nc nd ne mt b">-</code>、<code class="fe nc nd ne mt b">&gt;</code>、<code class="fe nc nd ne mt b">&lt;</code>等。但是Python有更多的方法来执行比较和使用操作符。Python中包含了<code class="fe nc nd ne mt b">operator</code>库。该库允许您像这样使用命名运算符函数:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="3039" class="mx lw it mt b gy my mz l na nb">import operator</span><span id="e764" class="mx lw it mt b gy ng mz l na nb">operator.eq(1, 1)</span></pre><p id="ddbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这和写<code class="fe nc nd ne mt b">==</code>一模一样。运算符库还有许多其他有趣的功能，例如:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="1e3e" class="mx lw it mt b gy my mz l na nb">operator.contains('string', 'ing')<br/>True</span></pre><p id="6205" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它允许您测试一个字符串是否包含在另一个字符串中。这和写作是一样的:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="be88" class="mx lw it mt b gy my mz l na nb">if 'ing' in 'string'</span></pre><p id="95a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个库中有很多不同的方法来使用操作符。查看<a class="ae ky" href="https://docs.python.org/3/library/operator.html" rel="noopener ugc nofollow" target="_blank">文档</a>获取完整列表。</p><h1 id="4b21" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">4.用f字符串自动引用字符串</h1><p id="58af" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">你曾经需要用引号将现有的字符串括起来吗？你有没有试过对一个复杂的插值字符串这样做，然后发现自己变得很沮丧没有一个简单的方法来处理这个问题？</p><p id="97c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确实有，但是不太明显:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="47e3" class="mx lw it mt b gy my mz l na nb">my_var = 'hello'<br/>print(f'{my_var!r}')</span></pre><p id="1601" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您执行此代码，它将打印:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="be19" class="mx lw it mt b gy my mz l na nb">'hello'</span></pre><p id="ba19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是用引号将字符串括起来所要做的一切。您也可以使用如下语句将它赋给一个变量:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="c2f3" class="mx lw it mt b gy my mz l na nb">my_var = f'{"hello"!r}'</span></pre><p id="b59a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在下一次你需要包装什么东西的时候，你只需要记住两个(虽然晦涩)字符:<code class="fe nc nd ne mt b">!r</code>。</p><h1 id="e881" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">5.列表切片</h1><p id="0723" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">从列表中获取其他所有项目怎么样？很简单。下面是如何使用扩展列表切片实现这一点:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="5e30" class="mx lw it mt b gy my mz l na nb">my_list = [1,2,3,4,5,6,7,8]</span><span id="3abf" class="mx lw it mt b gy ng mz l na nb">my_list[::2]</span><span id="703b" class="mx lw it mt b gy ng mz l na nb">&gt;&gt;&gt; [1, 3, 5, 7]</span></pre><p id="2d16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简洁，有效，虽然它不是最清晰的发生了什么，但它工作得很好。此方法对于快速反转列表也很有用:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="a9f4" class="mx lw it mt b gy my mz l na nb">my_list = [1,2,3,4,5,6,7,8]</span><span id="4d5c" class="mx lw it mt b gy ng mz l na nb">my_list[::-1]</span><span id="6287" class="mx lw it mt b gy ng mz l na nb">&gt;&gt;&gt; [8, 7, 6, 5, 4, 3, 2, 1]</span></pre><p id="5e47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一次您需要从遵循确定性模式的列表中提取数据时，您知道该使用什么。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><p id="5b43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读！查看我的其他Python文章，了解更多编程知识:</p><ul class=""><li id="ac76" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-run-ssh-commands-with-python-8111ee8ab405"> <em class="nf">如何在Python中抽象SSH命令</em> </a></li><li id="4735" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-time-threaded-python-loops-efficiently-93435b6f350f"> <em class="nf">如何高效计时线程化Python循环</em> </a></li></ul></div></div>    
</body>
</html>