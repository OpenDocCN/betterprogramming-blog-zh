<html>
<head>
<title>Tips for Integrating With External Dependencies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">与外部依赖项集成的提示</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/tips-for-integrating-with-external-dependencies-912b6d44663c?source=collection_archive---------15-----------------------#2022-06-01">https://betterprogramming.pub/tips-for-integrating-with-external-dependencies-912b6d44663c?source=collection_archive---------15-----------------------#2022-06-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d8e9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过询问以下问题来保护您的组件</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cbddb55a0e059d1591cca2d38d8297bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j5r5uGjorHbGr2amjxnayA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">罗伯特·阿纳奇在<a class="ae kv" href="https://unsplash.com/s/photos/steampunk?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><blockquote class="kw kx ky"><p id="e35f" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">"韧性是基于对自己的同情以及对他人的同情."——莎伦·萨尔茨堡</p></blockquote><p id="e957" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">让我们看看在将一个组件与一个外部依赖项集成时需要考虑的一些事情。</p><h1 id="4409" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">连接安全吗？</h1><p id="7552" class="pw-post-body-paragraph kz la iq lc b ld mr jr lf lg ms ju li lw mt ll lm lx mu lp lq ly mv lt lu lv ij bi translated">当与外部依赖项交换数据时，使用加密的安全协议。采用加密通道作为默认策略将防止任何攻击者恶意访问信息，无论攻击发生在何处，是在本地网络内还是通过互联网。</p><h1 id="e379" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">连接是受控的吗？</h1><p id="b41a" class="pw-post-body-paragraph kz la iq lc b ld mr jr lf lg ms ju li lw mt ll lm lx mu lp lq ly mv lt lu lv ij bi translated">启动与外部依赖项的连接的组件负责确保这种连接得到正确管理。</p><ul class=""><li id="05c6" class="mw mx iq lc b ld le lg lh lw my lx mz ly na lv nb nc nd ne bi translated">使用异步和非阻塞模式来处理组件和外部依赖关系之间的交互。例如，使用一个<code class="fe nf ng nh ni b">Promise</code>来启动一个连接，然后对一个事件作出反应或者捕捉一个异常，这是在不阻塞其他处理的情况下完成的。</li><li id="ff25" class="mw mx iq lc b ld nj lg nk lw nl lx nm ly nn lv nb nc nd ne bi translated">使用可接受的超时来关闭挂起的连接。</li><li id="a4b2" class="mw mx iq lc b ld nj lg nk lw nl lx nm ly nn lv nb nc nd ne bi translated">在适当的时候采用重试策略。重试一次就足够了。</li><li id="b159" class="mw mx iq lc b ld nj lg nk lw nl lx nm ly nn lv nb nc nd ne bi translated">处理来自外部依赖的反压力。使用<code class="fe nf ng nh ni b">Dead Letter Queue</code>存储失败的事件，并在指定的保留期内重试这些事件，以避免无限期地重试事件。</li><li id="7633" class="mw mx iq lc b ld nj lg nk lw nl lx nm ly nn lv nb nc nd ne bi translated">当无法建立与外部依赖项的连接时，采用默认策略。</li></ul><h1 id="f17a" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">是否处理异常？</h1><p id="e85a" class="pw-post-body-paragraph kz la iq lc b ld mr jr lf lg ms ju li lw mt ll lm lx mu lp lq ly mv lt lu lv ij bi translated">将一个组件与外部依赖项集成需要一个错误处理策略，因为事情不可避免地会出错。要么流经的数据将无法处理，要么传输数据的基础架构将经历中断。</p><p id="bf48" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">区分与系统故障相关的异常和与正在交换的数据相关的异常非常重要。其原因是，异常的性质决定了需要采取什么措施来解决或防止此类事件。</p><h1 id="f16c" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">错误日志有用吗？</h1><p id="8f55" class="pw-post-body-paragraph kz la iq lc b ld mr jr lf lg ms ju li lw mt ll lm lx mu lp lq ly mv lt lu lv ij bi translated">记录错误的目的是支持团队中负责操作相关组件的个人。</p><p id="22d3" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">因此，错误日志需要以这样一种方式形成，即人们可以快速访问有用的信息，了解错误的影响、原因，并决定行动计划。</p><p id="1506" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">错误日志使用某种时间戳来标注日期，比如<code class="fe nf ng nh ni b">2022–05–31T15:11:25.349Z.</code></p><p id="54b2" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">错误日志包括错误代码，可快速帮助识别错误的性质和受影响的组件。</p><p id="52ed" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">错误代码的建议格式是<code class="fe nf ng nh ni b">[{COMPONENT}-{DEPENDENCY}-{SYSTEM|DATA}]</code></p><p id="8366" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">例如，下面的代码<code class="fe nf ng nh ni b">[ABC-XYZ-SYSTEM]</code>告诉我们，组件ABC在与依赖XYZ通信时遇到了系统问题。</p><p id="d6ed" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">错误代码<code class="fe nf ng nh ni b">[ABC-XYZ-DATA]</code>告诉我们组件ABC正在与依赖XYZ交换无效数据。它告知组件中受此错误影响的功能。</p><p id="de64" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">错误日志还应该包含确认错误性质的消息，以便确认错误代码导致的初始假设。</p><p id="8cde" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">例如，这样的错误消息<code class="fe nf ng nh ni b">[ABC-XYZ-DATA] All-But-Crazy failed to submit recipe to Xtra-Yummy-Zinger</code>用简单的英语确认组件在处理由依赖关系返回的数据时失败。</p><p id="1add" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">最后，错误日志应该包括传递给依赖项的输入和从依赖项接收的输出。理想情况下是以易于查询的形式，比如JSON。</p><p id="0fc7" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">因此，一个有用的错误日志实际上是这样的:</p><pre class="kg kh ki kj gt no ni np nq aw nr bi"><span id="3cd2" class="ns ma iq ni b gy nt nu l nv nw">2022-05-31T15:11:25.349Z [ABC-XYZ-DATA] All-But-Crazy failed to submit recipe to Xtra-Yummy-Zinger.<br/>Inputs:<br/>{<br/>  "ingredient1": "chocolate",<br/>  "ingredient2": "sand",<br/>  ...<br/>}<br/>Outputs:<br/>{<br/>  "message": "The value for ingredient2 is not supported: 'sand'"<br/>}</span></pre><h1 id="e3bd" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">是否监控错误？</h1><p id="b298" class="pw-post-body-paragraph kz la iq lc b ld mr jr lf lg ms ju li lw mt ll lm lx mu lp lq ly mv lt lu lv ij bi translated">监控错误对于了解系统的健康状况至关重要。它有助于显示随着时间的推移，在处理持续的数据流时，随着系统的变化，系统运行状况的降级或改善。</p><p id="064d" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">通过监控，可以改进当前已有的错误处理策略，从而不断提高系统的弹性，防止过去的事件再次发生。</p><p id="cc7b" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">这种监控可以通过在错误代码上创建度量来实现，然后在必要时使用这些度量来创建可视化或设置警报。</p><p id="177d" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">通过这些精细的洞察来衡量系统的健康状况。调整一下，决定下一步。</p><h1 id="68a3" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">最后但同样重要的是，你是谁？</h1><p id="6e53" class="pw-post-body-paragraph kz la iq lc b ld mr jr lf lg ms ju li lw mt ll lm lx mu lp lq ly mv lt lu lv ij bi translated">识别与外部依赖项集成的组件。这确实是在与第三方进行积极沟通之前最起码要做的事情。</p><blockquote class="kw kx ky"><p id="15dc" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">“嗨，我快疯了。很高兴见到你。”</p></blockquote><p id="a336" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">感谢阅读:)</p></div></div>    
</body>
</html>