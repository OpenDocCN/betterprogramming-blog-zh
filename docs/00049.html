<html>
<head>
<title>Learn How To Build an Astronomy Picture of the Day App With the NASA API and React + Redux — Part II</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解如何使用NASA API和React + Redux构建每日天文图片应用程序—第二部分</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/learn-how-to-build-astronomy-picture-of-the-day-app-with-nasa-api-and-react-redux-part-ii-83f15970d0e3?source=collection_archive---------3-----------------------#2017-08-17">https://betterprogramming.pub/learn-how-to-build-astronomy-picture-of-the-day-app-with-nasa-api-and-react-redux-part-ii-83f15970d0e3?source=collection_archive---------3-----------------------#2017-08-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ae5d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我们将把这一整章献给Redux</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fb8df43376e65259930422226b646e21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h8UwBRQySOtTklrMnTy8Dw.png"/></div></div></figure><p id="9610" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将把这一章献给<a class="ae lq" href="http://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux </a>。</p><p id="7740" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是本教程的第一部分。</p><p id="e85b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">计划是重构我们的<a class="ae lq" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>应用程序，以实现React+Redux。React当前处理我们的状态，我们希望Redux来管理它。</p><p id="eb40" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Redux为什么这么重要？好问题！</p><p id="c9a4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从文档来看——Redux是JavaScript应用程序的可预测状态容器。</p><p id="5e80" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将让Redux管理我们应用程序的<code class="fe lr ls lt lu b">state</code>, React处理演示UI(用户界面)。它将责任从React中分离出来。</p><p id="2749" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是如何工作的？我带你去看。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/2ee585a34f1267f905c55574116dd209.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Or0o-_dFsZe1ahMAC2yLZQ.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated"><strong class="bd ma"> React + Redux图(</strong> <a class="ae lq" href="https://onsen.io/blog/content/images/2016/Jun/react_redux.png" rel="noopener ugc nofollow" target="_blank"> <strong class="bd ma">图片取自此处</strong> </a> <strong class="bd ma"> ) </strong></p></figure></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="931e" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">安装</strong></h1><p id="3189" class="pw-post-body-paragraph ku kv it kw b kx na ju kz la nb jx lc ld nc lf lg lh nd lj lk ll ne ln lo lp im bi translated">首先，让我们安装两个依赖项。</p><ul class=""><li id="ab72" class="nf ng it kw b kx ky la lb ld nh lh ni ll nj lp nk nl nm nn bi translated"><strong class="kw iu"> redux: </strong> <br/>包含所有功能的实际redux库。</li><li id="c721" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated"><strong class="kw iu"> react-redux: </strong> <br/>用于react和redux的胶水。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/4dbcee0ea3d81e2056c0eb1675fd2004.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a8ufrDCY9Z87hdsP_YSwig.png"/></div></div></figure><p id="08fa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">太好了！现在我们需要用Redux连接React应用程序。我们将从<code class="fe lr ls lt lu b">react-redux</code>导入<code class="fe lr ls lt lu b">Provider</code>，并将我们的应用程序包装在<code class="fe lr ls lt lu b">Provider</code>标签中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/006265a79f885ac0c93253e4e89823c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A2HzmhZ_MghyJCyoivgOaw.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated"><strong class="bd ma"> src/index.js </strong></p></figure></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="62ff" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">创建商店</h1><p id="504e" class="pw-post-body-paragraph ku kv it kw b kx na ju kz la nb jx lc ld nc lf lg lh nd lj lk ll ne ln lo lp im bi translated">什么是商店？商店是Redux术语的一大部分。商店是一个保存应用程序状态的大对象<code class="fe lr ls lt lu b">{}</code>。商店将我们的<code class="fe lr ls lt lu b">actions</code>和<code class="fe lr ls lt lu b">reducers</code>放在一起。</p><p id="af14" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从文档中:</p><h2 id="e7a4" class="nv mj it bd mk nw nx dn mo ny nz dp ms ld oa ob mu lh oc od mw ll oe of my og bi translated">商店有以下责任</h2><ul class=""><li id="9c69" class="nf ng it kw b kx na la nb ld oh lh oi ll oj lp nk nl nm nn bi translated">保存应用程序状态。</li><li id="52a4" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">允许通过<code class="fe lr ls lt lu b"><a class="ae lq" href="http://redux.js.org/docs/api/Store.html#getState" rel="noopener ugc nofollow" target="_blank">getState()</a></code>进入状态。</li><li id="6532" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">允许通过<code class="fe lr ls lt lu b"><a class="ae lq" href="http://redux.js.org/docs/api/Store.html#dispatch" rel="noopener ugc nofollow" target="_blank">dispatch(action)</a></code>更新状态。</li><li id="6bca" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">通过<code class="fe lr ls lt lu b"><a class="ae lq" href="http://redux.js.org/docs/api/Store.html#subscribe" rel="noopener ugc nofollow" target="_blank">subscribe(listener)</a></code>注册监听器。</li><li id="e089" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">通过<code class="fe lr ls lt lu b"><a class="ae lq" href="http://redux.js.org/docs/api/Store.html#subscribe" rel="noopener ugc nofollow" target="_blank">subscribe(listener)</a></code>返回的函数处理监听器的注销。</li></ul><p id="c89d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe lr ls lt lu b">Provider</code>只需要一个道具——<code class="fe lr ls lt lu b">store</code>属性。</p><h2 id="5bf1" class="nv mj it bd mk nw nx dn mo ny nz dp ms ld oa ob mu lh oc od mw ll oe of my og bi translated">创建商店</h2><p id="541e" class="pw-post-body-paragraph ku kv it kw b kx na ju kz la nb jx lc ld nc lf lg lh nd lj lk ll ne ln lo lp im bi translated">让我们用下面的代码在<code class="fe lr ls lt lu b">src/</code>中创建我们的<code class="fe lr ls lt lu b">Store.js</code>。</p><p id="af80" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们从<code class="fe lr ls lt lu b">redux</code>导入<code class="fe lr ls lt lu b">createStore</code>方法，并将<code class="fe lr ls lt lu b">rootReducer</code>作为参数传递。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/f4a94ee6ba1fafdd3e134a2e020c8ddb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PeZLoMuGJDL5k1CEvFc1lQ.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated"><strong class="bd ma"> src/Store.js </strong></p></figure><p id="01be" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后我们将它导入到我们的<code class="fe lr ls lt lu b">src/index.js</code>文件中，并将道具添加到<code class="fe lr ls lt lu b">Provider</code>标签中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/fbd2172920ea7497a8c3853ce22da1ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*29nEE_jET70ZFtJXmIvGaw.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated"><strong class="bd ma"> src/index.js </strong></p></figure><p id="bee8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后我们导入<code class="fe lr ls lt lu b">Store</code>并将其作为道具传递给<code class="fe lr ls lt lu b">Provider</code>。</p><p id="3203" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们查看浏览器内部，我们会看到一个红色的大错误。这完全正常——我们还没有做出我们的<code class="fe lr ls lt lu b">rootReducer</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/8e8d1161296b927731966519e25a90ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*27JJN7wVk_X2f-3VCEtziQ.png"/></div></div></figure></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="edb7" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">还原剂</h1><p id="ca55" class="pw-post-body-paragraph ku kv it kw b kx na ju kz la nb jx lc ld nc lf lg lh nd lj lk ll ne ln lo lp im bi translated">什么是减速器？</p><p id="6e0e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">减速器处理将发生在<code class="fe lr ls lt lu b">state</code>上的逻辑。假设用户单击一个按钮，接下来会发生以下步骤:</p><ol class=""><li id="4986" class="nf ng it kw b kx ky la lb ld nh lh ni ll nj lp on nl nm nn bi translated">一个名为<code class="fe lr ls lt lu b">"BUTTON_CLICKED"</code>的<code class="fe lr ls lt lu b">action type</code>带着有效载荷发射<code class="fe lr ls lt lu b">action</code>。<code class="fe lr ls lt lu b">action</code>返回一个普通对象。</li><li id="bbed" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp on nl nm nn bi translated">所有<code class="fe lr ls lt lu b">reducers</code>都将被调用。类型为<code class="fe lr ls lt lu b">"BUTTON_CLICKED"</code>的<code class="fe lr ls lt lu b">reducer</code>将被进一步调用以返回新的<code class="fe lr ls lt lu b">state</code>。有效载荷通过<code class="fe lr ls lt lu b">action</code>。默认情况下，所有减速器返回<code class="fe lr ls lt lu b">state</code>。</li><li id="c306" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp on nl nm nn bi translated"><code class="fe lr ls lt lu b">store</code>监听<code class="fe lr ls lt lu b">reducers</code>中的任何变化，并保存新的<code class="fe lr ls lt lu b">state.</code></li><li id="7cea" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp on nl nm nn bi translated"><code class="fe lr ls lt lu b">store</code>传递了<em class="oo">新的</em> <strong class="kw iu"> </strong> <code class="fe lr ls lt lu b">state</code> <strong class="kw iu"> </strong>给我们的反应观点。</li><li id="4d3a" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp on nl nm nn bi translated">React更新视图。</li></ol><p id="9276" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">很多行话——在行动中更容易理解。</p><p id="aead" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们已经完成了我们的<code class="fe lr ls lt lu b">store</code> (#3)，现在我们要开始<code class="fe lr ls lt lu b">reducers</code> (#2)。</p><p id="234e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可能会问，“这些都有必要吗？”</p><p id="e605" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">不，没必要。你甚至会感到不知所措。但是不要气馁。一旦你理解了所有的行话，Redux就没有你想象的那么难了。</p><p id="dd56" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们要完成减速器吗？我们的<code class="fe lr ls lt lu b">store</code>需要它们。</p><p id="5b22" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将为减速器创建一个名为<code class="fe lr ls lt lu b">src/reducers</code>的专用目录。在<code class="fe lr ls lt lu b">reducers</code>目录中，我们创建了一个<code class="fe lr ls lt lu b">index.js</code>文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/620ed80b77eaaeb555304aba22ff9672.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z6xHzj_flXVTZ6iwHLhOUQ.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated"><strong class="bd ma"> src/reducers/index.js </strong></p></figure><p id="a556" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe lr ls lt lu b">src/reducers/index.js</code>内部，我们从Redux导入<code class="fe lr ls lt lu b">combineReducers</code>。<code class="fe lr ls lt lu b">combineReducers</code>将我们所有的减速器融为一体。</p><p id="bf29" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为什么我们只需要一个减速器？<code class="fe lr ls lt lu b">Store</code>对应方只接受一个减速器作为参数，即<code class="fe lr ls lt lu b">rootReducer.</code></p><p id="d6d5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们有一个名为<code class="fe lr ls lt lu b">rootReducer</code>的常量，我们将其导出。</p><p id="d8d3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe lr ls lt lu b">Store</code>接受我们刚刚导出的<code class="fe lr ls lt lu b">rootReducer</code>。我们可以走了！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/d187631a7730e75b0a8514590f1ec0f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rNNTANO6mQiDXwNDvBpeEw.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated"><strong class="bd ma"> src/Store.js </strong></p></figure><p id="8c7a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你想知道你的浏览器现在告诉你什么吗？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/28fdc81a136b332ab1d1d8fa58bdd4d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYszGkyvONnj8o9-HbiBag.png"/></div></div></figure><p id="e4fa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">又一个红色大失误！</p><p id="55ec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">不要惊慌，这只是Redux想帮助你。如果我们仔细阅读，我们会发现我们的<code class="fe lr ls lt lu b">combineReducers</code>函数中缺少了一个缩减器。</p><p id="818a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">很有道理。</p><p id="57ef" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在让我们制作第一个真正的减速器。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/1a99063837bac9ba63f47f170d3446fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EfnGMN_Qiqptd6MigbsADQ.png"/></div></div></figure><p id="e9a6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">减速器有两个参数:</p><ol class=""><li id="f78a" class="nf ng it kw b kx ky la lb ld nh lh ni ll nj lp on nl nm nn bi translated">当前的<code class="fe lr ls lt lu b">state</code>，我们最初设置为空的<code class="fe lr ls lt lu b">Object {}</code>。</li><li id="bfa3" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp on nl nm nn bi translated">一个<code class="fe lr ls lt lu b">action</code>。</li></ol><p id="e0b1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">减速器将始终返回该状态。</p><p id="32fb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们导入我们的<code class="fe lr ls lt lu b">app_reducer.js</code>，并将其作为参数传递给<code class="fe lr ls lt lu b">combineReducer</code>。</p><p id="d14f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可能知道，我们可以将对象作为参数传递给函数。</p><p id="f845" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，我们的状态叫做<code class="fe lr ls lt lu b">astronomy</code>。一旦我们调用了<code class="fe lr ls lt lu b">mapStateToProps</code>，我们的数据将在<code class="fe lr ls lt lu b">this.props.astronomy</code>中我们“连接”的组件中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/0a1f06495a13b0c994082e8d75c333ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l2bLwDVFuAZPqQyx0l71oA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/b4f8e85afb5b44e67a8547e6d6d95ff7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hksIX6nYhuOeDMrEqYwa1w.png"/></div></div></figure><p id="4364" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们的浏览器不再显示红色——我们一定做对了什么！</p><p id="a281" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们创造了自己的<code class="fe lr ls lt lu b">store</code>和<code class="fe lr ls lt lu b">reducer</code>。现在我们必须创建我们的<code class="fe lr ls lt lu b">action</code>，最后，用我们的React组件连接它。</p><p id="b28b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">了解我们试图解决哪个问题总是很重要的——从<a class="ae lq" href="https://api.nasa.gov/" rel="noopener ugc nofollow" target="_blank"> NASA API </a>获取天文学数据。</p><p id="55e1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们正在缓慢但肯定地将状态从React中分离出来，并让Redux处理状态。</p><p id="2f90" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来:行动<strong class="kw iu">！</strong></p><p id="3365" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你有兴趣阅读更多关于<a class="ae lq" href="http://redux.js.org/docs/basics/Reducers.html" rel="noopener ugc nofollow" target="_blank">减速器</a>的信息，请查阅Redux的文档。</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="99ce" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">创建操作</h1><p id="710a" class="pw-post-body-paragraph ku kv it kw b kx na ju kz la nb jx lc ld nc lf lg lh nd lj lk ll ne ln lo lp im bi translated">文档很好地解释了操作:</p><p id="c96b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">“动作是将数据从应用程序发送到商店的有效信息负载。他们是商店唯一的信息来源。”</p><p id="45d1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">正如我们对reducers所做的那样，首先在<code class="fe lr ls lt lu b">src</code>中创建一个名为<code class="fe lr ls lt lu b">actions</code>的新目录。</p><p id="6133" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe lr ls lt lu b">actions</code>目录中，我们将有一个名为<code class="fe lr ls lt lu b">fetch_data.js</code>的文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/4c8e56b39fc4b9edcdcbd0768c64cf3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UFNDTfZY1KMSDwxShNXZFg.png"/></div></div></figure><p id="caf0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从上到下:</p><ul class=""><li id="d571" class="nf ng it kw b kx ky la lb ld nh lh ni ll nj lp nk nl nm nn bi translated">我们导入<a class="ae lq" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank"> Axios </a>来取出数据。</li><li id="7e8d" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">我们有一个名为<code class="fe lr ls lt lu b">fetchData</code>的函数，我们将其导出。</li><li id="48d4" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">在函数内部，我们已经为端点声明了几个常量，就像我们之前做的那样。</li></ul><p id="07ec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该操作将返回一个包含以下内容的普通对象:</p><ol class=""><li id="eefb" class="nf ng it kw b kx ky la lb ld nh lh ni ll nj lp on nl nm nn bi translated"><strong class="kw iu">动作类型</strong> <br/>这是为了让减速器识别我们的动作。</li><li id="faef" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp on nl nm nn bi translated"><strong class="kw iu"> Payload </strong> <br/>在本例中，它是我们从端点获取的数据。</li></ol><p id="ffac" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们需要用React组件连接它。我们可以将<code class="fe lr ls lt lu b">action</code>称为<code class="fe lr ls lt lu b">this.props.fetchData()</code>并获得我们想要的数据。</p><p id="20e7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我知道仅仅提出一个<code class="fe lr ls lt lu b">GET</code>请求就很麻烦。但是学习Redux将使我们的应用程序更容易推理。</p><p id="4f20" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们需要安装一个依赖项来解析我们的<code class="fe lr ls lt lu b">promise</code>。</p><p id="14b9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Redux不知道如何处理异步<strong class="kw iu"> </strong>动作。所以我们需要安装<a class="ae lq" href="http://redux.js.org/docs/advanced/Middleware.html" rel="noopener ugc nofollow" target="_blank">中间件</a>。</p><pre class="kj kk kl km gt ov lu ow ox aw oy bi"><span id="23f9" class="nv mj it lu b gy oz pa l pb pc">$ yarn add redux-promise</span></pre><p id="d8db" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe lr ls lt lu b">store</code>接受<code class="fe lr ls lt lu b">middleware</code>，中间件在后台附魔我们的应用。</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="53bc" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">应用Redux中间件</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/f3475eee9df72fc24f37d6d8a1dfde3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5m6I4918xCysl8IYWDWPSg.png"/></div></div></figure><p id="7054" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里我们做三件事:</p><ol class=""><li id="e9a0" class="nf ng it kw b kx ky la lb ld nh lh ni ll nj lp on nl nm nn bi translated">从<code class="fe lr ls lt lu b">'redux'</code>导入<code class="fe lr ls lt lu b">applyMiddleware</code>。</li><li id="27c5" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp on nl nm nn bi translated">从<code class="fe lr ls lt lu b">'redux-promise'</code>导入<code class="fe lr ls lt lu b">promise</code>。</li><li id="38a5" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp on nl nm nn bi translated">在我们的<code class="fe lr ls lt lu b">createStore()</code>函数中传递第二个参数。这个参数叫做<code class="fe lr ls lt lu b">applyMiddleware()</code>，它接受任何中间件。我们在<code class="fe lr ls lt lu b">applyMiddleware()</code>函数中传递我们的<code class="fe lr ls lt lu b">promise</code>中间件。</li></ol></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="8787" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">回到减速器</h1><p id="88d0" class="pw-post-body-paragraph ku kv it kw b kx na ju kz la nb jx lc ld nc lf lg lh nd lj lk ll ne ln lo lp im bi translated">我们已经声明了我们的操作，但是我们的reducer对此一无所知。让我们解决这个问题！</p><p id="8d7c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将添加一个<code class="fe lr ls lt lu b">switch()</code>语句来检查哪些动作被触发并相应地采取行动。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/0ac64b6123d91f48ee643774e3f69b43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RjN_u0WZm7xC_6M5zz1GVA.png"/></div></div></figure><p id="7353" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在Redux中，默认情况下操作和减少器连接。我们不需要把它们粘在一起。</p><p id="948b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">还记得我们有一个返回带有道具的物体的动作吗？</p><p id="a1ad" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">其中一个道具是减速器中的<code class="fe lr ls lt lu b">type: ‘FETCH_DATA’.</code>,我们正在检查被触发的动作是否确实是这种类型。如果是，我们还一个<em class="oo">新的</em> <code class="fe lr ls lt lu b">state</code>。</p><p id="013d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们使用扩展操作符<code class="fe lr ls lt lu b">…</code>——我们用<code class="fe lr ls lt lu b">action.payload</code>在一个新数组中传递我们的状态，它是请求数据。</p><p id="d996" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">记住</strong>，我们不突变状态，突变状态是反模式！总是返回新创建的状态。</p><p id="85b1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">简单的例子:</p><h2 id="2e0e" class="nv mj it bd mk nw nx dn mo ny nz dp ms ld oa ob mu lh oc od mw ll oe of my og bi translated">坏的(改变初始状态)</h2><pre class="kj kk kl km gt ov lu ow ox aw oy bi"><span id="b265" class="nv mj it lu b gy oz pa l pb pc">case('FETCH_DATA'):<br/>  state = action.payload.data<br/>  return <strong class="lu iu">state</strong>;</span></pre><p id="09d1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为什么不好？因为我们要将现有的<code class="fe lr ls lt lu b">state</code>赋值给新的<em class="oo">值</em>。</p><h2 id="9cf1" class="nv mj it bd mk nw nx dn mo ny nz dp ms ld oa ob mu lh oc od mw ll oe of my og bi translated">好(不改变初始状态)</h2><pre class="kj kk kl km gt ov lu ow ox aw oy bi"><span id="354c" class="nv mj it lu b gy oz pa l pb pc">case 'FETCH_DATA':<br/>   const newState = Object.assign({}, ...state, action.payload.data)<br/>   return <strong class="lu iu">newState</strong>;</span></pre><p id="1992" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为什么好？因为我们正在创建一个新的<em class="oo">对象</em> <strong class="kw iu"> </strong>包含新的<code class="fe lr ls lt lu b">state</code>和数据。</p><p id="63db" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们的下一步是最后一步。我们可以用React组件连接它！</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="93c0" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">带有反应视图的布线冗余</h1><p id="2816" class="pw-post-body-paragraph ku kv it kw b kx na ju kz la nb jx lc ld nc lf lg lh nd lj lk ll ne ln lo lp im bi translated">我们快完成了，只剩下几件事要完成。</p><p id="0a58" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们要清洁我们的<code class="fe lr ls lt lu b">AstronomyContainer.js</code>吗？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/9003a793d685d641c6e886fa3497ecde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*frWmjlS8GWk3IHTa0niMTA.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated"><strong class="bd ma">src/components/astronomycontainer . js</strong></p></figure><p id="4533" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">注意到我们清理了组件内部的所有<code class="fe lr ls lt lu b">state</code>了吗？再也没有<code class="fe lr ls lt lu b">this.state</code>了！</p><p id="32cf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这正是您在Redux应用程序中想要的。</p><p id="c10d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">借助一个名为<code class="fe lr ls lt lu b">connect()</code>的特殊函数，我们可以毫不夸张地用Redux连接React。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/ec5740aa103a8c5f4a6c6213bacb3218.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bdk0cFLrAh1ICANDxHUp4A.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated"><strong class="bd ma">src/components/astronomycontainer . js</strong></p></figure><p id="a82d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从<code class="fe lr ls lt lu b">react-redux</code>导入<code class="fe lr ls lt lu b">connect</code>方法，并在底部导出该方法。<code class="fe lr ls lt lu b">Connect()</code>接受两个参数— <code class="fe lr ls lt lu b">mapStateToProps</code>和<code class="fe lr ls lt lu b">mapDispatchToProps</code>。</p><ul class=""><li id="c23d" class="nf ng it kw b kx ky la lb ld nh lh ni ll nj lp nk nl nm nn bi translated"><code class="fe lr ls lt lu b">mapStateToProps</code> <br/>言出必行。它将Redux状态映射到React props。</li><li id="6d15" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated"><code class="fe lr ls lt lu b">mapDispatchToProps</code> <strong class="kw iu"> <br/> </strong>将我们的Redux动作转化为React道具。</li></ul><p id="a2cf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为什么我们在<code class="fe lr ls lt lu b">connect</code>中的第一个参数是<code class="fe lr ls lt lu b">null</code>？</p><p id="421a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe lr ls lt lu b">connect</code>方法期望传递一个<code class="fe lr ls lt lu b">mapStateToProps</code>函数。但是我们还没有写出来。所以我们通过一个<strong class="kw iu"> </strong> <em class="oo">临时</em> <code class="fe lr ls lt lu b">null.</code></p><h2 id="1c89" class="nv mj it bd mk nw nx dn mo ny nz dp ms ld oa ob mu lh oc od mw ll oe of my og bi translated">mapStateToProps</h2><p id="6930" class="pw-post-body-paragraph ku kv it kw b kx na ju kz la nb jx lc ld nc lf lg lh nd lj lk ll ne ln lo lp im bi translated"><code class="fe lr ls lt lu b">mapStateToProps</code>是将Redux状态映射到React道具的特殊功能。在这种情况下，我们从容器中获取数据，并通过<code class="fe lr ls lt lu b">props</code>将其传递给一个孩子。</p><h2 id="139c" class="nv mj it bd mk nw nx dn mo ny nz dp ms ld oa ob mu lh oc od mw ll oe of my og bi translated">mapDispatchToProps</h2><p id="0ca2" class="pw-post-body-paragraph ku kv it kw b kx na ju kz la nb jx lc ld nc lf lg lh nd lj lk ll ne ln lo lp im bi translated"><code class="fe lr ls lt lu b">mapDispatchToProps</code>让我们将我们的行动映射到<code class="fe lr ls lt lu b">props</code>。在这种情况下，它获取我们的数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/cf2786b9611f085787578e890fc417fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_GvGRQTNM-5EQikqHh0tNw.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">实现mapStateToProps</p></figure><p id="aa2e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个函数返回一个对象。它将当前的<code class="fe lr ls lt lu b">state</code>作为参数，并将道具从我们的减速器映射到<code class="fe lr ls lt lu b">astronomy</code>。</p><p id="c79d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们在<code class="fe lr ls lt lu b">src/reducers/index.js</code>里面有<code class="fe lr ls lt lu b">astronomy</code>减速器。我们只是把我们的道具映射到它上面。</p><pre class="kj kk kl km gt ov lu ow ox aw oy bi"><span id="485f" class="nv mj it lu b gy oz pa l pb pc">const rootReducer = combineReducers({<br/> astronomy: AppReducer<br/>})</span></pre><p id="fa72" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们测试一下<code class="fe lr ls lt lu b">this.props.astronomy</code>是否工作。它应该显示一个空对象。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/206f994d13d8c739b156a02f6e166a30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sESn0Evno9T4-NUN96XBeg.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">控制台记录我们的this.props.astronomy</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pj"><img src="../Images/00e38386e9b9111e68ddb448f5a61435.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*66suIGD_yz82uQkou_jjLg.png"/></div></div></figure><p id="0037" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您不记得为什么它是一个空对象，也不要担心——Redux在开始时非常强大。</p><p id="2754" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">事实上这很简单。还记得我们必须在我们的reducer中设置一个默认的<code class="fe lr ls lt lu b">state</code>吗，我们将它设置为一个空对象。它返回的正是这个空对象，因为我们还没有做出任何动作。在这种情况下，它获取数据。</p><pre class="kj kk kl km gt ov lu ow ox aw oy bi"><span id="c378" class="nv mj it lu b gy oz pa l pb pc">export default function(state = {}, action) {<br/> return state;<br/>}</span></pre></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="8f93" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">最后一步—实施操作(获取数据)</h1><p id="07d2" class="pw-post-body-paragraph ku kv it kw b kx na ju kz la nb jx lc ld nc lf lg lh nd lj lk ll ne ln lo lp im bi translated">实现动作非常简单。</p><p id="b96a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">快速提醒:我们的动作位于<code class="fe lr ls lt lu b">src/actions/fetch_data.js</code>中——文件中有一个名为<code class="fe lr ls lt lu b">fetchData()</code>的函数，它执行一个<code class="fe lr ls lt lu b">GET</code>请求。</p><p id="d58c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了调用我们的<code class="fe lr ls lt lu b">action</code>并最终获取我们的数据，我们需要做以下三件事。</p><ol class=""><li id="d4d7" class="nf ng it kw b kx ky la lb ld nh lh ni ll nj lp on nl nm nn bi translated">从<code class="fe lr ls lt lu b">src/actions/fetch_data.js</code>导入动作。</li><li id="ebc7" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp on nl nm nn bi translated">将我们的动作作为参数传递给<code class="fe lr ls lt lu b">connect</code>函数。</li><li id="78c4" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp on nl nm nn bi translated">调用React <code class="fe lr ls lt lu b">lifecycle</code>方法中的动作。这种情况下就是<code class="fe lr ls lt lu b">ComponentWillMount()</code>。</li></ol><p id="071f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">好吧，我们开始吧。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/867598276137b761d3fb10cc6b6a1735.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oXYuna2EH_ppDvzKSIBWLw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/4e216553bd621badd7fa533e360bb46e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ayBnIxd_bgfMTKCGXqYtcA.png"/></div></div></figure><p id="04d0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在看看你的浏览器吧！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/a46a202711e83d5628a60fdd2fc8cdef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cxST-7LL4ld-o8Jhv3Ol-w.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/0b2964a25b254df7a0f393b9ffb54732.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uTvdobUnM-O_lkj02SCERw.png"/></div></div></figure><p id="fa3a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有用！你已经成功地使用Redux重构了你的应用。</p><p id="f58c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">注意到我们的React组件中没有<code class="fe lr ls lt lu b">this.state</code>了吗？我们让Redux处理我们的状态！</p><p id="dc3a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">谢谢你坚持到最后！你已经了解了Redux、reducers、<code class="fe lr ls lt lu b">Actions</code>、<code class="fe lr ls lt lu b">Store,</code>、<code class="fe lr ls lt lu b">Provider</code>、<code class="fe lr ls lt lu b">Middleware</code>、<code class="fe lr ls lt lu b">mapStateToProps()</code>、<code class="fe lr ls lt lu b">mapDispatchToProps()</code>和<code class="fe lr ls lt lu b">connect()</code>，同时构建了一个很酷的天文学应用程序。</p><p id="2544" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想让你的JavaScript能力更上一层楼，我推荐阅读“<a class="ae lq" href="https://amzn.to/2LSDpG6?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> <em class="oo">你不知道的JS </em> </a>”系列丛书。</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="e7c0" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">资源</h1><div class="pn po gp gr pp pq"><a href="https://github.com/wesharehoodies/nasa-react-redux/tree/chapter-2" rel="noopener  ugc nofollow" target="_blank"><div class="pr ab fo"><div class="ps ab pt cl cj pu"><h2 class="bd iu gy z fp pv fr fs pw fu fw is bi translated">wesharehoodies/NASA-react-redux</h2><div class="px l"><h3 class="bd b gy z fp pv fr fs pw fu fw dk translated">导读:搭建一个React + Redux的app。通过在…上创建一个帐户，为wesharehoodies/NASA-react-redux开发做出贡献</h3></div><div class="py l"><p class="bd b dl z fp pv fr fs pw fu fw dk translated">github.com</p></div></div><div class="pz l"><div class="qa l qb qc qd pz qe ks pq"/></div></div></a></div><div class="pn po gp gr pp pq"><a href="https://redux.js.org/basics/actions" rel="noopener  ugc nofollow" target="_blank"><div class="pr ab fo"><div class="ps ab pt cl cj pu"><h2 class="bd iu gy z fp pv fr fs pw fu fw is bi translated">动作-重复</h2><div class="px l"><h3 class="bd b gy z fp pv fr fs pw fu fw dk translated">编辑描述</h3></div><div class="py l"><p class="bd b dl z fp pv fr fs pw fu fw dk translated">redux.js.org</p></div></div><div class="pz l"><div class="qf l qb qc qd pz qe ks pq"/></div></div></a></div><p id="282d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">非常感谢大家的阅读，保持牛逼！❤</p></div></div>    
</body>
</html>