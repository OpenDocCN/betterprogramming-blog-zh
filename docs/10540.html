<html>
<head>
<title>How to Declare Object Literals in TypeScript the Right Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何正确地在TypeScript中声明对象文本</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-declare-object-literals-in-typescript-the-right-way-63783365aa85?source=collection_archive---------12-----------------------#2022-01-13">https://betterprogramming.pub/how-to-declare-object-literals-in-typescript-the-right-way-63783365aa85?source=collection_archive---------12-----------------------#2022-01-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="516d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在本文中，您将看到在TypeScript中声明对象文本的不同方式</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/eefa9b4c5fafe6a5a1d1478d44dcca44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0uGK-eCu6p27B54Ip8glmw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">伊利亚·巴甫洛夫在<a class="ae ky" href="https://unsplash.com/s/photos/type?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="3bb4" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是对象文字？</h1><p id="bd8a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">对象文字是逗号分隔的名称-值对列表。想想JSON对象。下面是包含用户信息的对象文字:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个对象文字的例子</p></figure><p id="2a89" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">让我们看看在TypeScript中声明对象文字的不同方法，以及与它们相关的一些注意事项。</p><h1 id="f0d9" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">1.声明没有类型的对象文本</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">声明没有类型声明的对象文本</p></figure><p id="16cf" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">这是最简单的方法，因为您可以像在JavaScript中一样声明对象。但是，这也意味着您没有按照预期的方式使用TypeScript。</p><p id="257a" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">在前两条语句中，我试图访问对象成员的名字和<strong class="lt iu">电子邮件</strong>，并且运行良好。当我试图访问一个不存在的成员<strong class="lt iu">号</strong>时，TypeScript抛出了一个错误。我也不能添加任何新成员。</p><h1 id="4574" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">2.声明any类型的对象文本</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用any类型声明对象文本</p></figure><p id="6bff" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">如果你使用类型<code class="fe mu mv mw mx b">any</code>，当你试图访问一个不存在的成员时，你不会得到一个错误，你也可以在你的对象中添加新的成员。</p><p id="f46a" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">所以这一定是正确的方法，对吗？不要！</p><p id="cdd4" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">当你使用类型<code class="fe mu mv mw mx b">any</code>来声明时，它就像一个通配符。虽然使用<code class="fe mu mv mw mx b">any</code>会‘修复’前一节的错误，但会让类型系统变得毫无价值。</p><h1 id="c4a6" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">3.用Object类型声明对象文本</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用Object类型声明对象文本</p></figure><p id="72c5" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">如果你使用类型<code class="fe mu mv mw mx b">object</code>，你的对象文字将不会像你期望的那样工作。在第一个控制台语句中，虽然我试图访问<code class="fe mu mv mw mx b">user</code><strong class="lt iu"/>的一个成员，但是我得到了一个错误。尽管当您用类型错误声明对象文本时，TypeScript不会引发错误，但是当您试图访问该类的成员时，它将无法找到这些成员。与前一种情况类似，您也可以添加任何新成员。</p><h1 id="8029" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">4.使用类型记录<string any=""/></h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用类型记录<string any="">声明对象文字</string></p></figure><p id="bdde" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">这种情况类似于第二种情况，我们用类型<code class="fe mu mv mw mx b">any</code>声明了对象文字。如果您试图访问一个不存在的成员，并且可以向您的对象添加新成员，您将会得到一个未定义的错误。但是，这比使用一种类型的<strong class="lt iu"> </strong> <code class="fe mu mv mw mx b">any</code>要好。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用类型记录<string string="">声明对象文字</string></p></figure><p id="e236" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">不要用<code class="fe mu mv mw mx b">Record&lt;string,any&gt;</code>，你可以用<code class="fe mu mv mw mx b">Record&lt;string,string&gt;</code>或者<code class="fe mu mv mw mx b">Record&lt;string, string | number&gt;</code>。</p><p id="47fc" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">由于我在上面的例子中使用了<code class="fe mu mv mw mx b">Record&lt;string,string&gt;</code>，当我试图添加一个有数字值的成员时，TypeScript抛出一个错误。当您不知道对象文字的结构时，这是有用的，例如，来自API的响应对象。</p><h1 id="1030" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">5.创建声明时使用自定义类型</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用自定义类型声明来声明对象文本</p></figure><p id="a5ae" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">如果知道对象文本的结构，就可以在声明时指定类型。当您尝试添加新成员或尝试访问不存在的成员时，TypeScript将引发错误。虽然这是TypeScript的一个很好的用途，但是最好使用<code class="fe mu mv mw mx b">Interfaces</code>让你的代码看起来更整洁。</p><h1 id="57a2" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">6.使用接口</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用接口声明对象文本</p></figure><p id="ecaa" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">这种情况将显示与第五种情况相同的行为，但是它使您的代码看起来更加整洁，并且您将能够重用<code class="fe mu mv mw mx b">interface</code>来声明多个对象文字。您还可以从现有的<code class="fe mu mv mw mx b">interface</code>扩展，创建多个接口的联合，等等。</p><p id="1f66" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">在我的<code class="fe mu mv mw mx b">interface</code>里，我还把年龄加为可选成员；因此，尽管<code class="fe mu mv mw mx b">user1</code>没有成员年龄，但<code class="fe mu mv mw mx b">user2</code>有，TypeScript不会抛出错误。</p><h1 id="621d" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">那么，什么才是正确的方法呢？</h1><p id="5680" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这是我的看法。</p><p id="23b4" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">在大多数情况下，您应该尽可能使用接口。这可以确保您按照预期的方式使用TypeScript，并且有助于类型检查和自动完成建议。您可以为所有类型声明创建一个单独的文件，只需导入接口来分隔接口和代码逻辑。</p><p id="b9ea" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">然而，在某些情况下，当对象文字的结构太大或未知时，我建议使用<code class="fe mu mv mw mx b">Record&lt;string, any&gt;</code> <strong class="lt iu"> </strong>或者如果你可以更具体一些，根据你的用例使用<code class="fe mu mv mw mx b">Record&lt;string, string|number&gt;</code>或类似的东西。</p><p id="501c" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">我建议不要使用类型<code class="fe mu mv mw mx b">any</code> <strong class="lt iu"> </strong>或<strong class="lt iu"> </strong>不要像案例1和案例2那样声明类型。这降低了TypeScript的功能。</p><p id="9624" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">仅此而已。感谢阅读。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><pre class="kj kk kl km gt nf mx ng nh aw ni bi"><span id="5e35" class="nj la it mx b gy nk nl l nm nn"><strong class="mx iu">Want to Connect With the Author?</strong></span><span id="a62e" class="nj la it mx b gy no nl l nm nn">This article was originally posted on <a class="ae ky" href="https://www.realpythonproject.com/how-to-declare-object-literals-in-typescript-the-right-way/" rel="noopener ugc nofollow" target="_blank">realpythonproject.com</a></span></pre></div></div>    
</body>
</html>