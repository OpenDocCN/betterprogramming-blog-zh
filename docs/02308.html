<html>
<head>
<title>Stop Using For Loops to Iterate Over Arrays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止使用For循环迭代数组</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/stop-using-for-loops-to-iterate-over-arrays-5c46940e79d1?source=collection_archive---------0-----------------------#2019-11-21">https://betterprogramming.pub/stop-using-for-loops-to-iterate-over-arrays-5c46940e79d1?source=collection_archive---------0-----------------------#2019-11-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5d1d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">开始用。forEach()方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0d349381b5e78419c0194c3d62bf992d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hNylwA_6Ge7G52K3pxxNxQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">何塞·阿拉贡内塞斯在<a class="ae ky" href="https://unsplash.com/s/photos/stop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="8417" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为循环在我心中有着特殊的位置。很长一段时间，我依靠它们来远离while loops。不可避免地，这导致忘记增加我的计数器变量。使用for循环迭代一个数组的标准语法已经被写入内存:For i等于零，I小于length，I+plus…</p><p id="08bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我教编程时，我总是将while和for循环区分为使用后者进行已知次数的迭代。原因是所有的循环语法都被提前处理了——从而减少了错误(尤其是对学习者而言),并且在六个月后重新访问代码时，扫描代码的时间也变得更容易了。</p><p id="c430" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经开始远离我钟爱的迭代结构，转而在JavaScript中使用<code class="fe lv lw lx ly b">.forEach()</code>方法，你也应该这样做。与循环的样板相比，<code class="fe lv lw lx ly b">.forEach()</code>方法进一步减轻了开销，并且在传达代码意图时更加清晰。见鬼，这个方法的名字出现在描述这个块的口语句子中:对于数组中的每一项，做一些事情。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="ac79" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">是什么？forEach()方法？</h1><p id="0ffb" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">作为数组类的内置方法，<code class="fe lv lw lx ly b">.forEach()</code>是在ECMAScript 2015(也称为ES6)中引入的。</p><p id="34f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach" rel="noopener ugc nofollow" target="_blank"> Mozilla文档</a>，该方法将回调作为参数。不必深入讨论，回调是一个将对数组中的每一项执行的函数。这一点很关键，使用<code class="fe lv lw lx ly b">.forEach()</code>最适合于对每个项目的<em class="nd">执行相同操作的情况。该函数有一个必需的参数，即值，还有三个可选参数，分别用于索引、基数组和分配的<code class="fe lv lw lx ly b">this</code>值。</em></p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b579" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">一个基本例子</h1><p id="a629" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">为了演示<code class="fe lv lw lx ly b">.forEach()</code>方法的基本用法，让我们定义一个整数数组并将每个值的平方打印到控制台。</p><pre class="kj kk kl km gt ne ly nf ng aw nh bi"><span id="4023" class="ni mh it ly b gy nj nk l nl nm">let nums = [1,2,3,4,5];</span><span id="f2b7" class="ni mh it ly b gy nn nk l nl nm">nums.forEach(function(n) {<br/>   console.log(n ** 2); // 1, 4, 9, 16, 25<br/>});</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="2963" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">包括索引</h1><p id="f9b9" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">如果我们还想打印索引值呢？我们将在函数定义中包含第二个可选参数。</p><pre class="kj kk kl km gt ne ly nf ng aw nh bi"><span id="9ede" class="ni mh it ly b gy nj nk l nl nm">let nums = [1,2,3,4,5];</span><span id="bfa5" class="ni mh it ly b gy nn nk l nl nm">nums.forEach(function(n,i) {<br/>   console.log("i: " + n ** 2);<br/>});<br/>/*<br/>  0: 1<br/>  1: 4<br/>  2: 9<br/>  3: 16<br/>  4: 25<br/>*/</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="ce96" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">用存储值。forEach()</h1><p id="059f" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">如果您不想打印所有内容，而是将结果存储在一个新变量中，该怎么办？</p><pre class="kj kk kl km gt ne ly nf ng aw nh bi"><span id="ded4" class="ni mh it ly b gy nj nk l nl nm">let nums = [1,2,3,4,5];<br/>let result = nums.forEach(function(n) {<br/>   return(n ** 2);<br/>});<br/>console.log(result); // undefined</span></pre><p id="dab6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您在上面的代码片段中看到的，<code class="fe lv lw lx ly b">.forEach()</code>方法没有返回。现实是使用<code class="fe lv lw lx ly b">.map()</code>方法是正确的答案；但是，如果必须通过<code class="fe lv lw lx ly b">.forEach()</code>，那么可以手动对新数组进行分配。</p><pre class="kj kk kl km gt ne ly nf ng aw nh bi"><span id="1a7c" class="ni mh it ly b gy nj nk l nl nm">let nums = [1,2,3,4,5];<br/>let result = [];<br/>nums.forEach(function(n) {<br/>   result.push(n**2);<br/>});<br/>console.log(result); // [1,4,9,16,25];</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="8ebe" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">浓缩回调函数</h1><p id="4ea2" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">如果你想进一步压缩你的代码，考虑用一个箭头函数代替回调函数。</p><pre class="kj kk kl km gt ne ly nf ng aw nh bi"><span id="5258" class="ni mh it ly b gy nj nk l nl nm">let nums = [1,2,3,4,5];<br/><br/>nums.forEach((n) =&gt; {<br/>   console.log(n**2);<br/>});</span></pre><p id="ef85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实上，如果您只打算使用值(没有可选参数)，您可以跳过<code class="fe lv lw lx ly b">n</code>周围的括号，如果您的循环只有一条语句，您可以完全跳过花括号<code class="fe lv lw lx ly b">{}</code>。</p><pre class="kj kk kl km gt ne ly nf ng aw nh bi"><span id="1b84" class="ni mh it ly b gy nj nk l nl nm">let nums = [1,2,3,4,5];</span><span id="45bf" class="ni mh it ly b gy nn nk l nl nm">nums.forEach(n =&gt; console.log(n**2));</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="7063" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">有否定的吗？</h1><p id="0396" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">简而言之，答案是肯定的，在选择编写代码的方式时，总会有一些权衡。我遇到的一个潜在的缺点——它实际上不是缺点，只是鼓励更好的实践——是您不能像在for循环中那样修改每个索引中的原始值:</p><pre class="kj kk kl km gt ne ly nf ng aw nh bi"><span id="9663" class="ni mh it ly b gy nj nk l nl nm">let nums = [1,2,3,4,5];</span><span id="6273" class="ni mh it ly b gy nn nk l nl nm">for(let i=0; i&lt;nums.length; i++) {<br/>   nums[i] = nums[i] ** 2;<br/>}</span><span id="c85d" class="ni mh it ly b gy nn nk l nl nm">console.log(nums); // [1,4,9,16,25]</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="61bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="nd">更新:ES6中引入的</em> </strong> <code class="fe lv lw lx ly b"><strong class="lb iu"><em class="nd">for...of</em></strong></code> <strong class="lb iu"> <em class="nd">循环旨在将</em> </strong> <code class="fe lv lw lx ly b"><strong class="lb iu"><em class="nd">.forEach()</em></strong></code> <strong class="lb iu"> <em class="nd">替换为</em> </strong> <a class="ae ky" href="https://medium.com/better-programming/use-for-of-to-loop-through-your-javascript-arrays-57ebb900ab5a" rel="noopener"> <strong class="lb iu"> <em class="nd">更简单的约定，也就是更具执行性的</em> </strong> </a> <strong class="lb iu"> <em class="nd">。感谢分享这些信息的读者，非常感谢！</em> </strong></p></div></div>    
</body>
</html>