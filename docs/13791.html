<html>
<head>
<title>Build a Custom Design System Using Jetpack Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Jetpack Compose构建自定义设计系统</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/custom-design-system-using-jetpack-compose-17a59b1ae38d?source=collection_archive---------1-----------------------#2022-09-28">https://betterprogramming.pub/custom-design-system-using-jetpack-compose-17a59b1ae38d?source=collection_archive---------1-----------------------#2022-09-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9c54" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们用自己的实现替换Android的材料包</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/90e85e333cde2e07ba8a4999cc953f2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ex6wMZK46zZmPBf2J_qKJA.png"/></div></div></figure><p id="037a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这篇文章中，你会发现:</p><ul class=""><li id="1871" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">什么是设计系统</li><li id="c93b" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">Jetpack Compose中有哪些实现你的设计系统的方法</li><li id="2f96" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">如何实现一个基于基础包的设计系统，将素材库完全排除在你的项目之外。</li></ul><h1 id="017f" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">简而言之，设计系统</h1><p id="46fc" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">UI设计系统是用于设计和编码的标准的集合，它包括根据某些规则创建的一组组件，这些组件创建产品的单个UI概念。设计系统可以被看作是指令和一组组件，它们可以用来构建设计的最终版本。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><p id="b9fc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">设计系统通常分为几层:</p><ul class=""><li id="9d67" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">原子层:它是一组原子元素，例如，一组颜色、排版规则、组件角部形状、高度和填充。</li><li id="3d6e" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">分子层:它是一组基本的UI小部件，使用分子进行样式设计，功能最少。分子的一个例子可以是<code class="fe nf ng nh ni b">Text</code>、<code class="fe nf ng nh ni b">Icon</code>、<code class="fe nf ng nh ni b">Avatar</code>、<code class="fe nf ng nh ni b">Border</code>、<code class="fe nf ng nh ni b">Separator</code>成分。</li><li id="66ad" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">生物体层:是由一种或几种分子成分组成的成分。</li><li id="a081" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">屏蔽层:它是由有机体和分子组成的一组组件。</li></ul><p id="d092" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一种设计系统解决了以下问题:</p><ul class=""><li id="88c3" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">管理(设计和开发团队找到共同语言)</li><li id="f9dc" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">设计语境中的“真理的唯一源泉”</li><li id="8037" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">原子层的可变性(通过改变颜色、字体和边角形状的值，可以得到修改的UI样式)</li><li id="47b5" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">可扩展性(大型组件构建在较小的/预构建的组件之上)</li></ul><p id="8176" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">目前大公司的设计系统实现也不少。最著名的两个是:</p><ul class=""><li id="8ee3" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated"><a class="ae nj" href="https://material.io/" rel="noopener ugc nofollow" target="_blank">来自谷歌的材料设计</a></li><li id="356b" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated"><a class="ae nj" href="https://developer.apple.com/design/human-interface-guidelines/guidelines/overview/" rel="noopener ugc nofollow" target="_blank">苹果的人性化设计</a></li></ul><p id="280b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这些设计系统不仅在公司内部使用，也推荐在为Android和iOS设备编写的应用程序中实施。这些公司利用用户熟悉这种设计格式的事实来鼓励他们的使用，并且他们设计这些设计系统的方法是经过科学和实验证实的。</p><p id="5f60" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">其他设计系统的示例:</p><div class="nk nl gp gr nm nn"><a href="https://uxplanet.org/top-12-design-systems-to-steal-from-and-up-your-design-game-520235d7de76" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">从你的设计游戏中窃取并升级的12大设计系统</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">设计影响着我们所做的一切。</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">uxplanet.org</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob kp nn"/></div></div></a></div><p id="9f65" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">出于本文的目的，我从Figma社区门户中选择了一个相当原始但结构良好的设计系统。你可以跟随<a class="ae nj" href="https://www.figma.com/file/z2BtuZqLwoXw7gnXu8AZAL/Design-System-Foundation-(Community)?node-id=108%3A95" rel="noopener ugc nofollow" target="_blank">链接</a>观看它，同时跟随它在<a class="ae nj" href="https://github.com/ZadorozhnyiSemen/ComposeDesignSystem" rel="noopener ugc nofollow" target="_blank">项目</a>中的实现。</p><p id="903c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">看到这个设计系统的封面后，我决定把它命名为<code class="fe nf ng nh ni b">SpaceTheme</code>。</p><h1 id="299d" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">Jetpack Compose中的设计系统</h1><p id="d4c1" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">首先，值得一提的是<em class="oc"> Google </em>已经确保其设计系统在代码中实现。因此，开发人员能够获得现成的组件，并根据自己的判断对它们进行配置。</p><p id="7efd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nf ng nh ni b">androidx.compose.material</code>包在代码中负责这个——在代码中你可以找到很多现成的组件。其描述和规格可在官方<a class="ae nj" href="https://material.io/components/" rel="noopener ugc nofollow" target="_blank">材料设计文件中找到。</a></p><p id="3224" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">尽管存在现成的组件，但Google为项目中设计系统的定制和实现提供了空间。以下是谷歌对此的说法:</p><blockquote class="od oe of"><p id="d772" class="kr ks oc kt b ku kv jr kw kx ky ju kz og lb lc ld oh lf lg lh oi lj lk ll lm ij bi translated"><em class="iq">你可以采取几种方法:<br/>-</em>-<a class="ae nj" href="https://developer.android.com/jetpack/compose/themes/custom#extending-material" rel="noopener ugc nofollow" target="_blank">用额外的主题值<br/> - <a class="ae nj" href="https://developer.android.com/jetpack/compose/themes/custom#replacing-systems" rel="noopener ugc nofollow" target="_blank">扩展</a>-替换一个或多个材料系统</a>-<code class="fe nf ng nh ni b">Colors</code>、<code class="fe nf ng nh ni b">Typography</code>或<code class="fe nf ng nh ni b">Shapes</code>-用定制实现，同时保持其他<br/> - <a class="ae nj" href="https://developer.android.com/jetpack/compose/themes/custom#implementing-fully-custom" rel="noopener ugc nofollow" target="_blank">实现完全定制的设计系统</a>来替换<code class="fe nf ng nh ni b">MaterialTheme</code></p></blockquote><p id="1c2d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">根据我使用Jetpack Compose的经验和我的一些用它写项目的熟人的意见，前两种方法是开发人员最常用的方法。</p><p id="6e0d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在来自<em class="oc"> Tinder </em>的一篇新文章中，他们分享了他们在Compose集成方面的进展，并表示他们的主题也是建立在材料设计之上的，少数组件是在基础包的基础上编写的。你可以在他们的文章中找到更多信息。</p><div class="nk nl gp gr nm nn"><a href="https://medium.com/tinder/sparking-jetpack-compose-at-tinder-8f15d77eb4da" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">火花喷射包组成的火绒</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">作者:塔莎·拉梅什，软件工程师</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">medium.com</p></div></div><div class="nw l"><div class="oj l ny nz oa nw ob kp nn"/></div></div></a></div><p id="066b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">那么，‘<em class="oc">基于基础包</em>是什么意思呢？</p><p id="f9ed" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Jetpack Compose在体系结构上是分层构建的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/2b917c431c267d9f760dba7d1f6695b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZA6tLcT8bsPJ3RnfhJ1_fA.png"/></div></div></figure><p id="4c78" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在图的顶部，有实现材料设计的材料包。Jetpack Compose开发者暗示材料包是完全可选的，可以用你的定制设计系统替换。</p><p id="18c5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们工作的最终结果将包含以下层:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/516b17426d80f9bbd99a62f20fd86291.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bPnGSC8Tb19Q79F2BmblHg.png"/></div></div></figure><p id="0b87" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这就是我们将要做的:创建一个新的Compose项目，并通过删除材料包进行第一次提交。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/18d8f4faa2c50b53f3f5604ba10533cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mH631G6ogCyhoIwLVSTmTg.png"/></div></div></figure><h1 id="e3b4" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">设计系统主题的实现</h1><p id="c572" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">让我们从简单的事情开始。我们需要自己的替代方案来布置屏幕。让我们称它为<code class="fe nf ng nh ni b">SpaceTheme</code>，下面是它的实现:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="7da2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这意味着在设计系统中，我们把彩色排版和边角平滑作为原子。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/7957f846000aacc42049a8c63686e1e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gJD9A2DKEQk9jwHl5y6Egw.png"/></div></div><p class="op oq gj gh gi or os bd b be z dk translated"><a class="ae nj" href="https://www.figma.com/file/z2BtuZqLwoXw7gnXu8AZAL/Design-System-Foundation-(Community)?node-id=2%3A121" rel="noopener ugc nofollow" target="_blank">https://www . fig ma . com/file/z 2 btuzqlwoxw 7 gnxu 8 azal/Design-System-Foundation-(社区)？node-id=2%3A121 </a></p></figure><p id="f515" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">尽管在任何地方都没有描述拐角值，但在设计系统中组件的实现中可以清楚地看到这一点。这是设计系统作者的一个小错误，但不是关键错误。</p><p id="5171" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们从<code class="fe nf ng nh ni b">SpaceShapes</code>开始。我们总共有三种类型的弯角——8度、16度和45度。还有静态合成的<code class="fe nf ng nh ni b">LocalShapes</code>对象，这样就可以在代码中使用边角了。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="28b2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下一步是排版，只有9种字体和2种字体粗细——常规和粗体。<strong class="kt ir"> BM Plex Sans </strong>用作字体。可以从<a class="ae nj" href="https://fonts.google.com/specimen/IBM+Plex+Sans?query=ibm+ple" rel="noopener ugc nofollow" target="_blank">谷歌字体</a>下载。在构造函数中，我们为我们的字段设置默认值，并在文件末尾为静态组合<code class="fe nf ng nh ni b">LocalTypography</code>创建一个字段</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="575a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">颜色是编写这个设计系统最常规的部分，因为，不像定义了12种原色的材料，我们的系统有32种！以及<code class="fe nf ng nh ni b">lightSpaceColors</code> / <code class="fe nf ng nh ni b">darkSpaceColors</code>用于设置明暗主题的默认颜色值。</p><p id="f63f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，我们将创建一个<code class="fe nf ng nh ni b">contentColorFor</code>方法来确定内容在特定背景色上应该是什么颜色(这些颜色的映射是从设计系统的分析中计算出来的)。</p><p id="84be" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，我们将创建使用<code class="fe nf ng nh ni b">LocalColors</code>颜色和内容颜色<code class="fe nf ng nh ni b">LocalContentColor</code>的作品</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="2551" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所有这些类和完整的实现你可以在GitHub的项目包<code class="fe nf ng nh ni b"><a class="ae nj" href="https://github.com/ZadorozhnyiSemen/ComposeDesignSystem/tree/main/app/src/main/java/com/compose/designsystem/ui/theme" rel="noopener ugc nofollow" target="_blank">com.compose.designsystem.space.theme</a></code>中找到</p><p id="8b82" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在实现一个定制主题之后，我们可以继续实现基于它的组件。决定不用材料设计后先分析一下自己的能力。</p><h1 id="3114" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">我们绕过材料损失了什么成分</h1><p id="eea6" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">在实现这个设计系统的过程中，在我完成了原子的工作后，我立即着手小组件，这是我得到一个大惊喜的地方。</p><p id="0817" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们仔细看看设计系统中的链接组件由什么组成。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/88d63a08938717ebd48bad855f0c563d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*arUbfQAL36h69QpvTQvU9g.png"/></div></div><p class="op oq gj gh gi or os bd b be z dk translated"><a class="ae nj" href="https://www.figma.com/file/z2BtuZqLwoXw7gnXu8AZAL/Design-System-Foundation-(Community)?node-id=3%3A253" rel="noopener ugc nofollow" target="_blank">https://www . fig ma . com/file/z 2 btuzqlwoxw 7 gnxu 8 azal/Design-System-Foundation-(社区)？node-id=3%3A253 </a></p></figure><p id="e688" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nf ng nh ni b">Link</code>是几个组件的集合。文本在顶部，链接在文本之前或之后有图标，文本下方可以显示小边框，链接的背景可以改变。</p><p id="e464" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果我们在Compose中这样做，就像我们习惯的那样，我们将使用<code class="fe nf ng nh ni b">Surface</code>作为背景，<code class="fe nf ng nh ni b">Text</code>、<code class="fe nf ng nh ni b">Icon</code>和<code class="fe nf ng nh ni b">Border</code>作为其余组件。不过，有个小问题。所有这些组件都是材料包的一部分，所以我们必须自己实现它们。</p><pre class="kg kh ki kj gt ou ni ov ow aw ox bi"><span id="8ceb" class="oy mc iq ni b gy oz pa l pb pc">androidx.compose.material.Text(text = "Link")<br/>androidx.compose.material.Divider()<br/>androidx.compose.material.Icon(painter = .., contentDescription = null)<br/>androidx.compose.material.Surface()</span></pre><p id="204a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不过还好，因为key @Composable函数仍然由我们支配，比如<code class="fe nf ng nh ni b">Row</code>、<code class="fe nf ng nh ni b">Column</code>、<code class="fe nf ng nh ni b">Box</code>、<code class="fe nf ng nh ni b">Layout</code>、<code class="fe nf ng nh ni b">BasicText</code>、<code class="fe nf ng nh ni b">Spacer</code>、<code class="fe nf ng nh ni b">Image</code>以及各种<code class="fe nf ng nh ni b">Modifiers</code></p><h1 id="3818" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">从上到下的屏幕概述(从有机体到分子)</h1><p id="1caa" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">一个小小的免责声明:我们已经涵盖了创建你自己的主题所需要的一切。下面将描述来自设计系统的组件的实现。这种实现可以有很多变化。我关注的是具体的，而不是最复杂的。我不会完全描述所有的细微差别，但会强调几个组件实现中有趣的地方。</p><h2 id="3f0e" class="oy mc iq bd md pd pe dn mh pf pg dp ml la ph pi mn le pj pk mp li pl pm mr pn bi translated"><a class="ae nj" href="https://github.com/ZadorozhnyiSemen/ComposeDesignSystem/blob/main/app/src/main/java/com/compose/designsystem/application/first/FirstSpaceScreen.kt" rel="noopener ugc nofollow" target="_blank">交易历史画面</a></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi po"><img src="../Images/bd5522925422a5254afdfe0b69cfcd00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l81NUrAPcxvdWFp0-VMXOA.png"/></div></div></figure><p id="a074" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个需要<code class="fe nf ng nh ni b">Text</code>、<code class="fe nf ng nh ni b">Border</code>、<code class="fe nf ng nh ni b">Icon</code>、<code class="fe nf ng nh ni b">Tabs</code>、<code class="fe nf ng nh ni b">Tab</code>、<code class="fe nf ng nh ni b">NavBar</code>和<code class="fe nf ng nh ni b">NavTab</code>等部件</p><p id="c7fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们从<code class="fe nf ng nh ni b">Text</code>组件开始:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="4306" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里值得注意的是对<code class="fe nf ng nh ni b">takeOrElse</code>函数的调用顺序，这些函数用于确定文本的颜色。我们优先考虑开发人员设置的颜色。如果是<code class="fe nf ng nh ni b">Undefined</code>，我们从提供的文本样式中获取颜色。如果来自文本样式的颜色也是<code class="fe nf ng nh ni b">Undefined</code>，那么我们从静态合成中取值，它总是不未定义的，可以是默认的。在我的项目中它是黑色的。</p><p id="ebdb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nf ng nh ni b">LocalContentColor.current</code>也允许我们改变颜色，例如，如果我们有一个按钮，它覆盖其内容的颜色值，这样的例子可以在下面找到。</p><p id="0f5c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了显示文本，我们从基础包中取出<code class="fe nf ng nh ni b">BasicText</code>并将信息传递给它。</p><p id="ed39" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里就不涉及<code class="fe nf ng nh ni b">Divider</code>了，它是材料包里<code class="fe nf ng nh ni b">Divider</code>的完整拷贝。</p><p id="e704" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们也不会为<code class="fe nf ng nh ni b">Icon</code>使用任何额外的东西。简单的<code class="fe nf ng nh ni b">Box</code>和<code class="fe nf ng nh ni b">toolingGraphicsLayer</code>与<code class="fe nf ng nh ni b">paint</code>修改器的组合就足够了。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="baae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nf ng nh ni b">Tabs</code>和<code class="fe nf ng nh ni b">NavBar</code>生物体包含更小成分的<code class="fe nf ng nh ni b">Row</code>。下面有一个<code class="fe nf ng nh ni b">Tabs</code>的实现。<code class="fe nf ng nh ni b">NavBar</code>也是用类似的方法制成的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="11f5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这一部分中的<code class="fe nf ng nh ni b">Surface</code>成分值得注意。它不在基础包中，本质上，它是一个在<code class="fe nf ng nh ni b">Box</code>之上的方便的包装器，封装了颜色、形状和语义的设置，以保证框架的可访问性。你也可以在这里找到重新定义内容颜色的例子。放置在这样的<code class="fe nf ng nh ni b">Surface</code>上，<code class="fe nf ng nh ni b">Text</code>组件将使用<code class="fe nf ng nh ni b">LocalContentColor.current</code>来设置文本颜色</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="cdc2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nf ng nh ni b">Tab</code>和<code class="fe nf ng nh ni b">NavTab</code>组件稍微复杂一点，你可以在这里找到它们的<a class="ae nj" href="https://github.com/ZadorozhnyiSemen/ComposeDesignSystem/tree/main/app/src/main/java/com/compose/designsystem/space/atoms" rel="noopener ugc nofollow" target="_blank">实现</a>。</p><p id="4e04" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在剩下要做的就是把所有组件放在一个屏幕上。屏幕本身可以在<a class="ae nj" href="https://github.com/ZadorozhnyiSemen/ComposeDesignSystem/blob/main/app/src/main/java/com/compose/designsystem/application/first/FirstSpaceScreen.kt" rel="noopener ugc nofollow" target="_blank"> GitHub上找到。</a></p><h2 id="27cd" class="oy mc iq bd md pd pe dn mh pf pg dp ml la ph pi mn le pj pk mp li pl pm mr pn bi translated"><a class="ae nj" href="https://github.com/ZadorozhnyiSemen/ComposeDesignSystem/blob/main/app/src/main/java/com/compose/designsystem/application/second/SecondSpaceScreen.kt" rel="noopener ugc nofollow" target="_blank">带底板的屏幕</a></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pp"><img src="../Images/f9d2004d290375455a56e613d52af758.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CgIEiI0nlZn-f-5DWMRsmQ.png"/></div></div></figure><p id="77fc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这里，我们添加了<code class="fe nf ng nh ni b">Button</code>组件和在部分屏幕上打开<code class="fe nf ng nh ni b">BottomSheet</code>的功能</p><p id="6130" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们从按钮开始:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pq"><img src="../Images/ccf28c47e3cccd37068041c2ca9e901a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bXm7iN1vxueUi_QKCTJ47w.png"/></div></div></figure><p id="e51a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从设计中可以看出，我们必须配置按钮的类型——颜色取决于此。您可以在文本之前和之后向按钮添加图标，以及配置按钮的形状。</p><p id="db77" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我使用了基于插槽的API，以防我们想要插入文本之外的东西。基于插槽是关于传递一个或多个<code class="fe nf ng nh ni b">@Composable</code>函数，以便不严重限制组件的实现。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="6b0d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">默认情况下，按钮使用<code class="fe nf ng nh ni b">SpaceTheme.typography.h4</code>版式，只是在<code class="fe nf ng nh ni b">Row</code>上用很少的填充来布局组件。</p><p id="0ce4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">之后，您可以编写一个简单的屏幕实现来显示<code class="fe nf ng nh ni b">BottomSheet</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="9a91" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nf ng nh ni b">BottomSheetScreenStack</code>在这个例子中负责将不同层次的内容绘制在屏幕上的方式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="fa3e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是我们为组件创建<code class="fe nf ng nh ni b">Layout</code>的地方，内容占据了整个屏幕，而<code class="fe nf ng nh ni b">BottomSheet</code>被固定在屏幕的底部。</p><h2 id="bcfc" class="oy mc iq bd md pd pe dn mh pf pg dp ml la ph pi mn le pj pk mp li pl pm mr pn bi translated"><a class="ae nj" href="https://github.com/ZadorozhnyiSemen/ComposeDesignSystem/blob/main/app/src/main/java/com/compose/designsystem/application/third/ThirdSpaceScreen.kt" rel="noopener ugc nofollow" target="_blank">提示屏幕</a></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pr"><img src="../Images/9555a6ede8d6a64571bf2579f7faf25d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b5OPKZOS0QfHKeQ5FEgJFw.png"/></div></div></figure><p id="108f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里最大的挑战是向用户显示对话。材料上用<code class="fe nf ng nh ni b">AlertDialog</code>处理。基础包为我们提供了<code class="fe nf ng nh ni b">@Composable</code> <code class="fe nf ng nh ni b">Dialog</code>，我们只需要将它包装在我们的<code class="fe nf ng nh ni b">Prompt</code>中，并定义它的样式和内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><h2 id="8967" class="oy mc iq bd md pd pe dn mh pf pg dp ml la ph pi mn le pj pk mp li pl pm mr pn bi translated"><a class="ae nj" href="https://github.com/ZadorozhnyiSemen/ComposeDesignSystem/blob/main/app/src/main/java/com/compose/designsystem/application/forth/ForthSpaceScreen.kt" rel="noopener ugc nofollow" target="_blank">结账屏幕</a></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pr"><img src="../Images/bcdb978a6df0095d990ffbb3b497df40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yVKHsPVsS0ECkLkEi0FCbg.png"/></div></div></figure><p id="f6d7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这里，<code class="fe nf ng nh ni b">Form/Card</code>有机体是一个值得注意的东西，它本质上包含内容和一个确认按钮</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="875c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nf ng nh ni b">InputGroup</code>和<code class="fe nf ng nh ni b">SelectGroup</code>是包含标题、用于输入或选择选项的字段和副标题的小有机体。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ps"><img src="../Images/a9fdba262f99ac964cad0f56a7db6455.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pDVhG8Giz6D7PtWO18iLHw.png"/></div></div></figure><p id="50e8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这些组件并没有什么有趣的地方，但是input field本身是值得关注的。基础包提供了处理用户输入并显示在屏幕上的<code class="fe nf ng nh ni b">BasicTextField</code>。对于可视组件，使用了<code class="fe nf ng nh ni b">decorationBox</code>字段</p><pre class="kg kh ki kj gt ou ni ov ow aw ox bi"><span id="76c1" class="oy mc iq ni b gy oz pa l pb pc">decorationBox: @Composable (innerTextField: @Composable () -&gt; Unit) -&gt; Unit =<br/>        @Composable { innerTextField -&gt; innerTextField() }</span></pre><p id="12d3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">它是一个@Composable组件，您可以定义自己并在其中添加一个<code class="fe nf ng nh ni b">innerTextField</code>。</p><h2 id="c337" class="oy mc iq bd md pd pe dn mh pf pg dp ml la ph pi mn le pj pk mp li pl pm mr pn bi translated"><a class="ae nj" href="https://github.com/ZadorozhnyiSemen/ComposeDesignSystem/blob/main/app/src/main/java/com/compose/designsystem/application/fifth/FifthSpaceScreen.kt" rel="noopener ugc nofollow" target="_blank">配置文件屏幕</a></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ps"><img src="../Images/1c1b6c76f1a9ae9804bdecbca4ca4bd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QrCaDMIbbR254onCnZ2oTg.png"/></div></div></figure><p id="5479" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个屏幕基于已经存在的组件，唯一添加的小部件是<code class="fe nf ng nh ni b">Avatar</code>。使用<code class="fe nf ng nh ni b">Box</code>很容易实现它，并且没有独特的方法。为了不使它太长，我将不描述它的实现。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><h1 id="16d2" class="mb mc iq bd md me pt mg mh mi pu mk ml jw pv jx mn jz pw ka mp kc px kd mr ms bi translated">结论</h1><p id="d4e3" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">在本文中，我们讨论了:</p><ul class=""><li id="30a8" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">什么是设计系统，它的用途是什么</li><li id="0a40" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">设计系统是如何在Jetpack Compose中实现的，有哪些方法可以实现你自己的主题</li><li id="1764" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">如何在不使用材料设计的情况下实现你的主题</li><li id="9e0c" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">用于创建多个屏幕的定制设计系统上的组件实现示例</li></ul><p id="ec05" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我想提醒您，整个实现在项目中是公开可用的:</p><div class="nk nl gp gr nm nn"><a href="https://github.com/ZadorozhnyiSemen/ComposeDesignSystem" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">GitHub-ZadorozhnyiSemen/ComposeDesignSystem:自定义设计系统</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">github.com</p></div></div><div class="nw l"><div class="py l ny nz oa nw ob kp nn"/></div></div></a></div><p id="70a2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我的主要目标是尝试使用Jetpack Compose来绕过material包，因为在制作项目中，我习惯于在material之上编写所有的设计。</p><p id="c1b7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从我个人的经验来看，如果你在项目上已经有了一个很完善的设计系统，而且看起来不像是材料设计，那么自己实现，仅仅以材料上的代码为例，会更好，因为现在Compose中的很多东西都是非常具体的，并且是和材料设计的规范捆绑在一起的。例如，如果您需要在<code class="fe nf ng nh ni b">Scaffold</code>中从屏幕顶部显示<code class="fe nf ng nh ni b">Snackbar</code>，那么您必须自己实现<code class="fe nf ng nh ni b">Scaffold</code>。</p><p id="6b25" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当我在写测试项目的时候，我花了大部分时间在颜色、排版和一些组件上。在我写完组件之后，布置屏幕就像布置材料组件一样简单。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><p id="bf85" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">目前为止，如果您对Jetpack Compose的MVI感兴趣，您可以通过下面的链接阅读有关该主题的一系列文章:</p><div class="nk nl gp gr nm nn"><a href="https://szadorozhnyi.medium.com/mvi-for-compose-part-1-ece0654bc25" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">作曲MVI(上)</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">MVVM的问题和好处</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">szadorozhnyi.medium.com</p></div></div><div class="nw l"><div class="pz l ny nz oa nw ob kp nn"/></div></div></a></div></div></div>    
</body>
</html>