# “如果”的多面性以及程序员如何误用它

> 原文：<https://betterprogramming.pub/the-many-faces-of-if-and-how-programmers-misuse-it-1d51842db7a7>

## 正确使用条件语句的 8 种方法

![](img/f7d041fb7282e9f11d7b47e77a698151.png)

如果没有条件语句，编程会是什么样子？这可能是所有编程中最常用的逻辑检查点之一，如果没有它，我们将会迷失方向。不幸的是，尽管将这个决策点添加到您的代码中很简单，但它并不能避免误用。在我 20 年的程序员生涯中，我见过其他程序员犯的一些有趣的错误。排名不分先后，以下是八个基于现实生活中带有“如果”的问题的例子，以及这些问题发生的可能原因。

# 1)布尔运算上的 If/Else

if 语句的基本原理是当一个条件的值为真时，进入一个逻辑块。一个补充特性是布尔数据类型，它用于指示真或假。他们经常一起使用，但在这个例子中，他们不应该在一起。if/else 逻辑不是必需的，布尔值本身就足够了。这里有一个例子:

## **出现这种情况的可能原因:**

*   真或假场景中可能有附加逻辑，但后来被删除了。剩余的代码没有更新以反映这一变化。
*   他们没有注意。在编码时，分区并不罕见。
*   从逻辑上讲，代码是有意义的。仅此一点就足以让一个程序员继续前进，而不用把它变得更好。

# 2)重复的 if

在 if 语句中反复使用相同的条件应该会在你的脑海中引发一些问题。人们希望如此。这个例子是在使用*ngIf 的角度模板的上下文中，这是它们的内联 If 语句版本。使用它们时也适用同样的规则，就像编码中的大多数事情一样，应该避免重复的逻辑。下面是一些糟糕代码的例子:

## 发生这种情况的可能原因:

*   没有意识到一个 [ng 容器](https://angular.io/api/core/ng-container)可以和一个*ngIf 一起使用。
*   对他们来说，单独考虑每个 if 块可能更容易。
*   他们忘记了[干](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)(不要重复自己)的编码原则。

# 3)冗长的如果，甚至还有速记

这些天我最喜欢的快捷方式是[无效合并操作符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator)？？。在 ES2020 中引入 or 运算符之前，我使用了 OR 运算符||，但是它的错误行为并不总是适用。下面是当 options 对象为空时初始化它的三个例子。

## **出现这种情况的可能原因:**

*   有人爱用[三元运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator)。我尽可能经常使用它，但是对于这个场景有更好的选择。
*   尽管 OR 操作符技术已经存在很多年了，但并不是每个人都乐于使用它。如果你不小心，它的虚假行为可能会出乎意料。
*   不是每个人都知道零化合并运算符。它是在 2020 年推出的，所以它还是相当新的。

# 4)反向 If/Else 逻辑

有时候当你编码时，你的思维方式并不总是与你应该如何编码同步。这可能会导致一些逆向逻辑，即在处理更具体的情况之前先处理一般情况。

## 发生这种情况的可能原因:

*   第一种情况很好，但是他们可能忘记了这是 if/else 行为的反模式。else 情况应该是 catch-the-rest 选项，而不是相反。
*   这可能是他们的思维发展，但从程序上来说，有一种正确的做事方式。
*   有些人喜欢先考虑“不平等”的情况。这可能是偏好的问题。

# 5)对于字符串形式的布尔值，不需要 If/Else

有时候，在处理 REST 服务时，您可能会遇到用字符串表示的布尔值。反过来，对服务进行更新可能需要以同样的方式发送回来。

## 发生这种情况的可能原因:

*   第一种方式在视觉上更显而易见，可能更适合用来查看布尔值的字符串表示。
*   没有意识到 [toString](https://www.tutorialsteacher.com/javascript/javascript-boolean) 方法是布尔比较的可行选项。
*   同样，有些人真的很喜欢三元运算符，它被认为是简写。在这种情况下，有一个更短更好的方法。

# 6)长 If/Else 块

编码中的一个常见场景是在一行中有多个条件语句。当条件不容易关联时，这很好，但是当事情开始看起来重复时，他们应该考虑使用[开关语句](https://www.w3schools.com/js/js_switch.asp)。

## 发生这种情况的可能原因:

*   不是每个人都喜欢 switch 语句。与链接 if 语句相比，构建它需要更多的设置。此外，需要通过添加中断语句或返回来考虑失败行为。
*   一些 if 块可能已经存在，添加更多的 if 块更容易。他们不想麻烦地转换成 switch 语句。
*   如果需要将其他标准添加到 if 条件中，第一种方法在技术上更灵活。也许他们期待着以后添加更多。

# 7)嵌套 if

有时候，您希望在执行特定操作之前通过多个 if 条件。这是嵌套 if 可能出现的地方，但是它可能很快变得很难看。逻辑&&和||有助于补救过度嵌套。

## 发生这种情况的可能原因:

*   他们可能不喜欢使用逻辑运算符。这将是令人惊讶的，因为他们是计算机科学的核心，但不是每个人都有计算机科学背景。
*   这两个场景的行为是相同的，它们的阅读方式也几乎相同。然而，第二个选项更简洁，需要的代码更少。
*   有时，当 if 条件中有多个逻辑运算符和换行时，会变得难以阅读。第一种方式可能是自然避免这种情况。

# 8)布尔比较不需要 If/Else

当你知道你需要返回一个布尔值，而你的函数中的主要比较结果是一个布尔值，你认为会发生什么？你可能认为这是显而易见的，但是我已经看到了这个错误的发生。

## 发生这种情况的可能原因:

*   三元运算符很棒，但你知道什么更好吗？根本不用它。也许他们真的想使用三元运算符。
*   这可能是一个复制/粘贴错误，由于存在一个三元运算符，他们认为需要将值放入其中。
*   老实说，为这个错误想出一个好的借口太难了。

# 结论

尽管条件 if 语句非常有用，但程序员偶尔会以奇怪或非最佳的方式使用它。有些人可能会争辩说，现在计算机速度如此之快，以至于几行额外的代码不会使它们同步。我不认为这是最好的心态。关于努力使代码尽可能高效，有一些东西要说。一般来说，这是一个好的程序员习惯。

感谢阅读，善待那些 if 语句！