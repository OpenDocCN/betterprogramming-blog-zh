<html>
<head>
<title>How to Visualize Football Passing Networks Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python可视化足球传球网络</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-visualize-football-passing-networks-using-python-6f6582aa8005?source=collection_archive---------5-----------------------#2022-08-15">https://betterprogramming.pub/how-to-visualize-football-passing-networks-using-python-6f6582aa8005?source=collection_archive---------5-----------------------#2022-08-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="25cc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从团队的比赛模式中获得洞察力</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ac5fb0e91c1a5335752efe885fd68777.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pvbM0poY5sk4Kw5qzMZY4Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">本斯·巴拉-肖特纳在<a class="ae ky" href="https://unsplash.com/s/photos/football?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="7ac6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将向您展示如何使用Python可视化经过的网络。如果您对可视化还不熟悉，结果将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/8143b000c656b47393876dd74efb0912.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tkzDENTC4w_SASHz0wAC3Q.png"/></div></div></figure><p id="7efa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么什么是传球网呢？传球网络是一种形象化的方式，用传球来表现一个球队的比赛模式。</p><p id="8859" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从那里，我们可以看到每个球员是如何通过传球次数和谁的接球手来相互影响的。还有，我们可以看到球员在那场比赛中的平均位置如何。</p><p id="5808" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事不宜迟，我们开始吧！</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b102" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">履行</h1><h2 id="e1c6" class="mv me it bd mf mw mx dn mj my mz dp mn li na nb mp lm nc nd mr lq ne nf mt ng bi translated">数据源</h2><p id="4fb6" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">我们将使用来自StatsBomb开放数据的数据源。该数据包含欧洲冠军联赛决赛、2018年世界杯、2020年欧洲杯、西甲联赛等比赛的足球赛事数据。</p><p id="01f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要访问数据，可以通过GitHub库<a class="ae ky" href="https://github.com/statsbomb/open-data" rel="noopener ugc nofollow" target="_blank">这里的<strong class="lb iu"/></a>来访问。现在让我们访问数据。</p><p id="4429" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我们将在上半年创建利物浦的传球网络。我们将使用“伊斯坦布尔奇迹”比赛作为源数据。</p><p id="fba4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为数据是分文件夹的，所以我们要找到对应的标识匹配的id。</p><p id="be96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">检索数据有几个步骤。首先，我们需要查看competitions.json文件，并过滤包含欧洲冠军联赛比赛的数据。下面是实现这一点的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="31df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比赛在2004/2005赛季举行。从上面可以看到，对应的比赛和赛季id分别是16和37。让我们使用这些id来检索那个赛季的所有比赛。下面是实现这一点的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="c43c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从上面可以看到，匹配对应的id是2302764。该id也用作包含匹配事件数据的文件名。</p><p id="1907" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然数据是JSON格式的，但是我们可以使用pandas和json_normalize函数打开数据。让我们通过使用这些代码行来打开数据:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="3e17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们希望将数据分成两半，所以我们将首先过滤数据。下面是实现这一点的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="1e7d" class="mv me it bd mf mw mx dn mj my mz dp mn li na nb mp lm nc nd mr lq ne nf mt ng bi translated">行动（或活动、袭击）计划</h2><p id="132c" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">现在我们有了数据。为了生成传递网络，我们需要执行几个步骤。这些步骤如下:</p><ul class=""><li id="a53c" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated">过滤包含有关通行证信息的数据，</li><li id="b211" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">得到两个不同球员之间传球次数的数据，</li><li id="83d1" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">获取玩家的平均位置数据，</li><li id="9dba" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">结合这些数据，</li><li id="846b" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">根据上场时间检索前11名球员，</li><li id="aa5a" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">最后，生成传递网络。</li></ul><h2 id="2ab4" class="mv me it bd mf mw mx dn mj my mz dp mn li na nb mp lm nc nd mr lq ne nf mt ng bi translated">过滤数据</h2><p id="6f81" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">我们需要做的第一步是过滤数据。我们过滤包含通行证信息的数据。我们可以用熊猫来过滤数据。下面是实现这一点的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="a556" class="mv me it bd mf mw mx dn mj my mz dp mn li na nb mp lm nc nd mr lq ne nf mt ng bi translated">检索球员之间的传球次数</h2><p id="624f" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">在我们得到数据后，我们需要计算球员之间的传球次数。为此，我们需要检索像传递者姓名、接收者姓名和时间戳这样的列作为诱饵。下面是实现这一点的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="7567" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了计算特定对之间的传递次数，我们需要首先创建一个标识符。下面是实现这一点的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="395f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，我们可以通过使用计数基于标识符聚合它们来计算传递的数量。让我们使用这几行代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="500a" class="mv me it bd mf mw mx dn mj my mz dp mn li na nb mp lm nc nd mr lq ne nf mt ng bi translated">计算玩家的平均位置</h2><p id="6ff2" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">下一步我们需要做的是计算玩家的平均位置。为此，我们需要检索像玩家姓名和位置这样的列。下面是实现这一点的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="d5d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们检索列之后，我们通过根据玩家的名字聚集数据来计算玩家的平均位置。</p><p id="b353" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为location列是列表格式的，所以我们需要创建两个列，分别表示x和y坐标。下面是实现这一点的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="d6c2" class="mv me it bd mf mw mx dn mj my mz dp mn li na nb mp lm nc nd mr lq ne nf mt ng bi translated">合并两种数据</h2><p id="d8d9" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">在我们得到我们需要的数据后，下一步是合并数据。我们将合并包含不同对之间的传球次数以及球员平均位置的数据。</p><p id="5ec6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们已经创建了标识符，所以我们可以更容易地连接数据。以下是合并包含通道数的数据的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="cf69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要合并球员的平均位置数据，我们可以使用merge函数，并使用球员的名字作为标识符。下面是实现这一点的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="0f4a" class="mv me it bd mf mw mx dn mj my mz dp mn li na nb mp lm nc nd mr lq ne nf mt ng bi translated">检索出场时间最多的11名球员</h2><p id="b6a1" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">因为我们想要创建传球网络，所以一个球队有可能在一场比赛中有超过11名球员。</p><p id="ec7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们需要过滤数据，检索利物浦的前11名球员。下面是实现这一点的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="1352" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">获得前11名玩家后，我们可以使用以下代码行过滤数据:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="db73" class="mv me it bd mf mw mx dn mj my mz dp mn li na nb mp lm nc nd mr lq ne nf mt ng bi translated">建立传递网络</h2><p id="664f" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">但是等等，在我们这样做之前，我们需要再创建一个列来表示我们的传球网络的宽度，其中宽度将被用作决定传球频率的标记。下面是实现这一点的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="b98d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经到了最后一步，那就是建立传球网络。为了生成可视化效果，下面是实现这一点的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="cbf1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我知道这是一长串代码。如果您想了解关于该代码的更多细节，可以通过这里的链接阅读mplsoccer库中的文档。此外，您可以通过下面的链接阅读我关于mplsoccer库的文章:</p><div class="oc od gp gr oe of"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-visualize-soccer-data-using-mplsoccer-in-python-39e2eddfb7d9"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">如何在Python中使用Mplsoccer可视化足球数据</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">每个人的足球分析。</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">better编程. pub</p></div></div><div class="oo l"><div class="op l oq or os oo ot ks of"/></div></div></a></div></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="714a" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结束语</h1><p id="cc63" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">干得好！现在，您已经了解了如何使用Python生成传递网络。我希望你能学到很多东西，比如聚合数据、过滤数据、创建可视化等等。</p></div></div>    
</body>
</html>