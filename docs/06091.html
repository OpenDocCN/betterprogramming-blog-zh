<html>
<head>
<title>Props Drilling in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中的道具演练</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/props-drilling-in-react-12da084aaf51?source=collection_archive---------15-----------------------#2020-09-01">https://betterprogramming.pub/props-drilling-in-react-12da084aaf51?source=collection_archive---------15-----------------------#2020-09-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="207f" class="pw-subtitle-paragraph jv ip iq bd b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dk translated">什么是道具钻，有没有更好的方法？</h2></div><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/5cc261eb35af94b1182f5c60120a77d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aHvK7Rbt_Dv74mWq.png"/></div></div><p class="kz la gj gh gi lb lc bd b be z dk translated">轮廓-图像</p></figure><p id="1b22" class="pw-post-body-paragraph ld le iq lf b lg lh jz li lj lk kc ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">本文将涵盖两个主题:</p><ul class=""><li id="8455" class="lz ma iq lf b lg lh lj lk lm mb lq mc lu md ly me mf mg mh bi translated">什么是道具钻？</li><li id="558a" class="lz ma iq lf b lg mi lj mj lm mk lq ml lu mm ly me mf mg mh bi translated">如何回避道具演练</li></ul></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="6af1" class="mu mv iq bd mw mx my mz na nb nc nd ne ke nf kf ng kh nh ki ni kk nj kl nk nl bi translated">什么是道具钻？</h1><p id="b316" class="pw-post-body-paragraph ld le iq lf b lg nm jz li lj nn kc ll lm no lo lp lq np ls lt lu nq lw lx ly ij bi translated">首先，让我们回顾一下我们所知道的道具概念。道具是我们传递或可以访问的数据，从顶级组件到我们网站上任意数量的子组件。请看这张图表:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/3ed001ccbf8247369501f9f5dde89629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*9z5R6d1p7dCHaO24Vm13jA.jpeg"/></div><p class="kz la gj gh gi lb lc bd b be z dk translated"><strong class="bd ns">图表1。</strong></p></figure><p id="21a7" class="pw-post-body-paragraph ld le iq lf b lg lh jz li lj lk kc ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">图2显示了支柱钻孔(也称为螺纹钻孔):</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/68c9f0c26af55eb7c2d5c843d9f6c6a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*l8L4O2GM6tUw1m6fz3FN-g.jpeg"/></div><p class="kz la gj gh gi lb lc bd b be z dk translated">图表2。</p></figure><p id="c815" class="pw-post-body-paragraph ld le iq lf b lg lh jz li lj lk kc ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">Props drilling(线程)指的是将数据从父组件传递到<em class="nu">确切的</em>子组件的过程。<em class="nu">但是，</em>在这两者之间，拥有<em class="nu">道具的其他组件只是将它向下传递。</em></p><p id="9f41" class="pw-post-body-paragraph ld le iq lf b lg lh jz li lj lk kc ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">那么，道具钻和我们的数据有什么联系呢？</p><p id="5c51" class="pw-post-body-paragraph ld le iq lf b lg lh jz li lj lk kc ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">嗯，利奥已经获得了7次奥斯卡提名，他只是因为在电影《荒野猎人》中的角色而获奖然而，在React.js的世界里，他的名字是你传递给<em class="nu">不止一级的道具，即使他们不需要它，直到它到达你使用道具的那一级。</em></p><p id="4526" class="pw-post-body-paragraph ld le iq lf b lg lh jz li lj lk kc ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">你可以在这个</strong> <a class="ae nv" href="https://codesandbox.io/s/propsdriling-qhm6i?file=/src/App.js" rel="noopener ugc nofollow" target="_blank"> <strong class="lf ir">链接</strong> </a> <strong class="lf ir">看到代码。</strong></p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="943a" class="mu mv iq bd mw mx my mz na nb nc nd ne ke nf kf ng kh nh ki ni kk nj kl nk nl bi translated">如何回避道具演练？</h1><p id="7605" class="pw-post-body-paragraph ld le iq lf b lg nm jz li lj nn kc ll lm no lo lp lq np ls lt lu nq lw lx ly ij bi translated">避免支柱钻孔有几种解决方案:</p><ul class=""><li id="fc87" class="lz ma iq lf b lg lh lj lk lm mb lq mc lu md ly me mf mg mh bi translated">反应上下文API。</li><li id="a65e" class="lz ma iq lf b lg mi lj mj lm mk lq ml lu mm ly me mf mg mh bi translated">作文。</li><li id="5498" class="lz ma iq lf b lg mi lj mj lm mk lq ml lu mm ly me mf mg mh bi translated">渲染道具。</li><li id="21b8" class="lz ma iq lf b lg mi lj mj lm mk lq ml lu mm ly me mf mg mh bi translated">特设。</li><li id="a675" class="lz ma iq lf b lg mi lj mj lm mk lq ml lu mm ly me mf mg mh bi translated">Redux或者MobX。</li></ul></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="75ca" class="mu mv iq bd mw mx my mz na nb nc nd ne ke nf kf ng kh nh ki ni kk nj kl nk nl bi translated">通过使用React上下文API钻取来避免道具</h1><p id="3b28" class="pw-post-body-paragraph ld le iq lf b lg nm jz li lj nn kc ll lm no lo lp lq np ls lt lu nq lw lx ly ij bi translated">首先，您需要初始化上下文。你可以在js文件中或者在父组件的顶部这样做:<code class="fe nw nx ny nz b"><strong class="lf ir">const</strong> MyContext = React.createContext() ;</code></p><p id="cd1b" class="pw-post-body-paragraph ld le iq lf b lg lh jz li lj lk kc ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">之后，继续创建您的提供者并在其中使用上下文。然后，我们需要使用上下文并使用它来扭曲组件，这将在其中注入上下文参数。</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="1cf3" class="pw-post-body-paragraph ld le iq lf b lg lh jz li lj lk kc ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">之后，事情就很简单了。你可以像使用道具一样使用上下文。</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="81b8" class="pw-post-body-paragraph ld le iq lf b lg lh jz li lj lk kc ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><em class="nu">注:这里</em>  <em class="nu">可以看到</em> <a class="ae nv" href="https://codesandbox.io/s/avoid-props-drilling-using-context-api-8cbfi" rel="noopener ugc nofollow" target="_blank">的代号。</a></p><p id="c96f" class="pw-post-body-paragraph ld le iq lf b lg lh jz li lj lk kc ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">恭喜你，你做到了！</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="dc98" class="mu mv iq bd mw mx my mz na nb nc nd ne ke nf kf ng kh nh ki ni kk nj kl nk nl bi translated">2.避免道具钻构图</h1><p id="add4" class="pw-post-body-paragraph ld le iq lf b lg nm jz li lj nn kc ll lm no lo lp lq np ls lt lu nq lw lx ly ij bi translated">简单地说，要组成react组件，必须将组件分为容器和呈现者——有状态的和无状态的。然后你把数据当道具传给孩子。</p><p id="659e" class="pw-post-body-paragraph ld le iq lf b lg lh jz li lj lk kc ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">因此，主要组件将是这样的:</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="4406" class="pw-post-body-paragraph ld le iq lf b lg lh jz li lj lk kc ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">电影组件列表将包含所有组件，如下所示:</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="3e24" class="pw-post-body-paragraph ld le iq lf b lg lh jz li lj lk kc ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">这里，将道具传递给亡灵组件:</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="117a" class="pw-post-body-paragraph ld le iq lf b lg lh jz li lj lk kc ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">你可以在这里找到完整的代码<a class="ae nv" href="https://codesandbox.io/s/solve-props-drilling-without-anything-w1xcn?file=/src/App.js:1089-1504" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="109e" class="pw-post-body-paragraph ld le iq lf b lg lh jz li lj lk kc ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">感谢阅读！</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="c790" class="mu mv iq bd mw mx my mz na nb nc nd ne ke nf kf ng kh nh ki ni kk nj kl nk nl bi translated"><strong class="ak">资源:</strong></h1><ul class=""><li id="da51" class="lz ma iq lf b lg nm lj nn lm oc lq od lu oe ly me mf mg mh bi translated"><a class="ae nv" href="https://reactjs.org/docs/composition-vs-inheritance.html" rel="noopener ugc nofollow" target="_blank">构成Vs继承</a></li><li id="e046" class="lz ma iq lf b lg mi lj mj lm mk lq ml lu mm ly me mf mg mh bi translated"><a class="ae nv" href="https://medium.com/@alexkrolick/react-composition-patterns-from-the-ground-up-8401aaad93d7" rel="noopener">从地面反应出构图模式U </a></li><li id="9a17" class="lz ma iq lf b lg mi lj mj lm mk lq ml lu mm ly me mf mg mh bi translated"><a class="ae nv" href="https://dev.to/spukas/avoid-prop-drilling-in-react-with-context-api-1ne5" rel="noopener ugc nofollow" target="_blank">避免与上下文API </a>中的道具钻取</li></ul></div></div>    
</body>
</html>