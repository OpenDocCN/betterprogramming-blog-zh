<html>
<head>
<title>Dynamically Loaded Bootstrap 4 Modal Component — Powered by Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">动态加载的Bootstrap 4模式组件——由Angular</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/dynamically-loaded-bootstrap-4-modal-component-powered-by-angular-6621f5fd3173?source=collection_archive---------4-----------------------#2018-03-22">https://betterprogramming.pub/dynamically-loaded-bootstrap-4-modal-component-powered-by-angular-6621f5fd3173?source=collection_archive---------4-----------------------#2018-03-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/01f9387391059f3ac3d40fdfb20aebd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D2DEADw-n5ORj_IYEBGRGA.png"/></div></div></figure><p id="abae" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我当前的项目需要一个模态来显示一些应用程序信息。现在有很多UI控件。然而，我们当前的应用程序对主题和应用程序风格使用Bootstrap。所以，这些来自<strong class="kd iu"> @ng-bootstrap </strong>的UI控件是Bootstrap 4，完全是为了Angular而构建的，很有意义。模态组件是从消费者组件动态加载的——非常酷！</p><p id="a753" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上个月我得以参加StackBlitz和Angular.io的发布会。<a class="la lb ep" href="https://medium.com/u/d63fefe55e24?source=post_page-----6621f5fd3173--------------------------------" rel="noopener" target="_blank"> Eric Simons </a>展示了StackBlitz和支持嵌入StackBlitz的新SDK。点击以下链接，使用<a class="ae lc" href="https://stackblitz.com/" rel="noopener ugc nofollow" target="_blank"> StackBlitz </a>查看该应用程序。</p><p id="85db" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae lc" href="https://stackblitz.com/github/buildmotion/buildmotion-modal/tree/master/source/modal-proof" rel="noopener ugc nofollow" target="_blank">在</a>中查看和编辑<code class="fe ld le lf lg b"><a class="ae lc" href="https://stackblitz.com/github/buildmotion/buildmotion-modal/tree/master/source/modal-proof" rel="noopener ugc nofollow" target="_blank">Stackblitz</a>.</code></p></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="729e" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">或者，你可以走老路，创建一个新的应用程序！</h1><p id="01a7" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">使用Angular CLI命令创建应用程序。</p><pre class="mr ms mt mu gt mv lg mw mx aw my bi"><span id="75b2" class="mz lp it lg b gy na nb l nc nd">ng new modal-proof</span></pre><p id="621c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">使用CDN更新<code class="fe ld le lf lg b">index.html</code>文件以引用<a class="ae lc" href="http://getbootstrap.com/" rel="noopener ugc nofollow" target="_blank">引导CSS </a>。</p><pre class="mr ms mt mu gt mv lg mw mx aw my bi"><span id="710f" class="mz lp it lg b gy na nb l nc nd">&lt;link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"&gt;</span></pre></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="f76e" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">包装</h1><p id="eb0b" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">web应用程序将需要<code class="fe ld le lf lg b">@ng-bootstrap-bootstrap</code>包和任何依赖项。</p><pre class="mr ms mt mu gt mv lg mw mx aw my bi"><span id="5937" class="mz lp it lg b gy na nb l nc nd">npm install --save @ng-bootstrap/ng-bootstrap@1.0.2<br/>npm install --save ajv@^6.0.0</span></pre></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="e4b5" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">模态分量</h1><p id="5f21" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">创建一个新组件<code class="fe ld le lf lg b">ModalComponent</code>作为通用的模态组件，我们可以重用它来包装其他组件。我们只需要提供组件a <code class="fe ld le lf lg b">title</code>并引用一个特定的<code class="fe ld le lf lg b">component</code>作为模态对话框<code class="fe ld le lf lg b">body</code>的内容。</p><pre class="mr ms mt mu gt mv lg mw mx aw my bi"><span id="5daf" class="mz lp it lg b gy na nb l nc nd">ng generate component modal</span></pre><ol class=""><li id="751c" class="ne nf it kd b ke kf ki kj km ng kq nh ku ni ky nj nk nl nm bi translated">更新导入以包含<code class="fe ld le lf lg b">@Input</code>；添加带有默认标题值的<code class="fe ld le lf lg b">@Input() title</code>。</li><li id="212a" class="ne nf it kd b ke nn ki no km np kq nq ku nr ky nj nk nl nm bi translated">在构造函数中注入<code class="fe ld le lf lg b">public activeModal: NgbActiveModal</code>。这允许模态隐藏。</li></ol><p id="ca11" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，更新组件以包括以下内容:</p><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="ns nt l"/></div></figure></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="3871" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">模态模板</h1><p id="8a47" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">模态模板使用引导类进行样式化。模式的主要部分包括:</p><ul class=""><li id="1bf8" class="ne nf it kd b ke kf ki kj km ng kq nh ku ni ky nu nk nl nm bi translated">模态标题</li><li id="67c0" class="ne nf it kd b ke nn ki no km np kq nq ku nr ky nu nk nl nm bi translated">模态标题</li><li id="b55c" class="ne nf it kd b ke nn ki no km np kq nq ku nr ky nu nk nl nm bi translated">模态体</li><li id="1e6a" class="ne nf it kd b ke nn ki no km np kq nq ku nr ky nu nk nl nm bi translated">模态页脚</li></ul><p id="7c33" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe ld le lf lg b">modal-body</code>部分包含一个<code class="fe ld le lf lg b">ng-content</code>指令，允许在主体中呈现组件。我们可以增强<code class="fe ld le lf lg b">ng-content</code>,让命名属性通过名称指向多个<code class="fe ld le lf lg b">ng-content</code>——我稍后会这么做。现在，我只想做好基础工作。先把它功能化，再优化。</p><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="ns nt l"/></div></figure></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="81e0" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">使用</h1><p id="a53e" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">我们现在有了一个通用的模型模板，所以我们准备创建一个使用场景。在我们的示例中，我们将在<code class="fe ld le lf lg b">modal</code>中显示一个<code class="fe ld le lf lg b">About</code>组件。这将证明我们可以使用应用程序中的任何组件作为<code class="fe ld le lf lg b">modal-body</code>的内容。</p><p id="86f1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">创建一个新的<code class="fe ld le lf lg b">About</code>组件。这个组件将代表我们希望呈现为模态的应用程序组件的<code class="fe ld le lf lg b">any</code>。记住，目标之一是将目标组件动态加载到模式中。现在我们有了模态组件，我可以开始考虑应用程序中的模态候选对象了。</p><pre class="mr ms mt mu gt mv lg mw mx aw my bi"><span id="f5ca" class="mz lp it lg b gy na nb l nc nd">ng g component about</span></pre><p id="7755" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">模板被更新以包括一些带有格式的附加内容—您明白了。在我的生产应用程序中，about组件将使用RESTful API调用检索应用程序信息，并显示更多有用的信息。</p><pre class="mr ms mt mu gt mv lg mw mx aw my bi"><span id="fdfe" class="mz lp it lg b gy na nb l nc nd">&lt;h1&gt;Bootstrap 4 Modal :: Powered by Angular&lt;/h1&gt;</span><span id="ea36" class="mz lp it lg b gy nv nb l nc nd">&lt;p&gt;Native, quality widgets for your Angular applications.&lt;/p&gt;</span></pre><p id="8832" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，让我们创建一个名为<code class="fe ld le lf lg b">AboutModalComponent</code>的新组件。</p><pre class="mr ms mt mu gt mv lg mw mx aw my bi"><span id="7b92" class="mz lp it lg b gy na nb l nc nd">ng g component modalAbout</span></pre></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="bf17" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">将About组件包装在模式组件中</h1><p id="2f1a" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">现在有趣的部分来了。更新<code class="fe ld le lf lg b">AppModalComponent</code>的模板。我们正在将<code class="fe ld le lf lg b">AboutComponent</code>包装在<code class="fe ld le lf lg b">ModalComponent</code>中。</p><ul class=""><li id="cfbf" class="ne nf it kd b ke kf ki kj km ng kq nh ku ni ky nu nk nl nm bi translated">添加一个<code class="fe ld le lf lg b">title</code>属性(匹配<code class="fe ld le lf lg b">ModalComponent</code>的<code class="fe ld le lf lg b">@Input</code>),这样您就可以为模态提供一个标题值。</li></ul><pre class="mr ms mt mu gt mv lg mw mx aw my bi"><span id="baf3" class="mz lp it lg b gy na nb l nc nd">&lt;app-modal title="About the App"&gt;<br/>  &lt;app-about&gt;&lt;/app-about&gt;<br/>&lt;/app-modal&gt;</span></pre></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="ea27" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">触发模态</h1><p id="5c65" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">既然我们已经查看了模型的所有工作部分和内容，我们需要触发模型弹出。我们将添加一个简单的按钮来调用一个<code class="fe ld le lf lg b">(click)</code>事件。当按钮被点击时，<code class="fe ld le lf lg b">open()</code>方法将处理点击事件。</p><pre class="mr ms mt mu gt mv lg mw mx aw my bi"><span id="4918" class="mz lp it lg b gy na nb l nc nd">&lt;button class="btn btn-lg btn-outline-primary" (click)="open()"&gt;Launch demo modal&lt;/button&gt;</span></pre></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="a1e3" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">处理按钮点击</h1><p id="ded4" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">我们需要更新模型的消费者。注意在<code class="fe ld le lf lg b">AppComponent</code>的模板中没有其他模态组件引用或HTML。我们只有按钮。我们将使用在组件构造函数中作为<code class="fe ld le lf lg b">modalService</code>注入的<code class="fe ld le lf lg b">NgbModal</code>来动态加载组件。</p><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="ns nt l"/></div></figure></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="f563" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">AppModule</h1><p id="074d" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">模态服务将<code class="fe ld le lf lg b">open</code>指定的组件<code class="fe ld le lf lg b">ModalAboutComponent</code>。为了使<code class="fe ld le lf lg b">ModalAboutComponent</code>能够以这种方式使用，您需要更新<code class="fe ld le lf lg b">AppModule</code>配置，以表明<code class="fe ld le lf lg b">ModalAboutComponent</code>可以动态加载。</p><pre class="mr ms mt mu gt mv lg mw mx aw my bi"><span id="ed67" class="mz lp it lg b gy na nb l nc nd">entryComponents: [<br/>    ModalAboutComponent<br/>  ]</span></pre><p id="1627" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在我们运行应用程序之前，您需要确保<code class="fe ld le lf lg b">components</code>已经被导入和声明。</p><ol class=""><li id="c9ce" class="ne nf it kd b ke kf ki kj km ng kq nh ku ni ky nj nk nl nm bi translated">导入<code class="fe ld le lf lg b">import { NgbModule, NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';</code></li><li id="c287" class="ne nf it kd b ke nn ki no km np kq nq ku nr ky nj nk nl nm bi translated">将<code class="fe ld le lf lg b">NgbModule.forRoot()</code>添加到<code class="fe ld le lf lg b">imports</code>数组中。</li><li id="054b" class="ne nf it kd b ke nn ki no km np kq nq ku nr ky nj nk nl nm bi translated">提供:<code class="fe ld le lf lg b">providers</code>数组中的<code class="fe ld le lf lg b">NgbActiveModal</code>。</li></ol><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="ns nt l"/></div></figure></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><p id="2c75" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi nw translated"><span class="l nx ny nz bm oa ob oc od oe di">我</span> <em class="kz">出版了一本关于棱角建筑的新书。了解如何利用库项目，通过组织和重用代码来创建更好的架构。在Leanpub.com有售。</em></p><div class="of og gp gr oh oi"><a href="https://leanpub.com/angular-architecture-the-unofficial-guide" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd iu gy z fp on fr fs oo fu fw is bi translated">棱角分明的建筑</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">在软件中，有些时候你只有一次机会把它做好。通过利用定义良好的架构，这是可能的…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">leanpub.com</p></div></div><div class="or l"><div class="os l ot ou ov or ow jz oi"/></div></div></a></div></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="7d06" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">结论</h1><p id="2c04" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">这是一个很好的开始，作为一个小小的证明。我可能会增强组件来动态处理样式。这个项目也是放入我们的应用程序组件核心库的一个很好的候选——作为一个共享库，我们可以在几个不同的应用程序中使用它。</p><p id="0d66" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">github . com上的源代码</strong>:<a class="ae lc" href="https://github.com/buildmotion/buildmotion-modal" rel="noopener ugc nofollow" target="_blank">https://github.com/buildmotion/buildmotion-modal</a></p><div class="of og gp gr oh oi"><a href="https://angular-academy.com/security/?aff=487495_tawgwlyz" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd iu gy z fp on fr fs oo fu fw is bi translated">Angular企业安全学院</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">了解关于Web安全性的所有知识，并在Angular和REST API中实现基于角色的企业级授权</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">angular-academy.com</p></div></div></div></a></div></div></div>    
</body>
</html>