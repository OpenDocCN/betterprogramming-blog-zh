<html>
<head>
<title>Write Your First Shell Script With Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Node.js编写您的第一个Shell脚本</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/write-your-first-shell-script-with-node-js-c612da65b1e1?source=collection_archive---------2-----------------------#2019-05-20">https://betterprogramming.pub/write-your-first-shell-script-with-node-js-c612da65b1e1?source=collection_archive---------2-----------------------#2019-05-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5e08" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在Node.js中从头开始编写shell脚本</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7be1cf99291c9a1ead9bb3f9da79d218.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wJcVGzmj7r8ZM6XVFfdtLA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@campaign_creators?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">活动创建者</a>在<a class="ae ky" href="https://unsplash.com/s/photos/computer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="f9ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在处理JavaScript应用程序时，Shell脚本非常有用。如果你曾经使用过<a class="ae ky" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>，这个命令在开发react应用程序时会处理大量的开销。</p><p id="bd18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中一些开销包括编写脚本来执行或构建你的应用，比如<code class="fe lv lw lx ly b">npm start</code> <strong class="lb iu"> </strong>或<strong class="lb iu"> </strong> <code class="fe lv lw lx ly b">npm run build</code>。这些是执行特定shell脚本的命令的很好的例子。</p><p id="818f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">阅读完本文后，您将成功地在Node.js中从头开始编写了一个shell脚本。</p><p id="35f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们要写的脚本很简单。给定命令<code class="fe lv lw lx ly b">npm run emoji</code>，脚本将运行，<code class="fe lv lw lx ly b">console.log</code>在我们的终端随机表情符号。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/f7a7051e8e5e8a2c8f42ffc6ebc0188b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*ErB-0-gwy5BbkEdl_1eDuA.gif"/></div></figure><p id="f60a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们需要一个包含脚本将要执行的代码的文件。姑且称这个文件为<code class="fe lv lw lx ly b">emoji.js</code>。一旦创建了文件，我们就可以开始编写脚本了。</p><p id="42c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你曾经看过你的<code class="fe lv lw lx ly b">package.json</code>文件(作为一名JavaScript开发人员，你必须<a class="ae ky" href="https://nodesource.com/blog/the-basics-of-package-json-in-node-js-and-npm/" rel="noopener ugc nofollow" target="_blank">熟悉这个文件，如果你还没有的话)，你可能已经看过脚本部分。</a></p><p id="c6c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这由一个键表示，写成字符串“scripts”，指向一个对象值。这个对象包含了你的项目中使用的各种脚本(比如<code class="fe lv lw lx ly b"> npm start</code>)。</p><p id="6bf4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个使用<code class="fe lv lw lx ly b">create-react-app</code>后脚本在<code class="fe lv lw lx ly b">package.json</code>文件中的键值对的例子:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="2fbb" class="me mf it ly b gy mg mh l mi mj">"scripts":{<br/>    "start": "react-scripts start",<br/>    "build": "react-scripts build",<br/>    "test": "react-scripts test",<br/>    "eject": "react-scripts eject"<br/>}</span></pre><p id="6a7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个对象是我们的新脚本将居住的地方。在您的<code class="fe lv lw lx ly b">package.json</code>文件中，在脚本对象中写下下面一行:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="a440" class="me mf it ly b gy mg mh l mi mj">"emoji": "node emoji.js" </span></pre><p id="721f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您的脚本部分应该如下所示:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="3ff3" class="me mf it ly b gy mg mh l mi mj">"scripts":{<br/>    "start": "react-scripts start",<br/>    "build": "react-scripts build",<br/>    "test": "react-scripts test",<br/>    "eject": "react-scripts eject",<br/>    "emoji": "node emoji.js"<br/>}</span></pre><p id="e557" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在scripts对象中，键代表将执行值的命令。所以当我们键入命令<code class="fe lv lw lx ly b">npm run emoji</code>时，它会执行命令<code class="fe lv lw lx ly b">node emoji.js</code>。</p><p id="01e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Node中，键入<code class="fe lv lw lx ly b">node + filename.js</code>将在命令行中运行该JavaScript文件。如前所述，我们可以通过键入<code class="fe lv lw lx ly b">npm run emoji</code>来运行这个脚本。但是在运行我们的脚本之前，让我们安装我们的依赖项。</p><p id="a42e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在命令行中写入这些行来安装依赖项:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="5b10" class="me mf it ly b gy mg mh l mi mj">npm install node-emoji</span><span id="495d" class="me mf it ly b gy mk mh l mi mj">npm install random-emoji</span></pre><p id="e330" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用两个依赖关系，<a class="ae ky" href="https://www.npmjs.com/package/node-emoji" rel="noopener ugc nofollow" target="_blank">节点表情符号</a>和<a class="ae ky" href="https://www.npmjs.com/package/random-emoji" rel="noopener ugc nofollow" target="_blank">随机表情符号</a>。Node-emoji是一个npm包，为Node.js项目提供表情支持。</p><p id="c7d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Node-emoji有一个接受字符串的get函数。这个字符串是表情符号的简称。如果你想得到心形表情符号，你可以这样写:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="f83e" class="me mf it ly b gy mg mh l mi mj">var emoji = require('node-emoji');</span><span id="152f" class="me mf it ly b gy mk mh l mi mj">console.log(emoji.get('heart'));</span></pre><p id="8fc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们终端的结果:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="c57c" class="me mf it ly b gy mg mh l mi mj">C:\project-directory&gt; npm run emoji</span><span id="c568" class="me mf it ly b gy mk mh l mi mj">❤️</span></pre><p id="189e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你也可以这样写:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="b76d" class="me mf it ly b gy mg mh l mi mj">var emoji = require('node-emoji');</span><span id="0864" class="me mf it ly b gy mk mh l mi mj">console.log(emoji.get(':heart:'));</span></pre><p id="9a14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种格式是传统的表情符号减价，受到许多在线主机的支持，如GitHub。这将为我们的下一个依赖项random-emoji提供便利。</p><p id="9dae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Random-emoji以传统的markdown格式返回一个字符串，包括开头和结尾的冒号。我们将用来返回这个短代码字符串的random-emoji函数非常简单，就是random。</p><p id="56ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想返回一个随机的表情符号短码，你可以这样写:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="b15c" class="me mf it ly b gy mg mh l mi mj">var emoji = require('emoji-random');</span><span id="aa3f" class="me mf it ly b gy mk mh l mi mj">console.log(emoji.random());</span></pre><p id="3e27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是回报的样子:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="4014" class="me mf it ly b gy mg mh l mi mj">C:\project-directory&gt; npm run emoji</span><span id="def4" class="me mf it ly b gy mk mh l mi mj">:squirrel:</span></pre><p id="fb19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以结合这些依赖关系及其相关功能来创建我们独特的脚本，记录随机的表情符号，作为表情符号本身编写，而不仅仅是短代码。</p><p id="e13b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，你需要首先调用random-emoji的random函数。一旦获得了随机的表情符号短码，就可以将该字符串传递给node-emoji的get函数。这将检索表情本身。</p><p id="2052" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要在你的终端中看到最终的表情符号，只需<code class="fe lv lw lx ly b">console.log</code>结果。这是我写的代码，最后一行有一些格式来表示表情符号短码(去掉冒号)和表情符号本身。</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="18df" class="me mf it ly b gy mg mh l mi mj">var randEmoji = require('emoji-random'),<br/>    emoji = require('node-emoji');</span><span id="39d2" class="me mf it ly b gy mk mh l mi mj">var randString = randEmoji.random();</span><span id="8f9e" class="me mf it ly b gy mk mh l mi mj">var finalEmoji = emoji.get(randString);</span><span id="3c4f" class="me mf it ly b gy mk mh l mi mj">console.log('Here is the '+ randString.split(':')[1] + 'emoji: '+ finalEmoji);</span></pre><p id="6d04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是记录的结果:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="9870" class="me mf it ly b gy mg mh l mi mj">C:\project-directory&gt; npm run emoji</span><span id="264c" class="me mf it ly b gy mk mh l mi mj">Here is the video_game emoji: 🎮</span></pre><p id="cb86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，虽然您仍然可以通过键入命令<code class="fe lv lw lx ly b">npm run emoji</code> <em class="ml">，</em>随时运行这个脚本，但我们可以更进一步，每次调用其他脚本时都调用这个脚本。</p><p id="d365" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们有一个React应用程序，我们想在每次尝试启动我们的应用程序时在我们的终端中生成一个随机的表情符号(比功能更有趣)，我们可以在我们的启动脚本中调用我们的新表情符号脚本。</p><p id="e773" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论何时启动应用程序，您都需要调用node emoji.js:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="c3b7" class="me mf it ly b gy mg mh l mi mj">"start": "react-scripts start &amp; npm run emoji"</span></pre><p id="d7f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过结合我们的start和emoji脚本，我们可以在每次运行<code class="fe lv lw lx ly b">npm start</code> <em class="ml">时执行emoji脚本。</em>而不必在我们的命令行<em class="ml">中写<em class="ml"> </em> <code class="fe lv lw lx ly b">npm run emoji</code>或者<em class="ml"> </em> <code class="fe lv lw lx ly b">node emoji.js</code> <em class="ml"> </em>。</em></p><p id="7dd0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您在<code class="fe lv lw lx ly b">package.json</code>中的最终脚本部分应该如下所示:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="cb99" class="me mf it ly b gy mg mh l mi mj">"scripts": {<br/>    "start": "react-scripts start &amp; npm run emoji",<br/>    "build": "react-scripts build",<br/>    "test": "react-scripts test",<br/>    "eject": "react-scripts eject", <br/>    "emoji": "node emoji.js"<br/> }</span></pre><p id="ab54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过将这个包含在你的<code class="fe lv lw lx ly b">package.json</code>文件中，每次你启动你的应用程序时，你也会生成一个随机的表情符号。虽然这不是最有用的脚本，但希望现在您对脚本以及如何实现自己的脚本有了更好的理解。</p><p id="c7f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢这篇文章或者需要澄清任何提到的事情，请在评论中告诉我。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><p id="35e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://matt-croak.medium.com/membership" rel="noopener"> <em class="ml">点击此处，将您的免费媒体会员升级为付费会员</em> </a> <em class="ml">，每月只需5美元，您就可以收到各种出版物上数千名作家的无限量无广告故事。这是一个附属链接，你的会员资格的一部分帮助我为我创造的内容获得奖励。谢谢大家！</em></p><h1 id="4859" class="mt mf it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">参考</h1><div class="nk nl gp gr nm nn"><a href="https://nodesource.com/blog/the-basics-of-package-json-in-node-js-and-npm/" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">Node.js和npm中Package.json的基础知识</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">package.json文件是Node.js生态系统的核心，是理解和使用Node.js的基础部分</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">nodesource.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob ks nn"/></div></div></a></div><div class="nk nl gp gr nm nn"><a href="https://ponyfoo.com/articles/choose-grunt-gulp-or-npm#using-shell-scripts-in-npm-tasks" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">选择:咕噜，吞咽，或npm？</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">作为第一步，让我们讨论一下Grunt擅长的地方。Grunt最好的一个方面就是它的易用性。它使…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">ponyfoo.com</p></div></div><div class="nw l"><div class="oc l ny nz oa nw ob ks nn"/></div></div></a></div><div class="nk nl gp gr nm nn"><a href="https://www.npmjs.com/package/node-emoji" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">节点表情符号</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">node.js项目的简单表情支持</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">www.npmjs.com</p></div></div><div class="nw l"><div class="od l ny nz oa nw ob ks nn"/></div></div></a></div><div class="nk nl gp gr nm nn"><a href="https://www.npmjs.com/package/random-emoji" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">随机表情符号</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">随机表情符号的味道:运气、俳句等。</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">www.npmjs.com</p></div></div><div class="nw l"><div class="oe l ny nz oa nw ob ks nn"/></div></div></a></div><div class="nk nl gp gr nm nn"><a href="https://www.webfx.com/tools/emoji-cheat-sheet/" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">GitHub、Basecamp和其他服务的表情符号备忘单</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">GitHub、Basecamp、Slack等服务使用的表情代码。可搜索。表情符号的含义。</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">www.webfx.com</p></div></div><div class="nw l"><div class="of l ny nz oa nw ob ks nn"/></div></div></a></div></div></div>    
</body>
</html>