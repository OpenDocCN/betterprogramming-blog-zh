<html>
<head>
<title>How to Create Trusted SSL Certificates for Your Local Development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为您的本地开发创建可信SSL证书</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-trusted-ssl-certificates-for-your-local-development-13fd5aad29c6?source=collection_archive---------0-----------------------#2020-12-10">https://betterprogramming.pub/how-to-create-trusted-ssl-certificates-for-your-local-development-13fd5aad29c6?source=collection_archive---------0-----------------------#2020-12-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f71b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">生成可信的自签名SSL证书，以便在本地开发中启用HTTPS</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a768b093ca559b8b3255efc649bb395f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8uOGQwkM2FpyNz9JCUNbDg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://www.freepik.com/" rel="noopener ugc nofollow" target="_blank"> Freepik </a>设计。</p></figure><p id="77aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你有没有发现自己需要在本地主机或其他本地域(如local.my-app.com)上运行的应用程序中添加HTTPS？</p><p id="9aa8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Web浏览器在运行HTTP和HTTPS页面时有细微的差别。例如，在HTTPS页面上，任何试图从HTTP URL加载JavaScript的行为都会被阻止。这意味着，如果您使用HTTP进行本地开发，您可能会添加一个在您的开发机器上运行良好的脚本标记，但当您将应用程序部署到将在HTTPS下运行的试运行或生产时，它会中断。叹息…</p><p id="ea3a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">别担心，我的朋友。为了避免这种问题，在您的本地环境中设置HTTPS非常有用，这样可以更好地镜像您的生产服务器。然而，让它工作起来可能会很麻烦。我们都不想一直看到证书警告。也就是说，如何在本地获得安全锁？</p><p id="af1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个问题的答案是生成您自己的证书，可以是自签名的，也可以是由本地根用户签名的，并在您的操作系统的信任存储中信任它。从那里开始，在您的本地web服务器上使用该证书。</p><p id="74d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将介绍生成本地根证书(也称为证书颁发机构)的过程。这允许您生成任意多的域名证书，但只信任一个证书——根证书。</p><p id="9e6a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">值得注意的一个重要事实是，自2020年9月1日起，SSL证书的颁发时间不能超过13个月(397天)。因此，对于本文中生成的证书，我们坚持使用12个月。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="8d6b" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">生成证书</h1><h2 id="9b62" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">认证机构(CA)</h2><ol class=""><li id="3364" class="nd ne iq ky b kz nf lc ng lf nh lj ni ln nj lr nk nl nm nn bi translated">生成私钥和自签名证书:</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="f379" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nq">可选:您可以在</em> <code class="fe nr ns nt nu b"><em class="nq">CN</em></code> <em class="nq">中将</em> <code class="fe nr ns nt nu b"><em class="nq">MY-CA</em></code> <em class="nq">替换为您选择的其他内容。</em></p><p id="d982" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想检查您的证书信息，您可以通过运行以下命令来输出其内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="32ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.创建一个<code class="fe nr ns nt nu b">.crt</code>证书文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><h2 id="dabe" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">域名证书</h2><p id="e3dc" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nv lh li lj nw ll lm ln nx lp lq lr ij bi translated">在大多数情况下，在证书中单独注册localhost就足够了。但是，如果您喜欢为本地应用程序使用自定义域名，您可以为将要创建的证书添加一个或多个备用名称。</p><ol class=""><li id="1d0a" class="nd ne iq ky b kz la lc ld lf ny lj nz ln oa lr nk nl nm nn bi translated">生成x509 v3扩展文件:</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="3153" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以按照上面的模式添加任意多的域名。</p><p id="0a09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nq">注意:如果您没有设置任何本地域名，请更新</em> <code class="fe nr ns nt nu b"><em class="nq">DNS.4</em></code> <em class="nq">、</em> <code class="fe nr ns nt nu b"><em class="nq">DNS.5</em></code> <em class="nq">和</em> <code class="fe nr ns nt nu b"><em class="nq">DNS.6</em></code> <em class="nq">或删除它们。</em></p><p id="dcb1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.生成私钥和证书签名请求(CSR):</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="4ad1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nq">可选:国家、州、城市和组织可自定义。</em></p><p id="84ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">3.生成自签名证书:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="ae9a" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">使用证书</h1><p id="92d3" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nv lh li lj nw ll lm ln nx lp lq lr ij bi translated">您必须在为您的内容提供服务的应用程序上提供证书和私钥文件。这可能是一个本地web服务器，如Apache或NGINX，一个本地服务，或一些其他本地工具，如<a class="ae kv" href="https://webpack.js.org/configuration/dev-server/" rel="noopener ugc nofollow" target="_blank"> webpack DevServer </a>。</p><p id="45d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里有几个例子:</p><h2 id="2d04" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated"><strong class="ak">阿帕奇</strong></h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><h2 id="2ad8" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated"><strong class="ak"> NGINX </strong></h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><h2 id="3bd1" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated"><strong class="ak"> webpack DevServer </strong></h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><h2 id="7e94" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated"><strong class="ak"> Express.js </strong></h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="49b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从您将为您的应用提供服务的任何实体配置为使用您的证书的那一刻起，您的应用将可以通过HTTPS URL进行访问。</p><p id="2ab7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">按照上面的快速示例，您可以在<a class="ae kv" href="https://localhost:8000/" rel="noopener ugc nofollow" target="_blank"> https://localhost:8000 </a>上打开浏览器选项卡，查看您的内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/69c957d9d1dea197e4a78467366456a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5E5DjJ7UHFnLoUE-Q3Mmhg.png"/></div></div></figure><p id="26c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">等一下！我的“这是一个安全的服务器”消息在哪里？</p><p id="056a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这不是您在加载页面时希望看到的，但这是意料之中的，因为CA还不可信。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="ee40" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">信任CA</h1><p id="1ca7" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nv lh li lj nw ll lm ln nx lp lq lr ij bi translated">要获得安全锁，您的机器中必须信任新的本地CA。这个过程因操作系统而异，对于大多数浏览器来说已经足够了。如果你使用的是Firefox，这个过程会有所不同。</p><h2 id="0c46" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">macOS — Chrome和Safari</h2><ol class=""><li id="c09d" class="nd ne iq ky b kz nf lc ng lf nh lj ni ln nj lr nk nl nm nn bi translated">双击根证书(<code class="fe nr ns nt nu b">ca.crt</code>)。</li><li id="0c25" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">选择您想要的钥匙串(<code class="fe nr ns nt nu b">login</code>如果您想要仅在您的帐户下信任它，或者<code class="fe nr ns nt nu b">System</code>如果证书应该在整个系统范围内信任它)。</li><li id="77dc" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">添加证书。</li><li id="5888" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">打开“钥匙串访问”(如果它尚未打开)。</li><li id="ebb3" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">选择您之前选取的钥匙串。</li><li id="fd24" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">您应该看到证书<code class="fe nr ns nt nu b">MY-CA</code> <em class="nq"> </em>(它将是您作为CN提供给CA的名称)。</li><li id="d6c8" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">双击证书。</li><li id="2a0f" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">展开“信任”<em class="nq"> </em>和<em class="nq"> s </em>选择“使用此证书时”中的选项“始终信任”</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/965765917f5737069f40b42a79606fba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*oXE0Qlln9Qda1inXMkqjWQ.png"/></div></figure><p id="8b51" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">9.关闭证书窗口并键入您的用户密码(如果需要)。</p><h2 id="1719" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">Windows 10 — Chrome、IE11和Edge</h2><ol class=""><li id="2f4f" class="nd ne iq ky b kz nf lc ng lf nh lj ni ln nj lr nk nl nm nn bi translated">双击证书(<code class="fe nr ns nt nu b">ca.crt</code>)。</li><li id="4666" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">单击“安装证书”按钮。</li><li id="e535" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">选择是在用户级别还是在计算机级别存储它。</li><li id="01a8" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">点击“下一步”</li><li id="61d8" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">选择“将所有证书放入以下存储”</li><li id="e635" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">点击“浏览”</li><li id="7a44" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">选择“受信任的根证书颁发机构”</li><li id="6c10" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">单击“确定”</li><li id="e102" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">点击“下一步”</li><li id="f1d5" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">点击“完成”</li><li id="d82d" class="nd ne iq ky b kz oc lc od lf oe lj of ln og lr nk nl nm nn bi translated">如果出现提示，请单击“是”</li></ol><h2 id="fe72" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">火狐浏览器</h2><p id="762c" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nv lh li lj nw ll lm ln nx lp lq lr ij bi translated">即使在信任存储中信任了您的CA证书，Firefox仍然会给出警告。它可能会发生在Windows 10上，也可能不会发生，但它肯定会发生在macOS上。从这里开始非常简单。Firefox将显示如下屏幕:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/52c8430816fb644bc418e0f28ed2fee9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WoLo8kCqW1hGOqqy2cIo6Q.png"/></div></div></figure><p id="5fec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要进一步允许您的证书，请单击“高级…”之后，单击“接受风险并继续<em class="nq"> </em>以确认”您知道风险。</p><p id="7da6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将只需执行一次，但它是每个本地域一次。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="fd65" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="0906" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nv lh li lj nw ll lm ln nx lp lq lr ij bi translated">生成并信任您的证书后，您应该可以顺利地访问您的本地域了！您的应用现在可以得到安全的服务，您的开发流程可以继续。回到前面的快速示例，这将是您的结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/fb141bd271c4c5dc608819ad9ef3d9d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S-OhtqXENT2Yz3d1DEP13Q.png"/></div></div></figure><p id="a039" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该网站已完全加载，Chrome现在在URL旁边显示锁状符号。</p><p id="7369" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇文章有助于解决你的一个HTTPS障碍。如果你还想让我进一步帮助你，请在下面留言。此外，让我知道任何类似的问题，我可以帮助解决。编码快乐！</p></div></div>    
</body>
</html>