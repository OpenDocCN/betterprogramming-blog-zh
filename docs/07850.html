<html>
<head>
<title>Everything You Need to Get Started With Testing in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中开始测试所需的一切</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/everything-you-need-to-get-started-with-testing-in-react-e16819b0eba7?source=collection_archive---------7-----------------------#2021-02-25">https://betterprogramming.pub/everything-you-need-to-get-started-with-testing-in-react-e16819b0eba7?source=collection_archive---------7-----------------------#2021-02-25</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="d333" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">给初学者的简明介绍</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/af8d777130d7230ba699219283152af6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*avSpXl5uLGxyhq9r"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@aaronburden?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Aaron Burden </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="7918" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">很长一段时间，像所有其他自称摇滚明星的程序员一样，我忽略了测试。可能那是因为刚开始看起来毫无意义。也许我害怕它。我知道你们很多人和我一样！</p><p id="df8b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">不要担心——React有一个名为<code class="fe lw lx ly lz b">react-testing-library</code>的很棒的库，它使得测试React组件变得非常容易和直观。这也是React中推荐的测试方式。</p><p id="20ce" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">今天我们将探索这一点。我们开始吧！</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="090d" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">1.创建新项目</h1><p id="08ec" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">首先，用<code class="fe lw lx ly lz b">create-react-app</code>搭建一个新的React应用程序。</p><pre class="kk kl km kn gu ne lz nf ng aw nh bi"><span id="6cbb" class="ni mi iu lz b gz nj nk l nl nm">npx create-react-app learn-testing</span></pre><p id="163b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当你用<code class="fe lw lx ly lz b">create-react-app</code>创建一个项目时，测试设置会自动为你准备好。否则，请参考<a class="ae kz" href="https://testing-library.com/docs/react-testing-library/intro/" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nn"><img src="../Images/39db653a16d460ed0055de7c7f43e985.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uDGQ2Orwe1uSTROYeJGsNw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">新项目</p></figure></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="0d18" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">2.我们的第一个测试</h1><p id="f6ab" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">打开您的<code class="fe lw lx ly lz b">App.test.js</code>文件，只需添加以下代码来呈现<code class="fe lw lx ly lz b">App</code>组件。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="no np l"/></div></figure><h2 id="b4b5" class="ni mi iu bd mj nq nr dn mn ns nt dp mr lj nu nv mt ln nw nx mv lr ny nz mx oa bi translated"><strong class="ak">解释</strong></h2><p id="b985" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">这个简单的测试试图呈现<code class="fe lw lx ly lz b">App</code>组件。如果您的代码有任何问题，那么这个测试将会失败。</p><p id="5631" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">提示:</strong>即使你没有时间为你的项目实现完整的测试，试着为每个组件添加这个基本测试。这可以捕捉到代码中许多无意的问题，并为您节省大量时间。</p><h2 id="ef4b" class="ni mi iu bd mj nq nr dn mn ns nt dp mr lj nu nv mt ln nw nx mv lr ny nz mx oa bi translated">运行测试</h2><p id="a2fe" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">您可以运行以下命令来查看测试结果:</p><pre class="kk kl km kn gu ne lz nf ng aw nh bi"><span id="138c" class="ni mi iu lz b gz nj nk l nl nm">yarn test</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nn"><img src="../Images/3aff326157d842a6f74a15bb693d1ee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e_oAlL7TeRp4mdi1YEc6BA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">试验</p></figure><p id="f608" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">你会收到这个令人满意的绿色信息。厉害！</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="51bf" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">3.抓取屏幕上的任何元素</h1><p id="a009" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">测试过程的第一步是找出屏幕上的特定元素，这样我们就可以对其进行操作。</p><p id="30cd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们更新我们的组件，为它添加一个按钮，并找到这个元素。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="no np l"/></div></figure><p id="f3f6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">暂时不要担心额外的属性<code class="fe lw lx ly lz b">data-testid</code>。我们以后再谈。</p><h2 id="b9f5" class="ni mi iu bd mj nq nr dn mn ns nt dp mr lj nu nv mt ln nw nx mv lr ny nz mx oa bi translated"><strong class="ak">第一种方法:通过文本获取元素</strong></h2><p id="2810" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">你可以通过文本在屏幕上找到一个元素。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="no np l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">通过文本获取元素</p></figure><p id="6691" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你想避免输入精确的单词，你可以使用<code class="fe lw lx ly lz b">regular-expressions</code>。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="no np l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">通过正则表达式获取元素</p></figure><h2 id="32d2" class="ni mi iu bd mj nq nr dn mn ns nt dp mr lj nu nv mt ln nw nx mv lr ny nz mx oa bi translated"><strong class="ak">第二种方法:通过数据测试ID获取元素</strong></h2><p id="a36d" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">也许组件中的文本经常改变——在这种情况下，您必须更新测试，这可能会令人沮丧。</p><p id="c52e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">还记得我们如何在按钮组件中添加一个<code class="fe lw lx ly lz b">data-testid</code>属性吗？如果你想的话，你可以用ID得到按钮。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="no np l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">通过数据测试ID获取元素</p></figure><h2 id="d12e" class="ni mi iu bd mj nq nr dn mn ns nt dp mr lj nu nv mt ln nw nx mv lr ny nz mx oa bi translated">第三种方法:通过角色获取元素</h2><p id="8e63" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">你也可以使用元素的角色(按钮、文本框等)来获取元素。).</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="no np l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">按角色获取元素</p></figure><p id="3c4b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://testing-library.com/docs/react-testing-library/cheatsheet/" rel="noopener ugc nofollow" target="_blank">这里</a>是一些你可以得到一个元素的其他方法。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="f316" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">4.异步查找元素</h1><p id="1fa1" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">现在你在想，“好吧，这很酷。但是如果我想检查某个动作之后进入屏幕的元素是否成功呢？”</p><p id="c50d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">到目前为止，我们只讨论了<code class="fe lw lx ly lz b">getBy</code>函数。我们可以再用两个类似的函数。</p><p id="5826" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe lw lx ly lz b">queryBy</code>:不返回一个元素，所以如果我们想检查一个元素是否不存在，我们可以使用这个</p><p id="520e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe lw lx ly lz b">findBy</code>:如果你想得到一个还没有的元素，使用这个</p><h2 id="c627" class="ni mi iu bd mj nq nr dn mn ns nt dp mr lj nu nv mt ln nw nx mv lr ny nz mx oa bi translated">findBy的用法</h2><p id="a5b4" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">假设我们有一个从远程数据源获取数据的组件。如果成功了，我们就展示一个特殊的组件。这是该组件的伪代码。它使用<code class="fe lw lx ly lz b">setTimeout</code>来模仿一个远程API调用。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="no np l"/></div></figure><p id="9f36" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，如果我们使用<code class="fe lw lx ly lz b">getBy</code>来测试组件，它会失败，因为<code class="fe lw lx ly lz b">&lt;div&gt;</code>在开始时不存在。因此下面的测试将会失败:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="no np l"/></div></figure><p id="4d60" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们能做的是使用<code class="fe lw lx ly lz b">findBy</code>等待元素在两秒钟后出现。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="no np l"/></div></figure><p id="fe57" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在它过去了！所以我希望你明白哪个是哪个。总结一下:对于任何还没有出现但最终会出现的元素，使用<code class="fe lw lx ly lz b">findBy</code>而不是<code class="fe lw lx ly lz b">getBy</code>或<code class="fe lw lx ly lz b">queryBy</code>。如果你断言一个丢失的元素，使用<code class="fe lw lx ly lz b">queryBy</code>。否则，默认为<code class="fe lw lx ly lz b">getBy</code>。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="f572" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">5.模拟用户操作</h1><p id="3e03" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">我们不能孤立地测试组件。在现实生活中，我们的用户会做很多事情，我们需要为此做好准备。</p><h2 id="414d" class="ni mi iu bd mj nq nr dn mn ns nt dp mr lj nu nv mt ln nw nx mv lr ny nz mx oa bi translated">点击某物</h2><p id="c4ee" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">用户通常做的最常见的任务之一是点击某物。我们可以测试:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="no np l"/></div></figure><p id="67e5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这里我们找到按钮，然后模拟点击事件。</p><h2 id="9d9d" class="ni mi iu bd mj nq nr dn mn ns nt dp mr lj nu nv mt ln nw nx mv lr ny nz mx oa bi translated">写点什么</h2><p id="c5c5" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">用户的另一个常见动作是在输入中键入一些内容。我们也可以测试一下。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="no np l"/></div></figure><p id="091c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这里，我们通过标签文本获取输入字段，然后在字段中键入<code class="fe lw lx ly lz b">Hello World</code>。</p><p id="3537" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">你可以在这里了解更多关于用户事件<a class="ae kz" href="https://testing-library.com/docs/ecosystem-user-event/" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><p id="84d1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">给你。我想你现在对从哪里开始有了更好的理解。希望有所帮助。祝您愉快！</p><p id="6b19" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">通过</strong> <a class="ae kz" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv"> LinkedIn </strong> </a> <strong class="lc iv">或我的</strong> <a class="ae kz" href="https://www.mohammadfaisal.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv">个人网站</strong> </a> <strong class="lc iv">与我取得联系。</strong></p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ob"><a href="https://javascript.plainenglish.io/20-essential-parts-of-any-large-scale-react-app-ee4bd35436a0" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fp"><div class="od ab oe cl cj of"><h2 class="bd iv gz z fq og fs ft oh fv fx it bi translated">任何大型React应用程序的20个基本部分</h2><div class="oi l"><h3 class="bd b gz z fq og fs ft oh fv fx dk translated">如果您正在编写企业级代码，您需要了解这一点</h3></div><div class="oj l"><p class="bd b dl z fq og fs ft oh fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="ok l"><div class="ol l om on oo ok op kt ob"/></div></div></a></div><div class="oq or gq gs os ob"><a rel="noopener  ugc nofollow" target="_blank" href="/the-7-traits-of-a-rock-star-react-developer-747fbb001c05"><div class="oc ab fp"><div class="od ab oe cl cj of"><h2 class="bd iv gz z fq og fs ft oh fv fx it bi translated">摇滚明星React开发者的7个特质</h2><div class="oi l"><h3 class="bd b gz z fq og fs ft oh fv fx dk translated">造成差异的习惯</h3></div><div class="oj l"><p class="bd b dl z fq og fs ft oh fv fx dk translated">better编程. pub</p></div></div><div class="ok l"><div class="ot l om on oo ok op kt ob"/></div></div></a></div><h1 id="3b34" class="mh mi iu bd mj mk ou mm mn mo ov mq mr ka ow kb mt kd ox ke mv kg oy kh mx my bi translated">资源</h1><ul class=""><li id="19f8" class="oz pa iu lc b ld mz lg na lj pb ln pc lr pd lv pe pf pg ph bi translated"><a class="ae kz" href="https://testing-library.com/docs/react-testing-library/intro/" rel="noopener ugc nofollow" target="_blank"> React测试库</a></li><li id="89ba" class="oz pa iu lc b ld pi lg pj lj pk ln pl lr pm lv pe pf pg ph bi translated"><a class="ae kz" href="https://kentcdodds.com/blog/?q=testing" rel="noopener ugc nofollow" target="_blank">关键字“测试</a>”通过kentcdodds.com</li></ul></div></div>    
</body>
</html>