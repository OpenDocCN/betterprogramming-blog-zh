# 学习使用 Python 中的另外 3 个“Else”子句

> 原文：<https://betterprogramming.pub/learn-to-use-3-other-else-clauses-in-python-58a62db15a50>

## Python 的一些鲜为人知的特性

![](img/89be369aedce1dab0a2d29ad5192ff36.png)

照片由[托尔加·乌尔坎](https://unsplash.com/@tolga__?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

# 介绍

任何有编程经验的人都应该熟悉`if…else`语句。基本上，它通过检查特定的条件来创建一个逻辑分支。当条件被评估为真时，程序将执行`if`子句中的操作，否则执行`else`子句中的操作。值得注意的是，这两个子句中的代码是互斥的，这意味着当执行`if`子句中的代码时，将会跳过`else`子句中的代码，反之亦然。

不同的语言在句法细节上有所不同。例如，Kotlin 要求对条件求值使用圆括号，而在 Swift 和 Python 中圆括号是可选的。Kotlin 和 Swift 都为每个`if`和`else`子句使用花括号，但是 Python 使用冒号和缩进来表示范围。其他语言也有一些其他的变化，但是对于那些不是这些特定语言专家的精通技术的局外人来说，这并不奇怪。

在大多数这些语言中，`if`和`else`子句只存在于`if…else` 语句中，它们不会出现在语言的其他地方。然而，Python 在这方面并不常见，因为`else`子句还有三种其他用法。在本文中，我们将回顾它们是什么，以及如何通过一些实际的例子来使用它们。

# “for”语句

我们知道，迭代是我们在程序中最常见的操作之一，是实现自动化的重要方式。具体来说，我们主要使用`for`循环，并通过检查某种可重复项来执行特定的操作，比如列表、字典、集合等等。最基本的格式如下所示。

“for”循环的基本形式

我们可以在`for`循环后面追加一个`else`子句。else 子句在什么条件下被执行？这是规则。

只有当`for`循环完成所有迭代时，`else`子句中的代码才会执行。如果`for`循环被 break 语句提前终止，那么`else`子句也会被跳过。

听起来很困惑？当然，是。当 `else`条款不在`if…else`声明的上下文中时，它确实很棘手。让我们通过一个简单的代码示例来理解这种用法。

“For…else”语句

如上所示，当订购的商品可用时，`else`子句被执行，表明分组订购是可能的。当发现任何项目不可用时，执行将运行到`break`语句(第 6 行)，这将导致跳过`else`子句。

# “while”语句

当条件在执行过程中随后会发生变化时,`while`语句特别有用。具体来说，当条件为真时，`while`原因中的代码将执行，直到条件变为假。我们先来看一个例子。

“While”语句

如上所示，`while`子句中的代码继续执行，直到储蓄余额不大于零。如子节标题所示，我们还可以有一个带有`while`语句的`else`子句。规则如下:

因为条件评估为假，只有当`while`循环正常退出时，`else`子句中的代码才会执行。如果 break 语句提前停止了`while`循环，那么`else`子句也会被跳过。

我知道这也令人困惑。通过一个更现实的例子更好理解。我只是简单地将`else`子句添加到上面的例子中，并做了一些调整。

“While…else”语句

如上所示，我们现在设置一个警报级别，低于该级别时，我们将通过执行`break`语句来停止取款活动。如您所见，当警报级别设置为 100 时，`while`循环正常退出，因为最终余额达到零。但是，当警戒级别设置为 500 时，在第三次取款后，余额变为 400，这将触发`if`语句中的代码执行，因此`break`语句将使`while`循环提前停止执行，这样一来，`else`子句将不会执行。

# “尝试”语句

异常处理是编码中一项棘手的任务。当你不做的时候，你的程序是非常脆弱的。但是，如果做得太多，代码的可读性会大大降低。因此，您需要在处理异常的数量和时间之间找到一个平衡点。当然，当前的文章不是关于在 Python 中处理异常。相反，让我们只讨论异常处理的特性。具体来说，我们将使用`try…except`语句来处理 Python 中的异常。让我们看一个例子:

“try…except”语句的基本形式

如上所示，我们只是尝试将字符串转换为整数。当一个字符串能够被强制转换时，`try`子句中的所有代码都会执行。然而，当我们转换一个不兼容整数的字符串时，异常被抛出，并由`except`子句中的代码处理。非常简单的异常处理，对吗？因为这篇文章讨论的是`else`子句，你可以打赌我们也可以在`try…except`语句中使用`else`子句，这一点你完全正确。让我们看看规则:

只有当`try`子句正常完成且没有遇到任何异常时，`else`子句中的代码才会执行。

这可能是这三个`else`子句用法中最容易理解的一个。然而，考虑以下代码的具体用法。

“Try…except…else”语句

在上面的代码中，我们将原本在`try`子句中的`print`函数移到了`else`子句中。对于这两个函数调用，如您所见，`else`子句仅在没有引发`ValueError`异常时执行，这与其预期用途一致。

值得注意的是，最小化`try`子句中的代码是非常重要的，因为它将准确地告诉我们什么代码会导致异常，在这种情况下，就是`int()`函数。因此，与前两种用法相比，`else`子句增加了使我们的代码更干净的好处。

# 结论

在本文中，除了`if`语句中`else`子句最广为人知的用法之外，我们还回顾了另外三个`else`子句。下面是这三种用法的快速回顾。

*   在`for`和`while`语句中使用`else`子句时，如果前面的子句(`for`或`while`)遇到`break`语句，则`else`子句中的代码不会执行。否则，它将按照前面的子句执行。
*   在`try…except`语句中使用`else`子句时，如果在`try`子句执行过程中出现异常，则`else`子句中的代码不会执行。只有当`try`子句没有引发异常时，它才会运行。

这三者中，人们最熟悉的可能是`try…except`语句中的`else`子句。关于另外两个，对于新的 Python 程序员来说，它们可能会非常混乱。即使对于那些经验丰富的人来说，如果你不使用这些被低估的功能，它们仍然会令人困惑。因此，我的建议是了解这些特性，这将允许您阅读可能碰巧使用它们的其他人的代码。如果您自己正在使用这些功能，您可能希望确保您的代码读者(例如，在团队项目中)也能欣赏这些功能。

感谢阅读！