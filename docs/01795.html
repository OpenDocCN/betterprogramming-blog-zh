<html>
<head>
<title>What Is State in SwiftUI and How Do We Use It?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI中的状态是什么以及我们如何使用它？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/what-is-state-in-swiftui-and-how-to-use-it-cc672de85188?source=collection_archive---------13-----------------------#2019-10-14">https://betterprogramming.pub/what-is-state-in-swiftui-and-how-to-use-it-cc672de85188?source=collection_archive---------13-----------------------#2019-10-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bb17" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">SwiftUI中最重要的概念之一的解释</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4640210c7263bff19126a58b9efe4b98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xPN1TMIK_kHoVBcQLKErYA.jpeg"/></div></div></figure><p id="4a15" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">众所周知，苹果发布了SwiftUI，利用Swift的力量在所有苹果平台上构建用户界面。在我向您展示我们将在本文中构建什么之前，让我解释SwiftUI开发中最重要的概念之一:状态。</p><h1 id="db6e" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">什么是国家？</h1><blockquote class="mf mg mh"><p id="5f73" class="kr ks mi kt b ku kv jr kw kx ky ju kz mj lb lc ld mk lf lg lh ml lj lk ll lm ij bi translated">状态表示与视图关联的数据。它可以用布尔、字符串、Int等基本类型来表示，也可以用视图模型等复杂对象来表示。假设你是一个用户，你以某种方式进行交互——你点击按钮，触发一个动作，改变<code class="fe mm mn mo mp b">@State</code>变量的值。然后它会自动更新用户界面。</p></blockquote><h2 id="ec0e" class="mq lo iq bd lp mr ms dn lt mt mu dp lx la mv mw lz le mx my mb li mz na md nb bi translated">它如何自动更新用户界面？</h2><p id="5277" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">使用<code class="fe mm mn mo mp b">View</code>时，<code class="fe mm mn mo mp b">Content View</code>符合<code class="fe mm mn mo mp b">View</code>协议，我们必须写<code class="fe mm mn mo mp b">Body</code>属性。因此，每当我们更改<code class="fe mm mn mo mp b">@State</code>变量的值时，它都会更新<code class="fe mm mn mo mp b">View</code>并且再次评估<code class="fe mm mn mo mp b">body</code>属性，因此<code class="fe mm mn mo mp b">View</code>会再次重新渲染。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/621920b2e0529149fa3d5f056b3ee1b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ErNcwEXt3DTjosiVpo2yAA.jpeg"/></div></div></figure><p id="d102" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">理论到此为止。让我们看看如何在XCode中使用<code class="fe mm mn mo mp b">@State</code>变量，并了解我们将构建什么。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/402aab614496b01df730a6800ad7557c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*p8is369E07PZujp5g9DmUQ.gif"/></div></div></figure></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="4334" class="ln lo iq bd lp lq nq ls lt lu nr lw lx jw ns jx lz jz nt ka mb kc nu kd md me bi translated">第1步:如何创建SwiftUI项目</h1><p id="4d9a" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">在XCode中，转到文件→新建→项目→单视图应用程序→下一步→选择用户界面→ SwiftUI →下一步→选择要保存此项目的项目位置→完成</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="4079" class="ln lo iq bd lp lq nq ls lt lu nr lw lx jw ns jx lz jz nt ka mb kc nu kd md me bi translated">第2步:ContentView.swift</h1><p id="ef25" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">默认<code class="fe mm mn mo mp b">SwiftUI(ContentView)</code> <strong class="kt ir"> </strong>文件会出现以下代码:</p><pre class="kg kh ki kj gt nv mp nw nx aw ny bi"><span id="e951" class="mq lo iq mp b gy nz oa l ob oc"><strong class="mp ir">import</strong> SwiftUI</span><span id="ad5f" class="mq lo iq mp b gy od oa l ob oc"><strong class="mp ir">struct</strong> ContentView: View {<br/><strong class="mp ir">var</strong> body: <strong class="mp ir">some</strong> View {<br/>    Text(”Hello World!”)<br/>  }<br/>}</span><span id="ae9d" class="mq lo iq mp b gy od oa l ob oc"><strong class="mp ir">struct</strong> ContentView_Previews: PreviewProvider {<strong class="mp ir">  <br/>static</strong> <strong class="mp ir">var</strong> previews: <strong class="mp ir">some</strong> View {<br/>     ContentView()<br/>   }<br/>}</span></pre><p id="0152" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在右侧，您可以看到用户界面的预览。如果看不到预览，进入右上方的<strong class="kt ir">调整编辑器选项</strong>，选择<strong class="kt ir">画布</strong>或按<strong class="kt ir"> <em class="mi">选项+命令+回车。</em> </strong>然后确保画布正在显示用户界面预览。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/bb6331f710eda81c470e72eabe2e260f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*GjpMyO5_MRo2xMcU.png"/></div></figure></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="c2df" class="ln lo iq bd lp lq nq ls lt lu nr lw lx jw ns jx lz jz nt ka mb kc nu kd md me bi translated">第3步:创建用户界面</h1><p id="4132" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">定义<code class="fe mm mn mo mp b">ContentView</code>体内的垂直堆栈。这将包含<code class="fe mm mn mo mp b">Text</code>和<code class="fe mm mn mo mp b">Change Name</code>按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi of"><img src="../Images/e5c9681c5455788b7aeedd327b96ec12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*roj-CSpWc6qjWT6Bs76RAQ.png"/></div></figure><p id="902b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">代码:</p><pre class="kg kh ki kj gt nv mp nw nx aw ny bi"><span id="5fdd" class="mq lo iq mp b gy nz oa l ob oc">VStack {</span><span id="cae2" class="mq lo iq mp b gy od oa l ob oc">Text(”Hello World!”)</span><span id="441a" class="mq lo iq mp b gy od oa l ob oc">Button(“Change Name”)<br/>   {<br/>   //Button action goes<br/>here</span><span id="0f53" class="mq lo iq mp b gy od oa l ob oc">}<br/>}</span></pre><p id="1d75" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于最终的输出，我们想定制文本字体大小，按钮字体大小，背景颜色，文本颜色，我们想使按钮的边缘呈圆形。</p><p id="1ffa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们修改按钮代码，以便可以访问按钮的文本属性。修改后，代码将如下所示:</p><pre class="kg kh ki kj gt nv mp nw nx aw ny bi"><span id="44dc" class="mq lo iq mp b gy nz oa l ob oc">VStack{<br/>   Text(”Hello World!”)<br/>   Button(action: {<br/>   //Button action goes here<br/>   }){<br/>      Text(“Change Name”)<br/>     }<br/>}</span></pre><p id="f85c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，让我们看看我们将用来实现预期输出的属性。</p><p id="7784" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以使用属性<code class="fe mm mn mo mp b">.font()</code> <strong class="kt ir"> <em class="mi">来改变字体大小。</em>T11】</strong></p><pre class="kg kh ki kj gt nv mp nw nx aw ny bi"><span id="73e8" class="mq lo iq mp b gy nz oa l ob oc">Text(name)<br/>   .font(.largeTitle) // Font type</span></pre><p id="9c81" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以使用属性<code class="fe mm mn mo mp b">.background(Color.COLOR_NAME)</code>改变背景颜色</p><pre class="kg kh ki kj gt nv mp nw nx aw ny bi"><span id="0ed3" class="mq lo iq mp b gy nz oa l ob oc">Text(“Change Name”) // Button Text<br/>   .background(Color.orange) // Button Background Color</span></pre><p id="cce3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要改变文本颜色，我们可以使用属性<code class="fe mm mn mo mp b">.foregroundColor(Color.COLOR_NAME)</code></p><pre class="kg kh ki kj gt nv mp nw nx aw ny bi"><span id="ca85" class="mq lo iq mp b gy nz oa l ob oc">Text(“Change Name”) // Button Text<br/>   .foregroundColor(Color.white) // Button text color</span></pre><p id="f9d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了使边缘呈圆形，我们可以使用属性<code class="fe mm mn mo mp b">.cornerRadius(CORNER_RADIUS_VALUE)</code></p><pre class="kg kh ki kj gt nv mp nw nx aw ny bi"><span id="0c6b" class="mq lo iq mp b gy nz oa l ob oc">Text(“Change Name”) // Button Text<br/>   .cornerRadius(10.0) // Button corner radius property</span></pre><p id="e659" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果我们将上述所有属性应用于文本和按钮，我们的代码将如下所示:</p><pre class="kg kh ki kj gt nv mp nw nx aw ny bi"><span id="8f71" class="mq lo iq mp b gy nz oa l ob oc">//Vertical Stack<br/>VStack {<br/>   //Text or label of the name<br/>   Text(name)<br/>      .font(.largeTitle) // Font type<br/>      .padding() // Padding to the name text</span><span id="5537" class="mq lo iq mp b gy od oa l ob oc">   Button(action : {</span><span id="c303" class="mq lo iq mp b gy od oa l ob oc">      //Button action goes here</span><span id="c7f8" class="mq lo iq mp b gy od oa l ob oc">   }){<br/>      //Button Text Properties<br/>      Text(“Change Name”) // Button Text<br/>         .fontWeight(.heavy) // Button Text Weight<br/>         .padding() // Padding to the button<br/>         .background(Color.orange) // Button Background Color<br/>         .foregroundColor(Color.white) // Button text color<br/>         .cornerRadius(10.0) // Button corner radius property<br/>      }<br/>   }</span></pre><p id="15d6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/8e804a7702a8e2f9e60a9a48d868fa09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*jz2pAezs_MweOzg9UFIVvg.png"/></div></figure><p id="836d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们的UI已经准备好了，让我们看看如何使用<code class="fe mm mn mo mp b">@State</code>变量。</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="49b7" class="ln lo iq bd lp lq nq ls lt lu nr lw lx jw ns jx lz jz nt ka mb kc nu kd md me bi translated">步骤04:如何使用<a class="ae oh" href="http://twitter.com/State" rel="noopener ugc nofollow" target="_blank"> @State </a>变量</h1><p id="c37c" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">现在我们声明状态变量。要声明一个状态变量，我们必须在声明变量之前使用<code class="fe mm mn mo mp b">@State</code>关键字。查看下面一行，更好地理解如何声明状态变量:</p><pre class="kg kh ki kj gt nv mp nw nx aw ny bi"><span id="5383" class="mq lo iq mp b gy nz oa l ob oc">@State <strong class="mp ir">var</strong> name = “Mayur”</span></pre><p id="1baf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">每当用户单击按钮时，我们都希望更改状态变量值。为此，我们需要改变<code class="fe mm mn mo mp b">Button ACTION</code> <strong class="kt ir"> </strong>块中变量的值。要访问按钮动作方法中的状态变量，我们需要定义<code class="fe mm mn mo mp b">self.STATE_VARIABLE_NAME</code> <strong class="kt ir"> </strong>，如下所示:</p><pre class="kg kh ki kj gt nv mp nw nx aw ny bi"><span id="fd48" class="mq lo iq mp b gy nz oa l ob oc"><strong class="mp ir">self</strong>.name = “Rathod”</span></pre><p id="e8a0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当用户点击按钮时，它改变状态变量值。当状态变量值改变时，它再次呈现视图并改变显示的文本值。</p><h1 id="6017" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">祝贺你成功实现了你的输出。</h1><p id="ef5a" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">整个代码如下所示:</p><pre class="kg kh ki kj gt nv mp nw nx aw ny bi"><span id="45fa" class="mq lo iq mp b gy nz oa l ob oc">//<br/>//  ContentView.swift<br/>//  State-Demo<br/>//<br/>//  Created by Mayur on 14/10/19.<br/>//  Copyright © 2019 Mayur Rathod. All rights reserved.<br/>//<br/><br/>import SwiftUI<br/><br/>struct ContentView: View {<br/>    <br/>    @State var name = "Mayur"<br/>    <br/>    var body: some View {<br/>        //Vertical Stack<br/>        VStack {<br/>            <br/>            //Text or label of the name<br/>            Text(name)<br/>                .font(.largeTitle)  // Font type<br/>            <br/>            <br/>            Button(action : {<br/>                /*<br/>                 - When user clicks on the button this block will be executed<br/>                 - When user click on the button  View will rendered again since we are changing or mutating the @State variabl value<br/>                */<br/>                self.name = "Rathod"<br/>            }){<br/>                //Button Text Properties<br/>                Text("Chnage Name") // Button Text<br/>                    .fontWeight(.heavy) // Button Text Weight<br/>                    .padding()          // Padding to the button<br/>                    .background(Color.orange)   // Button Background Color<br/>                    .foregroundColor(Color.white)   // Button text color<br/>                    .cornerRadius(10.0) // Button corner radius property<br/>            }<br/>        }<br/>    }<br/>}<br/><br/>struct ContentView_Previews: PreviewProvider {<br/>    static var previews: some View {<br/>        ContentView()<br/>    }<br/>}</span></pre></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="dee4" class="ln lo iq bd lp lq nq ls lt lu nr lw lx jw ns jx lz jz nt ka mb kc nu kd md me bi translated">资源</h1><ul class=""><li id="26b8" class="ok ol iq kt b ku nc kx nd la om le on li oo lm op oq or os bi translated">在<a class="ae oh" href="https://github.com/rathodmayur93/SwiftUIStateDemo" rel="noopener ugc nofollow" target="_blank"> Github </a>上的项目回购</li></ul></div></div>    
</body>
</html>