<html>
<head>
<title>How to Write Test Cases for React Hooks From Scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从头开始编写React钩子的测试用例</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/write-test-cases-especially-for-react-hooks-from-scratch-eab164d8e2e8?source=collection_archive---------12-----------------------#2020-03-30">https://betterprogramming.pub/write-test-cases-especially-for-react-hooks-from-scratch-eab164d8e2e8?source=collection_archive---------12-----------------------#2020-03-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ad96" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">经过测试的组件是健康的组件</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fb90bfafe91c6f6539225900f01de3a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2nZH9KGXd1GY1QmgcGfFGA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@pineapple?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">菠萝供应公司</a>在<a class="ae ky" href="https://unsplash.com/s/photos/healthy?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="667d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们为React挂钩编写了测试用例，以确保它们能够如预期的那样良好运行。在这里，我们将实现一个定制的钩子，稍后，我们将为这个钩子编写测试用例。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/a6a5e25ff2d005cb09e59aef35f43dd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SaIZyZktA7LhUsEX_fKtvg.png"/></div></div></figure><p id="6ca2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，让我们从头开始。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="693c" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak">第一步。创建一个应用程序“测试-挂钩”</strong></h1><p id="2e6d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">为此，我们需要使用下面的命令创建一个演示应用程序，让我们运行下面的命令并创建一个演示应用程序:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="a72c" class="nf me it nb b gy ng nh l ni nj">npx create-react-app testing-hooks</span></pre><p id="ebb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">成功完成上述命令后:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="1c97" class="nf me it nb b gy ng nh l ni nj">cd testing-hooks</span><span id="fbc7" class="nf me it nb b gy nk nh l ni nj">npm start</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7e74" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak">第二步。在浏览器中打开localhost:3000</strong></h1><p id="b322" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">检查您当前的端口(这里，默认端口是3000)并确认它正在工作:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/0c0a7fa324f2826cb82aa532f91c8092.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0qPC581bWsot_ZIf4sp_Jg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">本地主机快照:3000</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="3048" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak">第三步。创建自定义挂钩</strong></h1><p id="3499" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">让我们创建一个定制挂钩，稍后我们将为其创建测试用例。在这个钩子中，我们将使用一个带有<code class="fe nm nn no nb b">currentYear</code>的状态。它保存当前的年份值(目前是2020年)，并有一个方法<code class="fe nm nn no nb b">changeYear()</code>来更改年份(更新状态)。</p><p id="097d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们在<code class="fe nm nn no nb b">src</code>文件夹中创建一个文件<code class="fe nm nn no nb b">useYearHook.js</code>，并将下面的代码写入<code class="fe nm nn no nb b">useYearHook.js</code>文件中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="78f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们先来了解一下上面的代码。</p><p id="3de7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们正在下面的行中导入<code class="fe nm nn no nb b">useState</code>:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="7384" class="nf me it nb b gy ng nh l ni nj">import { useState } from 'react';</span></pre><p id="a10d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们创建了一个名为<code class="fe nm nn no nb b">useYearHook</code>的钩子:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="658e" class="nf me it nb b gy ng nh l ni nj"><strong class="nb iu">function</strong> useYearHook() {<br/>    ...<br/>}</span></pre><p id="af9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe nm nn no nb b">useState</code>钩子创建一个状态<code class="fe nm nn no nb b">currentYear</code>，用当前年份的值初始化，并获取一个函数<code class="fe nm nn no nb b">setYear()</code>来更新这个状态。<code class="fe nm nn no nb b">new Date().getFullYear()</code>将返回当前年份。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="8cc4" class="nf me it nb b gy ng nh l ni nj"><strong class="nb iu">const</strong> [currentYear, setYear] = useState(new Date().getFullYear());</span></pre><p id="4ddc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个函数<code class="fe nm nn no nb b">changeYear()</code>来更新状态，它将增加当前年份:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="db66" class="nf me it nb b gy ng nh l ni nj"><strong class="nb iu">const</strong> changeYear = () <strong class="nb iu">=&gt;</strong> {<br/>   setYear(currentYear + 1)<br/> }</span></pre><p id="182c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">返回<code class="fe nm nn no nb b">currentYear</code>和<code class="fe nm nn no nb b">changeYear</code>:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="e38b" class="nf me it nb b gy ng nh l ni nj">return { currentYear, changeYear };</span></pre><p id="12d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导出挂钩<code class="fe nm nn no nb b">useYearHook</code>,以便我们可以将它导入我们的组件:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="65a5" class="nf me it nb b gy ng nh l ni nj">export default useYearHook;</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b3cb" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak">步骤四。在我们的组件</strong>中使用钩子“useYearHook”</h1><p id="63fb" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">现在，让我们在我们的<code class="fe nm nn no nb b">App.js</code> ( <code class="fe nm nn no nb b">App</code>组件)中使用上面的钩子。转到<code class="fe nm nn no nb b">src/App.js</code>删除所有代码，并写入以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="eab1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们先来了解一下代码。在文件<code class="fe nm nn no nb b">App.js</code>中导入钩子<code class="fe nm nn no nb b">useYearHook</code>:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="b9d7" class="nf me it nb b gy ng nh l ni nj">import useYearHook from './useYearHook';</span></pre><p id="3cd0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个功能组件<code class="fe nm nn no nb b">App</code>:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="f760" class="nf me it nb b gy ng nh l ni nj">function App() { }</span></pre><p id="6581" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">调用钩子<code class="fe nm nn no nb b">useYearHook</code>得到<code class="fe nm nn no nb b">useYear</code>中的引用:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="7d3b" class="nf me it nb b gy ng nh l ni nj"><strong class="nb iu">const</strong> useYear = useYearHook();</span></pre><p id="42bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">返回要在web浏览器中呈现的HTML:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="24d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导出应用程序:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="c440" class="nf me it nb b gy ng nh l ni nj">export default App;</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="e41d" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak">第五步。运行应用程序</strong></h1><p id="1894" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">现在打开浏览器，点击<code class="fe nm nn no nb b">localhost:3000</code>。您可以在浏览器中看到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/2c10350012f0828677f74bf02ae6707b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/0*udxQEdyE9uKWNY2o"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">浏览器中localhost:3000的快照</p></figure><p id="bc1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在应用程序中看到，我们已经成功地创建了我们的自定义钩子，并在我们的<code class="fe nm nn no nb b">App</code>组件中使用它。</p><p id="b33e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击<em class="ns">后更改年份</em>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/d5f8a1f6fa7eae17673065c7d7309317.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/0*pAy9NTDEsJrgYK6j"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">浏览器中localhost:3000的快照</p></figure><p id="e30a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的快照中，您可以看到，在我们单击“更改年份”后，它会更改当前年份并增加年份，这意味着我们更新了状态。</p><p id="222c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经成功地在我们的web应用程序中实现了定制钩子，现在是时候为这个钩子编写测试用例了。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="5e5e" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">第六步。编写测试用例来测试我们的钩子</h1><p id="fdc8" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">现在我们要测试钩子(<code class="fe nm nn no nb b">useState</code>和自定义钩子)，所以让我们开始编写测试钩子的代码。</p><p id="e410" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要一个React库，我正在使用“<a class="ae ky" href="https://github.com/testing-library/react-hooks-testing-library" rel="noopener ugc nofollow" target="_blank">@ testing-library/React-hooks</a>”，让我们使用下面的命令在我们的应用程序中安装这个依赖项:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="2a76" class="nf me it nb b gy ng nh l ni nj">npm install --save-dev @testing-library/react-hooks</span></pre><p id="d70a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在转到<code class="fe nm nn no nb b">src</code>文件夹中的文件<code class="fe nm nn no nb b">App.test.js</code>(它已经通过create-react-app进入我们的应用程序)并删除所有代码。在这个文件中，我们将编写两个测试用例:</p><ol class=""><li id="2eb2" class="nu nv it lb b lc ld lf lg li nw lm nx lq ny lu nz oa ob oc bi translated">“应等于当前年份”。我们将测试状态，在这里，我们将测试由<code class="fe nm nn no nb b">useState</code>在<code class="fe nm nn no nb b">useYearHook.js</code> <strong class="lb iu"> </strong>(自定义钩子)文件中创建的<code class="fe nm nn no nb b">currentYear</code>。</li><li id="716f" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">“应增加年份”。我们将测试钩子的方法，在这里，我们将测试由文件<code class="fe nm nn no nb b">useYearHook.js</code>中的<code class="fe nm nn no nb b">useYearHook</code>钩子创建的<code class="fe nm nn no nb b">changeYear()</code>方法。我们将确保该方法将增加状态，并且增加的值将是正确的。</li></ol><p id="1acd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始为“应等于当年”<em class="ns"> </em>写第一个测试用例来测试<code class="fe nm nn no nb b">useState</code>。我希望你已经删除了<code class="fe nm nn no nb b">App.test.js</code>中的所有代码，现在在<code class="fe nm nn no nb b">App.test.js</code>文件中写入下面的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="5a91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们先来了解一下代码。</p><p id="bcb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">create-react-app命令默认安装Jest测试工具，Jest有一个名为<code class="fe nm nn no nb b">describe()</code>的函数。Describe用于在块中创建相关的测试套件。</p><p id="508b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们正在测试<code class="fe nm nn no nb b">useYearHook</code>，我们将把<code class="fe nm nn no nb b">Test useYearHook</code>作为它的第一个参数。第一个参数是一个字符串，第二个参数是一个包含所有测试套件的函数。它将包含使用<code class="fe nm nn no nb b">it()</code>功能的测试列表。</p><p id="13ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用<code class="fe nm nn no nb b">it()</code>函数定义一个测试用例，<code class="fe nm nn no nb b">it()</code>将第一个参数作为描述测试用例的字符串。第二个参数是一个函数，我们将在其中编写测试的逻辑。</p><p id="c285" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面，该行用于从<code class="fe nm nn no nb b">@testing-library/react-hooks</code>导入<code class="fe nm nn no nb b">act</code>和<code class="fe nm nn no nb b">renderHook</code>:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="a906" class="nf me it nb b gy ng nh l ni nj">import { act, renderHook } from "@testing-library/react-hooks";</span></pre><p id="a744" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导入自定义挂钩进行测试:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="2635" class="nf me it nb b gy ng nh l ni nj">import useYear from './useYearHook';</span></pre><p id="f87d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经从库中取出了<code class="fe nm nn no nb b">renderHook()</code>方法，这个函数基本上以一个钩子作为参数，并返回该钩子的渲染结果作为结果:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="d812" class="nf me it nb b gy ng nh l ni nj">const { result } = renderHook(useYear);</span></pre><p id="54ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">计算预期年份以测试状态:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="ce02" class="nf me it nb b gy ng nh l ni nj">let expectedYear=(new Date().getFullYear());</span></pre><p id="e443" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保挂钩逻辑正确的断言行:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="331e" class="nf me it nb b gy ng nh l ni nj">expect(result.current.currentYear).toBe(expectedYear);</span></pre><p id="031d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们使用下面的命令运行测试用例:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="378e" class="nf me it nb b gy ng nh l ni nj">npm run test</span></pre><p id="97e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看看结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/709926867e8e319c8bd8c880cb48abb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bFXL6lEeWM4BLBJoFqMZEg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">npm运行测试的快照</p></figure><p id="b03e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以看到，我们的第一个测试案例已经通过。这意味着在我们的自定义钩子中，状态是好的，它给出了当前的年份。</p><p id="b190" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始为“应递增年份”<em class="ns"> </em>写第二个测试用例，来测试自定义钩子的方法<code class="fe nm nn no nb b">changeYear()</code> <strong class="lb iu"> </strong>。在同一文件<code class="fe nm nn no nb b">App.test.js</code>中添加以下测试用例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="ab29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们先来了解一下代码。</p><p id="69d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了<code class="fe nm nn no nb b">act()</code>方法之外，其余代码与上面的测试用例相似。我们从库中取出了<code class="fe nm nn no nb b">act()</code>方法，这个<code class="fe nm nn no nb b">act()</code>是用来做某种类似钩子的函数调用的行为:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="979a" class="nf me it nb b gy ng nh l ni nj">act(() <strong class="nb iu">=&gt;</strong> {<br/>        result.current.changeYear();<br/> });</span></pre><p id="4f6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在使用<code class="fe nm nn no nb b">npm run test</code>运行测试用例，并查看结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/e5d87e7a9b7d9bb4523986f6522a5560.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e4ZhK_EXa-HDcMYzG6ZW8g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">npm运行测试的快照</p></figure><p id="7d38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的结果中，你可以看到我们所有的测试用例都通过了，但是让我们来谈谈第二个测试用例。</p><p id="7108" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它也通过了，这意味着我们的定制钩子可以在我们的组件中很好地工作。现在，我建议您去修改代码，并测试它以获得更好的理解。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="a6bb" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结论</h1><p id="4b22" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">阅读完本文后，您一定对使用以下内容测试React挂钩有所了解:</p><ul class=""><li id="282c" class="nu nv it lb b lc ld lf lg li nw lm nx lq ny lu ok oa ob oc bi translated">我们如何实现挂钩(内置的和定制的)？</li><li id="0322" class="nu nv it lb b lc od lf oe li of lm og lq oh lu ok oa ob oc bi translated">我们如何在React应用程序中使用这些钩子？</li><li id="0887" class="nu nv it lb b lc od lf oe li of lm og lq oh lu ok oa ob oc bi translated">我们如何为钩子编写测试用例？</li><li id="0421" class="nu nv it lb b lc od lf oe li of lm og lq oh lu ok oa ob oc bi translated">在测试用例中测试时，我们如何执行类似钩子函数调用的任何行为？</li><li id="974a" class="nu nv it lb b lc od lf oe li of lm og lq oh lu ok oa ob oc bi translated">我们如何运行测试用例？</li></ul><p id="d482" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。</p></div></div>    
</body>
</html>