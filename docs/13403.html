<html>
<head>
<title>Implement Bottom Sheet in Jetpack Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Jetpack Compose中实现底部表单</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/implement-bottom-sheet-in-jetpack-compose-d6472e8eaf2e?source=collection_archive---------3-----------------------#2022-08-24">https://betterprogramming.pub/implement-bottom-sheet-in-jetpack-compose-d6472e8eaf2e?source=collection_archive---------3-----------------------#2022-08-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="da1b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">开发人员的简短指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/907dfa3a5e8cabcaa0fc100624eb6820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tlbbPokxXmjPSa0u7sWWzw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">本图中使用的Jetpack Compose徽标是由Google创建的官方徽标</p></figure><p id="b316" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Jetpack Compose给我们带来了这么多好东西。与XML相比，使用UI只是一种乐趣。它带给我们的一个东西是实现底层表的开箱即用的方法。不需要包括任何依赖性。一切都已经在那里了。</p><blockquote class="ls lt lu"><p id="555b" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">模态底部表单提供了一组选项，同时阻止了与屏幕其他部分的交互。它们是内联菜单和简单对话框的替代品，为内容、图标和动作提供了额外的空间。”根据<a class="ae kv" href="https://developer.android.com/reference/kotlin/androidx/compose/material/package-summary#ModalBottomSheetLayout(kotlin.Function1,androidx.compose.ui.Modifier,androidx.compose.material.ModalBottomSheetState,androidx.compose.ui.graphics.Shape,androidx.compose.ui.unit.Dp,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,androidx.compose.ui.graphics.Color,kotlin.Function0)" rel="noopener ugc nofollow" target="_blank">官方文件</a></p></blockquote><p id="06c2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用<code class="fe lz ma mb mc b">ModalBottomSheetLayout</code>,它有自己的状态，我们需要记住。所以让我们继续吧。</p><p id="738a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们要创建<code class="fe lz ma mb mc b">sheetState</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="b8a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有三个<code class="fe lz ma mb mc b">ModalBottomSheetValues</code>:</p><ul class=""><li id="8ef9" class="mf mg iq ky b kz la lc ld lf mh lj mi ln mj lr mk ml mm mn bi translated"><code class="fe lz ma mb mc b">Hidden</code></li><li id="02ee" class="mf mg iq ky b kz mo lc mp lf mq lj mr ln ms lr mk ml mm mn bi translated"><code class="fe lz ma mb mc b">Expanded</code></li><li id="8fc4" class="mf mg iq ky b kz mo lc mp lf mq lj mr ln ms lr mk ml mm mn bi translated"><code class="fe lz ma mb mc b">HalfExpanded</code></li></ul><p id="a172" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">前两个已经足够描述了。<code class="fe lz ma mb mc b">HalfExpanded</code>将只显示底层的一半，只有当底层的高度超过屏幕高度的50%时，此状态才被激活。</p><p id="926c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe lz ma mb mc b">confirmStateChange</code>是一个可选的回调函数，用于确认或否决待定的状态更改。有了这样的值，我们就阻止了<code class="fe lz ma mb mc b">HalfExpanded</code>底部板材值。</p><p id="2359" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不要忘记添加<code class="fe lz ma mb mc b">@OptIn(ExperimentalMaterialApi::class)</code>，因为这一切都还在试验阶段。</p><p id="d15c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们现在可以实现<code class="fe lz ma mb mc b">ModalBottomSheetLayout</code>并在其内容中放置整个屏幕。我们的屏幕将如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="b4f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如我们所见，我们将屏幕组件放在了<code class="fe lz ma mb mc b">ModalBottomSheetLayout</code>的内容中。此外，我们将<code class="fe lz ma mb mc b">sheetState</code>作为参数传递。<br/> <code class="fe lz ma mb mc b">BackHandler</code>是处理系统后退按钮按下的效果。第一个参数是当它被启用时，第二个参数是当系统后退按钮被按下时它应该做什么。</p><p id="e719" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种情况下，我们只想隐藏底部的工作表，如果它被显示并且系统返回按钮被按下。</p><p id="60bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe lz ma mb mc b">Column</code>内的<code class="fe lz ma mb mc b">Button</code>正在显示和隐藏底层板材。<code class="fe lz ma mb mc b">sheetState.show()</code>将以动画形式显示底层，而<code class="fe lz ma mb mc b">sheetState.hide()</code>将以动画形式隐藏底层。</p><p id="526d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们需要看到的最后一件事是<code class="fe lz ma mb mc b">BottomSheet</code>可组合:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="906d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一个填充了一些文本的非常简单的列。你想放什么都可以。</p><p id="c88b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想让一些按钮做一些事情，你只需要通过回调与主组件进行通信。</p><p id="902b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一个非常简单的逻辑，但是知道它非常有用。这里需要注意的是，显示和隐藏底部工作表的逻辑放在UI中，但是应该由<code class="fe lz ma mb mc b">ViewModel</code>来处理。这有点超出了本文的范围，因为我只是想展示如何创建一个底层表。</p><p id="ab55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是本文的全部内容。我希望你喜欢它！</p><p id="68d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在<a class="ae kv" href="https://github.com/Giga99/MediumRepos" rel="noopener ugc nofollow" target="_blank">我的GitHub repo </a>中找到所有的源代码。</p><pre class="kg kh ki kj gt mt mc mu mv aw mw bi"><span id="76f6" class="mx my iq mc b gy mz na l nb nc"><strong class="mc ir">Want to Connect?</strong></span><span id="57c9" class="mx my iq mc b gy nd na l nb nc"><a class="ae kv" href="https://github.com/Giga99" rel="noopener ugc nofollow" target="_blank">GitHub</a><br/><a class="ae kv" href="https://www.linkedin.com/in/igor-stevanovic/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a><br/><a class="ae kv" href="https://twitter.com/igor_s1999" rel="noopener ugc nofollow" target="_blank">Twitter</a><br/><a class="ae kv" href="https://giga99.github.io/portfolio-website/" rel="noopener ugc nofollow" target="_blank">Portfolio website</a></span></pre></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="b33a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想了解如何在Jetpack Compose中请求权限，请阅读以下文章:</p><div class="nl nm gp gr nn no"><a rel="noopener  ugc nofollow" target="_blank" href="/implement-horizontal-and-vertical-viewpager-in-jetpack-compose-a7a91f2ac746"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">在Jetpack Compose中实现水平和垂直ViewPager</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">在Jetpack撰写中实现ViewPager</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">better编程. pub</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc kp no"/></div></div></a></div><div class="nl nm gp gr nn no"><a rel="noopener  ugc nofollow" target="_blank" href="/jetpack-compose-request-permissions-in-two-ways-fd81c4a702c"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">在Jetpack Compose中请求权限的两种方法</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">在Jetpack Compose中请求权限的最佳方式</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">better编程. pub</p></div></div><div class="nx l"><div class="od l nz oa ob nx oc kp no"/></div></div></a></div></div></div>    
</body>
</html>