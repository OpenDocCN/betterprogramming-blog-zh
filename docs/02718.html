<html>
<head>
<title>Currying and Vanilla JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Currying和普通JavaScript</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/currying-and-vanilla-javascript-39c82395a2d6?source=collection_archive---------8-----------------------#2019-12-19">https://betterprogramming.pub/currying-and-vanilla-javascript-39c82395a2d6?source=collection_archive---------8-----------------------#2019-12-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0b0c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">包括DOM操作在内的currying函数示例</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ff4f9e8551133a71b9d78a0a35bca913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-5YUvASWWUHUrrrkq3KbMg.jpeg"/></div></div></figure><ul class=""><li id="290e" class="ku kv it kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated"><a class="ae lm" href="https://github.com/01Clarian/CurryingAndDOMJS" rel="noopener ugc nofollow" target="_blank">源代码</a></li><li id="d0a0" class="ku kv it kw b kx ln kz lo lb lp ld lq lf lr lh li lj lk ll bi translated"><a class="ae lm" href="https://youtu.be/-l5_4dckKfg" rel="noopener ugc nofollow" target="_blank">视频</a></li></ul><p id="2510" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">在JavaScript中，currying是将一个具有多个参数的函数重写为一系列函数的合成练习，其中每个函数只接受一个参数。</p><p id="ad8b" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">下面是一个采用多个参数的串联函数的示例:</p><pre class="kj kk kl km gt mf mg mh mi aw mj bi"><span id="bca7" class="mk ml it mg b gy mm mn l mo mp">function greetings (greeting, name) {<br/>return greeting + " " + name<br/>}<br/><br/>greetings('Hello','Tatiana')<!-- -->; // returns Hello Tatiana</span></pre><p id="d6af" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">咖喱的版本将如下:</p><pre class="kj kk kl km gt mf mg mh mi aw mj bi"><span id="a8e3" class="mk ml it mg b gy mm mn l mo mp">function greetings (greeting) { return function (name) {<br/>return greeting + " " + name<br/>}</span></pre><p id="67e8" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">请注意，简化的函数<code class="fe mq mr ms mg b">greetings</code>只接受一个参数，并返回另一个也接受一个参数的函数，然后返回连接的结果。</p><p id="369d" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">在这种新形式中，可以通过用一组目标数据创建一个<code class="fe mq mr ms mg b">currier</code>实用程序来展示currying的强大功能。</p><p id="2cea" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">例如，如果我们总是希望<code class="fe mq mr ms mg b">greetings</code>函数以“hello”开头，我们可以创建一个实用程序<code class="fe mq mr ms mg b">currier</code>来实现，如下所示。</p><pre class="kj kk kl km gt mf mg mh mi aw mj bi"><span id="2d0e" class="mk ml it mg b gy mm mn l mo mp">var currier = greetings('Hello')</span><span id="2a97" class="mk ml it mg b gy mt mn l mo mp">currier('Michael') // returns Hello Michael </span></pre><p id="a427" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">现在，如果我们有一个名字数组，并且我们希望总是向这些名字发送特定的问候“你好”，我们可以使用<code class="fe mq mr ms mg b">currier</code>实用程序。</p><pre class="kj kk kl km gt mf mg mh mi aw mj bi"><span id="f19e" class="mk ml it mg b gy mm mn l mo mp">namesArray = ['Tom','Suzy','Bob','John']</span><span id="95af" class="mk ml it mg b gy mt mn l mo mp">let results = []</span><span id="2012" class="mk ml it mg b gy mt mn l mo mp">for(let i = 0; i &lt; namesArray.length; i++) {<br/>results += currier(namesArray[i] + ". ")<br/>}<br/>// returns "hello Tom. hello Suzy. hello Bob. hello John. "</span></pre><p id="2065" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">我们的函数<code class="fe mq mr ms mg b">currier</code>将总是触发一个“hello”输入问候，这样当我们多次执行函数时，我们只运行函数的第二部分。非常酷。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/f9db1f85eb5bf0a22a54ee3c473f57d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*2J8FF2kfBhEkMV6pcj2fwg.png"/></div><p class="mv mw gj gh gi mx my bd b be z dk translated">带注释的外推示例</p></figure><p id="62c3" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">了解了用JavaScript编写currying函数的核心原则后，让我们休息一下，然后开始编写开尔文温度转换器。</p></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="acbc" class="ng ml it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">DOM访问和操作</h1><p id="6028" class="pw-post-body-paragraph ls lt it kw b kx nx ju lu kz ny jx lv lb nz lx ly ld oa ma mb lf ob md me lh im bi translated">在下面的例子中，我们将从头开始用普通的JavaScript构建一个开尔文到华氏温度的转换器，同时观察和对比currying和函数式编程。</p><p id="29f1" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">让我们首先创建一个<code class="fe mq mr ms mg b">index.html</code>文件来设置我们的转换器输入、按钮和结果。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="0c08" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">正如我们所看到的，我们创建了一个带有ID<code class="fe mq mr ms mg b">convertKelvin</code>的<code class="fe mq mr ms mg b">button</code>，一个用户可以输入的数字的<code class="fe mq mr ms mg b">input</code>，设置为0值，以及一个带有<code class="fe mq mr ms mg b">span</code>的<code class="fe mq mr ms mg b">p</code>标签，我们可以在其中显示转换。</p><p id="68ba" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">我们还链接了一个<code class="fe mq mr ms mg b">index.js</code>的脚本源，我们将很快创建它。</p><p id="9b91" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">很简单，让我们在浏览器中启动它，我们应该会看到这些壮观的视觉效果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/02d9fbcce7c069f940204ab48c454590.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*X6XTW3Fp8tYc_S-kbb7hGQ.png"/></div></figure><p id="e5a2" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">很好，让我们继续工作，创建那个<strong class="kw iu"> </strong> <code class="fe mq mr ms mg b">index.js</code> <strong class="kw iu"> </strong>文件。</p><p id="565c" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">首先，让我们在DOM中选择我们希望用JavaScript操作的元素，并连接按钮点击事件，以便我们运行一个日志来查看一切正常。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="91e5" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">当我们保存并刷新浏览器时，我们现在可以在我们的DevTools中看到每次点击都执行日志<strong class="kw iu"> <em class="of">测试</em> </strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/934dea266cc3bf95413a169c7008ef83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vsujhjFfPL8nUrouptrQBw.png"/></div></div></figure><p id="3c03" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">我们通过使用<code class="fe mq mr ms mg b">document.querySelector</code>访问我们在<code class="fe mq mr ms mg b">index.html</code>文件中设置的每个唯一Id属性来选择元素的Id，从而成功地运行了这个程序。</p><p id="d4bc" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">具体来说，我们将按钮<code class="fe mq mr ms mg b">convertKelvin</code>的ID设置为变量<code class="fe mq mr ms mg b">const convertKelvin</code>。<strong class="kw iu"> </strong>然后我们触发onclick事件，该事件运行一个函数，以便运行<em class="of">测试</em>的日志。</p><p id="e90f" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">现在，让我们构建开尔文到华氏温度的转换函数。</p></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="e85d" class="ng ml it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">开尔文公式和DOM实现</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/aa5c5afd839e685ffa3401957168add6.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*xnOwff6WoS0PI-qz1_D5Tw.png"/></div><p class="mv mw gj gh gi mx my bd b be z dk translated">开尔文公式示例</p></figure><p id="2ba4" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">开尔文转换有多种公式，因此我们将重点关注以下内容:</p><pre class="kj kk kl km gt mf mg mh mi aw mj bi"><span id="af31" class="mk ml it mg b gy mm mn l mo mp">Formula = ((kelvin — 273.15) * 9 / 5) + 32</span></pre><p id="a664" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">让我们将这个公式应用到一个新函数中，该函数将转换300开尔文的硬编码参数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="a3f5" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">我们将<code class="fe mq mr ms mg b">convertKelvinReg</code>设置为开尔文的自变量(我们称之为300的输入)和公式的参数。</p><p id="9148" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">然后，我们将上面的开尔文公式硬编码并利用<code class="fe mq mr ms mg b">Math.round </code>，以避免用户不需要的温度小数点。</p><p id="9925" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">请注意，我们没有将公式设置为一个参数，因为这个例子纯粹是为了查看currying的组成差异和对比，而不是纯粹的功能应用，我们将在这篇文章的讨论方面进行更多的讨论。</p><p id="3b64" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">然后，公式<code class="fe mq mr ms mg b">return</code>转到从DOM中的<code class="fe mq mr ms mg b">p</code>标签中选择的结果ID。</p><p id="858f" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">最后，我们在按钮的<code class="fe mq mr ms mg b">onclick</code>事件中调用<code class="fe mq mr ms mg b">convertKelvinReg</code>函数，这样只有当用户点击按钮时，它才会被更新和转换。</p><p id="7b9e" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">当我们保存并刷新时，我们看到我们成功返回80华氏度。然而，这是一个非定制的函数示例，同样，我们也没有为按钮访问设置输入值。</p><p id="1e72" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">让我们喝几口温暖诱人的黑咖啡，然后写出currying转换代码。</p></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="cb13" class="ng ml it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">将开尔文转换为华氏温度</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="3ad6" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">从逻辑上讲，converter函数的curried函数组合版本基本上保持不变。</p><p id="593f" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">然而，现在，新函数一次只接受一个参数，并返回一个新函数，最终将逻辑发送到我们的结果ID的<code class="fe mq mr ms mg b">p</code>标签。</p><p id="bb98" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated"><code class="fe mq mr ms mg b">kelvinNumber</code>的输入ID被设置为变量<code class="fe mq mr ms mg b">const kelvinNumber</code>，允许我们访问该值。然后我们创建一个currier实用函数，它总是将输入值作为它的参数。</p><p id="42f4" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">设置好这个实用程序的值后，我们现在可以简单地在converter按钮的<code class="fe mq mr ms mg b">onclick</code>事件中调用我们的<code class="fe mq mr ms mg b">currier</code>,这将触发输入，为用户显示一个成功的转换。</p><p id="2132" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">当我们保存并刷新浏览器并用值300测试输入时，我们现在得到以下成功的返回。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/7d0a604897156c3382391239ce710af4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5rnLsv5txLSIeN6LmGzGdA.png"/></div></div></figure><p id="ad20" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">我们的咖喱功能正在发挥作用，我们现在可以在进行快速复习和击掌之前喝点咖啡庆祝一下。</p></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="b857" class="ng ml it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">结论</h1><p id="18e2" class="pw-post-body-paragraph ls lt it kw b kx nx ju lu kz ny jx lv lb nz lx ly ld oa ma mb lf ob md me lh im bi translated">就JavaScript中的currying结构而言，这就差不多了。如果你能想到一些有趣的其他奉承的例子或想法，请在下面的评论中留下，我会去看看的。</p><p id="29e1" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">请随时查看这篇文章顶部的视频和完整的源代码。同样，我将在底部提供一些其他有用的文章。</p><p id="8174" class="pw-post-body-paragraph ls lt it kw b kx ky ju lu kz la jx lv lb lw lx ly ld lz ma mb lf mc md me lh im bi translated">感谢您的阅读，希望您能从中受益！</p><div class="oj ok gp gr ol om"><a href="https://wsvincent.com/javascript-currying/" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">JavaScript中的Currying</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">Currying是函数式编程中的一个基本工具，函数式编程是一种编程模式，它试图最小化函数的数量</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">wsvincent.com</p></div></div></div></a></div><div class="oj ok gp gr ol om"><a href="https://www.sitepoint.com/currying-in-functional-javascript/" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">函数式JavaScript - SitePoint中Currying的初学者指南</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">Currying，或部分应用，是一种功能性技术，对于熟悉…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">www.sitepoint.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa ks om"/></div></div></a></div><div class="oj ok gp gr ol om"><a href="https://javascript.info/currying-partials" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">Currying</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">Currying是一种使用函数的高级技术。它不仅在JavaScript中使用，在其他语言中也使用…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">javascript.info</p></div></div><div class="ov l"><div class="pb l ox oy oz ov pa ks om"/></div></div></a></div></div></div>    
</body>
</html>