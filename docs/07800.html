<html>
<head>
<title>10 Tips and Tricks for Data Scientists</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学家的10个技巧和诀窍</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/10tips-and-tricks-for-data-scientists-vol-1-a870455325da?source=collection_archive---------0-----------------------#2021-02-21">https://betterprogramming.pub/10tips-and-tricks-for-data-scientists-vol-1-a870455325da?source=collection_archive---------0-----------------------#2021-02-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c4af" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">R和Python中有用的代码片段</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6365e60a393dc59f00032e51156e45e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0vkVeGWLCZaCJk__RJUVIQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com/s/photos/ten?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="d5c0" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="c254" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">作为数据科学家，我们喜欢高效地完成工作，而不是重新发明轮子。提示和技巧文章提供了数据科学领域常见任务的代码片段。在本文中，我们将主要介绍Python和R，以及Unix、Excel、Git、Docker、Google电子表格等的其他技巧。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><p id="48e4" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">不要错过技巧和窍门第2卷</p><div class="mz na gp gr nb nc"><a rel="noopener  ugc nofollow" target="_blank" href="/10-tips-and-tricks-for-data-scientists-vol-2-5640ccd1aa5e"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">数据科学家的10个惊人技巧和诀窍</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">一些更有用的R和Python代码片段</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">better编程. pub</p></div></div><div class="nl l"><div class="nm l nn no np nl nq ks nc"/></div></div></a></div></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="8535" class="kz la it bd lb lc nr le lf lg ns li lj jz nt ka ll kc nu kd ln kf nv kg lp lq bi translated">计算机编程语言</h1><h2 id="1a80" class="nw la it bd lb nx ny dn lf nz oa dp lj ma ob oc ll me od oe ln mi of og lp oh bi translated">1.如何按元素对元组列表进行排序</h2><p id="f1c4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">假设我有以下列表:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="e284" class="nw la it oj b gy on oo l op oq">l <strong class="oj iu">=</strong> <!-- -->[(1,2), (4,6), (5,1), (1,0)]<br/>l</span></pre><p id="c980" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="31bd" class="nw la it oj b gy on oo l op oq">[(1, 2), (4, 6), (5, 1), (1, 0)]</span></pre><p id="c753" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">我想按照元组的第二个元素来排序:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="b23b" class="nw la it oj b gy on oo l op oq">sorted(l, key<strong class="oj iu">=lambda</strong> <!-- -->t: t[1])</span></pre><p id="3b5b" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="d04d" class="nw la it oj b gy on oo l op oq">[(1, 0), (5, 1), (1, 2), (4, 6)]</span></pre><p id="29a5" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">如果我想按元组的第一个元素排序:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="fd72" class="nw la it oj b gy on oo l op oq">sorted(l, key<strong class="oj iu">=lambda</strong> <!-- -->t: t[0])</span></pre><p id="7429" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="b81b" class="nw la it oj b gy on oo l op oq">[(1, 2), (1, 0), (4, 6), (5, 1)]</span></pre><h2 id="ca44" class="nw la it bd lb nx ny dn lf nz oa dp lj ma ob oc ll me od oe ln mi of og lp oh bi translated">2.如何展平列表列表</h2><p id="c0f0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">假设我们的列表是:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="ed88" class="nw la it oj b gy on oo l op oq">l = [[1, 2, 3], [4, 5, 6], [7], [8, 9]]</span></pre><p id="ad05" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">我们想把它展平成一个列表。我们可以使用<a class="ae ky" href="https://predictivehacks.com/python-list-comprehension-cheat-sheet/" rel="noopener ugc nofollow" target="_blank">列表理解方式，</a>如下:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="dc6c" class="nw la it oj b gy on oo l op oq">[item <strong class="oj iu">for</strong> sublist <strong class="oj iu">in</strong> l <strong class="oj iu">for</strong> item <strong class="oj iu">in</strong> sublist]</span></pre><p id="6294" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="e7ed" class="nw la it oj b gy on oo l op oq">[1, 2, 3, 4, 5, 6, 7, 8, 9]</span></pre><h2 id="d0d6" class="nw la it bd lb nx ny dn lf nz oa dp lj ma ob oc ll me od oe ln mi of og lp oh bi translated">3.列表理解中的“elif”</h2><p id="009a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><strong class="lt iu">场景</strong>:您正在处理从<code class="fe or os ot oj b">1</code>到<code class="fe or os ot oj b">5</code>取值的产品评论，并且您想要创建三个类别:</p><ul class=""><li id="6087" class="ou ov it lt b lu mu lx mv ma ow me ox mi oy mm oz pa pb pc bi translated"><strong class="lt iu">好，</strong>如果评审大于等于<code class="fe or os ot oj b">4</code></li><li id="ec99" class="ou ov it lt b lu pd lx pe ma pf me pg mi ph mm oz pa pb pc bi translated"><strong class="lt iu">中立</strong>，如果审查是一个<code class="fe or os ot oj b">3</code></li><li id="71dc" class="ou ov it lt b lu pd lx pe ma pf me pg mi ph mm oz pa pb pc bi translated"><strong class="lt iu">否定</strong>，如果审查不到<code class="fe or os ot oj b">3</code></li></ul><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="b57e" class="nw la it oj b gy on oo l op oq">x = [1,2,3,4,5,4,3,2,1]</span><span id="b900" class="nw la it oj b gy pi oo l op oq">["Good" if i&gt;=4 else "Neutral" if i==3 else "Bad" for i in x]</span></pre><p id="1655" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="0a60" class="nw la it oj b gy on oo l op oq">['Bad', 'Bad', 'Neutral', 'Good', 'Good', 'Good', 'Neutral', 'Bad', 'Bad']</span></pre><h2 id="41a2" class="nw la it bd lb nx ny dn lf nz oa dp lj ma ob oc ll me od oe ln mi of og lp oh bi translated">4.a社邦线:#！/usr/bin/python3</h2><p id="2e6a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在很多<code class="fe or os ot oj b">.py</code>文件中，我们可能会看到脚本顶部的<a class="ae ky" href="https://en.wikipedia.org/wiki/Shebang_(Unix)" rel="noopener ugc nofollow" target="_blank">射棒线</a>。其目的是定义解释器的位置。通过在脚本顶部添加行<code class="fe or os ot oj b">#!/usr/bin/python3</code>,我们可以在Unix系统上运行<code class="fe or os ot oj b">file.py</code>,它会自动理解这是一个Python脚本。或者，您可以作为<code class="fe or os ot oj b">python3 file.py</code>运行脚本。例如，假设<code class="fe or os ot oj b">file.py</code>是:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="e5f4" class="nw la it oj b gy on oo l op oq">#!/usr/bin/python3</span><span id="2ae1" class="nw la it oj b gy pi oo l op oq">print("Hello shebang line")</span></pre><p id="8874" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">我们可以在Unix上运行:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="0aa4" class="nw la it oj b gy on oo l op oq">$ ./file.py</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="9df6" class="kz la it bd lb lc nr le lf lg ns li lj jz nt ka ll kc nu kd ln kf nv kg lp lq bi translated">稀有</h1><h2 id="1e56" class="nw la it bd lb nx ny dn lf nz oa dp lj ma ob oc ll me od oe ln mi of og lp oh bi translated">6.在多列上用“dplyr”联接</h2><p id="dd16" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><code class="fe or os ot oj b">dplyr</code>允许我们在不止一列上连接两个数据框。您所要做的就是像<code class="fe or os ot oj b">by = c("x1" = "x2", "y1" = "y2")</code>一样在<code class="fe or os ot oj b">by</code>中添加列。例如:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="4249" class="nw la it oj b gy on oo l op oq">library(dplyr)<br/>set.seed(5)<br/>df1 &lt;- tibble(<br/>    x1 = letters[1:10],<br/>    y1 = LETTERS[11:20],<br/>    a = rnorm(10)<br/>)</span><span id="edf9" class="nw la it oj b gy pi oo l op oq">df2 &lt;- tibble(<br/>    x2 = letters[1:10],<br/>    y2 = LETTERS[11:20],<br/>    b = rnorm(10)<br/>)</span><span id="43b3" class="nw la it oj b gy pi oo l op oq">df&lt;-df1%&gt;%inner_join(df2, df2, by = c("x1" = "x2", "y1" = "y2"))</span><span id="1d27" class="nw la it oj b gy pi oo l op oq">df</span></pre><p id="2a70" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="20cd" class="nw la it oj b gy on oo l op oq"># A tibble: 10 x 4<br/>   x1    y1          a      b<br/>   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;<br/> 1 a     K     -0.841   1.23 <br/> 2 b     L      1.38   -0.802<br/> 3 c     M     -1.26   -1.08 <br/> 4 d     N      0.0701 -0.158<br/> 5 e     O      1.71   -1.07 <br/> 6 f     P     -0.603  -0.139<br/> 7 g     Q     -0.472  -0.597<br/> 8 h     R     -0.635  -2.18 <br/> 9 i     S     -0.286   0.241<br/>10 j     T      0.138  -0.259</span></pre><h2 id="c7e9" class="nw la it bd lb nx ny dn lf nz oa dp lj ma ob oc ll me od oe ln mi of og lp oh bi translated">7.如何用for循环在R中存储模型</h2><p id="c0f1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">假设我们想要为<code class="fe or os ot oj b">iris</code>数据集中的每个<code class="fe or os ot oj b">Species</code>运行不同的回归模型。我们可以通过两种不同的方式来实现，如下所示:</p><p id="78f3" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated"><strong class="lt iu">将模型存储在列表中</strong></p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="3b8d" class="nw la it oj b gy on oo l op oq">my_models&lt;-list()</span><span id="6556" class="nw la it oj b gy pi oo l op oq">for (s in unique(iris$Species)) {<br/>    tmp&lt;-iris[iris$Species==s,]<br/>    my_models[[s]]&lt;-lm(Sepal.Length~Sepal.Width+Petal.Length+Petal.Width, data=tmp)<br/>}</span><span id="69fa" class="nw la it oj b gy pi oo l op oq"># get the 'setosa' model<br/>my_models[['setosa']]</span></pre><p id="c1f6" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="3262" class="nw la it oj b gy on oo l op oq">Call:<br/>lm(formula = Sepal.Length ~ Sepal.Width + Petal.Length + Petal.Width, <br/>    data = tmp)<br/><br/>Coefficients:<br/> (Intercept)   Sepal.Width  Petal.Length   Petal.Width  <br/>      2.3519        0.6548        0.2376        0.2521</span></pre><p id="6666" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated"><strong class="lt iu">使用</strong>T5按名称存储型号</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="2b28" class="nw la it oj b gy on oo l op oq">for (s in unique(iris$Species)) {<br/>    tmp&lt;-iris[iris$Species==s,]<br/>    assign(s,lm(Sepal.Length~Sepal.Width+Petal.Length+Petal.Width, data=tmp))<br/>}</span><span id="5a2c" class="nw la it oj b gy pi oo l op oq"># get the 'setosa' model<br/>get("setosa")</span></pre><p id="0f99" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="e876" class="nw la it oj b gy on oo l op oq">Call:<br/>lm(formula = Sepal.Length ~ Sepal.Width + Petal.Length + Petal.Width, <br/>    data = tmp)<br/><br/>Coefficients:<br/> (Intercept)   Sepal.Width  Petal.Length   Petal.Width  <br/>      2.3519        0.6548        0.2376        0.2521</span></pre><h2 id="3888" class="nw la it bd lb nx ny dn lf nz oa dp lj ma ob oc ll me od oe ln mi of og lp oh bi translated">8.如何将多个参数传递给' sapply '</h2><p id="0d21" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">假设我们要在R中运行一个<code class="fe or os ot oj b">sapply</code>或者<code class="fe or os ot oj b">lapply</code>，函数有多个参数。然后，我们可以定义想要应用<code class="fe or os ot oj b">sapply</code>的参数，并为其余参数分配固定值:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="e98a" class="nw la it oj b gy on oo l op oq"># this is the function like a linear equation<br/># of the form y= a + b * x<br/>my_func&lt;- function(a,b,c) {<br/>  a+b*c<br/>}</span><span id="5987" class="nw la it oj b gy pi oo l op oq"># the values of the x<br/>x = c(1,5,10)</span><span id="f458" class="nw la it oj b gy pi oo l op oq"># we set a=1 and b=2<br/>sapply(x,my_func,a=1, b=2)</span></pre><p id="238f" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="38d9" class="nw la it oj b gy on oo l op oq">[1]  3 11 21</span></pre><h2 id="a9a0" class="nw la it bd lb nx ny dn lf nz oa dp lj ma ob oc ll me od oe ln mi of og lp oh bi translated">9.如何逐行获取最大值的列</h2><p id="64d6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">假设我们的数据帧是:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="c5b3" class="nw la it oj b gy on oo l op oq">set.seed(5)</span><span id="9bec" class="nw la it oj b gy pi oo l op oq">df&lt;-as.data.frame(matrix(sample(1:100,12),ncol=3))<br/>df</span></pre><p id="b089" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="d0c7" class="nw la it oj b gy on oo l op oq">  V1 V2 V3<br/>1 66 41 19<br/>2 57 85  3<br/>3 79 94 38<br/>4 75 71 58</span></pre><p id="bf81" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">我们可以逐行获取max列的索引和名称，如下所示:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="389c" class="nw la it oj b gy on oo l op oq">colnames(df)[max.col(df,ties.method="random")]</span></pre><p id="20bb" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="5d98" class="nw la it oj b gy on oo l op oq">[1] "V1" "V2" "V2" "V1"</span></pre><h2 id="f2c8" class="nw la it bd lb nx ny dn lf nz oa dp lj ma ob oc ll me od oe ln mi of og lp oh bi translated">10.如何生成随机日期</h2><p id="63af" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们可以使用均匀分布从特定范围的Unix时间戳中生成随机日期。例如，让我们生成10个随机日期:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="5221" class="nw la it oj b gy on oo l op oq">library(lubridate)</span><span id="930d" class="nw la it oj b gy pi oo l op oq">lubridate::as_datetime( runif(10, 1546290000, 1577739600))</span></pre><p id="9dc7" class="pw-post-body-paragraph lr ls it lt b lu mu ju lw lx mv jx lz ma mw mc md me mx mg mh mi my mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="07ea" class="nw la it oj b gy on oo l op oq">[1] "2019-12-09 15:45:26 UTC" "2019-08-31 19:28:03 UTC" "2019-01-13 12:15:13 UTC" "2019-11-15 00:13:25 UTC"<br/> [5] "2019-01-19 06:31:10 UTC" "2019-11-02 12:46:34 UTC" "2019-09-04 19:16:31 UTC" "2019-07-29 11:53:43 UTC"<br/> [9] "2019-01-25 23:08:20 UTC" "2019-02-03 02:30:21 UTC"</span></pre><h1 id="ce5a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">想获得更多提示吗？</h1><p id="7bf4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如需更多提示，您可以访问预测黑客的<a class="ae ky" href="https://predictivehacks.com/tips/" rel="noopener ugc nofollow" target="_blank">提示</a></p></div></div>    
</body>
</html>