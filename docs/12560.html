<html>
<head>
<title>How to Create GitHub Actions for Vercel Deployment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为Vercel部署创建GitHub操作</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-github-actions-for-vercel-deployment-aa10d240aab6?source=collection_archive---------17-----------------------#2022-06-13">https://betterprogramming.pub/how-to-create-github-actions-for-vercel-deployment-aa10d240aab6?source=collection_archive---------17-----------------------#2022-06-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2b3a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">更容易、更快速地创建项目</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6f37be511694e7f37454aac48f6226fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rkG8XlC7Ev0V3dAT.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="4579" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Vercel是最好的托管服务之一，因为它的简单性和适应性。它允许您尽可能快地托管您的项目，只需很少或不需要设置。当Vercel与GitHub一起用于项目部署时，事情变得更加有趣。当一个新的更新被推送到GitHub时，这支持自动化的代码部署，简化您的CI/CD工作流程。</p><h1 id="e465" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">什么是GitHub动作？</h1><p id="8dcb" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">GitHub Actions是一个CI/CD平台，用于自动化您的构建、测试和部署工作流。您可以使用工作流构建和测试存储库中的每个拉请求，或者您可以将合并的拉请求部署到生产存储库中。</p><p id="e58a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">GitHub Actions使您所有软件活动的自动化变得简单，它现在包括世界一流的CI/CD，允许您定制代码审查、分支管理和问题分类。</p><h1 id="9524" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">GitHub动作如何与Vercel一起工作</h1><p id="3ab3" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">GitHub动作使用<a class="ae mr" href="https://vercel.com/" rel="noopener ugc nofollow" target="_blank"> Vercel </a>自动部署你的GitHub项目，提供预览部署URL和自动定制域更新。当您在GitHub上创建一个新的Vercel项目，并在每个分支上启用自动部署时，Vercel会观察分支上的每个推送，并在默认情况下进行部署。如果Vercel已经构建了一个先前的提交，那么当前的构建将被取消，以构建最近的提交，这样您就可以一直部署最新的变更。</p><ul class=""><li id="eecb" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">测试选项1:分叉模型</li><li id="6f5d" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">测试选项2:tmate</li></ul><h1 id="5aa2" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">测试GitHub动作的问题是</h1><h2 id="74c8" class="ng lv it bd lw nh ni dn ma nj nk dp me lh nl nm mg ll nn no mi lp np nq mk nr bi translated">GitHub行动在行动</h2><p id="a6a2" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">为了演示如何使用GitHub操作将应用程序部署到Vercel，我创建了一个简单的React项目并将其推送到我的GitHub存储库中。将存储库克隆到您的计算机上，然后继续操作。</p><h2 id="4337" class="ng lv it bd lw nh ni dn ma nj nk dp me lh nl nm mg ll nn no mi lp np nq mk nr bi translated">配置Vercel</h2><p id="b74a" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">要用Vercel设置GitHub动作，您需要一个Vercel <strong class="la iu">项目ID </strong>和<strong class="la iu">组织ID。</strong>为此，运行下面的命令并按照提示进行操作:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="9161" class="ng lv it nt b gy nx ny l nz oa">vercel</span></pre><p id="0206" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面的命令会生成一个<code class="fe ob oc od nt b"><strong class="la iu">.vercel/package.json</strong></code> <strong class="la iu"> </strong>文件，你的<code class="fe ob oc od nt b"><strong class="la iu">projectId</strong></code>和<code class="fe ob oc od nt b"><strong class="la iu">orgId</strong></code> <strong class="la iu"> </strong>就是在这个文件中生成的。</p><p id="81d6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">或许，你可以告诉Vercel，当你把代码推送到GitHub时，不要触发项目部署。这样，GitHub Actions工作流只有在发布、推送到特定分支或工作流上的手动触发时才会被触发。为此，在您的项目根目录中创建一个<code class="fe ob oc od nt b"><strong class="la iu">vercel.json</strong></code>文件，并添加以下配置:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="9c79" class="ng lv it nt b gy nx ny l nz oa">{<br/> "github": {<br/>   "enabled": false,<br/>   "silent": true<br/> }<br/>}</span></pre><p id="5661" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，您需要在Vercel上生成一个<a class="ae mr" href="https://vercel.com/account/tokens" rel="noopener ugc nofollow" target="_blank">令牌</a>，以便能够在GitHub操作上使用CLI。生成令牌后，复制令牌并将其保存在安全的地方。你以后会需要它的。</p><p id="1439" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后把你的项目推送到GitHub。推送完成后，转到GitHub上的项目。在settings选项卡中，点击“<strong class="la iu"> Secrets &gt; Actions </strong>”并将Vercel凭证添加到您的项目中。在<strong class="la iu">动作</strong>页面上，点击<strong class="la iu">创建存储库密码</strong>按钮并添加以下密码。</p><ul class=""><li id="4447" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated"><code class="fe ob oc od nt b"><strong class="la iu">VERCEL_ORG_ID</strong></code>:这是项目根目录下<code class="fe ob oc od nt b"><strong class="la iu">.vercel/package.json</strong></code>文件中的<code class="fe ob oc od nt b"><strong class="la iu">orgId</strong></code>。</li><li id="751e" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated"><code class="fe ob oc od nt b"><strong class="la iu">VERCEL_PROJECT_ID</strong></code>:这是项目根目录下<code class="fe ob oc od nt b"><strong class="la iu">.vercel/package.json</strong></code>文件中的<code class="fe ob oc od nt b"><strong class="la iu">projectId</strong></code>。</li><li id="0e96" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">这是你生成的威瑟尔令牌。</li></ul><p id="9e0b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">创建上述凭证后，我们应该准备好配置工作流了。</p><h1 id="46bd" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">配置GitHub工作流</h1><p id="a744" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">将Vercel您的Vercel凭证添加到您在GitHub上的项目后，继续配置GitHub工作流，以支持持续和连续的部署。为此，在项目根目录中创建一个<code class="fe ob oc od nt b"><strong class="la iu">.github/workflows/deploy.yml</strong></code> <strong class="la iu"> </strong>文件，并添加下面指定的配置:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="9fdf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在提交更改并将您的代码推送到GitHub。一旦代码被推送，GitHub动作将触发自动部署。</p><h1 id="cc8f" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">结论</h1><p id="5caf" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">在本教程中，您已经学习了如何设置GitHub操作来将项目部署到Vercel。您了解了什么是GitHub动作，以及它们如何与Vercel一起工作。现在你已经了解了GitHub和Vercel是如何协同工作的，可以随意浏览一下<a class="ae mr" href="https://github.com/marketplace/actions/deploy-to-vercel-action" rel="noopener ugc nofollow" target="_blank">更多的配置</a>来添加到你的项目中。</p></div></div>    
</body>
</html>