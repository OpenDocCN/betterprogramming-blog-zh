<html>
<head>
<title>NestJS: Authentication With JWT And Postgres</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NestJS:用JWT和Postgres进行认证</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/nestjs-authentication-with-jwt-and-postgres-50de6341f490?source=collection_archive---------0-----------------------#2022-03-07">https://betterprogramming.pub/nestjs-authentication-with-jwt-and-postgres-50de6341f490?source=collection_archive---------0-----------------------#2022-03-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f6ff" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">构建一个使用Postgres、JWT和环境变量进行身份验证的NestJS应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4cae97d68af644800ae847bbb38f14b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JZn_mVY2wIl5bkJFngI82Q.png"/></div></div></figure><p id="689a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有时候，作为初学者，NestJS可能会变得有点让人不知所措。我知道这一点，因为我也曾经在这一点上。我的意思是，为了编写一个带认证的API，我们必须处理很多事情:NestJS本身、TypeORM、数据库、JWT、护照、路径别名、dto、验证、守卫、管道等等。</p><p id="0c60" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是我告诉你，没有看起来那么难！</p><h1 id="6885" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">要求</h1><p id="f1f3" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">需要对Node.js和PostgreSQL有一个基本的了解，它们已经安装在您的机器上。我会选择<a class="ae mn" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>作为我的代码编辑器。你可以用你喜欢的任何东西。</p><h1 id="b664" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">数据库ˌ资料库</h1><p id="8cc5" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">首先，我们需要创建PostgreSQL数据库。我知道，每个人都有不同的处理方式，有些人使用GUI，但我们将使用我们的终端。同样，您需要在您的机器上安装PostgreSQL。如果您安装了PostgreSQL，以下四个命令将在Linux、Mac和Windows机器上运行。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="1f80" class="mt lr it mp b gy mu mv l mw mx">$ psql postgres<br/>$ CREATE DATABASE nest_auth_api;<br/>$ \l<br/>$ \q</span></pre><h2 id="46c9" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated"><strong class="ak">命令解释:</strong></h2><ul class=""><li id="c0cd" class="nj nk it kw b kx mi la mj ld nl lh nm ll nn lp no np nq nr bi translated"><code class="fe ns nt nu mp b">psql postgres</code>使用用户<code class="fe ns nt nu mp b">postgres</code>打开psql CLI</li><li id="fa8e" class="nj nk it kw b kx nv la nw ld nx lh ny ll nz lp no np nq nr bi translated"><code class="fe ns nt nu mp b">CREATE DATABASE nest_auth_api;</code>创建我们需要的数据库</li><li id="2c9d" class="nj nk it kw b kx nv la nw ld nx lh ny ll nz lp no np nq nr bi translated"><code class="fe ns nt nu mp b">\l</code>列出所有数据库</li><li id="cbe2" class="nj nk it kw b kx nv la nw ld nx lh ny ll nz lp no np nq nr bi translated"><code class="fe ns nt nu mp b">\q</code>退出psql CLI</li></ul><p id="ad65" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在我们成功地执行了所有四个命令之后，我的终端看起来应该是这样的。如我们所见，数据库<code class="fe ns nt nu mp b">nest_auth_api</code>被创建。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/d2a5ceedb06e956c568459c8b11f6b4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YA2Fo5B9r7AXe4A2JuxVMg.png"/></div></div></figure><h1 id="e553" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">NestJS应用程序</h1><p id="a293" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">让我们继续讨论NestJS。我们将安装NestJS CLI，因此打开您选择的终端并键入:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="e4bc" class="mt lr it mp b gy mu mv l mw mx">$ npm i -g @nestjs/cli</span></pre><p id="89bd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们用它的CLI初始化一个新的NestJS项目。这可能需要一分钟。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="dede" class="mt lr it mp b gy mu mv l mw mx">$ nest new nest-auth-api -p npm</span></pre><p id="653a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">完成该命令后，您可以在代码编辑器中打开您的项目。由于我使用Visual Studio代码，我将通过键入以下命令打开项目:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="a330" class="mt lr it mp b gy mu mv l mw mx">$ cd nest-auth-api<br/>$ code .</span></pre><p id="4ae9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我的项目在VSCode (Visual Studio代码)中是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/94227ff09501c6ede421a65d956e7305.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9hhq-Hu2tbdIGxRftmeePA.png"/></div></div></figure><p id="910e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下一步是<strong class="kw iu">可选的</strong>，但是通常，我会提交初始初始化，所以我会在终端内部键入:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="58f9" class="mt lr it mp b gy mu mv l mw mx">$ git add .<br/>$ git commit -m "chore(): init nest.js"</span></pre><h2 id="c6f6" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">安装依赖项</h2><p id="2c5f" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">让我们安装一些我们将需要的依赖项。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="4fab" class="mt lr it mp b gy mu mv l mw mx">$ npm i @nestjs/config @nestjs/typeorm <!-- -->@nestjs/jwt<!-- --> <!-- -->@nestjs/passport passport-jwt<!-- --> typeorm pg<!-- --> passport class-transformer class-validator class-sanitizer bcryptjs<br/>$ npm i -D <!-- -->@types/passport-jwt <!-- -->@types/node</span></pre><h2 id="dd26" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">创建项目结构</h2><p id="fe9d" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">为了有一个干净的<strong class="kw iu">项目结构</strong>，我们将创建一些文件夹和文件。对于诸如环境文件或一般帮助文件之类的杂项文件，我通常会创建一个名为common的新文件夹。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="e84c" class="mt lr it mp b gy mu mv l mw mx">$ mkdir src/shared &amp;&amp; mkdir src/shared/typeorm<br/>$ mkdir src/common &amp;&amp; mkdir src/common/envs &amp;&amp; mkdir src/common/helper</span></pre><p id="e1d5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">另外，让我们<strong class="kw iu">创建</strong>一些通用文件。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="3139" class="mt lr it mp b gy mu mv l mw mx">$ touch src/shared/typeorm/typeorm.service.ts<br/>$ touch src/common/envs/development.env<br/>$ touch src/common/helper/env.helper.ts</span></pre><p id="a3f9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，我们还需要创建我们的<strong class="kw iu">模块</strong>。为了简单起见，我们只使用<strong class="kw iu">用户</strong>和<strong class="kw iu">认证</strong>模块。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="3a77" class="mt lr it mp b gy mu mv l mw mx"><em class="oc">$ nest g mo api<br/>$ nest g mo api/user &amp;&amp; nest g co api/user </em>--no-spec <em class="oc">&amp;&amp; nest g s api/user </em>--no-spec<em class="oc"><br/>$ nest g mo api/user/auth &amp;&amp; nest g co api/user/auth </em>--no-spec <em class="oc">&amp;&amp; nest g s api/user/auth </em>--no-spec<br/>$ touch src/api/user/user.dto.ts<br/>$ touch src/api/user/user.entity.ts<br/>$ touch src/api/<em class="oc">user/</em>auth/auth.dto.ts<br/>$ touch src/api/<em class="oc">user/</em>auth/auth.guard.ts<br/>$ touch src/api/<em class="oc">user/</em>auth/auth.helper.ts<br/>$ touch src/api/<em class="oc">user/</em>auth/auth.strategy.ts</span></pre><p id="ee56" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们的项目树现在应该是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/e0e7b7204402e9ac651a08ebe5ce9cae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*atyMPxNp8_MsavANLoZ27g.png"/></div></div></figure><p id="2c54" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以看到，我们有很多事情要做。</p><h2 id="d19e" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">环境变量</h2><p id="8901" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">为了在我们构建应用程序时将环境文件放在我们的<code class="fe ns nt nu mp b">dist/</code>文件夹中，我们需要向我们的<code class="fe ns nt nu mp b">nest-cli.json</code>添加一个编译器规则来映射我们的环境文件。</p><p id="9ac3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以请把<code class="fe ns nt nu mp b">nest-cli.json</code>从</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">nest-cli.json</p></figure><p id="8f2d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">到</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">nest-cli.json</p></figure><p id="2926" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在让我们修改我们的<code class="fe ns nt nu mp b">src/common/helper/env.helper.ts</code>文件，以便在稍后导入我们的ConfigModule时加载我们的环境文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/common/helper/env . helper . ts</p></figure><p id="85ba" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个函数根据我们的<code class="fe ns nt nu mp b">NODE_ENV</code>返回环境文件的绝对路径。它基本上有两个回落。首先，如果没有设置<code class="fe ns nt nu mp b">NODE_ENV</code>，我们尝试获取<code class="fe ns nt nu mp b">development.env</code>文件的绝对路径。让我们继续给我们的环境文件添加一些生命。</p><blockquote class="ok ol om"><p id="b6b8" class="ku kv oc kw b kx ky ju kz la lb jx lc on le lf lg oo li lj lk op lm ln lo lp im bi translated"><strong class="kw iu"> <em class="it">你可以看到每个代码片段下面的文件路径。</em>T15】</strong></p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/common/envs/development . env</p></figure><h2 id="a662" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">别名路径</h2><p id="894f" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">为了获得干净的文件路径，我们将修改根目录中的tsconfig.json。如果你不知道什么是别名路径，请阅读我关于<a class="ae mn" href="https://javascript.plainenglish.io/a-simple-way-to-use-path-aliases-in-nestjs-ab0db1be1545" rel="noopener ugc nofollow" target="_blank">在NestJS </a>中使用路径别名的简单方法的文章。</p><p id="392b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">简而言之:</strong>它将文件路径从类似<code class="fe ns nt nu mp b">../../../folder/file.ts</code>的东西导入到<code class="fe ns nt nu mp b">@/folder/file.ts</code>中。</p><p id="bf77" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，让我们将<code class="fe ns nt nu mp b">tsconfig.json</code>从:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">tsconfig.json</p></figure><p id="71cf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">到</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">tsconfig.json</p></figure><h2 id="f922" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">配置并连接到数据库(Postgres)</h2><p id="b841" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">我们需要将我们的NestJS应用程序连接到我们之前创建的Postgres数据库。记住，我们创建了一个数据库和一个环境文件，我们在其中存储敏感的数据库信息。因此，我们必须分两步将所有这些整合在一起。</p><ol class=""><li id="c07d" class="nj nk it kw b kx ky la lb ld oq lh or ll os lp ot np nq nr bi translated">我们创建了一个TypeORM配置服务。</li><li id="ced8" class="nj nk it kw b kx nv la nw ld nx lh ny ll nz lp ot np nq nr bi translated">我们在主模块中加载这个服务和ConfigModule。</li></ol><p id="6bb3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们给我们的<code class="fe ns nt nu mp b">src/shared/typeorm/typeorm.service.ts</code>文件添加一些内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/shared/type ORM/type ORM . service . ts</p></figure><p id="0e05" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，我们需要将<code class="fe ns nt nu mp b">src/app.module.ts</code>从:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/app.module.ts</p></figure><p id="94a3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">到</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/app.module.ts</p></figure><p id="4ad1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">太好了！现在，让我们向main.ts文件添加一些额外的配置，让我们将它从:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="84c3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">到</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="e5ad" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们在这里做的最重要的事情是第12行。我们添加了一个全局验证<a class="ae mn" href="https://docs.nestjs.com/pipes" rel="noopener ugc nofollow" target="_blank">管道</a>，以便<a class="ae mn" href="https://docs.nestjs.com/techniques/validation" rel="noopener ugc nofollow" target="_blank">稍后验证</a>请求体。</p><p id="409c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，我们已经做了很多事情。我们创建了环境文件、一个连接到数据库的服务和许多其他配置，为我们的NestJS应用程序做好准备。</p><p id="07a5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">无论如何，是时候通过运行以下命令来测试我们的代码了:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="de14" class="mt lr it mp b gy mu mv l mw mx">$ npm run start:dev</span></pre><p id="8c97" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们终端的输出应该是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/2fa96e6990446b20e2c5628b0088ea80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IaYS6KvXNm87vTJa2Nc-tQ.png"/></div></div></figure><p id="b1c0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你遇到错误，请在评论中告诉我。如果一切正常，你可以通过按CTRL+C来停止这个应用程序。</p><h2 id="4a7e" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">用户实体</h2><p id="d144" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">在我们开始验证模块之前，我们需要添加我们的用户实体，因为验证模块依赖于此。</p><p id="5814" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们给我们的<code class="fe ns nt nu mp b">src/api/user/user.entity.ts</code>文件添加一些内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/api/user/user.entity.ts</p></figure><p id="de79" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">由于我们在TypeORM服务中启用了同步，TypeORM将自动基于这个实体创建一个表。</p><p id="b90e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">什么是</strong> <code class="fe ns nt nu mp b">@Exclude()</code> <strong class="kw iu">？</strong></p><p id="c8d8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可能在第12行见过这个装修工。这基本上意味着，我们将从响应数据中删除该属性(密码)。你可以在这里阅读更多关于这个<a class="ae mn" href="https://docs.nestjs.com/techniques/serialization#exclude-properties" rel="noopener ugc nofollow" target="_blank">的内容</a>。</p><h1 id="6672" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">证明</h1><p id="b6f8" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">这是我们最重要的模块，这里统计了魔法。</p><h2 id="1b0c" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">AuthHelper类</h2><p id="f78f" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">这个类非常重要，因为我们在这里有一些加密和验证助手。查看方法上方的注释，了解每个方法的作用。</p><p id="27bf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们给<code class="fe ns nt nu mp b">src/api/user/auth/auth.helper.ts</code>添加一些代码</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/API/user/auth/auth . helper . ts</p></figure><h2 id="ee0f" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">防护装置</h2><p id="4170" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">每当我们需要在敏感端点上进行身份验证时，也会调用这个类。</p><p id="5a2d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们给<code class="fe ns nt nu mp b">src/api/user/auth/auth.guard.ts</code>添加一些代码</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/API/user/auth/auth . guard . ts</p></figure><h2 id="b262" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">JWT战略</h2><p id="b04b" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">现在我们可以处理最后一个需求了:通过要求请求中存在有效的JWT来保护端点。护照在这里也能帮到我们。它为以后保护我们的端点提供了passport-jwt策略。</p><p id="5b34" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们给<code class="fe ns nt nu mp b">src/api/user/auth/auth.strategy.ts</code>添加一些代码</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/API/用户/验证/验证策略. ts</p></figure><p id="ea52" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，我们已经完成了JWT战略的实施。让我们继续我们的端点实现。</p><h2 id="4eb0" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">授权服务</h2><p id="ab12" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">如果你熟悉NestJS，你就知道这是怎么回事了。这是我们端点的业务逻辑。这里的方法是从我们的控制器调用的。</p><blockquote class="ok ol om"><p id="6419" class="ku kv oc kw b kx ky ju kz la lb jx lc on le lf lg oo li lj lk op lm ln lo lp im bi translated"><strong class="kw iu"> <em class="it">注意:</em> </strong> <em class="it">如果这个应用程序正在运行，这个修改将会破坏您的构建，因为我们将要注入一个我们还没有导入的库。为了避免混乱，你最好通过CTRL+C杀死我们终端中的进程</em></p></blockquote><p id="92d2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们把<code class="fe ns nt nu mp b">src/api/user/auth/auth.service.ts</code>从:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/API/user/auth/auth . service . ts</p></figure><p id="d48e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">到</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/API/user/auth/auth . service . ts</p></figure><h2 id="7bcc" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">确认</h2><p id="ac93" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">请记住，在本教程的前面，我们在main.ts文件中添加了一个用于验证的全局管道。这种配置结合数据传输对象将有助于我们验证和转换传入HTTP请求的主体。</p><p id="8f41" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们给<code class="fe ns nt nu mp b">src/api/user/auth/auth.dto.ts</code>添加一些代码</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/api/user/auth/auth.dto.ts</p></figure><h2 id="25f9" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">授权控制器</h2><p id="40f5" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">我们几乎完成了认证模块，只剩下两个步骤。</p><p id="bc16" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，我们需要添加端点来注册、登录和刷新我们的JWT令牌。请记住，我们在这里保持简单，我们也可以破坏这些端点，但为了简单起见，我们不这样做，因为我向您介绍了基础知识。</p><p id="7493" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们将文件<code class="fe ns nt nu mp b">src/api/user/auth/auth.controller.ts</code>从:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/API/用户/验证/验证控制器. ts</p></figure><p id="20e9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">到</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/API/用户/验证/验证控制器. ts</p></figure><h2 id="81cf" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">授权模块</h2><p id="ce85" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">最后但同样重要的是，我们需要导入我们刚刚编码的所有模块、提供者和控制器。</p><p id="cdb1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们需要改变我们的<code class="fe ns nt nu mp b">src/api/user/auth/auth.module.ts</code>,从:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/API/用户/验证/验证模块. ts</p></figure><p id="20fd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">到</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/API/用户/验证/验证模块. ts</p></figure><h1 id="6fc3" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">用户</h1><p id="fbbc" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">现在我们几乎完成了这个项目。我们只需要为演示添加一些糖，考虑这一步是可选的，因为实际上，我们的NestJS认证API已经工作了，无论如何，让我们很快完成它。我们在这里要做的就是创建一个端点来修改用户名。</p><p id="2f3d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请记住，我们已经在本教程前面添加了用户实体。</p><h2 id="38eb" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">确认</h2><p id="ed9d" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">我们需要对端点进行一些简单的验证，所以让我们给<code class="fe ns nt nu mp b">src/api/user/user.dto.ts</code>添加一些代码</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/api/user/user.dto.ts</p></figure><h2 id="abdb" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">服务</h2><p id="d4a8" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">我们将创建一个小方法，让我们改变用户名。很简单。</p><blockquote class="ok ol om"><p id="70eb" class="ku kv oc kw b kx ky ju kz la lb jx lc on le lf lg oo li lj lk op lm ln lo lp im bi translated"><strong class="kw iu"> <em class="it">注意:</em> </strong> <em class="it">如果这个应用程序正在运行，这个修改将会破坏您的构建，因为我们将要注入一个我们还没有导入的存储库。为了避免混乱，你最好通过CTRL+C杀死我们终端中的进程</em></p></blockquote><p id="3192" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们把文件<code class="fe ns nt nu mp b">src/api/user/user.service.ts</code>从:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/api/user/user.service.ts</p></figure><p id="2b2c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">到</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/api/user/user.service.ts</p></figure><h2 id="be02" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">控制器</h2><p id="eae2" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">在这里，我们将创建我们的端点。我们将再次放置JwtAuthGuard，这意味着只有具有有效JWT令牌的请求才能成功。</p><p id="4e22" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，让我们将文件<code class="fe ns nt nu mp b">src/api/user/user.controller.ts</code>从:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/API/user/user . controller . ts</p></figure><p id="c3b7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">到</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/API/user/user . controller . ts</p></figure><h2 id="0a7c" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">组件</h2><p id="8eb8" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">欢迎来到本教程中非常简单的最后一步，我们需要做的就是导入用户实体。</p><p id="9f0a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们将文件<code class="fe ns nt nu mp b">src/api/user/user.module.ts</code>从:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/API/用户/用户.模块. ts</p></figure><p id="ab17" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">到</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div><p class="og oh gj gh gi oi oj bd b be z dk translated">src/API/用户/用户.模块. ts</p></figure></div><div class="ab cl ov ow hx ox" role="separator"><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa"/></div><div class="im in io ip iq"><p id="e856" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">哇，多棒的旅程啊！信不信由你，我们终于完成了我们的项目。现在，让我们执行以下命令来运行我们的应用程序:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="c67a" class="mt lr it mp b gy mu mv l mw mx">$ npm run start:dev</span></pre><p id="d495" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您的终端应该给出以下响应:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/0176c1eceee0e09cccc67560fce11148.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ogwZ1geID0nBgrL2bumdVA.png"/></div></div></figure></div><div class="ab cl ov ow hx ox" role="separator"><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa"/></div><div class="im in io ip iq"><h1 id="8418" class="lq lr it bd ls lt pc lv lw lx pd lz ma jz pe ka mc kc pf kd me kf pg kg mg mh bi translated">测试我们的端点</h1><p id="d932" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">现在让我们测试我们的端点。你可以使用软件如<a class="ae mn" href="https://www.postman.com/" rel="noopener ugc nofollow" target="_blank">邮差</a>或简单地通过<a class="ae mn" href="https://curl.se/" rel="noopener ugc nofollow" target="_blank">卷曲</a>命令在你的终端。</p><h2 id="d711" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated"><strong class="ak">注册</strong></h2><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="895e" class="mt lr it mp b gy mu mv l mw mx">$ curl -X POST <a class="ae mn" href="http://localhost:3000/auth/register" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/auth/register</a> -H "Content-Type: application/json" -d '{"name": "Elon Musk", "email": "elon@gmail.com", "password": "12345678"}'</span><span id="db8f" class="mt lr it mp b gy ph mv l mw mx"><strong class="mp iu">Server Response:<br/></strong>{"name": "Elon Musk", "email": "<a class="ae mn" href="mailto:elonn@gmail.com" rel="noopener ugc nofollow" target="_blank">elonn@gmail.com</a>", "lastLoginAt": null, "id": 1}</span></pre><p id="abf1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您再次运行此命令，您将遇到409(冲突)错误，因为使用此电子邮件的用户已经存在。</p><p id="eb89" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您选择少于8个字符的密码，您将运行400(错误请求)错误，因为我们要求密码的最小长度为8个字符。</p><h2 id="9f1d" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">注册</h2><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="d805" class="mt lr it mp b gy mu mv l mw mx">$ curl -X POST <a class="ae mn" href="http://localhost:3000/auth/login" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/auth/login</a> -H "Content-Type: application/json" -d '{"email": "elon@gmail.com", "password": "12345678"}'</span><span id="0dcf" class="mt lr it mp b gy ph mv l mw mx"><strong class="mp iu">Server Response:<br/></strong>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NSwiZW1haWwiOiJlbG9uQGdtYWlsLmNvbSIsImlhdCI6MTY0NjU5NzY2NiwiZXhwIjoxNjc4MTMzNjY2fQ.fBG9QJKOUIvrB1iaDDs-2gJKH_qephHNRtJyiKG-aVk</span></pre><p id="1cb0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您选择了错误的电子邮件或密码，您将遇到404(未找到)错误，每当电子邮件或密码是错误的，我们将抛出。</p><h2 id="e4f6" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">刷新(仅针对登录用户)</h2><p id="dcc0" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">请记住，您可能需要替换不记名令牌:<em class="oc"> ezJhbGci0i… </em></p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="c5cf" class="mt lr it mp b gy mu mv l mw mx">$ curl -X POST http://localhost:3000/auth/refresh -H "Content-Type: application/json" -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NSwiZW1haWwiOiJlbG9uQGdtYWlsLmNvbSIsImlhdCI6MTY0NjU5NzY2NiwiZXhwIjoxNjc4MTMzNjY2fQ.fBG9QJKOUIvrB1iaDDs-2gJKH_qephHNRtJyiKG-aVk"</span><span id="3a32" class="mt lr it mp b gy ph mv l mw mx"><strong class="mp iu">Server Response:<br/></strong>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NSwiZW1haWwiOiJlbG9uQGdtYWlsLmNvbSIsImlhdCI6MTY0NjU5NzkyOSwiZXhwIjoxNjc4MTMzOTI5fQ.B8hCJmzoiLKSlZLVDIllLjYm5z7N9soDHSdRg_Iax2s</span></pre><p id="31e7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果JWT令牌无效或未定义，此端点将抛出403(禁止)错误。</p><h2 id="0126" class="mt lr it bd ls my mz dn lw na nb dp ma ld nc nd mc lh ne nf me ll ng nh mg ni bi translated">更改用户名</h2><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="a1be" class="mt lr it mp b gy mu mv l mw mx">$ curl -X PUT <a class="ae mn" href="http://localhost:3000/user/name" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/user/name</a> -H "Content-Type: application/json" -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NSwiZW1haWwiOiJlbG9uQGdtYWlsLmNvbSIsImlhdCI6MTY0NjU5NzkyOSwiZXhwIjoxNjc4MTMzOTI5fQ.B8hCJmzoiLKSlZLVDIllLjYm5z7N9soDHSdRg_Iax2s" -d '{"name": "Super Elon"}'</span><span id="1975" class="mt lr it mp b gy ph mv l mw mx"><strong class="mp iu">Server Response:<br/></strong>{"id": 1, "email": "<a class="ae mn" href="mailto:elon@gmail.com" rel="noopener ugc nofollow" target="_blank">elon@gmail.com</a>", "name": "Super Elon", "lastLoginAt": "2022-03-06T20:18:49.356Z"}</span></pre><p id="dfbb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如您所见，我们已经更改了用户名。</p><p id="7b05" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">终于，我们完成了！我已经把项目上传到了<a class="ae mn" href="https://github.com/hellokvn/nestjs-auth-api-medium" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上。看看这个。</p><p id="8b7e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">感谢您阅读我关于如何在NestJS中使用JWT认证的文章。我希望，你能学到新的东西。</p><p id="2047" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">干杯！</p></div><div class="ab cl ov ow hx ox" role="separator"><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa"/></div><div class="im in io ip iq"><p id="c1a1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我希望你喜欢读这篇文章。如果你愿意支持我成为一名作家，可以考虑注册<a class="ae mn" href="https://medium.com/@hellokevinvogel/membership" rel="noopener">成为</a>中的一员。每月只需5美元，你就可以无限制地使用Medium。</p><p id="4cc3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">想支持我？给我买杯咖啡。</p></div></div>    
</body>
</html>