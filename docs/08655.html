<html>
<head>
<title>How I Prevented a $3 Million Loss by Defining a Code Review Process</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何通过定义代码审查过程来避免300万美元的损失</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-i-prevented-a-3-million-dollars-loss-doing-code-review-a732b18453ec?source=collection_archive---------5-----------------------#2021-05-26">https://betterprogramming.pub/how-i-prevented-a-3-million-dollars-loss-doing-code-review-a732b18453ec?source=collection_archive---------5-----------------------#2021-05-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3737" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在管理和合并冲突之间，代码审查为我的客户节省了一笔财富</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/75211695ed1754a1188351a13c0c7e18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lbMvL9pAAV24P02HjJH-_Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">2017年冬季，纽约市曼哈顿。暴风雪中被雪覆盖的街道。</p></figure><p id="11a0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">年份是2017年；那天纽约的气温大约是零下10摄氏度(华氏14度)。这是我从我住的公寓房间里看到的景色。</p><p id="e481" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我会带着帮助发布新的电子商务平台的使命到来——并通过修复关键错误和小的集成来支持旧版本，从而实现平稳过渡。所有这一切都发生在另一个团队设计并构建第三个全新的、最先进的同一电子商务平台版本的时候。</p><p id="ec42" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">尽管那个寒冷的下雪天很模糊，但我心爱的客户端进程却很模糊。这是有问题的，因为我了解到我工作的另一部分是整合来自不同公司和时区的承包商团队与当前的全职员工。而且，我需要帮助提出提高生产率和减少生产问题的流程。</p><p id="5805" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我不知道在那段旅程中等待我的是什么样的危险和陷阱，但我已经准备好迎接挑战。以下是我从具体事件中学到的一些经验，这些经验一直延续到今天。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="65ac" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">寻求理解你的优先事项是什么</h1><p id="4859" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">技术领导层最近进行了重组，任命了一位新的UI开发总监，他是一位经验丰富的专业人士，愿意将前沿技术带入公司。不仅如此，他也不会把项目交给一个独特的供应商公司。所以，我到了那里，见到了全职工程师，以及一些来自不同供应商的开发人员和个人，包括正在开发新版电子商务的工程师团队。那是一个充满敌意的环境，但我遇到了最优秀的开发人员，并能在如此短的时间内学到很多东西。</p><p id="4f7d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">他们设计的电子商务平台的新堆栈是一个梦想。在花了几年时间在使用Backbone和牵线木偶的项目上工作之后，我第一次使用React和Redux。因为我们在这里处理多个版本，所以让我们称这个全新的堆栈为<strong class="la iu"> T3 </strong>。事实是，我等了一段时间才能够在T3上工作，因为我之前有另一个任务。</p><p id="da2d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我不得不亲自动手，处理阻碍版本发布的交付工作。这个新版本将取代老网站。打住，我澄清一下:姑且称网络版<strong class="la iu">T1</strong>；这是2017年你能想象到的最过时的电子商务平台。我们说的是无响应、移动永不、可访问性？这是谁？设计和可用性令人难以置信地过时了。这就是为什么<strong class="la iu"> T2 </strong>被开发出来，一个具有现代设计和更好可用性的电子商务版本。帮助发布它将是我的第一个挑战。</p><p id="81fa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">T2的设计更好，但也有缺陷。背后的公司交付时间太长，解决方案不可扩展，投入了数千美元，销售损失更大。实现下拉菜单等简单样式功能的最后期限长达三个月。我们三天就完成了。尽管我们发现了糟糕的代码质量——没有可重用性，大量旧的未使用的文件和代码片段，以及有相当多问题的复杂架构，比如性能等等——我们还是参与了。</p><p id="e18b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我们开始以如此快的速度交付时，领导层信任我们的团队，我们承担了更多的责任。我们主动开始创建文档，组织任务来解决技术债务，开发流程，并在来自客户和供应商的开发人员之间建立协同作用。</p><p id="f516" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我提到过T2过去是用SVN维护的吗？嗯，从来没有人答应给我一个玫瑰园。没有抱怨。我知道这是首要任务，对我的客户很有价值，甚至可能是塞翁失马焉知非福。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="d438" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">仔细遵循团队定义的流程</h1><p id="722f" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">由合并引起的冲突问题经常发生，因此，多个特性和修复被覆盖。因此，我们决定创建一个代码审查过程，并尝试以后在更大的团队中实现它。毕竟，我们的工作受到了其他人行动的影响。</p><p id="b181" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">理想情况下，我的团队会在每天结束时合并我们的变更，这样印度的团队在开始工作时就可以得到一个新版本。同样，他们应该在离开之前更新，这样我们就可以在早上拿到新版本。</p><p id="cf94" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它根本不起作用。不幸的是，同样的问题正在发生。我们会经常看到，我们前一天所做的更改，在合并过程中被另一个团队的工作抹去了。</p><p id="7686" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们当时为所有团队提出了代码审查过程。我们想要简单的东西——尽可能不复杂。分支不在讨论范围内。我们开始使用补丁文件来审查代码。通过这种方式，我们可以确切地知道将要出现什么，这样我们就可以测试它并提出更好的解决方案来提高质量。</p><p id="a143" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">出乎所有人意料的是，并没有奏效。有时这个过程没有被遵循，而其他时候，我们会被肮脏的补丁文件弄得不堪重负。我们开始花费太多的精力；它根本不起作用。我们没有时间处理所有的合并，也没有时间一次又一次地培训海外团队。原来新导演不是开玩笑的。由于海外团队的困难，也因为这对我们的生产力有巨大的影响，离岸公司被淘汰了。那天，办公室里挤满了来自同一家公司的人，气氛很紧张。</p><p id="7ebe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">问题不在于过程；这对我们的内部团队很有效。我们会把它放在适当的位置，并确保每个人的代码都得到审查。不出所料，离岸公司留下的空缺很快被其他厂商的开发人员填补了，我们赶紧把消息传递给他们。我们得到了一个冷淡但积极的理解确认。</p><p id="4214" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有了代码审查过程来帮助我们避免冲突和保证质量，我们就专注于下一个交付挑战。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="2c6c" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">了解流程背后的价值</h1><p id="f0d9" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">他们说暴风雨过后是平静——嗯，这次不是。由于最近丢失工作和冲突管理的黑暗日子，我养成了每天检查我们的存储库日志的习惯。</p><p id="bd2e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在其中一次观察中，我看到了一些我不认识的行为。我与团队一起检查，以确保它通过了代码审查。事实并非如此，正如开发者所说的“它们太简单了”</p><p id="09e2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">尽管小小的代码更改可能很简单，但我们仍然需要遵循这个过程。代码审查的过程保证了质量，但不仅如此，它还是一个知识共享的工具，提供了更大画面的可见性，以及许多分散团队处理代码库不同区域的能力的机会。</p><p id="97e9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我第一次试图发送的信息发生了一些问题，所以我决定进行一次正式的培训，以介绍这一过程，并寻求反馈和建议。这是一个巨大的成功:团队出现了，代码审查的好处被强调了，每个人似乎都喜欢它。没有人投诉。我带着成就感离开了会议室。</p><p id="43e7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">另一天，另一个问题。大约在第二天结束时，当我们更新代码库时，我们惊讶于一个不完整的构建。另一组未经审查的提交。</p><p id="5574" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在调查这个问题时，我发现提交的代码使用了ES6的特性，而我们的构建结构没有准备好优化这种代码。我们没有Babel或任何代码编译器，在那个时候实现它是不可行的。</p><p id="5520" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我联系了营销团队，以获得收入和浏览器使用情况的报告。分析50个最常用的浏览器(这意味着在过去30天内超过1000万次的独立访问)，我可以过滤不支持ES6的浏览器，并计算它们产生的收入。我得到了一个参考，如果const和let等ES6功能投入生产，该公司一个月内可能会损失的价值。280万美元摆在桌面上——我甚至没有考虑移动收入——这只是桌面收入。对我来说这似乎是件大事。</p><p id="24f2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我给我的领导发了一封邮件，给他们看了这些数字。我请求支持对所有项目和所有开发人员(从全职员工到供应商)进行代码评审，作为一个过程。反应是积极的——随着计划价值的明确和领导的支持，每个人都在遵循流程。不再有代码碎片，更高的生产率，对团队更好的可见性，更少的冲突，和更多的快乐时光。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="56c0" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">结论</h1><p id="97a6" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">了解你的优先事项，理解什么对你的客户是有价值的，这对于增加获得领导支持的几率是至关重要的。此外，您还创造了更多的机会来找出差距并提出解决方案，从而为您的公司带来积极的结果，例如增加客户的人数。</p><p id="29c2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在损坏的代码投入生产之前，将有很多机会来识别问题并修复它。但是我不能失去展示一个过程的价值的机会，在过去，当许多错误没有被识别时，这个过程可以避免金钱损失。</p><p id="42cb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">遵循该流程可以为您和团队带来很多好处。如果你觉得它没有成效——重新评估它，组织一个小组会议来讨论它，并提出改进建议。不遵循流程不会让事情变得更好。仅仅因为不喜欢，或者不理解某件事，而制造不必要的冲突，是不值得的。</p><p id="d003" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">许多事件激发了对新过程的坚持，但是所有事件中的一个共同要素是，当团队能够理解变更背后的价值时，他们更好地接受了变更。显示价值。</p><p id="4b40" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">实施过程可能是一项艰巨的工作，但它是值得的。冬天只是一个季节；夏天总会到来。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7f87ab147f82717c299a062283bb586c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Yq-ajC2pmxsPy-Lyefeyw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">2017年夏天，纽约市曼哈顿。和上面的照片是同一个地方，但是现在人们享受着阳光灿烂的日子。</p></figure></div></div>    
</body>
</html>