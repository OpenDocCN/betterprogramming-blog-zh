<html>
<head>
<title>JavaScript Proposal: Optional Chaining</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript建议:可选链接</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/quick-glance-js-optional-chaining-2a6d301dac?source=collection_archive---------7-----------------------#2019-07-01">https://betterprogramming.pub/quick-glance-js-optional-chaining-2a6d301dac?source=collection_archive---------7-----------------------#2019-07-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="662f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我最感兴趣的TC39提案</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/6c3b8045a6bbd3259ef620762d8251b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*pZSnMSlCly3N-NrecbA2nA.png"/></div></figure><p id="f4b9" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">让我们检查一下我最感兴趣的TC39提案之一。</p><p id="bc7b" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">可选链接并不是最耀眼的新提议，但它代表了Javascript开发人员生活质量的显著提高。有多少次你不得不搜索传入对象的树状结构，以检查是否存在任何中间节点？</p><p id="1bf3" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">例如:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="7e9a" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">现在，这显然是一个有点复杂的例子——没有理由不进行这些单独的输入。但是获得一组值，并在对它们执行操作之前频繁地测试每个链接的属性是否存在是很常见的。</p><p id="f1bc" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如果你不小心的话，这在选择器和归约器中经常发生。如果你不做这种检查，传递的变量是未定义的，我们会得到一个非常经典的错误:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lp"><img src="../Images/3dc903aee6d31d4c4b7a62c6419198f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K4xF5r9a1zytA0DbdldvXA.png"/></div></div></figure><p id="2269" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在Javascript社区中，最标准的解决方案是使用一个util库，比如拉姆达的<a class="ae lm" href="https://ramdajs.com/docs/#path" rel="noopener ugc nofollow" target="_blank"> path </a>或洛达什的<a class="ae lm" href="https://lodash.com/docs/4.17.11#get" rel="noopener ugc nofollow" target="_blank"> get </a>。这些工作很好，对于一些深层嵌套，我认为它们仍然有可能被使用。但是我一直想有一种本地的方式来处理可选链接，因为一个同事用Ruby为我演示了它。如果你感兴趣的话，这里有一个快速的纲要。</p><p id="17f4" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">嗯，<a class="ae lm" href="https://github.com/tc39/proposal-optional-chaining" rel="noopener ugc nofollow" target="_blank">可选链接</a>已经进入TC39提案的第二阶段。如果您对阅读这些提议不感兴趣，第2阶段表明TC39委员会希望开发该特性并最终将其包含在语言标准中。那会是什么样子呢？让我们举个例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="ac78" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">当然，从那里开始，这些必须被每个浏览器采用，每个浏览器都需要满足规范，然后我们仍然必须照顾遗留的浏览器，等等。但是，<a class="ae lm" href="https://babeljs.io/docs/en/" rel="noopener ugc nofollow" target="_blank">通天塔</a>来救援了！将来我会写更多关于babel的文章，但是我们现在可以用它来添加未来的语言特性，这样开发者就可以使用它，让Babel在运行时将它编译成遗留兼容代码。</p><h1 id="af2c" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">我今天如何使用它？</h1><p id="8a37" class="pw-post-body-paragraph kq kr it ks b kt mm ju kv kw mn jx ky kz mo lb lc ld mp lf lg lh mq lj lk ll im bi translated">让我们快速设置一个小的项目演示来进行测试。首先，我们将创建一个工作目录并创建一个包文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="071c" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">初始化软件包后，使用默认值填写详细信息。现在，让我们安装babel，及其CLI，以及我们需要编译可选链接的新babel插件。你可以在这里阅读更多的细节。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="92b2" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">很好，现在让我们将下面的代码示例放入项目目录中一个名为index.js的新文件中。</p><p id="71af" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><strong class="ks iu"> index.js </strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="3959" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">项目现在已经设置好了，我们可以试着在我们的代码上运行babel和插件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="1333" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">你会看到编译好的代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="e4c3" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">所以babel把我们的代码编译成了类似于我们之前的条件检查。如您所见，新的可选链接只是这种样式之上的一个语法糖🍭。</p><p id="c9b9" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">要将它添加到Webpack项目中，我们可以像上面那样添加babel插件，在我们的`. babelrc中，我们添加</p><p id="bd97" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><strong class="ks iu">。babelrc </strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ln lo l"/></div></figure><h1 id="a169" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">结束语</h1><p id="3d3b" class="pw-post-body-paragraph kq kr it ks b kt mm ju kv kw mn jx ky kz mo lb lc ld mp lf lg lh mq lj lk ll im bi translated">就是这样！语法非常类似于CoffeeScript <a class="ae lm" href="https://coffeescript.org/#existential-operator" rel="noopener ugc nofollow" target="_blank">存在运算符</a>(再见了，最后一批到达这里的人)。我从未使用过CoffeeScript，但这是Javascript中缺少的一个特性，我知道很多人对此感兴趣。注意，它不包括可选的属性赋值。</p><p id="b694" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">今天这里使用的所有代码<a class="ae lm" href="https://github.com/DennyScott/optional-chaining-example" rel="noopener ugc nofollow" target="_blank">都可以在Github </a>上获得。干杯！</p><h2 id="0f62" class="mr lv it bd lw ms mt dn ma mu mv dp me kz mw mx mg ld my mz mi lh na nb mk nc bi translated">参考资料和进一步阅读</h2><p id="4ccb" class="pw-post-body-paragraph kq kr it ks b kt mm ju kv kw mn jx ky kz mo lb lc ld mp lf lg lh mq lj lk ll im bi translated"><a class="ae lm" href="https://github.com/tc39/proposals" rel="noopener ugc nofollow" target="_blank">https://github.com/tc39/proposals</a></p><p id="dc26" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><a class="ae lm" href="https://github.com/tc39/proposal-optional-chaining" rel="noopener ugc nofollow" target="_blank">https://github.com/tc39/proposal-optional-chaining</a></p><p id="6074" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><a class="ae lm" href="https://babeljs.io/docs/en/babel-plugin-proposal-optional-chaining" rel="noopener ugc nofollow" target="_blank">https://babel js . io/docs/en/babel-plugin-proposal-optional-chaining</a></p><p id="1dce" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><a class="ae lm" href="https://coffeescript.org/#existential-operator" rel="noopener ugc nofollow" target="_blank">https://coffeescript.org/#existential-operator</a></p><p id="5162" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><a class="ae lm" href="https://ramdajs.com/docs/#path" rel="noopener ugc nofollow" target="_blank">https://ramdajs.com/docs/#path</a></p><p id="36b1" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><a class="ae lm" href="https://lodash.com/docs/4.17.11#get" rel="noopener ugc nofollow" target="_blank">https://lodash.com/docs/4.17.11#get</a></p><p id="d8c3" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><a class="ae lm" href="https://babeljs.io/docs/en/" rel="noopener ugc nofollow" target="_blank">https://babeljs.io/docs/en/</a></p></div></div>    
</body>
</html>