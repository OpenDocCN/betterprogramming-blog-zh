<html>
<head>
<title>What’s New at AWS for 2022 — Introduction to Readable Standby Instances in RDS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS 2022年的新功能RDS中的可读备用实例介绍</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/aws-big-announcement-just-before-2022-introduction-of-rds-readable-standby-instances-in-multi-az-7657ed96e48c?source=collection_archive---------2-----------------------#2022-01-02">https://betterprogramming.pub/aws-big-announcement-just-before-2022-introduction-of-rds-readable-standby-instances-in-multi-az-7657ed96e48c?source=collection_archive---------2-----------------------#2022-01-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="414a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">就在2021年圣诞节的节日气氛之前，AWS宣布了亚马逊RDS多AZ部署中的可读备用实例</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6416b22b93da403e1ef84a6c3c8657b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yGSSQsb5eOneaX_D"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@i_am_simoesse?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">新美乐股份公司·塞尔吉</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="9fda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Amazon RDS现在在preview中提供了带有可读备用实例的多AZ部署(也称为<a class="ae ky" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/multi-az-db-clusters-concepts.html" rel="noopener ugc nofollow" target="_blank"> <em class="lv">多AZ DB集群部署</em> </a>)。要了解什么是亚马逊RDS，请查看<a class="ae ky" href="https://aws.amazon.com/rds/" rel="noopener ugc nofollow" target="_blank">该文档</a>或AWS的YouTube视频:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lw lx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">演职员表:<a class="ae ky" href="https://aws.amazon.com/rds/" rel="noopener ugc nofollow" target="_blank">https://aws.amazon.com/rds/</a></p></figure><h1 id="04ef" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated"><strong class="ak">好的，问题陈述是什么？</strong></h1><p id="29dd" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">Amazon RDS使得在云中设置、操作和扩展关系数据库变得很容易。</p><p id="ad60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它提供经济高效且可调整大小的容量，同时自动执行耗时的管理任务，如硬件配置、数据库设置、修补和备份。</p><p id="eccc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这使您能够专注于您的应用程序，从而为它们提供所需的快速性能、高可用性、安全性和兼容性。关系数据库是许多类型应用程序的核心。</p><p id="b0bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了让您构建在生产环境中高度可用的应用程序，Amazon RDS从2010年开始提供多AZ支持</p><p id="0aaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://aws.amazon.com/rds/features/multi-az/" rel="noopener ugc nofollow" target="_blank"> Amazon RDS多AZ部署</a>非常适合生产数据库工作负载。当您进行多AZ部署时，<a class="ae ky" href="https://aws.amazon.com/rds/" rel="noopener ugc nofollow" target="_blank"> Amazon关系数据库服务</a> (Amazon RDS)提供一个主数据库实例和一个备用数据库实例，并对<a class="ae ky" href="http://aws.amazon.com/ebs" rel="noopener ugc nofollow" target="_blank"> Amazon弹性块存储</a> (Amazon EBS)存储进行同步物理复制，以实现高可用性和无数据丢失的故障转移。</p><blockquote class="mv mw mx"><p id="2e3b" class="kz la lv lb b lc ld ju le lf lg jx lh my lj lk ll mz ln lo lp na lr ls lt lu im bi translated">但是，您不能从备用数据库实例中读取数据。如果应用程序需要更多的读取容量，您应该创建或添加额外的<a class="ae ky" href="https://aws.amazon.com/rds/features/read-replicas/" rel="noopener ugc nofollow" target="_blank">读取副本</a>。</p></blockquote><h1 id="bd63" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated"><strong class="ak"> Hmmm，还有来自AWS的解决方案？</strong></h1><p id="c1d1" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">这种新方法解决了传统RDS multi-AZ部署的一个限制，即同步复制的备用实例不能接受连接。</p><p id="922a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">AWS的数据库解决方案架构师Vijay Karumajji 解释了可读备用实例的工作原理:</p><blockquote class="mv mw mx"><p id="9e2c" class="kz la lv lb b lc ld ju le lf lg jx lh my lj lk ll mz ln lo lp na lr ls lt lu im bi translated"><em class="it">一个多AZ数据库集群由三个不同可用性区域中的一个主数据库和两个可读备用数据库组成。主(编写器)数据库实例提供读写操作，并执行所有数据修改。备用(reader)数据库实例充当主数据库的故障转移目标，并为读取流量提供服务。因此，应用程序可以将读取流量从主数据库实例转移到读取数据库实例，以提高应用程序读取吞吐量</em></p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/44730efb3213931bf94ff00851fd5529.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/0*F1r3WzGOsoNqBCM_.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://aws.amazon.com/blogs/database/readable-standby-instances-in-amazon-rds-multi-az-deployments-a-new-high-availability-option/" rel="noopener ugc nofollow" target="_blank"> <em class="nc">来源</em> </a></p></figure><p id="8cc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与<a class="ae ky" href="https://aws.amazon.com/rds/aurora/" rel="noopener ugc nofollow" target="_blank"> Amazon Aurora </a>类似，应用程序不需要处理主机名、负载平衡或重新路由连接，multi-AZ数据库集群依靠端点机制来抽象连接:每个集群都有一个集群(读/写)端点、一个读取器端点以及与集群中每个DB实例相关联的实例端点。</p><p id="9caa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于群集在不同的可用性分区中有一个编写器实例和两个读取器实例，因此VPC必须在三个不同的分区中至少有一个子网。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/fb0ee464f697f7096616a85a7e797b6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mlT-noW7wg9GAj2O.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://aws.amazon.com/blogs/database/readable-standby-instances-in-amazon-rds-multi-az-deployments-a-new-high-availability-option/" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><h1 id="187c" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated"><strong class="ak">如何设置？</strong></h1><p id="f080" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">通过控制台创建多AZ数据库集群时有两种主要配置:</p><ul class=""><li id="4c7a" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">确保选择合适的数据库引擎版本。只能使用MySQL版本8.0.26和PostgreSQL版本13.4创建多AZ DB集群。</li><li id="7e24" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">在“可用性和持久性”部分选择“Multi-AZ DB cluster ”,并确认此预览版的有限服务协议。有关更多信息，请访问<a class="ae ky" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/multi-az-db-clusters-concepts.html#create-multi-az-db-cluster" rel="noopener ugc nofollow" target="_blank">创建多AZ数据库集群。</a></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/109e6d089032c17c8bf0703208d1d04a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/0*VDzKKNDEQtz1dDUv.png"/></div></figure><p id="1f2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要使用AWS CLI创建多AZ DB集群，调用<a class="ae ky" href="https://docs.aws.amazon.com/cli/latest/reference/rds/create-db-cluster.html" rel="noopener ugc nofollow" target="_blank"> create-db-cluster </a>命令。指定<code class="fe nt nu nv nw b">--db-cluster-identifier</code> <em class="lv">。</em>对于<code class="fe nt nu nv nw b">--engine</code>选项，指定<code class="fe nt nu nv nw b">mysql</code>或<code class="fe nt nu nv nw b">postgres</code>。</p><p id="0f43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nt nu nv nw b">create-db-cluster</code>命令为您的数据库集群创建一个写数据库实例和两个读数据库实例。每个数据库实例位于不同的可用性区域。例如，以下命令创建一个名为aps <code class="fe nt nu nv nw b">-multi-az-db-cluster</code>的PostgreSQL 13.4多AZ数据库集群:</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="c3a9" class="ob lz it nw b gy oc od l oe of">aws rds create-db-cluster \<br/>   --db-cluster-identifier aps-multi-az-db-cluster \<br/>   --engine postgres \<br/>   --engine-version 13.4  \<br/>   --master-user-password password \<br/>   --master-username postgres \<br/>   --port 5432 \<br/>   --backup-retention-period 1  \<br/>   --db-subnet-group-name default \<br/>   --allocated-storage 1000 \<br/>   --storage-type io1 \<br/>   --iops 10000 \<br/>   --db-cluster-instance-class db.r6gd.xlarge</span></pre><h1 id="e908" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated"><strong class="ak">最后的话</strong></h1><p id="d4c1" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">Multi-AZ DB集群选项提供需要更多读取容量的工作负载，同时提供高可用性和耐用性。</p></div></div>    
</body>
</html>