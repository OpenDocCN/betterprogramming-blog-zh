# 想要更快地设置下一个 React 原生项目吗？使用 CLI

> 原文：<https://betterprogramming.pub/want-to-setup-your-next-react-native-project-faster-use-cli-4d0b7ee442d9>

## 使用 Node.js 构建您自己的 CLI

![](img/0e041bdd2798b9755e6bd9f58f6c240c.png)

凯文·Ku 在 Unsplash[上的照片](https://unsplash.com?utm_source=medium&utm_medium=referral)

当涉及到在 React Native 中设置您的项目时，像所有其他框架一样，您有两种选择:

1.  你做一个全新的安装，然后一个接一个地添加你的模块
2.  您克隆了一个初学者模板，然后开始编码

通常，初学者模板是快速入门的理想选择，因为它带有一些现成的屏幕和功能，但问题是，由于初学者工具包不经常更新，模块通常落后于其最新版本，因此您的整个应用程序可能会过时。

那么我们能做些什么呢？从头开始一个项目似乎是一条可行之路，但是我们如何才能简化和加快这个过程呢？

# 输入 CLI

等等！我们在说什么 CLI？在本文中，我们将构建自己的 CLI，用于即将到来的项目。我们的 CLI 将负责安装 React Native 和您经常使用的模块。我们还将打包我们的 CLI，并在 npm 上发布。

酷！开始吧！

对于这个项目，我们将使用 [commander.js](https://www.npmjs.com/package/commander) ，因为我们在 Node.js 环境中。Commander.js 是一个流行的、固执己见的工具，它可以让你在终端上使用命令程序。我们还将使用 [shelljs](https://www.npmjs.com/package/shelljs) 在每个操作系统环境中一致地运行 shell 命令。

让我们先决定盒子里会有什么。尽管 React Native 有很多很棒的库，但基本的都是一样的。以下是我将使用的模块列表示例:

*   反应导航
*   Redux 工具包
*   反应自然复活
*   反应查询
*   Axios
*   洛蒂
*   福米克和耶

当然，您的可能会有所不同，请随意添加您自己的内容。此时，我们可以像这样组成这些模块的数组:

然后，让我们通过`npm i commander --save`安装 commander.js 并开始编写我们的 CLI:

下面是我们的命令脚本的基本版本，它触发 react-native 安装并在之后退出。为了更好地理解，我们来分解一下:

首先，我们将一个 shebang bash 指令放在我们的脚本之上，以便在 UNIX 系统中访问可移植性。这也是我们的脚本在运行时像 cli 一样运行所必需的。然后我们介绍我们的程序，并定义它的名称、版本和描述。我选择了 rncli 作为名字，也就是说当你使用它的时候，你必须在终端中输入`rncli`。Commander.js 程序有命令，有参数，有选项。当您安装一个模块时，请考虑 npm。例如，当您编写以下内容时:

```
npm install react-native --save
```

这里我们有`npm`是我们的程序，`install`是我们的命令，`react-native`是我们的参数，最后`--save`是我们的选项。这个例子也是如此。我们得到了`install`命令，并作为参数提供了要安装的目录。

自变量为 `<required>`或`[optional]`。如果您省略了一个必需的参数，您将会得到一个错误。

最后，在最后一行中，我们提供了一个要触发的操作，并运行默认的 react-native install 命令，就像我们从终端执行它一样。

现在，让我们继续安装我们的模块:

这里我们生成一个模块名的连接字符串，并将其提供给`npm install`命令。我们还为喜欢用 TS 编写的用户提供了`--typescript`选项。

在这一点上，我们实现了我们想要的:一个简单、枯燥的 CLI，节省了我们几分钟的时间。然而，你想把它改进得更好一点，对吗？

# 越来越花哨

为了使我们的 CLI 更加友好和“现代”，我们可以添加一个向导模式来指导用户完成这些步骤。这个向导解释这个程序将做什么，询问首选语言，并列出模块名称及其最新版本号。

我们首先从安装以下模块开始:

```
npm i figlet axios inquier loading-cli --save
```

简而言之，Inquier 允许我们显示选择列表和输入。Figlet 生成漂亮的 ASCII 文本、loading-cli 和 colors-cli，为我们的 cli 添加一些颜色和微调器。我们还将通过 npm 端点获取软件包版本。因此，我们将使用 axios(对我来说，这似乎更方便)，但是您也可以使用简单的 fetch。

我们现在可以添加新的命令“向导”，不提供任何参数，让程序一步一步地指导我们。

因此，我们的最终代码将如下所示:

酷！我们的节目准备好了。如果我们首先传递一个像`rncli wizard`这样的“向导”参数，它会列出我们的模块和它们的最新版本，并询问我们是否想继续。如果我们不这样做，它将立即退出。然后它会询问语言和目录。获得这些信息后，它将开始安装模块，就像我们之前在 bare CLI 中所做的那样。

# 出版

最后一步是发布。在将我们的包发送给 npm 之前，请确保您的`package.json`包含这两个条目:

```
"main": "index.js",
"bin": {"rncli": "index.js"},
```

不要与这里的`bin`名称混淆。程序包名称将显示在 npm 中，而不是 CLI 名称中。如果你的名字被占用了，你可以用别的名字来改变这个名字。

最后，登录 npm 并发布您的包:

```
npm login
npm publish
```

就是这样！您的 CLI 在 npm 上公开发布。你现在可以用`npx rncli wizard`快速测试，检查事情是否正常。

# 结论

在本文中，我们简要地进入了 CLI 世界，了解了如何在 Node.js 中构建命令程序。您可以使用这个示例，并针对任何使用 npm 的语言对其进行修改，如 Angular、React.js 或 bare Node.js。您可以通过添加目录结构来进一步改进它，或者通过添加颜色等来使终端更加美观。

希望对你有用。如果您有任何意见，请告诉我！

编码快乐！