# 我从《重构:改进现有代码的设计》一书中学到的 7 点

> 原文：<https://betterprogramming.pub/my-top-takeaways-from-refactoring-part-1-e802d81600aa>

## 我在阅读马丁·弗劳尔书时学到了什么

![](img/6a8ad96862166f028d7e43c421a1fd4a.png)

[工作室媒体](https://unsplash.com/@studiomediainc?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

作为软件开发人员，我们应该拥抱变化。框架变化，需求变化，期望变化…将这些变化合并到现有的代码库并不总是容易的。但是，编写干净且结构良好的代码会让未来的自己变得更容易。

作为开发人员和设计人员，甚至作为人类，我们并不总是在一开始就做出最好的决定。有时候，看看这段旅程将把我们带向何方会有所帮助，然后我们会修改之前的决定。我们对未来的修订考虑得越多，到时候就越容易实施。软件开发几乎总是如此。重构是我们为软件修改过去决策的方式。

我想分享一下我从肯特·贝克和马丁·福勒所著的《重构 T4》一书中获得的一些经验。这本书分享了关于重构的宝贵的实践观点。还有许多重构技术的目录，用惊人的例子来说明。向任何有兴趣了解更多重构知识的人推荐这本书。

第一章是重构在实践中的一个例子。它证明了所采取行动的合理性，并分享了许多有用的经验法则。

# 1.致力于拥抱变化

我们编写的软件是动态的，这种想法带来了改变的隐含必要性。

为了轻松应用下一个变化，我们首先需要有一个好的结构。

重构的目的是在不影响任何可见功能的情况下改进代码的结构。

# 2.在重构之前，确保你有足够的测试

重构代码时，我们希望确保软件按预期运行。实现这一点的最好方法是借助一组好的测试。

测试确保无论我们做什么改变，功能保持不变。我们必须确保我们的测试覆盖了我们在重构过程中接触到的领域。

如果没有，我们现在必须停下来，在开始重命名一个方法之前就开始添加那些测试。

# 3.逐步重构

重构可能会破坏事物，这就是为什么我们首先编写测试，对吗？对吗？好吧。我们应该以尽可能小的步骤进行更改，并测试这些更改。

这样我们就知道我们什么时候搞砸了，也更容易恢复，因为我们的步伐很小。

# 4.拥有一个系统:重构、测试、提交

无论我们多么小心，在重构时有一个系统将有助于这个过程。

当你重构时，你是在一小步一小步地重构。你测试你的改变。然后，您将更改提交到您最喜欢的版本控制系统。现在您已经有了一个经过充分测试的变更的清晰历史！借助这一流程，您可以:

*   以 100%的信心回复到任何一个提交，
*   随时停止并释放任何提交，这将是一种改进，
*   您可以将这些微小的提交压缩成更大更有意义的提交，以获得好看的历史记录！

# 5.首先重构，然后扩展

在添加新功能之前进行重构将有助于思考过程。留下比你发现的更好的代码库是一个奖励！

# 6.重命名时使用描述性名称

重命名是重构中的一项关键技术。重命名变量、重命名方法、重命名类……重命名的重点应该是使用描述性的名称，这样可以节省我们的时间。

一个好的变量名可以让我们不用去阅读它是如何到达这里的，也不用去理解它有什么值。一个好的方法名称使我们不必阅读整个实现来理解它做什么。一个好的类名使我们不必阅读整个类来理解它的责任。

花大量的时间和精力来选择名字是重构的核心。否则，如果我们仍然必须读取较小的方法，那么拆分一个大方法又有什么意义呢？

# 7.重构时关注性能

在重构过程中，性能可能会受到影响。即使有，通常也是小规模的，没有重大损失。但是，记下可能的性能降级点是一个好习惯。

完成重构后，我们应该回顾这些要点，并针对性能进行微调。这将更容易微调，因为在重构结束时代码库将有一个更好的结构。

*最初发表于*【https://recepinanc.com】