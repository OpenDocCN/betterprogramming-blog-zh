<html>
<head>
<title>How to Update Your Existing iOS Framework to Work With Swift Package Manager</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何更新您现有的iOS框架，以便与Swift Package Manager配合使用</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/update-your-existing-ios-framework-to-swift-package-fa8128323b33?source=collection_archive---------2-----------------------#2019-08-04">https://betterprogramming.pub/update-your-existing-ios-framework-to-swift-package-fa8128323b33?source=collection_archive---------2-----------------------#2019-08-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="50a6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">椰子，迦太基-&gt; SPM</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6637f8e3569dea33d234a1c156b7b4d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h9bBTXcxLR8BJMdZdMnP4A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@cadop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">马修·施瓦茨</a>在<a class="ae ky" href="https://unsplash.com/s/photos/abstract?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="bd13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在过去的几年里，我一直在管理一个由我创建的iOS框架，其中包含一些我在整个项目中一直重复使用的小工具。这没什么大不了的，但对我来说，这是创建、更新、记录和测试框架的一个很好的练习。</p><p id="daa5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个框架在<a class="ae ky" href="https://github.com/trusk89/BartisUtilities" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上可以作为BartisUtilities获得(请原谅我的自恋)。我看不出有必要将它作为Cocoapod或Carthage项目发布，因为我主要使用它的片段，只有一个个人项目完全导入它。这对于单个项目来说没有问题，在Xcode中构建一个新版本的框架，并在使用它的项目中替换它。但是如果我必须在多个项目中完成，这将是一个麻烦。</p><p id="0804" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">进入<a class="ae ky" href="https://swift.org/package-manager/" rel="noopener ugc nofollow" target="_blank"> Swift包管理器</a>。当然，这并不新鲜，但正如我们在今年的WWDC上看到的，直接从Xcode 11创建Swift包变得非常容易。</p><p id="0595" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，这是一个非常简单明了的过程，不超过30分钟，所以让我们开始吧。</p><p id="545b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，你需要<a class="ae ky" href="https://developer.apple.com/xcode/" rel="noopener ugc nofollow" target="_blank"> Xcode 11 </a>和一个现有的iOS框架。</p><ol class=""><li id="2bd8" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">首先，我们来看看现有的项目结构。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi me"><img src="../Images/ebc87eb21d9263935221955959040941.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*VrlwfoSTPS9nsMqxffcTkw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">现有项目结构</p></figure><p id="2ba6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以看到它主要分为两组:实际的源代码和单元测试的源代码。在实际的文件夹中也有一个<code class="fe mf mg mh mi b">README.md</code>，但是它没有被导入到项目中。让我们现在就开始吧，因为这是Swift包所要求的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/905a7400a30fa3502b8f4fc92c4ca22e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*YEaoM4YFXtouP_hTNeOgtQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">导入的README.md</p></figure><p id="4b45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.为了让我们的生活更容易，如果每个人都有可能的话，我喜欢按照苹果官方文档<a class="ae ky" href="https://developer.apple.com/documentation/swift_packages/creating_a_swift_package_with_xcode" rel="noopener ugc nofollow" target="_blank">中的描述来组织这个项目，通过重命名组来包含真正的单词<em class="mk">包</em>和<em class="mk">测试</em>。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/5edd523b47ce7320f75ba46c0beb0a3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*58Y1ikLX6DZLr2EA_Ko0FQ.png"/></div></figure><p id="8119" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后把他们移到一个<code class="fe mf mg mh mi b">Sources</code> <strong class="lb iu"> </strong>和<code class="fe mf mg mh mi b">Tests</code>组。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/0479c8cc0b99349c3d59a8964e79b157.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*QOQR4fggGtqZPFmJOCobrg.png"/></div></figure><p id="1092" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">提示:您可能需要更新项目设置中的<strong class="lb iu"> </strong> <code class="fe mf mg mh mi b">Info.plist</code>路径。</p><p id="c632" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.现在我们的结构已经准备好了，让我们生成清单。当然，我们可以基于Apple的样本手动创建它，但是当我们可以使用Swift toolchain来为我们创建时，我们为什么要这样做呢？</p><p id="e882" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在项目的根目录下打开一个终端窗口并运行</p><p id="83d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mf mg mh mi b">swift package init — type library</code></p><p id="34bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会看到如下输出:</p><pre class="kj kk kl km gt mn mi mo mp aw mq bi"><span id="b16d" class="mr ms it mi b gy mt mu l mv mw">Alex@Maculetz BartisUtilities % swift package init — type library<br/>Creating library package: BartisUtilities<br/>Creating Package.swift<br/>Creating Sources/<br/>Creating Sources/BartisUtilities/BartisUtilities.swift</span></pre><p id="f7ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您查看您的项目时，您应该看到<code class="fe mf mg mh mi b">Package.swift</code>已经出现在聚会上。</p><p id="6f87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.答:现在，是时候关闭我们现有的Xcode了，因为我们要生成一个新的<code class="fe mf mg mh mi b">.xcodeproj</code>。</p><p id="8964" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在同一个终端窗口中，运行</p><p id="df91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mf mg mh mi b">swift package generate-xcodeproj</code></p><p id="2778" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会看到如下所示的成功输出:</p><pre class="kj kk kl km gt mn mi mo mp aw mq bi"><span id="0271" class="mr ms it mi b gy mt mu l mv mw">Alex@Maculetz BartisUtilities % swift package generate-xcodeproj<br/>generated: ./BartisUtilities.xcodeproj</span></pre><p id="fcef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们打开新项目看一看。</p><p id="23ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先您会注意到，现在您的根目录中的所有文件夹都映射到Xcode项目。在我的例子中，它还将<code class="fe mf mg mh mi b">SampleApp</code>添加到项目和所有Jazzy生成的文档中。这对我来说不是问题，但是如果对你来说是，你可以像平常一样清理你的项目结构。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi me"><img src="../Images/562b7fee4bbd4764aa98ca21ee12ad86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*chk6v-jhemKJmN6U8-ECkw.png"/></div></figure><p id="d0b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.b .在这一步，如果您在生成新的<code class="fe mf mg mh mi b">.xcodeproj</code>时遇到问题(就像我第一次做的那样)，在清单文件的<code class="fe mf mg mh mi b">targets</code>组中添加源文件的路径。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/f2f4f90e24eb0c51893e9fa9302759c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HpxWRdf2brTsa7IIr2SxJg.png"/></div></div></figure><p id="ef32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">4.构建新创建的方案<code class="fe mf mg mh mi b"><strong class="lb iu"> MyProject-Package</strong></code> <strong class="lb iu">。</strong></p><p id="ebbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">5.测试新创建的方案<code class="fe mf mg mh mi b">MyProject-Package</code>。</p><p id="ed17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果构建和测试一切顺利，我们就进入最后一部分:发布。</p><p id="073e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">6.提交。用力。为您的当前版本创建标签。</p><p id="f246" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！</p><p id="9abf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您现在可以进入另一个项目，在项目导航器中点击该项目，<strong class="lb iu"> </strong>选择Swift包，<strong class="lb iu"> </strong>并点击<strong class="lb iu"> + </strong>。现在像这样粘贴<code class="fe mf mg mh mi b">.git</code>网址:<a class="ae ky" href="https://github.com/trusk89/BartisUtilities.git" rel="noopener ugc nofollow" target="_blank">https://github.com/trusk89/BartisUtilities.git</a></p><p id="c02d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后点击“下一步”,直到导入完毕。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure></div></div>    
</body>
</html>