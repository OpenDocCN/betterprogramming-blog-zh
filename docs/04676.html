<html>
<head>
<title>How to Set the Aspect Ratio for a View in XML Using ‘constraintDimensionRatio’</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用“constraintDimensionRatio”设置XML视图的纵横比</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/aspect-ratio-with-constraint-layout-with-constraintdimensionratio-d55828ec4aae?source=collection_archive---------3-----------------------#2020-04-29">https://betterprogramming.pub/aspect-ratio-with-constraint-layout-with-constraintdimensionratio-d55828ec4aae?source=collection_archive---------3-----------------------#2020-04-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="28d3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">准确显示您的图像</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f6a14a9c3894df126c7d15df9a4009e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9PbN4P6SWrZZod23n8Q2qA.png"/></div></div></figure><p id="d74c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这篇文章是关于<code class="fe lq lr ls lt b"><a class="ae lu" href="https://medium.com/better-programming/essential-components-of-constraintlayout-7f4026a1eb87" rel="noopener">ConstraintLayout</a></code>的一个重要而有用的属性，称为<code class="fe lq lr ls lt b">constraintDimensionRatio</code>。在探索这个之前，我们应该知道纵横比和<code class="fe lq lr ls lt b"><a class="ae lu" href="https://medium.com/better-programming/essential-components-of-constraintlayout-7f4026a1eb87" rel="noopener">ConstraintLayout</a></code>。</p><p id="3106" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="lv">长宽比</em>是用来描述视图尺寸的术语，通过比较宽度和高度，用比例的形式表示。长宽比是根据宽度:高度来测量的。如果长宽比为4:3，则宽度应为4，而高度应为3。该比率会相应地设置图像。</p><p id="2f95" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在Android开发中，在<code class="fe lq lr ls lt b">ConstraintLayout</code>之前，我们习惯使用长宽比公式，固定宽度或高度来获得图像的完美视图。在引入了<code class="fe lq lr ls lt b">ConstraintLayout</code>之后，许多事情在XML中变得容易了。</p><p id="2964" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要了解更多关于<code class="fe lq lr ls lt b">ConstraintLayout</code>的信息，请查看“<a class="ae lu" href="https://medium.com/better-programming/essential-components-of-constraintlayout-7f4026a1eb87" rel="noopener">constraint layout的基本组件</a>”比率是<code class="fe lq lr ls lt b">ConstraintLayout</code>的特性之一，有助于减少一点编程设置纵横比的开销。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="4f88" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">让我们用一个例子来更好地理解它</h1><p id="f9a5" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">当使用<code class="fe lq lr ls lt b">constraintDimensionRatio</code>属性时，我们需要将至少一个约束维度设置为<code class="fe lq lr ls lt b">0dp</code>(例如<code class="fe lq lr ls lt b">MATCH_CONSTRAINT</code>)，并且我们需要将属性<code class="fe lq lr ls lt b">layout_constraintDimensionRatio</code>设置为所需的比率。例如，查看下面的代码片段:</p><pre class="kj kk kl km gt na lt nb nc aw nd bi"><span id="446c" class="ne me it lt b gy nf ng l nh ni">&lt;Button <br/>    android:layout_width="wrap_content"<br/>    android:layout_height="0dp"<br/>    app:layout_constraintDimensionRatio="1:1"/&gt;</span></pre><p id="8f36" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">上面的XML将按钮的高度设置为与宽度相同。</p><p id="8137" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该比率可以用以下两种方式之一表示:</p><ul class=""><li id="20d1" class="nj nk it kw b kx ky la lb ld nl lh nm ll nn lp no np nq nr bi translated">一个<strong class="kw iu">浮点值，</strong>表示宽度和高度的比值</li><li id="2360" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated">形式为<strong class="kw iu">“宽度:高度”</strong>的比率</li></ul><p id="a5ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果两个维度都设置为<code class="fe lq lr ls lt b">0dp</code>，我们也可以使用比率。在这种情况下，系统在保持给定纵横比的同时，设置满足上述所有约束的最大尺寸。</p><p id="d6af" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们用一个<code class="fe lq lr ls lt b">ImageView</code>和一个16:9的值来应用<code class="fe lq lr ls lt b">constraintDimensionRatio</code> <strong class="kw iu"> </strong>属性，看看是什么样子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="859a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将按照16:9的比例设置<code class="fe lq lr ls lt b">ImageView</code>的高度，而<code class="fe lq lr ls lt b">ImageView</code>的宽度将匹配父对象的约束。图像将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/95b5a54f403828fcbcf9746a424c9923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4y-grOsCfTpd7EUeblk_aw.png"/></div></div></figure><p id="3af5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们改变<code class="fe lq lr ls lt b">ImageView</code>的比例，那么它会看起来不一样。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/6cb69e9e4384185b33e5361918eb5074.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3_3E_CXGPF7sepvUJkE7WA.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="953b" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">在比率后附加“W”或“H”</h1><p id="6150" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">如上所示，当两个尺寸都设置为与约束匹配时，也可以应用比率。</p><p id="d19b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了根据另一边的尺寸来约束某一边，我们可以预先设置<code class="fe lq lr ls lt b">W</code>或<code class="fe lq lr ls lt b">H</code>来分别约束宽度或高度。</p><p id="13cb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如，如果一个尺寸受到两个目标的约束(例如，宽度是<code class="fe lq lr ls lt b">0dp</code>并以父对象为中心)，您可以通过在比率前添加字母<code class="fe lq lr ls lt b">W</code>(用于约束宽度)或<code class="fe lq lr ls lt b">H</code>(用于约束高度)，并用逗号分隔，来指示应该约束哪一侧。</p><pre class="kj kk kl km gt na lt nb nc aw nd bi"><span id="a5e6" class="ne me it lt b gy nf ng l nh ni">&lt;ImageView<br/>    android:layout_width="0dp"<br/>    android:layout_height="0dp"<br/>    android:id="@+id/imageView"<br/>    app:layout_constraintBottom_toBottomOf="parent"<br/>    app:layout_constraintRight_toRightOf="parent"<br/>    app:layout_constraintLeft_toLeftOf="parent"<br/>    app:layout_constraintTop_toTopOf="parent"<br/>    <strong class="lt iu">app:layout_constraintDimensionRatio="W,1:3"</strong> /&gt;</span></pre><p id="e0be" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在上述示例中，高度将根据应用于它的约束来定义。</p><p id="971e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这种情况下，约束被配置为附加到父视图的顶部和底部，实质上是扩展小部件以填充父视图的整个高度。</p><p id="8305" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">另一方面，宽度尺寸被限制为<code class="fe lq lr ls lt b">ImageView</code>高度尺寸的三分之一。</p><p id="2e01" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，无论布局出现在什么样的屏幕尺寸或方向上，<code class="fe lq lr ls lt b">ImageView</code>将始终与父布局高度相同，宽度为该高度的三分之一。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="24d7" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">为不同的屏幕设置不同的比率</h1><p id="51d2" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">由于Android有可变的屏幕尺寸，我们可以根据需求灵活地为不同的屏幕设置不同的比例。我们可以在不同的维度文件中定义比率字符串，并在XML中访问它们，这样就可以访问特定于屏幕的维度。</p><p id="374a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如:</p><h2 id="9abf" class="ne me it bd mf ob oc dn mj od oe dp mn ld of og mp lh oh oi mr ll oj ok mt ol bi translated"><strong class="ak"> res/values/dimens.xml </strong></h2><pre class="kj kk kl km gt na lt nb nc aw nd bi"><span id="a0fe" class="ne me it lt b gy nf ng l nh ni">&lt;<strong class="lt iu">string name="section_image_ratio"</strong>&gt;16:9&lt;/<strong class="lt iu">string</strong>&gt;</span></pre><h2 id="31d9" class="ne me it bd mf ob oc dn mj od oe dp mn ld of og mp lh oh oi mr ll oj ok mt ol bi translated"><strong class="ak">RES/values-large/dimens . XML</strong></h2><pre class="kj kk kl km gt na lt nb nc aw nd bi"><span id="3824" class="ne me it lt b gy nf ng l nh ni">&lt;<strong class="lt iu">string name="section_image_ratio"</strong>&gt;12:8&lt;/<strong class="lt iu">string</strong>&gt;</span></pre><p id="c70d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，图像纵横比会根据设备尺寸发生变化，我们只需参考参考资料中的<code class="fe lq lr ls lt b">section_image_ratio</code>。</p><pre class="kj kk kl km gt na lt nb nc aw nd bi"><span id="4956" class="ne me it lt b gy nf ng l nh ni"><strong class="lt iu">app:layout_constraintDimensionRatio="@string/section_image_ratio"</strong></span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="5527" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结论</h1><p id="d2cb" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">目前就这些。希望你喜欢阅读这篇文章。</p><p id="0489" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">感谢阅读！</p><h2 id="0a88" class="ne me it bd mf ob oc dn mj od oe dp mn ld of og mp lh oh oi mr ll oj ok mt ol bi translated">资源</h2><p id="6c01" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated"><a class="ae lu" href="https://developer.android.com/reference/android/support/constraint/ConstraintLayout" rel="noopener ugc nofollow" target="_blank">约束布局</a></p></div></div>    
</body>
</html>