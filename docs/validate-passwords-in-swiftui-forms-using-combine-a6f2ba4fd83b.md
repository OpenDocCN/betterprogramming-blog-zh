# 使用 Combine 验证 SwiftUI 表单中的密码

> 原文：<https://betterprogramming.pub/validate-passwords-in-swiftui-forms-using-combine-a6f2ba4fd83b>

## 验证凭证的声明式编程

![](img/54d58d0ac3e5d6e011c369c6adc010b2.png)

作者 GIF。

我担心我们一段时间以来都弄错了密码。至少我们中的一些人有。一段时间以来，公司一直在为密码内容设置愚蠢的规则。您知道规则:他们说您的密码必须包含大写、小写和特殊字符，并且长度必须至少为 X 个字符。这些是愚蠢的规则，因为它们迫使用户想出与现实世界没有联系的单词组合——包括特殊字符，所以他们把它们写下来。

但是愚蠢的不仅仅是把它们写下来。事实上，密码的长度非常重要。最终，它比它的复杂性重要得多。用户可能很难理解，但密码“abcdefgh1234”将比“gh05t3%”更难破解。

大小很重要，因为在密码中添加一个字母会成倍增加破解密码的时间。现在，我不是说复杂性不重要。是的……但是尺寸更重要。

让我们写一些代码来鼓励你的用户设置好的密码。

在你读这篇文章之前，先看看下面的文章。基本上讲的是同一个概念，只是方式不同，具体讲的是 pin 码:

[](https://medium.com/better-programming/data-validation-in-swiftui-2-0-790cf6dbe49a) [## SwiftUI 2.0 中的数据验证

### 看看你需要完全验证用户输入的一些数据的代码

medium.com](https://medium.com/better-programming/data-validation-in-swiftui-2-0-790cf6dbe49a) 

回到手头的事情。我有两个输入字段，可以对其应用一个或多个以下规则:

*   两个字段需要相同。
*   它们必须是最小字段长度。
*   它们必须是最大字段长度。
*   可以有一个纯数字选项。
*   可以有一个只有字母的选项。
*   可以有一个仅字母数字字段(即无特殊字符)选项。
*   他们至少有一个阿尔法字符。
*   它们至少有一个数字字符。

显然，这些选项中的一些是相互排斥的。为了完整起见，我将它们包括在内。但是与我上一篇文章中的解决方案不同，我想让它对用户友好。当你输入新的、长的、难以破解的密码时，它会实时显示你做错了什么。

这种方法使用声明性编码。当我向字段输入数据时，我向一个管道发送信号，通过这个管道您可以运行测试并实时向接口报告。我使用一个类作为 SwiftUI 和 Combine 框架之间的中间人。

我在类中做的测试基本上都被定义为对`String`类型的扩展。我使用正则表达式来处理一些更具挑战性的规则，比如在输入字段中至少需要有一个数字字符和/或一个字母字符。

关于这个主题的最后一句话:我在做研究的时候偶然发现了这个优秀的[网站](https://passwordbits.com/password-length-vs-complexity-vs-strength/)。它暗示了一个我没有真正提到的非常人性的弱点——独特性。它假定你在每个网站上使用的每个密码都应该是唯一的。独一无二是因为你以前从未用过，以后也不会再用。这是一个非常人性的弱点。我们喜欢在任何地方反复使用同一个密码。

另外， [BetterBuys](https://www.betterbuys.com/estimating-password-cracking-times/) 提供了一种测试密码的方法。不要试图输入任何你实际使用的密码。试试新做的，看看你的技术有多好。

保持冷静，继续编码。