<html>
<head>
<title>Understand the Concept of Changing Token’s On-chain Attributes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解更改令牌链上属性的概念</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/concept-of-changing-tokens-on-chain-attributes-bd8d4ccdae3f?source=collection_archive---------2-----------------------#2021-12-19">https://betterprogramming.pub/concept-of-changing-tokens-on-chain-attributes-bd8d4ccdae3f?source=collection_archive---------2-----------------------#2021-12-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7a0b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过插图解释</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7bc75def9e463b3c9771e1192960eba6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*j5-aIzpBFk__IsSL"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@tezos?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">泰佐斯</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="a17a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个快速的提醒——在这个系列中，玩家将会在游戏世界中使用游戏道具。用它们杀怪物在游戏世界(实时)和链上世界(以按需方式节省汽油)都给了它们更好的物品属性。让我们来讨论制定一个合理公平的机制，允许用户改变游戏战利品属性。关键规则应该是:</p><ul class=""><li id="46c0" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">用户<strong class="ky ir">不能</strong>自己创造改变(否则他们将可以不公平地提高游戏道具参数，而不会在游戏中反映出来)</li><li id="41e7" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">游戏所有者<strong class="ky ir">不能</strong>对用户的战利品进行任何改变</li></ul><h1 id="edcc" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">创建更改记录</h1><p id="c7f0" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">因此，我们在这里看到的概念是这样的，游戏所有者基于玩家在游戏中的成就产生一个描述变化(哪些属性值应该增加)的文件，但是不能应用它(因为他们不拥有战利品，也不愿意为交易付费)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/2d4f543ac4b8f7cd9d184c0aec049899.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bWXjU5kzV9kqVGGz.png"/></div></div></figure><h1 id="93a3" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">应用变更记录</h1><p id="c846" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">类似地，玩家可以<em class="ne">从游戏中下载</em>一个更改记录，并决定是否应用它，然而，玩家不能自己产生一个更改记录并应用该更改，因为智能合约将检查该更改是否合法——如果它来自游戏和智能合约所有者。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/dc0c585196e375e2d669dea4135942a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b_6OFjHO6CsBlPmm.png"/></div></div></figure><h1 id="c75d" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">原子变化范围</h1><p id="c501" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">从一开始，这个概念就是以描述所有参数变更的方式来设计变更——用户可以选择完全执行变更或完全拒绝变更。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/47e00372798a1e634ffb5943aae8e247.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VKRDgTF50hMSbi_2.png"/></div></div></figure><p id="62bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">概念变化记录</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="22f7" class="nl mh iq nh b gy nm nn l no np">{ "attributes": { "Level" : NEWlevel, "Damage" : NEWdamage, "Agility": NEWagility }, "image": "ipfs://content-based-path-to-NEW-image", "signature": "some way of proving the change is legit" }</span></pre><p id="79e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果所有参数都存储在链上，上面的例子就可以了。但是唯一存储在链上的是URI，所以没有必要把变化描述成那些参数。</p><p id="fd9c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">变化只是分配了一个新的URI，它本身存储了上面给出的所有参数。所以事实上，事实上的变更记录应该是:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="b3b1" class="nl mh iq nh b gy nm nn l no np">{ "newURI" : "ipfs://new-uri-here", "signature" : some way of proving the change is legit }</span></pre><h1 id="f1ac" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">使用EIP-712签署交易</h1><p id="732e" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">已经声明玩家只能应用最初由SC所有者创建的更改，我们需要有可能让所有者创建更改记录并<strong class="ky ir">签署它，以便稍后当玩家应用它时，它被识别为来自智能合同所有者/游戏开发者的有效更改。</strong></p><p id="2eb3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另外(或者作为第一个测试，它可以测试tx发送者是否是物品所有者)</p><p id="72b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有效变更的整个生命周期如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/35ae0fe1867a00433b5869f2cb00c0c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EEWFUUCza7O6tRt6.png"/></div></div></figure><h1 id="44ee" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">变更签名的手动界面</h1><p id="f2f5" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">在现实生活中，游戏开发者不需要做任何事情。跟踪玩家进度的服务器应该签署更改并允许玩家应用它。</p><p id="fea4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的情况下，不会有自动机制。游戏开发人员将手动签署变更(他/她想什么时候签署都行)。它允许更好地理解变更签名如何与元掩码一起工作:)</p><p id="d75b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要了解与签名和验证相关的一切，请查看我的<a class="ae kv" href="https://rotynski.dev/signing-transactions-with-eip-712/" rel="noopener ugc nofollow" target="_blank">其他博客文章</a></p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><p id="bb87" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ne">原载于</em><a class="ae kv" href="https://rotynski.dev/plan-for-changing-tokens-on-chain-attributes/" rel="noopener ugc nofollow" target="_blank"><em class="ne">https://rotynski . dev</em></a></p></div></div>    
</body>
</html>