<html>
<head>
<title>Simulate Birds Flocking Using Flutter Flame</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用颤动火焰模拟鸟群</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/simulate-birds-flocking-using-multi-agent-system-and-flutter-flame-69e8b1aca4ef?source=collection_archive---------6-----------------------#2022-10-24">https://betterprogramming.pub/simulate-birds-flocking-using-multi-agent-system-and-flutter-flame-69e8b1aca4ef?source=collection_archive---------6-----------------------#2022-10-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d23c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一个深入的指南，这个迷人的项目使用多代理系统</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/764f092098b6347b3e49600e8795f29b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0dAKWngZphxiNREh"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">thom masat 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="9f26" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><h2 id="386b" class="lo kx iq bd ky lp lq dn lc lr ls dp lg lt lu lv li lw lx ly lk lz ma mb lm mc bi translated">关于多智能体系统</h2><blockquote class="md me mf"><p id="c8c1" class="mg mh mi mj b mk ml jr mm mn mo ju mp mq mr ms mt mu mv mw mx my mz na nb nc ij bi translated">多智能体系统(或“自组织系统”)是由多个相互作用的智能体组成的计算机化系统。多智能体系统可以解决单个智能体或单一系统难以或不可能解决的问题。智能可能包括方法、功能、程序方法、算法搜索或强化学习。<a class="ae kv" href="https://en.wikipedia.org/wiki/Multi-agent_system" rel="noopener ugc nofollow" target="_blank">维基</a>。</p></blockquote><p id="c12b" class="pw-post-body-paragraph mg mh iq mj b mk ml jr mm mn mo ju mp lt mr ms mt lw mv mw mx lz mz na nb nc ij bi translated">正如你所看到的，构建一个多智能体系统是一个用很少的参数来模拟和理解复杂系统的聪明方法。每个代理必须是自治的，本地知道它的环境，并且对其他代理没有权限。你可以在网上交易、灾难响应、监视、结构建模和像模拟城市这样的视频游戏中找到这种系统。</p><h2 id="f080" class="lo kx iq bd ky lp lq dn lc lr ls dp lg lt lu lv li lw lx ly lk lz ma mb lm mc bi translated">目标</h2><p id="fecc" class="pw-post-body-paragraph mg mh iq mj b mk nd jr mm mn ne ju mp lt nf ms mt lw ng mw mx lz nh na nb nc ij bi translated">本文的主要目的是熟悉多智能体系统，并用<a class="ae kv" href="https://docs.flame-engine.org/1.4.0/" rel="noopener ugc nofollow" target="_blank">颤振火焰</a>进行实验。为此，我决定模拟一群鸟。首先，它看起来非常令人满意，其次，我们可以调整参数，如它们的飞行能力或视野，看看它如何影响它们的感知行为。</p><blockquote class="md me mf"><p id="a73d" class="mg mh mi mj b mk ml jr mm mn mo ju mp mq mr ms mt mu mv mw mx my mz na nb nc ij bi translated">在<a class="ae kv" href="http://www.cs.toronto.edu/~dt/siggraph97-course/cwr87/" rel="noopener ugc nofollow" target="_blank">这篇文章</a>中了解更多信息。</p></blockquote><h2 id="b962" class="lo kx iq bd ky lp lq dn lc lr ls dp lg lt lu lv li lw lx ly lk lz ma mb lm mc bi translated">TL；速度三角形定位法(dead reckoning)</h2><p id="5168" class="pw-post-body-paragraph mg mh iq mj b mk nd jr mm mn ne ju mp lt nf ms mt lw ng mw mx lz nh na nb nc ij bi translated">在我的GitHub上获取完整的项目。玩它或者<a class="ae kv" href="https://sma-birds.web.app" rel="noopener ugc nofollow" target="_blank">看它在那里直播</a>。</p><div class="ni nj gp gr nk nl"><a href="https://sma-birds.web.app" rel="noopener  ugc nofollow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd ir gy z fp nq fr fs nr fu fw ip bi translated">演示鸟多代理系统</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">一群鸟的模拟。</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">sma-birds.web.app</p></div></div></div></a></div><div class="ni nj gp gr nk nl"><a href="https://github.com/duribreux/sma-birds" rel="noopener  ugc nofollow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd ir gy z fp nq fr fs nr fu fw ip bi translated">GitHub-duribreux/SMA-birds:模拟鸟群的多智能体系统</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">github.com</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz kp nl"/></div></div></a></div><h1 id="6e3d" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">概观</h1><p id="a4ae" class="pw-post-body-paragraph mg mh iq mj b mk nd jr mm mn ne ju mp lt nf ms mt lw ng mw mx lz nh na nb nc ij bi translated">在使用Flame之前，我们需要定义我们的模型。它需要2D坐标、速度、方位、视野、视距和限制其机动性的约束条件。所有这些都将用<a class="ae kv" href="https://en.wikipedia.org/wiki/International_System_of_Units" rel="noopener ugc nofollow" target="_blank">国际单位制</a>表示。</p><p id="5dd0" class="pw-post-body-paragraph mg mh iq mj b mk ml jr mm mn mo ju mp lt mr ms mt lw mv mw mx lz mz na nb nc ij bi translated">使用这些能力，它必须能够遵循三个规则:</p><ul class=""><li id="7bb0" class="oa ob iq mj b mk ml mn mo lt oc lw od lz oe nc of og oh oi bi translated">向鸥群的中心移动以躲避捕食者。</li><li id="e560" class="oa ob iq mj b mk oj mn ok lt ol lw om lz on nc of og oh oi bi translated">远离其他鸟类以避免碰撞。</li><li id="54f6" class="oa ob iq mj b mk oj mn ok lt ol lw om lz on nc of og oh oi bi translated">和它视野中最近的鸟飞向同一个方向。</li></ul><p id="aef2" class="pw-post-body-paragraph mg mh iq mj b mk ml jr mm mn mo ju mp lt mr ms mt lw mv mw mx lz mz na nb nc ij bi translated">最后，为了接近真实世界的比例，模拟将全屏运行，每个像素等于一米。此外，我们将认为环境是复曲面的，这意味着左上角将连接到右下角。</p><h1 id="7d84" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">让我们开始吧</h1><p id="1de5" class="pw-post-body-paragraph mg mh iq mj b mk nd jr mm mn ne ju mp lt nf ms mt lw ng mw mx lz nh na nb nc ij bi translated">通常，我喜欢创建一个<code class="fe oo op oq or b">environment</code>容器，在模拟过程中向<code class="fe oo op oq or b">agents</code>提供数据。在这种情况下，我们不需要太多。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="095c" class="pw-post-body-paragraph mg mh iq mj b mk ml jr mm mn mo ju mp lt mr ms mt lw mv mw mx lz mz na nb nc ij bi translated">为了增加趣味性，我们将创建两种类型的<code class="fe oo op oq or b">Agent</code>，代表两种不同的鸟类。每只鸟都和它们的同类一起飞翔。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="388f" class="pw-post-body-paragraph mg mh iq mj b mk ml jr mm mn mo ju mp lt mr ms mt lw mv mw mx lz mz na nb nc ij bi translated">在每次渲染计算期间，一只鸟将执行<code class="fe oo op oq or b">action</code>来模拟它的行为，而<code class="fe oo op oq or b">updatePositionInToricSpace</code>将处理我们环境的复曲面约束。</p><p id="a611" class="pw-post-body-paragraph mg mh iq mj b mk ml jr mm mn mo ju mp lt mr ms mt lw mv mw mx lz mz na nb nc ij bi translated">关键看方法是<code class="fe oo op oq or b">action</code>。当我们到达实际的实现时，这就是行为将驻留的地方。<code class="fe oo op oq or b">dt</code>是两个动作之间经过的时间差值，单位为秒。</p><p id="21d2" class="pw-post-body-paragraph mg mh iq mj b mk ml jr mm mn mo ju mp lt mr ms mt lw mv mw mx lz mz na nb nc ij bi translated">我们的模拟将处理<code class="fe oo op oq or b">pigeon</code>和<code class="fe oo op oq or b">sparrow</code>。它们有一些共同的飞行特征，但是我们假设麻雀比鸽子更快更敏捷。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="os ot l"/></div></figure><h1 id="3b79" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">助手方法</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="os ot l"/></div></figure><blockquote class="md me mf"><p id="292f" class="mg mh mi mj b mk ml jr mm mn mo ju mp mq mr ms mt mu mv mw mx my mz na nb nc ij bi translated">每当一只鸟试图超过它的最大速度时，我们就调整它的速度矢量。</p></blockquote><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="os ot l"/></div></figure><blockquote class="md me mf"><p id="df6e" class="mg mh mi mj b mk ml jr mm mn mo ju mp mq mr ms mt mu mv mw mx my mz na nb nc ij bi translated">行为方法应该只考虑当前方法的<code class="fe oo op oq or b"><em class="iq">fieldOfView</em></code>和<code class="fe oo op oq or b"><em class="iq">distanceView</em></code>中的代理。你终究看不到你脑袋后面的东西。</p></blockquote><h1 id="eca1" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">行为方法</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="os ot l"/></div></figure><blockquote class="md me mf"><p id="b45d" class="mg mh mi mj b mk ml jr mm mn mo ju mp mq mr ms mt mu mv mw mx my mz na nb nc ij bi translated">第一条规则，平均他们的位置，计算新的向量，并应用内聚因子来控制他们收敛的速度。</p></blockquote><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="os ot l"/></div></figure><blockquote class="md me mf"><p id="cfe0" class="mg mh mi mj b mk ml jr mm mn mo ju mp mq mr ms mt mu mv mw mx my mz na nb nc ij bi translated">第二个规则，计算它们中每一个比碰撞范围更近的新的回避矢量，并应用分离因子来处理它们改变轨迹的速度。</p></blockquote><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="os ot l"/></div></figure><blockquote class="md me mf"><p id="2ea8" class="mg mh mi mj b mk ml jr mm mn mo ju mp mq mr ms mt mu mv mw mx my mz na nb nc ij bi translated">第三个规则，平均邻居速度，并应用对齐因子来处理我们改变速度的快慢。</p></blockquote><h1 id="3175" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">最后</h1><p id="0da7" class="pw-post-body-paragraph mg mh iq mj b mk nd jr mm mn ne ju mp lt nf ms mt lw ng mw mx lz nh na nb nc ij bi translated">所有这些导致了下面的<code class="fe oo op oq or b">action</code>方法中所表达的行为。向同类鸟群的中心移动，避免与所有鸟类碰撞，并以同类相同的方向/速度飞行。同样的道理也适用于<code class="fe oo op oq or b">Sparrow</code>类。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="079e" class="pw-post-body-paragraph mg mh iq mj b mk ml jr mm mn mo ju mp lt mr ms mt lw mv mw mx lz mz na nb nc ij bi translated">最后，我们需要为每种类型的鸟创建我们的<code class="fe oo op oq or b">Component</code>。这些是火焰将用来渲染我们的鸟的类。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="e876" class="pw-post-body-paragraph mg mh iq mj b mk ml jr mm mn mo ju mp lt mr ms mt lw mv mw mx lz mz na nb nc ij bi translated"><code class="fe oo op oq or b">action</code>被覆盖只是为了更新<code class="fe oo op oq or b">PositionComponent</code>提供的<code class="fe oo op oq or b">position</code>向量，<code class="fe oo op oq or b">dt</code>只是两帧之间的时间差，我们都知道<code class="fe oo op oq or b">distance = speed * time</code>。</p><p id="cd0c" class="pw-post-body-paragraph mg mh iq mj b mk ml jr mm mn mo ju mp lt mr ms mt lw mv mw mx lz mz na nb nc ij bi translated">然后我们只需要在我们的世界里随机放满鸟，就大功告成了！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="os ot l"/></div></figure><h1 id="2219" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="7a9b" class="pw-post-body-paragraph mg mh iq mj b mk nd jr mm mn ne ju mp lt nf ms mt lw ng mw mx lz nh na nb nc ij bi translated">如你所见，多智能体系统是用简单规则理解复杂行为的强大工具。您可以通过添加捕食者、障碍物、食物位置和每个代理的特征变化来扩展这个示例。</p><p id="8aed" class="pw-post-body-paragraph mg mh iq mj b mk ml jr mm mn mo ju mp lt mr ms mt lw mv mw mx lz mz na nb nc ij bi translated">你的想象力是极限！</p><div class="ni nj gp gr nk nl"><a rel="noopener  ugc nofollow" target="_blank" href="/build-a-collaborative-pixel-art-app-with-flutter-and-firebase-d4a027b4534b"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd ir gy z fp nq fr fs nr fu fw ip bi translated">用Flutter和Firebase构建一个协作像素艺术应用程序</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">创建您自己的休息/场所</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">better编程. pub</p></div></div><div class="nu l"><div class="ou l nw nx ny nu nz kp nl"/></div></div></a></div></div></div>    
</body>
</html>