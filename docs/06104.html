<html>
<head>
<title>Sorry, If-Else Statements Aren’t Bad at All</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">抱歉，If-Else语句一点也不差</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/sorry-if-else-statements-arent-bad-at-all-472c9841eea?source=collection_archive---------9-----------------------#2020-09-02">https://betterprogramming.pub/sorry-if-else-statements-arent-bad-at-all-472c9841eea?source=collection_archive---------9-----------------------#2020-09-02</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="5a98" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">对有争议的“停止使用X”建议的澄清</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/a1d3babac487d40e6dcba30142a63e74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qQWroSmAIZ0zZlZc"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@volkanolmez?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">沃尔坎·奥尔梅斯</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="d774" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最近，我看到一篇编程文章，提出了一个颇具争议的立场，反对使用基本的<code class="fe lw lx ly lz b">if-else</code>控制流。</p><p id="c783" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我特别要对文章“<a class="ae kz" href="https://medium.com/swlh/stop-using-if-else-statements-f4d2323e6e4" rel="noopener">停止使用If-Else语句</a>”做出回应，这篇文章从它的(clickbait)标题就提供了一些误导性的编程建议。</p><p id="034e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">随后，我将带您了解开发人员在使用<code class="fe lw lx ly lz b">if-else</code>语句时会犯的一些常见错误，以及如何修复它们。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="bc6c" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">那篇文章有什么问题？</h1><ul class=""><li id="eba0" class="mz na iu lc b ld nb lg nc lj nd ln ne lr nf lv ng nh ni nj bi translated">这篇文章宣称<code class="fe lw lx ly lz b">if-else</code>的言论是邪恶的。它继续展示了最基本的编程控制流的极其错误的用例。</li><li id="93b9" class="mz na iu lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated">作者写的复杂条款不仅工作量太大，而且错误百出。在每一个<code class="fe lw lx ly lz b">if</code>条件中添加<code class="fe lw lx ly lz b">throw</code>语句，并在末尾放置一个不必要的<code class="fe lw lx ly lz b">else</code>块是没有意义的。</li><li id="e37b" class="mz na iu lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated">雪上加霜的是，臃肿的解决方案建议为每一个状态条件创建一个类(带有令人困惑的命名约定)，从而增加了不必要的抽象。</li><li id="a1dc" class="mz na iu lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated">为仅仅十行条件逻辑引入200多行代码违背了基本的编码原则:保持简单和愚蠢。</li><li id="a63e" class="mz na iu lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated">最终，文章的最终解决方案与其标题相矛盾。它只是通过不把<code class="fe lw lx ly lz b">if-else</code>条件放在代码的顶层来推迟它的使用。尽管这是一个很好的实践，但在整个故事中甚至没有提到。</li></ul><p id="1b07" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">可悲的是，这种误导性的标题会在初级程序员的头脑中建立误解。是的，极少数称赞这篇文章的读者是那些刚刚开始编程或者即将开始编程的人。</p><p id="90f8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">总之，这篇文章就像一个有明显缺陷的代码。它没有修复问题的根本原因，而是将责任归咎于整个<code class="fe lw lx ly lz b">if-else</code>范式，展示了一个不完全相同的替代方案，并建议在所有编程解决方案中使用该方案。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="1131" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">如何优雅地使用if-else语句？</h1><p id="403e" class="pw-post-body-paragraph la lb iu lc b ld nb jv lf lg nc jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">我想声明<code class="fe lw lx ly lz b">if-else</code>语句并不坏。你使用(或误用)它们的方式会导致混乱的代码。</p><p id="528c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在编程中没有放之四海而皆准的解决方案。类似地，当使用<code class="fe lw lx ly lz b">if-else</code>或<code class="fe lw lx ly lz b">else-if</code>条件时，没有任何不好的做法。</p><p id="1b7c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当然，使用<code class="fe lw lx ly lz b">else</code>语句应该小心，因为很难预测它的范围。如果<code class="fe lw lx ly lz b">if</code>条款之外的任何条件进入<code class="fe lw lx ly lz b">else</code>，那可能不是你真正想要的。</p><p id="c8d8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你强迫自己寻找基本<code class="fe lw lx ly lz b">if-else</code>流程的变通方法，你只会陷入不必要的样板代码和抽象中。</p><p id="5545" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然而，在一些例子中，我在不同的语言中以错误的方式看到和使用了<code class="fe lw lx ly lz b">if-else</code>语句。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="1e7d" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">给变量赋值时避免if-else</h1><p id="33b6" class="pw-post-body-paragraph la lb iu lc b ld nb jv lf lg nc jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">很久以前，我确实用Java写了类似这样的东西(尽管为了简洁起见，我在下面的例子中使用了Swift):</p><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="cc53" class="nw mi iu lz b gz nx ny l nz oa">var num : Int!</span><span id="98ac" class="nw mi iu lz b gz ob ny l nz oa">if someCondition{    <br/>    num = 10<br/>}<br/>else{    <br/>    num = 20<br/>}</span></pre><p id="9815" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">虽然这看起来并不坏，但您可以轻松地颠倒或调整条件逻辑，赋予它全新的含义。分支逻辑也带来了一点代码重复，因为我们在多个块中分配变量<code class="fe lw lx ly lz b">num</code>，这是不必要的。</p><p id="374d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">幸运的是，我们可以使用三元运算符，它就像单行中的一个<code class="fe lw lx ly lz b">if-else</code>语句:</p><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="972b" class="nw mi iu lz b gz nx ny l nz oa">num = isCondition ? 10 : 20</span></pre><p id="7f10" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">或者，对于某些用例，您也可以在变量声明时设置默认值，以消除对<code class="fe lw lx ly lz b">else</code>的使用。</p><p id="00ef" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">作为一种动态类型语言，Python要求你在声明时赋值。因此，使用上面的场景是相当明显的:</p><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="7236" class="nw mi iu lz b gz nx ny l nz oa">#Python<br/>num = 10 if isCondition else 20</span></pre></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="f07d" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">添加提前退出条件以避免else部分</h1><p id="5203" class="pw-post-body-paragraph la lb iu lc b ld nb jv lf lg nc jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">通常，在具有多个<code class="fe lw lx ly lz b">ifs</code>和<code class="fe lw lx ly lz b">else-ifs</code>的块中使用<code class="fe lw lx ly lz b">else</code>是为了处理默认场景和处理错误。</p><p id="dd39" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们一定都写过类似下面这样的代码块:</p><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="a22e" class="nw mi iu lz b gz nx ny l nz oa">if someBoolean {<br/>   // ...<br/>} else {<br/>  throw Exception("xxxx")<br/>}</span></pre><p id="2282" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe lw lx ly lz b">else</code>部分就像一个失败条件，我们可以很容易地将其放在控制流的开始:</p><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="543d" class="nw mi iu lz b gz nx ny l nz oa">if !someBoolean{<br/>   throw MyException()<br/>}</span></pre><p id="7da8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">难怪Swift为我们提供了一个<code class="fe lw lx ly lz b">guard let</code>语句来添加早期故障条件，以防出现任何问题。这对于嵌套的<code class="fe lw lx ly lz b">if</code>条件来说非常方便。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="5499" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">将长条件句提取到函数中</h1><p id="e185" class="pw-post-body-paragraph la lb iu lc b ld nb jv lf lg nc jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">当你处理<code class="fe lw lx ly lz b">if-else</code>块时，有时需要包含二元操作符的条件语句。<code class="fe lw lx ly lz b">&amp;&amp;</code>和<code class="fe lw lx ly lz b"> || </code>运算符对于处理特定条件和减少嵌套<code class="fe lw lx ly lz b">if</code>程序块的数量非常有用。</p><p id="f478" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是它很容易失去控制，变成一种长期的、不可读的状态。</p><p id="5cef" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面看看会发生什么:</p><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="eb1b" class="nw mi iu lz b gz nx ny l nz oa">if a &gt; 0 &amp;&amp; isEnabled &amp;&amp; b &gt; 10 <br/>{...}<br/>else<br/>{...}</span></pre><p id="bb7f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您可以根据自己的喜好缩短上面的代码:</p><ul class=""><li id="7d62" class="mz na iu lc b ld le lg lh lj oc ln od lr oe lv ng nh ni nj bi translated">首先，如果你使用多个不互斥的布尔值，用枚举代替它们。</li><li id="5ca0" class="mz na iu lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated">您可以将条件提取到一个单独的函数中，从而使事情更容易理解。</li></ul><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="cfc8" class="nw mi iu lz b gz nx ny l nz oa">func customCondition() -&gt; Bool{<br/>  return a &gt; 0 &amp;&amp; isEnabled &amp;&amp; b &gt; 10<br/>}</span></pre><p id="b12b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，简单地在<code class="fe lw lx ly lz b">if</code>条件中传递上面的函数:</p><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="d607" class="nw mi iu lz b gz nx ny l nz oa">if customCondition()<br/>{...}<br/>else <br/>{...}</span></pre></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="7c01" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">结论</h1><p id="d1b9" class="pw-post-body-paragraph la lb iu lc b ld nb jv lf lg nc jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">记住，<code class="fe lw lx ly lz b">if-else</code>语句并不坏，你永远也不能从你的代码库中删除它们。</p><p id="84f4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是您可以通过确保没有代码重复和保持<code class="fe lw lx ly lz b">if-else</code>块相互关联(不是相互独立的条件)来使您的生活变得更容易。</p><p id="2d66" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这一次到此为止。感谢阅读。</p></div></div>    
</body>
</html>