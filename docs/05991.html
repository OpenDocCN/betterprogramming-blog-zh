<html>
<head>
<title>The Beginner’s Guide to the Neo4j Graph Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Neo4j图形平台初学者指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-beginners-guide-to-the-neo4j-graph-platform-a39858ccdeaa?source=collection_archive---------8-----------------------#2020-08-24">https://betterprogramming.pub/the-beginners-guide-to-the-neo4j-graph-platform-a39858ccdeaa?source=collection_archive---------8-----------------------#2020-08-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0933" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">理解Cypher，Neo4j的声明式图形查询语言</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6acaedbda52ff7224b04b31971b00012.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SUc0wts3K1cfTd5EjL3JYg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。</p></figure><p id="69b7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过阅读这篇文章，您将接触到Neo4j的基本概念，这是一个本地图形数据库。基于<a class="ae lu" href="https://neo4j.com/" rel="noopener ugc nofollow" target="_blank">官方文档</a>，Neo4j为:</p><blockquote class="lv lw lx"><p id="6a96" class="ky kz ly la b lb lc ju ld le lf jx lg lz li lj lk ma lm ln lo mb lq lr ls lt im bi translated">“…从头开始构建，不仅利用数据，还利用数据关系<em class="it">。</em> Neo4j <em class="it">连接</em>存储的数据，以前所未有的速度实现前所未有的查询。”</p></blockquote><p id="5f81" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">图形数据库是一种用于将数据建模为图形的数据库。图形数据库的结构基于以下内容:</p><ul class=""><li id="ec81" class="mc md it la b lb lc le lf lh me ll mf lp mg lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">Nodes</code> —代表记录/数据。您可以向一个节点添加零个或多个标签。</li><li id="c488" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">Relationships </code> —代表节点之间的连接。每个连接都有一个方向。</li><li id="71d2" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">Properties</code> —代表指定的数据值。适用于节点和关系。</li></ul><p id="2ed0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本教程涵盖了Neo4j入门的基本步骤。您可以利用图形数据库来解决相当多的问题，从推荐系统到欺诈检测。</p><p id="2d9a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们继续下一部分，从安装开始。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="1a68" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">1.设置</h1><h2 id="854a" class="nt nc it bd nd nu nv dn nh nw nx dp nl lh ny nz nn ll oa ob np lp oc od nr oe bi translated">Java 语言(一种计算机语言，尤用于创建网站)</h2><p id="e898" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">在继续安装之前，您需要确保您的机器上安装了OpenJDK 11或Oracle Java 11。您可以通过在终端中运行以下命令来轻松检查它。</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="e0ba" class="nt nc it mo b gy oo op l oq or">java --version</span></pre><p id="237c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您应该会看到以下输出</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/c3f0f86eb135fbc971303dc2781f29c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eDhha6PDfk-8vWNnhYEx-w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a8cc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我用的是<a class="ae lu" href="https://adoptopenjdk.net/index.html?variant=openjdk8&amp;jvmVariant=hotspot" rel="noopener ugc nofollow" target="_blank"> AdoptOpenJDK </a>做的OpenJDK 11 build，开源免费。</p><h2 id="621e" class="nt nc it bd nd nu nv dn nh nw nx dp nl lh ny nz nn ll oa ob np lp oc od nr oe bi translated">Neo4j</h2><p id="0a01" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">在撰写本文时，最新的社区版本是4.1.1。前往官方<a class="ae lu" href="https://neo4j.com/download-center/#community" rel="noopener ugc nofollow" target="_blank">下载页面</a>，根据您的操作系统下载neo4j主文件。单击下载链接后，下载将开始，您将被重定向到包含安装步骤的新页面。</p><p id="3761" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本教程中，提供的步骤基于Windows平台。如果您使用其他操作系统，请参考官方安装步骤。将文件解压缩到您选择的目录中。您应该会看到以下文件和文件夹。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/3249165e07ec1612db61fd4b48965cf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/format:webp/1*iaGSZfvZx36092SLxlWBkg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="66bb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">运行Neo4j有两种方法:</p><ul class=""><li id="dbbc" class="mc md it la b lb lc le lf lh me ll mf lp mg lt mh mi mj mk bi translated">作为控制台应用程序</li><li id="a578" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated">作为服务</li></ul><h2 id="ba32" class="nt nc it bd nd nu nv dn nh nw nx dp nl lh ny nz nn ll oa ob np lp oc od nr oe bi translated">控制台应用程序</h2><p id="a6dd" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">最简单的方法是通过以下命令将其作为控制台应用程序运行。<code class="fe ml mm mn mo b">NEO4J_HOME</code>指的是您解压文件的基本目录。</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="112c" class="nt nc it mo b gy oo op l oq or">&lt;NEO4J_HOME&gt;\bin\neo4j console</span></pre><p id="b6d2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下输出将显示在您的终端上:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/302ad9c460b3b70c534954a197422f37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IBMVhvSH1GbcmtD7yqukYQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="92b9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在控制台模式下，进程被绑定到终端。它需要在前台保持打开。</p><h2 id="740d" class="nt nc it bd nd nu nv dn nh nw nx dp nl lh ny nz nn ll oa ob np lp oc od nr oe bi translated">服务</h2><p id="0111" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">另一方面，服务在后台运行流程。即使终端关闭，它也会继续运行。要将其作为服务安装，请运行以下命令:</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="b071" class="nt nc it mo b gy oo op l oq or">&lt;NEO4J_HOME&gt;\bin\neo4j install-service</span></pre><p id="065e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">之后，您可以通过以下命令正常启动它:</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="78b0" class="nt nc it mo b gy oo op l oq or">neo4j start</span></pre><p id="2765" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下列表包含一些基于Windows PowerShell模块的有用命令:</p><ul class=""><li id="9a3f" class="mc md it la b lb lc le lf lh me ll mf lp mg lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">stop </code> —停止进程</li><li id="e51b" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">restart</code> —重新开始流程</li><li id="0637" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">status </code> —检查流程的状态</li><li id="4011" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">uninstall-service</code> —移除neo4j作为服务</li></ul><h2 id="4ff9" class="nt nc it bd nd nu nv dn nh nw nx dp nl lh ny nz nn ll oa ob np lp oc od nr oe bi translated">Neo4j控制台</h2><p id="175f" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">下一步是在浏览器中访问它。打开浏览器并转到以下URL。</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="e9ed" class="nt nc it mo b gy oo op l oq or"><a class="ae lu" href="http://localhost:7474" rel="noopener ugc nofollow" target="_blank">http://localhost:7474</a></span></pre><p id="7a2b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它会将您重定向到:</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="3b87" class="nt nc it mo b gy oo op l oq or"><a class="ae lu" href="http://localhost:7474/browser/" rel="noopener ugc nofollow" target="_blank">http://localhost:7474/browser/</a></span></pre><p id="ab49" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用以下用户界面:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2f3ef61aadb99f94086f78c6965115c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kYugW5R31Eql73klPuftrw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="bd8d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您是第一次访问它，只需通过以下用户名和密码连接到数据库:</p><ul class=""><li id="45e4" class="mc md it la b lb lc le lf lh me ll mf lp mg lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">username</code> — neo4j</li><li id="05c1" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">password </code> — neo4j</li></ul><p id="1b56" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它会提示您更改密码。请务必记住新密码，因为后续登录将使用新密码。登录后，您应该会看到以下界面:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/b4ee9d47eed99016e0deb08b140d65df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QwhmLIkBrat5EEzEFPrGPw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="52a5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用红色突出显示的部分代表输入区域，您可以在这里键入要执行的查询语言。</p><p id="0886" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以在右侧找到如下三个按钮:</p><ul class=""><li id="7940" class="mc md it la b lb lc le lf lh me ll mf lp mg lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">star</code> —将查询更新为您的最爱</li><li id="1022" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">eraser</code> —清除输入区域</li><li id="3df1" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">play</code> —执行查询。您可以使用快捷键<code class="fe ml mm mn mo b">Ctrl+Enter</code>来触发执行。</li></ul><p id="cb78" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每次运行一个命令，结果都会显示并记录下来。以蓝色突出显示的部分表示内置命令，每次刷新浏览器时都会运行该命令。</p><h2 id="6e4b" class="nt nc it bd nd nu nv dn nh nw nx dp nl lh ny nz nn ll oa ob np lp oc od nr oe bi translated">样本数据集</h2><p id="b89e" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">Neo4j为您提供了两个样本数据集。如果您打算遵循内置教程，请运行以下命令。</p><p id="dd91" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第一个数据集展示了交叉引用流行文化中演员和电影的常见查询模式。在输入区域运行以下命令来启动教程。</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="48b0" class="nt nc it mo b gy oo op l oq or">:play movie graph</span></pre><p id="db38" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，第二个数据集涵盖了从外部csv文件加载数据。您将学习使用一些经典数据集从RDBMS模式转换到图结构。您可以通过以下命令启动教程:</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="13fd" class="nt nc it mo b gy oo op l oq or">:play northwind graph</span></pre></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="d038" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">2.信息、文档和配置</h1><p id="4180" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">在左侧，有一个导航面板，根据您的需要包含一些有用的按钮。</p><h2 id="d250" class="nt nc it bd nd nu nv dn nh nw nx dp nl lh ny nz nn ll oa ob np lp oc od nr oe bi translated">数据库信息</h2><p id="2f36" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">第一个按钮显示了数据库的概况。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/e8499d5c2cd20a92091550327340dfa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*_88pTVDNJtEhaEyDPbCrhw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="0845" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦您向它添加了一些数据，它应该显示节点及其关系，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/bc269f7eb3000124f3dcecf63baad86d.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*KsJ3S9LR_gAISxCVVhyytA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="8735" class="nt nc it bd nd nu nv dn nh nw nx dp nl lh ny nz nn ll oa ob np lp oc od nr oe bi translated">最喜欢的剧本</h2><p id="a1c0" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">“下一步”按钮包含一些现成的示例脚本供您参考。脚本是指可以在输入区域执行的查询文本。任何保存的脚本也将存储在这里。您可以将所有保存的脚本导出到一个zip文件中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/ace19b34730fb5e77bc91e46058d585d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*MHePPiPYV1rJy3rHHO8b6g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="8c49" class="nt nc it bd nd nu nv dn nh nw nx dp nl lh ny nz nn ll oa ob np lp oc od nr oe bi translated">文件</h2><p id="df25" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">如果您曾经迷路，不知道如何继续，强烈建议您查看文档。其中一些是示例脚本，您可以在其中作为教程运行，而一些是在线文档的外部链接。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/313d37b2cd3df759ce9a112980782eff.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*MP11Sk7zF-EGZ4s2njxtow.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="7f80" class="nt nc it bd nd nu nv dn nh nw nx dp nl lh ny nz nn ll oa ob np lp oc od nr oe bi translated">浏览器同步</h2><p id="2ec8" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">此外，Neo4j还带有在线同步功能，你可以通过他们的云服务保存你的数据库。您需要登录才能使用此功能。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/fc72aa39aff5745fc106e3c1407e11f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*skskIYMo6BVELrRhGcT82g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="8458" class="nt nc it bd nd nu nv dn nh nw nx dp nl lh ny nz nn ll oa ob np lp oc od nr oe bi translated">浏览器设置</h2><p id="34c8" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">您可以通过<strong class="la iu">浏览器设置</strong>按钮根据自己的喜好修改配置。这包括用户界面以及开始时要执行的代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/be73ce4b42d14532445ff73c4ead434f.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*Cj-3CaPhEqZutF2OU3d21g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="ee77" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">3.密码—图形查询语言</h1><p id="4228" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">Cypher用于从Neo4j中查询数据。它是一种高度优化的查询语言，能够理解每个节点之间存储的连接。它与通常的SQL查询有很大的不同，因为在图形数据库中不存在表的概念(查询数据库时不再有连接噩梦)。</p><p id="4cfc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">大多数情况下，您会用到以下子句:</p><ul class=""><li id="f1e3" class="mc md it la b lb lc le lf lh me ll mf lp mg lt mh mi mj mk bi translated">比赛</li><li id="c83c" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated">创造</li><li id="1398" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated">合并</li></ul><h2 id="c336" class="nt nc it bd nd nu nv dn nh nw nx dp nl lh ny nz nn ll oa ob np lp oc od nr oe bi translated">比赛</h2><p id="b0c4" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated"><code class="fe ml mm mn mo b">MATCH</code>子句用于读取数据。你可以把它想象成SQL中的<code class="fe ml mm mn mo b">SELECT</code>子句。它描述了图形数据的模式，Neo4j将使用该模式来检索与该模式匹配的所有路径。以下示例说明了从现有数据库中获取所有数据的查询。为了获取数据，您需要显式指定<code class="fe ml mm mn mo b">RETURN</code>子句。</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="9f78" class="nt nc it mo b gy oo op l oq or">MATCH (n) RETURN (n)</span></pre><p id="1d4f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Neo4j根据您的需求为我们提供了四种不同的最终结果:</p><ul class=""><li id="df10" class="mc md it la b lb lc le lf lh me ll mf lp mg lt mh mi mj mk bi translated">图表</li><li id="b2a8" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated">桌子</li><li id="b520" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated">文本</li><li id="ffd5" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated">密码</li></ul><p id="187e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">图形显示了节点之间的可视化以及它们之间的关系。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/ff8e6453acc8060eb1b510423524be84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hmZJ-92j-uEMdVC7gToOoA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="d47e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">表在表中显示每个节点的信息，如标签和属性。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/76894b516f81f55304b418618d4985fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JWnajBEvY8tefKuP9Spo3A.png"/></div></div></figure><p id="c0b7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">另一方面，文本显示整个查询输出，就像您在查询SQL数据库时看到的一样。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/12709337754b150a5bf10244143d3b96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*Uxl6D2LDlj4idJvn-d1sEg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="b3da" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您通过代码进行查询，代码会为您提供响应信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/a046ed37263545d4e7ce3515ab3cc31d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hF-sPqqJexRuvHOl_tHsMw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="0d9d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以把它限制在一个特定的模式。例如，要返回数据库中的所有电影:</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="3cd9" class="nt nc it mo b gy oo op l oq or">MATCH (movie:Movie)<br/>RETURN movie.title</span></pre><p id="1cf8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，它还经常与<code class="fe ml mm mn mo b">WHERE</code>子句成对出现，因为<code class="fe ml mm mn mo b">MATCH</code>子句只描述结构，而<code class="fe ml mm mn mo b">WHERE</code>子句决定查询的内容。让我们看看下面这个例子，它找到了由一个叫<code class="fe ml mm mn mo b">Steven Spielberg</code>的导演执导的所有电影。</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="b474" class="nt nc it mo b gy oo op l oq or">MATCH (director:Person)-[:DIRECTED]-&gt;(movie)<br/>WHERE director.name = "Steven Spielberg"<br/>RETURN movie.title</span></pre><p id="a5af" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面给出的例子是基于一个传出的关系。在引入关系中，箭头的方向将反转。例如，获得所有在一部名为<code class="fe ml mm mn mo b">Wandering Earth</code>的电影中表演过的演员。</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="e727" class="nt nc it mo b gy oo op l oq or">MATCH (m:Movie { title: 'Wandering Earth' })&lt;-[:ACTED_IN]-(actor)<br/>RETURN actor.name</span></pre><p id="9d4e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过管道符号匹配多个关系，如下所示:</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="31e5" class="nt nc it mo b gy oo op l oq or">MATCH (m:Movie { title: 'Wandering Earth' })&lt;-[:ACTED_IN|:DIRECTED]-(person)<br/>RETURN person.name</span></pre><p id="cb22" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">返回所有出演或执导过一部名为<code class="fe ml mm mn mo b">Wandering Earth</code>的电影的名字。</p><h2 id="29b7" class="nt nc it bd nd nu nv dn nh nw nx dp nl lh ny nz nn ll oa ob np lp oc od nr oe bi translated">创造</h2><p id="d24c" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated"><code class="fe ml mm mn mo b">CREATE</code>子句主要用于创建数据，就像SQL中的<code class="fe ml mm mn mo b">INSERT</code>子句一样。您需要指定命名节点及其与内联属性的关系。您可以很容易地创建一个新节点来表示一个<code class="fe ml mm mn mo b">PERSON</code>标签，如下所示:</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="0545" class="nt nc it mo b gy oo op l oq or">CREATE (n:Person)</span></pre><p id="128a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一个节点可以有零个或多个标签。下面的查询创建了一个带有两个标签的节点(<code class="fe ml mm mn mo b">Person</code>和<code class="fe ml mm mn mo b">Malaysian</code>)。</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="9423" class="nt nc it mo b gy oo op l oq or">CREATE (n:Person:Malaysian)</span></pre><p id="bf7c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">节点也可以有自己的属性。您可以使用字典样式的语法创建同时具有标签和属性的节点:</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="87ae" class="nt nc it mo b gy oo op l oq or">CREATE (n:Person { name: 'Wai Foong', title: 'AI Engineer' })</span></pre><p id="905b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以通过<code class="fe ml mm mn mo b">RETURN</code>子句查询并返回新创建的数据。以下示例将返回一行数据<code class="fe ml mm mn mo b">AI Engineer</code>。</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="caea" class="nt nc it mo b gy oo op l oq or">CREATE (n:Person { name: 'Wai Foong', title: 'AI Engineer' })<br/>RETURN n.title</span></pre><p id="a8a2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">可以通过以下语法创建节点之间的关系，其中A和B表示节点。</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="5966" class="nt nc it mo b gy oo op l oq or">A-[:RELTYPE]-&gt;B</span></pre><p id="c058" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要创建新的节点和关系，可以按如下方式指定:</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="325a" class="nt nc it mo b gy oo op l oq or">CREATE (a:Person {name:"A"})-[:IS_FRIEND_OF]-&gt;(b:Person {name:"B"})</span></pre><p id="c358" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您已经有了现有的节点，并且想要在它们之间创建连接，您需要首先通过<code class="fe ml mm mn mo b">MATCH</code>子句获得节点。</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="306b" class="nt nc it mo b gy oo op l oq or">MATCH (a:Person),(b:Person)<br/>WHERE a.name = 'A' AND b.name = 'B'<br/>CREATE (a)-[:IS_FRIEND_OF]-&gt;(b)</span></pre><h2 id="e74b" class="nt nc it bd nd nu nv dn nh nw nx dp nl lh ny nz nn ll oa ob np lp oc od nr oe bi translated">合并</h2><p id="f234" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">与<code class="fe ml mm mn mo b">CREATE</code>子句不同，<code class="fe ml mm mn mo b">MERGE </code>子句将在创建新数据之前首先确定图形中是否存在模式。您可以将它看作是<code class="fe ml mm mn mo b">MATCH</code>和<code class="fe ml mm mn mo b">CREATE</code>的组合，它要么基于模式匹配现有数据，要么从中创建新数据。以下示例将创建一个新节点，因为并非所有属性都与任何现有节点匹配(与我们之前创建的节点相比，有一个额外的属性调用年龄)。</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="6e1f" class="nt nc it mo b gy oo op l oq or">MERGE (n:Person { name: 'Wai Foong', title: 'AI Engineer', age: 28})<br/>RETURN n</span></pre><p id="8e42" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以将MERGE子句与两个附加子子句结合起来:</p><ul class=""><li id="d839" class="mc md it la b lb lc le lf lh me ll mf lp mg lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">ON_CREATE</code> —未找到匹配项且创建了新节点时要执行的操作</li><li id="0f04" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">ON_MATCH</code> —发现匹配时要执行的操作</li></ul><p id="9740" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下示例创建了一个具有<code class="fe ml mm mn mo b">name</code>和<code class="fe ml mm mn mo b">created</code>属性的新<code class="fe ml mm mn mo b">Person</code>节点。在创建时，创建的属性将被设置为当前时间戳。</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="7833" class="nt nc it mo b gy oo op l oq or">MERGE (n:Person { name: 'Wai Foong' })<br/>ON CREATE SET n.updatetime = timestamp()<br/>RETURN n.name, n.updatetime</span></pre><p id="68df" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">另一方面，当且仅当找到匹配时，下面的示例设置<code class="fe ml mm mn mo b">updatetime</code>属性。</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="38a9" class="nt nc it mo b gy oo op l oq or">MERGE (n:Person { name: 'Wai Foong' })<br/>ON MATCH SET n.updatetime = timestamp()<br/>RETURN n.name, n.updatetime</span></pre><p id="75dc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以组合这两个子子句，并根据是找到匹配项还是创建新节点来设置属性。</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="2720" class="nt nc it mo b gy oo op l oq or">MERGE (n:Person { name: 'Wai Foong' })<br/>ON CREATE SET n.created = timestamp()<br/>ON MATCH SET n.found = TRUE<br/>RETURN n.name, n.created, n.found</span></pre><p id="1ccd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当使用<code class="fe ml mm mn mo b">MERGE</code>子句时，记住<a class="ae lu" href="https://neo4j.com/developer/kb/understanding-how-merge-works/" rel="noopener ugc nofollow" target="_blank">以下几点</a>:</p><ul class=""><li id="25ec" class="mc md it la b lb lc le lf lh me ll mf lp mg lt mh mi mj mk bi translated">没有绑定变量的<code class="fe ml mm mn mo b">MERGE</code>可以创建重复的元素。</li><li id="0b0e" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated">带有绑定变量的<code class="fe ml mm mn mo b">MERGE</code>重用现有的图形元素。</li><li id="a723" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">MERGE</code>为不同的用例使用绑定和未绑定变量的组合。</li><li id="6e07" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated">请记住，也将创建未绑定的关系。</li><li id="b247" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated">根据<code class="fe ml mm mn mo b">MERGE</code>行为使用<code class="fe ml mm mn mo b">MERGE</code>到<code class="fe ml mm mn mo b">SET</code>属性后的<code class="fe ml mm mn mo b">ON MATCH</code>和<code class="fe ml mm mn mo b">ON CREATE</code>。</li><li id="a65d" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated"><code class="fe ml mm mn mo b">MERGE</code>创建模式时，获取模式中节点和关系的锁。</li><li id="f322" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt mh mi mj mk bi translated">出于性能原因，强烈建议在使用<code class="fe ml mm mn mo b">MERGE</code>时，在标签或属性上创建一个<a class="ae lu" href="https://neo4j.com/docs/cypher-manual/4.1/administration/indexes-for-search-performance/" rel="noopener ugc nofollow" target="_blank">模式索引</a>。</li></ul><h2 id="e899" class="nt nc it bd nd nu nv dn nh nw nx dp nl lh ny nz nn ll oa ob np lp oc od nr oe bi translated">帮助</h2><p id="cd34" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">您可以利用help命令显示特定条款的更多信息。例如，执行以下命令以了解有关match子句的更多信息:</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="b9b1" class="nt nc it mo b gy oo op l oq or">:help match</span></pre><p id="6192" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您应该会看到以下界面:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/8339008c233b6479290b62860aea7c71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oT9K5D_OpTnzN2MQ6Dyt3w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="aa5b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您甚至可以按如下方式调用它来显示可用子句的列表:</p><pre class="kj kk kl km gt ok mo ol om aw on bi"><span id="a2d7" class="nt nc it mo b gy oo op l oq or">:help cypher</span></pre><p id="cd2b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下界面将显示在您的Neo4j浏览器上。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/40fdd28ca30ecc8cdd3a16751d9faef9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-dn0LlJBdpJuwFxxc3OFPg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="b5ca" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">4.结论</h1><p id="e47b" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">让我们回顾一下今天所学的内容。</p><p id="193a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们从简单解释图形数据库及其背后的概念开始。</p><p id="3823" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，我们继续安装OpenJDK 11并下载主要的Neo4j文件。我们将它提取到一个文件夹中，并作为控制台应用程序或后台服务正常运行。</p><p id="c923" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">完成后，我们在浏览器中访问Neo4j浏览器控制台。我们了解了用户界面、配置以及一些内置文档。</p><p id="3856" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，我们使用了Cypher，Neo4j中使用的图形查询语言。我们使用<code class="fe ml mm mn mo b">MATCH</code>、<code class="fe ml mm mn mo b">CREATE</code>和<code class="fe ml mm mn mo b">MERGE</code>子句测试了对现有数据库的读写数据。</p><p id="7d44" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢你阅读这篇文章。希望在下一篇文章中再见到你！</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="6834" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">参考</h1><ol class=""><li id="d289" class="mc md it la b lb of le og lh ph ll pi lp pj lt pk mi mj mk bi translated"><a class="ae lu" href="https://neo4j.com/" rel="noopener ugc nofollow" target="_blank"> Neo4j图形平台</a></li><li id="d3b4" class="mc md it la b lb mp le mq lh mr ll ms lp mt lt pk mi mj mk bi translated"><a class="ae lu" href="https://adoptopenjdk.net/releases.html?variant=openjdk8&amp;jvmVariant=hotspot#x64_win" rel="noopener ugc nofollow" target="_blank"> AdoptOpenJDK最新发布</a></li></ol></div></div>    
</body>
</html>