<html>
<head>
<title>Alternatives to Using Globals in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Python中使用全局变量的替代方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/alternatives-to-using-globals-in-python-a3b2a7d5411b?source=collection_archive---------0-----------------------#2019-12-13">https://betterprogramming.pub/alternatives-to-using-globals-in-python-a3b2a7d5411b?source=collection_archive---------0-----------------------#2019-12-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="1213" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">什么时候使用它们，什么时候放下它们</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/f9d552b82d766898860dd73e4ef5c8fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*egspWX2qVqxFP92wB-h5Eg.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@dearferdo?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Fernando @dearferdo </a>在<a class="ae kz" href="https://unsplash.com/s/photos/globe?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="1c1b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我绝不是Python方面的专家，但是经过几年或多或少专门用它开发(JavaScript，我还是爱你！)，我已经开始觉得可以写这个了。</p><p id="25eb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这篇短文是关于全局变量以及如何使用(或不使用)它们的。但最重要的是，它是关于它们的替代品——一些通常被忽略的东西。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="fd40" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">什么是全局？</h1><p id="d406" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">全局变量就是一个可以从程序中任何地方访问的变量。考虑这些例子:</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="0712" class="nf me iu nb b gz ng nh l ni nj"><strong class="nb iv">INIT = False</strong></span><span id="9672" class="nf me iu nb b gz nk nh l ni nj">def run():<br/>    <strong class="nb iv">global INIT</strong><br/>    print('Will Run')<br/>    if <strong class="nb iv">INIT</strong>:<br/>        print( 'Already initiated' )<br/>    if not <strong class="nb iv">INIT</strong>:<br/>        init()</span><span id="0183" class="nf me iu nb b gz nk nh l ni nj">def init():<br/>    <strong class="nb iv">global INIT</strong><br/>    <strong class="nb iv">INIT</strong> = True<br/>    print('Will Init')</span><span id="8e51" class="nf me iu nb b gz nk nh l ni nj">run()<br/>run()</span><span id="f9a1" class="nf me iu nb b gz nk nh l ni nj"><strong class="nb iv">OUTPUT:</strong></span><span id="8fb2" class="nf me iu nb b gz nk nh l ni nj"><em class="nl">Will Run<br/>Will Init<br/>Will Run<br/>Already initiated</em></span></pre><p id="1395" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe nm nn no nb b">run()</code>和<code class="fe nm nn no nb b">init()</code>函数都可以通过<code class="fe nm nn no nb b">global</code> <strong class="lc iv"> </strong>关键字访问<code class="fe nm nn no nb b">INIT</code>变量。这允许以下逻辑:运行<code class="fe nm nn no nb b">init()</code>一次，将<code class="fe nm nn no nb b">INIT</code>变量设置为<code class="fe nm nn no nb b">True</code>，然后检查它是否已经运行(通过<code class="fe nm nn no nb b">INIT</code>变量)。如果有，就不要再运行了。</p><p id="e0b4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">有很多例子表明，全球化似乎是一个完美的组合。考虑另一个例子——我们只需要在各种函数中引用一种颜色或一些其他变量:</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="6cd1" class="nf me iu nb b gz ng nh l ni nj">GUI_THEME = 'BabyBlue'<br/>GUI_FONT = 'Lobster'</span><span id="29cc" class="nf me iu nb b gz nk nh l ni nj">def makeGUI():<br/>    <strong class="nb iv">global GUI_THEME,GUI_FONT</strong><br/>    print('making GUI in: ' + GUI_THEME)<br/>    print('with FONT: ' + GUI_FONT)</span><span id="a684" class="nf me iu nb b gz nk nh l ni nj">def changeTheme():<br/>    <strong class="nb iv">global GUI_THEME</strong><br/>    GUI_THEME = 'AwesomeOrange'</span><span id="13c2" class="nf me iu nb b gz nk nh l ni nj">def changeFont():<br/>    <strong class="nb iv">global GUI_FONT</strong><br/>    GUI_FONT = 'Merryweather'</span><span id="b017" class="nf me iu nb b gz nk nh l ni nj">makeGUI()<br/>changeTheme()<br/>changeFont()<br/>makeGUI()</span><span id="a5fe" class="nf me iu nb b gz nk nh l ni nj"><strong class="nb iv">OUTPUT:</strong></span><span id="92e9" class="nf me iu nb b gz nk nh l ni nj"><em class="nl">makig GUI in: BabyBlue<br/>with FONT: Lobster<br/>makig GUI in: AwesomeOrange<br/>with FONT: Merryweather</em></span></pre><p id="adfd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">另请注意，即使没有将变量声明为全局变量，您仍然可以读取它。所以在这种情况下，它可以被视为一个常数:</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="aafe" class="nf me iu nb b gz ng nh l ni nj">GUI_THEME = 'constantGrey'</span><span id="7d5f" class="nf me iu nb b gz nk nh l ni nj">def makeGUI():<br/>    print('making GUI in: ' + GUI_THEME)<br/>    # Try to change it:</span><span id="22a3" class="nf me iu nb b gz nk nh l ni nj">def changeGUI():<br/>    GUI_THEME = 'variableGrey' <strong class="nb iv"># Local variable</strong><br/>    print('making GUI in: ' + GUI_THEME)</span><span id="b7e1" class="nf me iu nb b gz nk nh l ni nj">makeGUI()<br/>changeGUI()<br/>makeGUI()</span><span id="10a3" class="nf me iu nb b gz nk nh l ni nj">making GUI in: constantGrey<br/>making GUI in: variableGrey<br/>making GUI in: constantGrey</span><span id="3996" class="nf me iu nb b gz nk nh l ni nj"><br/>But it fails when trying to change it, note how the second makeGUI() is still using the original theme and the changeGUI was only valid locally. </span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><pre class="na nb nc nd aw ne bi"><span id="7207" class="nf me iu nb b gz np nq nr ns nt nh l ni nj">👋👋 Hi there 👋👋 all my content is free for Medium subscribers, if you are already a subscriber I wanted to say thank you ! 🎉 If not and you are considering subscribing, you can use my membership referral link, you will be supporting this and other high quality content, Thank you !</span><span id="cb7e" class="nf me iu nb b gz nk nh l ni nj"><strong class="nb iv">⭐️⭐ </strong><a class="ae kz" href="https://k3no.medium.com/membership" rel="noopener"><strong class="nb iv">Subscribe to Medium !</strong></a><strong class="nb iv"> ⭐️⭐️</strong></span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="b44f" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">为什么不用它们呢？</h1><p id="dbb7" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">如果有人叫你不要使用全局变量，而你没有得到任何解释(或者一个令人费解的答案)，这一节是为你准备的。以谷歌的风格指南为例:</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="01e1" class="nf me iu nb b gz ng nh l ni nj"><strong class="nb iv">2.5 Global variables:</strong><br/>Avoid global variables.</span><span id="6691" class="nf me iu nb b gz nk nh l ni nj"><strong class="nb iv">WHY ?:</strong></span><span id="2c02" class="nf me iu nb b gz nk nh l ni nj">Has the potential to change module behavior during the import, because assignments to global variables are done when the module is first imported.</span><span id="c639" class="nf me iu nb b gz nk nh l ni nj">🤔🤔🤔</span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="e7d5" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">何时使用它们</h1><p id="ea53" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">我往前跳了一点，因为之前的风格指南接着说:</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="fd6f" class="nf me iu nb b gz ng nh l ni nj">While they are technically variables, module-level constants are permitted and encouraged.</span><span id="1232" class="nf me iu nb b gz nk nh l ni nj">External access must be done through public module-level functions</span></pre><p id="6557" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">困难在于:在构建原型时，除了使用其他库中的模块之外，我通常不会一开始就编写模块。因此，在启动程序或脚本时使用全局变量似乎非常好(甚至更方便)。</p><p id="1d61" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然后随着它变得更加复杂，你可以把它们分成内部常量和项目范围的变量…但是我们正在前进。让我们首先举例说明为什么在一个模块中使用全局变量可能是一个坏主意——这只是一种<a class="ae kz" href="https://stackoverflow.com/questions/16258514/using-global-variable-has-the-potential-to-change-module-behavior-during-the-imp?rq=1" rel="noopener ugc nofollow" target="_blank">解释</a>:</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="ea44" class="nf me iu nb b gz ng nh l ni nj"><em class="nl">FILE: module_01.py</em></span><span id="78b8" class="nf me iu nb b gz nk nh l ni nj">GLOBAL_MODULE_VAR = <strong class="nb iv">False</strong></span><span id="9499" class="nf me iu nb b gz nk nh l ni nj">def changeGlobal(): #<em class="nl">&lt;&lt; Public access</em><br/>    global GLOBAL_MODULE_VAR<br/>    GLOBAL_MODULE_VAR = True</span></pre><p id="9dc0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在代码的其他地方:</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="9b90" class="nf me iu nb b gz ng nh l ni nj">import module_01 as M1</span><span id="9217" class="nf me iu nb b gz nk nh l ni nj">print(M1.GLOBAL_MODULE_VAR)<br/># <strong class="nb iv">False</strong>, all good here.</span><span id="a104" class="nf me iu nb b gz nk nh l ni nj">M1.changeGlobal() <em class="nl">#&lt;&lt; Public access</em><br/>print(M1.<strong class="nb iv">GLOBAL_MODULE_VAR)<br/># True</strong>, still good, but...</span><span id="a833" class="nf me iu nb b gz nk nh l ni nj">import module_01 as M2</span><span id="5daa" class="nf me iu nb b gz nk nh l ni nj">print(M2.GLOBAL_MODULE_VAR)<br/><strong class="nb iv"># Still True, Unless you wanted False !, and who is keeping track of these changes ?</strong></span><span id="c5c4" class="nf me iu nb b gz nk nh l ni nj">M1.GLOBAL_MODULE_VAR = False<br/># Direct assignment, works, but can get messy.</span></pre><p id="62b2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">请注意，如果这是您想要的，这种行为没有什么错，但最有可能的是，您希望您的全局变量(更重要的是，您的状态)是一个只有少数函数可以触及的引用，而不是一些更可变和开放的东西。</p><p id="65d1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">还有一种情况是根据惯例组织你的代码，使其更具可读性。例如，直接赋值使代码难以理解。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="0afc" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">我们应该用什么来代替呢？</h1><h2 id="2689" class="nf me iu bd mf nu nv dn mj nw nx dp mn lj ny nz mp ln oa ob mr lr oc od mt oe bi translated">类别:</h2><p id="3ace" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">OOP方法:这是第一个类形式的例子。</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="c62a" class="nf me iu nb b gz ng nh l ni nj"><strong class="nb iv"># Create class</strong><br/>class Init:<br/>    def __init__(self, init_: bool):<br/>        self.init = init_</span><span id="ec98" class="nf me iu nb b gz nk nh l ni nj"><strong class="nb iv"># Create Instance of the class</strong><br/>init_ = Init(False)</span><span id="9ca3" class="nf me iu nb b gz nk nh l ni nj">def run():<br/>    print('Will Run')</span><span id="408a" class="nf me iu nb b gz nk nh l ni nj">    if init_.init:<br/>        print( 'Already initiated' )<br/>    if not init_.init:<br/>        init()</span><span id="4688" class="nf me iu nb b gz nk nh l ni nj">def init():<br/>    init_.init = True<br/>    print('Will Init')</span><span id="a5c2" class="nf me iu nb b gz nk nh l ni nj">run()<br/>run()</span><span id="4f7b" class="nf me iu nb b gz nk nh l ni nj"><br/><strong class="nb iv">Output:</strong></span><span id="5c0d" class="nf me iu nb b gz nk nh l ni nj">Will Run<br/>Will Init<br/>Will Run<br/>Already initiated</span></pre><p id="da9e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">第二个例子是:</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="c269" class="nf me iu nb b gz ng nh l ni nj"><strong class="nb iv">class GUI:<br/>    def __init__(self):<br/>        self.GUI_THEME = 'BabyBlue'<br/>        self.GUI_FONT = 'Lobster'</strong></span><span id="f71e" class="nf me iu nb b gz nk nh l ni nj"><strong class="nb iv">GUI_ = GUI()</strong> # Can also use initialization arguments</span><span id="fb0e" class="nf me iu nb b gz nk nh l ni nj">def makeGUI():<br/>    print('making GUI in: ' + GUI_.GUI_THEME)<br/>    print('with FONT: ' + GUI_.GUI_FONT)</span><span id="1a88" class="nf me iu nb b gz nk nh l ni nj">def changeTheme():<br/><strong class="nb iv">    GUI_.GUI_THEME = 'AwesomeOrange'</strong></span><span id="d97f" class="nf me iu nb b gz nk nh l ni nj">def changeFont():<br/><strong class="nb iv">    GUI_.GUI_FONT = 'Merryweather'</strong></span><span id="2a9f" class="nf me iu nb b gz nk nh l ni nj">makeGUI()<br/>changeTheme()<br/>changeFont()<br/>makeGUI()</span><span id="1323" class="nf me iu nb b gz nk nh l ni nj"><strong class="nb iv">OUTPUT:</strong></span><span id="8eb1" class="nf me iu nb b gz nk nh l ni nj"><em class="nl">making GUI in: BabyBlue<br/>with FONT: Lobster<br/>making GUI in: AwesomeOrange<br/>with FONT: Merryweather</em></span></pre><p id="5787" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这里的缺点是有一些代码和复杂性开销，但这似乎是一个流行的选择。</p><h2 id="ed55" class="nf me iu bd mf nu nv dn mj nw nx dp mn lj ny nz mp ln oa ob mr lr oc od mt oe bi translated">全局变量(字典、列表和集合):</h2><p id="27d7" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">(点击了解更多关于可变<a class="ae kz" href="https://medium.com/@meghamohan/mutable-and-immutable-side-of-python-c2145cf72747" rel="noopener">的信息。)</a></p><p id="3e9c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">简而言之，<em class="nl">可变变量</em>的行为就像没有global关键字的全局变量——需要注意的是，它们需要包装在一个具有不同可读性的列表、集合或字典中。</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="05c2" class="nf me iu nb b gz ng nh l ni nj"><strong class="nb iv">_G = {'INIT': False }</strong><br/># Mutable Dict</span><span id="1fc9" class="nf me iu nb b gz nk nh l ni nj">def run():<br/>    print('Will Run')<br/>    if _G['INIT']:<br/>        print("Already initiated")<br/>    else:<br/>        init()</span><span id="9580" class="nf me iu nb b gz nk nh l ni nj">def init():<br/><strong class="nb iv">    _G['INIT'] = True</strong><br/>    print('Will Init')</span><span id="286a" class="nf me iu nb b gz nk nh l ni nj">run()<br/>run()<br/>print(_G)</span><span id="9c80" class="nf me iu nb b gz nk nh l ni nj"><strong class="nb iv">OUTPUT:</strong></span><span id="988b" class="nf me iu nb b gz nk nh l ni nj">Will Run<br/>Will Init<br/>Will Run<br/>Already initiated<br/><strong class="nb iv">{'INIT': True}</strong></span></pre><p id="c3bd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您也可以使用列表:</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="33f2" class="nf me iu nb b gz ng nh l ni nj"><strong class="nb iv">_INIT = [False]</strong><br/># Mutable List:</span><span id="6ebd" class="nf me iu nb b gz nk nh l ni nj">def run():<br/>    print('Will Run')<br/><strong class="nb iv">    if _INIT[0]:</strong><br/>        print("Already initiated")<br/>    else:<br/>        init()</span><span id="b1d3" class="nf me iu nb b gz nk nh l ni nj">def init():<br/><strong class="nb iv">    _INIT[0] = True</strong><br/>    print('Will Init')</span><span id="e645" class="nf me iu nb b gz nk nh l ni nj">run()<br/>run()<br/><strong class="nb iv">print(_INIT)</strong></span><span id="e176" class="nf me iu nb b gz nk nh l ni nj"><strong class="nb iv">OUTPUT:</strong></span><span id="c0dd" class="nf me iu nb b gz nk nh l ni nj">Will Run<br/>Will Init<br/>Will Run<br/>Already initiated<br/><strong class="nb iv">[True]</strong></span></pre><p id="8dbf" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">你甚至可以用一套。集合是无序的，所以你需要想出额外的逻辑。</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="09af" class="nf me iu nb b gz ng nh l ni nj"><strong class="nb iv">_INITSET = {'notInititated'}</strong><br/># MUTABLE SET</span><span id="8eb5" class="nf me iu nb b gz nk nh l ni nj">def run():<br/>    print('Will Run')<br/><strong class="nb iv">    if ("Inititated" in _INITSET):</strong><br/>        print("Already initiated")<br/>    else:<br/>        init()</span><span id="e7ed" class="nf me iu nb b gz nk nh l ni nj">def init():<br/>    <strong class="nb iv">_INITSET.remove("notInititated")</strong><br/><strong class="nb iv">    _INITSET.add("Inititated")</strong><br/>    print('Will Init')</span><span id="08d8" class="nf me iu nb b gz nk nh l ni nj">run()<br/>run()<br/>print(_INITSET)</span><span id="46c0" class="nf me iu nb b gz nk nh l ni nj"><strong class="nb iv">OUTPUT:</strong></span><span id="0754" class="nf me iu nb b gz nk nh l ni nj">Will Run<br/>Will Init<br/>Will Run<br/>Already initiated<br/><strong class="nb iv">{'Inititated'}</strong></span></pre><p id="1278" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然而，字典似乎是可读性更强、最划算的选择:</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="32ee" class="nf me iu nb b gz ng nh l ni nj"><strong class="nb iv">_GUI = {'THEME_COLOR': 'BabyBlue', 'THEME_FONT': 'Lobster'}</strong></span><span id="54b0" class="nf me iu nb b gz nk nh l ni nj">def makeGUI():<br/>    print('makig GUI in: ' + <strong class="nb iv">_GUI['THEME_COLOR']</strong>)<br/>    print('with FONT: ' + <strong class="nb iv">_GUI['THEME_FONT']</strong>)</span><span id="f7f6" class="nf me iu nb b gz nk nh l ni nj">def changeThemeColor():<br/><strong class="nb iv">     _GUI['THEME_COLOR'] = 'AwesomeOrange'</strong></span><span id="d405" class="nf me iu nb b gz nk nh l ni nj">def changeThemeFont():<br/><strong class="nb iv">    _GUI['THEME_FONT'] = 'Merryweather'</strong></span><span id="dc12" class="nf me iu nb b gz nk nh l ni nj">makeGUI()<br/>changeThemeColor()<br/>changeThemeFont()<br/>makeGUI()</span><span id="5221" class="nf me iu nb b gz nk nh l ni nj"><strong class="nb iv">OUTPUT:</strong></span><span id="9791" class="nf me iu nb b gz nk nh l ni nj">makig GUI in: BabyBlue<br/>with FONT: Lobster<br/>makig GUI in: AwesomeOrange<br/>with FONT: Merryweather</span></pre><p id="e3d0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">至于使用哪种方法，类还是变量，我认为这取决于所表示的变量有多复杂。</p><p id="3b5e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果只是一个变量列表，一个可变的就可以了。如果需要做一些处理(或者你的老板要求这样做)，一个类可能会更好。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="95dd" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated"><strong class="ak">外部访问</strong></h1><p id="f7b0" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在总结之前，我们需要看看这两种方法在导入模块时是如何工作的:</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="7076" class="nf me iu nb b gz ng nh l ni nj"><em class="nl">FILE: module_02.py</em></span><span id="4061" class="nf me iu nb b gz nk nh l ni nj">class ModuleVARS:<br/>    def __init__(self, init_: bool):<br/>        self.GLOBAL_MODULE_VAR = init_</span><span id="bda5" class="nf me iu nb b gz nk nh l ni nj"><em class="nl">Add class methods to suit your needs...</em></span></pre><p id="7824" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">用法:</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="a727" class="nf me iu nb b gz ng nh l ni nj">import module_02 as M2</span><span id="05bf" class="nf me iu nb b gz nk nh l ni nj"># New Instance:</span><span id="c04f" class="nf me iu nb b gz nk nh l ni nj"><strong class="nb iv">GLOBALMODULEVARS = M2.ModuleVARS(True)</strong><br/>print(GLOBALMODULEVARS.GLOBAL_MODULE_VAR)</span><span id="20b1" class="nf me iu nb b gz nk nh l ni nj">#True</span><span id="8294" class="nf me iu nb b gz nk nh l ni nj">def changeGlobalVar():<br/>    <strong class="nb iv">GLOBALMODULEVARS.GLOBAL_MODULE_VAR = False</strong><br/>    print(GLOBALMODULEVARS.GLOBAL_MODULE_VAR)</span><span id="a510" class="nf me iu nb b gz nk nh l ni nj">changeGlobalVar()</span><span id="1900" class="nf me iu nb b gz nk nh l ni nj">#False</span></pre><p id="0a76" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">并且使用可变的:</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="6191" class="nf me iu nb b gz ng nh l ni nj"><em class="nl">FILE: module_03.py</em></span><span id="adf5" class="nf me iu nb b gz nk nh l ni nj">_GUI = {'THEME_COLOR': 'BabyBlue', 'THEME_FONT': 'Lobster'}</span><span id="271f" class="nf me iu nb b gz nk nh l ni nj"><em class="nl">Add class methods to suit your needs...</em></span></pre><p id="56a2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">用法:</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="fa4d" class="nf me iu nb b gz ng nh l ni nj">import module_03 as M3</span><span id="eb3c" class="nf me iu nb b gz nk nh l ni nj">print(<strong class="nb iv">M3._GUI['THEME_COLOR']</strong>)<br/>print(<strong class="nb iv">M3._GUI['THEME_FONT']</strong>)</span><span id="0a31" class="nf me iu nb b gz nk nh l ni nj">#BabyBlue<br/>#Lobster</span><span id="41e7" class="nf me iu nb b gz nk nh l ni nj">def changeTheme():<br/>    M3._GUI['THEME_COLOR'] = 'AwesomeOrange'<br/>    print(M3._GUI['THEME_COLOR'])</span><span id="10cc" class="nf me iu nb b gz nk nh l ni nj">def changeFont():<br/>    M3._GUI['THEME_FONT'] = 'Merryweather'<br/>    print(M3._GUI['THEME_FONT'])</span><span id="19b6" class="nf me iu nb b gz nk nh l ni nj">changeTheme() #AwesomeOrange<br/>changeFont() #Merry-weather</span></pre><p id="76b3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">同样，使用什么取决于代码试图模拟的数据结构。如果它是一个引用，mutables可能会更好，但是如果它有一些内部逻辑，一个类可能会更适合。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h2 id="ee1e" class="nf me iu bd mf nu nv dn mj nw nx dp mn lj ny nz mp ln oa ob mr lr oc od mt oe bi translated"><strong class="ak">结论</strong></h2><p id="5b76" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在代码中有很多方法可以做同样的事情，Python也不例外。有些人比其他人更适合，但通过了解几个路径，你可以选择一个有意义的。</p><p id="c3c7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在程序或脚本中使用可变引用可以通过几种方式实现。这里我们看到了全局变量和类。和可变的，scand每一个都有它的优点和缺点，可能更适合某些项目。</p><p id="0a55" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在程序的发展过程中，您可能会在不同的时间使用这三种方法，或者为了团队的一致性和/或可读性，选择一种方法。</p><p id="efdd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">TL；dr:用字典(参考)或者类(参考+逻辑)代替。搭建原型时使用全局变量。</p><p id="c664" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">感谢阅读。</p></div></div>    
</body>
</html>