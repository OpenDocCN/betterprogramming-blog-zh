<html>
<head>
<title>4 Extremely Useful Features In Next.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Next.js中4个非常有用的特性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/4-extremely-useful-features-in-nextjs-af93fa1ea06f?source=collection_archive---------13-----------------------#2022-03-07">https://betterprogramming.pub/4-extremely-useful-features-in-nextjs-af93fa1ea06f?source=collection_archive---------13-----------------------#2022-03-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5d43" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">包括改善形象，搜索引擎优化，编译器，中间件，以帮助您更好地工作</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/001944a573e15e37c1038beeefe7a5db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Iv-e0XMEEl8HP6uh"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">詹姆斯·怀斯曼在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="a73a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">概观</h1><p id="e5a1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最好的React框架是什么？毫无疑问，我认为是Next.js，它内置了优秀的特性，如SSG和SSR、增量静态生成、快速刷新、自动polyfill、基于文件系统的路由、高效的代码拆分和打包、SWC快速编译等</p><p id="6c19" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">有几个功能设计我认为最适合项目工程，对性能优化和用户体验有显著效果。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="4e0a" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">模糊数据Url</h1><p id="d91e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">当你的网站上加载了很多图片时，它们是空白的，还是你添加一个加载的更好。</p><p id="e558" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然而，更好的做法是使用<code class="fe ne nf ng nh b">next/image</code>，它将在图像成功加载之前设置一个占位符图像。以下是官网提供的在线示例:</p><ul class=""><li id="95b2" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><a class="ae ky" href="https://image-component.nextjs.gallery/placeholder" rel="noopener ugc nofollow" target="_blank">演示默认</a> <code class="fe ne nf ng nh b"><a class="ae ky" href="https://image-component.nextjs.gallery/placeholder" rel="noopener ugc nofollow" target="_blank">blurDataURL</a></code> <a class="ae ky" href="https://image-component.nextjs.gallery/placeholder" rel="noopener ugc nofollow" target="_blank">道具</a></li><li id="8294" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://image-component.nextjs.gallery/shimmer" rel="noopener ugc nofollow" target="_blank">用</a> <code class="fe ne nf ng nh b"><a class="ae ky" href="https://image-component.nextjs.gallery/shimmer" rel="noopener ugc nofollow" target="_blank">blurDataURL</a></code> <a class="ae ky" href="https://image-component.nextjs.gallery/shimmer" rel="noopener ugc nofollow" target="_blank">道具</a>演示微光效果</li><li id="a8d2" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://image-component.nextjs.gallery/color" rel="noopener ugc nofollow" target="_blank">用</a> <code class="fe ne nf ng nh b"><a class="ae ky" href="https://image-component.nextjs.gallery/color" rel="noopener ugc nofollow" target="_blank">blurDataURL</a></code> <a class="ae ky" href="https://image-component.nextjs.gallery/color" rel="noopener ugc nofollow" target="_blank">道具</a>演示颜色效果</li></ul><p id="0b76" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">太棒了，这种闪烁的渐变效果给用户的感觉很棒，当然这也是我认为在用户体验方向做得比较好的项目之一。事实上，<code class="fe ne nf ng nh b">nextjs/image</code>还支持Webp、AVIF格式的图片和不同格式的较小尺寸的图片(特别是在移动设备上更好)</p><p id="bc3c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">而且相信我，这能有效提升用户体验！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="8996" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">Rust编译器</h1><p id="5075" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这是一个开拓性的进步。在Next.js 12版本中，默认使用<a class="ae ky" href="https://swc.rs/" rel="noopener ugc nofollow" target="_blank"> SWC </a>来编译JavaScript和类型脚本文件。而且你也不需要担心编译问题，因为Next.js有一个完美的向后兼容解决方案。</p><p id="90f9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">另外，Next.js更好的做法是，如果你的项目使用Babel，那么它将为你提供SWC的快速实现。这也意味着您的新项目将通过SWC自动编译JavaScript和TypeScript文件。</p><p id="5e7d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">另外很重要的一点是Rust编译器包含了代码压缩的功能，<a class="ae ky" href="https://swc.rs/blog/perf-swc-vs-babel" rel="noopener ugc nofollow" target="_blank">比Terser </a>快7倍。在当前阶段，rust编译器的代码压缩是可选的</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="8259" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">同时，Next.js快速刷新功能是我的最爱！你能想象当你使用一个<code class="fe ne nf ng nh b">useState</code>，修改部分代码，返回页面后又回到之前的状态时的惊喜吗？</p><p id="bc8a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在下面的代码沙箱中尝试以下操作:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nx l"/></div></figure></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="57fb" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">感知Bot的ISR (SEO)</h1><p id="3330" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">目前，当您设置<code class="fe ne nf ng nh b">fallback:true</code>时，ISR将在页面生成之前，在第一次请求特定页面时呈现回退状态页面。如果想阻止页面的渲染，可以使用<code class="fe ne nf ng nh b">fallback: ‘blocking’</code></p><p id="970f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在Next.js 12中，<a class="ae ky" href="https://nextjs.org/learn/seo/introduction-to-seo/webcrawlers" rel="noopener ugc nofollow" target="_blank">网络爬虫(如搜索机器人)</a>会自动对使用<code class="fe ne nf ng nh b">fallback: true</code>的页面进行服务器端ISR。</p><p id="b4cf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">虽然对于非crawler客户端来说，仍然会显示之前的回退状态页面，但是对于crawler客户端来说，这可以阻止它索引当前的回退页面，因为这并不是每个站长想要的结果。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="fc6b" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">中间件</h1><p id="9779" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这绝对是另一个伟大的特性，首先，中间件<strong class="lt iu"> </strong>使你能够使用代码而不是配置。这为您在Next.js中提供了充分的灵活性，因为您可以在请求完成之前运行代码。基于用户的传入请求，您可以通过重写、重定向、添加头，甚至流式传输HTML来修改响应。</p><h2 id="8389" class="nz la it bd lb oa ob dn lf oc od dp lj ma oe of ll me og oh ln mi oi oj lp ok bi translated">简单的例子</h2><ol class=""><li id="c1cb" class="ni nj it lt b lu lv lx ly ma ol me om mi on mm oo no np nq bi translated">安装最新版本的Next.js: <code class="fe ne nf ng nh b">npm install next@latest</code></li><li id="fed3" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm oo no np nq bi translated">然后，在您的<code class="fe ne nf ng nh b">/pages</code>目录下创建一个<code class="fe ne nf ng nh b">_middleware.ts</code>文件。</li><li id="d515" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm oo no np nq bi translated">最后，从<code class="fe ne nf ng nh b">_middleware.ts</code>文件中导出一个中间件函数。</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">定义一个中间件</p></figure><p id="557f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">它将在<code class="fe ne nf ng nh b">/pages</code>目录中的所有路线上运行</p><p id="8f16" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">值得一提的是，中间件可以用于共享一组页面逻辑的任何东西，包括:</p><ul class=""><li id="c489" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><a class="ae ky" href="https://github.com/vercel/examples/tree/main/edge-functions" rel="noopener ugc nofollow" target="_blank">认证</a></li><li id="97a6" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://github.com/vercel/examples/tree/main/edge-functions" rel="noopener ugc nofollow" target="_blank"> Bot保护</a></li><li id="e066" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://github.com/vercel/examples/tree/main/edge-functions" rel="noopener ugc nofollow" target="_blank">重定向和重写</a></li><li id="0df1" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://github.com/vercel/examples/tree/main/edge-functions" rel="noopener ugc nofollow" target="_blank">处理不支持的浏览器</a></li><li id="bc85" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://github.com/vercel/examples/tree/main/edge-functions" rel="noopener ugc nofollow" target="_blank">功能标志和A/B测试</a></li><li id="a845" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://github.com/vercel/examples/tree/main/edge-functions" rel="noopener ugc nofollow" target="_blank">服务器端分析</a></li><li id="988e" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://github.com/vercel/examples/tree/main/edge-functions" rel="noopener ugc nofollow" target="_blank">高级i18n路由要求</a></li><li id="2068" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://github.com/vercel/examples/tree/main/edge-functions" rel="noopener ugc nofollow" target="_blank">测井</a></li></ul><h1 id="95d6" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">参考</h1><div class="op oq gp gr or os"><a href="https://nextjs.org/docs/api-reference/next/image#blurdataurl" rel="noopener  ugc nofollow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd iu gy z fp ox fr fs oy fu fw is bi translated">next/image | Next.js</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">注意:这是图像组件和图像优化的API文档。有关功能概述和用法…</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">nextjs.org</p></div></div><div class="pb l"><div class="pc l pd pe pf pb pg ks os"/></div></div></a></div><div class="op oq gp gr or os"><a href="https://nextjs.org/blog/next-12-1?utm_source=next-site&amp;utm_medium=banner&amp;utm_campaign=next-website" rel="noopener  ugc nofollow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd iu gy z fp ox fr fs oy fu fw is bi translated">Next.js 12.1</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">我们很高兴在Next.js 12.1中发布我们最需要的特性之一:通过运行npm i…立即更新</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">nextjs.org</p></div></div><div class="pb l"><div class="ph l pd pe pf pb pg ks os"/></div></div></a></div></div></div>    
</body>
</html>