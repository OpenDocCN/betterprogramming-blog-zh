<html>
<head>
<title>Introducing DrawRoute: A Kotlin Library for Drawing Routes on Google Maps for Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">介绍DrawRoute:一个用于在Android版谷歌地图上绘制路线的Kotlin库</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/introducing-drawroute-a-kotlin-library-for-drawing-routes-on-google-maps-for-android-5e6cc99d58f6?source=collection_archive---------4-----------------------#2020-11-05">https://betterprogramming.pub/introducing-drawroute-a-kotlin-library-for-drawing-routes-on-google-maps-for-android-5e6cc99d58f6?source=collection_archive---------4-----------------------#2020-11-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="dc81" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在你的Android应用中绘制路线的简洁方式</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f53c9e07f5c3a0bb84bb4f857e3e5791.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*H5iSuwe2eG5hrRaj"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">亚历山大·斯莱特里在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的<a class="ae kv" href="https://unsplash.com/@slatts?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">照片。</a></p></figure><p id="3dc6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我很高兴分享<a class="ae kv" href="https://github.com/malikdawar/drawroute" rel="noopener ugc nofollow" target="_blank"> DrawRoute </a>，这是一个开源的路线绘制库，将用于Android 的<a class="ae kv" href="https://developers.google.com/maps/documentation/android-sdk/overview" rel="noopener ugc nofollow" target="_blank">谷歌地图API。</a></p><p id="3add" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">技术栈:Kotlin、OkHttp、RxJava、AndroidX。</em></p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="30b9" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">在潜入之前</h1><p id="9764" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">当在地图上绘制时，图书馆使用<a class="ae kv" href="https://developers.google.com/maps/documentation/directions/overview" rel="noopener ugc nofollow" target="_blank"> Google Directions API </a>获取路线信息。它不是免费的，需要你有一个启用了这个API的项目，以及一个计费帐户。</p><p id="0f54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">参见<a class="ae kv" href="https://developers.google.com/maps/documentation/directions/start" rel="noopener ugc nofollow" target="_blank">如何入门</a>。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="b4a8" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">一个新的科特林图书馆</h1><p id="c50a" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">这个库完全是用Kotlin编写的，并使用反应式编程封装了使用Google Directions API所涉及的样板代码，以获得更多的控制和精度。它还公开了一个扩展函数，一旦地图准备就绪，就可以在Google Maps对象本身上使用该函数。</p><h2 id="f895" class="mx mb iq bd mc my mz dn mg na nb dp mk lf nc nd mm lj ne nf mo ln ng nh mq ni bi translated">集成步骤</h2><p id="1bdb" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">在您的<code class="fe nj nk nl nm b">build.gradle</code>文件(项目级)中，在<code class="fe nj nk nl nm b">allProjects</code>块中添加以下内容:</p><pre class="kg kh ki kj gt nn nm no np aw nq bi"><span id="582a" class="mx mb iq nm b gy nr ns l nt nu">allprojects {<br/>    repositories {<br/>        maven { url 'https://jitpack.io' }<br/>    }<br/>}</span></pre><p id="2523" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后在您的<code class="fe nj nk nl nm b">build.gradle</code>(应用程序级)中，在依赖关系块中添加以下内容:</p><pre class="kg kh ki kj gt nn nm no np aw nq bi"><span id="e737" class="mx mb iq nm b gy nr ns l nt nu">dependencies {<br/>	implementation 'com.github.malikdawar:drawroute:1.1-rx'<br/>}</span></pre><p id="10f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦您成功集成了<a class="ae kv" href="https://developers.google.com/maps/documentation/android-sdk/overview" rel="noopener ugc nofollow" target="_blank"> Google Maps API </a>并遵循了上面的集成步骤，您就可以调用<code class="fe nj nk nl nm b">drawRouteOnMap</code>方法，该方法将在地图上绘制路线并作为Rx-Disposable返回，该方法应该用于处理已执行的订阅。</p><p id="b3e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里使用的库中还增加了一个助手<code class="fe nj nk nl nm b">moveCameraOnMap</code> <strong class="ky ir"> </strong>方法<strong class="ky ir"> </strong>在绘制路线之前对源位置进行聚焦和缩放。</p><h2 id="eeca" class="mx mb iq bd mc my mz dn mg na nb dp mk lf nc nd mm lj ne nf mo ln ng nh mq ni bi translated">订阅是什么？</h2><p id="f062" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">订阅是对Google Directions API的同步网络调用:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="5bbd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">按顺序完成上述步骤后，基于上述源位置和目的地位置绘制的路径的最终输出应如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/9fbbac4eb84fed60a5f11bbed99f45dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*EaMS8U626MP6owhxpvUC1w.jpeg"/></div></figure><h2 id="28de" class="mx mb iq bd mc my mz dn mg na nb dp mk lf nc nd mm lj ne nf mo ln ng nh mq ni bi translated"><strong class="ak">为什么用这个？</strong></h2><p id="4826" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">直接使用Google Directions API将需要添加相当多的业务逻辑来处理请求和响应。因此，您可以使用这个库，它将在顶层使用自己的预构建API，以便维护一个明确的、可读的代码结构。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="7fb2" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">结论</h1><p id="a87c" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">我很高兴与社区分享<a class="ae kv" href="https://github.com/malikdawar/drawroute" rel="noopener ugc nofollow" target="_blank">画线</a>。回购包含一个完整的文件快速启动。敬请关注更多内容！此外，任何相关的改进建议都是受欢迎的，可以在GitHub 上<a class="ae kv" href="https://github.com/malikdawar/drawroute/issues" rel="noopener ugc nofollow" target="_blank">报告。</a></p></div></div>    
</body>
</html>