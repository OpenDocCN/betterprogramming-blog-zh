<html>
<head>
<title>How To Convert All Your Medium Posts to a Gatsby Blog in 5 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在5分钟内将你所有的媒体文章转换成盖茨比的博客</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/convert-all-your-medium-posts-to-a-gatsby-blog-in-5-minutes-6f45b38c132a?source=collection_archive---------1-----------------------#2021-03-21">https://betterprogramming.pub/convert-all-your-medium-posts-to-a-gatsby-blog-in-5-minutes-6f45b38c132a?source=collection_archive---------1-----------------------#2021-03-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a0f5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我构建了一个工具，用一个命令就可以从你的中型博客中生成一个完整的博客</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4c070a78a884288564650a8183c59823.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SAdLhgtU18ltxTishA58mQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="0fec" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">➡️你也可以在GitHub上阅读这篇文章。 </p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b7f6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">TL；速度三角形定位法(dead reckoning)</h1><ul class=""><li id="599b" class="mu mv it la b lb mw le mx lh my ll mz lp na lt nb nc nd ne bi translated">我做了一个工具，可以在五分钟内把你所有的中型帖子转换成盖茨比的博客。</li><li id="fea6" class="mu mv it la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated">你可以这样使用它:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ee7c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">演示</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nl l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9776" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">复制粘贴永远不是答案…</h1><p id="b673" class="pw-post-body-paragraph ky kz it la b lb mw ju ld le mx jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">上周末，我发现自己想开一个个人博客，以便发布更多“意识流”风格的文章，这些文章不太适合我的Medium页面(不过，我仍然会在Medium上写作)。</p><p id="0805" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，作为一个已经写作多年的人，我不一定想重新开始。我想把我现有的帖子带在身边，所以我开始考虑如何去做这件事。</p><p id="4952" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最简单的选择是链接到博客中的文章，但这感觉不对。</p><p id="4c06" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">另一种选择是复制粘贴内容，并手动以Markdown格式构建(这是我希望我的博客使用的格式)。这很好，如果不是因为我在Medium上有40个公共帖子，都包含图片，这将使这个过程漫长而乏味。</p><p id="bbc9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，我选择了第三种方法:尽可能多地将这个过程自动化——即使这比我完全用手动方式完成要花更长的时间。</p><p id="cf51" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，有一个警告:我决定在周日下午2点做这件事，我想在晚餐前完成。我知道在接下来的一周里我甚至没有时间去看它。</p><p id="1d00" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以，这是我到目前为止。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3f1d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">决定做什么</h1><p id="5d54" class="pw-post-body-paragraph ky kz it la b lb mw ju ld le mx jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">我的第一个想法是建立一个工具，让中等职位进入Markdown。如果我能做到这一点，我的博客已经成功了一半。</p><p id="2955" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我曾短暂地考虑过构建我自己的“中型HTML”→Markdown工具，但后来我发现<a class="ae lu" href="https://github.com/domchristie/turndown" rel="noopener ugc nofollow" target="_blank"> Turndown </a>很好地将我的中型帖子的HTML转换成Markdown，所以我决定我不需要在那里重新发明轮子。</p><p id="9e91" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有一些警告，比如Medium只对代码块使用<code class="fe nq nr ns nt b">pre</code> HTML标签，Turndown期望<code class="fe nq nr ns nt b">pre</code>中的<code class="fe nq nr ns nt b">code</code>标签实际创建一个代码块。我分叉拒绝的意图，使这一点和其他变化，但决定推迟到以后。它已经涵盖了我需要的大部分。</p><p id="2b86" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我也尝试过用<a class="ae lu" href="https://chrome.google.com/webstore/detail/convert-medium-posts-to-m/aelnflnmpbjgipamcogpdoppjbebnjea" rel="noopener ugc nofollow" target="_blank"> Medium来降价</a>，但那对我不起作用，所以我很快就放弃了。</p><p id="27ed" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此时，如果我进入一个Medium帖子，使用“inspect element”复制Medium在文章页面上的一个<code class="fe nq nr ns nt b">article</code>标签中的所有HTML，并使用<a class="ae lu" href="https://domchristie.github.io/turndown/" rel="noopener ugc nofollow" target="_blank">在线下调工具</a>将其转换为Markdown，我已经得到了一个相当好的结果。与复制-粘贴方法相比，在这里停下来已经节省了我很多时间。</p><p id="f6bb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，下午还很早，因为到目前为止很多工作已经为我做了，我变得更有雄心了。就在那时，我决定看看我是否能达到这样一种境界，只需将一个中等用户名传递给一个脚本，我就能从中生成一个完整的博客。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ed04" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">博客是由什么组成的？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/d8fa82e184f2c036eb3b36203269c86a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_pS44yvvQjFET_5h1C5eOw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">截图自<a class="ae lu" href="https://www.gatsbyjs.com/starters/" rel="noopener ugc nofollow" target="_blank">盖茨比</a>。</p></figure><p id="9c2d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在有了更清晰的想法，有三个步骤:</p><ol class=""><li id="a87b" class="mu mv it la b lb lc le lf lh nv ll nw lp nx lt ny nc nd ne bi translated">以编程方式获取我的所有中型职位。</li><li id="ebe6" class="mu mv it la b lb nf le ng lh nh ll ni lp nj lt ny nc nd ne bi translated">将职位转换为降价。</li><li id="2b3a" class="mu mv it la b lb nf le ng lh nh ll ni lp nj lt ny nc nd ne bi translated">从他们那里产生一个博客。</li></ol><p id="af81" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我从底层开始(双关语，非故意的)，因为我觉得这是最快的方法。</p><p id="abaa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以我打开了<a class="ae lu" href="https://www.gatsbyjs.com/starters" rel="noopener ugc nofollow" target="_blank">盖茨比入门库</a>页面，选择了最流行的主题。</p><p id="ad1f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后我看了看模板是如何组织它的博客文章的(它们在哪里，前面的东西看起来像什么，等等)。)并很好地了解了如何处理我生成的降价文件:</p><ul class=""><li id="5238" class="mu mv it la b lb lc le lf lh nv ll nw lp nx lt nb nc nd ne bi translated">在<code class="fe nq nr ns nt b">content/blog</code>中为每个帖子创建一个目录。</li><li id="b932" class="mu mv it la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated">在每个目录中，添加文章降价文件。</li><li id="b262" class="mu mv it la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated">给每个包含<code class="fe nq nr ns nt b">date</code>(ISO格式)、<code class="fe nq nr ns nt b">description</code>、<code class="fe nq nr ns nt b">title</code>的帖子添加一个前置事项。</li></ul><p id="f4fb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这似乎是我现在需要做的一切。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f588" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">把我的文章给我！</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/28007867477d9f877fa34b846a8e5295.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EzDfmrJPKajOKpIQfeDU9g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自<a class="ae lu" href="https://graphql.org/" rel="noopener ugc nofollow" target="_blank"> GraphQL </a>的截图</p></figure><p id="99a5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第3步已经基本完成，第2步很大程度上依赖于现有工具(Turndown)，我转到了第1步。</p><p id="6d55" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我开始寻找一种方法来获得我的媒体文章列表，这只会让我走进死胡同。</p><p id="920b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，我了解到要使用Medium API，<a class="ae lu" href="https://github.com/Medium/medium-api-docs#21-self-issued-access-tokens" rel="noopener ugc nofollow" target="_blank">我必须给某人发电子邮件以获得访问权限</a>。即使那样，我也可能无法从它那里获取文章。</p><p id="9aa6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后我遇到了一些声称有解决方案的人，他们中的很多人说使用RSS提要是正确的方法。我查看了我的RSS订阅源，只找到了几篇我的最新帖子，所以我不确定Medium以前是否会在这里给出完整的列表，但不管怎样，这都是不够的。</p><p id="d316" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我在寻找一种方法来获取我所有文章的URL列表或它们的原始内容。复制粘贴这些网址是不可行的。</p><p id="b4c0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我进入我的个人资料页面，开始检查网络请求的线索。唯一相关的是一个带有大量查询的对<code class="fe nq nr ns nt b">_graphql</code>端点的请求。</p><p id="bab4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我没有太多使用GraphQL的经验，所以我开始考虑是否可以更容易地以编程方式抓取页面，点击“加载更多”直到我的所有文章都被加载，然后从各自的<code class="fe nq nr ns nt b">a</code>标签中抓取链接。</p><p id="2ddf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，在这种想法成为现实之前，我已经下载了<a class="ae lu" href="https://chrome.google.com/webstore/detail/graphql-developer-tools/hflnkihcpgldmkepajmpooacmmhglpff" rel="noopener ugc nofollow" target="_blank"> GraphQL开发工具</a>扩展并检查了查询，我现在意识到<a class="ae lu" href="https://gist.github.com/yakkomajuri/d0c89a65b8469af978790518db7d98c3" rel="noopener ugc nofollow" target="_blank">大约有2000行长</a>。唷。</p><p id="486e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我将这个查询复制到一个API测试工具中，并开始试验和检查它的结果。很快，一切对我来说都变得有意义了，我想这是对GraphQL力量的一个证明。</p><p id="a801" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我设法大大缩小查询范围，只提取我想要的数据(GraphQL的全部意义)，当我把注意力转移到参数上时，已经减少到不到50行。</p><p id="585c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些是<code class="fe nq nr ns nt b">id</code>、<code class="fe nq nr ns nt b">username</code>、<code class="fe nq nr ns nt b">homepagePostsLimit</code>、<code class="fe nq nr ns nt b">homepagePostsFrom</code>和<code class="fe nq nr ns nt b">includeDistributedResponses</code>。</p><p id="c7f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它们看起来很简单，但是我仍然需要回答几个问题。</p><h2 id="84a1" class="oa md it bd me ob oc dn mi od oe dp mm lh of og mo ll oh oi mq lp oj ok ms ol bi translated">如何以编程方式获取ID？</h2><p id="6230" class="pw-post-body-paragraph ky kz it la b lb mw ju ld le mx jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">我知道每个Medium用户名都有一个关联的惟一ID，我记得在查看RSS提要时偶然发现了这个。果然，我访问了这个提要，发现了一个带有查询参数<code class="fe nq nr ns nt b">source</code>的URL，其中包含了我的作者ID。</p><p id="8722" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">可能有更简单的方法得到这个，但是我甚至没有检查。这已经是我所需要的了。我仔细检查了使用这种方法可以找到其他用户名的ID(也就是说，它将总是采用相同的格式)，然后继续前进。</p><h2 id="6cb3" class="oa md it bd me ob oc dn mi od oe dp mm lh of og mo ll oh oi mq lp oj ok ms ol bi translated"><code class="fe nq nr ns nt b">homepagePostsLimit</code>的极限是多少？</h2><p id="cb4d" class="pw-post-body-paragraph ky kz it la b lb mw ju ld le mx jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">如果API能立刻把我所有的文章还给我，那就太好了。所以我将这个值设置为<code class="fe nq nr ns nt b">300</code>来调用它，并得到一个限制为25的响应。好的，所以我需要处理分页。不过这很简单，API返回一个<code class="fe nq nr ns nt b">next</code>对象来实现这个目的。</p><h2 id="53ad" class="oa md it bd me ob oc dn mi od oe dp mm lh of og mo ll oh oi mq lp oj ok ms ol bi translated"><code class="fe nq nr ns nt b">includeDistributedResponses</code>中的分布式响应是什么？</h2><p id="24ac" class="pw-post-body-paragraph ky kz it la b lb mw ju ld le mx jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">我发现这与对其他帖子的回复有关，我不需要这些，所以我将其设置为<code class="fe nq nr ns nt b">false</code>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f48b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">该查询</h1><p id="aacd" class="pw-post-body-paragraph ky kz it la b lb mw ju ld le mx jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">玩了一会儿之后，我就满足于下面的查询，我认为这是我所需要的一切(结果比我真正需要的还要多一点):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ceeb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">把所有的放在一起</h1><p id="ece1" class="pw-post-body-paragraph ky kz it la b lb mw ju ld le mx jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">看起来所有的步骤都准备好了，我开始写一个脚本来把它们整合在一起。</p><p id="4731" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我雄心勃勃地开始了这一步，我认为我应该用TypeScript写所有的东西，并使它成为一个全球可安装的包，然后可以用<code class="fe nq nr ns nt b">npx</code>和所有这些东西运行。</p><p id="ab16" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但我忍住了，决定尽可能瘦下来。</p><p id="11cc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，我编写了一个JS脚本来完成以下任务，对我自己的用户名和域使用硬编码值(现在Medium支持用户自定义子域，每个用户可以有一个不同的域，所以我需要处理这个问题):</p><ol class=""><li id="5e54" class="mu mv it la b lb lc le lf lh nv ll nw lp nx lt ny nc nd ne bi translated">获取RSS提要，将其转换为JSON，并提取用户ID。</li><li id="4680" class="mu mv it la b lb nf le ng lh nh ll ni lp nj lt ny nc nd ne bi translated">用上面的查询调用GraphQL端点，直到我得到所有的帖子。</li><li id="d301" class="mu mv it la b lb nf le ng lh nh ll ni lp nj lt ny nc nd ne bi translated">获取每篇文章URL的原始HTML。</li><li id="4003" class="mu mv it la b lb nf le ng lh nh ll ni lp nj lt ny nc nd ne bi translated">使用Turndown将HTML转换为Markdown，只使用<code class="fe nq nr ns nt b">article</code>标签中的HTML。</li><li id="16f9" class="mu mv it la b lb nf le ng lh nh ll ni lp nj lt ny nc nd ne bi translated">向Markdown输出中添加一个前置内容，并将所有输出文件转储到一个目录中。</li></ol><p id="ba90" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这几乎是它。我只是遇到了一些问题:</p><ul class=""><li id="12c5" class="mu mv it la b lb lc le lf lh nv ll nw lp nx lt nb nc nd ne bi translated">我在Markdown中添加了一些我不需要的额外内容，比如标题和副标题，以及相当于我的个人资料卡的Markdown，还有一个关注我的链接，等等。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/9c2e4d0d50582f48c9c3ce14ac1131ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*A7-KjWwewL3NfWGU.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我的博客里不需要这些。</p></figure><ul class=""><li id="94bb" class="mu mv it la b lb lc le lf lh nv ll nw lp nx lt nb nc nd ne bi translated">图像似乎不起作用。嗯，我得到了<code class="fe nq nr ns nt b">img</code>标签和Markdown图像语法(<code class="fe nq nr ns nt b">![]()</code>)，Markdown语法产生了一些微小的图像，而<code class="fe nq nr ns nt b">img</code>标签似乎没有用。</li></ul><p id="a074" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这里，在一个更健壮的实现中，我会在将HTML转换为Markdown之前加入一个相当于<a class="ae lu" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank"> Beautiful Soup </a>的东西来清理HTML，但是我没有心情阅读任何相当于Beautiful Soup的JS文档，所以我选择了regex途径。耶。</p><p id="023a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我花了一点时间拔掉一些胡须，最后用一些正则表达式清理了HTML阶段和Markdown阶段的无用东西。</p><p id="a380" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于图像问题，我花了一点时间测试了<code class="fe nq nr ns nt b">img</code>标签中的URL，但是没有任何进展。为了快速完成这项工作，我让一个正则表达式去掉了它们，并专注于如何让这个小图像变大。</p><p id="84b2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一个更经得起未来考验的选择是，实际下载这些图像，而不是仅仅使用介质托管的图像。然而，我摆弄了一下图像URL，发现我可以在路径中指定一个宽度，这个宽度通常设置得很小。我觉得这已经足够了。我对此也使用了正则表达式，并将默认值改为600像素。</p><p id="f08b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这张图片分辨率很低，我相信它是作为某种缩略图使用的(我没有实际检查)，但也可以。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="328b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">0到100</h1><p id="a651" class="pw-post-body-paragraph ky kz it la b lb mw ju ld le mx jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">现在，脚本已经完成了它需要做的事情，我只需要一种方法将它们连接到一个命令中。</p><p id="0020" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以我决定使用env vars进行配置，并采用了以下方法:</p><pre class="kj kk kl km gt oo nt op oq aw or bi"><span id="30c3" class="oa md it nt b gy os ot l ou ov">yarn &amp;&amp; \<br/>gatsby new blog <a class="ae lu" href="https://github.com/gatsbyjs/gatsby-starter-blog" rel="noopener ugc nofollow" target="_blank">https://github.com/gatsbyjs/gatsby-starter-blog</a> &amp;&amp; \<br/>node index.js &amp;&amp; \<br/>cd blog &amp;&amp; \<br/>gatsby develop</span></pre><p id="3016" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果这不是天生显而易见的，这:</p><ol class=""><li id="f42b" class="mu mv it la b lb lc le lf lh nv ll nw lp nx lt ny nc nd ne bi translated">安装依赖项。</li><li id="be4b" class="mu mv it la b lb nf le ng lh nh ll ni lp nj lt ny nc nd ne bi translated">创建一个新的盖茨比博客。</li><li id="c35e" class="mu mv it la b lb nf le ng lh nh ll ni lp nj lt ny nc nd ne bi translated">运行脚本以获取中型文章，并将格式化的Markdown输出到blog目录中的正确位置。</li><li id="1ace" class="mu mv it la b lb nf le ng lh nh ll ni lp nj lt ny nc nd ne bi translated">进入博客目录。</li><li id="5872" class="mu mv it la b lb nf le ng lh nh ll ni lp nj lt ny nc nd ne bi translated">启动本地服务器。</li></ol><p id="df3d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我后来在<code class="fe nq nr ns nt b">yarn || npm install</code>中也添加了npm支持。你很少会有<code class="fe nq nr ns nt b">package.json</code>脚本安装依赖，但我只是希望这是一个命令的事情。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3554" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="63c2" class="pw-post-body-paragraph ky kz it la b lb mw ju ld le mx jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">这就是我如何用一个下午的时间从中型文章中构建一个博客生成器。希望这对某人有用。</p><p id="7d11" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这肯定是粗糙的，有些东西需要改进，如图像，代码块，嵌入(如gists)等。<a class="ae lu" href="https://github.com/yakkomajuri/medium-to-blog" rel="noopener ugc nofollow" target="_blank">请随意更新它以适应</a>你的需求，因为我不认为我会在它上面花太多时间。</p></div></div>    
</body>
</html>