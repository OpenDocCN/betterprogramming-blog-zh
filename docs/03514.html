<html>
<head>
<title>Type Checking in VS Code Without TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在没有TypeScript的VS代码中进行类型检查</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/type-checking-in-vscode-without-typescript-eba92161cd08?source=collection_archive---------3-----------------------#2020-02-14">https://betterprogramming.pub/type-checking-in-vscode-without-typescript-eba92161cd08?source=collection_archive---------3-----------------------#2020-02-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="48bc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">但你会问，怎么做呢</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/dfc45ebb35e96f39de9eac6acdd27f4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G0p94Xs1vCW1ZLsrOgahTA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">布莱克·维斯兹在<a class="ae kv" href="https://unsplash.com/s/photos/check?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="6f0b" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">前言</h1><p id="aee5" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">当开始一个新的团队项目时，提到TypeScript可能会令人生畏，尤其是对于那些不熟悉类型化语言概念的人。</p><p id="1e55" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">如果我说我没有得到它，那我是在撒谎。这是一种影响整个文本编辑器的开发依赖——它用红色强调看似随机的函数调用和变量；用含糊的警告、接口、联合和枚举填充VS代码提示？我的天啊。</p><p id="0f92" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">对一个几乎没有或根本没有TypeScript经验的团队来说，这是一个很大的承诺，但幸运的是，我们有办法在不安装任何开发依赖的情况下包含TypeScript提供的一些价值——或者迫使整个团队致力于一个可怕的JavaScript超集。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="e58d" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated"><em class="mw">但是如何？</em></h1><p id="1f16" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">TypeScript语言特性实际上是内置在VS代码中的。不相信我？看看这个:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/2aa2ae4d5471108a933c34794ee86a27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8-fXme2ujEgg8JIQhsCHog.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">内置的类型脚本语言功能</p></figure><p id="13df" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">VS Code+<a class="ae kv" href="https://jsdoc.app/" rel="noopener ugc nofollow" target="_blank">JSDoc</a>+TypeScript的结合允许我们通过JSDoc注释来表达类型，并在普通的JavaScript文件中使用TypeScript来执行类型检查。这在<a class="ae kv" href="https://code.visualstudio.com/docs/nodejs/working-with-javascript#_type-checking-javascript" rel="noopener ugc nofollow" target="_blank"> VS Code的官方文档</a>中有所涉及。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="7530" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">入门指南</h1><p id="5ca8" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">本教程需要的内容:</p><ul class=""><li id="c390" class="my mz iq lx b ly mr mb ms me na mi nb mm nc mq nd ne nf ng bi translated">VS代码</li><li id="6521" class="my mz iq lx b ly nh mb ni me nj mi nk mm nl mq nd ne nf ng bi translated">React(可选，因为这些原则可以应用于任何JS。)</li></ul><p id="1b97" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">太棒了。现在，让我们创建我们的第一个文档—一个卡片组件(Card.jsx)！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="1e12" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">让我们将卡导入App.jsx:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="d324" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">当您将鼠标悬停在<code class="fe no np nq nr b">&lt;Card/&gt;</code>上时，VS代码应该会自动生成一个包含推断函数签名的提示，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/b8a7f548f088d01b6e0c65e80cbb9145.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*qnqcRwkd8jPtO3qw0ZkMkQ.png"/></div></figure><p id="9580" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">有两件事需要注意:</p><ol class=""><li id="e6ae" class="my mz iq lx b ly mr mb ms me na mi nb mm nc mq nt ne nf ng bi translated">编辑没有提供任何表明<code class="fe no np nq nr b">&lt;Card/&gt;</code>需要道具的反馈。</li><li id="f658" class="my mz iq lx b ly nh mb ni me nj mi nk mm nl mq nt ne nf ng bi translated">道具的属性类型为<code class="fe no np nq nr b">any</code>。</li></ol></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="fc35" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">类型推理</h1><p id="662b" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">有多种方法可以增强类型推断。</p><p id="6247" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">ES6默认参数(不要与<code class="fe no np nq nr b">Component.defaultProps</code>混淆):</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="352e" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">默认参数将<em class="nu">必需属性</em>应用于您的函数签名。</p><p id="3f5d" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">这意味着当类型检查被激活时,<code class="fe no np nq nr b">&lt;Card/&gt;</code>组件将会以红色下划线来表示需要道具，提示将会告诉你到底需要什么。</p><p id="9faf" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">析构默认值:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="b8d9" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">析构默认值被解释为<em class="nu">可选参数</em>。这可以通过启用类型检查来验证——您会注意到<code class="fe no np nq nr b">&lt;Card/&gt;</code>没有下划线。</p><p id="93c7" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">最后，JSDoc注释:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="da24" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">JSDoc注释的优点是类型定义非常明确。</p><p id="2924" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">它是TypeScript通过VS代码进入您的JavaScript应用程序的后门——这意味着用类型进行注释并记录您的签名与在TypeScript中编写类型和接口并记录签名几乎是相同的。</p><p id="6d2c" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated"><a class="ae kv" href="https://www.typescriptlang.org/docs/handbook/type-checking-javascript-files.html" rel="noopener ugc nofollow" target="_blank"> <em class="nu">哪里写的</em>和<em class="nu"/></a>有一点不同。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="808e" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">类型检查</h1><p id="2ab5" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">提示和注释是很棒的，但是为了进一步防止我们的应用程序变得愚蠢，让我们把它提高一个档次，启用可怕的红色下划线。</p><h2 id="264e" class="nv le iq bd lf nw nx dn lj ny nz dp ln me oa ob lp mi oc od lr mm oe of lt og bi translated">每个文档的类型检查</h2><p id="6277" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">在<code class="fe no np nq nr b">App.jsx</code>中，将以下内容添加到文档顶部:</p><pre class="kg kh ki kj gt oh nr oi oj aw ok bi"><span id="ce31" class="nv le iq nr b gy ol om l on oo">// @ts-check</span></pre><p id="ee77" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">这使TypeScript能够在发现问题时提供直观的反馈，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/9944e79cbe4b3e632ba5590c9e126e64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kKMIJEiImOY7GHTKe_Ny_A.png"/></div></div></figure><p id="99b4" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">在我的例子中，<code class="fe no np nq nr b">&lt;Card/&gt;</code>正在使用JSDoc注释。让我们来看看提示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/69df2537a58d1c3be0fb728475be9c82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YVopFk650p9FID0K9RZwxQ.png"/></div></div></figure><p id="2a93" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">让我们修复这个错误:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi or"><img src="../Images/475156314d560d9366da4528fe9347a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*QgcIf9LTIo7wxGW4yU-u2Q.png"/></div></figure><h2 id="8c46" class="nv le iq bd lf nw nx dn lj ny nz dp ln me oa ob lp mi oc od lr mm oe of lt og bi translated">类型检查工作区</h2><p id="0768" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated"><code class="fe no np nq nr b">// @ts-check</code>可能会很繁琐。如果我们希望类型检查在整个工作区持续进行，而不需要在每个文档的顶部添加<code class="fe no np nq nr b">// @ts-check</code>，会怎么样呢？</p><p id="3d14" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">创建以下目录+文件:</p><pre class="kg kh ki kj gt oh nr oi oj aw ok bi"><span id="4292" class="nv le iq nr b gy ol om l on oo">.vscode -&gt; settings.json</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi os"><img src="../Images/a213552d8cac30af0fe0b992bedcdfd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*CWWKrJ8odXT9bjK8EfTpWA.png"/></div></figure><p id="6777" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">在<code class="fe no np nq nr b">settings.json</code>内，添加以下内容:</p><pre class="kg kh ki kj gt oh nr oi oj aw ok bi"><span id="a0e8" class="nv le iq nr b gy ol om l on oo">{<br/>    "javascript.implicitProjectConfig.checkJs": true<br/>}</span></pre><p id="f609" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">类型检查现在应该发生在整个项目中。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="7815" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">其他建议</h1><p id="6142" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">当使用JSDoc时，可以在文档的顶部定义公共的typedefs并重用，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="1933" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">感谢阅读。我希望这对你有所帮助！</p></div></div>    
</body>
</html>