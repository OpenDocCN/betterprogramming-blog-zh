<html>
<head>
<title>Some Errors I’ve Found Developing With KMM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我发现KMM的一些错误</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/some-errors-ive-found-developing-with-kmm-d7480161f15d?source=collection_archive---------15-----------------------#2022-02-09">https://betterprogramming.pub/some-errors-ive-found-developing-with-kmm-d7480161f15d?source=collection_archive---------15-----------------------#2022-02-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ae0a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我解决的问题和仍然困扰我的问题的列表</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1da2b37f30d06b558ba8ef9bafd45b0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5Aaavg13HW85xZkM.png"/></div></div></figure><p id="de58" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，您正在尝试编写一个Kotlin多平台模块。</p><p id="7a0b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在用这个新模块为Android项目建立了一个构建gradle文件之后，你会相信你会:</p><ul class=""><li id="efcf" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">基于android构建。</li><li id="629c" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">然后运行pod install将这个新的预编译模块安装到iOS项目中。</li><li id="d81f" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">然后你上Xcode，运行build，一切都应该解决了。对吗？</li></ul><p id="5b7c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不对！</p><p id="457d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">到今天为止，Kotlin多平台还没有进入测试阶段。所以在这个过程中出现了一些错误。这是我找到的一些。</p><h1 id="08dd" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">MAC访问问题</h1><p id="9d5b" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">确保这些应用程序能够完全访问文件夹(或者至少是android和iOS项目所需的文件夹):</p><p id="0743" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">终端，Xcode，Android Studio。</p><h1 id="2f0f" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">MAC找不到PodFile</h1><p id="08a7" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">如果您还没有创建一个，一个蓝图是:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="5a06" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您已经有了一个PodFile，可能会发生一些事情:</p><ul class=""><li id="7a71" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">Android Studio找不到build.gradle.kts中声明的PodFile，因为它不在那里。</li><li id="9ab7" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">Android Studio没有权限搜索该文件夹。</li></ul><p id="7fbe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="bae3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这种情况下，请检查文件是否存在以及路径是否正确。</p><p id="2042" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，检查Android Studio是否有权访问该路径。</p><p id="8648" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果没有效果，你可以删除在<code class="fe na nb nc nd b">build.gradle.kts</code>上声明podfile的那一行，在你构建android之后手动运行pod install。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="7802" class="mb mc iq bd md me nl mg mh mi nm mk ml jw nn jx mn jz no ka mp kc np kd mr ms bi translated">麦克M1问题</h1><h2 id="4308" class="nq mc iq bd md nr ns dn mh nt nu dp ml la nv nw mn le nx ny mp li nz oa mr ob bi translated">为M1安装椰子</h2><p id="2247" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">看看这个答案:</p><p id="e4ec" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae oc" href="https://medium.com/p-society/cocoapods-on-apple-silicon-m1-computers-86e05aa10d3e" rel="noopener">如何在苹果硅M1电脑上安装Cocoapods？尼古拉·尼科诺夫</a></p><h1 id="c821" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">模拟器+ M1</h1><p id="95a9" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">如果你使用的是Mac M1，并且要为模拟器进行构建，下面是你应该做的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="8b2f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你用的是实体iPhone，不需要Rosetta。</p><h2 id="cde9" class="nq mc iq bd md nr ns dn mh nt nu dp ml la nv nw mn le nx ny mp li nz oa mr ob bi translated">M1 +房间图书馆</h2><p id="efa5" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">您应该<a class="ae oc" href="https://stackoverflow.com/questions/68884589/caused-by-java-lang-exception-no-native-library-is-found-for-os-name-mac-and-o" rel="noopener ugc nofollow" target="_blank">更改您的房间依赖值</a>:</p><pre class="kg kh ki kj gt od nd oe of aw og bi"><span id="7e2f" class="nq mc iq nd b gy oh oi l oj ok">From: ext.room_version = '2.3.0' <br/>To: ext.room_version = '2.4.0-alpha03'</span></pre><h2 id="a337" class="nq mc iq bd md nr ns dn mh nt nu dp ml la nv nw mn le nx ny mp li nz oa mr ob bi translated">Xcode M1上的JAVA_HOME</h2><p id="9033" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">从Azul的M1 OpenJDK builds 下载OpenJDK。确保使用的默认版本不高于11。在构建Gradle期间，XCode的错误大于11版本。</p><p id="26a4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里有更<a class="ae oc" href="https://developer.apple.com/forums/thread/666681" rel="noopener ugc nofollow" target="_blank">详细的回答</a>。</p><h2 id="541d" class="nq mc iq bd md nr ns dn mh nt nu dp ml la nv nw mn le nx ny mp li nz oa mr ob bi translated">找不到[您的共享模块]。XCode中的klib</h2><p id="a539" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">查看您是否为Xcode和终端提供了在android文件夹的项目中进行搜索的权限。</p><p id="c699" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从android项目中删除<code class="fe na nb nc nd b">.gradle</code>。</p><p id="513b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从ios项目中删除<code class="fe na nb nc nd b">.konan</code>。</p><p id="79ec" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">进入android项目的gradle文件夹，输入</p><pre class="kg kh ki kj gt od nd oe of aw og bi"><span id="2174" class="nq mc iq nd b gy oh oi l oj ok">chmod -R +x * <br/>-R means recursive through directories <br/>+x means add to every file the permission to be executed<br/>* means all files and directories in the current folder</span></pre><p id="4c3c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">全部重建。(搭建Android，Pod安装，搭建iOS)。</p><p id="ec6d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我发现一些苹果公司就是不喜欢这样。klib文件，似乎找不到它。我仍在试图为一个特别烦人的mac解决这个问题，你可以<a class="ae oc" href="https://stackoverflow.com/questions/70974616/kotlin-multiplatform-error-linkpoddebugframeworkios-failed" rel="noopener ugc nofollow" target="_blank">在这里</a>检查它是如何进行的。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="e677" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就这样，总结了一个月来我绞尽脑汁解决KMM到目前为止遇到的每一个问题。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="eb06" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">💗喜欢我的内容吗？请随意<a class="ae oc" href="https://www.buymeacoffee.com/lucasschiavini" rel="noopener ugc nofollow" target="_blank">给我买杯☕咖啡</a>。<br/>📩点击这里订阅我的独家电子邮件简讯<a class="ae oc" href="https://lucas-schiavini.com/#/portal" rel="noopener ugc nofollow" target="_blank">。<br/>😡不喜欢我的内容？请在评论中分享你的想法！<br/>卢卡斯·斯基亚维尼<br/> </a><a class="ae oc" href="https://linktr.ee/lucas.schiavini" rel="noopener ugc nofollow" target="_blank">我的全部内容</a> | <a class="ae oc" href="https://www.linkedin.com/in/lucas-schiavini/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a></p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="629d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ol">最初发表于</em><a class="ae oc" href="https://lucas-schiavini.com/some-errors-ive-found-developing-with-kmm/" rel="noopener ugc nofollow" target="_blank"><em class="ol">https://lucas-schiavini.com</em></a></p></div></div>    
</body>
</html>