<html>
<head>
<title>Error Monitoring in AWS Lambda</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS Lambda中的错误监控</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/error-monitoring-in-aws-lambda-5e16d75f1fcc?source=collection_archive---------7-----------------------#2021-07-20">https://betterprogramming.pub/error-monitoring-in-aws-lambda-5e16d75f1fcc?source=collection_archive---------7-----------------------#2021-07-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="aea7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">记录、监控和报告意外的Lambda错误</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8fda560a4d477f10193e1d2d4626c83e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Fo4v7-0r35SY1W6T"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">大卫·普帕扎在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="a134" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">亚马逊Lambda曾经是AWS生态系统中的起步产品。它开创了无服务器趋势，并永远改变了后端基础架构。推出七年后，它已经成为AWS服务的基石。它在它们的互操作性中起着关键作用。</p><p id="c2a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">AWS Lambda还有其他一些特性，使它成为一个不可或缺的工具:</p><ul class=""><li id="10e6" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">量入为出，这意味着在不使用时节省成本</li><li id="0c97" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">完全由事件驱动</li><li id="6d49" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">支持多种语言</li><li id="8a04" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">可攀登的</li></ul><p id="3581" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，它非常容易使用，以至于开发人员往往会忘记应用一些最佳实践:</p><ul class=""><li id="71bc" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">它需要用单元测试进行适当的测试。</li><li id="4aa1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">它需要成为CI工作流的一部分，以保持您的系统同步。</li><li id="eabe" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">需要对其进行监控，并提供错误报告以确保稳定性。</li></ul><p id="051d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将关注Lambda的错误和监控方面，以及如何在Slack中获得实时通知。</p><p id="0ab9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们如何确定我们的Lambda运行正常、健康、没有错误？AWS提供任何内置的解决方案吗？在AWS世界之外还有什么其他选择？</p><p id="3da6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">✍The文章中的例子将使用Javascript，但适用于Lamdba支持的任何语言和使用的第三方工具。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="c697" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">使用亚马逊的基础设施</h1><p id="a3d4" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我们可以从检查AWS提供了什么开始。</p><p id="a8ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看Amazon在其文档中是如何监控和跟踪Lambda函数中的错误的:</p><blockquote class="nn no np"><p id="45c2" class="kz la nq lb b lc ld ju le lf lg jx lh nr lj lk ll ns ln lo lp nt lr ls lt lu im bi translated">“为了帮助你处理Lambda应用中的错误，Lambda集成了亚马逊CloudWatch和AWS X-Ray等服务。您可以使用日志、指标、警报和跟踪的组合来快速检测和识别您的功能代码、API或支持您应用的其他资源中的问题”“【docs.aws.amazon.com】T4</p></blockquote><p id="d00e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们继续使用这些服务来实时监控我们的Lambda函数。当出现任何问题时，我们希望在Slack中得到错误通知。以下是我们需要遵循的步骤:</p><ul class=""><li id="5063" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">配置AWS X射线服务。</li><li id="5d1e" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">配置一些CloudWatch警报。</li><li id="35b1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">配置AWS聊天机器人服务。</li></ul><p id="0870" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是我们将要配置的图表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/8928a234ebf46662e6cf547f43db5d77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O5VdDbEC_AkduKR_3lfFKg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者创建的图表</p></figure><h2 id="052f" class="nv mr it bd ms nw nx dn mw ny nz dp na li oa ob nc lm oc od ne lq oe of ng og bi translated">1.配置AWS X射线</h2><p id="55ec" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">x射线是监控服务运行状况的工具。一个很大的优势是AWS X-Ray有一个永久的免费层。然后，这是值得设置它有一个味道。</p><p id="9161" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如何启用AWS X射线？通过以下步骤:</p><ul class=""><li id="1afd" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">打开Lambda控制台上的<a class="ae ky" href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener ugc nofollow" target="_blank">功能页面</a>。</li><li id="868e" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">选择一个函数。</li><li id="6c03" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">选择配置，然后选择监控工具。</li><li id="ce19" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">选择编辑。</li><li id="98c4" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">在X射线下，启用活动追踪。</li><li id="fdeb" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">点击保存。</li></ul><p id="6b0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您使用无服务器框架，您可以简单地在您的<code class="fe oh oi oj ok b">yml</code>文件中的Lambda配置下设置<code class="fe oh oi oj ok b">tracing: true</code>。</p><p id="eca5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">配置X射线后，您现在将对服务的健康状况有一个总体了解。你一眼就能看到大局。每个服务都有一个绿色/黄色。黄色表示某些东西没有按预期工作。</p><p id="af96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看一个X射线服务地图的示例:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/6a04b549e47780e23a39926c358091a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0i-XERBm8NKJ1FvvBOKeaQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者提供的AWS X射线服务地图的屏幕截图</p></figure><p id="3d35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们在上面的图片中看到的，Lambda函数之一没有按预期执行。</p><p id="332b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">AWS会主动发送故障通知吗？不是默认的。它不知道使用什么标准。我们需要对此进行配置。怎么才能做到呢？为此我们需要使用CloudWatch警报。</p><h2 id="1c4f" class="nv mr it bd ms nw nx dn mw ny nz dp na li oa ob nc lm oc od ne lq oe of ng og bi translated">2.添加CloudWatch警报</h2><p id="bffd" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在深入探讨之前，让我们回顾一下什么是CloudWatch:</p><blockquote class="nn no np"><p id="e05b" class="kz la nq lb b lc ld ju le lf lg jx lh nr lj lk ll ns ln lo lp nt lr ls lt lu im bi translated">“Amazon CloudWatch是一项监控和管理服务，为AWS、混合和内部应用程序和基础架构资源提供数据和可操作的见解。借助CloudWatch，您可以从单一平台以日志和指标的形式收集和访问所有性能和运营数据。”— <a class="ae ky" href="https://aws.amazon.com/cloudwatch/features/#:~:text=Amazon%20CloudWatch%20is%20a%20monitoring,metrics%20from%20a%20single%20platform" rel="noopener ugc nofollow" target="_blank">亚马逊云手表功能</a></p></blockquote><p id="92a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CloudWatch警报是CloudWatch服务的一项功能。他们会在CloudWatch上监控一些指标。警报将根据用户定义的阈值触发。</p><p id="c376" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们配置一个简单的指标来警告Lambda函数发生的任何错误。我们需要做的是:</p><ul class=""><li id="af69" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">转到CloudWatch。</li><li id="9995" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">点击报警&gt;报警中</li><li id="90c2" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">点击“创建警报”</li><li id="3d77" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">在下面填写警报的详细信息。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/a768d280b1a71edf5027a244d40a0c93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oe244t_yRmBdqLo9iHAz2A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">CloudWatch警报指标和条件配置</p></figure><p id="89ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CloudWatch alarms将为您提供两个触发警报的渠道:</p><ul class=""><li id="ea78" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">通过电子邮件</li><li id="8c7f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">使用主题</li></ul><p id="d020" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于我们想要一些实时通知，我们将需要配置一个主题。您可以创建或使用现有主题将警报转储到其中。题目是为了什么？它将成为与其他服务进行沟通的渠道。对于这个场景，我们将把它连接到AWS聊天机器人。</p><h2 id="3a7d" class="nv mr it bd ms nw nx dn mw ny nz dp na li oa ob nc lm oc od ne lq oe of ng og bi translated">3.设置AWS聊天机器人</h2><p id="e544" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">AWS Chatbot是AWS的Slack集成。它的配置很简单。你需要做的就是:</p><ul class=""><li id="d2ca" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">将AWS聊天机器人绑定到您想要的Slack工作区。</li><li id="0105" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">点击配置新频道。</li><li id="3350" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">选择AWS聊天机器人将转储消息的空闲通道。</li><li id="9302" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">从主题列表中选择先前创建的主题。</li></ul><p id="ff2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该过程完成并触发CloudWatch警报后，您将在Slack中实时收到通知。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/c9483613b25c142f4045ee2970b70ac6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kA_xK8p5IkHH1knsllz0dw.png"/></div></div></figure><h2 id="f398" class="nv mr it bd ms nw nx dn mw ny nz dp na li oa ob nc lm oc od ne lq oe of ng og bi translated">关于自动气象站建设的思考</h2><p id="26a7" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">AWS聊天机器人可以做比显示错误更多的事情。你可以在<a class="ae ky" href="https://aws.amazon.com/chatbot/" rel="noopener ugc nofollow" target="_blank">文档</a>中查看它的特性。</p><p id="a293" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们只使用AWS基础设施配置了一切，我们满意了吗？算是吧。监控是直观和有用的，但另一方面，错误跟踪可能会更好。</p><p id="68d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">错误堆栈缺少一些上下文。大多数时候，您仍然会发现自己在挖掘CloudWatch日志。即使这些也可能不够。您可能会插入一些<code class="fe oh oi oj ok b">console.log</code>语句来提供关于问题的附加信息。</p><p id="a2cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没有更好的办法吗？我们可以使用另一种工具来获得更好的堆栈跟踪吗？</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="539d" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">使用专用的错误报告工具</h1><p id="4b29" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">错误报告工具在web应用程序中很常见。这些年来他们有了很大的进步。他们的用户界面变得更加友好，错误信息也更加完整。</p><p id="3fd0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这和这个有什么关系？他们中的大多数都有专门的Lambda集成。在本文中，我将关注<a class="ae ky" href="https://docs.sentry.io/platforms/node/guides/aws-lambda/" rel="noopener ugc nofollow" target="_blank"> Sentry的Lambda集成</a>。然而，其他工具，如<a class="ae ky" href="https://docs.rollbar.com/docs/aws-lambda" rel="noopener ugc nofollow" target="_blank">滚动条</a>，也有类似的API。</p><p id="f3af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">先从安装开始吧。Sentry有自己的包含Lambda集成的包。</p><pre class="kj kk kl km gt oo ok op oq aw or bi"><span id="2bd1" class="nv mr it ok b gy os ot l ou ov">yarn add @sentry/serverless</span></pre><p id="bc17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装后，只需在Lambda代码中使用集成即可:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="386b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Lambda函数不能无限期运行。它们受到超时限制，很难微调。使用Sentry，如果你发现你的Lambda函数超时，你可以得到提醒。</p><p id="f50f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要捕获函数的超时，需要在配置中设置<code class="fe oh oi oj ok b">captureTimeoutWarning</code>标志:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="19cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经看到了如何配置Sentry来捕获意外错误。如果您想要手动捕获一个异常，该怎么办？你可以用<code class="fe oh oi oj ok b">captureException</code>来表示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="37e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经看到配置Sentry的错误报告是多么容易。我们如何将其与Slack整合？很容易，因为Sentry有自己的Slack bot。</p><ul class=""><li id="5eb5" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">将Slack集成添加到Sentry。</li><li id="3004" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">转到提醒。</li><li id="99f1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">选择任何项目。</li><li id="a3cd" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">创建新的通知。</li><li id="6a81" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">选择要显示警报的松弛通道。</li></ul><p id="eef0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这样，一切都准备好了。我们现在将使用Sentry在我们的Slack频道上接收错误通知。</p><p id="3a15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Sentry会给我们的错误跟踪增加什么样的上下文？它包括哪些数据？以下数据将始终是错误报告的一部分:</p><ul class=""><li id="a29f" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">功能详情</li><li id="8ec6" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe oh oi oj ok b">sys.argv</code>为功能</li><li id="d024" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">指向云观察日志的链接</li><li id="6d2f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">AWS请求ID</li><li id="7315" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">功能执行时间</li><li id="28c5" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">功能版本</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/b87ae829f74ef36779f82bb35f97b124.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vFnduU04v2yVbLvrwhFmHQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从所有与AWS相关的信息中捕获哨兵错误</p></figure><p id="493b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了所有这些额外的信息和更好的堆栈跟踪，识别异常的根源就更容易了。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="2a2b" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">结论</h1><p id="ce93" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">谈到错误报告，我们已经看到并比较了这两种方法。AWS工具擅长监控，而Sentry擅长错误报告。</p><p id="1300" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">混合方法将是完美的解决方案。您可以使用X-Ray来监控服务的状态，使用Sentry来监控错误。</p><p id="6d1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Sentry特别擅长收集所有相关信息，并以简单明了的格式呈现出来。AWS没有很好地给出错误执行的上下文。偶尔你可能需要日志，这就是为什么Sentry包含了CloudWatch日志的确切路径。</p><p id="09fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Lambda中添加错误报告是至关重要的，即使它是一个微小而琐碎的函数。它可能看起来不值得——直到你开始面对生产中的一些错误，并且你不明白哪里出错了。</p><p id="732b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">积极主动总是明智之举。</p><p id="44e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">干杯。</p><h1 id="d24a" class="mq mr it bd ms mt oz mv mw mx pa mz na jz pb ka nc kc pc kd ne kf pd kg ng nh bi translated">有关系的</h1><div class="pe pf gp gr pg ph"><a rel="noopener  ugc nofollow" target="_blank" href="/7-tips-to-write-efficient-and-performant-javascript-code-bccbdb9662ae"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd iu gy z fp pm fr fs pn fu fw is bi translated">编写高效高性能JavaScript代码的7个技巧</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">提升您的JavaScript应用程序的性能</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">better编程. pub</p></div></div><div class="pq l"><div class="pr l ps pt pu pq pv ks ph"/></div></div></a></div><div class="pe pf gp gr pg ph"><a rel="noopener  ugc nofollow" target="_blank" href="/7-habits-of-productive-developers-bce60d880907"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd iu gy z fp pm fr fs pn fu fw is bi translated">高效开发人员的7个习惯</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">建立正确的习惯来保持每天的工作效率</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">better编程. pub</p></div></div><div class="pq l"><div class="pw l ps pt pu pq pv ks ph"/></div></div></a></div></div></div>    
</body>
</html>