<html>
<head>
<title>Implementing List Items With React and Recoil</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React和反冲实现列表项</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/implementing-list-items-with-react-and-recoil-c58f75e307dc?source=collection_archive---------7-----------------------#2021-03-10">https://betterprogramming.pub/implementing-list-items-with-react-and-recoil-c58f75e307dc?source=collection_archive---------7-----------------------#2021-03-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b940" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">性能良好的渲染</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/75dfdbbc26f2525a54f4ee8d853f7a93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5UNHPfSOQIyiDEaX"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">詹·西奥多在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="589d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将带你了解如何使用<a class="ae ky" href="https://github.com/facebookexperimental/Recoil" rel="noopener ugc nofollow" target="_blank">反冲</a>实现列表项，而不需要不必要的重新渲染。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f7e9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">回购示例</h1><p id="1172" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">以下是最终代码库的参考:</p><div class="mz na gp gr nb nc"><a href="https://github.com/manakuro/recoil-list-example" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">mana kuro/反冲列表示例</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">使用React和反冲实现列表项，无需不必要的重新呈现。在项目目录中，您可以运行…</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">github.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq ks nc"/></div></div></a></div></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2e5e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">设置React应用程序</h1><p id="d3b3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了快速启动，我们使用<code class="fe nr ns nt nu b"><a class="ae ky" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">create-react-app</a></code>来设置React应用程序:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="0bf4" class="nz md it nu b gy oa ob l oc od">npx create-react-app reg-suit-app --template typescript</span></pre><p id="b491" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装后，通过运行以下命令运行开发服务器:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="7d84" class="nz md it nu b gy oa ob l oc od">yarn start</span></pre><p id="5db9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将看到欢迎页面:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/5b57df525b4319a86edc70c1270302ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*y_V8iXNS1DjpyozS.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">欢迎页面</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1486" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">设置反冲</h1><p id="40db" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">接下来，我们将在我们的应用程序中设置反冲。</p><p id="811e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，安装反冲:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="cbb2" class="nz md it nu b gy oa ob l oc od">yarn add recoil</span></pre><p id="e84b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并将<code class="fe nr ns nt nu b">RecoilRoot</code>添加到<code class="fe nr ns nt nu b">App.tsx</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">App.tsx</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2704" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">实施列表项目</h1><p id="b692" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在我们已经设置了反应和反冲，我们将实现列表项。</p><p id="7bb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们将创建一个提供列表项的自定义挂钩。创建<code class="fe nr ns nt nu b">src/hooks/useList.tsx</code>并添加以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="7b2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并创建一个名为<code class="fe nr ns nt nu b">src/List.tsx</code>的组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="8e48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nr ns nt nu b">List</code>组件通过<code class="fe nr ns nt nu b">useList</code>钩子消耗<code class="fe nr ns nt nu b">listIds</code>，并将每个ID提供给子组件。</p><p id="54ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并在<code class="fe nr ns nt nu b">src/Counter.tsx</code>中创建一个<code class="fe nr ns nt nu b">Counter</code>组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="cce7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nr ns nt nu b">Counter</code>组件通过<code class="fe nr ns nt nu b">useListItem</code>钩子使用传递的ID消费<code class="fe nr ns nt nu b">listItem</code>。这将把状态从父组件中隔离出来，因为<code class="fe nr ns nt nu b">useListItem</code>钩子创建了一个隔离的原子作为本地状态。</p><p id="704c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，在<code class="fe nr ns nt nu b">src/Description.tsx</code>中创建另一个子组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="dc5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与<code class="fe nr ns nt nu b">Counter</code>组件一样，<code class="fe nr ns nt nu b">Description</code>组件也将消耗<code class="fe nr ns nt nu b">listItem</code>。</p><p id="1995" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们准备测试我们的应用程序。让我们来看看它是如何工作的。</p><p id="781c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了查看组件如何在我们的应用程序中呈现，我们需要启用<code class="fe nr ns nt nu b">Components</code>选项卡中的高亮选项，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/4c6d2d70d01bb0a7e276b4a421079094.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oj-c5qvishE7ssLrl9EUXg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">突出显示选项</p></figure><p id="7e9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将只高亮显示已经更新和渲染的组件。</p><p id="d9b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，让我们来测试一下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/94f67094a700e7720becb22ca914084e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-XsKCNFdvHleOm8V-AR1-Q.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">试验</p></figure><p id="16c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如你所看到的，当我们点击每个条目的“增加”和“减少”按钮时，React将检测哪个列表条目已经被更新，并呈现新的条目而不是整个列表。当需要渲染大量的<code class="fe nr ns nt nu b">List</code>组件时，这极大地提高了渲染性能。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fb98" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="2c53" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们已经介绍了如何使用React和反冲实现列表项。我希望你喜欢阅读这篇文章。</p><div class="mz na gp gr nb nc"><a href="https://github.com/manakuro/recoil-list-example" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">mana kuro/反冲列表示例</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">使用React和反冲实现列表项，无需不必要的重新呈现。在项目目录中，您可以运行…</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">github.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq ks nc"/></div></div></a></div></div></div>    
</body>
</html>