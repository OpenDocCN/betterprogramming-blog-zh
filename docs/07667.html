<html>
<head>
<title>4 Lesser-Known (but Useful) Python Features You Should Try</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您应该尝试的4个鲜为人知(但很有用)的Python特性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/4-lesser-known-but-useful-python-features-you-should-try-e75a45905af3?source=collection_archive---------5-----------------------#2021-02-08">https://betterprogramming.pub/4-lesser-known-but-useful-python-features-you-should-try-e75a45905af3?source=collection_archive---------5-----------------------#2021-02-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bc73" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在Python中总是有新的发现</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9eb815204d97c18394ddfbbe52f62459.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JwNzx2WoCnEAxzdT"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@benofthenorth?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Ben </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="1246" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python有一个最活跃的开源社区。在撰写本文时，Python包索引(又名<a class="ae ky" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"> PyPi </a>)中现有超过288，000个包。它们已被广泛应用于许多领域，包括科学计算、web开发和机器学习。</p><p id="e53a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每当你看到一篇关于Python的文章，你可能会学到一些新东西。今天，我想分享一些有用的Python特性，如果特定的场景适用于您，您可以利用这些特性。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2cca" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.用pprint打印更好</h1><p id="1920" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><code class="fe mz na nb nc b"><a class="ae ky" href="https://docs.python.org/3/library/pprint.html" rel="noopener ugc nofollow" target="_blank">pprint</a></code>模块是标准库的一部分。正如它的名字(pretty printer)所示，这个模块的目标是在解释器中以比默认内置<code class="fe mz na nb nc b">print</code>函数的输出更容易阅读的更好的格式打印数据。下面的代码片段向您展示了<code class="fe mz na nb nc b">print()</code>和<code class="fe mz na nb nc b">pprint()</code>函数输出之间的快速比较:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">打印与pprint</p></figure><p id="8509" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如你所看到的，当我们使用<code class="fe mz na nb nc b">pprint</code>时，输出是一种有组织的格式，与<code class="fe mz na nb nc b">print</code>函数的标准输出相比，这更容易吸引眼球。</p><p id="a685" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在大多数情况下，您只需要使用<code class="fe mz na nb nc b">pprint</code>的默认设置。但是，如果您想要自定义行为，还可以设置其他参数。例如，您可以更改输出的缩进，如下所示:</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="ac4a" class="nj md it nc b gy nk nl l nm nn">&gt;&gt;&gt; pprint(http_responses, indent=4)<br/>[   {'result': [1, 2, 3], 'status': 200},<br/>    {'result': 'Endpoint not found', 'status': 404},<br/>    {'result': 'API error', 'status': 400}]</span></pre><p id="c665" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在底层，<code class="fe mz na nb nc b">pprint</code>函数创建一个<code class="fe mz na nb nc b">PrettyPrinter</code>实例对象，处理打印作业的实际格式化。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="49e4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.作为轻量级数据容器的命名元组</h1><p id="d647" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果希望有一个类来管理项目中的数据，可以考虑使用命名元组作为替代方法。不必为自定义类编写一些样板文件，创建一个命名的元组类非常简单:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">命名元组示例</p></figure><ul class=""><li id="e3ca" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated"><code class="fe mz na nb nc b">namedtuple</code>是集合模块中可用的工厂功能。</li><li id="f108" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">作为一个工厂函数，调用这个函数将创建一个类。在我们的例子中，我们创建了名为<code class="fe mz na nb nc b">Coordinate</code>的类型。</li><li id="8e8c" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">在类型名之后，我们以字符串的形式传递属性列表，该字符串可以是由空格分隔的单个子字符串。或者，属性可以是列表的形式。</li><li id="4760" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">一旦定义了类，我们就可以为该类创建实例对象。就像其他类一样，我们可以使用点符号直接访问属性。与传统的自定义类不同，命名元组类还支持迭代和解包，因为它的核心是元组子类。相关演示见下文:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">命名元组的其他功能</p></figure><p id="cebd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">应该注意的是，Python提供了特殊的功能，允许我们使命名元组更加有用。下面是一些例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fd93" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.在for循环中使用else子句</h1><p id="0e27" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们都知道在条件分支中使用<code class="fe mz na nb nc b">else</code>子句。下面是一个简单的例子:</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="c4f3" class="nj md it nc b gy nk nl l nm nn">if condition:<br/>    # execute when the condition is true<br/>else:<br/>    # execute when the condition is false</span></pre><p id="1900" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你知道我们也可以在<code class="fe mz na nb nc b">for</code>循环中使用<code class="fe mz na nb nc b">else</code>子句吗？让我们先看看代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">for循环中的else子句</p></figure><ul class=""><li id="605b" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated"><code class="fe mz na nb nc b">else</code>子句在第一个<code class="fe mz na nb nc b">for</code>循环中执行。</li><li id="376f" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">第二个<code class="fe mz na nb nc b">for</code>循环中不执行<code class="fe mz na nb nc b">else</code>子句。</li><li id="fd6a" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated"><code class="fe mz na nb nc b">for</code>循环中的<code class="fe mz na nb nc b">else</code>子句的规则是，如果<code class="fe mz na nb nc b">for</code>循环中的迭代正常完成，它将被执行。然而，如果<code class="fe mz na nb nc b">for</code>循环中的迭代由于<code class="fe mz na nb nc b">break</code>语句而中断，它将不会被执行。</li></ul><p id="4526" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能想知道在什么场景下我们可以使用这个特性。下面说明了一种可能的情况。虽然示例中没有显示，但是有一点需要注意，如果iterable为空，那么仍然会执行<code class="fe mz na nb nc b">else</code>子句，这仍然被认为是迭代的完成。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">可能情况</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="71f5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.用枚举创建枚举</h1><p id="6b92" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在很多项目中，我们需要列举同一个概念的相关条目。在Python中，我们可以使用<code class="fe mz na nb nc b">enum</code>模块实现枚举。以下代码向您展示了一个简单的示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">列举</p></figure><ul class=""><li id="8a2d" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated"><code class="fe mz na nb nc b">Enum</code>类在<code class="fe mz na nb nc b">enum</code>模块中可用。为了创建一个枚举，我们创建了一个<code class="fe mz na nb nc b">Enum</code>类的子类。</li><li id="8b25" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">对于每一项，我们指定名称及其相关值。可以像这样检索名称和值:</li></ul><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="10a3" class="nj md it nc b gy nk nl l nm nn">&gt;&gt;&gt; Direction.EAST.name<br/>'EAST'<br/>&gt;&gt;&gt; Direction.EAST.value<br/>1</span></pre><p id="ee62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于枚举还有一些我们应该注意的特性:</p><ul class=""><li id="a8f3" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated">如果你认为一行对你来说可读性更强，你可以只用一行。或者，您可以利用<code class="fe mz na nb nc b">Enum</code>类的功能API。这两个功能如下所示:</li></ul><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="8b58" class="nj md it nc b gy nk nl l nm nn">class DirectionOneLine(Enum):<br/>    EAST = 1; SOUTH = 2; WEST = 3; NORTH = 4;</span><span id="8b87" class="nj md it nc b gy oc nl l nm nn">DirectionFunctional = Enum('Direction', 'EAST SOUTH WEST NORTH')</span></pre><ul class=""><li id="b2c0" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated">关联的值不必是整数。在下面的例子中，我们使用字母作为项目的值。要求是这些值需要是唯一的和恒定的。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><ul class=""><li id="f40d" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated">枚举类是可迭代的。我们可以在一个<code class="fe mz na nb nc b">for</code>循环中使用它，如下所示。同样，我们可以检查成员。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><ul class=""><li id="4c6b" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated">我们可以使用适当的值来构造一个项目。但是，如果值不正确，则不能创建项目:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4c79" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="c6cb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在本文中，我们回顾了可以在自己的项目中尝试的四个Python特性。这里有一个快速回顾:</p><ul class=""><li id="df9f" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated">要查看Python对象的正确输出，可以使用<code class="fe mz na nb nc b">pprint</code>来生成格式更好的输出。</li><li id="7c13" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">我们可以使用命名元组创建一个简单的类作为数据容器来管理项目中的数据模型。</li><li id="4b46" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">除了<code class="fe mz na nb nc b">use if…else</code>语句，我们还可以在<code class="fe mz na nb nc b">for</code>循环中使用<code class="fe mz na nb nc b">else</code>子句。如果<code class="fe mz na nb nc b">for</code>循环中的迭代正常完成，则执行<code class="fe mz na nb nc b">else</code>子句。</li><li id="5d2f" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">通过子类化<code class="fe mz na nb nc b">Enum</code>类，我们可以方便地创建一个枚举类。</li></ul></div></div>    
</body>
</html>