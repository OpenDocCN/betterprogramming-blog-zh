<html>
<head>
<title>Removing jQuery From Your Project With JavaScript: Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript从项目中删除jQuery:第1部分</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/removing-jquery-from-your-project-with-javascript-part-1-76eefcc98cff?source=collection_archive---------10-----------------------#2019-11-17">https://betterprogramming.pub/removing-jquery-from-your-project-with-javascript-part-1-76eefcc98cff?source=collection_archive---------10-----------------------#2019-11-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d7ce" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">学习用JavaScript替换jQuery DOM操作</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8f2a4bace15ee828ebf62a6195d91bea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DWWroBzUAWhJuWoPoLOr0g.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@sagarp7?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">萨加尔·帕蒂尔</a>在<a class="ae kv" href="https://unsplash.com/s/photos/baloons?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="3607" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">删除jQuery的原因是:</p><ul class=""><li id="74c2" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">获得自然的性能</li><li id="fcfe" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">了解jQuery函数内部发生了什么，这样我们就可以决定是使用jQuery还是JavaScript</li></ul><p id="1b1d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本系列的第1部分只关注在不使用jQuery的情况下获取元素。我为更常用的jQuery函数添加了可选的JavaScript方法。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="3685" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">1 .使用选择器选择元素</h1><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="b07f" class="nk mo iq ng b gy nl nm l nn no">// jQuery<br/>$('selector');<br/><br/>// JavaScript<br/>document.querySelectorAll('selector'); //returns NodeList</span></pre><p id="2d3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们想获得第一个元素——它匹配选择器——那么使用:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="6219" class="nk mo iq ng b gy nl nm l nn no">document.querySelector('selector');</span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="b6b7" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">2.通过类名获取元素</h1><p id="c51e" class="pw-post-body-paragraph kw kx iq ky b kz np jr lb lc nq ju le lf nr lh li lj ns ll lm ln nt lp lq lr ij bi translated">为了通过类名获取元素，我们可以使用带有前缀<code class="fe nu nv nw ng b">.</code>的<code class="fe nu nv nw ng b">getElementsByClassName</code>或<code class="fe nu nv nw ng b">querySelector</code></p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="3ffb" class="nk mo iq ng b gy nl nm l nn no">// jQuery<br/><strong class="ng ir">$('.className');</strong><br/><br/>// JavaScript<br/><strong class="ng ir">document.querySelectorAll('.className');</strong><br/><br/>// or<br/><strong class="ng ir">document.getElementsByClassName('className');</strong></span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="ad79" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">3.按ID获取元素</h1><p id="36c9" class="pw-post-body-paragraph kw kx iq ky b kz np jr lb lc nq ju le lf nr lh li lj ns ll lm ln nt lp lq lr ij bi translated">要通过ID获取元素，我们可以使用前缀为<code class="fe nu nv nw ng b">#</code>的<code class="fe nu nv nw ng b">getElementById</code>或<code class="fe nu nv nw ng b">querySelector</code>。</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="71df" class="nk mo iq ng b gy nl nm l nn no">// jQuery<br/>$('#id');<br/><br/>// JavaScript<br/>document.querySelector('#id');<br/><br/>// or<br/>document.getElementById('id');</span><span id="91bc" class="nk mo iq ng b gy nx nm l nn no">//or<br/>window['id']</span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="9abf" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">4.通过标记名获取元素</h1><p id="77f3" class="pw-post-body-paragraph kw kx iq ky b kz np jr lb lc nq ju le lf nr lh li lj ns ll lm ln nt lp lq lr ij bi translated">为了通过标签名获取元素，我们可以使用<code class="fe nu nv nw ng b">getElementsByTagName</code>，或者使用<code class="fe nu nv nw ng b">querySelectorAll</code>函数<strong class="ky ir">。</strong></p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="e167" class="nk mo iq ng b gy nl nm l nn no">//jQuery<br/>$('tagName'); // Example : $('li');</span><span id="8e60" class="nk mo iq ng b gy nx nm l nn no">//JavaScript <br/><strong class="ng ir">document.getElementsByTagName('tagName'); </strong></span><span id="61fa" class="nk mo iq ng b gy nx nm l nn no">// To get elements from another element using tag name </span><span id="9092" class="nk mo iq ng b gy nx nm l nn no"><strong class="ng ir">parentElement.querySelectorAll('li');</strong></span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="9370" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">5.按属性获取元素</h1><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="5cce" class="nk mo iq ng b gy nl nm l nn no">// jQuery<br/><strong class="ng ir">$('a[target=_blank]');</strong><br/><br/>// JavaScript<br/><strong class="ng ir">document.querySelectorAll('a[target=_blank]');</strong></span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="88a1" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">6.获取前一个元素</h1><p id="1015" class="pw-post-body-paragraph kw kx iq ky b kz np jr lb lc nq ju le lf nr lh li lj ns ll lm ln nt lp lq lr ij bi translated">使用<code class="fe nu nv nw ng b">previousElementSibling</code> <strong class="ky ir"> </strong>获取前一个元素。</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="88d7" class="nk mo iq ng b gy nl nm l nn no">// jQuery<br/>$el.prev();<br/><br/>// JavaScript<br/><strong class="ng ir">el.previousElementSibling;</strong></span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="3fa9" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">7.获取下一个元素</h1><p id="ea17" class="pw-post-body-paragraph kw kx iq ky b kz np jr lb lc nq ju le lf nr lh li lj ns ll lm ln nt lp lq lr ij bi translated">使用<code class="fe nu nv nw ng b">nextElementSibling</code> <strong class="ky ir"> </strong>获取下一个元素。</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="3eb0" class="nk mo iq ng b gy nl nm l nn no">// jQuery<br/>$el.next();<br/><br/>// JavaScript<br/><strong class="ng ir">el.nextElementSibling;</strong></span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="a220" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">8.获取所有兄弟姐妹</h1><p id="6952" class="pw-post-body-paragraph kw kx iq ky b kz np jr lb lc nq ju le lf nr lh li lj ns ll lm ln nt lp lq lr ij bi translated">要获取所有同级:</p><ul class=""><li id="1dc5" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">获取父项</li><li id="ae85" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">获取父代的子代</li><li id="83b3" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">创建一个兄弟数组</li><li id="b165" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">如果子元素不等于当前元素，则将子元素推送到同级元素</li><li id="b57d" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">返回兄弟姐妹</li></ul><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="eb07" class="nk mo iq ng b gy nl nm l nn no">function getSiblings(el) {<br/>  let parentNode = el.parentNode,<br/>      children = parentNode.children,<br/>      totalChildren = children.length,<br/>      siblings = [];</span><span id="5a24" class="nk mo iq ng b gy nx nm l nn no">  for(let i = 0; i &lt; totalChildren; i++) {<br/>     let currentChild = children[i];<br/>     if(el != currentChild) {<br/>        siblings.push(currentChild);<br/>     }<br/>   }<br/>   <br/>   return siblings;</span><span id="0ee2" class="nk mo iq ng b gy nx nm l nn no">}</span></pre><p id="e89e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码也可以写成这样:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="61f1" class="nk mo iq ng b gy nl nm l nn no">Array.from( <strong class="ng ir">el.parentNode.children</strong> ).<strong class="ng ir">filter((child) =&gt;<br/>  child !== el<br/>);</strong></span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="f62e" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">9.获取所有以前的同级</h1><p id="f61b" class="pw-post-body-paragraph kw kx iq ky b kz np jr lb lc nq ju le lf nr lh li lj ns ll lm ln nt lp lq lr ij bi translated">我们可以用<code class="fe nu nv nw ng b">previousElementSibling</code>来获取当前元素的前一个元素。然后我们可以循环直到第一个元素。</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="7fc1" class="nk mo iq ng b gy nl nm l nn no">// jQuery<br/>$el.prevAll();<br/><br/>// JavaScript</span><span id="ca91" class="nk mo iq ng b gy nx nm l nn no">function getPreviousSiblings(elem) {<br/>  var siblings = [];</span><span id="6c1e" class="nk mo iq ng b gy nx nm l nn no">  while ( <strong class="ng ir">elem = elem.previousSibling </strong>) {     <br/>      if ( elem.nodeType === 3) { // ignore texts<br/>         continue; <br/>      }<br/>      siblings<strong class="ng ir">.push(elem);<br/>   </strong>}</span><span id="c907" class="nk mo iq ng b gy nx nm l nn no">   return siblings;<br/>}</span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="6129" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">10.获取所有下一个兄弟姐妹</h1><p id="a4aa" class="pw-post-body-paragraph kw kx iq ky b kz np jr lb lc nq ju le lf nr lh li lj ns ll lm ln nt lp lq lr ij bi translated">我们可以使用<code class="fe nu nv nw ng b">nextElementSibling</code>来获取当前元素的下一个元素。然后我们可以循环直到最后一个元素。</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="4371" class="nk mo iq ng b gy nl nm l nn no">// jQuery<br/>$el.prevAll();<br/><br/>// JavaScript</span><span id="b562" class="nk mo iq ng b gy nx nm l nn no">function getNextSiblings(elem) {<br/>  var siblings = [];</span><span id="b380" class="nk mo iq ng b gy nx nm l nn no">   while ( <strong class="ng ir">elem = elem.</strong>nextElementSibling<strong class="ng ir"> </strong>) {     <br/>      if ( elem.nodeType === 3) { // ignore texts<br/>         continue; <br/>      }<br/>      siblings<strong class="ng ir">.push(elem);<br/>   </strong>}</span><span id="14c1" class="nk mo iq ng b gy nx nm l nn no">   return siblings;<br/>}</span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="05cc" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">11.查找与选择器最匹配的元素</h1><p id="f554" class="pw-post-body-paragraph kw kx iq ky b kz np jr lb lc nq ju le lf nr lh li lj ns ll lm ln nt lp lq lr ij bi translated"><code class="fe nu nv nw ng b">el.matches</code>检查元素是否是选择器。</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="5a19" class="nk mo iq ng b gy nl nm l nn no">// jQuery<br/><strong class="ng ir">$el.closest(selector);</strong><br/><br/>// Native - Only latest, NO IE<br/><strong class="ng ir">el.closest(selector);</strong><br/><br/>// Native - IE10+<br/>function closest(el, selector) {<br/>  const matchesSelector = el.matches || <br/>                          el.webkitMatchesSelector ||    <br/>                          el.mozMatchesSelector || <br/>                          el.msMatchesSelector;<br/><br/>  while (<strong class="ng ir">el</strong>) {<br/>    if (<strong class="ng ir">matchesSelector.call(el, selector) </strong>) {<br/>      return el;<br/>    } else {<br/><strong class="ng ir">      el = el.parentElement;</strong><br/>    }<br/>  }<br/>  return null;<br/>}</span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="aabc" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">12.获取元素的父元素</h1><p id="9d6a" class="pw-post-body-paragraph kw kx iq ky b kz np jr lb lc nq ju le lf nr lh li lj ns ll lm ln nt lp lq lr ij bi translated">为了获得当前元素的父元素，我们可以使用<code class="fe nu nv nw ng b">currentElement</code>上的<code class="fe nu nv nw ng b">parentElement</code>属性。</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="df72" class="nk mo iq ng b gy nl nm l nn no">// jQuery<br/>$(el).parent();</span><span id="641a" class="nk mo iq ng b gy nx nm l nn no">//JavaScript<br/><strong class="ng ir">el.parentElement</strong></span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="7704" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">13.获取元素的子元素</h1><p id="e83d" class="pw-post-body-paragraph kw kx iq ky b kz np jr lb lc nq ju le lf nr lh li lj ns ll lm ln nt lp lq lr ij bi translated">为了获得当前元素的子元素，我们可以在<code class="fe nu nv nw ng b">currentElement</code>上使用<code class="fe nu nv nw ng b">children</code>属性。</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="ebf0" class="nk mo iq ng b gy nl nm l nn no">//jQuery</span><span id="6584" class="nk mo iq ng b gy nx nm l nn no">$(el).children();</span><span id="c3e9" class="nk mo iq ng b gy nx nm l nn no">//JavaScript</span><span id="476e" class="nk mo iq ng b gy nx nm l nn no"><strong class="ng ir">el.children</strong></span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="76cf" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">14.去找<code class="fe nu nv nw ng b">the Body</code></h1><p id="d518" class="pw-post-body-paragraph kw kx iq ky b kz np jr lb lc nq ju le lf nr lh li lj ns ll lm ln nt lp lq lr ij bi translated">要获得<code class="fe nu nv nw ng b">body</code>元素，我们可以使用:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="9cac" class="nk mo iq ng b gy nl nm l nn no">// jQuery<br/>$('body');<br/><br/>// JavaScript<br/><strong class="ng ir">document.body;</strong></span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="ef96" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">15.IFrame文档</h1><p id="4373" class="pw-post-body-paragraph kw kx iq ky b kz np jr lb lc nq ju le lf nr lh li lj ns ll lm ln nt lp lq lr ij bi translated">要获取IFrame的文档:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="0d88" class="nk mo iq ng b gy nl nm l nn no">// jQuery<br/>$iframe.contents();<br/><br/>// Native<br/>iframe.contentDocument;</span></pre><p id="b27f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读。希望你喜欢这个。</p></div></div>    
</body>
</html>