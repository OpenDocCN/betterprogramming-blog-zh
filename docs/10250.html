<html>
<head>
<title>How to Create a Simple 2D Game in SpriteKit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在SpriteKit中创建简单的2D游戏</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/an-example-of-how-to-create-a-simple-2d-game-in-spritekit-fa8ee5fd11ed?source=collection_archive---------10-----------------------#2021-12-16">https://betterprogramming.pub/an-example-of-how-to-create-a-simple-2d-game-in-spritekit-fa8ee5fd11ed?source=collection_archive---------10-----------------------#2021-12-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6852" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">学习如何编码是一个过程</h2></div><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="kk kl l"/></div></figure><p id="fa74" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">编程很难。弄清楚如何让你的代码工作有时会令人沮丧。有时，你会开始怀疑自己是否能做到。学习编码可能看起来令人畏惧，但是迈出第一步很容易。获取任何新技能的知识都需要努力，学习如何编码也不例外。随着时间和努力，任何人都可以成为程序员。</p><h2 id="9103" class="li lj iq bd lk ll lm dn ln lo lp dp lq kv lr ls lt kz lu lv lw ld lx ly lz ma bi translated">什么是SpriteKit？</h2><p id="1c5b" class="pw-post-body-paragraph km kn iq ko b kp mb jr kr ks mc ju ku kv md kx ky kz me lb lc ld mf lf lg lh ij bi translated">SpriteKit是苹果通过Swift为iOS创建2D游戏的框架，Swift是苹果开发应用的专有语言。我做了这个简单的游戏，遵循了保罗·哈德森在Swift网站上的教程。该游戏是Paul网站上Swift天系列的一部分。如果你对iOS开发或编程感兴趣，这是一个很好的资源。本文的目的是从技术角度展示这个游戏，并教你一点关于SpriteKit的知识。</p><h2 id="81a2" class="li lj iq bd lk ll lm dn ln lo lp dp lq kv lr ls lt kz lu lv lw ld lx ly lz ma bi translated">我们如何让球有弹性？</h2><pre class="kf kg kh ki gt mh mi mj mk aw ml bi"><span id="8d11" class="li lj iq mi b gy mm mn l mo mp"><strong class="mi ir">let</strong> ball = SKSpriteNode(imageNamed: "ballRed")</span><span id="2f4a" class="li lj iq mi b gy mq mn l mo mp">ball.physicsBody = SKPhysicsBody(circleOfRadius: ball.size.width / 2.0)</span><span id="dafe" class="li lj iq mi b gy mq mn l mo mp">ball.physicsBody?.restitution = 0.4</span><span id="2449" class="li lj iq mi b gy mq mn l mo mp">ball.physicsBody?.contactTestBitMask = ball.physicsBody?.collisionBitMask ?? 0</span><span id="52db" class="li lj iq mi b gy mq mn l mo mp">ball.position = location</span><span id="f342" class="li lj iq mi b gy mq mn l mo mp">ball.name = "ball"</span><span id="a0ff" class="li lj iq mi b gy mq mn l mo mp">addChild(ball)</span></pre><p id="12ea" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这里我们创建了变量“ball”的一个<code class="fe mr ms mt mi b">SKSpriteNode</code>(sk node的子类，是SpriteKit的基础构造块)。</p><p id="d959" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">接下来，我们给一个<code class="fe mr ms mt mi b">SKPhysicsBody</code>赋值一个circleOfRaidus初始化器，这将赋予我们的球某种类型的物理特性。之后，我们添加恢复到我们的物理身体，给我们的球一些弹性。</p><p id="2298" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">接下来，我们添加一个<code class="fe mr ms mt mi b">contactTestBitMask</code>，并将其设置为<code class="fe mr ms mt mi b">collisionBitMask</code>的值。这会告诉我们的代码让我们知道游戏中发生的每一次碰撞。<code class="fe mr ms mt mi b">ball.position = location</code>语法告诉我们的游戏在我们点击屏幕的位置放下一个球，而<code class="fe mr ms mt mi b">ball.name = ball</code>语法告诉我们在代码中创建的所有sprite节点中，我们知道哪些是球。</p><p id="2009" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">最后，我们将<code class="fe mr ms mt mi b">addChild</code>函数添加到“ball”中，这将把节点添加到我们的场景中。</p><h2 id="8d28" class="li lj iq bd lk ll lm dn ln lo lp dp lq kv lr ls lt kz lu lv lw ld lx ly lz ma bi translated">当球击中插槽时会发生什么？</h2><pre class="kf kg kh ki gt mh mi mj mk aw ml bi"><span id="dfa4" class="li lj iq mi b gy mm mn l mo mp"><strong class="mi ir">func</strong> collision(between ball: SKNode, object: SKNode) {</span><span id="0015" class="li lj iq mi b gy mq mn l mo mp"><strong class="mi ir">if</strong> object.name == "good"{</span><span id="85be" class="li lj iq mi b gy mq mn l mo mp">destroy(ball: ball)</span><span id="3322" class="li lj iq mi b gy mq mn l mo mp">score += 1</span><span id="d63e" class="li lj iq mi b gy mq mn l mo mp">} <strong class="mi ir">else</strong> <strong class="mi ir">if</strong> object.name == "bad"{</span><span id="8831" class="li lj iq mi b gy mq mn l mo mp">destroy(ball: ball)</span><span id="489b" class="li lj iq mi b gy mq mn l mo mp">score -= 1</span><span id="c698" class="li lj iq mi b gy mq mn l mo mp">}</span><span id="8147" class="li lj iq mi b gy mq mn l mo mp">}</span><span id="ebe3" class="li lj iq mi b gy mq mn l mo mp"><strong class="mi ir">func</strong> destroy(ball: SKNode) {</span><span id="e27f" class="li lj iq mi b gy mq mn l mo mp"><strong class="mi ir">if</strong> <strong class="mi ir">let</strong> fireParticles = SKEmitterNode(fileNamed: "FireParticles") {</span><span id="b0c9" class="li lj iq mi b gy mq mn l mo mp">fireParticles.position = ball.position</span><span id="34f0" class="li lj iq mi b gy mq mn l mo mp">addChild(fireParticles)</span><span id="861f" class="li lj iq mi b gy mq mn l mo mp">}</span><span id="88ce" class="li lj iq mi b gy mq mn l mo mp">ball.removeFromParent()</span><span id="1b47" class="li lj iq mi b gy mq mn l mo mp">}</span></pre><p id="e446" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这个代码告诉我们的游戏要么在球击中绿色插槽时给玩家加分，要么在球击中红色插槽时扣分。如果球击中红色插槽，将播放一个火粒子动画。</p><p id="de01" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这都是通过函数来完成的，函数是一组规则，告诉应用程序执行一项任务。“碰撞”函数内部是一个if-else语句。If-else语句告诉应用程序在满足特定条件时运行一段代码。</p><p id="7a93" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">如果一个条件为真，那么代码将运行，否则，如果条件为假，它将不会运行。一旦球击中插槽，调用“销毁”功能，球将从我们的场景中移除。</p><h2 id="b614" class="li lj iq bd lk ll lm dn ln lo lp dp lq kv lr ls lt kz lu lv lw ld lx ly lz ma bi translated">给我们的玩家制造障碍</h2><pre class="kf kg kh ki gt mh mi mj mk aw ml bi"><span id="aa67" class="li lj iq mi b gy mm mn l mo mp"><strong class="mi ir">let</strong> size = CGSize(width: Int.random(<strong class="mi ir">in</strong>: 16...128), height: 16)</span><span id="ebf4" class="li lj iq mi b gy mq mn l mo mp"><strong class="mi ir">let</strong> box = SKSpriteNode(color: UIColor(red: CGFloat.random(<strong class="mi ir">in</strong>: 0...1), green: CGFloat.random(<strong class="mi ir">in</strong>: 0...1), blue: CGFloat.random(<strong class="mi ir">in</strong>: 0...1), alpha: 1), size: size)</span><span id="d1dd" class="li lj iq mi b gy mq mn l mo mp">box.zRotation = CGFloat.random(<strong class="mi ir">in</strong>: 0...3)</span><span id="ab9b" class="li lj iq mi b gy mq mn l mo mp">box.position = location</span><span id="2903" class="li lj iq mi b gy mq mn l mo mp">box.physicsBody = SKPhysicsBody(rectangleOf: box.size)</span><span id="9cac" class="li lj iq mi b gy mq mn l mo mp">box.physicsBody?.isDynamic = <strong class="mi ir">false</strong></span><span id="e788" class="li lj iq mi b gy mq mn l mo mp">addChild(box)</span></pre><p id="5351" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这段代码允许我们在每次点击屏幕时创建不同长度和颜色的盒子。</p><p id="cec5" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><code class="fe mr ms mt mi b">CGSize</code>创建不同大小的精灵节点，然后我们使用一个<code class="fe mr ms mt mi b">SKSpriteNode</code>来创建不同颜色的节点。然后我们将<code class="fe mr ms mt mi b">zRotation</code>添加到我们的“盒子”变量中，这将允许我们的盒子在屏幕上旋转。</p><p id="6be1" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">然后我们添加一个<code class="fe mr ms mt mi b">physicsBody</code>和一个<code class="fe mr ms mt mi b">rectangleOf</code>初始化器来制造障碍。之后，我们将<code class="fe mr ms mt mi b">isDynamic</code>属性添加到我们的物理体中，并将其设置为false。这将允许我们的障碍上有物理，但一旦一个球与它们碰撞，它们将不会移动。</p><p id="8fc6" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">如果你刚刚开始学习编码，Swift是一个很好的学习语言，如果你想在iOS中开发游戏，SpriteKit是一个很好的工具。我希望这篇文章能给你提供信息，帮助你以任何方式学习编程。</p></div></div>    
</body>
</html>