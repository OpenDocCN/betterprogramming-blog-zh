<html>
<head>
<title>How Large or Small Should an Issue Be?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">发行规模应该有多大？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-large-or-small-should-an-issue-be-4b6b8d6226b2?source=collection_archive---------3-----------------------#2022-09-10">https://betterprogramming.pub/how-large-or-small-should-an-issue-be-4b6b8d6226b2?source=collection_archive---------3-----------------------#2022-09-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a96e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">构成一个独立问题的5条规则，以及一个将Apache Beam任务分解成问题的例子。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7ec5e3b0b2ce1265ce6bcd87892cf803.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EjBt1-5CX6VCkh4r"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@esteejanssens?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">埃斯特扬森斯</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="61ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">问题的重点是跟踪变化的进程和阶段。所以我的原则是尽可能减少问题:</p><ul class=""><li id="a6e3" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">工作，不会损坏。</li><li id="3bfd" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">可以用一句话概括。</li><li id="913e" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">在比代码更高的层次上改变一些东西。</li><li id="a4db" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">对至少一个相关方是有价值的。</li><li id="6f0a" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">如果我想测试这个的话。</li></ul><h1 id="9b59" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">更大问题的问题</h1><p id="160d" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">比这更大的问题会带来以下问题:</p><ul class=""><li id="7cd5" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">编码时间越长，分支就会过时。您可以将这样一个问题分成多个分支，但是这就破坏了问题的目的，即跟踪一个变更的各个阶段。</li><li id="19ab" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">来自评审者的反馈被推迟。</li><li id="4ac1" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">评审期间的更多迭代。</li><li id="29fa" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">更难合并。</li><li id="c755" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">涉及不同专业的评审人员。</li><li id="641d" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">会阻止依赖于它的工作。</li><li id="5c1f" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">范围太广-如果您需要稍后检查某行的历史记录，则提交消息。</li><li id="23ed" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">经理更难看到状态。</li><li id="4e7a" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">工作因休假或病假而中断的风险。</li><li id="754f" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">部署前的挫折。</li></ul><p id="b512" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来看一个变更，看看如何正确地将它分成几个问题。</p><h1 id="9e8e" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">一个变化的例子</h1><p id="8a6e" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated"><a class="ae kv" href="https://beam.apache.org" rel="noopener ugc nofollow" target="_blank"> Apache Beam </a>的文档嵌入了可运行的代码样本:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/8470b4ce0afe085882ccd34c8d8960a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uqXFvEa-FKmXhzaVsbp5HA.png"/></div></div></figure><p id="4e41" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要像这样添加一个语言开关，因为示例使用不同的语言:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/01263ac286042599f1114eb63e611171.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lLkiNinJzQ5Tm79qj9kTmg.png"/></div></div></figure><p id="987c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个嵌入式编辑器是一个Flutter app，围绕它的网站是一个由<a class="ae kv" href="https://gohugo.io" rel="noopener ugc nofollow" target="_blank"> Hugo </a>处理器从Markdown文件生成的静态HTML。</p><h1 id="44ff" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">从一个问题开始</h1><p id="cabd" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">首先，您希望所有这些工作作为一个整体是可跟踪的。于是你创建了一个类似<strong class="ky ir"> <em class="nf">“嵌入式编辑器中的语言切换”</em> </strong>的问题。</p><p id="cab3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">即使在这个高层次上，你也必须决定什么是超出范围的。作为开发人员，团队需要向文档团队提供这一特性，而不是到处嵌入。所以我们决定嵌入一个更新编辑器的实例，让其他人来更新文档的其余部分。</p><h1 id="d52a" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">高级分解</h1><p id="0b59" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">这个高层次的问题需要进行分类。在此阶段，我们决定:</p><ul class=""><li id="f907" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">将语言开关留在HTML中，因为它必须与一些现有的开关和用户设置保持一致。</li><li id="b82d" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">让一个带有Flutter的iframe服务于所有语言，以避免额外的iframe来节省资源。</li><li id="c283" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">让外部JavaScript调用iframe上的<code class="fe ng nh ni nj b">postMessage</code>命令它改变语言。</li></ul><p id="8ae2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这三点可以在那一期的版面上讨论。不要急着创建这3个子问题，因为我们必须首先定义它们之间的边界，看看它们是否可以进一步分割。</p><h1 id="5bbc" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">低级别的问题</h1><p id="9442" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">当高层计划达成一致时，我们定义低层问题:</p><h2 id="469b" class="nk mh iq bd mi nl nm dn mm nn no dp mq lf np nq ms lj nr ns mu ln nt nu mw nv bi translated">1.在编辑器中维护多个状态</h2><p id="6b9b" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">恰好编辑器也有一个非嵌入式的屏幕，有自己的语言开关。它在切换时重置内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/b843de66192bb2b3dd3c7156c8bfbdaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*V8XE0w7WkXkjqSUEEbWdEQ.png"/></div></figure><p id="06fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以编辑知道不同的语言。如果它能够在切换到Java和切换回Java时保留Java代码中的更改，这本身就是有价值的，并且是可测试的，并且有资格成为一个问题。</p><p id="56a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一方面，如果我们只有嵌入式编辑器，这种变化不可能被很好地隔离。</p><h2 id="9fb4" class="nk mh iq bd mi nl nm dn mm nn no dp mq lf np nq ms lj nr ns mu ln nt nu mw nv bi translated">2.使用URL加载多个代码示例</h2><p id="b8a5" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">iframe必须在启动时加载这四个样本。我们在URL中的JSON中传递样本id:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/a1154773c7035d6f945b699da2e8c181.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zjO1vmnzG8dcMi-HLpAb9Q.png"/></div></div></figure><p id="8364" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这取决于前一期是否完成。这满足了所有5项要求，有资格单独发行。</p><p id="1c6a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还没有谈到延迟加载，因为编辑器在启动时从服务器加载所有的例子(这还处于早期阶段)。</p><h2 id="96dc" class="nk mh iq bd mi nl nm dn mm nn no dp mq lf np nq ms lj nr ns mu ln nt nu mw nv bi translated">3.用JavaScript消息切换编辑器语言</h2><p id="fbde" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">iframe必须能够接收并处理其他浏览器窗口发送的消息。</p><p id="2da5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果没有发送消息的代码就看不到它，这又是一个什么问题呢？</p><p id="93a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它处于JavaScript和Flutter的边界。即使一个开发者两者都做了，边界本身也产生了对孤立感兴趣的各方。这些是:</p><ul class=""><li id="235a" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">测试人员。</li><li id="4abe" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">评论者。JavaScript和Flutter代码由Apache中的不同成员审查。评审者必须确保边界另一边的东西是稳定的，所以理想情况下它们已经被部署或者至少被合并了。此外，当一个大的PR更新了他们的专业知识之外的变化时，一个评论者不想要噪音。</li><li id="9f86" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">DevOps。当部署更改后的网站时，Flutter应用程序必须已经能够处理消息。所以必须早点部署。所有可部署的东西都必须是一个独立的问题，因为它将许多事情分为“之前”和“之后”。</li></ul><p id="a021" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们能进一步讨论这个问题吗？除了改变已经计划好的SDK，还有其他类型的消息。我们可以将消息解析器作为一个单独的问题，然后是这个特定的消息处理程序吗？</p><p id="6b45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不会，因为解析器本身对任何人都没有价值，它不会在比代码更高的层次上改变任何东西。消息解析器必须总是带有解析内容的最小处理程序。</p><p id="f19b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其他消息和它们的解析器肯定会单独发行。</p><h2 id="66a2" class="nk mh iq bd mi nl nm dn mm nn no dp mq lf np nq ms lj nr ns mu ln nt nu mw nv bi translated">4.创建编辑器iframe的短代码</h2><p id="b322" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">文档维护者不嵌入iframes。相反，他们这样写Markdown:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/c520ce98a75c0e5d784e235ec6d70a46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tMU1pmyFIwxUHDWy89tZ7w.png"/></div></div></figure><p id="0125" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">突出显示的一行是所谓的“短代码”。它是Hugo处理器的一个宏，在Markdown中生成HTML。这就是单语言编辑器如何嵌入到Beam文档中的。</p><p id="fecc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们必须创建新的短代码，以便像这样使用:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/9bccb41c36c705769d56f8bd66a3eb85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1NP2GDy4NtlwtLtAqYnlVA.png"/></div></div></figure><p id="3829" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是我们还没有可以向交换机发送消息的标签。没有它们，结果与早期的单一语言编辑器完全不同。唯一可测试的是用给定的URL生成一个iframe来加载所有4个样本。</p><p id="bad1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这刚好够资格单独发行。</p><p id="6def" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">雨果的简写代码是用一种奇怪的语言写的，这种语言会被单独审查。记住语言边界规则。</p><p id="3d09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这确实是一个边缘案例。所以我们做了一个单独的问题，但是在一次公关中做了改变。这也很好。</p><p id="301c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这比一个问题有多个PRs要好得多。如果只是部分合并，问题的状态是什么？这是最坏的情况。</p><h2 id="1f29" class="nk mh iq bd mi nl nm dn mm nn no dp mq lf np nq ms lj nr ns mu ln nt nu mw nv bi translated">5.在语言开关中发送消息</h2><p id="3f3c" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">在Apache Beam文档中，我们已经有了针对不可运行代码的语言切换:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/c2209dae2d80e8ee6b8239a6f93c6614.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2KCl_6cmOrTlJPtvvRTt7w.png"/></div></div></figure><p id="b1fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是我们没有为标签单独发行的原因。</p><p id="f750" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以我们只需要进入选项卡来获取iframe并向它发送消息。</p><h2 id="0ae0" class="nk mh iq bd mi nl nm dn mm nn no dp mq lf np nq ms lj nr ns mu ln nt nu mw nv bi translated">6.嵌入带有语言开关的示例编辑器实例</h2><p id="bdda" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">这个和上面是分开的。主要原因是不同的方面对这两个部分感兴趣。</p><ul class=""><li id="a2be" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">开发人员希望合并新特性，这样分支就不会过时。</li><li id="d401" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">管理层想要决定何时何地放置这个示例可切换编辑器。</li></ul><p id="820c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">即使这样也足以将这两个问题分开。</p><h1 id="593c" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">将问题联系起来</h1><p id="a5ac" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">低级别问题可以创建为高级别问题的子问题。编辑问题时，使用该按钮或只需输入<br/> <code class="fe ng nh ni nj b">- [ ]</code>即可添加任务列表</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/d666d8712adcd64257c546ef5b3a6790.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*9krF1uXCbtwITB8ud6ZQAQ.png"/></div></figure><p id="6af2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您会看到一个复选框列表，其中每一行都可以转换为一个单独的问题:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/e6ac72747d8fc7df6653841a225ddf41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*Gt263_Zj749xvdbW3aqjaA.png"/></div></figure><p id="77c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你给自己找了个新问题:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/687bc49d65820f4aaaa9d27903da5d26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*zSzvUzugazT6wq-ef1bKyg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">不是没有一个GitHub的错误与 </p></figure><p id="78c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是了。</p><p id="8cb1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你曾经因为太大或太小的问题而遇到过问题吗？</p></div></div>    
</body>
</html>