<html>
<head>
<title>3 Tips to Improve Your Git Submodule Knowledge</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">提高Git子模块知识的3个技巧</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/3-tips-to-improve-your-git-submodule-knowledge-171b10481a5a?source=collection_archive---------9-----------------------#2021-01-13">https://betterprogramming.pub/3-tips-to-improve-your-git-submodule-knowledge-171b10481a5a?source=collection_archive---------9-----------------------#2021-01-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="8145" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">如何顺畅地使用Git子模块</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/72d2a8888dfdbc09f19beadabc08499c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KQb8zMZZ1yvJazOR"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae kz" href="https://unsplash.com/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Yancy Min </a>拍摄。</p></figure><p id="f2cb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">用Git处理大型代码库会导致<code class="fe lw lx ly lz b">git fetch</code>命令出现问题。你不需要整个代码库来改变一些样式。</p><p id="3d5f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">假设您正在构建一个面向服务的应用程序。推动对单一回购协议的改变将会造成混乱。如果没有适当的提交消息，您将会看到一大堆不相关的提交。</p><p id="03f1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">提交单独的Git子模块可能会有所帮助。“子模块”将repo分成更小的代码库。分离关注点将导致更好的代码组织。例如，每个服务一个子模块将是一个好的开始。</p><p id="7301" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在本文中，我将尝试拓宽您在Git子模块方面的知识。这篇文章包含了每天拯救我生命的三个技巧。通读，直到结束一个甜蜜的奖励提示。</p><p id="789c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们开始吧。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="ade6" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">1.使用SourceTree管理Git子模块</h1><p id="cb97" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">下图显示了一个可能的Git子模块设置。我们已经将客户端应用程序、服务器和解析器服务分成了Git子模块。</p><p id="ef51" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://www.sourcetreeapp.com/" rel="noopener ugc nofollow" target="_blank"> SourceTree </a>提供了良好的Git子模块支持。该图显示了Git子模块的根。在<code class="fe lw lx ly lz b">STASHES</code>菜单下面，你可以展开<code class="fe lw lx ly lz b">SUBMODULES</code>菜单。</p><p id="8231" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">有三个点的图标的Git子模块有一些未分级的变化。在这种情况下，<code class="fe lw lx ly lz b">csv-api</code>子模块有一些变化。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ne"><img src="../Images/2fc6ad8db25e0927e94f7049a7d732a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dD8mYkU_CFr9VTwG9UBoHA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">在SourceTree中打开的Git子模块的根</p></figure><p id="ce79" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">双击将在新的选项卡中打开子模块。你可以在下图中看到:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ne"><img src="../Images/98c72e9d5177952e8e0c5e6e1538b084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6DXl_ZcsSpRjJaaI16V0LQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">源代码树中打开了一个子模块</p></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nf"><img src="../Images/3b7e28a931e15a716f402c3562db13e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wKi9t39t6S5i3MTWaB3D1Q.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">根子模块的GitLab视图</p></figure><p id="4a74" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">使用SourceTree，我从未遇到过Git子模块的任何问题。你总能看到你的子模块发生了什么。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="271f" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">2.注意分离的头部指针</h1><p id="dbba" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">有一点要记住:当使用Git子模块时，你总是有一个分离的T4。这是因为您正在处理提交，而不是分支。注意<code class="fe lw lx ly lz b">HEAD</code>在子模块中指向哪里，因为这可以决定项目的成败。</p><pre class="kk kl km kn gu ng lz nh ni aw nj bi"><span id="6692" class="nk mi iu lz b gz nl nm l nn no">$ git status     <br/>HEAD detached at 3557a0e<br/>     nothing to commit, working directory clean</span></pre><p id="b612" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当您在SourceTree应用程序中打开子模块时，您会看到这个视图。子模块总是处于分离的<code class="fe lw lx ly lz b">HEAD</code>模式，并且<code class="fe lw lx ly lz b">HEAD</code>可以指向旧的代码版本。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj np"><img src="../Images/5eddd569273ea41477bfd9e69086fbe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JeVqGfA0CZ7H1MX7JJuAIg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">HEAD在旧版本上，而develop分支在进步。</p></figure><p id="27a2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在子模块中添加代码更改总是会触发两个PR:一个PR在实际的子模块上，另一个PR在根子模块中放置子模块引用。子模块引用必须指向特征分支上的最新提交散列。</p><p id="0f2a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">你可以在这篇文章中了解更多关于<a class="ae kz" href="https://www.git-tower.com/learn/git/ebook/en/command-line/advanced-topics/submodules/#working-in-a-submodule" rel="noopener ugc nofollow" target="_blank">的信息。</a></p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="8060" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">3.进行适当的代码基础分割</h1><p id="fec3" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">我提到的一个例子是进行基于服务的拆分。如果服务是逻辑密集型的，这可能是有用的。否则，如果不需要，就不要过度工程。</p><p id="765b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在大型团队中工作时，拆分代码非常方便。通过这种方式，您不必获取整个代码库，而只获取其中的一部分。</p><p id="0e2a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">尽管您应该有独立的关注点，但这并不意味着您需要子模块。适当的包管理比子模块做得更好。</p><p id="06e6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">本文更详细地解释了子模块:</p><div class="nq nr gq gs ns nt"><a href="https://medium.com/@porteneuve/mastering-git-submodules-34c65e940407" rel="noopener follow" target="_blank"><div class="nu ab fp"><div class="nv ab nw cl cj nx"><h2 class="bd iv gz z fq ny fs ft nz fv fx it bi translated">掌握Git子模块</h2><div class="oa l"><h3 class="bd b gz z fq ny fs ft nz fv fx dk translated">揪头发。无助的愤怒。一群混蛋。它们还有很多不尽人意的地方，但有时却是这项工作的合适工具…</h3></div><div class="ob l"><p class="bd b dl z fq ny fs ft nz fv fx dk translated">medium.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh kt nt"/></div></div></a></div></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="b99e" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">额外收获:在SourceTree中使用自定义操作</h1><p id="35d2" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">自定义操作改善了SourceTree环境。他们可以执行不同的Git活动。我用它们来修改、强制推送和更新。</p><p id="3c05" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">添加新动作时，可以设置带有自定义热键的自定义动作。我用得最多的是更新子模块。你可以检查这个<a class="ae kz" href="https://github.com/yzhong52/SourceTreeX" rel="noopener ugc nofollow" target="_blank">回购</a>，获取更多满足你需求的行动。</p><pre class="kk kl km kn gu ng lz nh ni aw nj bi"><span id="a52e" class="nk mi iu lz b gz nl nm l nn no"># update_submodules.sh</span><span id="0fc6" class="nk mi iu lz b gz oi nm l nn no">#!/bin/bash</span><span id="f537" class="nk mi iu lz b gz oi nm l nn no">git submodule update</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ne"><img src="../Images/a15d03285bac2dd69a44e2821522f102.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vYyMOXLjOVuzTH_uKrBfKw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">编辑自定义操作</p></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ne"><img src="../Images/b51fbacbcee77b8d8a66a84145a8b2a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CKSGeC92sKVUUHLdndARxw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">更新子模块操作</p></figure></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="6cd4" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">继续阅读相关文章</h1><div class="nq nr gq gs ns nt"><a href="https://levelup.gitconnected.com/5-common-git-mistakes-every-developer-makes-988cb563aee1" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fp"><div class="nv ab nw cl cj nx"><h2 class="bd iv gz z fq ny fs ft nz fv fx it bi translated">每个开发人员经常犯的5个Git错误</h2><div class="oa l"><h3 class="bd b gz z fq ny fs ft nz fv fx dk translated">以及如何立即解决Sourcetree中的常见问题</h3></div><div class="ob l"><p class="bd b dl z fq ny fs ft nz fv fx dk translated">levelup.gitconnected.com</p></div></div><div class="oc l"><div class="oj l oe of og oc oh kt nt"/></div></div></a></div><div class="nq nr gq gs ns nt"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-resolve-git-conflicts-faster-and-more-easily-in-your-favorite-ide-9d2984283a79"><div class="nu ab fp"><div class="nv ab nw cl cj nx"><h2 class="bd iv gz z fq ny fs ft nz fv fx it bi translated">如何在您喜欢的IDE中更快更容易地解决Git冲突</h2><div class="oa l"><h3 class="bd b gz z fq ny fs ft nz fv fx dk translated">解决VS代码、IntelliJ、Nano和Sourcetree中的git冲突</h3></div><div class="ob l"><p class="bd b dl z fq ny fs ft nz fv fx dk translated">better编程. pub</p></div></div><div class="oc l"><div class="ok l oe of og oc oh kt nt"/></div></div></a></div><div class="nq nr gq gs ns nt"><a rel="noopener  ugc nofollow" target="_blank" href="/avoid-a-dirty-git-repo-4e9518d7914c"><div class="nu ab fp"><div class="nv ab nw cl cj nx"><h2 class="bd iv gz z fq ny fs ft nz fv fx it bi translated">避免肮脏的Git回购</h2><div class="oa l"><h3 class="bd b gz z fq ny fs ft nz fv fx dk translated">如何清理你的Git回购</h3></div><div class="ob l"><p class="bd b dl z fq ny fs ft nz fv fx dk translated">better编程. pub</p></div></div><div class="oc l"><div class="ol l oe of og oc oh kt nt"/></div></div></a></div></div></div>    
</body>
</html>