<html>
<head>
<title>Using Heroku To Deploy an Angular App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Heroku部署Angular应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/using-heroku-to-deploy-an-angular-app-5be838ef1de7?source=collection_archive---------11-----------------------#2019-12-17">https://betterprogramming.pub/using-heroku-to-deploy-an-angular-app-5be838ef1de7?source=collection_archive---------11-----------------------#2019-12-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="990a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使部署变得顺畅和容易</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a6c8b04c8687e8f653c2f24084a1da75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*piyq-oA2Yq_riQy5"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">伊恩·施耐德在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="d4ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个好的程序员有时喜欢牺牲几个晚上的空闲时间来熟悉他们从未接触过的技术。它经常在那里停止，因为他们有一个忙碌的工作，孩子，或一个有趣的爱好。他们不想再花一个晚上来部署他们的应用程序，因为他们可以散散步或喝一品脱啤酒。但是，向外界展示你的作品是非常重要的。</p><p id="96f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查德·福勒的书《激情程序员<a class="ae ky" href="https://www.amazon.com/Passionate-Programmer-Remarkable-Development-Pragmatic-ebook/dp/B00AYQNR5U" rel="noopener ugc nofollow" target="_blank">强调了这一点。这本书把我们带回到这个哲学问题上:“如果一个苹果从树上掉到森林里，而没有人能感知它，那么这个苹果掉了吗？”答案似乎只有一个逻辑答案:“是的，当然！”但是苹果有没有掉下来并不重要；对外界没有影响。如果一个程序员不能向外界展示他们的新体验，他们可能会以不同的方式度过晚上——没有人会醒着躺着。正是通过与世界分享这种经验，才创造了“价值”。</a></p><p id="9e48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以我们来到了这里。我是一名26岁的程序员，我想创建一个有棱角的网站，用最新的框架向外界展示它们。本文将向您展示如何使用Heroku部署Angular应用程序。这不是教你有角度的教程。本教程将向您展示以下内容:</p><ul class=""><li id="15e9" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">创建角度应用程序</li><li id="9fab" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">在Heroku上自动部署</li><li id="b2a6" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">如何部署Angular app</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="c6c1" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">创建角度应用程序</h1><p id="bf00" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">您可以使用Angular CLI通过执行以下命令来生成新项目:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="bc75" class="ns mr it no b gy nt nu l nv nw"><strong class="no iu">ng new</strong> &lt;my-application-name&gt;</span></pre><p id="8989" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了确保一切顺利，请执行以下操作:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="b25c" class="ns mr it no b gy nt nu l nv nw"><strong class="no iu">cd</strong> helloworld<br/><strong class="no iu">ng serve</strong></span></pre><p id="343c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不得不提的是，我也是GitLab的忠实粉丝，可惜目前还没有和Heroku的整合。然而，GitHub在某些方面正在赶上GitLab(例如，通过使私有库免费)。</p><p id="656c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您的应用程序就在那里，并且在本地工作。我们把这个推给GitHub吧。在GitHub上创建一个新的存储库，并打开您的终端。禁用以下行:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="200c" class="ns mr it no b gy nt nu l nv nw"><strong class="no iu">git remote add origin</strong> &lt;github_repository_url&gt;<br/><strong class="no iu">git add</strong> .<br/><strong class="no iu">git commit -m</strong> “Creation of the new application &lt;my-application-name&gt;”<br/><strong class="no iu">git push -u origin master</strong></span></pre><p id="440d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不是直推大师分支的粉丝，但这只是一个教程。如果您想正确地这样做，请确保创建一个分支并合并。恭喜你！你设法把你的代码推送到GitHub。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="13c4" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">GitHub自动部署</h1><p id="705d" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">为了实现自动部署，我们首先需要创建一个Heroku帐户。完成后，我们可以添加一个新的应用程序。按下新建按钮。给应用起个名字<em class="nx"> &lt;我的应用名字&gt; </em>，选择一个地区，按创建app。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/929bb44f308a9459461b3c7a05f62b10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EQtv6tmjWEQOhtQK"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/ef999e44796d4a30fd65cb8669cb3b02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/0*3RdCcPetmRhts_-R"/></div></figure><p id="b6c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在“部署”菜单的“部署方法”下，选择GitHub。使用存储库搜索字段将您的存储库连接到正确的存储库。此外，启用自动部署。这样，主分支将自动部署。您应该会看到类似下面的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/e8864ec2da2fe7e3a07e1102a4a73496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*K6rbwj-OZgHCgt7agyhYgQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">自动部署Heroku</p></figure><p id="5707" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还没有部署任何东西，因为自从我们打开自动部署后，还没有推送任何东西。在手动部署下，单击一次部署分支。这将触发第一次部署。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="a3ec" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">如何部署Angular App？</h1><p id="ae1c" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在package.json中的“scripts”下，添加一个后期构建脚本。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="d93a" class="ns mr it no b gy nt nu l nv nw">"heroku-postbuild": "ng build --aot --prod"</span></pre><p id="bd01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还要在依赖项中添加angular/compiler、angular/compiler-cli、angular/cli、typescript和express。您最终的package.json可能看起来有点像我的:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="78d3" class="ns mr it no b gy nt nu l nv nw">{<br/>  "name": "website",<br/>  "version": "0.0.0",<br/>  "license": "MIT",<br/>  "scripts": {<br/>    "ng": "ng",<br/>    "start": "node server.js",<br/>    "build": "ng build",<br/>    "test": "ng test",<br/>    "lint": "ng lint",<br/>    "e2e": "ng e2e",<br/>    "heroku-postbuild": "ng build --aot -prod"<br/>  },<br/>  "private": true,<br/>  "dependencies": {<br/>    "@angular/animations": "^8.2.0",<br/>    "@angular/common": "^8.2.0",<br/>    "@angular/compiler": "^8.2.0",<br/>    "@angular/compiler-cli": "8.2.0",<br/>    "@angular/cli": "8.2.0",<br/>    "@angular/core": "^8.2.0",<br/>    "@angular/forms": "^8.2.0",<br/>    "@angular/platform-browser": "^8.2.0",<br/>    "@angular/platform-browser-dynamic": "^8.2.0",<br/>    "@angular/router": "^8.2.0",<br/>    "core-js": "^2.6.9",<br/>    "express": "^4.17.1",<br/>    "rxjs": "^6.5.2",<br/>    "typescript": "~3.5.3",<br/>    "zone.js": "~0.9.1"<br/>  },<br/>  "devDependencies": {<br/>    "@angular/language-service": "8.2.0",<br/>    "@types/jasmine": "~2.8.8",<br/>    "@types/jasminewd2": "~2.0.3",<br/>    "@types/node": "~8.9.4",<br/>    "codelyzer": "~4.5.0",<br/>    "jasmine-core": "~2.99.1",<br/>    "jasmine-spec-reporter": "~4.2.1",<br/>    "karma": "~4.0.0",<br/>    "karma-chrome-launcher": "~2.2.0",<br/>    "karma-coverage-istanbul-reporter": "~2.0.1",<br/>    "karma-jasmine": "~1.1.2",<br/>    "karma-jasmine-html-reporter": "^0.2.2",<br/>    "protractor": "~5.4.0",<br/>    "ts-node": "~7.0.0",<br/>    "tslint": "~5.11.0"<br/>  },<br/>  "engines": {<br/>    "node": "10.15.3",<br/>    "npm": "6.9.0"<br/>  }<br/>}</span></pre><p id="3c7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这告诉Heroku如何构建应用程序。这将触发构建，创建一个包含所有HTML和JavaScript代码的静态dist文件夹。我们唯一能做的就是提供一种启动应用程序的方法。我们需要一个服务器来启动应用程序。我们为此使用节点。将下面一行添加到“脚本:”</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="bac8" class="ns mr it no b gy nt nu l nv nw">"start": "node server.js",</span></pre><p id="ed57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还需要添加节点和NPM引擎，以便节点可以启动应用程序。要获得当前的正确版本，您需要执行以下命令node -v和npm -v。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="b335" class="ns mr it no b gy nt nu l nv nw">“engines”: { <br/>  “node”: “10.15.3”,<br/>  “npm”: “6.9.0”<br/>},</span></pre><p id="db04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们还需要一个节点服务器。为此，我们首先需要安装Express:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="b6dd" class="ns mr it no b gy nt nu l nv nw">npm install express path –save</span></pre><p id="30f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后添加一个具有类似内容的server.js文件，并用您的名称替换该应用程序名称:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="ec48" class="ns mr it no b gy nt nu l nv nw">// Install express server <br/>const express = require('express');<br/>const path = require('path');<br/>const app = express();</span><span id="5dd1" class="ns mr it no b gy ob nu l nv nw">// Serve only the static files form the dist directory</span><span id="bf99" class="ns mr it no b gy ob nu l nv nw">app.use(express.static(__dirname + '/dist/website'));<br/>app.get('/*', function(req, res) {<br/>  res.sendFile(path.join(__dirname + '/dist/website/index.html'));<br/>});</span><span id="ce52" class="ns mr it no b gy ob nu l nv nw">// Start the app by listening on the default Heroku port</span><span id="fe99" class="ns mr it no b gy ob nu l nv nw">app.listen(process.env.PORT || 8080);</span></pre><p id="5f50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们把这些变化推给GitHub。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="e310" class="ns mr it no b gy nt nu l nv nw">git add .<br/>git commit -m “Updates to make application go live”<br/>git push</span></pre><p id="b188" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我来指导你。你的代码会被推送到GitHub。Heroku监听这些更改，并在将新代码推送到存储库后立即检索它。它安装应用程序，构建应用程序，并执行安装后脚本。Node Express服务器启动并显示您的应用程序。不久之后，您的应用程序将在一个静态URL上可用，比如https://dj-website.herokuapp.com的<a class="ae ky" href="https://dj-website.herokuapp.com" rel="noopener ugc nofollow" target="_blank"/>，您的应用程序将变得可用。就这样，我们开始直播了！我们可以断定，最终，苹果已经落下。</p><p id="f4ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后几个额外的提示:</p><ul class=""><li id="f680" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">为爱好版付费可以让你的网站脱离睡眠模式。</li><li id="642b" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">通过定期咨询网站，你也可以让你的网站保持睡眠模式(直到你用完所谓的dyno小时)。</li><li id="efdd" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">Heroku还支持Spring Boot和许多其他技术。你应该试一试——它对我来说是现成的。</li></ul></div></div>    
</body>
</html>