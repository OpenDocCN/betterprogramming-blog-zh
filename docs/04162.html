<html>
<head>
<title>Utility Classes of the JDK: Dealing With I/O</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JDK的实用程序类:处理I/O</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/utility-classes-of-the-jdk-dealing-with-i-o-1a7cb7dcfbda?source=collection_archive---------12-----------------------#2020-03-26">https://betterprogramming.pub/utility-classes-of-the-jdk-dealing-with-i-o-1a7cb7dcfbda?source=collection_archive---------12-----------------------#2020-03-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7cae" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">60多种帮助方法使文件操作更加简单</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/863e22b26dd09f22c6e56d52d05516f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fjC3Gc9yNKQ3fF7u7KHslQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Maksym Kaharlytskyi 在<a class="ae ky" href="https://unsplash.com/s/photos/file-cabinet?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="d5c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Java NIO <em class="lv"> ( </em>“非阻塞I/O”)是处理I/O操作的一个很棒的特性集，<a class="ae ky" href="https://www.jcp.org/en/jsr/detail?id=51" rel="noopener ugc nofollow" target="_blank">由Java 1.4引入</a>。在Java 7中进一步完善(<a class="ae ky" href="https://www.jcp.org/en/jsr/detail?id=203" rel="noopener ugc nofollow" target="_blank"> JSR 203 </a>)。这个版本还给我们带来了本文的两个实用程序类:<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.Files</a></code>和<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.Paths</a></code></p><p id="d664" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">至少假设Java 8。所有列出的方法都省略了static关键字，泛型类型信息可能会被简化以减少视觉混乱并提高可读性。每个方法都链接到Oracle提供的<a class="ae ky" href="https://docs.oracle.com/javase/8/docs/" rel="noopener ugc nofollow" target="_blank"> Java Platform SE 8文档</a>。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="77ef" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">路径接口</h1><p id="04d4" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">许多I/O操作的核心是<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.Path</a></code>接口。它表示目录和文件名元素的分层序列，可用于定位文件或目录，带有系统相关的文件路径分隔符。</p><p id="13af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">主要是和<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html" rel="noopener ugc nofollow" target="_blank">java.io.File</a></code>互通。两种类型都提供转换方式:<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html#toPath()" rel="noopener ugc nofollow" target="_blank">File#toPath()</a></code>和<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html#toFile()" rel="noopener ugc nofollow" target="_blank">Path#toFile()</a></code>。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="9f5c" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">java.nio.file.Paths</h1><p id="b5b9" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.Paths</a></code>并不是一个拥有许多不同方法的“成熟的”实用程序类。它只是创建一个<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.Path</a></code>实例的助手:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="4a96" class="ni mi it lz b gy nj nk l nl nm">Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Paths.html#get-java.lang.String-java.lang.String...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">get</strong></a>(String first,<br/>         String... more)</span><span id="3855" class="ni mi it lz b gy nn nk l nl nm">Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Paths.html#get-java.net.URI-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">get</strong></a>(URI uri)</span></pre><p id="2f70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用这个助手来代替连接目录和文件名的字符串。将使用适当的文件系统分隔符:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="abd9" class="ni mi it lz b gy nj nk l nl nm">Paths.get("data", "logs", "error")<br/>// =&gt; data/logs/error</span></pre></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="c3ab" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">java.nio.file.Files</h1><p id="5cb4" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.Files</a></code>实用程序类是一个庞然大物。在Java 8中，它由65个静态方法组成。最新的LTS Java 11将这个数字提高到了69。</p><p id="71ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果合适，一些列出的方法会出现在多个部分中。</p><h2 id="7942" class="ni mi it bd mj no np dn mn nq nr dp mr li ns nt mt lm nu nv mv lq nw nx mx ny bi translated">java.nio.file.OpenOption</h2><p id="19e6" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">我们可以通过提供一个或多个<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/OpenOption.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.OpenOption</a></code>来影响文件的打开方式。有多个选项可用，在<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/StandardOpenOption.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.StandardOpenOption</a></code>中定义:</p><ul class=""><li id="631c" class="nz oa it lb b lc ld lf lg li ob lm oc lq od lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/StandardOpenOption.html#APPEND" rel="noopener ugc nofollow" target="_blank">APPEND</a></code></li><li id="8bd7" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/StandardOpenOption.html#CREATE" rel="noopener ugc nofollow" target="_blank">CREATE</a></code></li><li id="2905" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/StandardOpenOption.html#CREATE_NEW" rel="noopener ugc nofollow" target="_blank">CREATE_NEW</a></code> —如果已经存在，则失败</li><li id="13d5" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/StandardOpenOption.html#DELETE_ON_CLOSE" rel="noopener ugc nofollow" target="_blank">DELETE_ON_CLOSE</a></code></li><li id="3495" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/StandardOpenOption.html#DSYNC" rel="noopener ugc nofollow" target="_blank">DSYNC</a></code> —要求同步内容写入存储</li><li id="0bc7" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/StandardOpenOption.html#READ" rel="noopener ugc nofollow" target="_blank">READ</a></code></li><li id="8a98" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/StandardOpenOption.html#SPARSE" rel="noopener ugc nofollow" target="_blank">SPARSE</a></code></li><li id="b510" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/StandardOpenOption.html#SYNC" rel="noopener ugc nofollow" target="_blank">SYNC</a></code> —要求将内容和元数据同步写入存储</li><li id="a06d" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><code class="fe lw lx ly lz b">TRUNCATE_EXISTING</code></li><li id="12a7" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/StandardOpenOption.html#WRITE" rel="noopener ugc nofollow" target="_blank">WRITE</a></code></li></ul><h2 id="8aaa" class="ni mi it bd mj no np dn mn nq nr dp mr li ns nt mt lm nu nv mv lq nw nx mx ny bi translated">创建文件和目录</h2><p id="405f" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">可以很容易地创建不同种类的文件系统对象:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="eddf" class="ni mi it lz b gy nj nk l nl nm"><em class="lv">// Create a single directory, no intermediaries</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#createDirectory-java.nio.file.Path-java.nio.file.attribute.FileAttribute...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">createDirectory</strong></a>​(Path dir,<br/>                     FileAttribute&lt;?&gt;... attrs)</span><span id="6c9f" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Create a directory, including all non-existent parents</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#createDirectories-java.nio.file.Path-java.nio.file.attribute.FileAttribute...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">createDirectories</strong></a>​(Path dir,<br/>                       FileAttribute&lt;?&gt;... attrs)</span><span id="542e" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Create an empty file (fails if exists)</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#createFile-java.nio.file.Path-java.nio.file.attribute.FileAttribute...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">createFile</strong></a>​(Path path,<br/>                FileAttribute&lt;?&gt;... attrs)</span><span id="aff1" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Create a hard-link</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#createLink-java.nio.file.Path-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">createLink</strong></a>​(Path link,<br/>                Path existing)</span><span id="6f77" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Create a symbolic link</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#createSymbolicLink-java.nio.file.Path-java.nio.file.Path-java.nio.file.attribute.FileAttribute...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">createSymbolicLink</strong></a>​(Path link,<br/>                        Path target,<br/>                        FileAttribute&lt;?&gt;... attrs)</span></pre><p id="a0ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有一些处理临时对象的特殊方法。他们将在<em class="lv">默认的</em> <code class="fe lw lx ly lz b">temporary-file</code>目录下创建一个文件或目录，用一个随机的名字。但是我们可以提供前缀/后缀以便更好地识别:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="7ea0" class="ni mi it lz b gy nj nk l nl nm"><em class="lv">// Create a file directly in the temporary-file directory</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#createTempFile-java.nio.file.Path-java.lang.String-java.lang.String-java.nio.file.attribute.FileAttribute...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">createTempFile</strong></a>​(String prefix,<br/>                    String suffix,<br/>                    FileAttribute&lt;?&gt;... attrs)</span><span id="6b92" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Create a directory directly in the temporary-file directory</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#createTempDirectory-java.lang.String-java.nio.file.attribute.FileAttribute...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">createTempDirectory</strong></a>​(String prefix,<br/>                         FileAttribute&lt;?&gt;... attrs)</span><span id="88e9" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Create a directroy in provided directory</em><br/><em class="lv">// but use the temporary naming logic</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#createTempDirectory-java.nio.file.Path-java.lang.String-java.nio.file.attribute.FileAttribute...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">createTempDirectory</strong></a>​(Path dir,<br/>                         String prefix,<br/>                         FileAttribute&lt;?&gt;... attrs)</span></pre><p id="d55c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以通过使用适当的<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/OpenOption.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.<strong class="lb iu">OpenOption</strong></a></code>使用<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SeekableByteChannel.html" rel="noopener ugc nofollow" target="_blank">java.nio.channels.<strong class="lb iu">SeekableByteChannel</strong></a></code>来创建一个文件:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="1357" class="ni mi it lz b gy nj nk l nl nm"><em class="lv">// Open or create a seekable byte channel</em><br/>SeekableByteChannel <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newByteChannel-java.nio.file.Path-java.nio.file.OpenOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">newByteChannel</strong></a>​(Path path,<br/>                                   OpenOption... options)</span><span id="22db" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Open or create a seekable byte channel</em><br/><em class="lv">// with initial file attributes for creation</em><br/>SeekableByteChannel <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newByteChannel-java.nio.file.Path-java.util.Set-java.nio.file.attribute.FileAttribute...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">newByteChannel</strong></a>​(Path path,<br/>                                   Set&lt;OpenOption&gt; options,<br/>                                   FileAttribute&lt;?&gt;... attrs)</span></pre><h2 id="9120" class="ni mi it bd mj no np dn mn nq nr dp mr li ns nt mt lm nu nv mv lq nw nx mx ny bi translated">阅读内容</h2><p id="d34a" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">内容读取可分为两类:<em class="lv">基于字节的</em>和<em class="lv">基于字符的</em>。</p><p id="cb4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这两个类别都充满了“一次性阅读”或“按需/懒惰”的方法。</p><p id="4a7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">基于字节的</strong></p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="6a9b" class="ni mi it lz b gy nj nk l nl nm"><em class="lv">// Read all bytes, not recommended for large files</em><br/>byte[] <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#readAllBytes-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">readAllBytes</strong></a>​(Path path)</span><span id="a25a" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Open a file and create an unbuffered InputStream.</em><br/><em class="lv">// Don't forget to close it!</em><br/>InputStream <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newInputStream-java.nio.file.Path-java.nio.file.OpenOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">newInputStream</strong></a>​(Path path,<br/>                           OpenOption... options)</span><span id="1334" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Open or create a seekable byte channel</em><br/>SeekableByteChannel <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newByteChannel-java.nio.file.Path-java.nio.file.OpenOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">newByteChannel</strong></a>​(Path path,<br/>                                   OpenOption... options)</span><span id="fe5a" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Open or create a seekable byte channel</em><br/><em class="lv">// with initial file attributes for creation</em><br/>SeekableByteChannel <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newByteChannel-java.nio.file.Path-java.util.Set-java.nio.file.attribute.FileAttribute...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">newByteChannel</strong></a>​(Path path,<br/>                                   Set&lt;OpenOption&gt; options,<br/>                                   FileAttribute&lt;?&gt;... attrs)</span></pre><p id="cd74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">基于字符的</strong></p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="99f6" class="ni mi it lz b gy nj nk l nl nm"><em class="lv">// Read all lines as UTF-8, not recommended for large files</em><br/>List&lt;String&gt; <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#readAllLines-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">readAllLines</strong></a>​(Path path)</span><span id="ed2c" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Read all lines as a specific charset,</em><br/><em class="lv">// not recommended for large files</em><br/>List&lt;String&gt; <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#readAllLines-java.nio.file.Path-java.nio.charset.Charset-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">readAllLines</strong></a>​(Path path,<br/>                          Charset cs)</span><span id="83d1" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Read lines lazy as UTF-8, backed by a java.io.Reader</em><br/>Stream&lt;String&gt; <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">lines</strong></a>​(Path path)</span><span id="e3d5" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Read lines lazy as a specific charset, backed by a java.io.Reader</em><br/>Stream&lt;String&gt; <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-java.nio.charset.Charset-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">lines</strong></a>​(Path path,<br/>                     Charset cs)</span><span id="e6d8" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Read lines buffered as UTF8</em><br/>BufferedReader <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newBufferedReader-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">newBufferedReader</strong></a>​(Path path)</span><span id="fa81" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Read lines buffered as a specific charset</em><br/>BufferedReader <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newBufferedWriter-java.nio.file.Path-java.nio.file.OpenOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">newBufferedReader</strong></a>​(Path path,<br/>                                 Charset cs)</span></pre><h2 id="8403" class="ni mi it bd mj no np dn mn nq nr dp mr li ns nt mt lm nu nv mv lq nw nx mx ny bi translated">写作</h2><p id="bcd1" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">像阅读一样，写作内容可以分为两组:</p><p id="33bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">基于字节的</strong></p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="f1ce" class="ni mi it lz b gy nj nk l nl nm"><em class="lv">// Write bytes directly to a path.</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#write-java.nio.file.Path-byte:A-java.nio.file.OpenOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">write</strong></a>​(Path path,<br/>           byte[] bytes,<br/>           OpenOption... options)</span><span id="0761" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Opens or creates a file, returning an java.io.OutputStream</em><br/>OutputStream <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newOutputStream-java.nio.file.Path-java.nio.file.OpenOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">newOutputStream</strong></a>​(Path path,<br/>                             OpenOption... options)</span><span id="1b97" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Opens or creates a seekable byte channel</em><br/>SeekableByteChannel <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newByteChannel-java.nio.file.Path-java.nio.file.OpenOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">newByteChannel</strong></a>​(Path path,<br/>                                   OpenOption... options)</span><span id="f0fe" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Opens or creates a seekable byte channel</em><br/><em class="lv">// with initial file attributes for creation</em><br/>SeekableByteChannel <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newByteChannel-java.nio.file.Path-java.util.Set-java.nio.file.attribute.FileAttribute...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">newByteChannel</strong></a>​(Path path,<br/>                                   Set&lt;OpenOption&gt; options,<br/>                                   FileAttribute&lt;?&gt;... attrs)</span></pre><p id="8f84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">基于字符的</strong></p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="5cfc" class="ni mi it lz b gy nj nk l nl nm"><em class="lv">// Writes text lines as UTF-8</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#write-java.nio.file.Path-java.lang.Iterable-java.nio.file.OpenOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">write</strong></a>​(Path path,<br/>           Iterable&lt;CharSequence&gt; lines,<br/>           OpenOption... options)</span><span id="7603" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Writes text lines as the specified charset</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#write-java.nio.file.Path-java.lang.Iterable-java.nio.charset.Charset-java.nio.file.OpenOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">write</strong></a>​(Path path,<br/>           Iterable&lt;CharSequence&gt; lines,<br/>           Charset cs,<br/>           OpenOption... options)</span><span id="b26e" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Opens or creates a file, returning an java.io.BufferedWriter,</em><br/><em class="lv">// using UTF-8</em><br/>BufferedWriter <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newBufferedWriter-java.nio.file.Path-java.nio.file.OpenOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">newBufferedWriter</strong></a>​(Path path,<br/>                                 OpenOption... options)</span><span id="0154" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Opens or creates a file, returning an java.io.BufferedWriter,</em><br/><em class="lv">// using the specified charset</em><br/>BufferedWriter <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newBufferedWriter-java.nio.file.Path-java.nio.charset.Charset-java.nio.file.OpenOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">newBufferedWriter</strong></a>​(Path path,<br/>                                  Charset cs,<br/>                                  OpenOption... options)</span></pre><h2 id="d315" class="ni mi it bd mj no np dn mn nq nr dp mr li ns nt mt lm nu nv mv lq nw nx mx ny bi translated">目录内容</h2><p id="af6b" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">有三种不同类型的目录内容迭代/遍历:</p><ul class=""><li id="c152" class="nz oa it lb b lc ld lf lg li ob lm oc lq od lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/DirectoryStream.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.<strong class="lb iu">DirectoryStream</strong></a></code> <strong class="lb iu"> </strong> —一个专门的<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html" rel="noopener ugc nofollow" target="_blank">java.lang.<strong class="lb iu">Iterable</strong></a></code>。</li><li id="24ed" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html" rel="noopener ugc nofollow" target="_blank">java.util.stream.<strong class="lb iu">Stream</strong></a></code> <strong class="lb iu"> </strong> —使用更现代的<a class="ae ky" href="https://medium.com/better-programming/functional-programming-with-java-streams-f930e0e4d184" rel="noopener">流API </a>。</li><li id="5ca2" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/FileVisitor.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.<strong class="lb iu">FileVisistor</strong></a></code> <strong class="lb iu"> </strong> —使用<a class="ae ky" href="https://en.wikipedia.org/wiki/Visitor_pattern" rel="noopener ugc nofollow" target="_blank">访客模式</a>。</li></ul><p id="377e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每一个都有它的优点，取决于我们的需求。</p><p id="c0ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当<em class="lv">走过<code class="fe lw lx ly lz b">Path</code>上的</em>时，我们可以指定<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/FileVisitOption.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.<strong class="lb iu">FileVisitOption</strong></a></code>。此时，只有<code class="fe lw lx ly lz b">FOLLOW_LINKS</code>可用。如果检测到周期，则抛出<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/FileSystemLoopException.html" rel="noopener ugc nofollow" target="_blank">FileSystemLoopException</a></code>。</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="b407" class="ni mi it lz b gy nj nk l nl nm"><em class="lv">// Lazily populated Steam, traversed depth-first.</em><br/>Stream&lt;Path&gt; <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#walk-java.nio.file.Path-java.nio.file.FileVisitOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">walk</strong></a>​(Path start,<br/>                  FileVisitOption... options)</span><span id="8b64" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Lazily populated Steam, traversed depth-first, up to maxDepth</em><br/>Stream&lt;Path&gt; <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#walk-java.nio.file.Path-int-java.nio.file.FileVisitOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">walk</strong></a>​(Path start,<br/>                  int maxDepth,<br/>                  FileVisitOption... options)</span><span id="c441" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Visitor-pattern</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#walkFileTree-java.nio.file.Path-java.nio.file.FileVisitor-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">walkFileTree</strong></a>​(Path start,<br/>                  FileVisitor&lt;Path&gt; visitor)</span><span id="c196" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Visitor-pattern, traversed depth-first, up to maxDepth</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#walkFileTree-java.nio.file.Path-java.util.Set-int-java.nio.file.FileVisitor-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">walkFileTree</strong></a>​(Path start,<br/>                  Set&lt;FileVisitOption&gt; options,<br/>                  int maxDepth,<br/>                  FileVisitor&lt;Path&gt; visitor)</span></pre><p id="75b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有两种方法可以列出/查找目录内容:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="0e39" class="ni mi it lz b gy nj nk l nl nm"><em class="lv">// Lazily populated Stream of directory content</em><br/>Stream&lt;Path&gt; <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#list-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">list</strong></a>​(Path dir)</span><span id="6c76" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Lazily populated filtered Stream</em><br/>Stream&lt;Path&gt; <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#find-java.nio.file.Path-int-java.util.function.BiPredicate-java.nio.file.FileVisitOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">find</strong></a>​(Path start,<br/>                  int maxDepth,<br/>                  BiPredicate&lt;Path,​BasicFileAttributes&gt; matcher,<br/>                  FileVisitOption... options)</span></pre><h2 id="484c" class="ni mi it bd mj no np dn mn nq nr dp mr li ns nt mt lm nu nv mv lq nw nx mx ny bi translated">检测文件系统对象属性</h2><p id="31cb" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">在遍历目录内容时，我们还想知道我们在处理什么。</p><p id="1c80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有些方法接受<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/LinkOption.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.LinkOption</a></code>，它决定了如何处理符号链接。只有选项<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/LinkOption.html#NOFOLLOW_LINKS" rel="noopener ugc nofollow" target="_blank">NOFOLLOW_LINKS</a></code>可用。</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="8945" class="ni mi it lz b gy nj nk l nl nm">boolean <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#isDirectory-java.nio.file.Path-java.nio.file.LinkOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">isDirectory</strong></a>​(Path path,<br/>                    LinkOption... options)</span><span id="fd5d" class="ni mi it lz b gy nn nk l nl nm">boolean <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#isExecutable-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">isExecutable</strong></a>​(Path path)</span><span id="56d5" class="ni mi it lz b gy nn nk l nl nm">boolean <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#isHidden-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">isHidden</strong></a>​(Path path)</span><span id="e099" class="ni mi it lz b gy nn nk l nl nm">boolean <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#isReadable-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">isReadable</strong></a>​(Path path)</span><span id="0f0f" class="ni mi it lz b gy nn nk l nl nm">boolean <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#isRegularFile-java.nio.file.Path-java.nio.file.LinkOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">isRegularFile</strong></a>​(Path path,<br/>                      LinkOption... options)</span><span id="2338" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// If the arguments are equals == true,</em><br/><em class="lv">// the files themselves are not checked</em><br/>boolean <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#isSameFile-java.nio.file.Path-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">isSameFile</strong></a>​(Path path,<br/>                   Path path2)</span><span id="4fb3" class="ni mi it lz b gy nn nk l nl nm">boolean <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#isSymbolicLink-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">isSymbolicLink</strong></a>​(Path path)</span><span id="e1ba" class="ni mi it lz b gy nn nk l nl nm">boolean <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#isWritable-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">isWritable</strong></a>​(Path path)</span><span id="3c18" class="ni mi it lz b gy nn nk l nl nm">long <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#size-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">size</strong></a>​(Path path)</span><span id="fea6" class="ni mi it lz b gy nn nk l nl nm">boolean <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#exists-java.nio.file.Path-java.nio.file.LinkOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">exists</strong></a>​(Path path,<br/>               LinkOption... options)</span><span id="a6cc" class="ni mi it lz b gy nn nk l nl nm">boolean <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#notExists-java.nio.file.Path-java.nio.file.LinkOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">notExists</strong></a>​(Path path,<br/>                  LinkOption... options)</span></pre><p id="636a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">甚至可以检测到<a class="ae ky" href="http://www.ietf.org/rfc/rfc2045.txt" rel="noopener ugc nofollow" target="_blank"> MIME内容类型</a>:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="eacc" class="ni mi it lz b gy nj nk l nl nm">String <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#probeContentType-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">probeContentType</strong></a><strong class="lz iu">​</strong>(Path path)</span></pre><h2 id="5038" class="ni mi it bd mj no np dn mn nq nr dp mr li ns nt mt lm nu nv mv lq nw nx mx ny bi translated">属性</h2><p id="bd66" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated"><em class="lv">通常的</em>文件属性可以读写:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="fdc1" class="ni mi it lz b gy nj nk l nl nm">FileTime <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#getLastModifiedTime-java.nio.file.Path-java.nio.file.LinkOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">getLastModifiedTime</strong></a>​(Path path,<br/>                             LinkOption... options)</span><span id="e6c3" class="ni mi it lz b gy nn nk l nl nm">Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#setLastModifiedTime-java.nio.file.Path-java.nio.file.attribute.FileTime-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">setLastModifiedTime</strong></a>​(Path path,<br/>                         FileTime time)</span><span id="6046" class="ni mi it lz b gy nn nk l nl nm">UserPrincipal <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#getOwner-java.nio.file.Path-java.nio.file.LinkOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">getOwner</strong></a>​(Path path,<br/>                       LinkOption... options)</span><span id="1a20" class="ni mi it lz b gy nn nk l nl nm">Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#setOwner-java.nio.file.Path-java.nio.file.attribute.UserPrincipal-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">setOwner</strong></a>​(Path path,<br/>              UserPrincipal owner)</span><span id="e664" class="ni mi it lz b gy nn nk l nl nm">Set&lt;PosixFilePermission&gt; <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#getPosixFilePermissions-java.nio.file.Path-java.nio.file.LinkOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">getPosixFilePermissions</strong></a>​(Path path,<br/>                                                 LinkOption... options)</span><span id="77cb" class="ni mi it lz b gy nn nk l nl nm">Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#setPosixFilePermissions-java.nio.file.Path-java.util.Set-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">setPosixFilePermissions</strong></a>​(Path path,<br/>                             Set&lt;PosixFilePermission&gt; perms)</span></pre><p id="9447" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是我们也可以直接访问任何文件属性:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="8b84" class="ni mi it lz b gy nj nk l nl nm">V <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#getFileAttributeView-java.nio.file.Path-java.lang.Class-java.nio.file.LinkOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">getFileAttributeView</strong></a>​(Path path,<br/>                       Class&lt;V&gt; type, LinkOption... options)</span><span id="28c5" class="ni mi it lz b gy nn nk l nl nm">Object <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#getAttribute-java.nio.file.Path-java.lang.String-java.nio.file.LinkOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">getAttribute</strong></a>​(Path path,<br/>                    String attribute,<br/>                    LinkOption... options)</span><span id="8f69" class="ni mi it lz b gy nn nk l nl nm">Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#setAttribute-java.nio.file.Path-java.lang.String-java.lang.Object-java.nio.file.LinkOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">setAttribute</strong></a>​(Path path,<br/>                  String attribute,<br/>                  Object value,<br/>                  LinkOption... options)</span><span id="60ae" class="ni mi it lz b gy nn nk l nl nm">A <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#readAttributes-java.nio.file.Path-java.lang.Class-java.nio.file.LinkOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">readAttributes</strong></a>​(Path path,<br/>                 Class&lt;A&gt; type,<br/>                 LinkOption... options)</span><span id="956d" class="ni mi it lz b gy nn nk l nl nm">Map&lt;String,​Object&gt; <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#readAttributes-java.nio.file.Path-java.lang.String-java.nio.file.LinkOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">readAttributes</strong></a>​(Path path,<br/>                                  String attributes,<br/>                                  LinkOption... options)</span></pre><h2 id="c51f" class="ni mi it bd mj no np dn mn nq nr dp mr li ns nt mt lm nu nv mv lq nw nx mx ny bi translated">文件操作</h2><p id="97b6" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">最后但同样重要的是，例行的文件操作。</p><p id="32d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/LinkOption.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.LinkOption</a></code>之外，有些方法使用<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/CopyOption.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.CopyOption</a></code>。可用选项在<code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/StandardCopyOption.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.StandardCopyOption</a></code>中定义:</p><ul class=""><li id="cd9f" class="nz oa it lb b lc ld lf lg li ob lm oc lq od lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/StandardCopyOption.html#ATOMIC_MOVE" rel="noopener ugc nofollow" target="_blank">ATOMIC_MOVE</a></code></li><li id="029d" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/StandardCopyOption.html#COPY_ATTRIBUTES" rel="noopener ugc nofollow" target="_blank">COPY_ATTRIBUTES</a></code></li><li id="19e1" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/StandardCopyOption.html#REPLACE_EXISTING" rel="noopener ugc nofollow" target="_blank">REPLACE_EXISTING</a></code></li></ul><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="be21" class="ni mi it lz b gy nj nk l nl nm"><em class="lv">// Copy a file to a target file (not directory!)</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#copy-java.nio.file.Path-java.nio.file.Path-java.nio.file.CopyOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">copy</strong></a>​(Path source,<br/>          Path target,<br/>          CopyOption... options)</span><span id="e50e" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Copy all bytes from InputStream to a Path,<br/>// returns bytes read or written</em><br/>long <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#copy-java.io.InputStream-java.nio.file.Path-java.nio.file.CopyOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">copy</strong></a>​(InputStream in,<br/>          Path target,<br/>          CopyOption... options)</span><span id="fc91" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Copy all bytes from a file to an OutputStream,</em><br/><em class="lv">// returns bytes read or written</em><br/>long <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#copy-java.nio.file.Path-java.io.OutputStream-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">copy</strong></a>​(Path source,<br/>          OutputStream out)</span><span id="413c" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Delete a file or empty directory.</em><br/><em class="lv">// Symbolic links aren't followed.</em><br/><em class="lv">// Throw NoSuchFileException if file doesn't exist.</em><br/>void <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#delete-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">delete</strong></a>​(Path path)</span><span id="4286" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Delete a file or empty directory.</em><br/><em class="lv">// Symbolic links aren't followed.</em><br/><em class="lv">// Doesn't throw an exception if file not exists</em><br/>boolean <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#deleteIfExists-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">deleteIfExists</strong></a>​(Path path)</span><span id="5812" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Test whether a file or directory exists</em><br/>boolean <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#exists-java.nio.file.Path-java.nio.file.LinkOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">exists</strong></a>​(Path path,<br/>               LinkOption... options)</span><span id="c872" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Test whether a file or directory doesn't exist</em><br/>boolean <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#notExists-java.nio.file.Path-java.nio.file.LinkOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">notExists</strong></a>​(Path path,<br/>                  LinkOption... options)</span><span id="cb71" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Move/rename a file or directory.</em><br/><em class="lv">// CopyOption 'COPY_ATTRIBUTES' isn't supported</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#move-java.nio.file.Path-java.nio.file.Path-java.nio.file.CopyOption...-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">move</strong></a>​(Path source,<br/>          Path target,<br/>          CopyOption... options)</span><span id="06f9" class="ni mi it lz b gy nn nk l nl nm"><em class="lv">// Read target of symbolic link.</em><br/><em class="lv">// Throws NotLinkExpcetion if the target isn't a symbolic link</em><br/>Path <a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#readSymbolicLink-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">readSymbolicLink</strong></a>​(Path link)</span></pre><h2 id="ad06" class="ni mi it bd mj no np dn mn nq nr dp mr li ns nt mt lm nu nv mv lq nw nx mx ny bi translated">Java 11新增功能</h2><p id="96ab" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">Java 11的发布为我们带来了四种读写字符串的新方法:</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="53c4" class="ni mi it lz b gy nj nk l nl nm">// Read file to String as UTF-8<br/>String <a class="ae ky" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Files.html#readString(java.nio.file.Path)" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">readString</strong></a>​(Path path)</span><span id="7fed" class="ni mi it lz b gy nn nk l nl nm">// Read file to String as specified charset<br/>String <a class="ae ky" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Files.html#readString(java.nio.file.Path,java.nio.charset.Charset)" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">readString</strong></a>​(Path path,<br/>                  Charset cs)</span><span id="e140" class="ni mi it lz b gy nn nk l nl nm">// Write String to file as UTF-8<br/>Path <a class="ae ky" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Files.html#writeString(java.nio.file.Path,java.lang.CharSequence,java.nio.file.OpenOption...)" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">writeString</strong></a>​(Path path,<br/>                 CharSequence csq,<br/>                 OpenOption... options)</span><span id="8188" class="ni mi it lz b gy nn nk l nl nm">// Write String to file as specified charset<br/>Path <a class="ae ky" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Files.html#writeString(java.nio.file.Path,java.lang.CharSequence,java.nio.charset.Charset,java.nio.file.OpenOption...)" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">writeString</strong></a>​(Path path,<br/>                 CharSequence csq,<br/>                 Charset cs,<br/>                 OpenOption... options)</span></pre></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="2e0d" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">结论</h1><p id="61d2" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">另一个优秀的实用类，它简化了许多复杂的I/O操作，不需要第三方库。</p><p id="6a29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是要注意，几乎所有的方法都会抛出各种异常！永远不要盲目信任I/O操作，并且总是捕捉(并处理)它们的异常。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="d239" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">资源</h1><ul class=""><li id="1d5c" class="nz oa it lb b lc mz lf na li on lm oo lq op lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Paths.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.Paths</a></code></li><li id="2731" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html" rel="noopener ugc nofollow" target="_blank">java.nio.file.Files</a></code></li><li id="d88f" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Non-blocking_I/O_(Java)" rel="noopener ugc nofollow" target="_blank"> Java非阻塞I/O </a>(维基百科)</li><li id="77a2" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/technotes/guides/io/index.html" rel="noopener ugc nofollow" target="_blank"> Java I/O、NIO和NIO2 </a> (Oracle)</li><li id="91bf" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><a class="ae ky" href="https://www.baeldung.com/java-nio-2-file-api" rel="noopener ugc nofollow" target="_blank">Java nio 2文件API介绍</a> (Baeldung)</li><li id="3106" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated"><a class="ae ky" href="https://medium.com/better-programming/utility-classes-of-the-jdk-collections-and-arrays-cc07dbcb8586" rel="noopener">JDK集合和数组的实用类</a></li></ul></div></div>    
</body>
</html>