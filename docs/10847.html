<html>
<head>
<title>Create a Fundraising Dapp Using Truffle, Solidity, React, Material UI, and Web3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Truffle、Solidity、React、Material UI和Web3创建一个筹款Dapp</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-a-full-stack-fundraiser-dapp-using-truffle-solidity-react-material-ui-and-web3-222638147c7a?source=collection_archive---------5-----------------------#2022-01-31">https://betterprogramming.pub/create-a-full-stack-fundraiser-dapp-using-truffle-solidity-react-material-ui-and-web3-222638147c7a?source=collection_archive---------5-----------------------#2022-01-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="eb33" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">发起筹款活动，捐赠ETH，生成收据，并提取金额</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/536b5b7f010b040acbc732378e48afe6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7JnNWGl3vm5ou5ptuw-FBA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自Unsplash</p></figure><p id="c234" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用React Truffle Box为我们的Web3应用程序生成前端代码，以使它快速运行并与Web3交互。让我们首先为我们的筹款应用程序创建一个新目录，并在其中创建一个新的Truffle React Box应用程序。</p><p id="e5ca" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们需要做的第一件事是为筹款应用程序创建一个新的空存储库。接下来，我们将切换到该目录并打开React Truffle框:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="e467" class="lz ma it lv b gy mb mc l md me">mdkir fundraiser<br/>cd fundraiser<br/>truffle unbox react</span></pre><p id="e4e7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">除去<code class="fe mf mg mh lv b">node_modules</code> <em class="mi"> </em>目录，我们的目录结构现在应该如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/a185ad0a937e5f6087853c4a8952bdd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o5OG4Ek5WWxO3cWZkOwMTQ.png"/></div></div></figure><p id="b89c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">移除<code class="fe mf mg mh lv b">contracts/SimpleStorage.sol</code>、<code class="fe mf mg mh lv b">migrations/2_deploy_contracts.js</code>并清空<code class="fe mf mg mh lv b">test</code>文件夹:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="149f" class="lz ma it lv b gy mb mc l md me">rm contracts/SimpleStorage.sol <strong class="lv iu">\ </strong>migrations/2_deploy_contracts.js \ test/*</span></pre><p id="56ea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，您需要为我们的合同和迁移创建新文件。首先，为我们的合同和迁移创建所有的空文件:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="8a44" class="lz ma it lv b gy mb mc l md me">touch contracts/FundraiserFactory.sol<br/>touch contracts/Fundraiser.sol<br/>touch migrations/2_factory_contract_migrations.js</span></pre><p id="d8d6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们还需要安装<code class="fe mf mg mh lv b">OpenZeppelin</code>,因为我们正在使用Ownable contract:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="7b31" class="lz ma it lv b gy mb mc l md me">npm install @openzeppelin/contracts</span></pre><p id="9372" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">并且在<code class="fe mf mg mh lv b">Fundraiser.sol</code> <em class="mi"> </em>文件中，将import语句改为使用我们刚刚从OpenZeppelin安装的node_module:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="2efb" class="lz ma it lv b gy mb mc l md me">import '../client/node_modules/@openzeppelin/contracts/ownership/Ownable.sol';</span></pre><p id="d37f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe mf mg mh lv b">Fundraiser.sol</code>的代码如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="224c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe mf mg mh lv b">FundraiserFactory.sol</code>的代码如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="c069" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">添加完合同后，让我们再次启动并运行我们的块菌开发环境。</p><p id="4108" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在资金筹集者存储库中，让我们运行命令来编译和迁移我们的资金筹集者合同，以便我们可以从我们的前端应用程序与它们进行交互:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="a7a5" class="lz ma it lv b gy mb mc l md me">truffle develop</span></pre><p id="a14f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该命令运行完毕后，我们将在同一个终端窗口中运行编译和迁移:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="cedc" class="lz ma it lv b gy mb mc l md me">compile<br/>migrate</span></pre><blockquote class="mm mn mo"><p id="4313" class="ky kz mi la b lb lc ju ld le lf jx lg mp li lj lk mq lm ln lo mr lq lr ls lt im bi translated">如果您曾经遇到过迁移问题，并且在解决方案上停滞不前，请尝试运行<strong class="la iu"> migrate — reset </strong>。</p></blockquote><p id="4c18" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您的合同已成功迁移，它们应该类似于以下输出:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="3229" class="lz ma it lv b gy mb mc l md me">Starting migrations...<br/>======================<br/>&gt; Network name:    'develop'<br/>&gt; Network id:      5777<br/>&gt; Block gas limit: 0x6691b7</span><span id="b0ea" class="lz ma it lv b gy ms mc l md me">1_initial_migration.js<br/>======================</span><span id="f08d" class="lz ma it lv b gy ms mc l md me">Replacing 'Migrations'<br/>----------------------<br/>&gt; transaction hash: 0xf04ee2a0c62330e7a051148d4660de...<br/>&gt; Blocks: 0        Seconds: 0<br/>&gt; contract address: 0x6Af651D4c6E9f32a627381B...<br/>&gt; block number: 1<br/>&gt; block timestamp: 1566526994<br/>&gt; account: 0xb94454C83ff541c82391b...<br/>&gt; balance: 99.99477342<br/>&gt; gas used: 261329<br/>&gt; gas price: 20 gwei<br/>&gt; value sent: 0 ETH<br/>&gt; total cost: 0.00522658 ETH</span><span id="78d5" class="lz ma it lv b gy ms mc l md me">&gt; Saving migration to chain.<br/>&gt; Saving artifacts<br/>-------------------------------------<br/>&gt; Total cost:          0.00522658 ETH</span><span id="abad" class="lz ma it lv b gy ms mc l md me">2_factory_contract_migrations.js<br/>================================</span><span id="ebd8" class="lz ma it lv b gy ms mc l md me">Replacing 'Factory'<br/>-------------------<br/>&gt; transaction hash: 0xebc5a26bbe12f52b809d9144...<br/>&gt; Blocks: 0    Seconds: 0<br/>&gt; contract address: 0xB7780C9AD3ef38bb4C8B48fab37...<br/>&gt; block number: 3<br/>&gt; block timestamp: 1566526995<br/>&gt; account: 0xb94454C83ff541c82391b4...<br/>&gt; balance: 99.95063086<br/>&gt; gas used: 2165105<br/>&gt; gas price: 20 gwei<br/>&gt; value sent: 0 ETH<br/>&gt; total cost: 0.0433021 ETH</span><span id="4076" class="lz ma it lv b gy ms mc l md me">&gt; Saving migration to chain.<br/>&gt; Saving artifacts<br/>-------------------------------------<br/>&gt; Total cost:           0.0433021 ETH<br/></span><span id="c60c" class="lz ma it lv b gy ms mc l md me">Summary<br/>=======</span><span id="47b1" class="lz ma it lv b gy ms mc l md me">&gt; Total deployments:   2<br/>&gt; Final cost:          0.04852868 ETH</span></pre><h2 id="deea" class="lz ma it bd mt mu mv dn mw mx my dp mz lh na nb nc ll nd ne nf lp ng nh ni nj bi translated">筹款设置</h2><p id="5a2b" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">让我们开始运行React Truffle Box，这样我们就可以与应用程序进行交互了。</p><p id="9a65" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们首先需要cd到React应用程序的<code class="fe mf mg mh lv b">src</code> <em class="mi"> </em>文件中，并安装React Truffle Box为我们提供的所有依赖项。</p><p id="df8e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">之后，我们需要启动应用程序的前端，就像我们在上一章所做的那样:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="d862" class="lz ma it lv b gy mb mc l md me">cd client<br/>npm i</span></pre><p id="6def" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">模块安装完成后，启动服务器:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="3ea7" class="lz ma it lv b gy mb mc l md me">npm start</span></pre><p id="e94a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果一切都已正确安装并成功启动，我们现在可以导航到localhost:3000来查看我们的Web3应用程序。看见</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/fdb19399dcb03cee4d0138f44491d44b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u_M5JV3KIzunWlWCxNDU3A.png"/></div></div></figure><p id="52f4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">哎呀！我们忘了切换网络以匹配新的应用程序。我们需要在同一个网络上，这样我们的应用程序才能正常运行。</p><p id="15e6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们首先进入MetaMask，将顶部的网络切换为Localhost 8545。</p><p id="bff4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Localhost 8545应该在默认列表中。如果没有，可以参考上一章再补充。</p><p id="2fac" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我们运行块菌开发时，我们看到了这个:<em class="mi">块菌开发开始于</em><a class="ae nq" href="http://127.0.0.1:9545/" rel="noopener ugc nofollow" target="_blank"><em class="mi">http://127 . 0 . 0 . 1:9545/</em></a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/6018fca89e09634bcb3a16f8b375bbf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PT_CMX1vcM8mjK6XPGcz4w.png"/></div></div></figure><p id="7832" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将<a class="ae nq" href="http://127.0.0.1:9545/" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:9545/ </a>复制到您的剪贴板。接下来，我们需要打开MetaMask并导入该网络。打开MetaMask扩展并选择主以太网。我们需要选择Custom RPC并输入<a class="ae nq" href="http://127.0.0.1:9545" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:9545 </a>，这里显示新的RPC URL。"</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/3aa6d884920ddb4bf8af09ecdb415947.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZzOqWL_nreIo3a-OdVXzyw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">元掩码</p></figure><p id="77d2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">转到我的帐户&gt;导入帐户</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/c1f386efc463b0da5f21e2ee30229c92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZnWXyl5sgsnLwAMKHbyrjg.png"/></div></div></figure><p id="d437" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将<em class="mi">块菌发育</em>后生成的私钥粘贴到元掩码导入中，并选择导入。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/f847d94889f0825c33441480d1bdd421.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0vCOQTEbAg4dOu-ECinh1w.png"/></div></div></figure><p id="192b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，刷新屏幕，您应该会看到我们之前看到的简单存储UI。验证您的页面看起来像</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/9bed655dca612a5a41c97f365410efee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aZPx347u1Y2XZKYOFOYA4g.png"/></div></div></figure><p id="f494" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">随着我们的应用程序的运行，让我们从我们的<a class="ae nq" href="https://github.com/ac12644/fundraiser_dapp/blob/master/client/src/App.js" rel="noopener ugc nofollow" target="_blank"> App.js </a> <em class="mi"> </em>文件开始，取出一些样板代码来准备我们的前端与募捐者进行交互。</p><p id="1b94" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，导航到<code class="fe mf mg mh lv b"><a class="ae nq" href="https://github.com/ac12644/fundraiser_dapp/tree/master/client/src" rel="noopener ugc nofollow" target="_blank">client/src</a></code> <em class="mi"> </em>目录，打开<code class="fe mf mg mh lv b">App.js</code> <em class="mi"> </em>文件。我们需要删除旧的React代码，并用我们自己的React代码替换它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h2 id="bfb8" class="lz ma it bd mt mu mv dn mw mx my dp mz lh na nb nc ll nd ne nf lp ng nh ni nj bi translated">反应路由</h2><p id="a680" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">我们需要在React应用程序中设置路线。我们将使用react-router-dom让用户看到不同的页面，这取决于他们从navbar中选择了什么。</p><p id="cb13" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将从安装<code class="fe mf mg mh lv b">react-router-dom</code>的npm包开始:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="31b0" class="lz ma it lv b gy mb mc l md me">npm install — save react-router-dom</span></pre><p id="d0b0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">安装npm包并重启前端服务器后，从react-router-dom中导入所需的文件到<code class="fe mf mg mh lv b">App.js</code> <em class="mi"> </em>文件中，如下所示:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="dd16" class="lz ma it lv b gy mb mc l md me">import { BrowserRouter as Router, Route, NavLink } from "react-router-dom"</span></pre><p id="cdeb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们还需要为主页和新的筹款活动导入两个新组件，以便在我们的路线中使用:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="c7e2" class="lz ma it lv b gy mb mc l md me">import NewFundraiser from './NewFundraiser'<br/>import Home from './Home'</span></pre><p id="cb2b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，让我们用下面的代码替换render函数。这将使我们能够使用Material UI提供的导航条导航到整个应用程序的不同页面:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="3d86" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">新建两个文件:<code class="fe mf mg mh lv b">Home.js</code> <em class="mi"> </em>和<code class="fe mf mg mh lv b">NewFundraiser.js</code>。</p><p id="ca2e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用主页组件作为应用程序的主登录页面，并使用新的资金筹集者页面在应用程序中创建新的资金筹集者:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="ead1" class="lz ma it lv b gy mb mc l md me">touch Home.js<br/>touch NewFundraiser.js</span></pre><p id="1e03" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们开始创建<code class="fe mf mg mh lv b">Home</code>视图。在您的<code class="fe mf mg mh lv b"><a class="ae nq" href="https://github.com/ac12644/fundraiser_dapp/blob/master/client/src/Home.js" rel="noopener ugc nofollow" target="_blank">Home.js</a></code> <em class="mi"> </em>文件中，使用以下占位符代码并保存该文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="d9cb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">同样，在<code class="fe mf mg mh lv b">NewFundraiser.js</code> <em class="mi"> </em>文件中，添加这段代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="45a8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们需要做的是修改我们的<code class="fe mf mg mh lv b">index.js</code> <em class="mi"> </em>文件中的代码，这样我们就可以正确地渲染路线。</p><p id="5e53" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用<code class="fe mf mg mh lv b">react-router-dom</code>中的<code class="fe mf mg mh lv b">BrowserRouter</code>将我们的应用程序包装在路由器中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h2 id="77f2" class="lz ma it bd mt mu mv dn mw mx my dp mz lh na nb nc ll nd ne nf lp ng nh ni nj bi translated">反应和材质用户界面</h2><p id="06be" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">让我们从将材质UI安装到我们的应用程序开始。</p><p id="0ee0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在您的<code class="fe mf mg mh lv b">client</code> <em class="mi"> </em>目录中运行install命令，在我们的筹款应用程序中安装react-bootstrap，如下所示:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="e722" class="lz ma it lv b gy mb mc l md me">npm install @material-ui/core --save</span></pre><p id="5b69" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从材料UI站点，让我们来看看这里的应用程序栏页面。<br/>先说简单的app吧。</p><p id="3e4e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，我们需要将所有的导入添加到我们的<code class="fe mf mg mh lv b">App.js</code> <em class="mi"> </em>文件的顶部。这将允许我们使用我们需要的材料UI组件:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="bab4" class="lz ma it lv b gy mb mc l md me">import { makeStyles } from '@material-ui/core/styles';<br/>import AppBar from '@material-ui/core/AppBar';<br/>import Toolbar from '@material-ui/core/Toolbar';<br/>import Typography from '@material-ui/core/Typography';</span></pre><p id="0c91" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在我们有了导入，我们需要添加样式，这样我们的筹款应用程序看起来就不错了。</p><p id="3106" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您需要在<code class="fe mf mg mh lv b">useEffect</code>函数后添加这些样式:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="282d" class="lz ma it lv b gy mb mc l md me">const useStyles = makeStyles({<br/>      root: {<br/>        flexGrow: 1,<br/>      },<br/>});<br/>const classes = useStyles();</span></pre><p id="11cc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">导入正确的文件并添加样式代码后，让我们替换实际的渲染代码，这样我们就可以看到新的导航栏了:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="a386" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们快速地给<code class="fe mf mg mh lv b">NavLink</code>组件添加一点样式，让它看起来更专业。</p><p id="caf4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在您的<a class="ae nq" href="https://github.com/ac12644/fundraiser_dapp/blob/master/client/src/App.css" rel="noopener ugc nofollow" target="_blank"><em class="mi">app . CSS</em></a><em class="mi"/>文件中，将这些添加到文件中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h2 id="7142" class="lz ma it bd mt mu mv dn mw mx my dp mz lh na nb nc ll nd ne nf lp ng nh ni nj bi translated">创建我们新的筹款页面视图</h2><p id="53e0" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">我们将从使用材质UI的文本字段组件开始。在您的<code class="fe mf mg mh lv b">NewFundraiser.js</code> <em class="mi"> </em>文件中，在您最近的导入语句之后添加一条导入语句。现在，让我们继续获取Web3，以便访问我们的工厂合同<em class="mi">【第42行】</em>。</p><p id="1757" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我们的<code class="fe mf mg mh lv b">NewFundraiser.js</code> <em class="mi"> </em>文件中，更新<code class="fe mf mg mh lv b">useEffect</code>函数以使用Web3代码。下面的代码将创建我们的合同的一个新实例，并设置Web3、我们的合同和我们的当前帐户的状态。</p><p id="acb1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，我们需要导入我们的契约，并指向我们的<code class="fe mf mg mh lv b">NewFundraiser.js</code> <em class="mi"> </em>文件<em class="mi">【第6–7行】</em>中已经本地部署的契约。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="e3ca" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在我们已经从合同中收到了数据，我们将在前端工作，向用户显示每张筹款卡。</p><p id="aead" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们需要做的第一件事是创建一个新组件，用于显示我们的卡组件。新建一个文件<code class="fe mf mg mh lv b">FundraiserCard.js</code> <strong class="la iu"> <em class="mi">。</em> </strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="dc1b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您导航到localhost:3000，您会看到它现在是空白的。让我们创建一个渲染函数来遍历每一个募捐者，并在卡片上显示它们。</p><p id="46bc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，切换到<code class="fe mf mg mh lv b"><a class="ae nq" href="https://github.com/ac12644/fundraiser_dapp/blob/master/client/src/Home.js" rel="noopener ugc nofollow" target="_blank">Home.js</a></code> <a class="ae nq" href="https://github.com/ac12644/fundraiser_dapp/blob/master/client/src/Home.js" rel="noopener ugc nofollow" target="_blank"> </a>文件，我们将遍历筹款人列表并显示每个筹款人的卡组件:</p><pre class="kj kk kl km gt lu lv lw lx aw ly bi"><span id="3dfa" class="lz ma it lv b gy mb mc l md me">const displayFundraisers = () =&gt; {<br/>      return funds.map((fundraiser) =&gt; { <br/>        return (<br/>          &lt;FundraiserCard fundraiser={fundraiser} /&gt;<br/>       ) })<br/>}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/9dfc66b1e3b725d4873aa4df3d776f7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bTXr7FGWlrAgcAu2Td6FxA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">资金筹集活动</p></figure><h1 id="4dba" class="nx ma it bd mt ny nz oa mw ob oc od mz jz oe ka nc kc of kd nf kf og kg ni oh bi translated">收尾工作</h1><h2 id="df26" class="lz ma it bd mt mu mv dn mw mx my dp mz lh na nb nc ll nd ne nf lp ng nh ni nj bi translated">添加每个募捐者的详细信息</h2><p id="a80b" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">我们议程上的下一个项目是向我们的用户显示更多关于每个募捐者的信息。复制以下代码并将其添加到<code class="fe mf mg mh lv b">FundraiserCard.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="df68" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe mf mg mh lv b">App.js</code>的代码如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="c577" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe mf mg mh lv b">Receipts.js</code>的代码如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/7e1fcfbe56e1457fa8e848abc58390c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iSTjyz2wfzvb94a9_UDvjw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">收据</p></figure><h1 id="fef8" class="nx ma it bd mt ny nz oa mw ob oc od mz jz oe ka nc kc of kd nf kf og kg ni oh bi translated">资源和参考资料</h1><ul class=""><li id="017f" class="oj ok it la b lb nk le nl lh ol ll om lp on lt oo op oq or bi translated">GitHub:<a class="ae nq" href="https://github.com/ac12644/fundraiser_dapp.git" rel="noopener ugc nofollow" target="_blank">https://github.com/ac12644/fundraiser_dapp.git</a></li><li id="2dd5" class="oj ok it la b lb os le ot lh ou ll ov lp ow lt oo op oq or bi translated">新版本:<a class="ae nq" href="https://github.com/ac12644/Fundraising-Dapp.git" rel="noopener ugc nofollow" target="_blank">https://github.com/ac12644/Fundraising-Dapp.git</a></li><li id="4cc7" class="oj ok it la b lb os le ot lh ou ll ov lp ow lt oo op oq or bi translated">书籍:<a class="ae nq" href="https://www.google.it/books/edition/Hands_On_Smart_Contract_Development_with/tBbADwAAQBAJ?hl=en&amp;gbpv=0" rel="noopener ugc nofollow" target="_blank">使用Solidity和以太坊进行实际智能合约开发</a></li></ul></div></div>    
</body>
</html>