<html>
<head>
<title>7 Easy Steps for Creating Your Own Web Scraper Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python创建自己的Web Scraper的7个简单步骤</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/7-easy-steps-for-your-own-web-scraper-using-python-97b43abc8a48?source=collection_archive---------6-----------------------#2021-03-10">https://betterprogramming.pub/7-easy-steps-for-your-own-web-scraper-using-python-97b43abc8a48?source=collection_archive---------6-----------------------#2021-03-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f333" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">高效提取web内容</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2030992cfc9ee193ed03804edc351494.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uMeb_sSV0cq3fclJ"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@marinajune?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">玛丽娜</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="e3c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从网站中手动提取大量数据会耗费大量时间和精力。如你所知，时间就是金钱。</p><p id="615a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是网页抓取变得更简单更快捷的地方。制作一个基本的刮刀也不难。</p><p id="81ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以如果你想知道更多关于网络抓取和如何用Python创建你自己的版本，请系好安全带！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="8ba6" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">什么是网页抓取？</strong></h1><p id="0c36" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">网页抓取是一种自动数据提取方法，用于从网站收集非结构化信息，并将其格式化为所需的布局，以便用户可以轻松阅读。做那件事有不同的方法。你可以使用在线服务、<a class="ae kv" href="http://webscrapingapi.com" rel="noopener ugc nofollow" target="_blank">API</a>，或者自己动手。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/b39aafefb58e8907f80dca75b6897070.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jDaMcAZfTHcbBHUWpS3itw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片。</p></figure><p id="6dbd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们进入用Python创建自己的web scraper的分步指南之前，让我们看看如何使用它。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="2a9b" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">为什么网页抓取有用？</strong></h1><p id="06a1" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">正如我们上面提到的，网络抓取是用来快速收集大量信息的。怎么可能有用？很多企业利用这个工具的原因如下:</p><ul class=""><li id="6f15" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated">收集电子邮件地址:使用时事通讯和电子邮件营销来推销自己的公司需要尽可能多的地址来接触他们的目标受众。您可以使用web scraper从您感兴趣的网站下载有用的联系信息。Hunter.io是一个方便的工具，可以做到这一点。</li><li id="7c5e" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">定价优化:你可以了解你的竞争对手对一种产品或服务收取多少费用，并轻松跟踪市场的变化。即使你只是想买些东西，数据提取工具也能帮你找到最好的报价。</li><li id="884b" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">研究:收集数据报告和统计数据对于完成高质量的研究项目至关重要。有了web scraper，你自己手动复制大量数据所浪费的时间就更少了。</li><li id="8791" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">社交媒体:浏览社交媒体网站可以帮助你确定目前的流行趋势，看看哪些方法可以帮助你和你的企业脱颖而出。这也是监测人们对你的品牌的想法和评价的好方法。</li><li id="afbd" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">测试:如果不进行测试，你就无法确定自己的网站能够处理什么，或者如何与用户交互。通过使用web抓取工具，您可以发送大量的请求来查看站点是否能够处理这些请求，或者使用不同位置的代理来检查响应时间。</li></ul></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="83e8" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">为什么要用Python？</strong></h1><p id="379e" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">Python是一种流行的编程语言，因为它易于使用和学习，对于初学者来说是很好的练习。以下是让Python成为优秀选择的一些优势:</p><ul class=""><li id="2eca" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated">易读的语法:Python有一个干净的语法，通常被称为“可执行伪代码”多亏了用来指示区块的凹痕，它的可读性特别好。</li><li id="d506" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">易于使用:不需要分号(<code class="fe nl nm nn no b">;</code>)或花括号(<code class="fe nl nm nn no b">{}</code>)来表示块。同样，缩进使得代码不那么杂乱，可读性更好。</li><li id="4cc9" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">社区:Python社区是一个大家庭，它每天都在增长。如果你被代码卡住了，你可以随时寻求帮助。你可能不是第一个遇到这个问题的程序员。</li><li id="7339" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">丰富的库集合:Python有许多有用的库，如Selenium、BeautifulSoup和pandas，我们稍后将使用它们进行web抓取。</li><li id="d6cb" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">动态类型:这意味着变量类型只在运行时确定，这为我们节省了一些宝贵的时间。</li><li id="e3d1" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">少写:大量的代码不一定意味着好的代码。在Python中，小代码片段可以做相当多的工作！因此，即使在编写代码时，您也节省了时间。</li></ul></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="8054" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">打造自己的网络刮刀</strong></h1><p id="cc7a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">现在你知道为什么web scrapers和Python很酷了。接下来，我们将经历创建我们的网页抓取器的步骤。</p><h2 id="c46f" class="np ma iq bd mb nq nr dn mf ns nt dp mj lf nu nv ml lj nw nx mn ln ny nz mp oa bi translated"><strong class="ak"> 1。选择要刮的页面</strong></h2><p id="5af4" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在本例中，我们将从<a class="ae kv" href="http://www.footshop.eu" rel="noopener ugc nofollow" target="_blank"> Footshop </a>中收集一些不错的运动鞋型号及其价格。然后，我们将以CSV格式存储数据以备将来使用。我们想在这个网站上了解有关耐克运动鞋型号的详细信息，所以我们将使用的网址是<a class="ae kv" href="https://www.footshop.eu/en/2311-nike-men-s-shoes" rel="noopener ugc nofollow" target="_blank">https://www.footshop.eu/en/2311-nike-men-s-shoes</a>。</p><h2 id="9d14" class="np ma iq bd mb nq nr dn mf ns nt dp mj lf nu nv ml lj nw nx mn ln ny nz mp oa bi translated"><strong class="ak"> 2。检查网站代码</strong></h2><p id="551d" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">数据存在于嵌套的标签中，所以我们需要检查页面，看看我们需要的信息在哪个标签下。要检查页面，右键单击元素并选择“检查”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/829a74a646b6369895ed2b265932d6a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/0*3_8whUPrqQbdAItH"/></div></figure><p id="250f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将弹出一个“浏览器检查框”窗口:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/a670cfe1ccacb1c3390cf8cfbf5a3ca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/0*VrFSw8KRXQxHrwYZ"/></div></figure><p id="786a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我知道一开始可能会有点吓人，但别担心。浏览一个网站的代码比看起来要简单得多——而且随着经验的积累，它只会变得更加容易。</p><h2 id="a781" class="np ma iq bd mb nq nr dn mf ns nt dp mj lf nu nv ml lj nw nx mn ln ny nz mp oa bi translated"><strong class="ak"> 3。找到您想要提取的数据</strong></h2><p id="454c" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我们希望提取的数据嵌套在突出显示的<code class="fe nl nm nn no b">&lt;div&gt;</code>标签中。我们需要产品名称和价格。通过打开<code class="fe nl nm nn no b">&lt;div&gt;</code>标签，更多的标签将出现在屏幕上。</p><p id="033e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意每个标签都有一个“类”在我们的例子中，为了获得每个产品的名称，我们需要提取位于带有类<code class="fe nl nm nn no b">Product_name_3eWGG</code>的<code class="fe nl nm nn no b">&lt;h4&gt;</code>标签中的信息。</p><p id="c12c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据您要查找的内容，标签和类名可能会有所不同。你可以搜索不同网站甚至图片的链接。</p><h2 id="3222" class="np ma iq bd mb nq nr dn mf ns nt dp mj lf nu nv ml lj nw nx mn ln ny nz mp oa bi translated"><strong class="ak"> 4。准备工作空间</strong></h2><p id="5c4c" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">首先，你需要下载安装<a class="ae kv" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank"> Python </a>。</p><p id="a3d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以使用任何适合您的IDE，但是我推荐使用<a class="ae kv" href="https://www.jetbrains.com/pycharm/download/#section=mac" rel="noopener ugc nofollow" target="_blank"> PyCharm </a>,因为它工作起来很有魅力！</p><p id="90e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建新项目后，您将需要以下库:</p><ul class=""><li id="b3f6" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated">Selenium:用于web测试和自动化浏览器活动。</li><li id="163f" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">BeautifulSoup:用于解析HTML和XML文档。</li><li id="70c3" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">熊猫:用于数据操作和分析。您可以提取数据并以您想要的格式存储数据。</li></ul><p id="93fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以通过打开项目中的终端并使用以下命令行来安装它们:</p><pre class="kg kh ki kj gt od no oe of aw og bi"><span id="2fd2" class="np ma iq no b gy oh oi l oj ok">python -m pip install selenium pandas beautifulsoup4</span></pre><h2 id="8bf3" class="np ma iq bd mb nq nr dn mf ns nt dp mj lf nu nv ml lj nw nx mn ln ny nz mp oa bi translated"><strong class="ak"> 5。编写代码</strong></h2><p id="4227" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">让我们导入一分钟前安装的库:</p><pre class="kg kh ki kj gt od no oe of aw og bi"><span id="628b" class="np ma iq no b gy oh oi l oj ok">from selenium import webdriver <br/>from bs4 import BeautifulSoup<br/>import pandas as pd</span></pre><p id="669a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们需要通过将路径设置为<code class="fe nl nm nn no b"><a class="ae kv" href="https://chromedriver.chromium.org/downloads" rel="noopener ugc nofollow" target="_blank">chromedriver</a></code>来配置webdriver使用Chrome浏览器。只要路径正确，<code class="fe nl nm nn no b">chromedriver</code>位于何处并不重要。不要忘记在末尾添加可执行文件的名称，而不仅仅是它的位置！</p><pre class="kg kh ki kj gt od no oe of aw og bi"><span id="9351" class="np ma iq no b gy oh oi l oj ok">driver = webdriver.Chrome("/your/path/here/chromedriver")</span></pre><p id="ffe3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">声明变量并设置您希望抓取的网站的URL:</p><pre class="kg kh ki kj gt od no oe of aw og bi"><span id="f18e" class="np ma iq no b gy oh oi l oj ok">models = []<br/>prices = []<br/>driver.get('<a class="ae kv" href="https://www.footshop.eu/en/2311-nike-men-s-shoes" rel="noopener ugc nofollow" target="_blank">https://www.footshop.eu/en/2311-nike-men-s-shoes</a>')</span></pre><p id="0cbd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">快好了！</p><p id="a545" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要从网站中提取所需的信息，这些信息位于嵌套的<code class="fe nl nm nn no b">&lt;div&gt;</code>标签中。找到具有相应类名的标签，并将数据存储在上面声明的变量中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol om l"/></div></figure><h2 id="b29b" class="np ma iq bd mb nq nr dn mf ns nt dp mj lf nu nv ml lj nw nx mn ln ny nz mp oa bi translated"><strong class="ak"> 6。运行代码</strong></h2><p id="22e4" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">要运行代码，使用以下命令(基本上是告诉Python运行您编写代码的<code class="fe nl nm nn no b">.py</code>文件):</p><pre class="kg kh ki kj gt od no oe of aw og bi"><span id="ed5e" class="np ma iq no b gy oh oi l oj ok">python main.py</span></pre><h2 id="b40e" class="np ma iq bd mb nq nr dn mf ns nt dp mj lf nu nv ml lj nw nx mn ln ny nz mp oa bi translated"><strong class="ak"> 7。存储提取的数据</strong></h2><p id="63c8" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">你提取了数据，但你打算用它做什么？以更好的格式存储它以供进一步分析是一种解决方案。在本例中，我们将以CSV(逗号分隔值)格式存储它，因为它可以很容易地导入:</p><pre class="kg kh ki kj gt od no oe of aw og bi"><span id="10b6" class="np ma iq no b gy oh oi l oj ok">df = pd.DataFrame({'Product Name': models, 'Price': prices})<br/>df.to_csv('sneakers.csv', index=False, encoding='utf-8')</span></pre><p id="737a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们重新运行代码，就会创建一个名为<code class="fe nl nm nn no b">sneakers.csv</code>的文件。如果您收到“无法从节点连接读取描述符”错误，没有必要惊慌。这只是一个无害的警告。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi on"><img src="../Images/410e704dcf4067c3b8888fef046994dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/0*PXACtAUyJgeguJGt"/></div></figure><p id="7789" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后…我们结束了！</p><p id="65f1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇文章已经帮助你理解了使用Python进行web抓取的基础知识。</p><p id="1d48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，这种方法非常方便易用，但不是最有效的，因为一次只能抓取一个网页。您还需要手动选择嵌套在网站上的标签。</p><p id="3202" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，这比手动操作要快得多——尤其是如果您想要抓取几个相似的页面。例如，如果我们接下来要检查阿迪达斯的鞋子，我们只需要更改几行代码。</p><p id="c590" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想一起刮，你可以找到更先进的工具。首先，看看web抓取API能做什么。WebScraping API编写了一份关于选择API的指南，其中也包括一些建议。</p><p id="808a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">编码和刮擦快乐！</p></div></div>    
</body>
</html>