<html>
<head>
<title>JavaScript Misfits: Odds and Ends That Will Make or Break Your Day</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript不合群:决定你一天成败的琐事</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/javascript-misfits-713860befacf?source=collection_archive---------3-----------------------#2020-01-01">https://betterprogramming.pub/javascript-misfits-713860befacf?source=collection_archive---------3-----------------------#2020-01-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a85a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Bignums、NaN、奇数真值等等</h2></div><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div><p class="kp kq gj gh gi kr ks bd b be z dk translated">资料来源:Giphy.com</p></figure></div><div class="ab cl kt ku hx kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="im in io ip iq"><h1 id="5909" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">NaN类型</h1><p id="9804" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">有时候，你的函数会返回一些不定形式(比如0/0，无穷大-无穷大等等。)并且该值被赋予特殊的数字<strong class="lu iu"> <em class="mo"> </em> </strong> <code class="fe mp mq mr ms b">NaN</code>，其代表<em class="mo">而不是数字</em>。</p><p id="b6c7" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated"><em class="mo"> </em> <code class="fe mp mq mr ms b">NaN</code> <em class="mo"> </em>听起来很诡异，本身就有一种类型的<em class="mo">号</em>！</p><pre class="ki kj kk kl gt my ms mz na aw nb bi"><span id="092b" class="nc lb it ms b gy nd ne l nf ng">typeof(NaN);<br/>--&gt; “number”</span></pre><p id="e96e" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">如果你认为，<code class="fe mp mq mr ms b">NaN</code>实际上是赋给一个JavaScript无法解释的数字的值。这是一个数字，就我们的常识而言，这不是一个数字。所以，它还是一个数字，对吗？对吗？</p></div><div class="ab cl kt ku hx kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="im in io ip iq"><h1 id="6e55" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi">9999999999999999</h1><p id="e0c7" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">这并不像看起来那么棘手，但总是在人们第一眼看到它时就被吸引住。只需在控制台中键入这个巨大的数字:</p><pre class="ki kj kk kl gt my ms mz na aw nb bi"><span id="dca3" class="nc lb it ms b gy nd ne l nf ng">console.log(9999999999999999);</span><span id="39c8" class="nc lb it ms b gy nh ne l nf ng">--&gt; 10000000000000000</span></pre><p id="28fd" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">好吧，刚刚发生了什么？JS是在给我四舍五入数字吗？你可以从它上面去掉一些9来检查。</p><pre class="ki kj kk kl gt my ms mz na aw nb bi"><span id="fe6f" class="nc lb it ms b gy nd ne l nf ng">console.log(9999999999999);</span><span id="0940" class="nc lb it ms b gy nh ne l nf ng">--&gt; 9999999999999</span></pre><p id="0dcb" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">很明显这不是四舍五入。那么，这个全是9的16位数是怎么回事呢？</p><pre class="ki kj kk kl gt my ms mz na aw nb bi"><span id="96ff" class="nc lb it ms b gy nd ne l nf ng">console.log(1234567892345671);</span><span id="c1b8" class="nc lb it ms b gy nh ne l nf ng">--&gt; 1234567892345671</span></pre><p id="0571" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">等等，1234567892345671保持原样。那么，有什么条件呢？</p><p id="76a3" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">JavaScript没有整数，只有浮点数，只包含有限的精度，最多15位。这个数字的精度有所损失，因为在64位中，只有52位可用于存储数字，在这种情况下，它是不够的。</p></div><div class="ab cl kt ku hx kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="im in io ip iq"><h1 id="6737" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi">0.1 + 0.2 !=0.3</h1><p id="834c" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">等等，你疯了吗？那是一些六年级数学JS搞不定的！</p><pre class="ki kj kk kl gt my ms mz na aw nb bi"><span id="c6e0" class="nc lb it ms b gy nd ne l nf ng">console.log(0.1 + 0.2!=0.3);</span><span id="6285" class="nc lb it ms b gy nh ne l nf ng">--&gt; true</span></pre><p id="74b3" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">或者，也许，这是一些你不能处理的JavaScript</p><pre class="ki kj kk kl gt my ms mz na aw nb bi"><span id="da2e" class="nc lb it ms b gy nd ne l nf ng">console.log(0.1 + 0.2);</span><span id="0c5f" class="nc lb it ms b gy nh ne l nf ng">--&gt; 0.30000000000000004</span></pre><p id="8a92" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">JavaScript存储小数和分数不像我们在头脑中存储它们那样容易，它将它们转换成二进制数，仅仅是0和1的组合。</p><p id="fb60" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">你刚刚偶然发现了一个不符合二进制的数字(0.3)！放松，你和JavaScript都能像专家一样处理六年级的数学！</p></div><div class="ab cl kt ku hx kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="im in io ip iq"><h1 id="f90c" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">Math.max()和Math.min()</h1><pre class="ki kj kk kl gt my ms mz na aw nb bi"><span id="69dd" class="nc lb it ms b gy nd ne l nf ng">console.log(Math.max());<br/>--&gt; -Infinity</span><span id="9db4" class="nc lb it ms b gy nh ne l nf ng">console.log(Math.min());<br/>--&gt; Infinity</span></pre><p id="e833" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated"><code class="fe mp mq mr ms b">Math</code>是一个JavaScript对象，您已经使用了无数次，上面的表达式产生的结果似乎不合理。</p><p id="1f1e" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated"><code class="fe mp mq mr ms b">max()</code>和<code class="fe mp mq mr ms b">min()</code>是挂在<code class="fe mp mq mr ms b">Math</code>对象上的方法，它们分别从一组值中返回最大值和最小值。</p><p id="e789" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">当您没有传递任何参数时，<code class="fe mp mq mr ms b">Math.max()</code>会取可能的最小值，因为它实际上是一组空值中的最大值。有道理？</p><p id="1861" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">还记得在编程的早期课程中，给我们一组数字，我们需要从中找出最大的数字吗？</p><p id="3b4a" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">我们首先取一个变量<code class="fe mp mq mr ms b">‘Max’</code>，并给它分配一个尽可能小的值。然后我们遍历数组，用这个<code class="fe mp mq mr ms b">‘Max’</code>在每次迭代中使用蛮力检查值。</p><p id="a7ff" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">在任何时刻，这个<code class="fe mp mq mr ms b">‘Max’</code>保存了目前为止遇到的最大值。你能把这个简单的算法和我们刚刚读到的<code class="fe mp mq mr ms b">Math.max()</code>的意外结果联系起来吗？</p></div><div class="ab cl kt ku hx kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="im in io ip iq"><h1 id="2cf8" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi">[ ] + [ ]</h1><p id="2531" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">看起来我们正在添加两个空数组…</p><pre class="ki kj kk kl gt my ms mz na aw nb bi"><span id="2ba2" class="nc lb it ms b gy nd ne l nf ng">[]+[]<br/>--&gt; “”</span></pre><p id="b6b7" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">我们能得到一串吗？什么？</p><p id="bf88" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated"><code class="fe mp mq mr ms b">+</code>操作符只用于数字和字符串。当用于任何其他类型时，JS首先将该类型转换为string。</p></div><div class="ab cl kt ku hx kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="im in io ip iq"><h1 id="71fe" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi">[ ] + { }</h1><pre class="ki kj kk kl gt my ms mz na aw nb bi"><span id="71de" class="nc lb it ms b gy nd ne l nf ng">console.log([]+{});</span><span id="629d" class="nc lb it ms b gy nh ne l nf ng">--&gt; [object Object]</span></pre><p id="98bf" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">这个有什么特别的？我们只是拿回一个东西！是吗？仔细看。大写O的<code class="fe mp mq mr ms b">Object</code>是您非常熟悉的<code class="fe mp mq mr ms b">object</code>数据结构的构造函数的名称。</p><p id="5ec8" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">JavaScript中的大多数对象实际上都是<code class="fe mp mq mr ms b">Object objects.</code></p></div><div class="ab cl kt ku hx kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="im in io ip iq"><h1 id="24be" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">true===1</h1><p id="c242" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">很多时候，我们利用了这样一个事实:除了零，一切都是真理。</p><pre class="ki kj kk kl gt my ms mz na aw nb bi"><span id="3639" class="nc lb it ms b gy nd ne l nf ng">true==1<br/>--&gt; true</span></pre><p id="32bc" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">然而:</p><pre class="ki kj kk kl gt my ms mz na aw nb bi"><span id="a13e" class="nc lb it ms b gy nd ne l nf ng">true===1<br/>--&gt; false</span></pre><p id="f262" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">这个并不是真的不适合，但是因为我们习惯于把1当作真，把0当作假，所以它有时可能是一个真正的骗子。</p><pre class="ki kj kk kl gt my ms mz na aw nb bi"><span id="7095" class="nc lb it ms b gy nd ne l nf ng">typeof(true)<br/>--&gt; “boolean”</span><span id="2a2c" class="nc lb it ms b gy nh ne l nf ng">typeof(1);<br/>--&gt; “number”</span></pre><p id="851b" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">我们在比较两种不同的类型，必然会得到错误的比较结果。</p><p id="c218" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">三重相等检查类型和值。</p></div><div class="ab cl kt ku hx kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="im in io ip iq"><h1 id="73ec" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi">[ ]==0</h1><pre class="ki kj kk kl gt my ms mz na aw nb bi"><span id="8eda" class="nc lb it ms b gy nd ne l nf ng">[]==0<br/>--&gt; true</span></pre><p id="dd38" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">没有值的数组是假值？</p><p id="e5ab" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">在JavaScript中，空数组被转换为空字符串，而空字符串被视为falsy值。</p></div><div class="ab cl kt ku hx kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="im in io ip iq"><h1 id="da20" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi">(!+[ ]+[ ]+![ ])</h1><pre class="ki kj kk kl gt my ms mz na aw nb bi"><span id="6802" class="nc lb it ms b gy nd ne l nf ng">console.log((!+[]+[]+![]).length)<br/> --&gt; 9</span></pre><p id="8494" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">不，我的猫没有跑过我的键盘。去挠头一会儿吧…</p><p id="a674" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">提示:这与操作符的优先级和字符串的长度有关。</p><p id="f3b7" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">对了，我没养猫！</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="ni ko l"/></div><p class="kp kq gj gh gi kr ks bd b be z dk translated">资料来源:Giphy.com</p></figure><p id="4442" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">2020快乐。</p><p id="12ad" class="pw-post-body-paragraph ls lt it lu b lv mt ju lx ly mu jx ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">你可以在栈溢出中找到对每个问题的详细解释。请在评论中让我知道有多少你已经知道了，能想出来，又有多少让你感到惊讶！</p></div></div>    
</body>
</html>