<html>
<head>
<title>How To Simulate Location in Xcode and Simulator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Xcode和模拟器中模拟位置</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-simulate-location-in-xcode-and-simulator-94ce701f5e1f?source=collection_archive---------5-----------------------#2022-12-06">https://betterprogramming.pub/how-to-simulate-location-in-xcode-and-simulator-94ce701f5e1f?source=collection_archive---------5-----------------------#2022-12-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a2ce" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">静态和动态位置模拟</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4029a3f36e738d7b70b6efea7234b02c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*w5YD29xAXIZo98Ij"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片由<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae kv" href="https://unsplash.com/es/@bugsster?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Taras Shypka </a>拍摄</p></figure><p id="213a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当在一个需要它指向特定位置或模拟自定义位置移动的应用程序上工作时，每次都要在模拟器或iOS设备上手动设置，这很繁琐。我们有一些快速排序的方法，这样你和你的团队就可以在排序后指向多个位置。</p><h1 id="2db6" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak"> 1。静态位置模拟</strong></h1><p id="8642" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">当我们想要指向一个定制的静态位置时，我们有两个选择:</p><ul class=""><li id="53f7" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">默认静态位置</li><li id="4451" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">自定义静态位置</li></ul><h2 id="3562" class="nd lt iq bd lu ne nf dn ly ng nh dp mc lf ni nj me lj nk nl mg ln nm nn mi no bi translated">默认静态位置</h2><p id="4f7c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Xcode附带了一些默认城市来帮助模拟位置。有两种方法可以做到:</p><p id="fd90" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">㈠通过编辑方案</p><p id="ada9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击“产品”菜单和“选项”选项卡下的“运行”菜单，导航至编辑方案，如以下屏幕截图所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/dd5c5d5ae007ee761859504756cb77aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D3UMFKfkeZBSX5XXfBSffQ.jpeg"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/2ee8d04df20c0c62e5d77c4b866c812b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ifagwuHBs71eFgsi_K7b_w.jpeg"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/143494f5f0cb86d9bd8336cee2c648ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fqf7vCcZCuHN5bLlgdLB3w.png"/></div></div></figure><p id="6c06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">确保选择了允许位置模拟，您可以从给定的选项中选择一个位置，以模拟模拟器/设备在应用程序启动时指向该位置。</p><p id="a9c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(ii)从菜单栏中</p><p id="d9b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">轻按Xcode菜单栏中的“调试”,然后点按“模拟位置”。将会看到相同的默认位置选项，如下图所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/b27aefa0118e10397a363588b6c93623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FoB8sZUBQ3Fgrn1XUV_9kA.jpeg"/></div></div></figure><p id="bc3a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(iii)从底部调试栏</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/f69f735847dfebab457809117304fc59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*194oQyglkXpf4vO9yAkkWQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">当应用程序启用了位置权限时，将启用此选项</p></figure><h2 id="dc31" class="nd lt iq bd lu ne nf dn ly ng nh dp mc lf ni nj me lj nk nl mg ln nm nn mi no bi translated">自定义静态位置</h2><p id="50b1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">如果我们需要将我们的应用指向一个特定的位置，例如，指向我的家乡，<a class="ae kv" href="https://goo.gl/maps/TqinzARhuNBWhjGH6" rel="noopener ugc nofollow" target="_blank"> Tiruchirappalli </a>(默认列表中没有)，我们需要坐标。</p><blockquote class="nt nu nv"><p id="1cde" class="kw kx nw ky b kz la jr lb lc ld ju le nx lg lh li ny lk ll lm nz lo lp lq lr ij bi translated">在谷歌地图上点击右键，可以轻松获取任何地点的坐标。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/ebb123b347e13e5bb449ce773f670a7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RQyYEc173iefXAGmUpzrCg.png"/></div></div></figure><p id="1c90" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦我们得到它们，进入模拟器菜单，点击功能→自定义位置，并输入坐标。应用程序现在不会开始指向自定义位置。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/233b3aa8e3c5129d7b348d30d74bfd9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jWIT8wAHjHRCq3t5xfFGZw.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/c1ced3d718e4b6e0543887d2406b90c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*SnJKP6lhhrdGY5MUYW15Og.gif"/></div></div></figure><h2 id="86aa" class="nd lt iq bd lu ne nf dn ly ng nh dp mc lf ni nj me lj nk nl mg ln nm nn mi no bi translated"><strong class="ak">使用GPX文件自定义静态位置</strong></h2><p id="b3f2" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了模拟一个位置，我们可以使用一个GPX文件。</p><blockquote class="nt nu nv"><p id="345d" class="kw kx nw ky b kz la jr lb lc ld ju le nx lg lh li ny lk ll lm nz lo lp lq lr ij bi translated">GPX，或称GPS交换格式，是一种为软件应用程序设计的通用<a class="ae kv" href="https://en.wikipedia.org/wiki/GPS" rel="noopener ugc nofollow" target="_blank"> GPS </a>数据格式的<a class="ae kv" href="https://en.wikipedia.org/wiki/XML_schema" rel="noopener ugc nofollow" target="_blank"> XML模式</a>。它可以用来描述<a class="ae kv" href="https://en.wikipedia.org/wiki/Waypoint" rel="noopener ugc nofollow" target="_blank">路点</a>、<a class="ae kv" href="https://en.wikipedia.org/wiki/GPS_tracking" rel="noopener ugc nofollow" target="_blank">轨迹</a>和路线。</p></blockquote><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><h2 id="2557" class="nd lt iq bd lu ne nf dn ly ng nh dp mc lf ni nj me lj nk nl mg ln nm nn mi no bi translated"><strong class="ak">如何创建GPX文件？</strong></h2><p id="ec7b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">(i) Xcode文件菜单→新建→文件(Ctrl+N)，导航到资源列，可以找到GPX文件选项，点击下一步，定义一个名称，就大功告成了</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/8b0da0f635e3c286ce57b1e39014441b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oQqPA0ukCY1c5Ed5JwmhHw.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/c9cf6bd3a2c0083bc47f5d0f997ff81b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kRUf0mguzX4Uoe1_TtZP9A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">默认的GPX文件是苹果园区的位置。</p></figure><blockquote class="nt nu nv"><p id="84be" class="kw kx nw ky b kz la jr lb lc ld ju le nx lg lh li ny lk ll lm nz lo lp lq lr ij bi translated"><strong class="ky ir">注意</strong>:创建一个GPX文件，其中只有一个航路点(<code class="fe oh oi oj ok b">&lt;wpt&gt;</code>)和一个你想要模拟的坐标</p></blockquote><p id="c884" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成后，在编辑方案位置选项下选择它，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ol"><img src="../Images/c684f2290ca0b4a03fff718680692c35.png" data-original-src="https://miro.medium.com/v2/format:webp/1*7ZgUzrvIpNcD1njR7QQS_Q.png"/></div></figure><blockquote class="nt nu nv"><p id="c789" class="kw kx nw ky b kz la jr lb lc ld ju le nx lg lh li ny lk ll lm nz lo lp lq lr ij bi translated"><strong class="ky ir">注意</strong>:这里默认情况下，Xcode会创建一个带有名称和时间的航点，但这些不是强制属性。</p></blockquote><p id="816a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以将任意数量的位置点(坐标)保存为GPX文件，并在Xcode中使用它们。</p><h1 id="cc8d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak"> 2。动态(多)位置模拟</strong></h1><p id="2379" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">如果我们的应用程序需要模拟一个位置移动，就像健身应用程序或应用程序中的位置跟踪功能所需要的那样，那么仅仅一个自定义坐标是不够的。在这些情况下，我们可能需要在一个GPX文件中使用多个<code class="fe oh oi oj ok b">&lt;wpt&gt;</code>标签！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="9c41" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里需要时间(<code class="fe oh oi oj ok b">&lt;time&gt;</code>)标签来模拟真实的运动，Xcode会根据每个航点之间经过的时间，以一定的速度插入运动。如果不提供时间元素，Xcode将使用固定的速率。</p><p id="21c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从一点到下一点的时间由<code class="fe oh oi oj ok b">&lt;time&gt;</code>元素之间的差异决定。</p><blockquote class="nt nu nv"><p id="c350" class="kw kx nw ky b kz la jr lb lc ld ju le nx lg lh li ny lk ll lm nz lo lp lq lr ij bi translated">从P0到P1花费的时间= (P1时间)——(P0时间)</p></blockquote><p id="a723" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的例子中，点1的时间是<code class="fe oh oi oj ok b">2022–12–04T17:28:09Z</code>，点2的时间是<code class="fe oh oi oj ok b">2022–12–04T17:30:15Z</code>。相差两秒钟。Xcode会用两秒的时间从点1转到点2。在此期间，位置将会改变，这意味着如果您实现了</p><pre class="kg kh ki kj gt om ok on bn oo op bi"><span id="6f16" class="oq lt iq ok b be or os l ot ou">func locationManager(_ manager: CLLocationManager, <br/>                     didUpdateLocations locations: [CLLocation])</span></pre><p id="08be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您将在Xcode从点1模拟到点2的两秒钟之间收到更新。</p><blockquote class="nt nu nv"><p id="dd24" class="kw kx nw ky b kz la jr lb lc ld ju le nx lg lh li ny lk ll lm nz lo lp lq lr ij bi translated"><strong class="ky ir">注意</strong>:航路点必须按时间升序排列。</p></blockquote><h2 id="4c40" class="nd lt iq bd lu ne nf dn ly ng nh dp mc lf ni nj me lj nk nl mg ln nm nn mi no bi translated"><strong class="ak"> GPX跟踪器</strong></h2><p id="d8f8" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">有许多工具可以利用我们的专用输入生成GPX文件，其中之一是我使用的<a class="ae kv" href="https://apps.apple.com/us/app/open-gpx-tracker/id984503772" rel="noopener ugc nofollow" target="_blank"> GPXTracker </a>一个<a class="ae kv" href="https://github.com/merlos/iOS-Open-GPX-Tracker" rel="noopener ugc nofollow" target="_blank"> opensource </a>工具:</p><p id="53e2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装应用程序并打开它。只需长按您想要的位置点，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/93d4699654f7bca4e8211022e4067ddb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*gNFISwP8QBM2dUoiMekhDg.gif"/></div></div></figure><p id="8355" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦你放置好点，你可以点击底部的保存按钮，将保存的点拖放到Xcode中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/aa14fa89bdf25ca2acb4d511bf158c34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*FkVbExUdEVCwCKNEumnsPw.gif"/></div></div></figure><p id="01b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Xcode还附带了一些默认的动态位置模拟(预定义的时刻)，如果它们适合您要调试的应用程序用例，您可以使用它们:</p><ol class=""><li id="e663" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr ox mv mw mx bi translated">城市运行</li><li id="bbf1" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr ox mv mw mx bi translated">城市自行车骑行</li><li id="fd34" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr ox mv mw mx bi translated">高速公路车道</li></ol><p id="78a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这三个选项将模拟跑步、骑行和驾驶的运动，根据速度而变化。这对于快速调试非常有用。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/8d69e97a598d2a51a2e7173345ace09e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U42L7GB5NVrBuFL2Pzrkxg.png"/></div></div></figure><p id="9032" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这适用于快速测试，因为您无法控制移动路线。为了更好地控制，你必须用GPX文件在Xcode中模拟运动。</p><h2 id="3a16" class="nd lt iq bd lu ne nf dn ly ng nh dp mc lf ni nj me lj nk nl mg ln nm nn mi no bi translated">位置模拟的缺点</h2><p id="3e6e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这些模拟通常用于测试/实现目的，因为它们对实际移动速度和准确性没有帮助。</p><p id="e2a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我感谢我的同事Daniel向我介绍了GPX追踪器和位置模拟技术。</p></div></div>    
</body>
</html>