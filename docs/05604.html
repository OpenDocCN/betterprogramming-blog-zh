<html>
<head>
<title>What Are Keyframe Animations in Swift 5?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift 5中有哪些关键帧动画？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/what-are-keyframe-animations-in-swift-5-55eaf04f7637?source=collection_archive---------16-----------------------#2020-07-21">https://betterprogramming.pub/what-are-keyframe-animations-in-swift-5-55eaf04f7637?source=collection_archive---------16-----------------------#2020-07-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="723d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何将多个动画链接在一起</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/54e4f60337741b916dbdf90f267d35a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*R8ZRTOUQEErO38mY"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@borisview?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> boris misevic </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="3396" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天我们将学习Swift中的关键帧动画。简而言之，它们允许我们在一个流程中组合几个<code class="fe lv lw lx ly b">UIView</code>动画。这样，通过将动画分解成不同的小步骤，您可以轻松创建外观复杂的动画。</p><p id="bb2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将在Xcode操场上快速试验一个关键帧动画。这是我们要实现的目标:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lz"><img src="../Images/f82a580cd95de7064092ebd0bd4ab5e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CM_aAE_pR1LoOYql8nQjiA.gif"/></div></div></figure><p id="026f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">源代码可以在文章的底部找到。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="93ee" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">我们开始吧</h1><p id="0314" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">我们有一个简单的圆形<code class="fe lv lw lx ly b">UIView</code>在一个<code class="fe lv lw lx ly b">UIViewController</code>中垂直居中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="5d97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们所看到的，我们引用了两个我们将要制作动画的<code class="fe lv lw lx ly b">NSLayoutConstraint</code>。</p><p id="fc2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前，什么也没发生，循环静止不动:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/544fa1ca602697122182f8df16ed2c39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m9BRJh1qzctB3ngbTCyeSw.png"/></div></div></figure><p id="5f8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们改变这一点。添加<code class="fe lv lw lx ly b">performAnimations()</code>方法，并在<code class="fe lv lw lx ly b">viewDidAppear()</code>方法中调用它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="17b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们实现了<code class="fe lv lw lx ly b">animateKeyframes</code>方法，在这个方法中我们将添加所有的动画。我们给三秒钟来完成整个动画过程。</p><p id="7406" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在是时候添加单独的动画了。创建一个名为<code class="fe lv lw lx ly b">addKeyframes(count:)</code>的新方法，它将生成许多关键帧动画，这些动画将改变约束的<code class="fe lv lw lx ly b">constant</code>属性:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="b16f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一些要点:</p><ul class=""><li id="4731" class="nh ni it lb b lc ld lf lg li nj lm nk lq nl lu nm nn no np bi translated"><code class="fe lv lw lx ly b">withRelativeStartTime</code>参数采用一个<code class="fe lv lw lx ly b">Double</code>值，表示关键帧动画的相对开始时间。例如，如果我们将0作为参数传递，这个特定的动画将首先开始。</li><li id="db46" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated">类似地，<code class="fe lv lw lx ly b">relativeDuration</code>参数指定了所提供的关键帧将花费的相对时间。在我们的例子中，我们之前为整个动画链指定了三秒钟的时间。因此，当我们在这里传递0.1值时，这意味着这个特定的动画将花费0.3秒。</li></ul><p id="4a2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如我们所见，我们依次改变<code class="fe lv lw lx ly b">centerXConstraint</code>和<code class="fe lv lw lx ly b">centerYConstraint</code>，使圆圈向<code class="fe lv lw lx ly b">x</code>和<code class="fe lv lw lx ly b">y</code>两个方向移动。为了让实际的约束动画发生，我们在根<code class="fe lv lw lx ly b">view</code>上运行<code class="fe lv lw lx ly b">layoutIfNeeded()</code>方法。</p><p id="2c8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们在<code class="fe lv lw lx ly b">performAnimations()</code>内部调用这个方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="b6d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们传递八个动画，它们将占用三秒钟动画时间的80%。</p><p id="8150" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以看到圆圈向右移动，同时上升到顶部:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/ce2a401d5f91e4105439ffc89ea7c268.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*9fnHou09BmCGPa_t5GIAbA.gif"/></div></div></figure><p id="0c81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们现在添加我们的工作的剩余触摸。</p><p id="6f81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要圆圈在上升到顶部后淡出，然后在它的路线开始时出现。我们也希望动画无限运行。这些动画将占用总共3秒钟的剩余20%的时间。</p><p id="5f64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像这样更新<code class="fe lv lw lx ly b">performAnimations()</code>方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="12da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们添加了两个额外的关键帧:</p><ul class=""><li id="eb2a" class="nh ni it lb b lc ld lf lg li nj lm nk lq nl lu nm nn no np bi translated">一个放置圆-从左边20点，并使其透明。</li><li id="80bb" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated">另一个把它带到左边+10点，使它可见。</li></ul><p id="fed9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，我们还在完成处理程序中递归调用了<code class="fe lv lw lx ly b">performAnimation()</code>方法。</p><p id="d4d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们完成了我们的任务:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lz"><img src="../Images/f82a580cd95de7064092ebd0bd4ab5e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CM_aAE_pR1LoOYql8nQjiA.gif"/></div></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="469d" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">资源</h1><p id="64a2" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">源代码可以在<a class="ae ky" href="https://gist.github.com/zafarivaev/032d6ac96225b8a5f11439569a149065" rel="noopener ugc nofollow" target="_blank">要点</a>中找到。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><p id="0405" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>