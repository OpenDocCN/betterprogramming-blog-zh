# 为什么您现在就应该开始使用 TypeScript

> 原文：<https://betterprogramming.pub/why-you-should-start-using-typescript-today-30265db6ace3>

## TypeScript 给编程的“元老”带来了很多

![](img/2580c58e34dacb8b451a8724120dd901.png)

奥斯卡·西尔万在 [Unsplash](https://unsplash.com/search/photos/grampa?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的照片

*原载于* [*可扩展路径网站*](https://www.scalablepath.com/) *，作者*[](https://www.scalablepath.com/pub/4304/Juan%20Pablo)**，2019 年 5 月 3 日**

*JavaScript 已经有 20 多年的历史，是编程界的元老之一。根据开发者社区 HackerRank 的说法，它也是 2018 年最受欢迎的编程语言。这种由对 web 应用程序的持续需求所驱动的长寿，让人们开始关注 JavaScript 固有的局限性。*

# *动态和静态语言类型*

*JavaScript 一直在添加更多的特性来弥补其成长的烦恼。他们最近增加了导入模块、新结构(比如类)和更多实用方法的新方法。这些都不能解决一个基本问题:JavaScript 是一种动态类型语言。*

*有两种语言类型:动态和静态。当你必须声明一个变量以及它将包含的元素的类型时，这种语言被称为静态类型。例如，如果一个变量存储一个数字，它的类型必须是整数，如果一个变量存储一个单词，它的类型必须是字符串。因为它是动态的，JavaScript 不允许你这样做。*

*但是有一个解决方案。这是微软带给我们的，它注意到了 JavaScript 生态系统中的成长烦恼，并决定采取行动。*

# *那么什么是 TypeScript 呢？*

*TypeScript 是 JavaScript 语言的超集。*不好意思，一个什么？”*迷茫？好了，是时候来点数学理论了！*

*当 B 中的所有元素都包含在 A 中时，集合 A 被视为集合 B 的超集。通俗地说，这意味着 TypeScript 引入了 JavaScript 本身不支持的特性(接口、枚举、类型和装饰器)。这种方法的伟大之处在于，可以像定义标准 JavaScript 变量一样使用这些新的结构和特性。不需要修改任何代码！*

# *TypeScript 解决了什么问题？*

*如前所述，JavaScript 是在一个非常不同的互联网时代诞生的。TypeScript 的“升级”包含了建立在 JavaScript 优势之上的特性，并对其弱点进行了改进。让我们来看看一些亮点:*

## *句法糖*

*语法糖是编程语言中的一种语法风格，旨在使人们使用的东西更容易阅读，或“更甜蜜”。TypeScript 允许开发人员通过编写带有额外语法糖的 JavaScript 代码来满足他们的甜食需求(对不起)。*

*这到底看起来像什么？*

***例一:***

*你可以为变量设置类型，这样你就不必花时间去计算变量的类型。*

*`let myVariable: number = 5;`*

***例二:***

*假设您有一个接收参数的函数——在使用 TypeScript 之前，您不知道对象有什么属性。使用 TypeScript，当将参数的类型指定为`MyParameter`时，只能使用接口中描述的属性:*

## *自动完成*

*自动完成功能的好坏取决于它给你的建议。因为没有类型是不可能实现良好的自动完成支持的，所以这是一个受欢迎的补充。它为语句定义、函数调用、对象创建等提供了更精确的自动完成场景。*

## *静态类型检查*

*在代码执行之前执行的静态类型检查是 TypeScript 最重要的功能之一。有了它，开发人员可以更快地发现错误(防止那些其他人在 QA 中发现的令人尴尬的打字错误)。*

> *"单单静态类型检查特性就能提高你的生产力，减少技术上的负担."*

*让我用下面的例子来解释为什么:*

```
*let myVariable = 5;
myVariable = "Changed to string";
myVariable = { };
myVariable.a = "myNewProperty"*
```

*在 JavaScript 中，这是“有效的”代码——您可以先将变量定义为整数，然后将其更改为字符串，最后更改为对象。这没有任何逻辑意义，但这是可能的。因此，JavaScript 开发人员经常面临类型兼容性问题。*

```
*function sum(a, b) {
  return a + b
}*
```

*我可以如下调用上面的函数:*

```
*sum(1, 2)
sum(1, "3")*
```

*该函数将接受这些值，即使我假设参数是数字。对于后一种情况，答案将是“13”而不是“4”，因为它假设它是一个字符串连接而不是一个实数总和。这些不兼容性使得 JavaScript 成为一种非常不可靠的编程语言。*

*TypeScript 提供了一种语法，允许您编写类似这样的内容*

```
*function sum(a: number, b:number) {
  return a + b
}*
```

*所以，当你试着调用这个函数的时候:*

```
*sum(1, "3")*
```

*它将显示一个错误，说*“嘿，我期望得到一个整数，而你给了我一个字符串。把这个修好！”*(或者不那么口语化的东西)。这就是静态类型检查，这也是为什么 TypeScript 使 JavaScript 成为更可靠的语言。*

*例如，它防止声明一个变量，这个变量存储一个数字，由于某种原因在程序执行过程中变成一个字符串。因此，编写的代码更加一致。*

# *对于分布式团队更实用*

*分布式团队成员之间的交流，在同一个代码基础上工作，可能会有问题，除非代码自己说话。*

*虽然 TypeScript 代码通常更冗长，但其可读性得到了提高。这是因为，当您为变量设置类型时，您确切地知道函数中会出现什么(以及函数需要返回什么值以及变量可以存储什么类型)。根据 Salesforce 的架构师 Sarah Mei 的说法，“一个类型系统可以取代与其他人类的直接交流”。*

*这种可读性转化为性能和更少的技术债务。而且你会避免破坏别人的代码！*

# *更具伸缩性的代码*

*编写非结构化的 JavasScript 代码既有好处也有弱点。这在构建小型应用程序时是一个优势——因为它们可以构建得更快——但随着应用程序变得越来越复杂，这也是一个弱点。*

*假设您的网站上有一个收集新用户信息(姓名、年龄、电子邮件)的表单，它使用所有这些字段触发一封欢迎电子邮件。后来，在您的应用程序代码库增长之后，您决定从表单中删除“年龄”字段，但是您忘记了该字段的输入将在欢迎电子邮件中使用。在标准的 JS 中，你不会被通知这个问题——应用程序在执行时会失败。这是因为普通 JavaScript 没有这种级别的验证。TypeScript 是不同的:无论什么时候出了问题，您都会马上得到通知。*

# *运行时兼容性*

*讨论最多的 TypeScript 特性之一是它如何将代码编译成普通的 JavaScript。让我们深入了解一下这是如何工作的。*

*每个浏览器都有自己的 JavaScript 引擎，每个引擎对 JavaScript 的解释略有不同。为了缓解这个问题，TypeScript 允许您编译代码并将其转换为与所有浏览器兼容的版本。代码首先用特定版本的 JavaScript 编写。然后，它被转换成目标输出，这将是相同的代码，但在另一个版本中编写。这些版本可以通过 tsconfig.json 文件轻松配置(其中源代码是类型脚本代码，目标由您选择)。通常，用作目标的版本称为 ES2015。*

*因为整个开发过程的开始和结束都是普通的旧 JavaScript 代码，所以它可以在任何浏览器、主机或操作系统上运行。这意味着为每个浏览器版本编写特定代码的时代已经过去了。呜！*

# *更强大的软件开发*

*JavaScript 被归类为多范例语言。范例通常用于根据编程语言的特征(例如，编写代码的方式和使用的结构)对编程语言进行分类。多范例语言——如 JavaScript——允许开发人员以多种方式编写任何一种解决方案。例如，使用面向对象的编程或函数式编程范例。*

*快速补充:很多人更喜欢使用函数而不是类。我不是那种人。JavaScript 中关键字“this”的复杂性使得人们害怕使用对象而不是函数。好消息是 TypeScript 可以存在于两个世界中——就像 JavaScript 一样。如果你不想使用类，那就坚持使用函数。没关系，你仍然可以编写可伸缩的代码*

*尽管 JavaScript 是一种多范例语言，但是缺乏接口、装饰器和枚举等特性使得开发人员无法充分利用面向对象编程范例的全部能力。通过添加这些功能，TypeScript 使开发人员能够使用更好的结构来访问和表示数据，从而使软件开发过程更加健壮。*

# *交叉点类型*

*交集类型有效地将多种类型组合成一种。这是非常强大的，因为您现在可以使用在多个类型中定义的属性来创建一个对象。在其他编程语言中，如 Java 或 C#，这就像从一个类中实现多个接口。*

*在 JavaScript 中，有一个概念叫做 mixin。mixin 可以定义为包含其他类使用的方法的类，这些方法不在父类中。*

*让我们后退一步，增加一些背景知识。在面向对象编程中，我们定义了父类和子类，也称为类继承。我们使用类继承来重用代码，但是这些代码需要在实际的类中或者在它的父类中定义。mixins 的不同之处在于，这些类不会从它们的父类继承代码。*

*交集类型通过允许我们将来自多个接口的方法或属性管理到一个对象中，实现了与使用 mixins 相同的结果。让我用官方文档中的一个例子来说明这一点。*

*有了这段代码，我可以像这样合并两个对象:*

```
*const newObject = extend(new Object1(), Object2.prototype);*
```

*另一个简单的例子:*

*在这种情况下，我创建了一个组合了两个(或更多)类型的类型，使我能够用来自不同类型的多个方法定义一个对象。*

*注意:要使用交集类型，请使用' & '字符。小心运用这种新的力量！*

# *工会类型*

*联合类型不同于交集类型。为了说明这一点。让我们创建一个带参数的函数。类型的种类(字符串、数字、null 或自定义类型，如“dog”或“bird”)并不重要，但是您需要设置函数将接收哪一个。*

*例如:*

*在这种情况下，它为函数提供了采用动态参数的灵活性，但范围有限。*

*注意:要使用联合类型，请使用“|”字符。*

# *以较低的成本获得出色的新功能！以低成本获得新功能！*

*这听起来像一个商业信息片，但在这种情况下，这是真的！TypeScript 不会给应用程序增加任何显著的开销，因为所有这些额外的功能在编译后都消失了。毕竟，生产中执行的代码只是普通的旧 JavaScript。*

*唯一的代价？稍大的 JS 文件。*

# *TypeScript 会产生什么问题？*

*代码包的这个小开销很好地将我们引入了 TypeScript 的缺点…有几个。*

# *对第三方库的依赖*

*你可能会怀疑整个外部库的设置。如果你问“一个库怎么能比它的母语被更频繁地使用？”，这是一个公平的问题，但这里有一个先例。Jquery 是一个库，它使得操作网页上的元素变得很容易。围绕它的讨论导致 JavaScript 社区关注库，而不是语言本身的发展。人们在学习 JQuery，但没有学习根语言。但是这里有一点不同，因为 TypeScript 不是一个改变或隔离 JavaScript 的库，而是一个为它添加功能的库。*

*同样重要的是要注意，每段 JavaScript 代码也是有效的类型脚本代码，而不是相反。此外，类型是可选的。其目的不是取代 JavaScript，而是为其添加功能。*

# *增长的学习曲线*

*是的，学习曲线不仅仅是学习 JavaScript。但是如果你考虑一下你为额外的时间投资得到了什么，这是一个公平的交易。任何以前有过普通 JavaScript 经验的人都可以在这里一炮打响。*

# *生产力下降*

*有些人认为使用 TypeScript 会降低生产率。这只在短期内是正确的。如果你考虑投资于更长的打字稿视图所带来的技术债务的减少，我会认为这提高了生产率，尽管这显然取决于你工作的复杂性(和质量)。*

*此外，将代码编译成另一个 JavaScript 版本的必要性听起来可能很烦人，但是这一步通常会添加到持续集成管道中(因此，就在代码进入生产之前)，因此通常是自动的。*

# *文件大小增加*

*TypeScript 文件比 JavaScript 文件大；大多少取决于多个变量。我发现的[研究](https://hackernoon.com/why-i-no-longer-use-typescript-with-react-and-why-you-shouldnt-either-e744d27452b4)表明类型脚本文件通常比 JavaScript 文件大 20%到 30%,尽管根据我的经验，这种增长并不明显。*

# *TypeScript 适合你吗？*

*所有这些将我们引向一个紧迫的问题——我(显然)是 TypeScript 的支持者，但它是适合你的工具吗？毕竟，正如我们所看到的，它不是银弹——它有一些缺点。*

*权衡与您的特定需求相关的任何技术决策的利弊总是值得的。例如，这些改进值得花费时间来改变你的过程和训练你的团队吗？*

# *如何开始使用 TypeScript？*

*如果你的回答是响亮的“是！”，那就让我赶紧送你上路吧。帮助您学习 TypeScript 超出了本文的范围——我只是想说服您安装它！*

*TypeScript 是一个依赖项。这意味着第一步是将它包含在您的项目中，并配置您的 IDE(集成开发环境)或文本编辑器。要包含它，您需要使用 [NPM](https://www.npmjs.com/package/node-dependency-manager) 或[纱](https://yarnpkg.com/en/)，它们是 JavaScript 的默认依赖管理器。*

# *谁在使用 TypeScript？*

*TypeScript 可以在许多现代 web 框架中进行配置，并且对它的支持在不断增加。例如，Vue.js 背后的团队正在重写他们的下一个主要版本，以包括 TypeScript。因此，尽管许多框架都支持 TypeScript，但并不是所有的框架都支持它。脸书的 React 库默认为他们自己的类型系统:Flow。*

*但是 TypeScript 不是这种类型的唯一工具是一件好事。这是一个简单的市场理论:拥有多个具有相同最终目标的工具会导致生态系统的更快发展，并避免单一声音指示将要采取的路径。*

*此外，TypeScript 并不局限于客户端:它也可以在服务器端运行！目前，这可以通过 Node 来实现。但 Node 的创造者 Ryan Dahl 正在开发 Deno，它也将能够运行 TypeScript。*

# *结论*

*TypeScript 可能是对 JavaScript 未来的展望。如果是，我喜欢！*

*TypeScript 确实可以改善开发人员的体验，让您能够高效地编写代码。微软，以及他们培养的庞大社区，已经在最需要的地方做了很好的工作来改进 JavaScript。*

*现在去增强您的 JavaScript 吧！*