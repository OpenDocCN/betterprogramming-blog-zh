<html>
<head>
<title>Threading in Swift Simply Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中的穿线简单解释道</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/threading-in-swift-simply-explained-5c8dd680b9b2?source=collection_archive---------0-----------------------#2018-08-31">https://betterprogramming.pub/threading-in-swift-simply-explained-5c8dd680b9b2?source=collection_archive---------0-----------------------#2018-08-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d0e2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用中央调度(GCD)来加速您的应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/970036ea5f9e8e567a0a52bffc69df61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B9e4MOBoF9WV3kQ5dGzQpA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@olegmagni?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">奥列格·马尼</a>在<a class="ae ky" href="https://unsplash.com/search/photos/phone?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="5358" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你来自其他平台，或者你是Swift的初学者，iOS中的线程可能很难理解。通过使用GCD，这里有一些提示可以让您在线程化方面有一个良好的开端。</p><p id="ec71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，作为先驱，线程化就是管理应用程序中工作的优先级。让你的代码执行得更快固然很好，但更重要的是用户感知你的应用成为<em class="lv">的速度有多快。</em></p><p id="3bb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一名开发人员，你的目标是优先考虑用户可以看到并与之交互的任何东西。它让你的应用程序感觉更快更敏捷。不要让用户等待加载他们没有注意到或关心的东西。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="06c5" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">1-仅使用主线程更新视图</h1><p id="f6f3" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这是避免问题的最简单的方法。基本思想是确保所有视图和界面元素不会被主队列中的其他项目阻塞。</p><p id="ae35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个很好的例子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/a7d51cc493725dba72b678011ffed189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2hWyth5492Zo13S1mKFpiA.png"/></div></div></figure><p id="be6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过只在主线程上执行与UI相关的工作，可以确保用户不会被阻止加载视图或退出视图。避免在主线程上加载数据、图像等有副作用的函数。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b68d" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">2 —了解不同的GCD服务质量(QoS)类型</h1><p id="7192" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在iOS中执行工作有几个不同的优先级。较高的服务质量被优先处理，而较低的服务质量在系统释放一些资源时被处理。</p><p id="e9e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面列出了从高到低排列的不同品质。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/0ffc2861569028c919a98be4cd8c91e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8_EnX4o2ut2_H7mjXs6hGg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Apple关于QoS的文档</p></figure><p id="d7bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建您自己的具有服务质量的队列真的很容易。你只需要给它一个标签和一个QoS。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/fce9bfb3793accf2a39dc54c375f1628.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LPeDYs6yyMIu5IJZS5CPPQ.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7ca3" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">3-知道你在做什么</h1><p id="e0d9" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">找出当前线程是什么，在代码中的任何给定位置:<code class="fe nd ne nf ng b">Thread.current</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/29c8cddd30351beb288889fb4ba17315.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vzDJwhLmw7eLmTW7ETnB2A.png"/></div></div></figure><p id="f68f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，您就可以确切地看到函数运行的优先级。</p><p id="1a6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你也可以用<code class="fe nd ne nf ng b">Thread.current.isMainThread</code>来检查你是不是专门在主线程上。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1d59" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">4 —几乎总是使用异步</h1><p id="cd26" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这是线程化时最容易出错的地方之一，但也是最容易避免的。</p><p id="3088" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在代码中使用sync有很多好处，一些特殊情况下需要它，但是对于刚开始iOS开发的人来说，最好避免使用它。</p><p id="aa8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:<strong class="lb iu">永远不要在主<code class="fe nd ne nf ng b">DispatchQueue</code>上</strong>调用sync，如本例所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/9b94c0dcbeed732bf6e8ba3c97aef14f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*ZJ0GrpkCtCwV_9Lm6wRk-A.png"/></div></figure><p id="685f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还要避免在<code class="fe nd ne nf ng b">.userInteractive</code>队列上使用sync，因为它与主队列处于相同的优先级。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="e310" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">线程资源</h1><ul class=""><li id="a73c" class="nj nk it lb b lc mv lf mw li nl lm nm lq nn lu no np nq nr bi translated">通过关于并发性的<a class="ae ky" href="https://developer.apple.com/videos/play/wwdc2016/720/" rel="noopener ugc nofollow" target="_blank"> WWDC视频</a>深入探究。</li><li id="fde1" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">如果你是视觉学习者，请阅读<a class="ae ky" href="https://www.appcoda.com/grand-central-dispatch/" rel="noopener ugc nofollow" target="_blank">这篇文章</a>。它真的帮助我理解了不同的服务质量水平是如何相互作用的，以及不同的优先级是如何被调用的。</li><li id="4816" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><a class="ae ky" href="https://www.raywenderlich.com/5370-grand-central-dispatch-tutorial-for-swift-4-part-1-2" rel="noopener ugc nofollow" target="_blank"> Ray Wenderlich </a>也有关于线程的很好的指导</li></ul></div></div>    
</body>
</html>