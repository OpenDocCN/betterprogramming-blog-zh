<html>
<head>
<title>Understanding Ethereum and Bitcoin Cryptography</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解以太坊和比特币加密</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/understanding-ethereum-cryptography-3ef7429eddce?source=collection_archive---------1-----------------------#2022-02-14">https://betterprogramming.pub/understanding-ethereum-cryptography-3ef7429eddce?source=collection_archive---------1-----------------------#2022-02-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f876" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解密码学的基础:私钥和公钥是如何生成的</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/77b44a94a42995d7aaf26b1b807bf9f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*17zR0QwK0X0uT_DvvTFG3g.jpeg"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">密码系统</p></figure><h1 id="4c49" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">钥匙和地址</h1><p id="38ef" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">以太坊有两种不同的账户:外部拥有的账户(EOAs)和合同。以太的所有权是通过私钥、以太坊地址和数字签名建立的。私钥是所有用户与以太坊交互的核心。事实上，帐户地址直接来源于私钥:私钥唯一地确定一个以太坊地址，也称为帐户。</p><h1 id="4ca5" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">私钥</h1><p id="b5f4" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">私钥是一个随机生成的数字，允许用户控制与相应以太坊地址相关的所有资金，包括访问授权该地址的合同。私钥用于创建确认交易中资金所有权的数字签名。</p><p id="ee47" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">始终保持私钥的安全是至关重要的，因为向任何人透露它都将使他们能够控制以太网和契约。创建密钥的备份并防止其意外丢失是很重要的，因为一旦丢失就无法恢复，从而导致由其保护的资金的永久损失。</p><h2 id="92be" class="mk ks iq bd kt ml mm dn kx mn mo dp lb ls mp mq ld lw mr ms lf ma mt mu lh mv bi translated">从随机数生成私钥</h2><p id="d2d1" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">生成密钥的第一步也是最关键的一步是找到一个安全的熵或随机性来源。生成以太坊私钥需要选择1到2 ⁵⁶.之间的一个数字以太坊软件使用操作系统的随机数生成器来生成256个随机位。</p><p id="e9f6" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">私钥可以是任何非零数字，最大为略小于2 ⁵⁶的大数字——一个庞大的78位数字，大约为1.158 * 10⁷⁷.</p><p id="ecac" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">要生成私钥，重要的是离线进行，不要与以太坊网络通信。使用编程语言提供的“简单”随机数生成器或编写自己的代码来创建随机数是不可取的。这是因为这种方法可能不提供真正的随机性，并且可能被攻击者利用。最好使用安全的方法，比如操作系统的随机数生成器，保证私钥的随机性和安全性。</p><h1 id="9e97" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">公共密钥</h1><p id="f279" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">以太坊公钥是椭圆曲线上满足椭圆曲线方程的一组x和y坐标。它是从私钥中使用椭圆曲线乘法生成的两个数字中派生出来的。这个过程是不可逆的，这意味着私钥不能从公钥派生出来。</p><p id="f5bf" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">为了生成公钥，在涉及椭圆曲线乘法的方程中使用私钥，这是不可逆的。等式为:K = k * G，其中K为公钥，K为私钥，G为不变点(生成点)。</p><blockquote class="mw mx my"><p id="e687" class="lj lk mz ll b lm mf jr lo lp mg ju lr na mh lu lv nb mi ly lz nc mj mc md me ij bi translated">椭圆曲线乘法不同于普通乘法。这是一个单向函数，在一个方向上很容易执行(乘法)，但在相反方向上不可能执行(除法)。这使它成为从私钥生成公钥的有用工具，因为它确保了私钥不能从公钥派生出来。椭圆曲线加密</p></blockquote><p id="f7a9" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">非对称或公钥加密基于离散算法问题的概念，它涉及对椭圆曲线上的点执行加法和乘法。这种被称为椭圆曲线加密的加密技术是未来可能使用的一种很有前途的加密技术。</p><blockquote class="mw mx my"><p id="5dc1" class="lj lk mz ll b lm mf jr lo lp mg ju lr na mh lu lv nb mi ly lz nc mj mc md me ij bi translated">以太坊使用与比特币相同的椭圆曲线secp256k1。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/0d5b064a74e7eaea017c71229853d1ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*n5t8Gfv2NejIvwAq.png"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">椭圆曲线</p></figure><p id="9669" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">以太坊使用一种特定的椭圆曲线和一组数学常数，这些常数在一个名为<code class="fe ne nf ng nh b">secp256k1</code>的标准中定义。<code class="fe ne nf ng nh b">secp256k1</code>曲线由以下函数定义，生成一条椭圆曲线:</p><pre class="kg kh ki kj gt ni nh nj nk aw nl bi"><span id="24f7" class="mk ks iq nh b gy nm nn l no np"><em class="mz">y </em>²<em class="mz"> = ( x</em>³<em class="mz"> + 7 ) over ( 𝔽 p )</em></span><span id="9929" class="mk ks iq nh b gy nq nn l no np">or:</span><span id="a24e" class="mk ks iq nh b gy nq nn l no np">y ² |p| = ( x³ + 7 ) |p|</span></pre><p id="e1cd" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><code class="fe ne nf ng nh b">mod p</code>表示该曲线在素数阶的有限域<code class="fe ne nf ng nh b">p</code>上，其中<code class="fe ne nf ng nh b">p = 2²⁵⁶–2³²–2⁹–2⁸–2⁷–2⁶–2⁴–1</code>。这是一个非常大的质数，使得这条曲线非常可靠。</p><h2 id="e89f" class="mk ks iq bd kt ml mm dn kx mn mo dp lb ls mp mq ld lw mr ms lf ma mt mu lh mv bi translated">以太坊地址格式</h2><p id="e1a3" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">以太坊地址是通过获取公钥的Keccak-256散列并将其表示为十六进制数来创建的。Keccak-256哈希的最后20个字节用于生成地址。</p><h1 id="d997" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">生成公钥</h1><p id="af6e" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">您可以使用npm安装helpeth命令行工具来创建ICAP地址。</p><pre class="kg kh ki kj gt ni nh nj nk aw nl bi"><span id="5e2e" class="mk ks iq nh b gy nm nn l no np">npm install -g helpeth</span></pre><p id="45de" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">如果你没有npm，你可能需要按照<a class="ae nr" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank">https://nodejs.org</a>的说明来安装。</p><pre class="kg kh ki kj gt ni nh nj nk aw nl bi"><span id="cf53" class="mk ks iq nh b gy nm nn l no np">helpeth keyGenerate</span></pre><p id="0384" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">输出:</p><pre class="kg kh ki kj gt ni nh nj nk aw nl bi"><span id="2785" class="mk ks iq nh b gy nm nn l no np">Address: 0xe16c1623c1aa7d919cd2241d8b36d9e79c1be2a2</span><span id="274f" class="mk ks iq nh b gy nq nn l no np">Address (checksum): 0xe16C1623c1AA7D919cd2241d8b36d9E79C1Be2A2</span><span id="9b72" class="mk ks iq nh b gy nq nn l no np">ICAP: XE56 QBY1 TCEL SB4U 7BTR QQRC IOUY 8UNS DK2</span><span id="ca7f" class="mk ks iq nh b gy nq nn l no np">Public key: 0xaa931f5ee58735270821b3722866d8882d1948909532cf8ac2b3ef144ae8043363d1d3728b49f10c7cd78c38289c8012477473879f3b53169f2a677b7fbed0c7</span><span id="549c" class="mk ks iq nh b gy nq nn l no np">Private key: 0x227dbb8586117d55284e26620bc76534dfbd2394be34cf4a09cb775d593b6f2b<br/></span></pre><p id="0fc6" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们现在将使用给定的私钥来生成公钥，如下所示:</p><pre class="kg kh ki kj gt ni nh nj nk aw nl bi"><span id="4c13" class="mk ks iq nh b gy nm nn l no np">helpeth keyDetails \<br/>  -p 0x227dbb8586117d55284e26620bc76534dfbd2394be34cf4a09cb775d593b6f2b</span></pre><p id="6249" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">输出:</p><pre class="kg kh ki kj gt ni nh nj nk aw nl bi"><span id="4bbf" class="mk ks iq nh b gy nm nn l no np">Address: 0xe16c1623c1aa7d919cd2241d8b36d9e79c1be2a2</span><span id="d731" class="mk ks iq nh b gy nq nn l no np">Address (checksum): 0xe16C1623c1AA7D919cd2241d8b36d9E79C1Be2A2</span><span id="5977" class="mk ks iq nh b gy nq nn l no np">ICAP: XE56 QBY1 TCEL SB4U 7BTR QQRC IOUY 8UNS DK2</span><span id="df78" class="mk ks iq nh b gy nq nn l no np">Public key: 0xaa931f5ee58735270821b3722866d8882d1948909532cf8ac2b3ef144ae8043363d1d3728b49f10c7cd78c38289c8012477473879f3b53169f2a677b7fbed0c7</span></pre><blockquote class="mw mx my"><p id="ae18" class="lj lk mz ll b lm mf jr lo lp mg ju lr na mh lu lv nb mi ly lz nc mj mc md me ij bi translated">"交换客户端地址协议(ICAP)为以太网地址提供了一个灵活的、校验和可互操作的编码系统。ICAP地址可以编码以太坊地址或在以太坊名称注册中心注册的普通名称。ICAP与国际银行帐号(IBAN)编码的兼容性使其成为编码以太坊地址的有用工具。”</p></blockquote><h2 id="843b" class="mk ks iq bd kt ml mm dn kx mn mo dp lb ls mp mq ld lw mr ms lf ma mt mu lh mv bi translated">手动方法</h2><p id="0e49" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">使用椭圆曲线数字签名算法(ECDSA)和<code class="fe ne nf ng nh b">secp256k1</code>曲线从私钥手动计算公钥是一个复杂的过程，最好留给专门的库或工具来完成。但是，对于那些对数学细节感兴趣的人来说，导出公钥的公式如下:</p><p id="5967" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><code class="fe ne nf ng nh b">Public Key = Private Key * G</code></p><p id="43c6" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">其中<code class="fe ne nf ng nh b">G</code>是<code class="fe ne nf ng nh b">secp256k1</code>曲线上的固定生成点，<code class="fe ne nf ng nh b">Private Key</code>是十六进制格式的256位私钥。</p><p id="6580" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">该点的坐标在标准中规定，并在大多数实施中广泛使用。<code class="fe ne nf ng nh b">secp256k1</code>中<code class="fe ne nf ng nh b">G</code>的坐标为:</p><pre class="kg kh ki kj gt ni nh ns bn nt nu bi"><span id="dd90" class="nv ks iq nh b be nw nx l ny np">x = 55066263022277343669578718895168534326250603453777594175500187360389116729240<br/>y = 32670510020758816978083085130507043184471273380659243275938904335757337482424</span></pre><p id="51ec" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">该点用作生成公钥的基点。它也用作参考点，对曲线上的其他点执行数学运算。</p><p id="e598" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">该操作使用由<code class="fe ne nf ng nh b">secp256k1</code>曲线定义的数学运算来执行，例如点加法和标量乘法。请注意，上述公式是该过程的高级表示，实际计算要复杂得多，通常由专门的库或工具来完成。</p><h1 id="6ab0" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">参考</h1><p id="a3a2" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">[1]:掌握以太坊:构建智能合约和DApps，作者Andreas M. Antonopoulos，Gavin Wood。</p></div><div class="ab cl nz oa hu ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="ij ik il im in"><h1 id="e104" class="kr ks iq bd kt ku og kw kx ky oh la lb jw oi jx ld jz oj ka lf kc ok kd lh li bi translated">给你更多</h1><div class="ol om gp gr on oo"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-find-vulnerability-in-smart-contracts-unexpected-ether-89f157ce2888"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd ir gy z fp ot fr fs ou fu fw ip bi translated">如何发现智能合同中的漏洞—意想不到的以太</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">黑掉一个游戏智能合约，学习其防范措施</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">better编程. pub</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc kl oo"/></div></div></a></div></div></div>    
</body>
</html>