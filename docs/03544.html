<html>
<head>
<title>Turn JavaScript Objects in Maps for Predictability</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将地图中的JavaScript对象转变为可预测性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/make-your-javascript-objects-more-predictable-by-creating-maps-20ac1a795442?source=collection_archive---------9-----------------------#2020-02-17">https://betterprogramming.pub/make-your-javascript-objects-more-predictable-by-creating-maps-20ac1a795442?source=collection_archive---------9-----------------------#2020-02-17</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="7028" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">不再有未定义属性的错误</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/4f2bf5ebae0fdbc2eef08feb22d8e712.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y04Qhnh3Jqj09tvNs95g2A.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">美国宇航局在<a class="ae kz" href="https://unsplash.com/s/photos/earth?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><h1 id="18a7" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">物体的问题</h1><p id="ef96" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">您正在深入研究您的代码，突然您得到一个错误:“无法读取未定义的属性<em class="mo"> x </em>”啊，老兄。</p><p id="aa17" class="pw-post-body-paragraph ls lt iu lu b lv mp jv lx ly mq jy ma mb mr md me mf ms mh mi mj mt ml mm mn in bi translated">大多数时候，这意味着调试——用这里的<code class="fe mu mv mw mx b">debugger</code>，那里的<code class="fe mu mv mw mx b">console.log()</code>攻击我的代码。大多数时候，我很快就修好了。但是有些日子我会花上几个小时？</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h1 id="e7f1" class="la lb iu bd lc ld nf lf lg lh ng lj lk ka nh kb lm kd ni ke lo kg nj kh lq lr bi translated">示例问题</h1><p id="07d3" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">我们有一个物体叫做<code class="fe mu mv mw mx b">car</code>。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nk nl l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk">.</p></figure><p id="e10f" class="pw-post-body-paragraph ls lt iu lu b lv mp jv lx ly mq jy ma mb mr md me mf ms mh mi mj mt ml mm mn in bi translated">汽车对象有一组键值对。我们从我们的API中获得这些信息。通常，您会在包含属性<code class="fe mu mv mw mx b">last_updated </code>的对象中获得一个<code class="fe mu mv mw mx b">events</code>属性——声明该信息最后一次被更改的时间。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="83c3" class="pw-post-body-paragraph ls lt iu lu b lv mp jv lx ly mq jy ma mb mr md me mf ms mh mi mj mt ml mm mn in bi translated">运行这段代码时，我们得到一个错误。</p><pre class="kk kl km kn gu nm mx nn no aw np bi"><span id="2a96" class="nq lb iu mx b gz nr ns l nt nu">Uncaught TypeError: Cannot read property 'last_updated' of undefined at &lt;anonymous&gt;:1:14</span></pre><p id="fb71" class="pw-post-body-paragraph ls lt iu lu b lv mp jv lx ly mq jy ma mb mr md me mf ms mh mi mj mt ml mm mn in bi translated">为了防止错误，我们必须检查属性<code class="fe mu mv mw mx b">events</code>是否在对象中。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="7cfe" class="pw-post-body-paragraph ls lt iu lu b lv mp jv lx ly mq jy ma mb mr md me mf ms mh mi mj mt ml mm mn in bi translated">这样，如果<code class="fe mu mv mw mx b">event</code>属性不在我们的对象中，我们就不会有错误。但是我发现这段代码可读性不是很好。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h1 id="8a49" class="la lb iu bd lc ld nf lf lg lh ng lj lk ka nh kb lm kd ni ke lo kg nj kh lq lr bi translated">地图解决方案</h1><p id="3444" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">当我们把我们的对象变成一个<code class="fe mu mv mw mx b">Map()</code>时，我们从映射中得到所有的明确方法。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="14ea" class="pw-post-body-paragraph ls lt iu lu b lv mp jv lx ly mq jy ma mb mr md me mf ms mh mi mj mt ml mm mn in bi translated">您可以使用<code class="fe mu mv mw mx b">Object.entries()</code>方法将您的对象转换成地图，并将您的对象作为参数提供给它。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="207a" class="pw-post-body-paragraph ls lt iu lu b lv mp jv lx ly mq jy ma mb mr md me mf ms mh mi mj mt ml mm mn in bi translated">这将是地图的输出。</p><p id="046a" class="pw-post-body-paragraph ls lt iu lu b lv mp jv lx ly mq jy ma mb mr md me mf ms mh mi mj mt ml mm mn in bi translated">一个<code class="fe mu mv mw mx b">Map()</code>有一系列方便的方法，我们可以用它们来使我们的代码更可读，更可预测，并且出错的机会更少。</p><ul class=""><li id="5e4e" class="nv nw iu lu b lv mp ly mq mb nx mf ny mj nz mn oa ob oc od bi translated"><code class="fe mu mv mw mx b">set('key', 'value')</code>存储一个键值对</li><li id="e84e" class="nv nw iu lu b lv oe ly of mb og mf oh mj oi mn oa ob oc od bi translated"><code class="fe mu mv mw mx b">get('key')</code>返回键值(如果有的话)</li><li id="a9a5" class="nv nw iu lu b lv oe ly of mb og mf oh mj oi mn oa ob oc od bi translated"><code class="fe mu mv mw mx b">has('key')</code>根据密钥是否存在返回<code class="fe mu mv mw mx b">true</code>或<code class="fe mu mv mw mx b">false</code></li><li id="c172" class="nv nw iu lu b lv oe ly of mb og mf oh mj oi mn oa ob oc od bi translated"><code class="fe mu mv mw mx b">delete('key')</code>从映射中删除一个键值对</li><li id="622e" class="nv nw iu lu b lv oe ly of mb og mf oh mj oi mn oa ob oc od bi translated"><code class="fe mu mv mw mx b">clear()</code>从映射中删除所有的键值对</li><li id="5795" class="nv nw iu lu b lv oe ly of mb og mf oh mj oi mn oa ob oc od bi translated"><code class="fe mu mv mw mx b">size()</code>从映射中返回键值对的数量</li></ul><p id="b574" class="pw-post-body-paragraph ls lt iu lu b lv mp jv lx ly mq jy ma mb mr md me mf ms mh mi mj mt ml mm mn in bi translated">因此，如果我们想从属性<code class="fe mu mv mw mx b">events</code>中获得信息<code class="fe mu mv mw mx b">last_updated</code>，我们使用<code class="fe mu mv mw mx b">.has('prop')</code>方法。此方法基于属性的存在返回一个布尔值。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="44ad" class="pw-post-body-paragraph ls lt iu lu b lv mp jv lx ly mq jy ma mb mr md me mf ms mh mi mj mt ml mm mn in bi translated">在您的控制台中，您将看到控制台记录的<code class="fe mu mv mw mx b">‘not available’</code>没有任何错误。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><blockquote class="oj ok ol"><p id="15fe" class="ls lt mo lu b lv mp jv lx ly mq jy ma om mr md me on ms mh mi oo mt ml mm mn in bi translated">正如其他一些有帮助的开发者在评论中显示的那样。对于让你的对象更加可预测的每个问题来说，地图可能不是最好的解决方案。</p><p id="7483" class="ls lt mo lu b lv mp jv lx ly mq jy ma om mr md me on ms mh mi oo mt ml mm mn in bi translated">事实证明，<a class="ae kz" href="https://ponyfoo.com/articles/es6-reflection-in-depth" rel="noopener ugc nofollow" target="_blank">反射API </a>，<a class="ae kz" href="https://v8.dev/features/optional-chaining" rel="noopener ugc nofollow" target="_blank">可选链接</a>或者更好的是，<a class="ae kz" href="http://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank">类型脚本</a>有助于编写更可预测的JavaScript。</p><p id="224f" class="ls lt mo lu b lv mp jv lx ly mq jy ma om mr md me on ms mh mi oo mt ml mm mn in bi translated">不过，我认为这可能是一个有趣的解决方案😉</p></blockquote></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h1 id="3222" class="la lb iu bd lc ld nf lf lg lh ng lj lk ka nh kb lm kd ni ke lo kg nj kh lq lr bi translated">结论</h1><p id="b5af" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">我认为使用<code class="fe mu mv mw mx b">Map()</code>可以让你的代码更具可读性、可预测性，并且对错误不那么敏感。使用正常的<code class="fe mu mv mw mx b">Object</code>，当某个属性丢失时，您的代码会给出错误。这样会导致不好的用户体验，我们来预防一下。</p><p id="a2cc" class="pw-post-body-paragraph ls lt iu lu b lv mp jv lx ly mq jy ma mb mr md me mf ms mh mi mj mt ml mm mn in bi translated">如果您想查看更多关于<code class="fe mu mv mw mx b">Map()</code>的详细信息，请查看MDN web文档的<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" rel="noopener ugc nofollow" target="_blank">详细页面。</a></p><p id="4eca" class="pw-post-body-paragraph ls lt iu lu b lv mp jv lx ly mq jy ma mb mr md me mf ms mh mi mj mt ml mm mn in bi translated">我希望你从这篇文章中学到了一些新东西。编码快乐！</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h1 id="fc66" class="la lb iu bd lc ld nf lf lg lh ng lj lk ka nh kb lm kd ni ke lo kg nj kh lq lr bi translated">阅读更多</h1><div class="op oq gq gs or os"><a href="https://medium.com/dev-together/frontend-development-on-a-budget-raspberry-pi-4-4c917124d348" rel="noopener follow" target="_blank"><div class="ot ab fp"><div class="ou ab ov cl cj ow"><h2 class="bd iv gz z fq ox fs ft oy fv fx it bi translated">预算上的前端开发:树莓Pi 4</h2><div class="oz l"><p class="bd b dl z fq ox fs ft oy fv fx dk translated">medium.com</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf kt os"/></div></div></a></div><div class="op oq gq gs or os"><a href="https://medium.com/dev-together/5-tips-for-healthier-developers-ea21d1e826f" rel="noopener follow" target="_blank"><div class="ot ab fp"><div class="ou ab ov cl cj ow"><h2 class="bd iv gz z fq ox fs ft oy fv fx it bi translated">给健康开发者的5个建议</h2><div class="pg l"><h3 class="bd b gz z fq ox fs ft oy fv fx dk translated">你的身体和大脑需要关注</h3></div><div class="oz l"><p class="bd b dl z fq ox fs ft oy fv fx dk translated">medium.com</p></div></div><div class="pa l"><div class="ph l pc pd pe pa pf kt os"/></div></div></a></div><div class="op oq gq gs or os"><a href="https://medium.com/dev-together/what-tech-i-use-in-2020-as-developer-f3269f857f0e" rel="noopener follow" target="_blank"><div class="ot ab fp"><div class="ou ab ov cl cj ow"><h2 class="bd iv gz z fq ox fs ft oy fv fx it bi translated">作为开发者，我将在2020年使用什么技术</h2><div class="pg l"><h3 class="bd b gz z fq ox fs ft oy fv fx dk translated">我在工作中使用的软件、硬件和其他东西</h3></div><div class="oz l"><p class="bd b dl z fq ox fs ft oy fv fx dk translated">medium.com</p></div></div><div class="pa l"><div class="pi l pc pd pe pa pf kt os"/></div></div></a></div><div class="op oq gq gs or os"><a href="https://medium.com/dev-together/javascript-concepts-you-need-before-starting-w-frameworks-libraries-25a325312b5c" rel="noopener follow" target="_blank"><div class="ot ab fp"><div class="ou ab ov cl cj ow"><h2 class="bd iv gz z fq ox fs ft oy fv fx it bi translated">开始使用框架和库之前需要的JavaScript概念</h2><div class="pg l"><h3 class="bd b gz z fq ox fs ft oy fv fx dk translated">在你熟悉它们之前不要开始</h3></div><div class="oz l"><p class="bd b dl z fq ox fs ft oy fv fx dk translated">medium.com</p></div></div><div class="pa l"><div class="pj l pc pd pe pa pf kt os"/></div></div></a></div></div></div>    
</body>
</html>