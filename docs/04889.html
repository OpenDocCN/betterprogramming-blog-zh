<html>
<head>
<title>What Is the CAP Theorem and Where Is It Used?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是CAP定理，用在哪里？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/what-is-the-cap-theorem-and-where-is-it-used-363475aa8db6?source=collection_archive---------10-----------------------#2020-05-19">https://betterprogramming.pub/what-is-the-cap-theorem-and-where-is-it-used-363475aa8db6?source=collection_archive---------10-----------------------#2020-05-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2f43" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一致性、可用性、分区容差</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6020694639be93a212daeb82ec5451e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KcMa3WP-TBnY24Rj"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">迈克尔·泽兹奇在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="4396" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CAP定理，也称为Brewer定理，指出任何<a class="ae ky" href="https://nlogn.in/what-is-database-sharding-and-how-is-it-done/" rel="noopener ugc nofollow" target="_blank">分布式数据库</a>系统都不可能同时提供以下两个以上的属性:</p><ul class=""><li id="b8d8" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">一致性</li><li id="9bfb" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">有效性</li><li id="3060" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">分区容差</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/aacbf03f5d4584eb4b068934bfba1aa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*AtPdRNIC-Bds9jxmMmusAw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">CAP定理</p></figure><p id="1e52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着并行处理和分布式系统的进步，横向扩展<a class="ae ky" href="https://nlogn.in/horizontal-scaling-and-vertical-scaling/" rel="noopener ugc nofollow" target="_blank">或拥有更多机器变得更加常见，CAP定理是这种架构的支柱。下面我们来详细探讨一下CAP定理的特点。</a></p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="e385" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">一致性</h1><p id="ee06" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">一致系统是指所有节点同时看到相同数据的系统。换句话说，如果我们在多次写操作之后执行读操作，那么一致的系统应该为所有读操作和最近的写操作返回相同的值。</p><p id="c995" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，CAP定理中定义的一致性与<a class="ae ky" href="https://en.wikipedia.org/wiki/ACID" rel="noopener ugc nofollow" target="_blank"> ACID </a> <a class="ae ky" href="https://en.wikipedia.org/wiki/Database_transaction" rel="noopener ugc nofollow" target="_blank">数据库事务</a>中保证的一致性有很大不同。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="9fc8" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">有效性</h1><p id="14ed" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">高可用性分布式系统是指在100%的时间内保持运行的系统。发出的每个请求都应该被接受并收到一个(无错误的)响应。注意:响应不需要包含最新的写入值(即系统不需要一致，但应该始终可用)。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="0ef5" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">分区容差</h1><p id="9ea8" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">它指出，即使节点之间的连接延迟或中断，系统也应该继续运行。注意:这并不意味着节点已经关闭。节点已启动，但无法通信。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/370b1bcd893b4e632c86020cf93511ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/format:webp/1*pULrdOCL0gaE9oPZfTYdyw.jpeg"/></div></figure><p id="d79d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们两个节点(N1和N2)都连接在一起。现在假设连接两个节点的网络出现故障(网络被分割)。节点N1和N2都已启动并正常运行，但是在节点N1发生的更新无法再到达节点N2，反之亦然。</p><p id="e6c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在现代分布式系统中，分区容差更像是一种需要，而不是一种选择，因此我们无法避免CAP中的“P”。所以我们必须在一致性和可用性之间做出选择。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="5390" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">可用组合</h1><ol class=""><li id="6c25" class="lv lw it lb b lc nj lf nk li np lm nq lq nr lu ns mb mc md bi translated">CP(consistency and partition tolerance):<strong class="lb iu"/>所有节点间数据一致，节点维护分区容差。去同步节点将不接受任何请求。一些请求将被丢弃，而不是返回不一致的(最新的)信息。假设我们有两个节点，其中一个节点(N2)在检测到连接系统的网络被分区后停止处理读/写请求。这意味着系统将节点N2视为不再可用，此节点上的任何请求都将被拒绝，因为它最终将返回数据的旧/过时拷贝。因此，这种系统提供了一致性和分区容差。例子:Google Bigtable，Hbase，MongoDB，MemcacheDB，Redis。</li><li id="eec5" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ns mb mc md bi translated">AP(可用性和分区容忍度):分布式系统是高度可用的，系统是分区容忍度的，所以每个读请求不能保证是最新的信息，但是会被处理。<br/>例子:伏地魔，SimpleDB，CouchDB。</li><li id="c57a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ns mb mc md bi translated">CA(一致性和可用性):这在任何分布式架构中都是不可能的。它只能在一些不可扩展的整体架构中找到。</li></ol></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="1d1c" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">进一步阅读</h1><p id="7520" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">谷歌文档和Gmail以可用性为代价来加强一致性。您在不同设备上看到的结果将是相同/一致的。</p><p id="7b8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谷歌搜索、Twitter和YouTube关注可用性和宽松的一致性——因此你看到的结果将取决于响应你的请求的服务器的状态，不同的服务器可能有不一致的状态。这就是为什么你有时会在YouTube或Twitter上看到不一致的喜欢或观点结果。</p></div></div>    
</body>
</html>