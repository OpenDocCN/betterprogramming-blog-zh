<html>
<head>
<title>How to Apply Proper Font Scaling to Custom Fonts in iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在iOS中对自定字体应用适当的字体缩放</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-apply-proper-font-scaling-to-custom-fonts-in-ios-136e11fe2f7c?source=collection_archive---------4-----------------------#2020-04-17">https://betterprogramming.pub/how-to-apply-proper-font-scaling-to-custom-fonts-in-ios-136e11fe2f7c?source=collection_archive---------4-----------------------#2020-04-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d660" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">确保你的字体风格不会出现在你应用程序的代码库中</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/92d155bdbe85e9bce693b530effac748.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*n9KYug09x9RoZV-t"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@foxfox?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Natalia Y </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="8421" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">注意:关于iOS中文本内容大小分类的背景信息和基础知识，</em> <a class="ae kv" href="https://medium.com/better-programming/proper-font-scaling-matters-for-your-users-515b1b878606" rel="noopener"> <em class="ls">查看本文</em> </a> <em class="ls">。</em></p><p id="0a53" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">iOS APIs在帮助您缩放文本方面做得很好，确保了用户更好的可访问性。使用<code class="fe lt lu lv lw b">UIFont.TextStyle</code>和<code class="fe lt lu lv lw b">UITraitCollection</code>可以帮助你创造一个灵活和可扩展的体验。但是，如果您想使用自定义字体而不是默认字体，同时又保持灵活性，该怎么办呢？</p><p id="acd0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将字体和文本风格结合在一起的魔力可以在<code class="fe lt lu lv lw b">UIFontMetrics</code>中找到。给定一种字体，它可以告诉我们更多关于字体对于某种文本样式应该具有的磅值。这将有助于我们根据自定义字体在布局中的作用来适当地缩放它:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx ly l"/></div></figure><p id="2f58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这基本上就是在保持适当缩放的同时使用你自己的字体的全部内容。只要确保使用合适的文本样式。</p><p id="42d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，要做到这一点还有更多的事情要做。首先，你可能不想让字体配置像那样分散在你的应用程序中。<br/>此外，iOS提供的辅助功能之一是强制字体加粗，以提高可读性。如果你使用系统字体，你不需要做任何额外的工作。不幸的是，即使您使用的自定义字体系列包含粗体版本，这些信息也不会自动使用。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="3d1d" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">收集您的字体样式</h1><p id="c4df" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">把你用过的字体风格集中在一个地方是一个好主意，这样可以保持你的代码库整洁，并使以后改变风格更加简单。<br/>为了实现这一点，让我们更容易地将我们的字体转换成符合所需测试风格的字体:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx ly l"/></div></figure><p id="d77b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这使我们能够获取我们的自定义字体，并确保它的规模适当。<code class="fe lt lu lv lw b">basePointSize</code>是当<code class="fe lt lu lv lw b">preferredContentSizeCategory</code>设置为<code class="fe lt lu lv lw b">.medium</code>时字体应该具有的大小。有一些方便的常数可用。可选地，您可以设置<code class="fe lt lu lv lw b">maxPointSize</code>来限制我们的界面还没有完全准备好的地方的缩放。</p><p id="284c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将定义应用程序中使用的字体样式列表，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx ly l"/></div></figure><p id="1c2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们想使用这种字体，我们可以简单地调用其中的任何一种，这取决于我们的具体愿望:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx ly l"/></div></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="1e77" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">修复粗体文本系统首选项</h1><p id="4065" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">只要你使用<code class="fe lt lu lv lw b">UIFont.preferredFont(forTextStyle: &lt;style&gt;)</code>或者类似于<code class="fe lt lu lv lw b">UIFont.systemFont(ofSize: 15)</code>的东西，系统在大多数时候都会正确地将字体变为粗体——大多数时候是因为默认行为似乎也不完全正确。反复启用和禁用粗体文本功能会导致一些非常奇怪的行为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/73cd979805bc9b32c533aae59dd55842.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*hwvMuLRs9LDLIEcrxf7x9A.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">请注意，每次开关一按，“洛杉矶”就会变得越来越粗。它上面的整个标签看起来像预期的那样工作。顶部标签的文本样式为“body”，而底部标签的文本样式为“largeTitle”。此外，我们的自定义字体根本不响应这些变化。</p></figure><p id="cc3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据文本样式，标签可能不会按预期方式运行。似乎当更改粗体文本属性时，字体粗细会增加而不是减少。</p><p id="93d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以同时解决这两个问题。这不是很好，但是通过子类化<code class="fe lt lu lv lw b">UILabel</code>类，我们可以跟踪原始字体并监听配置的<code class="fe lt lu lv lw b">legibilityWeight</code>中的变化:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx ly l"/></div></figure><p id="1b0c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，以编程方式设置字体后，切换配置对默认字体和自定义字体都起作用，如预期的那样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/17b8bbbcac5afd4098b04e6806d06c14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*gd8l87j4ahSuyrYdqMaHBQ.gif"/></div></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="970f" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">额外小费</h1><p id="e1b9" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">如果您想以编程方式处理设置特性，您可以为一个<code class="fe lt lu lv lw b">childViewController</code>覆盖它们:</p><pre class="kg kh ki kj gt ne lw nf ng aw nh bi"><span id="46dc" class="ni mh iq lw b gy nj nk l nl nm">let trait = UITraitCollection(legibilityWeight: .bold)<br/>setOverrideTraitCollection(trait, forChild: childVC)</span></pre><p id="6124" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意，这对当前的<code class="fe lt lu lv lw b">UIViewController</code>或<code class="fe lt lu lv lw b">UIView</code>实例不起作用。只能给孩子设置。</p><p id="414e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样。感谢大家的阅读和快乐编码！</p></div></div>    
</body>
</html>