<html>
<head>
<title>How to Implement the New In-App Update Feature to Your Android App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在你的Android应用中实现新的应用内更新功能</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/add-in-app-updates-to-your-android-app-in-just-5-lines-of-code-655440abc8e8?source=collection_archive---------4-----------------------#2019-07-16">https://betterprogramming.pub/add-in-app-updates-to-your-android-app-in-just-5-lines-of-code-655440abc8e8?source=collection_archive---------4-----------------------#2019-07-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bbe2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">涵盖这一有用功能的快速操作指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/265c6a55dd4b88efee3050af520cd3e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5GuJPWCfZ-56uHB1Ai-YcA.jpeg"/></div></div></figure><p id="c11e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你有没有发现自己通宵工作来修复一个bug或者为你的Android应用添加一个突破性的功能，却发现只有少数用户真正更新了他们的应用？不用担心，Android现在已经发布了一个名为<a class="ae lq" href="https://developer.android.com/guide/app-bundle/in-app-updates" rel="noopener ugc nofollow" target="_blank">应用内更新</a>的新功能，你可以提示用户更新应用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lr"><img src="../Images/62eb856fdd873ad744f9269d7a46ac7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZSMFKoplS4H4D4O6PADSUg.png"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">来源:<a class="ae lq" href="https://developer.android.com/guide/app-bundle/in-app-updates" rel="noopener ugc nofollow" target="_blank"><em class="lw">https://developer . Android . com/guide/app-bundle/in-app-updates</em></a></p></figure><blockquote class="lx ly lz"><p id="1d37" class="ku kv ma kw b kx ky ju kz la lb jx lc mb le lf lg mc li lj lk md lm ln lo lp im bi translated">虽然有些用户在其设备连接到未计量的连接时会启用后台更新，但可能需要提醒其他用户进行更新。应用内更新是Play核心库的一项功能，它引入了一个新的请求流来提示活跃用户更新您的应用。</p><p id="4a1b" class="ku kv ma kw b kx ky ju kz la lb jx lc mb le lf lg mc li lj lk md lm ln lo lp im bi translated"><em class="it">—</em><a class="ae lq" href="https://developer.android.com/guide/app-bundle/in-app-updates" rel="noopener ugc nofollow" target="_blank"><em class="it">https://developer . Android . com/guide/app-bundle/in-app-updates</em></a></p></blockquote><p id="19df" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">作为一名Android开发人员，把所有这些代码添加到我的应用程序中是很累的！因此，我开发了一个实现应用内更新功能的库，将整个过程缩减为五行代码。</p><p id="776a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们开始吧！</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="2773" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">履行</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/1b4e786579f4d2ad8a74012204253d22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sQenL0CE2ydHjSYn"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">照片由<a class="ae lq" href="https://unsplash.com/@joeel56?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">妮可·沃尔夫</a>在<a class="ae lq" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="fb55" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">步骤1 </strong>:将jitpack添加到您的根级别<code class="fe ne nf ng nh b">build.gradle</code>，在存储库的末尾。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="ae91" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">第二步</strong>:将依赖关系添加到app级<code class="fe ne nf ng nh b">build.gradle</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="db0c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">第三步</strong>:初始化活动的<code class="fe ne nf ng nh b">onCreate</code>方法中的<code class="fe ne nf ng nh b">UpdateManager</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="4e38" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有两种更新模式—灵活和即时:</p><ul class=""><li id="6386" class="nk nl it kw b kx ky la lb ld nm lh nn ll no lp np nq nr ns bi translated"><strong class="kw iu">灵活(</strong> <code class="fe ne nf ng nh b">UpdateManagerConstant.FLEXIBLE</code> <strong class="kw iu"> ) </strong> <em class="ma">【默认】</em> —用户可以在更新下载和安装期间使用该应用。重启需要由用户触发。</li><li id="6f2b" class="nk nl it kw b kx nt la nu ld nv lh nw ll nx lp np nq nr ns bi translated"><strong class="kw iu">立即(</strong> <code class="fe ne nf ng nh b">UpdateManagerConstant.IMMEDIATE</code> <strong class="kw iu"> ) </strong> —用户将被阻止，直到下载和安装完成。自动触发重启。</li></ul><p id="e30c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">此外</strong>您还可以获得更新的可用版本代码，以及自用户通过Google Play获得更新通知以来已经过去的天数。你只需要添加<em class="ma"> UpdateInfoListener </em>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="212e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以在<a class="ae lq" href="https://github.com/SanojPunchihewa/InAppUpdater/tree/master/app" rel="noopener ugc nofollow" target="_blank">演示应用</a>中找到以上所有代码，如果你想抢先一步，就去看看吧！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/c2d9e7d200dc4bae2b5e9b6a5b278a61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JL8LeQHfuUn8Fbc9"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated"><a class="ae lq" href="https://unsplash.com/@napr0tiv?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">瓦西里·科洛达</a>在<a class="ae lq" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="9ac8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">就是这样！现在，您的android应用程序中有了应用内更新。</p><h2 id="5e3b" class="nz mm it bd mn oa ob dn mr oc od dp mv ld oe of mx lh og oh mz ll oi oj nb ok bi translated"><strong class="ak">资源</strong></h2><p id="4ca2" class="pw-post-body-paragraph ku kv it kw b kx ol ju kz la om jx lc ld on lf lg lh oo lj lk ll op ln lo lp im bi translated">Github库:<a class="ae lq" href="https://github.com/SanojPunchihewa/InAppUpdater" rel="noopener ugc nofollow" target="_blank">https://github.com/SanojPunchihewa/InAppUpdater</a></p><p id="2874" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">演示App:<a class="ae lq" href="https://github.com/SanojPunchihewa/InAppUpdater/tree/master/app" rel="noopener ugc nofollow" target="_blank">https://github . com/SanojPunchihewa/inapp updater/tree/master/App</a></p></div></div>    
</body>
</html>