<html>
<head>
<title>How to Use Next.js 10’s New Image Component</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Next.js 10的新图像组件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-next-js-10s-new-image-component-3b39dc4efe6f?source=collection_archive---------3-----------------------#2020-11-11">https://betterprogramming.pub/how-to-use-next-js-10s-new-image-component-3b39dc4efe6f?source=collection_archive---------3-----------------------#2020-11-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1d5c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Next.js 10内置的图像组件和自动图像优化是盖茨比图像的替代方案吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b442e62fc57f97aee8539b241ab65d1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XSd8dXqEOr5pk5jLi6JERg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/photos/4W5WWKaxsKs" rel="noopener ugc nofollow" target="_blank"> Markus Spiske </a>在<a class="ae ky" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="23eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从版本<a class="ae ky" href="https://nextjs.org/blog/next-10" rel="noopener ugc nofollow" target="_blank"> 10.0.0 </a>开始，Next.js内置了图像组件，并自动进行图像优化。</p><p id="45db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">图像组件<code class="fe lv lw lx ly b"><a class="ae ky" href="https://nextjs.org/docs/api-reference/next/image" rel="noopener ugc nofollow" target="_blank">next/image</a></code>，是HTML <code class="fe lv lw lx ly b">&lt;img&gt;</code>元素的扩展，已经为现代web发展。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="4db1" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">next/image在引擎盖下做什么？</h1><ol class=""><li id="8553" class="my mz it lb b lc na lf nb li nc lm nd lq ne lu nf ng nh ni bi translated">自动提供像WebP这样的现代图像格式的图像，如果浏览器支持的话，它比JPEG小30%。</li><li id="6024" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">按需优化图像。构建时间不会改变。</li><li id="f441" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">仅当滚动视区时达到某个阈值时，才延迟加载页面内的图像。</li><li id="8d61" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">你可以决定将它与Vercel的内部CDN或像Cloudinary或Akamai这样的其他提供商一起使用。</li><li id="eb98" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">您可以指定<a class="ae ky" href="https://nextjs.org/docs/basic-features/image-optimization#device-sizes" rel="noopener ugc nofollow" target="_blank">不同的图像尺寸</a>以动态使用不同的自定义分辨率。</li><li id="0cff" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">自动将照片质量更改为设置为75%的较低阈值。这可以在每次调用时进行更改。</li></ol></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="050c" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">怎么用呢？</h1><p id="e81d" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">首先，您需要运行下一版本10+:</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="8880" class="nv mh it ly b gy nw nx l ny nz">npm install next@latest react@latest react-dom@latest</span></pre><p id="2a89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者如果你使用纱线:</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="b29d" class="nv mh it ly b gy nw nx l ny nz">yarn add next@latest react@latest react-dom@latest</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b1c6" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">我如何在实践中使用它？</h1><p id="74c7" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">这个示例页面将从通常的<code class="fe lv lw lx ly b">img</code>标签转换而来:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="1fc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转换成新的<code class="fe lv lw lx ly b">'next/image'</code>格式:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><h2 id="6fdb" class="nv mh it bd mi oc od dn mm oe of dp mq li og oh ms lm oi oj mu lq ok ol mw om bi translated">将类名移到<image>标签之外！</image></h2><p id="bb88" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">由于Next的新图像组件将在运行时对生成的HTML代码进行修改，您需要将<code class="fe lv lw lx ly b">className</code>移到旧的<code class="fe lv lw lx ly b">img</code>标签之外。通过将您的类移动到外部元素，每种样式都将应用到您的图像中。</p><h2 id="4bf0" class="nv mh it bd mi oc od dn mm oe of dp mq li og oh ms lm oi oj mu lq ok ol mw om bi translated">必备道具！</h2><p id="67b1" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">你需要一直通过<code class="fe lv lw lx ly b">width</code>和<code class="fe lv lw lx ly b">height</code>。这些道具是必须的，过不了就需要过<code class="fe lv lw lx ly b">layout="fill"</code>。</p><h2 id="e3f2" class="nv mh it bd mi oc od dn mm oe of dp mq li og oh ms lm oi oj mu lq ok ol mw om bi translated">布局类型</h2><p id="ba82" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">您可以使用四种不同类型的布局值(默认为<code class="fe lv lw lx ly b">intrinsic</code>):</p><ul class=""><li id="7f63" class="my mz it lb b lc ld lf lg li on lm oo lq op lu oq ng nh ni bi translated"><code class="fe lv lw lx ly b">fixed</code> —图像尺寸不会随着视窗的改变而改变(无响应)。</li><li id="14d9" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu oq ng nh ni bi translated"><code class="fe lv lw lx ly b">intrinsic</code> —图像将缩小较小视窗的尺寸，但保持较大视窗的原始尺寸。</li><li id="41b5" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu oq ng nh ni bi translated"><code class="fe lv lw lx ly b">responsive</code> —图像将缩小较小视窗的尺寸，放大较大视窗的尺寸。</li><li id="19da" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu oq ng nh ni bi translated"><code class="fe lv lw lx ly b">fill</code> —图像将宽度和高度拉伸到父元素的尺寸。</li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="8fca" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">重要警告</h1><h2 id="a21d" class="nv mh it bd mi oc od dn mm oe of dp mq li og oh ms lm oi oj mu lq ok ol mw om bi translated"><strong class="ak">本地和远程图像</strong></h2><p id="2028" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">截至2020年11月，只有Vercel为您的下一个项目自动处理<a class="ae ky" href="https://vercel.com/docs/next.js/image-optimization" rel="noopener ugc nofollow" target="_blank">图像优化</a>。默认情况下，只有图像被本地上传到Git存储库。</p><p id="c95c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然这对于一个基本的应用程序可能是有用的，但Vercel的团队通常建议从像<a class="ae ky" href="https://www.sanity.io/" rel="noopener ugc nofollow" target="_blank"> Sanity </a>这样的无头CMS加载内容(也包括图像)。</p><p id="e7e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，您需要在您的<code class="fe lv lw lx ly b">next.config.js</code>文件中传递一个额外的<code class="fe lv lw lx ly b">images</code>属性，如<a class="ae ky" href="https://nextjs.org/docs/basic-features/image-optimization#domains" rel="noopener ugc nofollow" target="_blank">所示:</a></p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="8b80" class="nv mh it ly b gy nw nx l ny nz">module.exports = {<br/>  images: {<br/>    domains: ['example.com'],<br/>  },<br/>}</span></pre><h2 id="ac4a" class="nv mh it bd mi oc od dn mm oe of dp mq li og oh ms lm oi oj mu lq ok ol mw om bi translated"><strong class="ak"> CDN </strong></h2><p id="df13" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">另一个警告是，如果您不使用Cloudinary或当前支持的加载程序，您将需要等待或添加对其他图像CDN服务的支持，如:</p><ul class=""><li id="02f8" class="my mz it lb b lc ld lf lg li on lm oo lq op lu oq ng nh ni bi translated"><a class="ae ky" href="https://github.com/vercel/next.js/issues/18408" rel="noopener ugc nofollow" target="_blank"> ImageKit.io </a></li><li id="a3fd" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu oq ng nh ni bi translated"><a class="ae ky" href="https://github.com/vercel/next.js/pull/18391" rel="noopener ugc nofollow" target="_blank">快速图像</a></li><li id="32a3" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu oq ng nh ni bi translated"><a class="ae ky" href="https://github.com/vercel/next.js/pull/18495" rel="noopener ugc nofollow" target="_blank">图像引擎</a></li></ul><h1 id="ed2f" class="mg mh it bd mi mj or ml mm mn os mp mq jz ot ka ms kc ou kd mu kf ov kg mw mx bi translated">如果你想了解更多关于钩子的知识</h1><p id="ac1c" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">我曾亲自阅读<strong class="lb iu"/><a class="ae ky" href="https://amzn.to/2UFiZ5F" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">学习React Hooks</strong></a><strong class="lb iu"/>当我开始使用Hooks和NextJs时，它帮助我了解React及其语法和生态系统的插件和库每天都在增加:<a class="ae ky" href="https://amzn.to/2UFiZ5F" rel="noopener ugc nofollow" target="_blank">https://amzn.to/2UFiZ5F</a></p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="28a9" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">资源</h1><ul class=""><li id="dca4" class="my mz it lb b lc na lf nb li nc lm nd lq ne lu oq ng nh ni bi translated"><a class="ae ky" href="https://nextjs.org/docs/basic-features/image-optimization" rel="noopener ugc nofollow" target="_blank">https://nextjs.org/docs/basic-features/image-optimization</a></li><li id="4892" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu oq ng nh ni bi translated"><a class="ae ky" href="https://nextjs.org/docs/api-reference/next/image" rel="noopener ugc nofollow" target="_blank">https://nextjs.org/docs/api-reference/next/image</a></li><li id="9f4b" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu oq ng nh ni bi translated"><a class="ae ky" href="https://vercel.com/docs/next.js/image-optimization" rel="noopener ugc nofollow" target="_blank">https://vercel.com/docs/next.js/image-optimization</a></li><li id="482a" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu oq ng nh ni bi translated">https://nextjs.org/blog/next-10<a class="ae ky" href="https://nextjs.org/blog/next-10" rel="noopener ugc nofollow" target="_blank"/></li><li id="7382" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu oq ng nh ni bi translated">【https://amzn.to/2UFiZ5F T4】</li></ul></div></div>    
</body>
</html>