<html>
<head>
<title>A Python Simulation of the Monty Hall Problem</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">蒙蒂霍尔问题的Python模拟</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-python-simulation-of-the-monty-hall-problem-25408af314e5?source=collection_archive---------1-----------------------#2022-12-13">https://betterprogramming.pub/a-python-simulation-of-the-monty-hall-problem-25408af314e5?source=collection_archive---------1-----------------------#2022-12-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2e8d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让我们做个交易——给你一个选择，你会改变你的选择吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7c93923b9f8d81c0ca895273ff882ae6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3lGWOO0BsYleLUYW"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">亚当·罗德斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="3fb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设你在一个游戏节目中，要求你在三扇门中做出选择，一扇门有一辆汽车，另外两扇门有山羊。你做了一个选择，然后主人打开了一扇有山羊的门。换门有什么好处吗，还是应该保留原来的？</p><p id="7e9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">直觉上，这听起来没什么区别，因为两个中有一个正确的概率是1/2，对吗？从数学上来说，这是不成立的。所以如果你换了门，你就有更高的胜算，而且还有2/3的胜算，困惑吗？</p><p id="bad0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据电视节目“让我们做个交易”的主持人的名字，这个难题被称为“蒙蒂霍尔问题”，它也有上述的问题。</p><h1 id="c557" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">怎么概率更高？</h1><p id="7087" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在史蒂夫·塞尔文(Steve Selvin)于1975年给美国统计学家<a class="ae ky" href="https://en.wikipedia.org/wiki/The_American_Statistician" rel="noopener ugc nofollow" target="_blank"><em class="ms"/></a>写了一封信后，沃斯·萨凡特(Vos Savant)对此做出了解释，信中提到了这个问题以及参赛者是否通过转换获得了什么。所以让我们看看为什么会有所不同。</p><p id="4de4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，1号门有一辆汽车，2号门和3号门有山羊。</p><p id="ba98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以让我们看看如果你决定坚持你的选择会发生什么</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/73416ab383679be61a41fff32c04501b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cciboN6EvOW_GJxUhphzgA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">坚持你的选择</p></figure><p id="65f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，如你所见，你只赢了3次中的1次</p><p id="a2e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果你决定改变，让我们看看会发生什么</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/6c823bad421709ceae0b9412b4b51548.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lHVvmY8Qq7Q_bXrk0siCMw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">改变你的选择</p></figure><p id="aefb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，如你所见，你赢了3次中的2次。</p><p id="e745" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个解决方案对一些人来说是违反直觉的，因为打开一个不包含汽车的门的概率是1/2，你仍然可以在两者之间进行选择，所以从技术上来说，你仍然可以选择坚持使用原来的门。</p><p id="0600" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当且仅当存在真正随机的情况时，这才是真的。然而，他们忽略了一个事实，即当一个不正确的选项从等式中删除时，随机性已经消失了，即gameshow主持人暗示，在剩下的两个选择中，哪一个没有汽车，因此在你的选择和剩下的门之间，很有可能剩下的门有汽车。为了证明这一点，让我们看一个使用Python的数学解决方案。</p><h1 id="1f80" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">用Python实现计算机模拟</h1><p id="b6c7" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">所以，我们从一个实验开始，这个实验做了以下事情:</p><ol class=""><li id="f7a8" class="mu mv it lb b lc ld lf lg li mw lm mx lq my lu mz na nb nc bi translated">在门1、2和3中随机选择一个，以标记正确的选项(即包含汽车的门)</li><li id="f481" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">随机选择一个门作为参赛选手，即初始选择。</li><li id="d83a" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">在剩下的两扇门中，打开有山羊的那扇门，并从参赛者的选择中移除那扇门。</li><li id="ce95" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">现在，从剩下的两扇门中选择另一扇门，即切换选择。</li><li id="b0ac" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">如果最终选择(即切换后)与包含汽车的门相同(在步骤1中计算)，则返回1(标记成功)；否则，返回0(标记失败)。</li></ol><p id="4abd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们多次运行这个实验，找出我们成功的次数。最后，使用这些数据，我们返回成功的概率(即，成功运行的次数/运行的总次数)。</p><p id="4683" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们再次运行这个集合几次，并使用一个名为<code class="fe ni nj nk nl b">matplotlib</code>的图形库做一个累积图来理解我们趋向的概率。</p><p id="7d03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是Python代码:</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="7eed" class="nq lw it nl b be nr ns l nt nu">import random<br/>import matplotlib.pyplot as plt<br/><br/>def switch_doors_experiment():<br/>    # compute the correct door randomly<br/>    correct_door = random.choice([1, 2, 3])<br/>    # choose a door randomly<br/>    door = random.choice([1, 2, 3])<br/><br/>    # Among two remaining door, get a random incorrect door<br/>    doors = [1,2,3]<br/>    try:<br/>        doors.remove(door)<br/>        doors.remove(correct_door)<br/>    except:<br/>        pass<br/><br/>    random_incorrect_door = random.choice(doors)<br/><br/>    # Remove the random incorrect door from the options available to you<br/>    doors = [1, 2, 3]<br/>    doors.remove(random_incorrect_door)<br/><br/>    # Now among your original choice of door and the new set of options,<br/>    # switch your choice<br/><br/>    # Remove your original choice from the options<br/>    doors.remove(door)<br/>    # Now as only one option is there within<br/>    final_choice = doors[0]<br/><br/>    # If the final choice is the correct door, then return 1, else return 0<br/>    if final_choice == correct_door:<br/>        return 1<br/>    else:<br/>        return 0<br/><br/>def probability_of_success_on_switch_door(precision):<br/>    switch_door = 0<br/>    # run the switch door experiment precision amount of times <br/>    # and increment the outcome in switch_door counter<br/>    for i in range(precision):<br/>      switch_door = switch_door + switch_doors_experiment()<br/><br/>    # Probability of success while switching doors = <br/>    #   num of times the experiment was successful / total number of runs<br/>    return switch_door/precision<br/><br/># Do 100 runs with precision 100000<br/>runs = 100<br/>total = 0<br/>x = []<br/>y = []<br/>precision = 100000<br/><br/>for i in range(runs):<br/>    total = total + probability_of_success_on_switch_door(precision)<br/>    x.append(i+1)<br/>    y.append(total/(i+1))<br/><br/># Plot the probability vs runs on a matplotlib graph<br/>plt.plot(x, y)<br/><br/>plt.xlabel('Runs')<br/>plt.ylabel('Probability of Success while Switching')<br/><br/>plt.title('Monty Hall problem')<br/><br/>plt.ylim(0,1)<br/>plt.xlim(1,runs)<br/><br/>plt.show()<br/>print("Probability of Success on switching door for {} precision and {} runs is {}".format(precision, runs, total/runs))</span></pre><p id="8b0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们看看执行它的结果</p><h1 id="054f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">执行结果</h1><p id="788e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">当我们执行代码时，我们得到下面的图形</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/f523119dce9c77205a9bbe8e27ad3ae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*4zeBkrCGpxPiiL7y6dzTLg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">蒙蒂·霍尔问题</p></figure><p id="026f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以及以下结果:</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="5662" class="nq lw it nl b be nr ns l nw nu">Probability of Success on switching door for 100000 precision and 100 runs is 0.6664328</span></pre><p id="f617" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用计算机模拟，我们在切换到2/3时获得了成功的概率，这表明我们应该改变我们的选择，以增加我们赢得汽车的机会。</p><h1 id="6a9f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">但是，如果在切换/不切换之间进行随机选择，会发生什么呢？</h1><p id="2646" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果人们在第二次机会中随机选择，会发生什么？让我们修改代码，看看所有的场景和随机性是如何相互影响的。</p><p id="a182" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们将执行以下操作:</p><ol class=""><li id="eb68" class="mu mv it lb b lc ld lf lg li mw lm mx lq my lu mz na nb nc bi translated">允许人们在开关/不开关之间进行随机选择</li><li id="ecce" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">记录无开关运行的总数以及我们成功的次数</li><li id="52e7" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">记录总的切换次数以及我们成功的次数</li><li id="f39f" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">记录总运行次数，以及在这种随机场景中我们成功了多少次。</li></ol><p id="9946" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们通过10000次迭代运行10000次实验来生成真正随机的样本，并使用matplotlib绘制它。</p><p id="291c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该场景的Python代码如下:</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="9f9a" class="nq lw it nl b be nr ns l nt nu">import random<br/>import matplotlib.pyplot as plt<br/><br/>def experiment(switch_door):<br/>    # compute the correct door randomly<br/>    correct_door = random.choice([1, 2, 3])<br/>    # choose a door randomly<br/>    door = random.choice([1, 2, 3])<br/><br/>    # Among two remaining door, get a random incorrect door<br/>    doors = [1,2,3]<br/>    try:<br/>        doors.remove(door)<br/>        doors.remove(correct_door)<br/>    except:<br/>        pass<br/><br/>    random_incorrect_door = random.choice(doors)<br/><br/>    # Remove the random incorrect door from the options available to you<br/>    doors = [1, 2, 3]<br/>    doors.remove(random_incorrect_door)<br/><br/>    # Now among your original choice of door and the new set of options, switch your choice<br/>    # remove your original choice from the options<br/>    doors.remove(door)<br/>    # Now as only one option is there within<br/>    if switch_door:<br/>        final_choice = doors[0]<br/>    else:<br/>        final_choice = door<br/><br/>    # If the final choice is the correct door, then return 1, else return 0<br/>    if final_choice == correct_door:<br/>        return 1<br/>    else:<br/>        return 0<br/><br/>def iteration(runs):<br/>    total = 0<br/>    switch_door_total = 0<br/>    switch_door_success = 0<br/>    no_switch_door_total = 0<br/>    no_switch_door_success = 0<br/><br/><br/>    for i in range(runs):<br/>        switch_door = random.choice([True, False])<br/>        experiment_success = experiment(switch_door)<br/>        if switch_door:<br/>            switch_door_total = switch_door_total + 1<br/>            switch_door_success = switch_door_success + experiment_success<br/>        else:<br/>            no_switch_door_total = no_switch_door_total + 1<br/>            no_switch_door_success = no_switch_door_success + experiment_success<br/>        total = total + experiment_success<br/><br/>    return total/runs, switch_door_success/switch_door_total, no_switch_door_success/no_switch_door_total<br/><br/><br/>def plot(x, y_total, y_switch, y_no_switch):<br/>    fig, ax = plt.subplots()<br/>    fig.subplots_adjust(right=0.75)<br/><br/>    twin1 = ax.twinx()<br/>    twin2 = ax.twinx()<br/><br/>    # Offset the right spine of twin2.  The ticks and label have already been<br/>    # placed on the right by twinx above.<br/>    twin2.spines.right.set_position(("axes", 1.2))<br/><br/>    p1, = ax.plot(x, y_total, "b-", label="Success Probability - Random Choice")<br/>    p2, = twin1.plot(x, y_switch, "r-", label="Success Probability - Switch")<br/>    p3, = twin2.plot(x, y_no_switch, "g-", label="Success Probability - No Switch")<br/><br/>    ax.set_ylim(0, 1)<br/>    twin1.set_ylim(0, 1)<br/>    twin2.set_ylim(0, 1)<br/><br/>    ax.set_xlabel("Runs")<br/>    ax.set_ylabel("Success Probability - Random Choice")<br/>    twin1.set_ylabel("Success Probability - Switch")<br/>    twin2.set_ylabel("Success Probability - No Switch")<br/><br/>    ax.yaxis.label.set_color(p1.get_color())<br/>    twin1.yaxis.label.set_color(p2.get_color())<br/>    twin2.yaxis.label.set_color(p3.get_color())<br/><br/>    tkw = dict(size=4, width=1.5)<br/>    ax.tick_params(axis='y', colors=p1.get_color(), **tkw)<br/>    twin1.tick_params(axis='y', colors=p2.get_color(), **tkw)<br/>    twin2.tick_params(axis='y', colors=p3.get_color(), **tkw)<br/>    ax.tick_params(axis='x', **tkw)<br/><br/>    ax.legend(handles=[p1, p2, p3])<br/><br/>    plt.show()<br/><br/><br/>x = []<br/>y_total = []<br/>y_switch = []<br/>y_no_switch = []<br/>for i in range(1000):<br/>    total, switch_door, no_switch_door = iteration(10000)<br/>    y_total.append(total)<br/>    y_switch.append(switch_door)<br/>    y_no_switch.append(no_switch_door)<br/>    x.append(i+1)<br/><br/>plot(x, y_total, y_switch, y_no_switch)</span></pre><p id="78d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们运行这段代码时，我们得到了下图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/57c3ee33d03d5062314e5bc37e8ed25b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*jzB7TWWB4N8zIaMuPFF2bA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">开关/无开关之间的随机选择</p></figure><p id="78f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从图表中我们可以看到，我们得到了以下结果:</p><ol class=""><li id="b78a" class="mu mv it lb b lc ld lf lg li mw lm mx lq my lu mz na nb nc bi translated">如果一个人选择转行，成功的概率在2/3</li><li id="2ac4" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">如果一个人做出不转行的选择，成功的概率是1/3</li><li id="e1c8" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">在一个真正随机的情况下，当人们不带偏见地做出选择时，我们获得成功的概率是1/2。</li></ol><p id="3923" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这大概是第三点让很多人感到困惑。虽然我同意如果你真的随机选择，你也同样有可能赢或输。然而，正如在上面的实验中看到的，你仍然可以通过转换来增加对你有利的几率。</p><p id="7747" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，这就是蒙蒂·霍尔的问题和它造成的所有混乱。</p></div></div>    
</body>
</html>