<html>
<head>
<title>You Need to Write Meaningful Commit Messages</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您需要编写有意义的提交消息</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/you-need-meaningful-commit-messages-d869e44e98d4?source=collection_archive---------11-----------------------#2019-12-02">https://betterprogramming.pub/you-need-meaningful-commit-messages-d869e44e98d4?source=collection_archive---------11-----------------------#2019-12-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0da5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">您的提交应该为未来讲述一个故事</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b1b230f49bb16f7686dd0e407e211cc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HOpTaP1pM-yD9fg4hS7fFw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">克里斯·劳顿在<a class="ae ky" href="https://unsplash.com/s/photos/books?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="1fcb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我喜欢一本好书。小说或非小说。我最喜欢的书通常讲述某种形式的故事。</p><p id="c62b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而我所知道的大多数故事，涉及的不仅仅是一个“开头、中间、结尾”。它们通常包含章节。较大的书使用更多的章节，把它们分成几节甚至几卷。</p><p id="33a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">戏剧或音乐剧也是如此。这个故事分成几幕，然后是几个场景。这一部分是为了帮助演员，但也是为了帮助观众。幕间休息让你放松一下，伸伸腿，去趟洗手间。</p><p id="b7e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但最重要的是，所有这些元素都有助于对一个想法或故事片段进行逻辑分组，使其更容易理解。因为当你有助于理解这个故事的时候，你可以更多地了解这个故事的真实内容。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9919" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">源代码管理讲述了一个故事</h1><p id="3d28" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">代码也是一样。它讲述了一个故事。就像一个故事，你的代码需要章节或标记来帮助理解它。代码中有许多不同类型的章节标记——包、类等等。</p><p id="a943" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，代码也是随着时间的推移而构建的。它不是一瞬间产生的。要理解<em class="mz">为什么</em>你的代码是这样构建的，你也需要理解<em class="mz">的历史</em>是如何构建的。</p><p id="31a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">做了哪些决定？为什么这些类之间的命名如此不同？这将有助于像一个章节，使之更容易回答这些问题。</p><p id="4b0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谢天谢地，我们有这些叫做源代码控制系统的东西可以帮助我们讲述这个故事。这些系统中的章节标记被称为提交。</p><p id="3119" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">提交本质上是对代码库进行的具有相同主题的一组更改。它通常有一条简短的消息，描述为什么要进行更改。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="254c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">无用的消息</h1><p id="515b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">不幸的是，这些信息往往是无益的。您最后一次看到类似如下的提交消息是什么时候？</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="3eb4" class="nf md it nb b gy ng nh l ni nj">Fixed some tests</span><span id="10ae" class="nf md it nb b gy nk nh l ni nj">Refactoring</span><span id="a481" class="nf md it nb b gy nk nh l ni nj">Changes per code review</span><span id="79ae" class="nf md it nb b gy nk nh l ni nj">ok - now it's done...</span></pre><p id="320c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这有多没用？修复了哪些测试？它们以前坏过吗？还是TDD没有做到？你在重构什么？现在“完成”的“它”是什么？</p><p id="f13c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我试图理解这些变化的故事，这些信息并没有告诉我太多。</p><p id="eb5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">理想情况下，这会让我对变化的意图有所了解。为什么需要它(例如一个故事或一个bug)。请求变更的人。这正是我在查看Git日志时想知道的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4c93" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">什么是有意义的信息？</h1><p id="75d2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">然而，过于详细的信息也同样令人沮丧。列举你修改过的每一个文件的消息将很快被掩盖。</p><p id="94e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，在大多数源代码控制系统中，列举每个更改都是多余的。如果你需要看的话，系统可以告诉你细节。</p><p id="f1dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其他伟大作家有很多关于这方面的好文章。它们在提交消息的格式和实际内容方面都有一点不同(下面会有更多的介绍)，但是它们在一些核心部分都是一致的。</p><h2 id="2b11" class="nf md it bd me nl nm dn mi nn no dp mm li np nq mo lm nr ns mq lq nt nu ms nv bi translated">1.独立主体与主体</h2><p id="ec33" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这比你想象的更重要。</p><p id="d074" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为什么？嗯，就像一封电子邮件。如果你在浏览你的电子邮件历史，你不会读完整封邮件。相反，你需要一个快速的总结内容的广告词。</p><p id="4388" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您正在使用像<code class="fe nw nx ny nb b">git log --oneline</code>或<code class="fe nw nx ny nb b">git shortlog</code>这样的命令，尤其如此。</p><p id="89d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">详细的部分也很重要，但它不会是您在日志中看到的第一件事。像评论一样，这可能是一个很好的地方来指出关于细节的附加注释或者改变的原因。</p><p id="839c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果您必须在进行特性更改之前进行重构提交，这将是一个很好的表达方式。或者，如果你不得不做出改变，不得不考虑一些边缘情况或什么，身体是完美的地方添加它。</p><h2 id="e06b" class="nf md it bd me nl nm dn mi nn no dp mm li np nq mo lm nr ns mq lq nt nu ms nv bi translated">2.保持主题简洁明了</h2><p id="69f3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Git本身建议保持字符少于50，但是其他指南说少于72。无论如何——保持简洁。无法描述这么短的提交可能意味着您的提交太大了…</p><p id="b3e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了简短易读之外，主题信息应该清楚地表明变化。它应该描述如果您应用更改，您的代码库将会发生什么。</p><p id="88d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这与“干净代码”功能的想法相同。每个函数基本上都做了它说要做的事情。同样，一个有意义的提交将完全按照它的提交消息所说的那样去做。</p><p id="f445" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的信息也应该是命令式的主动语态。</p><p id="c171" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要使用像“修复时间通量电容器中的错误”或“将目标日期改为1955年11月5日”这样的短语。相反，说“固定通量电容器以减少钚的需求”或“将目标旅行日期设定为1955年11月5日”。</p><p id="86ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个<a class="ae ky" href="https://gist.github.com/robertpainsi/b632364184e70900af4ab688decf6f53#a-properly-formed-git-commit-subject-line-should-always-be-able-to-complete-the-following-sentence" rel="noopener ugc nofollow" target="_blank"> GitHub gist </a>描述提交消息的方式非常好:</p><blockquote class="nz oa ob"><p id="3906" class="kz la mz lb b lc ld ju le lf lg jx lh oc lj lk ll od ln lo lp oe lr ls lt lu im bi translated">一个格式正确的git提交主题行应该总是能够完成下面的句子:</p><p id="763c" class="kz la mz lb b lc ld ju le lf lg jx lh oc lj lk ll od ln lo lp oe lr ls lt lu im bi translated">如果应用，这个提交将<em class="it"> &lt;你的主题行在这里&gt;。”</em></p></blockquote><p id="25a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">嘣。如果每个提交都这样做，历史跟踪会容易多少？代码审查会容易多少？</p><h2 id="206c" class="nf md it bd me nl nm dn mi nn no dp mm li np nq mo lm nr ns mq lq nt nu ms nv bi translated">3.具有一致的格式</h2><p id="144d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">格式化只是你无法摆脱的事情之一。一致的格式总是使存储库更容易使用。尽管它很大程度上适用于代码，所以将它应用于g it可能看起来很傻。</p><p id="2ae1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但这并不愚蠢，这是必要的。</p><p id="e270" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你在阅读一本书时，一旦你买下并开始阅读，你就已经同意了一种格式风格。如果出版商决定允许某些行比其他行更短或更长，你会很难读懂它。</p><p id="6993" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这同样适用于您的提交消息(和您的代码！).当格式一致时，理解可以达到最高水平。</p><p id="bb7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有很多不同的方法可以拥有一个“好”的风格。<a class="ae ky" href="https://github.com/angular/angular/blob/master/CONTRIBUTING.md#-commit-message-guidelines" rel="noopener ugc nofollow" target="_blank"> Angular的投稿文档</a>就是一个例子，<a class="ae ky" href="https://chris.beams.io/posts/git-commit/" rel="noopener ugc nofollow" target="_blank">Chris Beam</a>的这篇文章也有一些很好的例子。</p><p id="95e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重要的是你的<em class="mz">团队</em>选择并坚持自己的风格。如果您在开源环境中工作，请确保遵循您所贡献的存储库的标准。</p><h2 id="6629" class="nf md it bd me nl nm dn mi nn no dp mm li np nq mo lm nr ns mq lq nt nu ms nv bi translated">4.有意义的信息来自有意义的变化</h2><p id="69d2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果你有什么都不做的提交，这些都不重要。还是做多了。或者是半生不熟和破碎的。</p><p id="a366" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将您的提交视为一个原子事务。在每次提交结束时，您最好有一个工作代码库。至少它应该是可编译的。</p><p id="b20e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你希望在不破坏东西的情况下增加一些价值(至少是故意的——我们总是会犯错)。</p><p id="b88e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样做好处是，如果您犯了一个错误并破坏了某个东西，您可以只恢复那个提交，以返回到工作状态。这可能是我的团队合并拉取请求的方式是“压缩并合并”的原因…</p><p id="26fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有这些都是说，如果你专注于先做一些小的、有意义的改变，然后逐步地提交，那么做其他的事情会更容易。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6007" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">例子</h1><p id="6918" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">将这些规则放入一个简单的项目符号列表中，如下所示:</p><ol class=""><li id="dad8" class="of og it lb b lc ld lf lg li oh lm oi lq oj lu ok ol om on bi translated">主体与主体分离。</li><li id="6e3b" class="of og it lb b lc oo lf op li oq lm or lq os lu ok ol om on bi translated">保持主题简短明确。</li><li id="3c47" class="of og it lb b lc oo lf op li oq lm or lq os lu ok ol om on bi translated">有一致的格式。</li><li id="4eb9" class="of og it lb b lc oo lf op li oq lm or lq os lu ok ol om on bi translated">有意义的原子提交。</li></ol><p id="4db6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经介绍了一些，下面是一些有意义的提交消息的例子。</p><p id="c0e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，这些都是虚构的，但它们应该作为不同格式和准则的示例。虽然它们彼此并不一致，但只要稍加思考，您就可以找出它们各自的约定。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="ed64" class="nf md it nb b gy ng nh l ni nj">SYS-1345 (docs) - update method of procedure for upgrading hypervisor</span><span id="7abe" class="nf md it nb b gy nk nh l ni nj">The documentation for upgrading hypervisors was out of date</span><span id="799f" class="nf md it nb b gy nk nh l ni nj">Bug (api) : fix to response code returned in case of internal timeout (#API-4588)</span><span id="c33a" class="nf md it nb b gy nk nh l ni nj">Our API was returning a 400 bad request when an internal timeout occurred. This change makes that response code a 503 to tell the client the request is retryable</span><span id="63e0" class="nf md it nb b gy nk nh l ni nj">Feature #99 : allow users to re-arrange their dashboard</span><span id="e564" class="nf md it nb b gy nk nh l ni nj">This change finally implements the ability for users to re-arrange their home dashboard via drag-n-drop. Some notes:<br/>- currently toggleable. we will wait until an announcement is made to turn the toggle on<br/>- drag-n-drop is limited only to dashboards already created. still need to implement drag-n-drop of a widget "template". this is capture in feature #100</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b085" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">其他资源、指南等。</h1><ul class=""><li id="6591" class="of og it lb b lc mu lf mv li ot lm ou lq ov lu ow ol om on bi translated"><a class="ae ky" href="https://chris.beams.io/posts/git-commit/#seven-rules" rel="noopener ugc nofollow" target="_blank">Chris Beams——如何编写Git提交消息</a></li><li id="98f5" class="of og it lb b lc oo lf op li oq lm or lq os lu ow ol om on bi translated"><a class="ae ky" href="https://github.com/angular/angular/blob/master/CONTRIBUTING.md#-commit-message-guidelines" rel="noopener ugc nofollow" target="_blank">角度贡献Git提交指南</a></li><li id="d254" class="of og it lb b lc oo lf op li oq lm or lq os lu ow ol om on bi translated"><a class="ae ky" href="https://gist.github.com/robertpainsi/b632364184e70900af4ab688decf6f53#a-properly-formed-git-commit-subject-line-should-always-be-able-to-complete-the-following-sentence" rel="noopener ugc nofollow" target="_blank"> Git提交消息指南要点</a></li><li id="b6ab" class="of og it lb b lc oo lf op li oq lm or lq os lu ow ol om on bi translated"><a class="ae ky" href="https://alistapart.com/article/the-art-of-the-commit/" rel="noopener ugc nofollow" target="_blank">清单之外——承诺的艺术</a></li></ul><p id="3814" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！</p></div></div>    
</body>
</html>