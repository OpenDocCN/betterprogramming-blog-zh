<html>
<head>
<title>Flutter Keys: The Why, The When, and How to Go About Them</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤振键:为什么，什么时候，以及如何去做</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/flutter-keys-the-why-when-and-how-to-go-about-them-85f12a5a0445?source=collection_archive---------1-----------------------#2022-02-27">https://betterprogramming.pub/flutter-keys-the-why-when-and-how-to-go-about-them-85f12a5a0445?source=collection_archive---------1-----------------------#2022-02-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2e81" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解钥匙的类型以及如何使用它们</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/848d471188bead703971e6ff33917f0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Be587aBWw-FkxUym"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">安吉拉·梅伦科娃在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="fb16" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">抖动键是一个经常被忽视的概念，直到你的数据显示出现问题。本文包含一些简短的参考注释，我用它们来实现这个概念并修复那些奇怪的错误。</p><h2 id="7e60" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">什么时候？</strong></h2><p id="cb98" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">当我们修改保存某种状态的同类型小部件的集合时，经常会用到键。大多数时候，我们将它们应用于数据不断变化的小部件子部件，如Listview或有状态小部件。</p><h2 id="4ec0" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">为什么？</strong></h2><p id="39a9" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">关键的概念是flutters的方式来保存对状态的引用，并在不同的时间访问状态，或者在修改小部件树时维护它。</p><p id="868a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Flutter会在重新渲染之前检查之前的状态，如果之前的小部件与新的小部件是同一类型的，那么它将保持原来的状态。</p><p id="2388" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果数据正在变化，我们不希望这样，因为flutter仍将引用旧数据。因此，我们需要键来惟一地标识小部件。这是因为一个新的小部件将有一个不同于前一个的密钥，因此旧的被销毁。</p><h2 id="0b71" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">按键类型</strong></h2><ol class=""><li id="55cf" class="mq mr iq ky b kz ml lc mm lf ms lj mt ln mu lr mv mw mx my bi translated"><code class="fe mz na nb nc b">Valuekey</code></li><li id="9ee0" class="mq mr iq ky b kz nd lc ne lf nf lj ng ln nh lr mv mw mx my bi translated"><code class="fe mz na nb nc b">Objectkey</code></li><li id="4a8b" class="mq mr iq ky b kz nd lc ne lf nf lj ng ln nh lr mv mw mx my bi translated"><code class="fe mz na nb nc b">Uniquekey</code></li><li id="d468" class="mq mr iq ky b kz nd lc ne lf nf lj ng ln nh lr mv mw mx my bi translated"><code class="fe mz na nb nc b">Globalkey</code></li></ol><h2 id="5cec" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">数值键</strong></h2><p id="d34f" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">通常用在子列表中，其中每个子列表的值都是唯一且不变的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/ef502870034a90c364a69c99d0bf7d0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8qW0sngIM2W-OgWLpWtBOQ.png"/></div></div></figure><h2 id="5d78" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">对象键</strong></h2><p id="0a26" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">与<code class="fe mz na nb nc b">valuekey</code>相同，唯一的区别是它接受一个保存数据的类对象。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/563e2c16b2039e0c7f87455403dc1faa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WBYJnYQpnj7vA6KaUTfeAg.png"/></div></div></figure><h2 id="bd9b" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">唯一键</strong></h2><p id="413c" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在孩子没有唯一值或根本没有值的情况下，<code class="fe mz na nb nc b">Uniquekey</code>用于标识每个孩子。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/2cc55978f1f3c4a578bb4a5f3b3f181e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*fuibXa_DM3JNbOjhHG5FUw.png"/></div></figure><h2 id="e0e2" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">全局密钥</strong></h2><p id="e236" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这是有争议的一个。这把钥匙有可能打开所有的门，但也可能破坏所有的锁。</p><p id="332a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">全局键可以用来从窗口小部件树中的任何地方访问另一个窗口小部件的状态，但是它是昂贵的，并且有更好的方法来这样做，例如提供者、继承的窗口小部件等。</p><p id="d3c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是它确实有一些好的和有效的用例，比如表单验证。当分配给一个表单时，用户可以访问<code class="fe mz na nb nc b">FormStates</code>公共函数和变量，并相应地使用它们。</p><p id="b6cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了使用它，小部件被分配密钥必须是有状态的，并且它的状态是公共的。没有下划线，你只能访问公共变量</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="f770" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">钥匙到此为止。现在走出去，继续释放你的潜力。</p></div></div>    
</body>
</html>