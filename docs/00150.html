<html>
<head>
<title>👆 Pointer Events in React — The Why, How, and What</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">👆React中的指针事件—原因、方式和内容</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/pointer-events-with-react-the-why-how-what-617a5b51dbb2?source=collection_archive---------0-----------------------#2018-07-07">https://betterprogramming.pub/pointer-events-with-react-the-why-how-what-617a5b51dbb2?source=collection_archive---------0-----------------------#2018-07-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/d24913b5808e7a3a7bdd024a79b0fcca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7mEjEgZ56_kwFvkTTCVKmQ.png"/></div></div></figure><h1 id="c05c" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">我们来谈谈事件，更具体地说是指针事件。</h1><h2 id="b912" class="kz kc it bd kd la lb dn kh lc ld dp kl le lf lg kp lh li lj kt lk ll lm kx ln bi translated">什么是指针事件？</h2><blockquote class="lo"><p id="fc4e" class="lp lq it bd lr ls lt lu lv lw lx ly dk translated"><a class="ae lz" href="https://developers.google.com/web/updates/2016/11/nic55#pointer-events" rel="noopener ugc nofollow" target="_blank">指针事件</a>提供了处理所有输入事件的统一方式。</p></blockquote><p id="91c9" class="pw-post-body-paragraph ma mb it mc b md me mf mg mh mi mj mk le ml mm mn lh mo mp mq lk mr ms mt ly im bi translated">在过去美好的日子里，我们只有一个鼠标，监听事件很简单。web内容假设用户的定点设备是鼠标。</p><p id="c0d1" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">如今，我们有许多与鼠标无关的设备，比如带触摸屏的手机或笔。</p><div class="mz na nb nc gt ab cb"><figure class="nd ju ne nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/32b5884667777e730f61511d933815ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*7RJaAhzHGM8f4r-TfwVZrQ.png"/></div></figure><figure class="nd ju nj nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/74f041c9d7e901c035d66a038f1b2b2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*hOP5usyJEWOC1Tsabpp2eQ.jpeg"/></div></figure></div><p id="d2b8" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">如果用户没有鼠标，我们如何监听事件？</p><h2 id="770b" class="kz kc it bd kd la lb dn kh lc ld dp kl le lf lg kp lh li lj kt lk ll lm kx ln bi translated"><a class="ae lz" href="https://developer.mozilla.org/en-US/docs/Web/API/Touch_events" rel="noopener ugc nofollow" target="_blank">触摸事件</a>来救援！</h2><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nk"><img src="../Images/92f251c34fdda48d0c906d5d8fc2d0d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bl81r0VggnnUxR1UdOGbwQ.png"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated"><a class="ae lz" href="https://www.w3.org/TR/touch-events/" rel="noopener ugc nofollow" target="_blank">https://www.w3.org/TR/touch-events/</a></p></figure><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi np"><img src="../Images/2f094c3b2548c2dc0c4bb076a43fda0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z17a2Cru0b5uwX3ham8yvw.png"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated"><a class="ae lz" href="https://caniuse.com/#search=touch" rel="noopener ugc nofollow" target="_blank">https://caniuse.com/#search=touch</a></p></figure><p id="7167" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">触摸事件的接口是相对低级的API，可用于支持特定于应用的多点触摸交互，例如双指手势。</p><p id="c28f" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">当手指(或触笔)第一次触摸接触面时，多点触摸交互开始。其他手指可以随后触摸该表面，并且可选地在触摸表面上移动。当手指从表面移开时，交互结束。在该交互期间，应用在开始、移动和结束阶段接收触摸事件。</p><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nq"><img src="../Images/ffc4ec352ecb97dc74b555b9e7dd950a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YLninVZK2pgr418xSIeqSQ.png"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated"><a class="ae lz" href="https://developer.mozilla.org/en-US/docs/Web/API/Pointer_events" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/API/Pointer _ events</a></p></figure><p id="47bc" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">添加触摸事件监听器相当简单，但是您必须同时支持<code class="fe nr ns nt nu b">touch</code>和<code class="fe nr ns nt nu b">mouse</code>:</p><figure class="mz na nb nc gt ju"><div class="bz fp l di"><div class="nv nw l"/></div></figure><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nx"><img src="../Images/efd2fd9efd62007393fdf4e8d08c87a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zY9kYX5hk0GKXm9LzwBqXg.png"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated"><a class="ae lz" href="http://jsbin.com/libayejike/edit?js,console,output" rel="noopener ugc nofollow" target="_blank">http://jsbin.com/libayejike/edit?js,console,output</a></p></figure><p id="3ed8" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">在你的手机上尝试这个例子，并尝试在桌面版本上使用它来分割屏幕，然后检查<code class="fe nr ns nt nu b">console.log </code>输出。</p><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ny"><img src="../Images/bf6d078203d83061be30c484314bc258.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2OU_vYEcQOY9xqXY18Fpbw.jpeg"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated">测试iPhone上的触摸事件</p></figure><p id="c7fe" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">支持<code class="fe nr ns nt nu b">touch</code>和<code class="fe nr ns nt nu b">mouse</code>事件会变得非常臃肿和难以维护，因为你必须为不同的设备编写事件代码。</p><h2 id="3f68" class="kz kc it bd kd la lb dn kh lc ld dp kl le lf lg kp lh li lj kt lk ll lm kx ln bi translated">指针事件到救援！</h2><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nz"><img src="../Images/2dcad7850acc643e2b731cafb7ba26a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GIzSbuvtEhspRxFYDIMBFg.png"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated"><a class="ae lz" href="https://w3c.github.io/pointerevents/" rel="noopener ugc nofollow" target="_blank">https://w3c.github.io/pointerevents/</a></p></figure><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oa"><img src="../Images/823e4ffc4a70c41bc2531b4a0f2b72bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0sKxMkd-USYPFHvR7gHmWQ.png"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated">看看jQuery团队的这个令人惊叹的多填充符,它支持大多数浏览器上的指针事件</p></figure><p id="082f" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">还记得上面的例子吗，我们有两个事件监听器——一个用于鼠标，一个用于触摸？</p><p id="872e" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">好吧，我们可以简单地将其中一个改为<code class="fe nr ns nt nu b">pointermove</code>并删除其余的，而不是编写两个事件监听器。</p><figure class="mz na nb nc gt ju"><div class="bz fp l di"><div class="nv nw l"/></div><p class="nl nm gj gh gi nn no bd b be z dk translated"><strong class="ak"> pointermove </strong>支持触摸和鼠标</p></figure><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ob"><img src="../Images/0c182aaad9c080d258022fc1b3f3d006.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PpXF9isEY_A6bziJEu98pw.png"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated"><a class="ae lz" href="http://jsbin.com/xexotimade/edit?js,console,output" rel="noopener ugc nofollow" target="_blank">http://jsbin.com/xexotimade/edit?js,console,output</a></p></figure><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nz"><img src="../Images/d3f84a79317ba1647639e16330243dd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*olwYMLX3cucthMqDHblU5Q.png"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated"><a class="ae lz" href="https://github.com/jquery/PEP/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">https://github.com/jquery/PEP/blob/master/README.md</a></p></figure><p id="1cb1" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">今天浏览器能做的事情太神奇了！但愿有一天我们能在浏览器中拥有完全原生的体验。</p><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oc"><img src="../Images/325f5185cc9eaa992f2509711233e1b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OqFLOxiPY8rtIP6yaRJOXQ.png"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated"><a class="ae lz" href="https://developer.mozilla.org/en-US/docs/Web/API/Pointer_events" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/API/Pointer _ events</a></p></figure><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi od"><img src="../Images/1265ad672ce1860d831722a1fca2c5eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IdgMOgCZC9f7z2S-fNpKoQ.png"/></div></div></figure><p id="51ee" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">React最近推出了16.4版本，支持原生指针事件。</p><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oe"><img src="../Images/fe2ed0d78bab4d6263d382c826af92f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IFnkb23tC1Nyl6F3vlHZng.png"/></div></div></figure><p id="5b80" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">让我们创建一个快速反应项目，并尝试这些新的漂亮的事件。更新到最新的<code class="fe nr ns nt nu b"><a class="ae lz" href="https://www.npmjs.com/package/create-react-app" rel="noopener ugc nofollow" target="_blank">create-react-version</a></code>，启动项目。</p><figure class="mz na nb nc gt ju"><div class="bz fp l di"><div class="nv nw l"/></div></figure><div class="mz na nb nc gt ab cb"><figure class="nd ju of nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/e34c0666a93fddf4d302733573fb3cab.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*PiqkYuwqEfZhLqZufs7YUQ.png"/></div></figure><figure class="nd ju og nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/81dc512f176ab453c4905af354bd12ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*kdRCEcAMaqnKIlPaWE7odQ.png"/></div></figure></div><p id="67fb" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">由于指针事件支持触摸事件，我们也想在手机上测试它。用via <code class="fe nr ns nt nu b">on your network: http://xxx.xxx.x.xx:3000/</code>网址打开手机上的应用。</p><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ny"><img src="../Images/445405b160432ba2e29ee8e8e51b6495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pV9iMFoD8i4iak9j7iXMyQ.jpeg"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated">用手机打开react应用程序</p></figure><p id="f235" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">我们首先创建同一个圆，并声明一个名为<code class="fe nr ns nt nu b">hasCapture</code>的状态:</p><div class="mz na nb nc gt ab cb"><figure class="nd ju oh nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/7c934f2a4649f5f04fa88e32aca8ab06.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*LT_IfZRHwT2oPYvRWOTmvg.png"/></div></figure><figure class="nd ju oi nf ng nh ni paragraph-image"><img src="../Images/13b844d2c9131eaf529b1a927718ad7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*DRVvJyGjDrhscjpJ9OVOWA.png"/></figure></div><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oj"><img src="../Images/2e4bf4461b1687c715cad2ac41eac87f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yzbQFu-xPjI7POWLCTkaZg.png"/></div></div></figure><p id="5ffc" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">接下来，让我们添加<code class="fe nr ns nt nu b">onPointerEnter</code>和<code class="fe nr ns nt nu b">onPointerLeave</code>——当你将鼠标悬停在元素上时，听起来就是这样。</p><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ok"><img src="../Images/b8106e954789a5b542fceb4018b20310.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZrcTigkas-2Pv6ie7tjp8g.png"/></div></div></figure><figure class="mz na nb nc gt ju gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/5c95d998a56aeed6d45e74e473e24979.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/1*1wCNXLB0WeWBIumy4swYTw.gif"/></div><p class="nl nm gj gh gi nn no bd b be z dk translated"><strong class="bd om">on pointer输入</strong>和<strong class="bd om"> onPointerLeave </strong></p></figure><p id="8ee4" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">但是<code class="fe nr ns nt nu b">onPointerEnter</code>和<code class="fe nr ns nt nu b">onMouseEnter</code>有什么区别呢？</p><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi on"><img src="../Images/352a2cd7829722ed049ac6d6449d2524.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Qdkqc4F0cpJdI5Vi2agrQ.png"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated">来源:<a class="ae lz" href="https://mobiforge.com/design-development/html5-pointer-events-api-combining-touch-mouse-and-pen" rel="noopener ugc nofollow" target="_blank">https://mobi forge . com/design-development/html 5-pointer-events-API-combining-touch-mouse-and-pen</a></p></figure><p id="6c7d" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">简而言之，通过使用指针事件，我们支持更多的设备。这可能是未来的活动方式。</p><p id="6da0" class="pw-post-body-paragraph ma mb it mc b md mu mf mg mh mv mj mk le mw mm mn lh mx mp mq lk my ms mt ly im bi translated">如果你想让你的JavaScript能力更上一层楼，我推荐阅读“<a class="ae lz" href="https://amzn.to/2LSDpG6" rel="noopener ugc nofollow" target="_blank"> <em class="oo">你不知道的JS </em> </a>”系列丛书。</p><figure class="mz na nb nc gt ju"><div class="bz fp l di"><div class="op nw l"/></div></figure><h2 id="e428" class="kz kc it bd kd la lb dn kh lc ld dp kl le lf lg kp lh li lj kt lk ll lm kx ln bi translated">感谢阅读，保持敬畏！❤</h2></div></div>    
</body>
</html>