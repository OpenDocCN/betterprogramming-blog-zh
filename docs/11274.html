<html>
<head>
<title>What Happens If We Code the Same Algorithm in Python and Rust?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如果我们用Python和Rust写同样的算法会怎么样？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/from-pythonic-to-rustacean-this-is-the-way-6ee46ee63033?source=collection_archive---------0-----------------------#2022-03-05">https://betterprogramming.pub/from-pythonic-to-rustacean-this-is-the-way-6ee46ee63033?source=collection_archive---------0-----------------------#2022-03-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0bc8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">从Pythonic到Rustacean——是这条路吗？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c85e2b8d68be373541f5ba4b4d2427de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qr_PcbEsJFZo4EBq"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae kv" href="https://unsplash.com/@jannerboy62?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">尼克·费因斯</a>拍摄</p></figure><p id="e2e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再次嗨，亲爱的读者们！很久以后，我来这里写一篇关于我第一次使用Rust的经历。</p><p id="e39d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">也许你在问自己(或没有)为什么写这篇文章。几周前，我读了AWS的一篇文章，他们谈到并展示了所有语言代码的图表，比较了所有语言代码的可持续性。链接到<a class="ae kv" href="https://aws.amazon.com/es/blogs/opensource/sustainability-with-rust/" rel="noopener ugc nofollow" target="_blank">帖子</a>。在那篇文章中，他们谈到了如何扩展他的平台，以及用rust来做有多好。那一刻我“哇，真的吗？”。几天后，我读了一篇Twitter帖子，作者认为这篇帖子没有说出全部真相。但我不是来谈这个的。反正如果你也想看，这里有<a class="ae kv" href="https://twitter.com/_rsc/status/1496352325157457922?s=12" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><p id="b794" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我是一个很好奇的人，也是一个对这个话题很极客的人，所以刚开始查关于Rust的资料。像入门的第一步，一些GitHub库，看看它是怎样的语言，我喜欢它！</p><h1 id="8a86" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">什么是铁锈？</strong></h1><p id="f767" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">从他的页面上你可以得到一个定义，比如"<em class="mp">一种让每个人都能够构建可靠而高效的软件的语言。</em>“但真正的意思是什么呢？</p><p id="8f49" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Rust是一种编译语言代码，这使得我们的代码转换成机器语言，我们可以说我们的整个过程运行就像硬件获得我们的应用程序并运行它一样，这应该非常快。</p><p id="58fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Rust由Mozilla于2010年创建，十年后由Rust foundation创建，旨在将这种语言作为Python等开源语言进行维护，在他们的调查中，这是一种非常受欢迎的堆栈溢出语言，例如2015年的调查。</p><p id="e7ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">主要特点是什么？当他们开发这种语言时，他们认为安全是最重要的，当编译器被调用时，它会检查你的代码，检查是否有内存错误或错误的指针引用。</p><h1 id="83f1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">您可以构建的应用</strong></h1><p id="2972" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">如果你想到任何语言代码，你可能会联想到任何类型的应用，例如，<strong class="ky ir"> Swift </strong>用于iOS移动应用，<strong class="ky ir"> Python </strong>用于web服务器和ML，JS用于Web开发，或者<strong class="ky ir"> Java </strong>用于30亿台设备。</p><p id="3610" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是没有人会说JS可以做web服务器或者Python不能抓取web，因为可能有人会这么说。这就是为什么rust可以做很多类型的应用程序:CLI，web服务器，web assembly(一些浏览器可以执行Rust代码)，Scraping，微控制器(嵌入式设备)。最重要的是，与其他语言代码相比，它总是具有最佳的性能和较低的资源。</p><h1 id="ec04" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">动机</strong></h1><p id="c91c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">当我还是学生的时候，我开始学习C和Java，但是当我遇到Python时，我爱上了它。我认为这是一门非常好的语言，它有一个很棒的社区，有很多强大的库，你可以从中学习到很多关于软件的知识并理解它。</p><p id="9f56" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，当你有了经验，你认为你已经准备好了，你可以加入编译器语言的联盟，因为你有设计模式，知道软件如何工作，你只需要再增加一个新的变量，内存控制。</p><p id="2c4d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就像一个赛车电子游戏，你不能从最大难度开始，你从低级或中级开始，当你得到控制时就成长了。这个很像。</p><h1 id="49fc" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak"> Python vs. Rust:通过斐波那契算法</strong></h1><p id="d19d" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">正如我之前说过的，Python是开始学习编码的一种很好的语言。它是一种解释型语言，这个脚本需要在我们想要运行它的任何设备上使用python。它是弱类型的，有一个非常酷的语法，叫做Pythonic。</p><p id="e6fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相对于Rust，我们可以看到下一张图，其中Python可以在任何安装了Python的设备上执行，Rust只需编译脚本，将其翻译成机器语言，最后在任何设备上执行，因为机器可以理解它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/24a0af719d11018384d4eddcaee080c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OQl3jGkWnXSZwFpcRhiKew.jpeg"/></div></div></figure><p id="54ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Python给了我们快速的开发，但是它有一个大的缺点，他的执行是昂贵的和较低的。如果我们比较相同的斐波那契算法，我们可以看到时间之间的巨大差异。</p><p id="8ba7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了以一种实用的方式看到它，我将相同的算法编码到Python和Rust中。</p><p id="5c61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，如果我们看一下Python代码，我们会发现代码的行数不如Rust。这是因为python核心开发人员将Python设计成易读的。他们做得很好。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="4d3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Rust代码中，我们关闭重复的行。Rust用花括号分隔代码块，而在python中，代码块由制表符和空格分隔。此外，我们必须导入一些库来管理大数、io等。</p><p id="148e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Python解释器默认管理内存，但是在Rust中，你必须定义变量的类型，因为int的最大静态类型是<code class="fe mt mu mv mw b">u128 (2¹²⁸ bytes = 3.4028237e+38)</code>或<code class="fe mt mu mv mw b">usize</code>类型，编译器从硬件中动态获取。所以这就是我实现BigUint的原因。这个库保存在一个字节向量中，并动态分配内存。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="eda9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再说性能。</p><p id="2554" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，就是锈域全景的所在。</p><p id="5a25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，在执行我们的Rust脚本之前，我们必须为我们的机器编译它，以理解需要执行什么指令。</p><p id="c8b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有两种方法，用<code class="fe mt mu mv mw b">rustc &lt;script.rs&gt;</code> <strong class="ky ir"> </strong>或者用cargo，一个管理包、编译、格式化等等的工具。我们可以用<code class="fe mt mu mv mw b">cargo build [ — release]</code>来做。<strong class="ky ir"> </strong>如果添加了发布标志，它将优化脚本，并比其他方式更快地执行代码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/cf166113cd2b2e44411f64e9ee8f25a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EzUaK9z58JAEQyjTDDJRLA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">计算第100个斐波那契数</p></figure><p id="2454" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在执行完第100个斐波那契数后，我们可以注意到:</p><p id="375d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Rust执行26 s，Python执行142 s。</p><p id="204f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很显然，这两种语言的性能是无法相比的。记住，我们没有控制记忆，是解释器帮我们控制的。这并不意味着Python核心开发者设计的很差。这是因为代码首先被解释器读取，它检查执行中的错误。</p><p id="6940" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以简单地说，如果你必须和任何人交谈。如果你们都懂这门语言，你们会交流得很快。另一方面，如果你需要一个翻译与他人交流，流程中会有更多的延迟。</p><h1 id="18bd" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">我的经历</strong></h1><p id="be7b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我可以说Rust很酷，在花了大部分时间试图获得简单的Fibonacci解决方案之后，我可以说如果你不习惯键入变量、管理内存、指针以及所有的库都不是标准的，那么从Python的改变可能有点困难，所以你必须寻找、尝试并继续开发。</p><p id="b86d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一方面，虽然开始有点困难，但Rust有一本很棒的<a class="ae kv" href="https://doc.rust-lang.org/book/" rel="noopener ugc nofollow" target="_blank">网络书籍</a>，里面有详细的解释和实际的例子向你介绍这种语言。</p><p id="a85c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过一个斐波那契问题，我已经能够精确地验证我们使用的硬件资源不是无限的，并且python将我们从许多问题中抽象出来。我给了你一些有趣的资源。</p><ul class=""><li id="c106" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr nd ne nf ng bi translated"><a class="ae kv" href="https://www.rust-lang.org/" rel="noopener ugc nofollow" target="_blank">官方页面</a></li><li id="a63a" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated"><a class="ae kv" href="https://doc.rust-lang.org/cargo/" rel="noopener ugc nofollow" target="_blank">货物登记簿</a></li><li id="1b0a" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated"><a class="ae kv" href="https://towardsdatascience.com/you-want-to-learn-rust-but-you-dont-know-where-to-start-fc826402d5ba" rel="noopener" target="_blank">拥有大量资源的媒体</a></li><li id="2aa5" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated"><a class="ae kv" href="https://www.techempower.com/benchmarks/" rel="noopener ugc nofollow" target="_blank"> API基准</a></li></ul><p id="2c94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总之，如果你是一个好奇的人，喜欢学习新的东西，有一个主题有很多东西可以寻找，你可以加入，或者如果你在等待任何信号开始新的东西，这是你的帖子。</p><p id="a5ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读，希望你喜欢！我很想听听你对语言代码知识或新知识的看法。</p></div></div>    
</body>
</html>