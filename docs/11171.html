<html>
<head>
<title>Encrypting Common Scenarios in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Swift中加密常见场景</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/encrypting-common-scenarios-in-swift-34168034190c?source=collection_archive---------11-----------------------#2022-02-23">https://betterprogramming.pub/encrypting-common-scenarios-in-swift-34168034190c?source=collection_archive---------11-----------------------#2022-02-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="448c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用AES加密</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ed360439f2ccfd7a7af6cbdbfdd74d78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qD7VNd3stt9CkCqEH5kT5A.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">马库斯·温克勒在<a class="ae kv" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="023b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我认为，加密是移动开发中最重要的主题，以防止逆向工程，窃取用户敏感数据。由于开发优先级的原因，它有时会被忽略。有很多方法可以保护用户敏感数据，例如:加密类型的端到端保护、SSL锁定、忽略未知的不安全(HTTP)连接等。</p><p id="1824" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个故事中，我将以一种加密类型为例，说明如何实现端到端保护。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="bedb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们假设我们有一个一次性密码，通过给短信提供商来验证应用程序。我们选择<strong class="ky ir"> AES </strong>加密，提供双向加密。</p><h2 id="466c" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">俄歇电子能谱</h2><p id="aec5" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">它被称为高级加密标准。使用AES有两个参数—名为<code class="fe mx my mz na b">key</code>、<code class="fe mx my mz na b">iv</code>(初始化向量)。密钥的大小可以是128/196/256位。iv的大小是126位。在本例中，我们选择256位密钥，126位iv。让我们随机生成两个参数</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="533d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们需要通过依赖管理器将名为<code class="fe mx my mz na b"><a class="ae kv" href="https://github.com/krzyzanowskim/CryptoSwift" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">CryptoSwift</strong></a></code>的第三方库导入到我们现有的项目中。让我们使用Swift包管理器。</p><p id="6e74" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择项目并转到项目中的<strong class="ky ir">包依赖关系</strong>选项。</p><p id="f7da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击<strong class="ky ir"> + </strong>按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/da8dbf328b2c158b55f84445758e4db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s3jJMOnSwd704zwkdXrc_Q.png"/></div></div></figure><p id="dc70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将下面的URL复制并粘贴到搜索栏。</p><p id="e16d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">调整库的版本。</p><pre class="kg kh ki kj gt ne na nf ng aw nh bi"><span id="3566" class="lz ma iq na b gy ni nj l nk nl">"https://github.com/krzyzanowskim/CryptoSwift.git"</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/90d2a5dc1467e27487c48c2a34398d6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jgx9fDtyuRlNkOsiiCsE9Q.png"/></div></div></figure><p id="6fb1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击窗口底部的<strong class="ky ir">添加包</strong>按钮。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="ae26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们创建一个扩展文件来定义加密和解密。</p><h2 id="6470" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">加密</h2><p id="cd1d" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">在扩展文件<code class="fe mx my mz na b">encryption</code>方法中，首先，我们需要使用<strong class="ky ir"> utf8 </strong>将给定的代码转换成数据。在使用给定的密钥和iv参数后，我们需要使用AES的初始化密钥、iv和填充参数。之后将它转换成数据并转换成<code class="fe mx my mz na b">hexadecimalString</code>。</p><h2 id="6516" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">[通信]解密</h2><p id="eb1c" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">首先，从<code class="fe mx my mz na b">hexadecimalString</code>获取数据以使用AES的解密方法。之后，使用数据和编码选项在新字符串中初始化它。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="8252" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了这个扩展，我们可以很容易地加密从SMS提供者到web服务的一次性密码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="8dd5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">目前就这些。我们看到，加密用户敏感数据是使用AES加密的一次性密码，用于发送到web服务。</p><p id="7daa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我写了一个关于用加密处理用户敏感数据的第三方库。可以使用，也可以投稿。</p></div></div>    
</body>
</html>