<html>
<head>
<title>Localize Your App With React Intl</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React Intl本地化您的应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/localization-with-react-dc26fb013028?source=collection_archive---------6-----------------------#2019-08-23">https://betterprogramming.pub/localization-with-react-dc26fb013028?source=collection_archive---------6-----------------------#2019-08-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="42df" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何设置您的应用程序以前往世界任何地方</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e8b1b65c6d7bcf01239f8ed8dd18df0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qLmq1pngYfI0dt4d"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@nicnut?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">尼古拉·纳托尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="110b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在开发中，本地化指的是使网页或应用程序在特性上符合浏览者的语言环境的过程。这可能涉及翻译页面上的语言、转换货币以及更改数字和单位系统。</p><p id="ab7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React非常适合本地化，因为可以在虚拟DOM上进行本地化更改，只允许页面的本地化部分进行更改，而不必重新呈现整个不同的页面(或者路由到完全不同的本地化URL)。</p><p id="8a8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用React进行本地化最常用的包是React Intl，它本身是FormatJS包套件的一部分。FormatJS套件不仅提供跨语言的语言、数字、单位和日期转换，还提供语言内部的转换(“您有十条新消息”更改为“您有一条新消息”)。在本文中，我将介绍FormatJS套件，特别关注React Intl，然后介绍一个越来越流行的轻量级、更容易配置的本地化包React Localize Redux。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f638" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">用React Intl格式化</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/f1608e24c2ffb45e0e786458dd168746.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VjT5DAOi_bV1RXy4OVXe-w.png"/></div></div></figure><p id="bfc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">FormatJS是一套提供与各种JavaScript框架和库集成的包，React就是其中之一。它还提供了与余烬，车把和灰尘的集成。FormatJS中处理本地化的特定包是<code class="fe mv mw mx my b">intl</code>包，或者是React特定集成的<code class="fe mv mw mx my b">react-intl</code>。</p><p id="77ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React Intl是目前最全面的React本地化包，不仅提供语言转换，还提供数字格式、复数和日期转换。React Intl和类似本地化包的基本设置结构包括将应用程序导入并包装在包的提供程序中，创建一个单独的翻译文件，在其中写入所有翻译数据，然后将该文件与组件一起导入，以本地化页面内容。</p><p id="7d2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React Intl是一个庞大而强大的软件包，因此，它的设置和使用会变得非常复杂。虽然我将在这里为您介绍一个简单的普通消息(即页面上的文本)的翻译设置，但我强烈建议您查看官方文档<a class="ae ky" href="https://github.com/formatjs/react-intl/blob/master/docs/Getting-Started.md" rel="noopener ugc nofollow" target="_blank"/>，其中将更详细地介绍该软件包的全部功能。</p><h2 id="5643" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">游戏攻略</h2><p id="9759" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">首先，安装软件包(<code class="fe mv mw mx my b">npm i react-intl --save</code>)，然后导入<code class="fe mv mw mx my b">&lt;IntlProvider&gt;</code>并把你的应用包在里面:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/15dd49a410c28f1620058252c42f5acc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WcxdgtSV8bo4oCttJJIzNw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">索引. js</p></figure><p id="5c96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里需要注意的重要部分是提供者的<code class="fe mv mw mx my b">locale</code>和<code class="fe mv mw mx my b">messages</code>属性。这些将在以后设置，以便告诉提供者我们在哪个地区操作，并将我们翻译的消息传递给它。</p><p id="4c15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建单独的JSON翻译文件。下面的JSON对象中的键是一个参考点，稍后将调用它，而值指的是将在页面上显示的实际消息:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/d650da61b6e9a2d083bdb6dc0412dbd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SL-cq0Cs0f4GqDEzItqj1g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">src/translations/en.json</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/13ce3d34d34d60121faa7e4e998a744c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SVWnlHoKMSQizFJ7VKd1bw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">src/translations/fr.json</p></figure><p id="e4cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">回到我们的index.js，我们现在可以导入翻译文件并设置消息属性来包含它们。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/1b41dcb7163b8b0904772f7c62e03be0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lVKL6OzQxMTTVdzHnhMm1Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">索引. js</p></figure><p id="c113" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您可以使用React Intl的组件在页面上呈现不同的本地化材料。例如，<code class="fe mv mw mx my b">&lt;FormattedMessage&gt;</code>组件用于翻译普通消息:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/80c596b76dba01396801e2a68b303aae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EbPJS05v1myYCklxLBh1vg.png"/></div></div></figure><p id="841c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在上面的代码片段中看到，<code class="fe mv mw mx my b">&lt;FormattedMessage&gt;</code>包含一个ID属性，该属性引用了我们之前创建的JSON文件中的键。</p><p id="f480" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其他组件包括<code class="fe mv mw mx my b">&lt;FormattedHTMLMessage&gt;</code>、<code class="fe mv mw mx my b">&lt;FormattedDate&gt;</code>、<code class="fe mv mw mx my b">&lt;FormattedTime&gt;</code>和<code class="fe mv mw mx my b">&lt;FormattedNumber&gt;</code>等。每个组件用于不同类型的本地化/格式化，必须单独导入。</p><p id="1ec8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">听起来太复杂了，无法翻译？你并不孤单。这就是为什么许多只本地化语言的开发者现在转向另一个包。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4aa7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">反应-定位-还原</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/5b5ce35bca5e6b2bd65bba626ed528f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9VWHErWfOKbgCvCxk1MvGQ.png"/></div></div></figure><p id="ca09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个本地化选项React Localize Redux只为一种类型的转换创建:语言本地化。因为该包不处理其他本地化，如货币、日期、数字等。，它体积更小，重量更轻。因此，设置和实现相对来说比React Intl更简单、更快。</p><p id="b8d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mv mw mx my b">react-localize-redux</code>的一个定义特性是它对Redux的开箱即用支持。只需将react-localize-redux作为<code class="fe mv mw mx my b">localize</code>添加到您的根reducer，用<code class="fe mv mw mx my b">&lt;LocalizeProvider&gt;</code>包装您的应用程序，并将其传递到您的redux存储。</p><p id="66e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe mv mw mx my b">react-localize-redux</code>有两种翻译方法:单语翻译(如英语-法语)或多语言翻译(如英语-法语-西班牙语)。对于本文，我将演示如何实现单一语言翻译。多语言翻译并不难，可以在官方文档<a class="ae ky" href="https://ryandrewjohnson.github.io/react-localize-redux-docs/" rel="noopener ugc nofollow" target="_blank">这里</a>阅读。</p><h2 id="15e4" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">游戏攻略</h2><p id="1272" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">这个过程与React Intl非常相似。首先，安装带有<code class="fe mv mw mx my b">npm i react-localize-redux --save,</code>的包，然后导入<code class="fe mv mw mx my b">&lt;LocalizeProvider&gt;</code>，将你的应用程序的内容包装在里面:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/259efa413ffe6aed6033d0a43fb06f0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bY5oQw7AH8_2WZh35v1OZw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">App.js</p></figure><p id="2dc5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后在单独的文件中创建翻译，可以是JSON文件，也可以是普通的JavaScript对象:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/acce72b376fcc13c6c02f7d60e73c3f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4z7udYQUaHddsF7jfuoGrw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">src/translations/global.json</p></figure><p id="4eb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在你的顶层组件中初始化本地化，确保导入<code class="fe mv mw mx my b">renderToStaticMarkup</code>、<code class="fe mv mw mx my b">withLocalize</code>和你的翻译文件(不要忘记使用<code class="fe mv mw mx my b">withLocalize</code>导出组件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/064a52ed7a2831c66db771a4c3a89c50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AZ1xbjHwsCuIR1H21Bg2Fw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">main . js(App的子组件)</p></figure><p id="8f9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于我们为什么使用<code class="fe mv mw mx my b">renderToStaticMarkup</code>功能的更多信息，请查看文档中的<a class="ae ky" href="https://ryandrewjohnson.github.io/react-localize-redux-docs/#why-do-i-need-to-pass-rendertostaticmarkup-to-initialize" rel="noopener ugc nofollow" target="_blank">部分</a>。简而言之，Translate处理HTML中的默认翻译是必要的，但不包括在<code class="fe mv mw mx my b">react-localize-redux</code>包中，因为它会导致React Native不支持<code class="fe mv mw mx my b">react-dom</code>的问题。</p><p id="cc78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您可以通过从<code class="fe mv mw mx my b">react-localize-redux</code>导入<code class="fe mv mw mx my b">&lt;Translation&gt;</code>组件来将本地化文本添加到您的组件中:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/fad617c41183b98bd2f7c3f4640dd5ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PCvjquO_dnydy3VnJFhxAA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">movies . js(Main的子组件)</p></figure><p id="0b3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，“侏罗纪公园”是默认的<code class="fe mv mw mx my b">&lt;h1&gt;</code>文本，将在没有任何本地化动作的情况下出现。如果不需要缺省文本，只需用引用翻译文件中相应翻译的ID属性自动关闭<code class="fe mv mw mx my b">&lt;Translate /&gt;</code>组件。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="3ce1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React Intl是一个更加全面的包，它不仅支持语言本地化，还支持货币、日期、数字系统等等。因此，它是一个更大的包，需要更多的初始设置。React Intl也不包含对Redux的开箱即用支持，这对<code class="fe mv mw mx my b">react-localize-redux</code>是一个很大的吸引。虽然<code class="fe mv mw mx my b">react-localize-redux</code>是一个更小的包，并且只处理语言翻译，但是它对Redux的现成支持使它成为一个快速简单的工具，如果你只是想通过语言来本地化你的网页和应用程序的话。</p></div></div>    
</body>
</html>