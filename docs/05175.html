<html>
<head>
<title>How to Deploy Your First Deno App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何部署您的第一个Deno应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-deploy-your-first-deno-app-998b50089fd6?source=collection_archive---------8-----------------------#2020-06-17">https://betterprogramming.pub/how-to-deploy-your-first-deno-app-998b50089fd6?source=collection_archive---------8-----------------------#2020-06-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4a60" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在不到五分钟的时间内将您的第一个Deno应用程序上线</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e9267f2fd00e1840e875e596e10a910d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rWJOs3N48ggnn2myAFSJ-A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">背景图片由<a class="ae ky" href="https://unsplash.com/@fempreneurstyledstock?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Leone Venter </a>在<a class="ae ky" href="https://unsplash.com/s/photos/coffee-desk?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="c81c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Deno 已经进入了开发者社区，与它的前身(花了一段时间才起步)不同，它正在掀起波澜。互联网上已经充斥着将它与Node.js进行比较的文章，有些人甚至说Node已经永远消亡了。好吧，我不想跳进这个讨论，但德诺是在这里停留。</p><p id="4a22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管人们开始在生产中使用它以及流行的云提供商开始为Deno提供开箱即用的运行时还需要一段时间，但这并不意味着我们不能开始尝试所有的新功能。所以这里有一篇文章解释了如何将Deno应用程序部署到Heroku项目中。让我们跳进来。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="432d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.创建您的Deno应用程序</h1><p id="9b2d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在这个项目中，我们将使用一个非常简单的Deno应用程序，它包含一个单独的<code class="fe mz na nb nc b">get</code> API，返回一组样本待办事项。<code class="fe mz na nb nc b">server.ts</code>的代码很像样板文件，但是让我们浏览一下与Heroku项目相关的代码行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><ul class=""><li id="7c0a" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">第3行:我们正在为Deno导入一个命令行参数解析器，我们将使用它来传递端口号。</li><li id="30d6" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">第7行:我们将运行时从CL传递的参数存储在这个常量中。</li><li id="d30a" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">第8行:我们定义了一个默认端口，以防我们的参数没有定义。</li><li id="1e5a" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">第9-10行:我们从Deno命令传递的参数中检索端口值，检查它是否未定义，并将其分配给应用程序使用的端口变量。</li></ul><p id="a4bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">剩下的就很简单了。如果您对端口变量感到困惑，请稍等。一会儿就说得通了。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="072e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.创建Heroku应用程序</h1><p id="508c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Heroku是一个平台即服务(PaaS ),使开发人员能够完全在云中构建、运行和操作应用程序。完全免费使用。由于这是一个Heroku教程，我将从基础开始。如果你已经知道如何连接Heroku应用程序，你可以跳到最后一节。</p><ul class=""><li id="1a26" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">在<a class="ae ky" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>上创建一个账户。</li><li id="6e27" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">如果您还没有安装Heroku CLI ，请在您的系统上安装。</li><li id="911f" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">从您的终端运行<code class="fe mz na nb nc b">heroku login</code>来授权您的Heroku帐户。</li><li id="de97" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">从项目文件夹中的终端运行<code class="fe mz na nb nc b">heroku create &lt;app-name&gt;</code>。这将创建一个Heroku应用程序，并将其连接到一个Heroku git遥控器。</li><li id="0e45" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">这可能是本教程中最重要的命令。创建应用程序后，在命令行中运行<br/> <code class="fe mz na nb nc b">heroku buildpacks:set <a class="ae ky" href="https://github.com/chibat/heroku-buildpack-deno.git" rel="noopener ugc nofollow" target="_blank">https://github.com/chibat/heroku-buildpack-deno.git</a></code>。</li></ul><p id="b4bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一步，我们配置我们的应用程序使用第三方的Deno buildpack，因为正式的Deno build pack在Heroku中还不可用。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="142d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.创建Procfile</h1><p id="5c43" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，在项目的根目录下，创建一个名为<code class="fe mz na nb nc b">Procfile</code>的文件，没有任何扩展名。这是一个指定Heroku应用程序在启动时执行的命令的文件。在Procfile中添加这一行代码:</p><pre class="kj kk kl km gt nt nc nu nv aw nw bi"><span id="915a" class="nx md it nc b gy ny nz l oa ob">web: deno run --allow-net=:${PORT} --cached-only server.ts --port=${PORT}</span></pre><p id="993a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，除了Deno <code class="fe mz na nb nc b">run</code>命令，我们还添加了<code class="fe mz na nb nc b">PORT</code> <strong class="lb iu"> <em class="oc"> </em> </strong>变量，该变量将包含Heroku dynos为您的应用程序绑定的动态端口。</p><p id="bcf7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这非常重要，因为Heroku不允许我们在代码中定义端口。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/42d0083d81ee2be741c0bc06c3717c0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o8aE6mAiyacDfVYLo7vy7g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这是示例项目结构的样子。</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="628f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.向Heroku推进</h1><p id="a622" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在你的应用程序被配置为在Heroku上运行，你所要做的就是提交所有文件并从命令行运行<code class="fe mz na nb nc b">git push heroku master</code>。成功部署后，您将在命令行中看到如下消息:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/7ed225110da6a3ef0ebfed647f11c2ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GrsH7m6JY60O8DnJB3kszw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">部署Heroku应用程序</p></figure><p id="1496" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在只需导航到消息末尾给出的Heroku应用程序URL，然后是您的API端点，您将能够看到您的响应。如果你想监控你的应用程序的实时日志，你可以从你的命令行这样做。只需打开一个新的命令行实例并运行命令<code class="fe mz na nb nc b">heroku logs — tail</code>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c66f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="0efa" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">您可以在<a class="ae ky" href="https://github.com/nabilnalakath/deno-heroku" rel="noopener ugc nofollow" target="_blank"> GitHub资源库</a>中找到完整的源代码。特别感谢<a class="ae ky" href="https://github.com/chibat/" rel="noopener ugc nofollow" target="_blank"> Chibat </a>创造了Heroku Deno buildpack。</p></div></div>    
</body>
</html>