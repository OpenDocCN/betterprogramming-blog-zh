<html>
<head>
<title>Handling Multiple Checkboxes in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中处理多个复选框</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/handling-multiple-checkboxes-in-react-1ee21c8edcfa?source=collection_archive---------1-----------------------#2022-01-16">https://betterprogramming.pub/handling-multiple-checkboxes-in-react-1ee21c8edcfa?source=collection_archive---------1-----------------------#2022-01-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="509b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何有效地处理任何React项目中的多个复选框</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d7d2cc7f91ae35b528cba8d4ad11e49d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QUnmhJMyeIDFAKx6"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@thomasbormans?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">托马斯·博尔曼斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="dee9" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="7c75" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">很多时候，在任何web应用程序中，我们都需要从用户那里收集数据，作为特定和预定义选项的列表。这个问题，大多数时候是通过使用多个复选框来解决的。</p><p id="d953" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">用户可以选择它们中的一个或多个，以便创建最终的选项列表，该列表将被发送到例如API，或者将被用作稍后在web应用的流程中有用的状态。</p><p id="c449" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然而，我们有许多不同的方法来处理来自多个复选框的数据。一些开发人员喜欢将选项存储在一个包含所有选择的对象中，并根据每个复选框的状态将相应的值设置为true或false，而其他人则喜欢将其存储在一个简单的数组中，甚至存储在浏览器的永久存储中(也称为cookies)。</p><p id="3e2f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">因此，在这里，我将使用尽可能少的代码来展示我认为是最有效和不言自明的方法。</p><h1 id="8abc" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">创建项目</h1><p id="287b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">由于我是typescript的忠实粉丝(这一选择背后的原因超出了本文的范围)，我将使用typescript模板生成一个react项目。然而，相同的原则和模式可以在任何React项目中使用Javascript或Typescript。因此，我在终端上执行的第一个命令如下:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="0e0e" class="mx la it mt b gy my mz l na nb">create-react-app multiple-checkboxes --template typescript</span></pre><h1 id="1c6c" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">创造我们需要的组件</h1><p id="7eed" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了实现更好的项目结构和更清晰的代码，我创建了一个名为<code class="fe nc nd ne mt b">ListItem</code> <strong class="lt iu">，</strong>的组件，其中包含一个复选框和一个描述标签。我使用了<code class="fe nc nd ne mt b">styled-components</code> <strong class="lt iu"> </strong>库来设计我在项目中使用的任何组件的样式，您可以通过键入</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="d13f" class="mx la it mt b gy my mz l na nb">yarn add styled-components</span></pre><p id="0563" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">因此，首先我声明了我们稍后将使用的任何样式组件，以便创建最终的<code class="fe nc nd ne mt b">ListItem</code>组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">声明我们将用来创建ListItem的样式化组件</p></figure><p id="d992" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后，我们继续进行<code class="fe nc nd ne mt b">ListItem</code>的实际实现，可以在下面的代码片段中看到:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ListItem组件</p></figure><p id="70ef" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">正如您很容易理解的那样，该组件接收3个参数(又名props)。</p><p id="140b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nc nd ne mt b">text</code>、<code class="fe nc nd ne mt b">handleOnChange</code>和<code class="fe nc nd ne mt b">selected</code>。<code class="fe nc nd ne mt b">text</code> prop是将显示在复选框旁边的字符串，<code class="fe nc nd ne mt b">handleOnChange</code>是在复选框的<code class="fe nc nd ne mt b">onChange</code>事件上被调用的回调函数，最后<code class="fe nc nd ne mt b">selected</code>是表示复选框是否被选中的布尔值。</p><p id="c496" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">最终的组件应该是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/8450442a0012369b7af51cef60749a26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*SdvRBEEWQ1AcGq9s7Umtpg.png"/></div></figure><p id="bb40" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在我们可以移动到项目的<code class="fe nc nd ne mt b">App.tsx</code>文件来绘制ListItem组件的列表，并看看如何一次性处理它们。</p><h2 id="1e38" class="mx la it bd lb ni nj dn lf nk nl dp lj ma nm nn ll me no np ln mi nq nr lp ns bi translated">呈现和处理复选框</h2><p id="5a46" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">首先，在<code class="fe nc nd ne mt b">App.tsx</code>文件中，我们声明了我们需要的所有依赖项:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">声明依赖关系</p></figure><p id="8b65" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后我们声明<code class="fe nc nd ne mt b">state</code>，它包含一个名为selections的数组。该数组将保存在任何给定时间选择的所有选项。我们还声明了一个常量，名为options，包含复选框列表的所有选项(字符串格式)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="8935" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后，我们声明并实现一个函数，返回复选框列表。这是在<code class="fe nc nd ne mt b">Array.map()</code>函数的宝贵帮助下实现的，该函数将一个<code class="fe nc nd ne mt b">ListItem</code>对象映射到包含在<code class="fe nc nd ne mt b">options</code>数组中的每个对象。为了避免错误，<code class="fe nc nd ne mt b">ListItem</code>组件的列表必须嵌套在div或React片段组件中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">checkboxItems()函数</p></figure><p id="cb67" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">正如您所看到的，我们传递了一个键选项(第6行)，我们不需要它或者在任何地方使用它，但是，当我们使用输入组件时，设置键选项是一个很好的实践。</p><p id="ad2d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">此外，我们用当前选项设置文本属性。</p><p id="755a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">最后，我们将<code class="fe nc nd ne mt b">ListItem</code>的<code class="fe nc nd ne mt b">handleOnChange</code>函数设置为<code class="fe nc nd ne mt b">handleCheckBoxChange</code>函数，将选项作为参数传递，如果当前选项包含在选择状态数组中，我们还将所选属性设置为true，如果不包含，则设置为false。</p><h2 id="75ad" class="mx la it bd lb ni nj dn lf nk nl dp lj ma nm nn ll me no np ln mi nq nr lp ns bi translated">handleCheckboxChange函数如何工作</h2><p id="5613" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><code class="fe nc nd ne mt b">handleCheckboxChange(key: string)</code>函数是实际处理和更新复选框状态的函数。它出现在下面的代码片段中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">handleCheckboxChange(key:string)函数</p></figure><p id="1263" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">当一个复选框的值已经改变，关键参数被设置为相应的选项时，该函数被调用，试图找到刚刚改变的选项已经包含在<code class="fe nc nd ne mt b">state.selections</code>数组中。</p><p id="a23f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果找到(<code class="fe nc nd ne mt b">find &gt; -1</code>)，则意味着该复选框在之前的状态下被选中，现在用户取消选中/取消选中它，因此该功能通过将其从选择数组中移除而继续。</p><p id="2197" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">否则(第6行)，当前选项在之前的状态中没有被选中，现在用户只是选中了它，所以函数将它附加到<code class="fe nc nd ne mt b">state.selections</code>数组中。</p><h2 id="d4ef" class="mx la it bd lb ni nj dn lf nk nl dp lj ma nm nn ll me no np ln mi nq nr lp ns bi translated">把所有的放在一起</h2><p id="5e18" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在我们已经实现了复选框背后的业务逻辑，是时候将它们放在一起并呈现在页面中了。所以在App组件的return语句中，我们返回如下内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">把所有的放在一起</p></figure><p id="5769" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">该语句在主应用程序视图中追加复选框列表，还添加了一个段落项，以字符串列表的形式显示当前选择的选项。最终视图应该是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/8bad26a7a7ae23ba8a2ee76a67635dd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ls-kq0qorjVQjbVXn3xRDA.png"/></div></div></figure><p id="7088" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">那都是乡亲们！</p><p id="0f3f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我希望你喜欢这篇文章，你学到了一些有用的东西。完整的项目和代码可以在我的<a class="ae ky" href="https://github.com/petrosDemetrakopoulos/react-multiple-checkboxes" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。</p></div></div>    
</body>
</html>