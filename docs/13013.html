<html>
<head>
<title>Layouting in Jetpack Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jetpack撰写中的布局</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/layouting-in-jetpack-compose-8c16e687bfe5?source=collection_archive---------8-----------------------#2022-07-19">https://betterprogramming.pub/layouting-in-jetpack-compose-8c16e687bfe5?source=collection_archive---------8-----------------------#2022-07-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2c2e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何使用Jetpack Compose在Android中创建布局屏幕</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/35d4000e4dbe714e29d00a0c4e2f8338.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XiQ47IOk3vH2-fma"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@masakaze?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">川上正风</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="23cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Jetpack Compose出现之前，我们使用<code class="fe ls lt lu lv b">LinearLayout</code>、<code class="fe ls lt lu lv b">RelativeLayout</code>、<code class="fe ls lt lu lv b">ConstraintLayout</code>在XML中定义我们的布局。那么我们如何在Jetpack Compose中应用呢？</p><p id="d8dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从我的上一篇文章中，我们学习了Jetpack Compose的基础知识。在本文中，我们将学习如何使用Jetpack Compose创建布局。</p><h1 id="ae3b" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">我们开始吧</h1><p id="27af" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">在本教程中，我们将尝试创建一个简单的应用程序。我们的应用程序将包括2页:</p><ul class=""><li id="544f" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr my mz na nb bi translated">主页:一个页面包含可以无限滚动的产品列表。</li><li id="0ffb" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">详细页面:显示从主页点击的产品详细信息的页面。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/e1a00b01f31a4756426e0652da83d1aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oxPHVAIncLbFMKC00psC_g.png"/></div></div></figure><p id="24dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我在我们的应用程序中的UI架构将是这样的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/d1eb1945b1910c53f705a2f0d74db91e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3xgvwRcDV8rKxs5vzDrtqA.png"/></div></div></figure><p id="b8c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们将忽略<code class="fe ls lt lu lv b">ErrorScreen</code>和<code class="fe ls lt lu lv b">LoadingScreen</code>，因为我们还没有解决如何为Jetpack Compose使用API的问题。以后我会报道的。</p><p id="f787" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的主页看起来会像这样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/83a672bf6551ecd22d24ab8f78d6e61a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zLmFH_uleAXJ1hjMr5YHPA.png"/></div></div></figure><p id="b4fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由此出发，我们可以将它们分成两个可组合的类:</p><ul class=""><li id="b0f0" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr my mz na nb bi translated"><code class="fe ls lt lu lv b">Product Card</code>，包含<code class="fe ls lt lu lv b">Image</code>、<code class="fe ls lt lu lv b">Text</code>为产品名称、<code class="fe ls lt lu lv b">Text</code>为产品描述。</li><li id="0edb" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe ls lt lu lv b">Home Page</code>对于包含众多产品的卡片使用网格，这个类具有滚动能力来使布局滚动。</li></ul><p id="c9c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的详细页面看起来会像这样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/e4909a0b323e1d6a5d4ba25d811c7ca5.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/1*ObV9Ayb31LnCWbjdGjgOjg.gif"/></div></figure><p id="5dff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">至于详细页面，我们可以将它们分成3个可组合的类:</p><ul class=""><li id="7e46" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr my mz na nb bi translated"><code class="fe ls lt lu lv b">Product Header</code>，包含<code class="fe ls lt lu lv b">Image</code>，<code class="fe ls lt lu lv b">Text</code>为产品名称，<code class="fe ls lt lu lv b">Text</code>为产品创建者。</li><li id="7703" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe ls lt lu lv b">Product Image Carousel</code>，用于制作一个包含图像列表的旋转木马。</li><li id="c5c6" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe ls lt lu lv b">Product Detail Page</code>，包含产品标题、产品图像转盘和使用<code class="fe ls lt lu lv b">Text</code>的描述文本。</li></ul><h1 id="2578" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">让我们从主页开始</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/83a672bf6551ecd22d24ab8f78d6e61a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zLmFH_uleAXJ1hjMr5YHPA.png"/></div></div></figure><p id="9497" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们开始为<code class="fe ls lt lu lv b">Product Card</code>创建一个类。我称之为<code class="fe ls lt lu lv b">ProductCard.kt</code>。</p><p id="2a6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将代码更改为:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="52aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Jetpack Compose中，我们不使用<code class="fe ls lt lu lv b">LinearLayout</code>，而是使用<code class="fe ls lt lu lv b">Row</code>或<code class="fe ls lt lu lv b">Column</code>来水平或垂直排列可组合的函数。</p><blockquote class="nn no np"><p id="5216" class="kw kx nq ky b kz la jr lb lc ld ju le nr lg lh li ns lk ll lm nt lo lp lq lr ij bi translated">Compose可以有效地处理嵌套布局，这使它们成为设计复杂UI的一个好方法。这是对Android视图的改进，在Android视图中，出于性能原因，需要避免嵌套布局。</p></blockquote><p id="efc2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样，我们可以很容易地在<code class="fe ls lt lu lv b">ProductCard.kt</code>中安排可组合的功能。请记住，我们可以水平或垂直排列<code class="fe ls lt lu lv b">Row</code>或<code class="fe ls lt lu lv b">Column</code>的内容对齐方式。</p><p id="34bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的例子中，根据我的要求，我希望<code class="fe ls lt lu lv b">Column</code>中的内容水平居中对齐。所以在<code class="fe ls lt lu lv b">Column</code> <em class="nq">中我加了</em> <code class="fe ls lt lu lv b">horizontalAlignment = Alignment.CenterHorizontally</code>。</p><p id="1ea4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，请记住在您创建的每个可组合函数中添加一个修饰符参数，以便让外部函数安排如何放置可组合函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="8b23" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样，如果我调用这个函数，我可以修改<code class="fe ls lt lu lv b">ProductCard.kt</code>中的<code class="fe ls lt lu lv b">Column</code>修饰符。</p><p id="e7a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，在<code class="fe ls lt lu lv b">Column</code>中，我使用了两个可组合的函数。<code class="fe ls lt lu lv b">Image</code>和<code class="fe ls lt lu lv b">Text</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="216d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该图像将调用可绘制资源中的<code class="fe ls lt lu lv b">ic_launcher_foreground</code>。我们可以用边框的颜色、形状和粗细来修改大小、形状和边框。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="1a8d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于<code class="fe ls lt lu lv b">Text</code>，他们每个人都在使用文本，他们的最大行数，以及如果他们的文本行数达到最大值时如何处理他们的文本。我也修改他们的字体大小和字体粗细。</p><p id="6ab8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，我添加了<code class="fe ls lt lu lv b">stringResource</code>以使它们引用资源文件中的<code class="fe ls lt lu lv b">string.xml</code>。打开<code class="fe ls lt lu lv b">string.xml</code>并添加这个。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="fb0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果应该是这样的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/f02363191affb03283d529ab4efa0143.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3tsUrzvFJz4MZqmhCWjHOA.png"/></div></div></figure><p id="eee5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在<code class="fe ls lt lu lv b">Product Card</code>准备实施了。</p><p id="2c14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将实现主页。主页和屏幕在同一层。所以我们将为主页创建<code class="fe ls lt lu lv b">HomeScreen.kt</code>。</p><p id="8927" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe ls lt lu lv b">HomeScreen.kt</code>。像这样放置代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="4bd4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，在我解释我的代码之前，我必须提醒你，因为<code class="fe ls lt lu lv b">HomeScreen.kt</code> <em class="nq"> </em>是一个可组合的函数，所以你必须在<code class="fe ls lt lu lv b">HomeScreen.kt</code> <em class="nq">中添加一个参数修饰符。</em></p><p id="02dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将让引用<code class="fe ls lt lu lv b">HomeScreen</code>的其他函数修改<code class="fe ls lt lu lv b">HomeScreen</code>的修饰符。</p><p id="0d1f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Jetpack Compose存在之前，我们使用<code class="fe ls lt lu lv b">RecycleView</code>来启用滚动功能，并让<code class="fe ls lt lu lv b">RecycleView</code>中的视图自行循环，这样即使视图很多，也能使我们的性能应用程序更快，使<code class="fe ls lt lu lv b">RecycleView</code>适合在屏幕上包含列表视图。</p><p id="03f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Jetpack Compose中，我们不使用<code class="fe ls lt lu lv b">RecycleView</code>。我们用的是<code class="fe ls lt lu lv b">LazyColumn</code>或者<code class="fe ls lt lu lv b">LazyRow</code>。好处和<code class="fe ls lt lu lv b">Recycleview</code>一样。区别在于<code class="fe ls lt lu lv b">LazyColumn</code>和<code class="fe ls lt lu lv b">LazyRow</code>是一个可组合函数，这使得它适合在其他可组合函数中实现。</p><p id="9131" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于需求，因为我想要一个可以垂直滚动的网格，所以我使用了<code class="fe ls lt lu lv b">LazyVerticalGrid</code> <em class="nq">。</em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="ea30" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe ls lt lu lv b">LazyVerticalGrid</code>里面，我把网格做成了两列，纵向和横向都有一个空格。内容本身是我之前创建的8 <code class="fe ls lt lu lv b">ProductCard</code>。</p><p id="d86a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果应该是这样的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/27fb5c3ed1caa0d22395daf83ec66b58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VNxrvUAEgVxW-rdYmFEW7Q.png"/></div></div></figure><p id="5e01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在基于我的架构，<code class="fe ls lt lu lv b">HomeScreen.kt</code>被<code class="fe ls lt lu lv b">HomeFragment.kt</code>调用。在<code class="fe ls lt lu lv b">HomeFragment.kt</code>中，我声明了一个名为<code class="fe ls lt lu lv b">Surface</code>的可组合函数。</p><p id="aa96" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了这个功能，我可以在明暗模式下使用预览。</p><p id="b20f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，我使用<code class="fe ls lt lu lv b">modifier.fillMaxSize()</code>来表示它们的屏幕大小与设备大小的关系。<code class="fe ls lt lu lv b">HomeFragment.kt</code> <em class="nq"> </em>中的结果应该是这样的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/c9679e5ba830d4f45594efa213487303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EjQWJ-P-0w_2F0mlzvuDYw.png"/></div></div></figure><p id="870e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">也许我们可以给一点点的填充，我们将在<code class="fe ls lt lu lv b">LazyVerticalGrid</code> <em class="nq"> </em>处<em class="nq"> </em> <code class="fe ls lt lu lv b">HomeScreen.kt</code>处添加填充:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/0eba43e80d1d2a2dc1d8e3244551affc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yZcvsZJEqJVPRmVPjs-mPg.png"/></div></div></figure><p id="3ed8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们继续之前，让我们在<code class="fe ls lt lu lv b">HomeFragment.kt</code>中添加一个参数修饰符，因为<code class="fe ls lt lu lv b">HomeFragment</code>也是一个可组合的函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="64c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在回到网格，记住我们总是可以通过改变单元格中的数字来修改我们有多少列网格。</p><p id="4564" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事实上，我们在任何设备中都有不同的高度和重量。我们必须制作一个动态屏幕。由于现在列网格仍然是静态的，我们可以根据设备的重量大小将列网格的状态更改为动态。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="5f49" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是了。现在，如果我们增加或减少屏幕设备的重量大小，我们可以动态地调整列网格。</p><p id="1649" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我只需增加<code class="fe ls lt lu lv b">HomeScreen.kt</code>中的<code class="fe ls lt lu lv b">ProductCard</code>计数项，比如说60:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="cba5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来看看<code class="fe ls lt lu lv b">HomeFragment.kt</code>中的预告:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/83a672bf6551ecd22d24ab8f78d6e61a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zLmFH_uleAXJ1hjMr5YHPA.png"/></div></div></figure><p id="38b7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们滚动它，点击交互模式或这个符号:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/b96dd187e2af6c7e177b630404b935db.png" data-original-src="https://miro.medium.com/v2/resize:fit:108/format:webp/1*FIcIsSyn4cXRfreK3BgNnw.png"/></div></figure><p id="0cb6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">滚动时，我们的应用程序应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/7a5b7ebf133651809914bfa0fac7b8fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/1*G0fVmjreP0pa8LEIycxjHg.gif"/></div></figure></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><h1 id="e984" class="lw lx iq bd ly lz oh mb mc md oi mf mg jw oj jx mi jz ok ka mk kc ol kd mm mn bi translated">现在让我们继续详细页面</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/e4909a0b323e1d6a5d4ba25d811c7ca5.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/1*ObV9Ayb31LnCWbjdGjgOjg.gif"/></div></figure><p id="aeb3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们将构建一个产品标题。创建<code class="fe ls lt lu lv b">ProductHeader.kt</code> <em class="nq">，</em>并复制下面的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="a33c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在你注意到有<code class="fe ls lt lu lv b">ConstraintLayout</code>。它也是可组合函数的一部分。要使用<code class="fe ls lt lu lv b">ContraintLayout</code>，只需将它添加到composable函数中即可。但是之后，你至少要把这些代码放在这里。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="88d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该功能作为用于<code class="fe ls lt lu lv b">ContraintLayout </code>目的的引用容器。将其视为可组合函数的id。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="2109" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们只需创建一个名为<code class="fe ls lt lu lv b">photoAvatar</code> <em class="nq">、</em>的引用，然后通过将它放置在修改器中将其应用到可组合函数，然后使用<code class="fe ls lt lu lv b">linkTo</code> <em class="nq">来控制它。</em></p><p id="2160" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了更好的解释<code class="fe ls lt lu lv b">ConstraintLayout</code>，你可以参考<a class="ae kv" href="https://developer.android.com/jetpack/compose/layouts/constraintlayout" rel="noopener ugc nofollow" target="_blank">这里的</a>。</p><p id="5def" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于<code class="fe ls lt lu lv b">R.string.product_creator_placeholder</code> <em class="nq">，</em>字符串内容为<code class="fe ls lt lu lv b">Creator Product</code>。请随意在<code class="fe ls lt lu lv b">string.xml</code>中添加此文本</p><p id="7cc8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在预览应该是这样的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/2095048b3c3f38843a90b6204d1a6549.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*ctDHdbfQMSEGos6UdIdv4Q.png"/></div></figure><p id="8e1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来是<code class="fe ls lt lu lv b">Product Image Carousel</code> <em class="nq">。</em>创建<code class="fe ls lt lu lv b">ProductImageCarousel.kt</code>，复制下面的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="80a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最终目标是制作图像轮播，所以我们利用这个优势，从<code class="fe ls lt lu lv b">accompanist</code>库中放置<code class="fe ls lt lu lv b">HorizontalPager</code> <em class="nq"> </em>，该库能够允许用户向左或向右翻转他们的内容。基本上，这是一个旋转木马能力。</p><p id="2d75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于传呼机和伴奏库的参考，可以参考下面。</p><div class="on oo gp gr op oq"><a href="https://google.github.io/accompanist/pager/" rel="noopener  ugc nofollow" target="_blank"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd ir gy z fp ov fr fs ow fu fw ip bi translated">向导伴奏者</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">为Jetpack Compose提供分页布局的库。如果你以前用过安卓的，它有类似的…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">google.github.io</p></div></div><div class="oz l"><div class="pa l pb pc pd oz pe kp oq"/></div></div></a></div><p id="760a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">HorizontalPager</code> <em class="nq"> </em>目前<em class="nq"> </em>还在实验中。也许在将来，会有一个稳定的API。但是现在，我们将使用<code class="fe ls lt lu lv b">@OptIn(ExperimentalPagerApi::class)</code>。</p><p id="4916" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，将<code class="fe ls lt lu lv b">HorizontalPager</code>中的状态放置为<code class="fe ls lt lu lv b">val state = rememberPagerState()</code>，以记住<code class="fe ls lt lu lv b">HorizontalPager</code>中跨组合的状态。</p><p id="8091" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在<code class="fe ls lt lu lv b">Product Image Carousel</code>的预告应该是这样的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/11bce99421307e19b57913526d814b08.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/1*n-GoBIrZV3Do3xy0gUdUNw.gif"/></div></figure><p id="6b77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们用<code class="fe ls lt lu lv b">R.drawable.ic_launcher_foreground</code> <em class="nq"> </em>作为图像。</p><p id="b685" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将来，这将改为图像的url，而不是<code class="fe ls lt lu lv b">painterResource</code>。关于<em class="nq">页面</em>和图片URL的更多信息，您可以参考<a class="ae kv" href="https://howtodoandroid.com/image-slider-jetpack-compose/" rel="noopener ugc nofollow" target="_blank">这里的</a>。</p><p id="fe03" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在最后但并非最不重要的是，<code class="fe ls lt lu lv b">Product Detail Page</code>。创建一个名为<code class="fe ls lt lu lv b">DetailScreen.kt</code>的类。这将是<code class="fe ls lt lu lv b">Product Detail Page</code>的页面。复制下面的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="322b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们使用<code class="fe ls lt lu lv b">Column</code>来放置<code class="fe ls lt lu lv b">ProductHeader</code>、<code class="fe ls lt lu lv b">ProductImageCarousel</code>和<code class="fe ls lt lu lv b">Text</code>包含相应的描述。由于我希望细节pgae具有滚动能力，我将使用<code class="fe ls lt lu lv b">val scrollState = <em class="nq">rememberScrollState</em>()</code>并将其放在<code class="fe ls lt lu lv b">Column</code>中，因为修改器中的垂直滚动功能只接收<code class="fe ls lt lu lv b">scrollstate</code> <em class="nq"> </em>作为参数。</p><p id="cd48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在<em class="nq"> </em> <code class="fe ls lt lu lv b">string.xml</code> <em class="nq">，</em>中的<code class="fe ls lt lu lv b">R.string.product_description_placeholder</code> <em class="nq"> </em>你可以随意使用长文或者短文。</p><p id="f9b7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们要让<code class="fe ls lt lu lv b">DetailFragment.kt</code>包含<code class="fe ls lt lu lv b">DetailScreen.kt</code> <em class="nq"> </em>来完成<em class="nq">片段</em>的层次。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="b483" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成了。你应该在这里看到预览。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/02c80f31e0e9adb35889e3189babf0d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/1*GU_KSZQBbzEA2GUgwB9aaA.gif"/></div></figure><p id="2cc6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们有了<code class="fe ls lt lu lv b">Home Fragment</code>和<code class="fe ls lt lu lv b">Detail Fragment</code>，每个都包含各自的屏幕。</p><h1 id="9742" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">结论</h1><p id="d825" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">到目前为止，我们已经了解了很多关于Jetpack Compose中布局的知识。</p><p id="db75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以参考这个<a class="ae kv" href="https://developer.android.com/jetpack/compose/layouts" rel="noopener ugc nofollow" target="_blank">链接</a>来获得更多关于Jetpack Compose布局的信息。</p><p id="2380" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在我的<a class="ae kv" href="https://github.com/SkyairOnline/Jetpack-Compose" rel="noopener ugc nofollow" target="_blank"> GitHub这里</a>查看我的代码的完整版本。</p><p id="b285" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在下一篇文章中，我将讲述如何使用Jetpack Compose从<code class="fe ls lt lu lv b">Home Fragment</code>导航到<code class="fe ls lt lu lv b">Detail Fragment</code>。</p><p id="4dbf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在这里看到我的下一篇文章。</p><div class="on oo gp gr op oq"><a rel="noopener  ugc nofollow" target="_blank" href="/navigation-routes-in-jetpack-compose-ce2e0337ed28"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd ir gy z fp ov fr fs ow fu fw ip bi translated">Jetpack中的导航路线构成</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">如何在您的Android应用程序中找到目标片段</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">better编程. pub</p></div></div><div class="oz l"><div class="pf l pb pc pd oz pe kp oq"/></div></div></a></div></div></div>    
</body>
</html>