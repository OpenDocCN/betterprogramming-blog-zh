<html>
<head>
<title>SwiftUI — Interacting With UIkit Part 1: Map View</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI —与UIkit交互第1部分:地图视图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swiftui-interacting-with-uikit-part1-map-view-73b4e1e91e11?source=collection_archive---------7-----------------------#2019-08-25">https://betterprogramming.pub/swiftui-interacting-with-uikit-part1-map-view-73b4e1e91e11?source=collection_archive---------7-----------------------#2019-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2a7b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在SwiftUI应用中包含MapKit功能的示例</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/984bc612bdb535fb85c2ae065b2ce3fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q0B8zToJQvZPJ9bA-a2DNQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@dead____artist?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">捕捉人心。</a> on <a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="aeb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SwiftUI comes与现有的<a class="ae ky" href="https://getuikit.com/" rel="noopener ugc nofollow" target="_blank"> UIkit </a>框架有很好的集成。通过将<code class="fe lv lw lx ly b">UIViewControllers</code>包装到SwiftUI视图中，或者反过来，可以实现SwiftUI与UIKit的交互；将SwiftUI视图嵌入视图控制器。</p><p id="7b23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将向您展示一个如何在SwiftUI应用程序中包含<code class="fe lv lw lx ly b">MapKit</code>功能的例子，包装一个视图控制器。</p><p id="f43e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个演示的目的是创建一个视图，包含一个搜索栏和一个地图视图。用户在搜索栏的某个位置键入；地图搜索检索到的结果列表中的第一个结果将作为大头针添加到地图中。</p><p id="296b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我将展示如何通过为控制器创建一个委托来与外部视图进行交互。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="25bb" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">从视图控制器开始</h1><p id="adec" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">创建一个视图控制器，并以编程方式包含要在视图中显示的所有元素；搜索栏和地图视图:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="4668" class="nh mh it ly b gy ni nj l nk nl">class MapViewController: UIViewController {<br/> var mapView: MKMapView!<br/> <br/> // MARK: - Search<br/> <br/> fileprivate var searchBar: UISearchBar!<br/> fileprivate var localSearchRequest: MKLocalSearch.Request!<br/> fileprivate var localSearch: MKLocalSearch!<br/> fileprivate var localSearchResponse: MKLocalSearch.Response!<br/> <br/> // MARK: - Map variables<br/> <br/> fileprivate var annotation: MKAnnotation!<br/> fileprivate var isCurrentLocation: Bool = false<br/> <br/> var selectedPin: MKPlacemark?</span><span id="89f2" class="nh mh it ly b gy nm nj l nk nl">// MARK: - UIViewController's methods<br/> <br/> override func viewDidLoad() {<br/>  super.viewDidLoad()<br/>  <br/>  mapView = MKMapView()<br/>  <br/>  let leftMargin:CGFloat = 10<br/>                let topMargin:CGFloat = 60<br/>                let mapWidth:CGFloat = view.frame.size.width-20<br/>                let mapHeight:CGFloat = view.frame.size.height - 100<br/>        <br/>                mapView.frame = CGRect(x: leftMargin, y: topMargin, <br/>                      width: mapWidth, height: mapHeight)<br/>  mapView.isZoomEnabled = true<br/>                mapView.isScrollEnabled = true<br/>  self.view.addSubview(mapView)<br/>  <br/>  searchBar = UISearchBar(frame: CGRect(x: 10, y: 0, width: mapWidth, height: 60))<br/>  searchBar.delegate = self<br/>  self.view.addSubview(searchBar)<br/>  <br/>  mapView.delegate = self<br/>  mapView.mapType = .hybrid<br/> }<br/>}</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="bb52" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">映射代理</h1><p id="e390" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><code class="fe lv lw lx ly b">MKMapView</code>对象要求视图控制器符合<code class="fe lv lw lx ly b">MKMapViewDelegate</code>。</p><p id="9580" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，我将只实现用于向地图添加注释的<code class="fe lv lw lx ly b">mapView(<strong class="lb iu">_</strong> mapView: MKMapView, viewFor annotation: MKAnnotation)</code>方法。</p><p id="cee8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，注释会显示一个小<code class="fe lv lw lx ly b">+</code>按钮。例如，我可以用它将地标添加到地标存储库中。我以后再讲。</p><p id="6b6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前，我只是为<code class="fe lv lw lx ly b">savedPin</code>动作保留了一个空的实现。</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="8fd1" class="nh mh it ly b gy ni nj l nk nl">extension MapViewController:MKMapViewDelegate{<br/> <br/> func mapView(_ mapView: MKMapView, viewFor annotation: MKAnnotation) -&gt; MKAnnotationView?{<br/>  guard !(annotation is MKUserLocation) else { return nil }<br/>  let reuseId = "pin"<br/>  var pinView = mapView.dequeueReusableAnnotationView(withIdentifier: reuseId) as? MKPinAnnotationView<br/>  if pinView == nil {<br/>   pinView = MKPinAnnotationView(annotation: annotation, <br/>                                reuseIdentifier: reuseId)<br/>  }</span><span id="c176" class="nh mh it ly b gy nm nj l nk nl">pinView?.pinTintColor = UIColor.orange<br/>  pinView?.canShowCallout = true<br/>  let smallSquare = CGSize(width: 30, height: 30)<br/>  let button = UIButton(frame: CGRect(origin: CGPoint.zero, size: smallSquare))<br/>  <br/>  button.setBackgroundImage(UIImage(systemName: "plus.square"), for: .normal)<br/>  button.addTarget(self, action: #selector(savedPin), for: .touchUpInside)<br/>  <br/>  pinView?.leftCalloutAccessoryView = button<br/>  <br/>  return pinView<br/> }<br/> <br/> <a class="ae ky" href="http://twitter.com/objc" rel="noopener ugc nofollow" target="_blank">@objc</a> func savedPin(){<br/>  <br/> }<br/>}</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="4bf2" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">搜索栏代理</h1><p id="1429" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">搜索栏需要控制器符合<code class="fe lv lw lx ly b">UISearchBarDelegate</code>。</p><p id="7d47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我只实现了<code class="fe lv lw lx ly b">searchBarSearchButtonClicked(_ searchBar: UISearchBar)</code>方法；当用户在搜索栏中键入文本后按enter键时，将执行该操作。</p><p id="1603" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">搜索功能使用<code class="fe lv lw lx ly b">MKLocalSearch</code>通过apple map kit执行搜索，并返回地图项目列表。随后，我从列表中取出第一个，并将一个大头针添加到包含嵌入在该地图项目中的placemark的地图中。</p><p id="1109" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">addPin</code>和<code class="fe lv lw lx ly b">addAnnotation</code>方法有助于从地标创建注释并将其添加到地图中。最后，<code class="fe lv lw lx ly b">showAlert</code>用于在搜索没有任何结果时显示警告。</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="64c0" class="nh mh it ly b gy ni nj l nk nl">// MARK: - UISearchBarDelegate<br/> func searchBarSearchButtonClicked(_ searchBar: UISearchBar) {<br/>  if self.mapView.annotations.count != 0 {<br/>   annotation = self.mapView.annotations[0]<br/>   self.mapView.removeAnnotation(annotation)<br/>  }<br/>  <br/>  localSearchRequest = MKLocalSearch.Request()<br/>  localSearchRequest.naturalLanguageQuery = searchBar.text<br/>  localSearch = MKLocalSearch(request: localSearchRequest)<br/>  localSearch.start { (localSearchResponse, error) -&gt; Void in<br/>   if localSearchResponse == nil {<br/>    return self.showAlert()<br/>   }<br/>   <br/>   guard let mapItem = localSearchResponse?.mapItems.first else {<br/>    return self.showAlert()<br/>   }<br/>   <br/>   let placemark = mapItem.placemark<br/>   <br/>   self.addPin( placemark: placemark)<br/>   self.selectedPin = placemark<br/>  }<br/> }<br/> <br/> func showAlert(){<br/>  let alert = UIAlertController(title: nil, message:"Place not found", preferredStyle: .alert)<br/>  alert.addAction(UIAlertAction(title: "Try again", style: .default) { _ in })<br/>  self.present(alert, animated: true){}<br/> }<br/> <br/> func addPin(placemark: MKPlacemark){<br/>  let annotation = MKPointAnnotation()<br/>  annotation.coordinate = placemark.coordinate<br/>  annotation.title = placemark.name<br/>  <br/>  if let city = placemark.locality,<br/>   let state = placemark.administrativeArea {<br/>    annotation.subtitle = "\(city) \(state)"<br/>  }<br/>  <br/>  addAnnotation(annotation: annotation)<br/> }<br/> <br/> func addAnnotation( annotation:MKPointAnnotation ){<br/>  mapView.addAnnotation(annotation)<br/>  let span = MKCoordinateSpan(latitudeDelta: 0.05, longitudeDelta: 0.05)<br/>  let region = MKCoordinateRegion(center: annotation.coordinate, span: span)<br/>  mapView.setRegion(region, animated: true)<br/> }<br/>}</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="1748" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">与外界互动</h1><p id="c913" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">显然，我不能将在线功能包含在这个控制器中。当在控制器内部执行各种操作时，需要触发将包装并随后嵌入该控制器的视图。</p><p id="0b22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我实现了一个委托协议来与我的<code class="fe lv lw lx ly b">MapViewController</code>交互:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="6fd3" class="nh mh it ly b gy ni nj l nk nl">protocol MapViewDelegate{<br/> func saveLocation(placemark: MKPlacemark)<br/>}</span></pre><p id="a9b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随后，在控制器中添加一个委托变量:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="2914" class="nh mh it ly b gy ni nj l nk nl">var delegate:MapViewDelegate!</span></pre><p id="492f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，实现<code class="fe lv lw lx ly b">savedPin()</code>动作方法来使用这个委托:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="fe67" class="nh mh it ly b gy ni nj l nk nl"><a class="ae ky" href="http://twitter.com/objc" rel="noopener ugc nofollow" target="_blank">@objc</a> func savedPin(){<br/> guard let delegate = delegate, let placemark = selectedPin else { return}<br/> delegate.saveLocation(placemark: placemark)<br/>}</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="6c76" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">控制器的最终实现</h1><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="80d5" class="nh mh it ly b gy ni nj l nk nl">import UIKit<br/>import MapKit</span><span id="2507" class="nh mh it ly b gy nm nj l nk nl">protocol MapViewDelegate{<br/> func saveLocation(placemark: MKPlacemark)<br/>}</span><span id="22fd" class="nh mh it ly b gy nm nj l nk nl">class MapViewController: UIViewController {<br/> <br/> var delegate:MapViewDelegate!<br/> <br/> var mapView: MKMapView!<br/> <br/> // MARK: - Search<br/> <br/> fileprivate var searchBar: UISearchBar!<br/> fileprivate var localSearchRequest: MKLocalSearch.Request!<br/> fileprivate var localSearch: MKLocalSearch!<br/> fileprivate var localSearchResponse: MKLocalSearch.Response!<br/> <br/> // MARK: - Map variables<br/> <br/> fileprivate var annotation: MKAnnotation!<br/> fileprivate var isCurrentLocation: Bool = false<br/> <br/> var selectedPin: MKPlacemark?</span><span id="5d0d" class="nh mh it ly b gy nm nj l nk nl">// MARK: - UIViewController's methods<br/> <br/> override func viewDidLoad() {<br/>  super.viewDidLoad()<br/>  <br/>  mapView = MKMapView()<br/>  <br/>  let leftMargin:CGFloat = 10<br/>        let topMargin:CGFloat = 60<br/>        let mapWidth:CGFloat = view.frame.size.width-20<br/>        let mapHeight:CGFloat = view.frame.size.height - 100<br/>        <br/>        mapView.frame = CGRect(x: leftMargin, y: topMargin, width: mapWidth, height: mapHeight)<br/>  mapView.isZoomEnabled = true<br/>        mapView.isScrollEnabled = true<br/>  self.view.addSubview(mapView)<br/>  <br/>  searchBar = UISearchBar(frame: CGRect(x: 10, y: 0, width: mapWidth, height: 60))<br/>  searchBar.delegate = self<br/>  self.view.addSubview(searchBar)<br/>  <br/>  mapView.delegate = self<br/>  mapView.mapType = .hybrid<br/> }<br/>}<br/> <br/>extension MapViewController:MKMapViewDelegate{<br/> <br/> func mapView(_ mapView: MKMapView, viewFor annotation: MKAnnotation) -&gt; MKAnnotationView?{<br/>  guard !(annotation is MKUserLocation) else { return nil }<br/>  let reuseId = "pin"<br/>  var pinView = mapView.dequeueReusableAnnotationView(withIdentifier: reuseId) as? MKPinAnnotationView<br/>  if pinView == nil {<br/>   pinView = MKPinAnnotationView(annotation: annotation, reuseIdentifier: reuseId)<br/>  }</span><span id="924c" class="nh mh it ly b gy nm nj l nk nl">pinView?.pinTintColor = UIColor.orange<br/>  pinView?.canShowCallout = true<br/>  let smallSquare = CGSize(width: 30, height: 30)<br/>  let button = UIButton(frame: CGRect(origin: CGPoint.zero, size: smallSquare))<br/>  <br/>  button.setBackgroundImage(UIImage(systemName: "plus.square"), for: .normal)<br/>  button.addTarget(self, action: #selector(savedPin), for: .touchUpInside)<br/>  <br/>  pinView?.leftCalloutAccessoryView = button<br/>  <br/>  return pinView<br/> }<br/> <br/> <a class="ae ky" href="http://twitter.com/objc" rel="noopener ugc nofollow" target="_blank">@objc</a> func savedPin(){<br/>  guard let delegate = delegate, let placemark = selectedPin else { return}<br/>  delegate.saveLocation(placemark: placemark)<br/> }<br/>}</span><span id="e95c" class="nh mh it ly b gy nm nj l nk nl">extension MapViewController:UISearchBarDelegate{<br/> // MARK: - UISearchBarDelegate<br/> func searchBarSearchButtonClicked(_ searchBar: UISearchBar) {<br/>  if self.mapView.annotations.count != 0 {<br/>   annotation = self.mapView.annotations[0]<br/>   self.mapView.removeAnnotation(annotation)<br/>  }<br/>  <br/>  localSearchRequest = MKLocalSearch.Request()<br/>  localSearchRequest.naturalLanguageQuery = searchBar.text<br/>  localSearch = MKLocalSearch(request: localSearchRequest)<br/>  localSearch.start { (localSearchResponse, error) -&gt; Void in<br/>   if localSearchResponse == nil {<br/>    return self.showAlert()<br/>   }<br/>   <br/>   guard let mapItem = localSearchResponse?.mapItems.first else {<br/>    return self.showAlert()<br/>   }<br/>   <br/>   let placemark = mapItem.placemark<br/>   <br/>   self.addPin( placemark: placemark)<br/>   self.selectedPin = placemark<br/>  }<br/> }<br/> <br/> func showAlert(){<br/>  let alert = UIAlertController(title: nil, message:"Place not found", preferredStyle: .alert)<br/>  alert.addAction(UIAlertAction(title: "Try again", style: .default) { _ in })<br/>  self.present(alert, animated: true){}<br/> }<br/> <br/> func addPin(placemark: MKPlacemark){<br/>  let annotation = MKPointAnnotation()<br/>  annotation.coordinate = placemark.coordinate<br/>  annotation.title = placemark.name<br/>  <br/>  if let city = placemark.locality,<br/>   let state = placemark.administrativeArea {<br/>    annotation.subtitle = "\(city) \(state)"<br/>  }<br/>  <br/>  addAnnotation(annotation: annotation)<br/> }<br/> <br/> func addAnnotation( annotation:MKPointAnnotation ){<br/>  mapView.addAnnotation(annotation)<br/>  let span = MKCoordinateSpan(latitudeDelta: 0.05, longitudeDelta: 0.05)<br/>  let region = MKCoordinateRegion(center: annotation.coordinate, span: span)<br/>  mapView.setRegion(region, animated: true)<br/> }<br/>}</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="f961" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">包裹控制器</h1><p id="525c" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">现在，让我们将之前创建的视图控制器包装到一个<code class="fe lv lw lx ly b">UIViewControllerRepresentable</code>中，以便稍后在SwiftUI视图中使用。这是一个标准实现，<a class="ae ky" href="https://developer.apple.com/tutorials/swiftui/interfacing-with-uikit" rel="noopener ugc nofollow" target="_blank">遵循苹果的例子</a>。</p><p id="590e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个符合<code class="fe lv lw lx ly b">MapViewDelegate</code>协议的<code class="fe lv lw lx ly b">coordinator</code>类实现了<code class="fe lv lw lx ly b">saveLocation</code>方法(现在只打印)。<code class="fe lv lw lx ly b">makeUIViewController</code>正在从上面创建控制器并返回它。</p><p id="c9dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，<code class="fe lv lw lx ly b">updateUIViewController</code>将<code class="fe lv lw lx ly b">Coordinator</code>作为委托附加到<code class="fe lv lw lx ly b">MapViewController</code>上。</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="ac9c" class="nh mh it ly b gy ni nj l nk nl">struct MapSearchView: UIViewControllerRepresentable {<br/> class Coordinator: NSObject, MapViewDelegate {<br/>  func saveLocation(placemark: MKPlacemark) {<br/>   print("add placemark" )<br/>  }<br/>    }</span><span id="42fb" class="nh mh it ly b gy nm nj l nk nl">func makeCoordinator() -&gt; Coordinator {<br/>  return Coordinator()<br/>    }</span><span id="e668" class="nh mh it ly b gy nm nj l nk nl">func makeUIViewController(context: UIViewControllerRepresentableContext&lt;MapSearchView&gt;) -&gt; MapViewController {<br/>        let mapController = MapViewController()<br/>  <br/>        return mapController<br/>    }</span><span id="d24b" class="nh mh it ly b gy nm nj l nk nl">func updateUIViewController(_ uiViewController: MapViewController,<br/>                                context: UIViewControllerRepresentableContext&lt;MapSearchView&gt;) {<br/>  <br/>  uiViewController.delegate = context.coordinator<br/>    }</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="4fa4" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">使用</h1><p id="8a78" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">现在，让我们在一个示例SwiftUI应用程序中使用这个视图:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="c155" class="nh mh it ly b gy ni nj l nk nl">struct ContentView: View {<br/>    var body: some View {<br/>       MapSearchView()</span><span id="9b37" class="nh mh it ly b gy nm nj l nk nl">   }<br/>}</span></pre><p id="3587" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是我的示例应用程序中控件的外观:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/9697c20f81b7f673795e133110493f58.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*FPsJr6v2SnZyOfzu8dDkUw.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/16179586e014b19608f278c3936365f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/1*aqofbuZALKAVgKyWUuZbkg.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/591be0bb8e7de5a5209a3ee324eb323c.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*w0CUl0e_-UJ7lekJ0Jed-g.png"/></div></figure><p id="561f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你喜欢这个教程，并开始在你的SwiftUI应用中加入<code class="fe lv lw lx ly b">MapKit</code>。</p></div></div>    
</body>
</html>