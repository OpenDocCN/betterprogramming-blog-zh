<html>
<head>
<title>How to Deploy NFT Smart Contracts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何部署NFT智能合同</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-deploy-nft-smart-contracts-9271ce5e91c0?source=collection_archive---------1-----------------------#2021-12-02">https://betterprogramming.pub/how-to-deploy-nft-smart-contracts-9271ce5e91c0?source=collection_archive---------1-----------------------#2021-12-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5284" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">编写和部署NFT智能合同指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/63b118fc892df776c2c1ecb20cad404f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*fnjr5cPmM94rWgto1fIYMw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">NFT sub punk # 41创造了这个系列</p></figure><p id="1ce9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是由四部分组成的NFT创造者系列的第三部分:</p><ol class=""><li id="472b" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp lv lw lx ly bi translated"><a class="ae lz" rel="noopener ugc nofollow" target="_blank" href="/create-your-own-nft-collection-with-python-82af40abf99f"> <em class="ma">用Python创建自己的NFT集合</em> </a></li><li id="0c4c" class="lq lr it kw b kx mb la mc ld md lh me ll mf lp lv lw lx ly bi translated"><a class="ae lz" rel="noopener ugc nofollow" target="_blank" href="/generate-your-nft-metadata-11a878c082b9">T5】创建NFT元数据T7】</a></li><li id="8c7f" class="lq lr it kw b kx mb la mc ld md lh me ll mf lp lv lw lx ly bi translated"><a class="ae lz" rel="noopener ugc nofollow" target="_blank" href="/how-to-deploy-nft-smart-contracts-9271ce5e91c0"> <strong class="kw iu"> <em class="ma">部署NFT智能合约</em> </strong> </a></li><li id="0afb" class="lq lr it kw b kx mb la mc ld md lh me ll mf lp lv lw lx ly bi translated"><a class="ae lz" rel="noopener ugc nofollow" target="_blank" href="/mint-your-own-nfts-with-web3-js-f32f7b1cd8cc"> <em class="ma"> NFT明廷</em> </a></li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mg"><img src="../Images/06c4b313a6206ffbf39cab0798eb70b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y6JnGc7XfD53D1TJVuYMSg.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">NFT创造者系列的第三部分</p></figure><p id="c263" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您想继续编写代码，可以在本系列的第一部分和第二部分中找到必备的代码。</p><h1 id="1a88" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">什么是智能合同？</h1><p id="e616" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">智能合约是一个运行在以太坊区块链上的程序。它的代码和数据位于以太坊区块链的一个特定地址。</p><p id="dab0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">NFT由智能合同驱动，处理可转让性并验证所有权。</p><p id="b1ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你将使用ERC-721标准。这是一个为智能合约提供功能的NFT标准。</p><h1 id="ccbf" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">环境设置</h1><h2 id="5b15" class="ni mm it bd mn nj nk dn mr nl nm dp mv ld nn no mx lh np nq mz ll nr ns nb nt bi translated">魔力</h2><p id="b6af" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">在<a class="ae lz" href="https://alchemy.com/?r=412182baad6a02fd" rel="noopener ugc nofollow" target="_blank">炼金术</a>上创建一个账号。</p><p id="f049" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Alchemy是一个区块链开发者平台，致力于简化以太坊的开发。这使得我们可以跳过许多困难的技术区块链编程。</p><p id="39ab" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">创建您的帐户后，点击“创建应用程序”并填写以下参数:</p><ul class=""><li id="da5f" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp nu lw lx ly bi translated">名称:您的NFT项目的名称</li><li id="d780" class="lq lr it kw b kx mb la mc ld md lh me ll mf lp nu lw lx ly bi translated">环境:暂存</li><li id="b078" class="lq lr it kw b kx mb la mc ld md lh me ll mf lp nu lw lx ly bi translated">链条:以太坊</li><li id="cd5c" class="lq lr it kw b kx mb la mc ld md lh me ll mf lp nu lw lx ly bi translated">网络:Ropsten</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi nv"><img src="../Images/9ec3ca8a1459c1585924a039157932a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qg0KbMGUVuuBseaYf_dBkA.png"/></div></div></figure><p id="5302" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们使用<strong class="kw iu"> Ropsten测试网络</strong>，因为它可以免费使用，非常适合本次培训的目的。</p><h2 id="255b" class="ni mm it bd mn nj nk dn mr nl nm dp mv ld nn no mx lh np nq mz ll nr ns nb nt bi translated">元掩码</h2><p id="8dad" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">你需要一个可以收发交易的数字钱包。</p><p id="7931" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最近最流行的钱包是<a class="ae lz" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank"> Metamask </a>。</p><p id="1abb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请务必切换到“<strong class="kw iu"> Ropsten测试网络</strong>”，因为我们不想按照这个指南花费真正的以太坊。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/a3ca8858affe7526c01a44818fcea91f.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/0*g1il3SMAfoCoAn6X.png"/></div></figure><h2 id="ee50" class="ni mm it bd mn nj nk dn mr nl nm dp mv ld nn no mx lh np nq mz ll nr ns nb nt bi translated">添加以太坊</h2><p id="c7df" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">将智能合同部署到测试网络需要花费ETH。</p><p id="99a9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">幸运的是，你正在测试网络(Ropsten)中运行，这允许你获得假的免费ETH。</p><p id="d1de" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">前往<a class="ae lz" href="https://faucet.ropsten.be/" rel="noopener ugc nofollow" target="_blank"> Ropsten水龙头</a>并输入您的Metamask帐户地址。您的帐户地址应该类似于“0x14C…d0”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi nx"><img src="../Images/d45f69ce6d3e73312c55e72ce2243aca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ADn4Mpvu3xgGFkPt2dzwxQ.png"/></div></div></figure><p id="7039" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">正常情况下，你应该会看到假以太坊出现在你的metamask账号里。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/e9e74e85c74e47056704be412bdd29df.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*q9CRa2sznp_eSVZrihg2BA.png"/></div></figure><h1 id="c88f" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">项目创建</h1><p id="9799" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">创建一个保存所有项目文件的目录。</p><p id="7bb7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在windows搜索中键入“cmd ”,打开命令提示符</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/99361aaf72630d59e40b56593007a1bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*QhwJizcXWrY5UxEl6TxaxA.png"/></div></figure><p id="9de3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用“cd”命令切换到要创建项目文件夹的目录。</p><p id="ce15" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="ma">在命令行中写:</em></p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="04e3" class="ni mm it ob b gy of og l oh oi">cd C:\YOURDIRECTORY</span></pre><p id="8804" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">创建NFT项目文件夹，并切换到该目录。</p><p id="f30d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="ma">在命令行中写:</em></p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="03fc" class="ni mm it ob b gy of og l oh oi">mkdir nft<br/>cd nft</span></pre><p id="7b7c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在项目文件夹中，初始化npm。</p><p id="a0a9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果没有安装NPM: <strong class="kw iu">下载</strong> <a class="ae lz" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> Node.js </strong> </a></p><p id="4db6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="ma">在命令行中写入:</em></p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="968d" class="ni mm it ob b gy of og l oh oi">npm init</span></pre><p id="b46b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">按回车键，然后像我下面做的那样回答:</p><p id="33ad" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="ma">在命令行:</em></p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="d600" class="ni mm it ob b gy of og l oh oi">Package name: (nft-creator)</span><span id="51c2" class="ni mm it ob b gy oj og l oh oi">2version: (1.0.0)</span><span id="616f" class="ni mm it ob b gy oj og l oh oi">3description: My first NFT!</span><span id="c977" class="ni mm it ob b gy oj og l oh oi">4entry point: (index.js)</span><span id="16f8" class="ni mm it ob b gy oj og l oh oi">5test command:</span><span id="a777" class="ni mm it ob b gy oj og l oh oi">6git repository:</span><span id="5154" class="ni mm it ob b gy oj og l oh oi">7keywords:</span><span id="47bb" class="ni mm it ob b gy oj og l oh oi">8author:</span><span id="6fd4" class="ni mm it ob b gy oj og l oh oi">9license: (ISC)</span><span id="330a" class="ni mm it ob b gy oj og l oh oi">10About to write to /Users/thesuperb1/Desktop/my-nft/package.json:</span><span id="7c32" class="ni mm it ob b gy oj og l oh oi">11</span><span id="1703" class="ni mm it ob b gy oj og l oh oi">12{</span><span id="49ca" class="ni mm it ob b gy oj og l oh oi">13  "name": "nft-creator",</span><span id="a1ae" class="ni mm it ob b gy oj og l oh oi">14  "version": "1.0.0",</span><span id="b624" class="ni mm it ob b gy oj og l oh oi">15  "description": "My first NFT!",</span><span id="439b" class="ni mm it ob b gy oj og l oh oi">16  "main": "index.js",</span><span id="17e1" class="ni mm it ob b gy oj og l oh oi">17  "scripts": {</span><span id="f8d9" class="ni mm it ob b gy oj og l oh oi">18    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"</span><span id="45f9" class="ni mm it ob b gy oj og l oh oi">19  },</span><span id="1b87" class="ni mm it ob b gy oj og l oh oi">20  "author": "",</span><span id="84c6" class="ni mm it ob b gy oj og l oh oi">21  "license": "ISC"</span><span id="22b6" class="ni mm it ob b gy oj og l oh oi">22}</span></pre><h1 id="7284" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">安装安全帽</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ok"><img src="../Images/346370df87590d9582137f39a6641fd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1aa0xbSR6y_ieRsYMOLrog.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">建筑工人</p></figure><p id="13f8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Hardhat开发环境有助于在将智能合约部署到活动链之前在本地构建智能合约。想了解更多关于Hardhat的信息，你可以访问他们的<a class="ae lz" href="https://hardhat.org/getting-started/#overview" rel="noopener ugc nofollow" target="_blank">网站</a>。</p><p id="1249" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="ma">运行命令行:</em></p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="d121" class="ni mm it ob b gy of og l oh oi">npm install --save-dev hardhat</span><span id="8b4e" class="ni mm it ob b gy oj og l oh oi">npx hardhat</span></pre><p id="145c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">npx hardhat命令创建一个hardhat项目。</p><p id="cdd0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当被问到:<em class="ma">“你想做什么？”、</em>回答<em class="ma">“创建一个空的hard hat . config . js”</em></p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="a7e2" class="ni mm it ob b gy of og l oh oi">888    888                      888 888               888 888    888                      888 888               888 888    888                      888 888               888 8888888888  8888b.  888d888 .d88888 88888b.   8888b.  888888 888    888     "88b 888P"  d88" 888 888 "88b     "88b 888 888    888 .d888888 888    888  888 888  888 .d888888 888 888    888 888  888 888    Y88b 888 888  888 888  888 Y88b. 888    888 "Y888888 888     "Y88888 888  888 "Y888888  "Y888 <br/>👷 Welcome to Hardhat v2.0.11 👷‍ <br/>? What do you want to do? … <br/>Create a sample project <br/>❯ Create an empty hardhat.config.js <br/>Quit</span></pre><h1 id="a607" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">组织项目</h1><p id="d4cc" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">您创建了两个文件夹:</p><ul class=""><li id="c671" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp nu lw lx ly bi translated"><code class="fe ol om on ob b">Contracts</code>:您的NFT智能合约代码的位置</li><li id="3a5c" class="lq lr it kw b kx mb la mc ld md lh me ll mf lp nu lw lx ly bi translated"><code class="fe ol om on ob b">Scripts</code>:部署脚本并与您的智能合同交互的位置</li></ul><p id="f68c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在命令行中运行以下命令(确保您位于NFT根目录下):</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="aa92" class="ni mm it ob b gy of og l oh oi">mkdir contracts<br/>mkdir scripts</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/0ef0220f28576f813492287a4ba59a52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*flZcqx_jK_SKOccK4b534Q.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">项目结构示例</p></figure><h1 id="dbd1" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">撰写您的智能合同</h1><p id="3265" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">最后，设置完成了！</p><p id="f2a5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们进入编码部分。我使用<a class="ae lz" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VSCode </a>作为我的首选编辑器。</p><p id="d591" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这一部分中，您将在Solidity中编写智能合同。</p><p id="41cb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lz" href="https://docs.soliditylang.org/en/v0.8.10/" rel="noopener ugc nofollow" target="_blank"> Solidity </a>是一种面向对象的高级语言，专门用于实现智能合约。</p><p id="714d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在命令行中运行以下命令:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="a912" class="ni mm it ob b gy of og l oh oi">npm install @openzeppelin/contracts</span></pre><p id="4d02" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将在我们的文件夹中安装<code class="fe ol om on ob b">openzeppelin</code>库。你以后需要这些课程。</p><p id="c587" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在您的编辑器中(例如VScode):</p><p id="a97b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">导航到<code class="fe ol om on ob b">contracts</code>文件夹并创建一个新文件<code class="fe ol om on ob b">MyNFT.sol</code></p><p id="1bff" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将以下代码复制到文件中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="fef9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一位智者曾经告诉我，你不需要重新发明轮子。</p><p id="d185" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，在我们智能合约的顶部，您正在导入三个<a class="ae lz" href="https://openzeppelin.com/" rel="noopener ugc nofollow" target="_blank"> OpenZeppelin </a>智能合约类。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="25ac" class="ni mm it ob b gy of og l oh oi">@openzeppelin/contracts/token/ERC721/ERC721.sol</span></pre><p id="0a38" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">上述导入声明包含ERC-721标准的实现。通过导入这个语句，我们的智能契约继承了ERC-721标准的所有方法。更多信息<a class="ae lz" href="https://eips.ethereum.org/EIPS/eip-721" rel="noopener ugc nofollow" target="_blank">点击这里</a>。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="ddae" class="ni mm it ob b gy of og l oh oi">@openzeppelin/contracts/utils/Counters.sol</span></pre><p id="b5da" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">上述导入声明是必需的，因为您的智能合同需要一个计数器来跟踪制造的NFT的总数，并在我们的新NFT上分配唯一的ID。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="494c" class="ni mm it ob b gy of og l oh oi">@openzeppelin/contracts/access/Ownable.sol</span></pre><p id="a84e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了只允许智能合约的所有者创建NFT，我们导入了<code class="fe ol om on ob b">Ownable.sol</code>。这是通过使用<a class="ae lz" href="https://docs.openzeppelin.com/contracts/3.x/access-control" rel="noopener ugc nofollow" target="_blank">访问控制</a>完成的。如果你想让任何人都能使用你的智能合约制造NFT，删除第10行的单词<code class="fe ol om on ob b">Ownable</code>和第17行的单词<code class="fe ol om on ob b">onlyOwner</code>。)</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="5292" class="ni mm it ob b gy of og l oh oi">constructor() public ERC721 ("MyNFT" , "NFT)</span></pre><p id="4df1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在我们的ERC-721构造函数中，你会注意到我们传递了两个字符串，<code class="fe ol om on ob b">NFTCreator</code>和<code class="fe ol om on ob b">NFTC</code>。第一个变量是智能合约的名称，第二个变量是它的符号。您可以根据自己的喜好随意更改！</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="bdb6" class="ni mm it ob b gy of og l oh oi">mintNFT(address recipient, string memory uri)</span></pre><p id="ebcf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">上述功能允许你铸造一个NFT。两个变量用作输入:</p><ul class=""><li id="a64d" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp nu lw lx ly bi translated"><code class="fe ol om on ob b">address recipient</code>:NFT应发往的地址</li><li id="f4d3" class="lq lr it kw b kx mb la mc ld md lh me ll mf lp nu lw lx ly bi translated"><code class="fe ol om on ob b">string memory tokenURI</code>:NFT元数据的URI(统一资源标识符)。请阅读系列文章的<a class="ae lz" rel="noopener ugc nofollow" target="_blank" href="/generate-your-nft-metadata-11a878c082b9">第2部分，以创建元数据。</a></li></ul><h1 id="3b24" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">连接Metamask、Alchemy和您的项目</h1><p id="19b3" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">您希望创建一个环境文件，在其中可以安全地存储Alchemy API密钥和元掩码私钥。</p><p id="f399" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是需要能够与你的项目相互联系的两个。</p><p id="c625" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在您的项目目录中安装<a class="ae lz" href="https://www.npmjs.com/package/dotenv" rel="noopener ugc nofollow" target="_blank"> dotenv </a>包。这个包允许你从<code class="fe ol om on ob b">.env</code>文件中加载环境变量。</p><p id="b7ef" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在命令行中运行以下命令:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="cbfe" class="ni mm it ob b gy of og l oh oi">npm install dotenv --save</span></pre><p id="6bd1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">创建名为“”的. env文件。env ",并添加以下内容:</p><ul class=""><li id="3d24" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp nu lw lx ly bi translated"><a class="ae lz" href="https://metamask.zendesk.com/hc/en-us/articles/360015289632-How-to-Export-an-Account-Private-Key" rel="noopener ugc nofollow" target="_blank">元掩码私钥</a></li><li id="1857" class="lq lr it kw b kx mb la mc ld md lh me ll mf lp nu lw lx ly bi translated">HTTP Alchemy API URL</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi or"><img src="../Images/0a07d3cc4cbcd4cc4451710ba14290c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SPn65y5pNPytQRcL.gif"/></div></div></figure><p id="82af" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你的。env文件应该如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="55bc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您的项目结构示例:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi os"><img src="../Images/9ded3a3bdbfe0820f276b0d93dc1f466.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4TTUJa7FmknJXgiu71oxtQ.png"/></div></div></figure><h1 id="9b9d" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">安装Ether.js</h1><p id="87da" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">您可以利用Ether.js库进行契约部署。</p><p id="f8ca" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="ma">在命令行中写:</em></p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="6381" class="ni mm it ob b gy of og l oh oi">npm install --save-dev <a class="ae lz" href="http://twitter.com/nomiclabs/hardhat-ethers" rel="noopener ugc nofollow" target="_blank">@nomiclabs/hardhat-ethers</a> "ethers@^5.0.0"</span></pre><h1 id="5e63" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">更新安全帽</h1><p id="af9e" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">许多依赖项已经更新，这要求我们的hardhat.config.js也相应地更新。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><h1 id="527f" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">编辑我们的合同</h1><p id="332b" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">您通过调用“编译”任务来编译合同。</p><p id="31f1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="ma">在命令行中写入:</em></p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="738d" class="ni mm it ob b gy of og l oh oi">npx hardhat compile</span></pre><h1 id="818b" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">编写部署脚本</h1><p id="bab2" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">导航到脚本文件夹并创建一个名为“deploy.js”的文件。</p><p id="3dd8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想知道更多关于具体做了什么的细节，请看这里。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="5816" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">deploy.js中最重要概念的分解:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="2e2f" class="ni mm it ob b gy of og l oh oi">const MyNFT = await ethers.getContractFactory("MyNFT")</span></pre><p id="d0e4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe ol om on ob b">ethers.js</code>中的<code class="fe ol om on ob b">ContractFactory</code>是用于部署新智能契约的抽象，所以这里的<code class="fe ol om on ob b">MyNFT</code>是我们的NFT契约实例的工厂。当使用安全帽-以太插件时，默认情况下<code class="fe ol om on ob b">ContractFactory</code>和<code class="fe ol om on ob b">Contract</code>实例连接到第一个签名者。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="2c2a" class="ni mm it ob b gy of og l oh oi">const myNFT = await MyNFT.deploy()</span></pre><p id="7968" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe ol om on ob b">ContractFactory</code>上调用<code class="fe ol om on ob b">deploy()</code>将启动部署，并返回解析为<code class="fe ol om on ob b">Contract</code>的<code class="fe ol om on ob b">Promise</code>。这个对象为我们的每个智能契约函数提供了一个方法。</p><h1 id="e168" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">准备，就位，起飞！</h1><p id="0ece" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">让我们部署我们的智能合约吧！</p><p id="1884" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在命令行中运行以下命令(确保您位于根目录中):</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="53db" class="ni mm it ob b gy of og l oh oi">npx hardhat run scripts/deploy.js --network ropsten</span></pre><p id="a8cd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您应该会看到以下结果，但地址不同:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="4c92" class="ni mm it ob b gy of og l oh oi">Contract deployed to address: 0x81c587EB0fE773404c473DFQDCQ1327C470eED</span></pre><p id="8c9b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以使用<a class="ae lz" href="https://ropsten.etherscan.io/" rel="noopener ugc nofollow" target="_blank"> Ropsten etherscan </a>查看您部署的合同。</p><p id="3f49" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该事务将类似于以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ot"><img src="../Images/04d0dfa1d7952f51a34d84c194c6d134.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8J7pV-Fc3VPhRTZV27zvzg.png"/></div></div></figure><p id="871f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe ol om on ob b">From</code>字段中，您将看到您的元掩码帐户地址。</p><p id="f809" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe ol om on ob b">To</code>地址中，将显示“合同创建”。</p><p id="36ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以点击“Txn Hash”了解交易的更多详情:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ou"><img src="../Images/460fc2d6f8330a0fc621c67565b7d7d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pHod_40rDJrezKCJ.png"/></div></div></figure><p id="f2da" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">合同现已部署。</p><p id="6301" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在下一篇文章中，您将学习如何使用部署的智能契约铸造您的NFT。</p></div><div class="ab cl ov ow hx ox" role="separator"><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa"/></div><div class="im in io ip iq"><h1 id="ba90" class="ml mm it bd mn mo pc mq mr ms pd mu mv jz pe ka mx kc pf kd mz kf pg kg nb nc bi translated">路标</h1><ol class=""><li id="9b69" class="lq lr it kw b kx nd la ne ld ph lh pi ll pj lp lv lw lx ly bi translated"><a class="ae lz" rel="noopener ugc nofollow" target="_blank" href="/create-your-own-nft-collection-with-python-82af40abf99f"> <em class="ma">用Python创建自己的NFT收藏</em> </a></li><li id="e4dd" class="lq lr it kw b kx mb la mc ld md lh me ll mf lp lv lw lx ly bi translated"><a class="ae lz" rel="noopener ugc nofollow" target="_blank" href="/generate-your-nft-metadata-11a878c082b9"> <em class="ma">创建NFT元数据</em> </a></li><li id="a825" class="lq lr it kw b kx mb la mc ld md lh me ll mf lp lv lw lx ly bi translated"><a class="ae lz" rel="noopener ugc nofollow" target="_blank" href="/how-to-deploy-nft-smart-contracts-9271ce5e91c0"> <strong class="kw iu">部署NFT智能合约</strong> </a></li><li id="a4c1" class="lq lr it kw b kx mb la mc ld md lh me ll mf lp lv lw lx ly bi translated"><a class="ae lz" rel="noopener ugc nofollow" target="_blank" href="/mint-your-own-nfts-with-web3-js-f32f7b1cd8cc"> <em class="ma"> NFT明廷</em> </a></li></ol><h1 id="5aff" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">参考</h1><p id="bf48" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">本教程来源于炼金术团队的以下<a class="ae lz" href="https://ethereum.org/en/developers/tutorials/how-to-write-and-deploy-an-nft/" rel="noopener ugc nofollow" target="_blank">帖子</a>。炼金术团队功不可没，请务必查看！</p><div class="pk pl gp gr pm pn"><a href="https://www.alchemy.com/" rel="noopener  ugc nofollow" target="_blank"><div class="po ab fo"><div class="pp ab pq cl cj pr"><h2 class="bd iu gy z fp ps fr fs pt fu fw is bi translated">炼金术-区块链API和节点服务|以太坊、多边形、流量、Crypto.org+更多</h2><div class="pu l"><h3 class="bd b gy z fp ps fr fs pt fu fw dk translated">炼金术超节点炼金术超节点是应用最广泛的区块链API，用于以太坊，多边形，预言，乐观…</h3></div><div class="pv l"><p class="bd b dl z fp ps fr fs pt fu fw dk translated">www.alchemy.com</p></div></div><div class="pw l"><div class="px l py pz qa pw qb ko pn"/></div></div></a></div><div class="pk pl gp gr pm pn"><a href="https://en.wikipedia.org/wiki/Smart_contract" rel="noopener  ugc nofollow" target="_blank"><div class="po ab fo"><div class="pp ab pq cl cj pr"><h2 class="bd iu gy z fp ps fr fs pt fu fw is bi translated">智能合同-维基百科</h2><div class="pu l"><h3 class="bd b gy z fp ps fr fs pt fu fw dk translated">智能合同是一种计算机程序或交易协议，旨在自动执行、控制或…</h3></div><div class="pv l"><p class="bd b dl z fp ps fr fs pt fu fw dk translated">en.wikipedia.org</p></div></div><div class="pw l"><div class="qc l py pz qa pw qb ko pn"/></div></div></a></div><div class="pk pl gp gr pm pn"><a href="https://ethereum.org/en/" rel="noopener  ugc nofollow" target="_blank"><div class="po ab fo"><div class="pp ab pq cl cj pr"><h2 class="bd iu gy z fp ps fr fs pt fu fw is bi translated">首页| ethereum.org</h2><div class="pu l"><h3 class="bd b gy z fp ps fr fs pt fu fw dk translated">以太坊是数字货币、全球支付和应用的发源地。社区建立了一个…</h3></div><div class="pv l"><p class="bd b dl z fp ps fr fs pt fu fw dk translated">ethereum.org</p></div></div><div class="pw l"><div class="qd l py pz qa pw qb ko pn"/></div></div></a></div></div></div>    
</body>
</html>