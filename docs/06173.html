<html>
<head>
<title>Data Validation in SwiftUI 2.0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI 2.0中的数据验证</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/data-validation-in-swiftui-2-0-790cf6dbe49a?source=collection_archive---------11-----------------------#2020-09-07">https://betterprogramming.pub/data-validation-in-swiftui-2-0-790cf6dbe49a?source=collection_archive---------11-----------------------#2020-09-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2c82" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">看看你需要完全验证用户输入的一些数据的代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b06e62ea40da5ff6bb915efecb10f6d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PnkSywnq-jQphaLg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安德斯·吉尔登在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="e03d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">许多最早的病毒利用依赖于很差的/没有数据验证。事实上，这个问题直到今天仍然存在，开发人员似乎忘记了数据验证。这是一个需要避免的大洞，这并不难做到。有时候做正确的事情是相当枯燥和费时的。</p><p id="6d32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑到这一点，我想我会试着提供一个简单的例子，供您在需要时复制和粘贴。要求是输入一个PIN号，尽管它实际上可以是任何字符串。</p><p id="1ee1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是初稿:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="7b39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是等等，不完整。它不会对您输入的字符数进行任何检查。为此，您只需在<code class="fe lx ly lz ma b">onChange</code>块中再添加一个检查:</p><pre class="kj kk kl km gt mb ma mc md aw me bi"><span id="4250" class="mf mg it ma b gy mh mi l mj mk">if name.count &gt; 6 {<br/>  name.removeLast()<br/>}</span></pre><p id="8493" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将把我们的输入限制在六位数，对我来说这似乎是一个合理的PIN。当然，正如我已经提到的，您可以很容易地扩展/更改它来查看不同的集合。例如，如果您想要字母字符，请将其设为<code class="fe lx ly lz ma b">isLetter</code>。</p><p id="ff68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但在你走之前，我想我们还能做点什么。在此处添加修饰符，将键盘类型更改为数字小键盘，将对齐方式更改为居中，并将框架更改为更适合:</p><pre class="kj kk kl km gt mb ma mc md aw me bi"><span id="3564" class="mf mg it ma b gy mh mi l mj mk">.keyboardType(.numberPad)<br/>.multilineTextAlignment(.center)<br/>.frame(width: 128, height: 32)</span></pre><p id="aa10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并将<code class="fe lx ly lz ma b">TextField</code>更改为这样，以便在获得焦点时替换单词<code class="fe lx ly lz ma b">PIN</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="217a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只是多做了一些调整。通过给<code class="fe lx ly lz ma b">VStack</code>本身添加一个提醒视图修饰符，添加一个提醒以确保信息传达出来，字母不是你所需要的:</p><pre class="kj kk kl km gt mb ma mc md aw me bi"><span id="fab4" class="mf mg it ma b gy mh mi l mj mk">.alert(isPresented: $showAlert) {<br/>  Alert(title: Text("Important message"), message: Text("Numbers Only"), dismissButton: .default(Text("Ok")))<br/>}</span></pre><p id="1320" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并且:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/2a55ec0e4c374ef464a2abbeb5106d82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yv0oVF70vz15S8dq5j0f3g.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">简单PIN数据验证的动画GIF</p></figure><p id="3d95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe lx ly lz ma b">VStack</code>上加一个<code class="fe lx ly lz ma b">onTapGesture</code>(你应该改成<code class="fe lx ly lz ma b">ZStack</code>)，当你点击PIN窗口外的任何地方时，它会关闭键盘。这是你在上面看到的动画GIF的最终代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="e675" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我这里没用<code class="fe lx ly lz ma b">Color.clear</code>是因为没用。不透明度为零的<code class="fe lx ly lz ma b">Color.yellow</code>也没有。我所做的看起来是最好的妥协。</p><p id="0a40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我还在<code class="fe lx ly lz ma b">onEditingChanged</code>开关的假臂上添加了一个<code class="fe lx ly lz ma b">“go verify”</code>，当用户输入他们的PIN码时，它会做一些事情。</p><p id="e703" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">保持冷静，继续编码。</p></div></div>    
</body>
</html>