<html>
<head>
<title>How to Convert Dates Into Chinese Zodiacs in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Swift中将日期转换成中文生肖</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-convert-dates-into-chinese-zodiacs-30ed15e2f2a9?source=collection_archive---------23-----------------------#2020-02-24">https://betterprogramming.pub/how-to-convert-dates-into-chinese-zodiacs-30ed15e2f2a9?source=collection_archive---------23-----------------------#2020-02-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="653e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">将中国日历整合到您的应用程序中</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/50806c19d02717747b74e373ddf34a0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JFkRbPtydOsAQ82j69XcuA.png"/></div></div></figure></div><div class="ab cl kr ks hu kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ij ik il im in"><h1 id="4dad" class="ky kz iq bd la lb lc ld le lf lg lh li jw lj jx lk jz ll ka lm kc ln kd lo lp bi translated">我们需要的工具</h1><ul class=""><li id="12be" class="lq lr iq ls b lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">安装了Swift Playgrounds的iPad，或者</li><li id="8f7d" class="lq lr iq ls b lt mi lv mj lx mk lz ml mb mm md me mf mg mh bi translated">安装了Xcode的Mac电脑。</li></ul></div><div class="ab cl kr ks hu kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ij ik il im in"><h1 id="5611" class="ky kz iq bd la lb lc ld le lf lg lh li jw lj jx lk jz ll ka lm kc ln kd lo lp bi translated">我们需要知道的是</h1><ul class=""><li id="4627" class="lq lr iq ls b lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">对Swift编程的基本理解。</li></ul></div><div class="ab cl kr ks hu kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ij ik il im in"><h1 id="d2f0" class="ky kz iq bd la lb lc ld le lf lg lh li jw lj jx lk jz ll ka lm kc ln kd lo lp bi translated">背景</h1><p id="7d7a" class="pw-post-body-paragraph mn mo iq ls b lt lu jr mp lv lw ju mq lx mr ms mt lz mu mv mw mb mx my mz md ij bi translated">不同文化的日历总是让我着迷。除了我们使用的公历，我从小到大都是用中国历来记录中国和世界各地不同的节日和文化活动。</p><p id="f525" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">中国历法的另一个有趣的方面是它将不同的动物与每年联系在一起，被称为“中国生肖”。</p><p id="f7c6" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">这种联系通常有助于估计另一个朋友或家人的大致年龄，而无需直接询问他们。不同的特征和前景也被认为与每种动物有关。</p><p id="e884" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">十二生肖按照特定的顺序排列:鼠、牛、虎、兔/兔、龙、蛇、马、山羊/绵羊/公羊、猴子、公鸡、狗和猪/野猪。</p><p id="1c56" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">你有没有去过一个中国餐馆，在盛放餐具的餐巾下面，你可能会发现一张纸，上面会根据你的出生年份告诉你哪一个是你的生肖？</p><p id="6264" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">例如，它可能会说，如果你出生在1967年，1979年，1991年，2003年或2015年，你出生在羊年。但是你知道吗，如果你出生在那一年的农历新年之前，你的生肖其实是山羊之前的那一个，是马。</p><p id="ada3" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">这是因为中国的历法和我们使用的历法有点不同步。不是一月1ˢᵗ标志着新的一年的开始，而是中国新年，因此，一个新的十二生肖。</p><p id="ad5f" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">中国新年通常比我们同年的一月1ˢᵗ晚开始，但是我们怎么知道每年的中国新年是什么时候呢？</p><p id="2790" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">根据中国历法的规则，有一个被称为<em class="nf">干知</em>的系统，用于记录每年的流逝。</p><p id="7d89" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">它由两个汉字组成，每年农历新年都会变化，第二个汉字决定了哪种动物与那一年相关联。</p></div><div class="ab cl kr ks hu kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ij ik il im in"><h1 id="9f42" class="ky kz iq bd la lb lc ld le lf lg lh li jw lj jx lk jz ll ka lm kc ln kd lo lp bi translated">开始编码</h1><p id="21a8" class="pw-post-body-paragraph mn mo iq ls b lt lu jr mp lv lw ju mq lx mr ms mt lz mu mv mw mb mx my mz md ij bi translated">首先，我们需要能够将正常日期转换为中国日历日期，然后转换为黄道。</p><p id="21be" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">在Mac上用Xcode创建一个新的游乐场，或者如果你有iPad，使用Swift Playgrounds。</p><p id="c82a" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">为了处理日期和日历，我使用内置的<code class="fe ng nh ni nj b">Calendar</code>和<code class="fe ng nh ni nj b">DateComponents</code>。</p><p id="5459" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">让我们尝试将日期“2020年5月1ˢᵗ”转换成中国日历日期。快速看了一眼prokerala.com，日期是4718年的4ᵗʰ月，9ᵗʰ日。让我们看看如何使用Swift实现这一点。</p><p id="bbaa" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">首先，我们需要一个<code class="fe ng nh ni nj b">DateComponents</code>实例来存储我们的正常日历日期。“五月”是5ᵗʰ月。确保顶部有<code class="fe ng nh ni nj b">import Foundation</code>或<code class="fe ng nh ni nj b">import UIKit</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="09f9" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">接下来，我们需要创建一个<code class="fe ng nh ni nj b">Calendar</code>实例，将标识符指定为“Gregorian”，并从上一步的<code class="fe ng nh ni nj b">DateComponents</code>创建一个日期实例。</p><p id="8de0" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">我们强制打开<code class="fe ng nh ni nj b">normalDate</code>，因为我们知道我们已经提供了创建日期实例所需的日期组件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="1c11" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">接下来，我们需要能够使用<code class="fe ng nh ni nj b">DateFormatter</code>将我们的日期以不同的格式显示为<code class="fe ng nh ni nj b">String</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="a888" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">运行操场，我们可以看到我们的日期打印在控制台正确。没什么特别的。现在，将<code class="fe ng nh ni nj b">DateFormatter</code>的日历更改为中文，让我们以完整的形式显示日期。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="8355" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">再次跑操场，我们会得到类似<code class="fe ng nh ni nj b">Friday, Fourth Month 9, 2020(geng-zi)</code> <strong class="ls ir">的东西。</strong>太好了！我们刚刚将一个正常的日期转换成了中国的日历日期。</p><p id="d161" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">但这只是开始。请注意，打印日期后面跟着“<code class="fe ng nh ni nj b">(geng-zi)</code>”。这就是我们所说的<em class="nf">感指</em>，这也是我们提取生肖信息的地方。</p><p id="536b" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">请注意两个罗马化汉字之间的连字符。连字符的右边是汉字，它会告诉我们某一年的生肖。</p><p id="83de" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">这样，我们就不需要知道特定年份的农历新年是什么时候了。下面是一个表格，显示了这个角色告诉我们的事情。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="de55" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">奇怪的是，这些汉字是作为一个排序系统给12个“地支”命名的，而不是动物本身。</p><p id="8e14" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">这些动物被分配到每年来代表其他人如何看待我们或者我们如何呈现自己。我们可以把这些信息储存在字典里:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="9676" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">接下来，我们从字符串日期中提取分支。如果<code class="fe ng nh ni nj b">chineseDate</code>格式不正确，我们在这里使用<code class="fe ng nh ni nj b">guard</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="1821" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">看起来我们已经具备了将日期转换成中国生肖的所有条件。让我们将所有已编写的代码重构为函数，以便以后可以使用它们。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="0ea9" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">为了测试我们的功能，我们调用<code class="fe ng nh ni nj b">normalDate(fromYear:month:day:)</code>来创建一个<code class="fe ng nh ni nj b">Date</code>实例，并将其传递给<code class="fe ng nh ni nj b">zodiacFrom(date:)</code>。</p><p id="d214" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">为了好玩，让我们举一个1991年的例子，正如我们从餐馆学到的，这一年是羊年。</p><p id="78e4" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">通过快速查找travelchinaguide.com，中国新年发生在1991年的2月15日。如果我们选择晚于那个日期，比如说1991年6月22日，我们是安全的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="f7ea" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">跑操场，我们确实得到了所有小写字母的“山羊”。只是为了好玩，让我们测试一个在中国新年之前但仍在1991年内的日期。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="f487" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">再跑操场，我们就有“马”了。</p><p id="e0f2" class="pw-post-body-paragraph mn mo iq ls b lt na jr mp lv nb ju mq lx nc ms mt lz nd mv mw mb ne my mz md ij bi translated">为了纠正那些餐馆餐具垫，应该说1991年，在2月15日之前出生的人有马作为他们的生肖，在2月15日或之后会有山羊。</p></div><div class="ab cl kr ks hu kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ij ik il im in"><h1 id="7ece" class="ky kz iq bd la lb lc ld le lf lg lh li jw lj jx lk jz ll ka lm kc ln kd lo lp bi translated">由此处</h1><p id="d7f6" class="pw-post-body-paragraph mn mo iq ls b lt lu jr mp lv lw ju mq lx mr ms mt lz mu mv mw mb mx my mz md ij bi translated">看看我做的应用程序，它将人们的生日转换成生肖，存储起来，并根据兼容性进行匹配！</p><div class="nm nn gp gr no np"><a href="https://apps.apple.com/kw/app/my-chinese-zodiacs/id1259902125" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd ir gy z fp nu fr fs nv fu fw ip bi translated">我的中国生肖</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">“我的中国十二生肖”是你找到你和你朋友的中国十二生肖以及他们的…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">apps.apple.com</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od kp np"/></div></div></a></div></div></div>    
</body>
</html>