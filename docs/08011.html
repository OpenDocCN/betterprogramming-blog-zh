<html>
<head>
<title>Labeled Statements in Swift: How To Give Loops a Name</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中的标记语句:如何给循环命名</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/labeled-statements-in-swift-how-to-give-loops-a-name-44e6fd374d9b?source=collection_archive---------9-----------------------#2021-03-15">https://betterprogramming.pub/labeled-statements-in-swift-how-to-give-loops-a-name-44e6fd374d9b?source=collection_archive---------9-----------------------#2021-03-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bce1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解给循环命名的重要性</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/baae2fb3f158a75495ce2daf585bb4c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SFJfpe2DEeGXy2un"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@austinkirk?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">奥斯汀·柯克</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="e288" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我看来，Swift是一种初学者友好的编程语言。</p><p id="5d48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请想一想我们在Swift中拥有/没有的一些东西:</p><ul class=""><li id="bb45" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">我们不必处理指向内存地址的指针。</li><li id="eda7" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">有自动引用计数(ARC ),它负责计算对对象的引用，并在没有引用时自动释放它们。</li><li id="4375" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">可选值迫使我们更加小心地处理可选值，并考虑没有设置可选值的情况。</li><li id="232b" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">等等。</li></ul><p id="0136" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管如此，Swift也有其隐藏的宝藏。最近我在读Swift编程语言<a class="ae kv" href="https://docs.swift.org/swift-book/" rel="noopener ugc nofollow" target="_blank"><em class="mg"/></a>的时候偶然发现了其中的一个:带标签的语句。</p><p id="6cea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本质上，它们允许您命名语句，这在处理循环或<code class="fe mh mi mj mk b">switch</code>语句时会变得很方便。</p><p id="1428" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我将向您展示如何命名您的语句，以及为什么您应该命名它们。</p><p id="f82f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是让我们从标记语句解决的问题开始。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="25b1" class="ms mt iq bd mu mv mw mx my mz na nb nc jw nd jx ne jz nf ka ng kc nh kd ni nj bi translated">如果没有带标签的语句，我们将不得不做什么</h1><p id="8a95" class="pw-post-body-paragraph kw kx iq ky b kz nk jr lb lc nl ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">假设您正在进行公司员工查找。你有某种形式的数据库，你得到按部门分类的所有雇员。</p><p id="af16" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您需要按名称找到一个成员。为了简单起见，我们将忽略两个成员共享相同名称的情况。</p><p id="e072" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以你有一个包含雇员名字的字符串。您马上会想到一个解决方案，用一个<code class="fe mh mi mj mk b">for</code>循环遍历各个部门，在这个循环的内部是另一个<code class="fe mh mi mj mk b">for</code>循环，遍历该部门的成员。</p><p id="f25f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">解决方案可能是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="5025" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以创建一个空白的操场，并进行测试。下面是实际打印到控制台的内容:</p><pre class="kg kh ki kj gt nr mk ns nt aw nu bi"><span id="f0fe" class="nv mt iq mk b gy nw nx l ny nz">We weren't able to find the person E. Neville in Human Resources</span><span id="ac5c" class="nv mt iq mk b gy oa nx l ny nz">The employee was found in Development!</span><span id="09a1" class="nv mt iq mk b gy oa nx l ny nz">We weren't able to find the person E. Neville in Development</span><span id="f2c5" class="nv mt iq mk b gy oa nx l ny nz">We weren't able to find the person E. Neville in Sales</span></pre><p id="c747" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一个日志是因为我们找不到<code class="fe mh mi mj mk b">E</code>而被解雇的。内维尔在人力资源部。第二条语句表明我们在开发部门找到了我们的员工。</p><p id="b235" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，我们仍然触发那个部门的最后一个<code class="fe mh mi mj mk b">print</code>语句。最后一个部门也是如此。即使我们已经找到了我们正在寻找的成员，我们仍然不能停止循环的运行。</p><p id="8a28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要某种形式的取消。</p><p id="495b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在你可以提出这样一个解决方案:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="10a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们使用布尔变量<code class="fe mh mi mj mk b">employeeFound</code>来识别我们是否有匹配。我们可以使用<code class="fe mh mi mj mk b">break</code>来打破内部循环。在我们的变量的帮助下，当我们找到我们的成员时，这个变量变成了<code class="fe mh mi mj mk b">true</code>，我们也打破了外部循环。</p><p id="8313" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这可以帮助我们解决问题，但这并不优雅。我们需要两条<code class="fe mh mi mj mk b">break</code>语句、一条<code class="fe mh mi mj mk b">if</code>语句和一个需要正确更新的变量。</p><p id="12ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以做得更好。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="8773" class="ms mt iq bd mu mv mw mx my mz na nb nc jw nd jx ne jz nf ka ng kc nh kd ni nj bi translated">标签语句如何帮助我们编写简洁的代码</h1><p id="3f52" class="pw-post-body-paragraph kw kx iq ky b kz nk jr lb lc nl ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">现在让我们来看同一个例子，但是这一次，我们将使用带标签的语句:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="8bd2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你能看到我在那里做了什么吗？</p><p id="9702" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我给了外循环一个标签(<code class="fe mh mi mj mk b">departmentLoop</code>)。这个标签不需要<code class="fe mh mi mj mk b">var</code>或<code class="fe mh mi mj mk b">let</code>关键字。它可以只是一个后跟冒号的名称。从那时起，我们可以用它来打破这个循环。</p><p id="bc73" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们在<code class="fe mh mi mj mk b">employee</code>循环中使用它来告诉Swift我们不想脱离内部循环，这将是默认行为。相反，该<code class="fe mh mi mj mk b">break</code>命令旨在脱离外部循环。</p><p id="08f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样就不需要在外部(<code class="fe mh mi mj mk b">department</code>)循环的每次迭代结束时添加一个额外的<code class="fe mh mi mj mk b">if</code>语句。我们也不需要跟踪另一个变量，并找到合适的位置来改变它。</p><p id="be94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相反，我们可以非常清楚地传达我们想要摆脱什么。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="a32e" class="ms mt iq bd mu mv mw mx my mz na nb nc jw nd jx ne jz nf ka ng kc nh kd ni nj bi translated">带标签语句的其他用例</h1><p id="3574" class="pw-post-body-paragraph kw kx iq ky b kz nk jr lb lc nl ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">上面的例子描述了为什么我们想要和需要带标签的语句。它允许我们编写更少的代码，可读性更好。</p><p id="1df9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，我知道还有两个用例:</p><ol class=""><li id="5105" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr ob ly lz ma bi translated">在循环中使用<code class="fe mh mi mj mk b">continue</code>命令。</li><li id="8e07" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr ob ly lz ma bi translated">结合使用<code class="fe mh mi mj mk b">break</code>命令和<code class="fe mh mi mj mk b">switch</code>语句。</li></ol><p id="c557" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们简单回顾一下。</p><p id="8743" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mh mi mj mk b">continue</code>命令也用于循环。与<code class="fe mh mi mj mk b">break</code>命令相反，它不会跳出循环并完全停止执行。它只是开始另一次迭代，而不执行后面的任何代码。</p><p id="bdaf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">想象一下，我们有一个人在多个部门工作。同样，我们将忽略在同一个部门中多次出现相同名称的情况。</p><p id="9aa8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">代码可能是这样的(<code class="fe mh mi mj mk b">\\ ...</code>标记应该保持代码和以前一样的地方):</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="11e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们的控制台输出如下所示:</p><pre class="kg kh ki kj gt nr mk ns nt aw nu bi"><span id="bde8" class="nv mt iq mk b gy nw nx l ny nz">We weren't able to find the person E. Neville in Human Resources</span><span id="78ce" class="nv mt iq mk b gy oa nx l ny nz">The employee was found in Development!</span><span id="106c" class="nv mt iq mk b gy oa nx l ny nz">The employee was found in Sales!</span></pre><p id="cdd9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以通过简单地使用一个没有标记语句的<code class="fe mh mi mj mk b">break</code>语句来达到同样的效果。然而，如果你有更多的循环，这可能会变得很方便。</p><p id="9d83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，对于<code class="fe mh mi mj mk b">switch</code>语句，您还可以使用带标签的语句来摆脱以下情况:</p><ul class=""><li id="c877" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">你想跳出一个包含循环的外层<code class="fe mh mi mj mk b">switch</code>语句。</li><li id="8f1e" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">您想要跳出包含一个<code class="fe mh mi mj mk b">switch</code>语句的外部循环。</li><li id="640f" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">您想要从包含另一个<code class="fe mh mi mj mk b">switch</code>语句的外部<code class="fe mh mi mj mk b">switch</code>语句中分离出来。</li></ul><p id="4e36" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来看一个<code class="fe mh mi mj mk b">switch</code>例子的代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="ad59" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们想找到我们的名叫幸运的狗。我们在一个循环中有一个<code class="fe mh mi mj mk b">switch</code>在另一个<code class="fe mh mi mj mk b">switch</code>里面。</p><p id="14b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们发现一种动物属于物种<code class="fe mh mi mj mk b">dog</code>并被命名为幸运时，我们不仅想要打破内部开关和外部开关，而且想要完全脱离循环。</p><p id="4954" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们使用带标签的语句时，这就是一行程序。日志如下所示:</p><pre class="kg kh ki kj gt nr mk ns nt aw nu bi"><span id="c58b" class="nv mt iq mk b gy nw nx l ny nz">It was a different animal of species: cat</span><span id="815c" class="nv mt iq mk b gy oa nx l ny nz">It was a dog but a different one</span><span id="3cde" class="nv mt iq mk b gy oa nx l ny nz">We found our dog Lucky!</span></pre><p id="4da0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果在意料之中。我们在第三次循环迭代中找到了Lucky，此后就没有更多的迭代了。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="3ed8" class="ms mt iq bd mu mv mw mx my mz na nb nc jw nd jx ne jz nf ka ng kc nh kd ni nj bi translated">结论</h1><p id="26da" class="pw-post-body-paragraph kw kx iq ky b kz nk jr lb lc nl ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">正如您已经知道的那样，带标签的语句是用于非常特殊情况的工具。你可能不会每天甚至每周都需要它们。</p><p id="9197" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，作为开发人员，我们的工作是在我们的工具箱中拥有各种各样的工具，并为手头的问题选择最好的一个。</p><p id="850c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们想要跳出外部循环或<code class="fe mh mi mj mk b">switch</code>语句时，带标签的语句允许我们编写简洁的代码。它们易于使用，也应该成为你工具带的一部分。</p><p id="2970" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这也让我们看到，Swift有一些我们很少看到，甚至可能不知道的隐藏宝藏。所以永远不要停止学习这门伟大的语言所提供的东西。</p><p id="e27b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您的宝贵时间！</p></div></div>    
</body>
</html>