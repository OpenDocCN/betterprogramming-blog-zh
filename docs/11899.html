<html>
<head>
<title>I Built A GitHub Action To Fight The Multitasking Habit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我构建了一个GitHub动作来对抗多任务习惯</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/i-built-a-github-action-to-fight-the-multitasking-habit-563bd22dab54?source=collection_archive---------16-----------------------#2022-04-25">https://betterprogramming.pub/i-built-a-github-action-to-fight-the-multitasking-habit-563bd22dab54?source=collection_archive---------16-----------------------#2022-04-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7d12" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以及如何创造你自己的生活</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/598b6a1a5add8177507a3e0764ab6389.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZMHijGBFRW0BiWH1675lRA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">标题基于<a class="ae ky" href="http://www.freepik.com" rel="noopener ugc nofollow" target="_blank"> pch.vector </a>的设计</p></figure><p id="9344" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对我来说，一心多用就像盐一样。适量可以改善你的膳食，但过量会使它不可食用和不健康。这就是为什么很难做对。</p><blockquote class="lv"><p id="c2bc" class="lw lx it bd ly lz ma mb mc md me lu dk translated">"多任务处理——一种做两倍于你应该做的事，而只做你能做的一半的艺术."</p></blockquote><p id="28c3" class="pw-post-body-paragraph kz la it lb b lc mf ju le lf mg jx lh li mh lk ll lm mi lo lp lq mj ls lt lu im bi translated">滥用多任务处理是非常诱人的。很多开发者都是这样。我不怪他们。它给人一种你在同时做几件事情时进步很快的错觉。这可能会产生相反的效果。突然，你有更多的评论和拉请求要处理。您可以独占工作堆栈，使其进展缓慢。</p><p id="9bf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">已经证明，从一个任务切换到另一个任务需要一些时间。这是生产率的损失。当恢复先前暂停的任务时，您可能会完全改变上下文。当你热身的时候，你可能需要对另一个拉取请求提出一些意见。</p><p id="73e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有许多方法和技术可以解决这个问题。然而，我错过了GitHub CI空间中的任何工具。这就是为什么我决定创建一个GitHub动作。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="43ee" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">PR限制Github动作</h1><p id="6aab" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">我有一个非常简单的想法。如果我们可以限制任何开发者可以打开的PRs的数量，我们将会阻止繁重的多任务处理。我在GitHub上找不到任何工具。你唯一能做的就是按作者过滤PRs，并被动地监控它。</p><p id="9088" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们人类非常不擅长监控和做重复性的工作。我创建了一个简单的Github动作来为我们做这件事。由于两个项目或团队不同，我添加了一些配置参数。</p><p id="db2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它是如何工作的？它检查PRs的作者是否已达到其<code class="fe no np nq nr b">active</code> PRs的限制。如果是这样，它会自动关闭公关，并留下评论。</p><h2 id="d60c" class="ns ms it bd mt nt nu dn mx nv nw dp nb li nx ny nd lm nz oa nf lq ob oc nh od bi translated">参数</h2><ul class=""><li id="ae3f" class="oe of it lb b lc nj lf nk li og lm oh lq oi lu oj ok ol om bi translated"><strong class="lb iu"> MAX_PRS </strong> —每个GitHub Actor允许的最大pr数</li><li id="17dc" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated"><strong class="lb iu">排除</strong> —我们可能想要跳过检查的任何作者。一个明显的例子是Dependabot。</li><li id="6f4b" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated"><strong class="lb iu">GITHUB _ TOKEN</strong>—GITHUB令牌</li></ul><p id="a2da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该动作在GitHub的市场中列出</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/230860eb2bed43aa68f7432377bd3028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pm20GKXR9moHS9gpU6yQ6w.png"/></div></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="e152" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">未来的增强</h1><p id="8079" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">这一行动仍处于早期阶段。未来的版本中可能会有许多新特性。</p><ul class=""><li id="dcf3" class="oe of it lb b lc ld lf lg li ot lm ou lq ov lu oj ok ol om bi translated"><strong class="lb iu"> DISABLE_COMMENTS </strong> —选择退出对公关行为的评论的选项。</li><li id="91a2" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated"><strong class="lb iu">INCLUDE _ DRAFT</strong>——在<code class="fe no np nq nr b">MAX_PRS</code>的限制范围内计算草稿PRs的选项。</li><li id="6945" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated"><strong class="lb iu">消息</strong> —用户达到最大PRs数量时显示的自定义消息。</li></ul><p id="382e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有任何其他的想法或者未来你对这个建筑感兴趣，请在这里留下你对知识库<a class="ae ky" href="https://github.com/dioxmio/ga_pr-limit" rel="noopener ugc nofollow" target="_blank">的评论。我也愿意为改善应用程序的任何贡献。</a></p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="4396" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">如何轻松构建您的</h1><p id="9b42" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">构建GitHub动作非常简单。要开始，你只需要一个GitHub动作。</p><p id="763c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您需要遵循哪些步骤:</p><ul class=""><li id="c719" class="oe of it lb b lc ld lf lg li ot lm ou lq ov lu oj ok ol om bi translated">选择一个独特的<code class="fe no np nq nr b">app name</code></li><li id="218d" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">创建公共回购</li><li id="eca7" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">一个描述你的GitHub动作的<code class="fe no np nq nr b">action.yml</code></li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ow ox l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">有效Action.yml文件的示例</p></figure><ul class=""><li id="162a" class="oe of it lb b lc ld lf lg li ot lm ou lq ov lu oj ok ol om bi translated">执行操作的JavaScript文件</li><li id="325a" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">消耗GitHub的<code class="fe no np nq nr b">rest</code>或<code class="fe no np nq nr b">graphql</code>端点</li><li id="80b8" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated"><code class="fe no np nq nr b">@actions/core</code>和<code class="fe no np nq nr b">actions/github</code>套餐</li></ul><p id="100b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦你满足了所有这些条件，你就可以将应用程序发布到GitHub市场了。你会看到一个<code class="fe no np nq nr b">Public this Action to GitHub Marketplace</code>检查你的释放。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/69dd8d8d1fbd9e4c860f9e2bb1ddddf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xZS2BRfVOruPash3tjA9jA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">发布我的Github动作的标题</p></figure><p id="2e0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意如何在<code class="fe no np nq nr b">action.yml</code>上执行一些检查。该文件充当您的操作的描述符。如果有任何错误(可能操作名称已被采用)，您可能会在此阶段看到这些错误。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="e914" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">有用的工具</h1><p id="2355" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">您可以在您的JavaScript文件中使用<code class="fe no np nq nr b">npm</code>模块的力量。但是，您需要将它们捆绑在一起。为此，您可以使用Vercel的<code class="fe no np nq nr b">ncc</code>工具。</p><p id="3f32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它是一个更简单的包，支持JavaScript和TypeScript。</p><p id="7adc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用以下命令简单地安装它:</p><pre class="kj kk kl km gt oz nr pa pb aw pc bi"><span id="0a81" class="ns ms it nr b gy pd pe l pf pg">yarn add --dev <strong class="nr iu">@vercel/ncc</strong></span></pre><p id="331e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并在您的<code class="fe no np nq nr b">package.json</code>中创建一个<code class="fe no np nq nr b">dist</code>脚本:</p><pre class="kj kk kl km gt oz nr pa pb aw pc bi"><span id="7bb3" class="ns ms it nr b gy pd pe l pf pg">...<br/>"scripts": {<br/>  "dist": "<strong class="nr iu">ncc build src/index.ts -o dist</strong>"<br/>}<br/>...</span></pre></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="dcd9" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">测试</h1><p id="88ec" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">我们如何测试我们的动作是否按预期运行？为此，我们可以在本地运行它。</p><p id="cbcf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以在我们的存储库中创建一个<code class="fe no np nq nr b">.github/workflows/test.yml</code>文件。然后，您可以像在配置项上一样调用它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ow ox l"/></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="e62f" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">包裹</h1><p id="052e" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">我希望你喜欢我的第一个GitHub行动工具，并且你渴望使用它作为你的CI工作流程的一部分。您可以从设定一个较高的<code class="fe no np nq nr b">MAX_NUMBER</code>数字开始，然后逐步调整它以适应您团队的需求。</p><p id="9cdd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这能有助于任何团队的健康，并提高其生产力。</p></div></div>    
</body>
</html>