<html>
<head>
<title>Build Mazes With SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用SwiftUI建造迷宫</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-mazes-with-swiftui-3521aee2691?source=collection_archive---------7-----------------------#2021-06-14">https://betterprogramming.pub/build-mazes-with-swiftui-3521aee2691?source=collection_archive---------7-----------------------#2021-06-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6903" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Combine和SwiftUI网格的力量在SwiftUI应用程序中创建迷宫</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/523b92e837fa23905b169c361c8fe5f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dn-TA0vgJ64uT7AC"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">托拜厄斯·拉德马赫在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="cb15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在周末翻阅<a class="ae ky" href="https://medium.com/pragmatic-programmers" rel="noopener">实用程序员书架</a>，偶然发现<a class="ae ky" href="https://medium.com/@jamis" rel="noopener">贾米斯·巴克</a>写的<a class="ae ky" href="https://medium.com/pragmatic-programmers/table-of-contents-ad06b9e5f047" rel="noopener"> <em class="lv">程序员迷宫</em> </a>。正如我读到的描述(“还记得以前编程很有趣吗？”)，我内心深处有个东西点了一下。是的，我记得这很有趣，但后来我意识到说明算法的代码使用了Ruby，一种类似Python的语言，我不是很了解。</p><p id="395e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我翻阅这本书的时候，所有的算法都用代码很好地描述和说明了。我决定尝试用Swift重写它们。</p><p id="c7e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就在我全力以赴之前，我制定了一个后备计划，并做了一些快速调查。你似乎可以在Swift中嵌入Ruby(马尔西奥·克莱帕兹的文章“<a class="ae ky" href="https://medium.com/@MarcioK/swift-ruby-interoperability-9a0ce9a70fd2" rel="noopener">Swift&amp;Ruby inter operability</a>”中概述的技术)。我一度考虑使用这样的魔法，但作为一个纯粹主义者，我决定走长路。有趣的那个。</p><p id="f6e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我开始之前，我想对Jamis表示一下感谢，他为本文提供了一些帮助。</p></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="3fd9" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">编程迷宫</h1><p id="a90d" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">那就去看书吧。它告诉你如何建造迷宫，并描述了这样做所需的算法。Jamis介绍了六种建造更复杂迷宫的方法。我不会把它们都展示给你。不，我只是想尝试在Swift中复制足够多的他的作品，让你对这个主题有所了解。</p><p id="acea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看第一个例子，并尝试在Swift中构建它。最简单的迷宫使用二叉树算法。看起来是这样的。当然，没有进入和退出，但这是一个次要问题，我稍后将返回。如果它困扰你，想想吃豆人。那是一个没有入口和出口的迷宫。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/adebc7a690b17ebe36133b28c9106db1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*NNMCEFSRfvI13ygLGVtdvQ.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Jamis书中最简单的算法构建的网格</p></figure><p id="e08c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我告诉你我是如何做到的之前，有必要指出一种叫做偏见的东西。在二进制算法中，你总是在右手边得到一条直的走廊，一条沿着顶部延伸。在动画GIF里可以看的很清楚。这被称为偏见——迷宫建造者试图避免的事情，这并不容易做到。</p><p id="c974" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么我是怎么做到的呢？我使用了网格(显然是在Swift中)。其中两个在另一个上面。第一个网格将框与前沿对齐，而第二个网格将框与底部对齐。为了制作迷宫，我通过简单地将盒子的尺寸+边框增加一倍来桥接网格中的盒子。</p><p id="7eb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">具有讽刺意味的是，让它工作的最大挑战是自动生成上面的黑白动画GIF。这个挑战是由我创建的两个网格的标签和布局不同造成的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/540b008389e397f9505b7b5132318bf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*I5DI9T1ul0Npw1UYlLeB3A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">水平布局的网格</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/582d49459772ff2a3da05d43a3d3e378.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*Y_Do4g1qZGUt81z5xnKrtA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">垂直布局的网格</p></figure><p id="1ca6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">问题是我有两种方法来处理同一个方块。当然，它们在数学上是相关的，但这让事情变得比我希望的更复杂。</p><p id="200c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是Swift代码和解决方案。这使用了二叉树迷宫算法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="4960" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我使用了一个组合发布器，用一个简单的<code class="fe ng nh ni nj b">Timer</code>函数来表示每秒生成一个新网格的动作。这个功能是通过在设备表面上轻击来启动的。偏见，或迷宫纹理，是这个行业的圣杯。定时或延迟代码本身就是一门艺术。阅读<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/using-timers-and-delays-in-swiftui-2-1362f664f013">这篇文章</a>了解更多关于这个话题的信息。</p><h2 id="5d9c" class="nk mg it bd mh nl nm dn ml nn no dp mp li np nq mr lm nr ns mt lq nt nu mv nv bi translated">更好的解决方案</h2><p id="b062" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">我用一行额外的代码解决了SwiftUI代码中的标签问题:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="81ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这给了这些盒子相同的标签名称，不管它们是垂直还是水平放置的，尽管我仍然需要分别处理它们。然后我又创建了两个网格来代表可以向南和/或向西扩展的盒子。这些网格将由SwiftUI自动布局。这让我可以选择使用一个可以向任何方向移动的算法。</p><p id="c92f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">回到书中，并试图复制一个可以向任何方向移动的算法(Aldous-Broder创建的解决方案)。这是不偏不倚的，尽管对于较大的迷宫来说，这是一个很大的代价，在它们完成之前，可能需要通过许多次。</p><p id="113c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它是这样工作的。你随机选择一个单元，然后选择一个方向进入，当你这样做时，在单元之间搭起一堵墙——除非你以前去过那个单元。如果您以前访问过该单元，则不要桥接它。</p><p id="0efb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/619199144aa586ab46da313c95dcb9e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*eCffDbiDKN5yMhK6iKz_gQ.gif"/></div></div></figure><p id="193b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Jamis告诉我，他记录的[和编码的]所有迷宫解决方案应该能产生完美的迷宫。一个完美的迷宫里没有任何循环。如果你可以从一个给定的单元格开始，然后返回到那个单元格，而不返回你的步骤，那么它有一个循环，并且不是一个完美的迷宫。尽管如此，这种解决方案并不总是完美的解决方案。请在评论中告诉我修复方法，因为我找不到它。</p><p id="9e49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="581a" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">结论</h1><p id="7d2d" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">这让我想到了这篇文章的结尾。最后，我想提一下这个迷宫建造故事的另一面，我还没有提到，但Jamis在书中肯定提到了:解决它们。毕竟，如果你不能解决它，做一个迷宫是没有意义的。我可能会在七月报道这个。</p><p id="dba7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://marklucking.medium.com/" rel="noopener">关注Medium上的我</a>获取更多关于Swift编码的文章。在过去的18个月里，我已经就这个主题发表了100多篇文章。</p></div></div>    
</body>
</html>