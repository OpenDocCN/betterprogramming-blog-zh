<html>
<head>
<title>How To Write Great Code — 16 Ideas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何写出伟大的代码——16个想法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-write-great-code-16-ideas-d172d33c451e?source=collection_archive---------5-----------------------#2022-11-14">https://betterprogramming.pub/how-to-write-great-code-16-ideas-d172d33c451e?source=collection_archive---------5-----------------------#2022-11-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9f70" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">实现这一目标的技术和原则</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bfb36fae5636fc78355abd37945ae70b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L2r0SfABUDkdizvD"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">阿迪·戈尔茨坦在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="67db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我对这个问题的回答一直在进化。</p><p id="53b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">今天我被要求审查某人的代码库。在深入研究代码之前，我觉得我应该解释一下衡量代码的标准是什么。</p><p id="59e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有些原则和技巧我觉得很有用。我觉得值得分享这些，并从更广泛的社区中获得反馈和观点。</p><p id="1009" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个等式有两个部分。第一是代码本身(伟大的代码)，第二是编码的过程(怎么写)。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="c5e5" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">伟大的代码</h1><h2 id="d004" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">1.尊重过去，灵活处理</h2><p id="d090" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">这是亚马逊原则工程社区的两条原则，引起了我的共鸣。</p><p id="6c54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为人类，我们不擅长在事情上达成一致(android vs iOS，猫vs狗)。所以，你的团队不太可能分享你所有的观点。<br/>如果你不够灵活，不重视他人的工作，你就不可能写出伟大的代码。</p><h2 id="618d" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">2.拥抱多种范式</h2><p id="def9" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">不是面向对象编程vs函数式编程，两个都用！多态和对象双射与纯函数和不变性一样有用。</p><p id="25e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">程序性编程也有一席之地。即使在Haskell中，副作用也是以过程化的方式执行的。有时候你只想一步一步的控制流量。</p><h2 id="c476" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">3.保持简单。你的代码被人类阅读。</h2><p id="9681" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">简单的代码容易阅读，但是很难编写。在我目前的项目中，我们使用AWS Lambda函数。如果我不明白这个函数在15秒后做了什么，那它就不是很棒的代码。</p><p id="cbb7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简单的代码将大大有助于维护的可管理性。当你需要做一个小的改变时，你不想进入一个想要重写整个模块的状态。</p><h2 id="8cd2" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">4.函数和类的目的主要是抽象而不是重用</h2><p id="3bc1" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">如果我的lambda处理程序有50行代码，我将无法在15秒内理解它。只有使用抽象，我才能做到这一点。</p><p id="5687" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有些人遵循这个原则只写可重用的函数。可重用性很好，但这通常意味着我们必须一般化。明确通常有助于使代码更容易理解。我觉得需要有一个平衡。</p><h2 id="c220" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">5.命名很难。使用领域语言</h2><p id="4a99" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">我经常发现，如果我在代码中找不到某个东西的名字，领域专家通常会有一个名字。如果他们不这样做，我可能会犯一个错误。</p><p id="9292" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用领域专家的方式来命名你的函数和数据结构，可以更容易地将你的需求转化为测试。</p><h2 id="1637" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">6.伟大的代码做它应该做的事情</h2><p id="bdb9" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">花点时间去理解你试图解决的问题。理解该领域并使用该语言将有助于确保您在第一时间以正确的方式解决正确的问题。我们倾向于仓促设计，使用想到的第一个解决方案。</p><h2 id="504c" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">7.基础设施、配置、管道和应用代码协同定位</h2><p id="713f" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">应用程序的不同层应该对其开发人员可用。不是每个开发人员都需要接触所有的代码，但是为了更好的集成，团队中的每个人都应该可以访问代码。</p><p id="f151" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就像团队之间不应该有“混乱之墙”，你的代码中也不应该有“混乱之墙”。</p><h2 id="8c20" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">8.将领域和业务逻辑与代码的其余部分分离开来</h2><p id="2f6c" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">有许多方法来组织你的代码。关于是否按类型/层或特征或两者的各种组合来构建，还需要进行讨论。说实话，我不太在意。</p><p id="2c84" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我发现重要的一点是将领域和业务逻辑与副作用和配置代码分开。在实现我的领域逻辑时，我希望尽可能少地担心数据库、HTTP调用、线程、框架配置等。</p><p id="c410" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我并不是说这些代码不重要。我是说所有这些副作用都需要小心处理。这是可能出错的地方，我需要使用try-catch或monads和数据验证(空检查等)。).如果我将副作用和业务逻辑分开，我就可以分别处理它们的复杂性，从而使我的代码更简单。</p><h2 id="c0b8" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">9.平衡质量、时间和成本</h2><p id="b0ec" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">质量是有代价的。不能在时间和成本约束内保持最佳质量的代码是无用的代码。伟大的代码在质量、时间和成本之间找到了一个很好的平衡。平衡通常意味着紧张。质量有点无形，有点难以衡量，这就是为什么很难在天平上给它分配合理的重量。</p><p id="0975" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当有人要求生产质量稍差的产品以获得更快的速度时，我会非常小心。正如我们接下来要探讨的，质量是由几个因素组成的，每个因素都有可能使你的软件不可用。因此，当涉及到降低质量时，没有太多的空间可以发挥。</p><h2 id="cd1f" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">10.质量是性能、弹性、安全性、可维护性、可观察性和可靠性的平衡</h2><p id="91be" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">我知道，有点拗口。但是如果你想一想，我们需要所有这些都有好的质量。没有性能，我们的用户可能会停止使用我们的软件，弹性和可靠性也是如此。糟糕的安全性会产生各种各样的影响，包括财务、法律等等。</p><p id="1a16" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">没有可观察性，我们的用户是发现我们所有错误的人，我们没有办法确认我们的修复是否解决了他们的问题。可维护性将允许我们的软件随着时间的推移而容易地改变。如果我们没有它，软件最终会被重写或丢弃。</p><p id="d751" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很明显，我们需要所有这些方面，但我们也需要记住在它们之间找到平衡。由于我们必须保持在预算和时间限制内，如果我们有时间，我们不能只关注性能第一和安全性和可维护性。说到性能，我建议只使用缓存、并发和并行计算，如果我们确定它们是必要的话。这些先进的性能技术可能会损害质量的所有其他方面。</p><p id="5c50" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我意识到我只是触及了表面，如果你想让我写这些方面的细节，请告诉我。</p><h1 id="7167" class="lz ma iq bd mb mc ni me mf mg nj mi mj jw nk jx ml jz nl ka mn kc nm kd mp mq bi translated">如何写代码</h1><p id="2d00" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">我们已经讨论了伟大的代码是什么样子的，另一个重要的部分是如何实现它。在这个过程中，我们可以做几件事来帮助它。</p><h2 id="313f" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">11.红绿重构</h2><p id="e11a" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">三个字的TDD。我就不深入讨论你该不该先写测试，或者什么是单元测试等等。我认为在更高的层面上，TDD实施的一个非常有用的原则是，你需要足够好地理解你的需求，以编写一个测试来证明你已经完成了它。(有些人会称之为验收测试驱动开发)。</p><p id="7253" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你可以花3天开发错误的东西，为什么要花10分钟问问题？；-)</p><h2 id="4d48" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">12.生产力和流动的头号敌人是无计划的工作。</h2><p id="7d00" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">我不喜欢写文档，我不喜欢。但是计划外的工作要糟糕得多，我已经养成了写下需求和解释的习惯，并且只有在完成之后才开始编码。</p><p id="55d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我的时间太宝贵了，不能因为误解而陷入匆忙的混乱状态，如果我花时间把它们写下来，这些误解是可以避免的。</p><p id="97ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果可以的话，就“为你的故事做好准备”的定义达成一致，并坚持下去。如果你的团队不同意，无论如何也要为你自己去做。好的，一旦我知道了我的测试应该是什么样子，我就可以写测试并让它通过。然后，不要认为你已经完成了，而是再次阅读你的代码。你就会知道它是否需要重构。</p><h2 id="464e" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">13.现在重构，以后就不会了</h2><p id="a83f" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">是的，一些团队有一个错误预算和时间表来重构，但我不认为这是一个好主意。您必须将上下文切换回可能状态不佳的代码，因为您知道以后会进行重构。</p><p id="5a74" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相反，在测试通过后直接重构。你有你需要的所有背景。你甚至会发现你的测试是否好。如果你测试的是实现细节而不是行为，你就必须改变你的测试。</p><h2 id="aa6b" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">14.不要着急</h2><p id="59be" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">如果我们看一下我提到的关于什么是优秀代码的所有要点，很明显，编写代码是不容易的。没有专注和不间断的专注，你是不会成功的。对我来说，我觉得我赶时间的时候连像样的代码都写不出来。当你意识到你不能满足最后期限或任何时间承诺时，你会怎么做？</p><p id="a420" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我的本能反应是匆忙完成它，从而偷工减料。那是错误的选择！让我解释一下。</p><p id="dff0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在质量上妥协可能是一个有效的商业决策。这里最重要的词是商业。如果我们面临无法坚持计划的情况，我们需要改变计划。如果你选择匆忙和抄近路，你正在做一个可能不是你能做的商业决定。</p><p id="76a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为开发商，我们需要意识到我们反对的计划非常脆弱。它们基于假设、估计和情感。如果我们不能完成计划，我们不是糟糕的开发者。然而，如果我们知道我们需要改变计划而不去沟通，我们就是糟糕的开发人员。</p><h2 id="7d02" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">15.日常工作的改进比日常工作本身更重要</h2><p id="2e47" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">反思你的工作流程和工具并加以改进是很重要的。不要要求时间去做，去做就是了。调整你的linters、测试运行程序、IDE、自动完成和自动化手动任务将使你更快，让你专注于开发。</p><h2 id="994a" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">16.在IDE中计划大约4小时/天</h2><p id="e558" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">作为一名开发人员，我们需要意识到我们并不是整天都在开发。大量的时间花费在理解领域和需求、设计架构、澄清、呈现输出和结果以及文档上。</p><p id="6c2f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我不记得出处了，但我读到过，当你每天至少花4小时在IDE上时，开发人员是最开心的。这可能因你的职位和资历而异。</p><p id="ecb0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，您应该知道这个数字，并相应地调整您的估计。如果你估计某个故事需要2天来开发，你需要估计4天。因为要有2天的发展，你需要4天的4h/天的发展。(同样的概念也适用于故事点)为了透明起见，我甚至建议与您的PO/ba分享这个数字。</p><p id="f957" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我看来，作为开发人员，我们应该在整个项目中平均每天花3-6个小时在IDE上。如果低于这个水平，我们就很难做出真正的贡献。高于这个水平的话，我们可能沟通不够，并且冒着误解需求或者设计和协作不佳的风险。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="5393" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我有什么资格告诉你伟大的代码？我只是一个喜欢分享想法的人。</p><p id="4e5f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我很想听听你在旅途中学到了什么。如果我的一些观点引起了你的共鸣，也请让我知道。</p></div></div>    
</body>
</html>