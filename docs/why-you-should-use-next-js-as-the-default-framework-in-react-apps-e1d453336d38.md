# 为什么应该使用 Next.js 作为 React 应用的默认框架

> 原文：<https://betterprogramming.pub/why-you-should-use-next-js-as-the-default-framework-in-react-apps-e1d453336d38>

## 了解 Next.js 能为您的 web 开发带来什么

![](img/877203e2737a7c98c09bdec37fff2fff.png)

照片由[艾哈迈德·奥德](https://unsplash.com/@aoddeh?utm_source=ghost&utm_medium=referral&utm_campaign=api-credit) / [Unsplash](https://unsplash.com/?utm_source=ghost&utm_medium=referral&utm_campaign=api-credit) 拍摄

React 是一个很棒的 JavaScript 库。它有一个很棒的组件系统，并为您提供了一种轻松创建单页面应用程序的方法。

正如 React 开发者在他们的[官网](https://reactjs.org/)上提到的，React 是一个库。这意味着它将为您提供创建 web 应用程序所需的部分功能，但您可能还需要更多的工具。例如，如果你创建一个需要路由的应用程序，你必须安装 [*react-router*](https://reactrouter.com/web/guides/quick-start) (或者一个类似的库)并配置它。

如果你没有使用起始模板，比如[*create-react-app*](https://create-react-app.dev/)*，*，举例来说，你还必须使用 *webpack* 和 *babel* 来做一些繁重的配置。然后，您必须设置一个开发配置和一个生产配置。这需要时间和努力。如果你每次开始一个项目都要做，那就没意思了！

Next.js 解决了大部分问题。这是一个建立在 React 之上的框架。它提供了您在 web 应用程序中需要的现成特性。

我们一会儿会详细介绍它，但总的来说，Next.js 包括路由、生产优化、服务器端渲染、静态站点生成等等！让我们来发现这些特性吧！

# 按指定路线发送

Next.js 为你提供了一个现成的路由系统。这意味着您不必处理额外的库来处理这个主题。

Next.js 提供了一种定义路由系统的智能方法。你不必像使用 *react-router、*那样在 JavaScript 文件中声明你的路线。您将使用文件系统描述您的路径。

您还可以从一开始就访问客户端路由。Next.js 没有使用标准的`<a>` HTML 标签在应用程序中导航，而是提供了一个名为`<Link/>`的组件。它不仅支持客户端导航，还允许浏览器预取用户可能导航到的页面所需的数据！

# 预取

该框架将下载用户视窗中每个链接所需的所有资源。例如，如果您打开一个包含导航菜单的页面，该导航菜单包含到`/about`页面的路径。用户的浏览器甚至会在点击之前就下载该页面所需的资源。从用户的角度来看，导航似乎要快得多。

# 服务器端呈现(SSR)

Next.js 的一个亮点是为您提供了一个简单的解决方案，将服务器端呈现(或 SSR)应用到您的应用程序中。

当您使用 *create-react-app* 命令行创建一个新的应用程序时，您的应用程序将默认为单页面应用程序(SPA)。当用户访问您的应用程序时，客户端构建整个应用程序，浏览器下载一个 HTML 文件，该文件的主体包含一个简单的`div`。然后，浏览器获取所需的 JavaScript 文件，执行它们，并构建您的应用程序页面。

这个过程被称为客户端渲染(或 CSR)。虽然这是创建 React 应用程序的好方法，但它的主要缺点是在 SEO 方面表现不佳。搜索引擎用来索引网络的机器人没有执行 JavaScript。在 CSR 场景中，机器人下载空的 HTML 文件，然后读取页面。由于 JavaScript 没有运行来构建页面，因此对于机器人来说，文档将显示为空白。

这就是 SSR 的用武之地。顾名思义，SSR 进程将首先在服务器上构建页面，然后将它们发送到浏览器。因此，当客户端收到页面时，它不需要构建页面。搜索引擎爬虫也是如此。他们看到的不是一个空白页面，而是一个完整的文档。

虽然从 SEO 的角度来看，这种方法非常好，但是它也有一些缺点:

*   **当用户请求时，你需要一个服务器**来生成页面的结构。在 Next.js 的例子中，Node.js 服务器处理这个问题。
*   **服务器为每个请求构建页面**:一千个用户请求同一个页面将触发服务器的一千次生成。
*   **首字节时间增加(TTFB)** :由于服务器首先构建页面，您的浏览器将不得不等待更多的时间来接收对其请求的响应。

# 静态站点生成(SSG)

静态站点生成(SSG)是服务器端呈现的一个很好的替代方案。SSR 在运行时根据每个请求构建页面，而 SSG 在构建时构建应用页面**。**

这意味着您需要向 Next.js 指定静态生成的页面的路由是什么样子，获取所需的数据，并运行 build 命令。然后，框架将从您的源代码中构建静态 HTML 页面。

使用 SSG 而不是 SSR，您将保持出色的 SEO 性能的优势，同时不需要服务器来构建您的应用程序页面。这也将有利于您的用户，因为应用程序的性能将得到增强。因为在运行时没有构建页面的服务器，所以用户下载 HTML 文件(例如，从 CDN 下载)。

SSG 的一个缺点是构建应用程序所需的时间:如果您的应用程序需要大量的页面，构建时间可能会很长。在这种情况下，您还需要更多的存储空间来容纳整个应用程序。

假设您有大量频繁更改的页面；你可能会认为 SSG 不适合你，因为每次内容发生变化时，你都必须构建自己的应用程序。你是对的！

但是从 9.4 版本开始，Next 引入了增量静态再生。该功能允许两件事:

您可以在应用程序运行时生成新的静态页面。假设您有一个包含数千种产品的电子商务网站。如果您在构建阶段生成所有页面，那么在您的应用程序准备好被部署之前，将需要一些时间。

如果您使用增量静态重新生成，您可以向 Next.js 指定即使某些页面应该是静态的，也不应该在构建阶段创建它们。相反，框架应该在运行时生成它们——用户请求页面，Next.js 注意到它不存在，它动态地构建它，提供给用户，并将其与其他静态生成的页面一起保存在存储中，以防用户请求相同的页面。

如果您的应用程序中有大量的页面，这种解决方案是非常好的。缺点是到达页面的第一个用户在收到响应之前必须“等待”,因为需要构建页面。

**它可以在运行时重新生成静态页面。**您可以让 Next.js 在收到请求时更新静态页面，最多每“X”秒更新一次。如果页面内容变化很大，这个功能会很方便，但是您仍然希望从 SSG 中受益。

# 代码分割

Next.js 在页面级别为您配置代码分割。这到底是什么意思？让我们假设您的应用程序正在使用许多不同的组件和库。如果您没有合适的代码分割配置，一个 JavaScript 包包含您的整个应用程序。当用户访问你的网站时，他们将不得不下载整个包，即使他们只看到一个页面。

代码分割通过将应用程序“切割”成不同的块来解决这个问题。如前所述，Next.js 是在页面级完成的:它分析页面需要哪些组件或库，并将它们包含在特定的块文件中。这样，用户只需下载他们需要的东西，仅此而已。这种优化会对您的应用性能产生重大影响。

# 动态导入

动态导入允许您进一步优化包的大小。假设您的应用程序包含一个日历，当用户点击一个按钮时就会出现。

在这种情况下，页面级的代码拆分对您没有帮助:Next.js 会在页面包中包含日历组件，因为它认为这是必需的。这意味着即使用户没有打开日历组件，他们也必须下载它。

动态导入为您提供了向 Next.js 指定如何在多个卡盘中切割应用程序包的可能性。在“日历示例”中，我们可以确定只有当用户单击特定按钮时，应用程序才必须导入日历组件。这样，Next.js 将日历放在一个单独的按需下载的块中。

# 创建下一个应用程序

[*Create-next-app*](https://nextjs.org/docs/getting-started#setup)*是类似于 *create-react-app* 的命令。它实际上不是 Next.js 的一部分。它是一个帮助你轻松开始使用新的 Next.js 应用程序的工具。您可以使用不带选项的 CLI，它将为您生成最少的应用程序。或者你可以给它传递一个`--example`选项，这样它就会让你的项目基于众多 [Next.js 示例](https://github.com/vercel/next.js/tree/canary/examples)中的一个。*

# *结论*

*使用 Next.js，您可以从零配置的开箱即用的出色特性中获益。这将有助于你提高网页的性能和搜索引擎优化的可见性。*

*客户端路由非常有助于改善用户在应用程序中的体验。当用户在网站上导航时，页面之间的过渡看起来更平滑。*

*如果你不需要 SSR 或 SSG，这个框架仍然有用。代码分割和动态导入将提高用户下载应用程序的速度。这在移动设备上尤其明显。*

*你只需要弄清楚你的网站需要什么类型的渲染。注意，您可以单独决定哪个页面使用 SSR 或 SSG！*

*Next 还提供了许多我在本文中没有深入描述的其他有用功能，例如图像优化、国际化、快速刷新、林挺、简单的 TypeScript 配置、[和更多](https://nextjs.org/docs/getting-started)。*

*感谢您阅读我的文章。希望还没做过的你去试试 Next.js！*

**最初发表于*[*https://www.developerstavern.com*](https://www.developerstavern.com/you-should-use-next-js-as-your-default-framework-for-your-next-react-application/)*