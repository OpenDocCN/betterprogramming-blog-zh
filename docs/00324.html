<html>
<head>
<title>Swift Gradient in 4 lines of code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">4行代码中的快速渐变</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swift-gradient-in-4-lines-of-code-6f81809da741?source=collection_archive---------0-----------------------#2019-04-14">https://betterprogramming.pub/swift-gradient-in-4-lines-of-code-6f81809da741?source=collection_archive---------0-----------------------#2019-04-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="abbe" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">抛弃那些单调的背景色，在你的视图中使用渐变</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a9c085d952314a5cd1c6e28a0f79b76c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EWw_Nhy8vJYvq5L9mb8fkw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">渐变很好看，不是吗？</p></figure><p id="13b1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我喜欢写一点代码来完成很多事情。前几天，我开始了一个新的Xcode项目，想在我的应用程序的登陆屏幕上使用两种颜色创建一个简单的渐变。我知道Swift有一个相对容易使用的渐变系统，因为我读过很多文章，人们在文章中解释了Swift渐变的来龙去脉。唯一的问题是，每个人对快速渐变的实现都比我需要的要复杂得多。因此，经过几次谷歌搜索和30分钟试图找出一个恼人的错误，我终于让我的双色渐变登陆屏幕在4行代码中工作。</p><p id="7dcc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我是这样做的:</p><pre class="kg kh ki kj gt lr ls lt lu aw lv bi"><span id="663d" class="lw lx iq ls b gy ly lz l ma mb"><strong class="ls ir">let</strong> gradientLayer = CAGradientLayer()</span><span id="d90a" class="lw lx iq ls b gy mc lz l ma mb">gradientLayer.frame = <strong class="ls ir">self</strong>.view.bounds</span><span id="e491" class="lw lx iq ls b gy mc lz l ma mb">gradientLayer.colors = [UIColor.yellow.cgColor, UIColor.white.cgColor]</span><span id="b244" class="lw lx iq ls b gy mc lz l ma mb"><strong class="ls ir">self</strong>.view.layer.insertSublayer(gradientLayer, at: 0)</span></pre><p id="8e50" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，就复杂代码而言，这在列表中并不靠前，但还是让我们一行一行地看。</p><p id="cff3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">第1行</strong>初始化你的<code class="fe md me mf ls b">gradientLayer</code>变量。这是您将设置所有渐变选项的变量，并最终将其添加到您的视图中。</p><p id="8144" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> Line 2 </strong>设置<code class="fe md me mf ls b">gradientLayer</code>的帧大小，以匹配您正在添加渐变的视图的大小。</p><p id="6ddf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">第3行</strong>是有趣的一行(反正对我来说是)。<code class="fe md me mf ls b">gradientLayer.colors</code>采用一组颜色组成渐变。你可以添加任意多的颜色到你的渐变中，只要确保在添加更多颜色时遵循数组语法。</p><p id="3dd8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">第4行是魔法实际发生的地方。这里，我们所做的就是向当前视图添加一个子层，并将该子层设置为我们在第1–3行中设置的<code class="fe md me mf ls b">gradientLayer </code>。</p><p id="14a9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">就是这样！现在只需编译并运行Xcode项目中的代码，你的屏幕就会呈现出性感的黄色渐变。</p><h1 id="bda4" class="mg lx iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">Bug警报！</h1><p id="315c" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">当我第一次尝试给我的登陆屏幕添加渐变时，我遇到了一个奇怪的错误，我的渐变显示出来了，但它隐藏了我在屏幕上的所有标签和按钮。我认为这和梯度的位置有关。结果是，我的<code class="fe md me mf ls b">gradientLayer</code>被添加到了我在应用程序屏幕上的所有内容之上，修复在第4行。</p><pre class="kg kh ki kj gt lr ls lt lu aw lv bi"><span id="5577" class="lw lx iq ls b gy ly lz l ma mb"><strong class="ls ir">self</strong>.view.layer.insertSublayer(gradientLayer, at: 0)</span></pre><p id="6a4f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将<code class="fe md me mf ls b">at: 0</code>添加到insertSublayer函数告诉Swift将该子层设置在视图的索引0处。这将渐变推到了所有屏幕内容的后面，让我可以看到之前被渐变隐藏的所有内容。我花了比我想承认的更长的时间来解决这个问题，但是如果你遇到同样的问题，希望我可以帮你节省30分钟的谷歌搜索时间。</p></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="6982" class="mg lx iq bd mh mi nj mk ml mm nk mo mp jw nl jx mr jz nm ka mt kc nn kd mv mw bi translated">结局！</h1><p id="64c8" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">上面的四行代码在我的应用程序中生成了下面的屏幕(除去标签，我是通过故事板添加的)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/a3c58881e50beade05c4a7082f102507.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*PPUGYFOm2LYrbgeKPIcslA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最终性感的黄色渐变</p></figure><p id="af89" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虽然有更多的方式可以使用和定制渐变，但我会让你自己去研究和解决。对于任何需要简单渐变的屏幕/标签/按钮等。希望这篇文章对你有用，感谢阅读！</p></div></div>    
</body>
</html>