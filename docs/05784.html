<html>
<head>
<title>5 Advanced Operations to Handle Numbers in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中处理数字的5种高级操作</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-advanced-operations-to-handle-numbers-in-python-e7ff921da475?source=collection_archive---------12-----------------------#2020-08-05">https://betterprogramming.pub/5-advanced-operations-to-handle-numbers-in-python-e7ff921da475?source=collection_archive---------12-----------------------#2020-08-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f997" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你都认识吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ce5e3af8964d1eede89868ff310ccc1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k_9cYomcnH9EnSl1"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">乔恩·泰森在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="89a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数字在我们的日常生活中无处不在——有电话号码、出生日期、年龄和其他各种标识符(例如，驾照和社会保险号)。</p><p id="d034" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自然，所有的编程语言都有广泛的处理数字的功能。这些运算大多基于常见的算术运算符——加、减、乘、除——大家应该都非常熟悉。然而，各种编程语言都有独特的操作，新手往往觉得不太直观。</p><p id="e94c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我想回顾一下Python中处理数字的五种高级操作。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="16ea" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.较少使用的运算符</h1><p id="56e5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">众所周知，加减乘除是最基本的数学运算符。然而，还有另外三个我们使用较少但非常方便的操作符。</p><ul class=""><li id="0441" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">模数运算符<code class="fe ni nj nk nl b">%</code>返回一个数除以另一个数后的余数。</li><li id="daa0" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated">取幂运算符<code class="fe ni nj nk nl b">**</code>返回一个数的另一个数的幂后的结果。</li><li id="8626" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated">取整运算符<code class="fe ni nj nk nl b">//</code>返回一个数除以另一个数后的最大可能结果(例如，将2.x向下舍入为2)。</li></ul><p id="2b43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请参见下面代码片段中的一些例子。值得注意的是，您不必对这些操作使用整数，因为它们也可以在浮点上工作。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">运算符:%、**和//</p></figure><p id="6869" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这些操作符中，这里有两个具体的用例，您可能会觉得很方便。</p><ul class=""><li id="aeed" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">要找出一个整数是偶数还是奇数，你可以简单地通过将它除以2并与0或1进行比较来检查它的模(例如，<code class="fe ni nj nk nl b">x % 2 == 1</code>将评估它是否是奇数)。</li><li id="0fcb" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated">对于floor division操作，数据处理中的一个用途是从时间序列数据中找出下采样的数据点数，如<code class="fe ni nj nk nl b">x // 4</code>，将数据下采样到季度。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f057" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.赋值运算符</h1><p id="3df9" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们都知道，我们使用等式运算符<code class="fe ni nj nk nl b">=</code>给变量赋值，因此它也被称为赋值运算符。与许多其他编程语言一样，算术运算符可以与赋值运算符一起使用，以创建操作现有变量的值的快捷方式。例如，<code class="fe ni nj nk nl b">x += 5</code>相当于<code class="fe ni nj nk nl b">x = x+5</code>，<code class="fe ni nj nk nl b">x *= 3</code>相当于<code class="fe ni nj nk nl b">x = x*3</code>。这些操作应该很简单。以下代码片段向您展示了一些简单的示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">赋值运算符</p></figure><p id="0974" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的例子展示了一些使用一些很少使用的操作符的赋值操作的例子，正如上一节所讨论的。顺便提一下，一些赋值操作符可以处理序列数据，这有时会对您有所帮助。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">列表赋值运算符</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0f28" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.小数精度</h1><p id="2466" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">假设我们正在解决一个非常简单的加法问题。我们定义两个变量，一个是2.2，另一个是1.1。这两个数的和是多少？相关的，总和等于3.3吗？我相信你对自己的答案很有信心，但是让我们用Python来帮助我们解决这个问题:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">精度问题</p></figure><p id="8978" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你能相信你刚刚看到的吗？别开玩笑了——这不是我编的。你也可以在你的机器上试试。</p><p id="7c06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">实际上，如果你明白这些浮点数并不是精确地存储在内存中，你就不应该对这些结果感到惊讶。对这些底层机制的完整讨论超出了本文的范围，但是如果您感兴趣，可以参考关于<a class="ae ky" href="https://stackoverflow.com/questions/7644699/how-are-floating-point-numbers-stored-in-memory" rel="noopener ugc nofollow" target="_blank"> StackOverflow </a>的相关讨论。</p><p id="7ab4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，Python有一个特殊的模块— <em class="nt"> </em> <code class="fe ni nj nk nl b">decimal</code> <em class="nt"> </em> —来支持这些具有期望精度的操作。这些精确的操作在精确至关重要的领域尤其重要，例如物理和金融行业。让我们通过一些简单的例子来看看它是如何工作的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">十进制的使用</p></figure><p id="3c0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上所示，我们使用<code class="fe ni nj nk nl b">Decimal</code>类创建了浮点数。重要的是，我们使用字符串来实例化<code class="fe ni nj nk nl b">Decimal</code>对象。如果我们检查<code class="fe ni nj nk nl b">c_Decimal</code>的值，你会发现它是正确的数量(即3.3)。但是，如果你直接和3.3比较，你会发现它们并不一样。</p><p id="1ed6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种不平等是意料之中的，因为常规浮点的真实值并不完全与它看起来的一样。另外，常规浮点数属于<code class="fe ni nj nk nl b">float</code>类，而<code class="fe ni nj nk nl b">c_Decimal</code>属于<code class="fe ni nj nk nl b">Decimal</code>类。值得注意的是，我们可以将它与使用相同浮点数创建的另一个<code class="fe ni nj nk nl b">Decimal</code>实例进行比较。</p><p id="02d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与此相关，上面的代码向您展示了我们可以对两个<code class="fe ni nj nk nl b">Decimal</code>实例使用加法运算。实际上，其他常见操作(如减法和除法)也适用于他们。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7dd7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.分数</h1><p id="a25c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在大多数情况下，我们使用浮点数来表示足够精确的数量。例如，如果用1除以9，得到0.111111111111111，这就是16位精度。虽然在<code class="fe ni nj nk nl b">Decimal</code>类的帮助下，这种精度水平在各种情况下都符合我们的目的，但从数学的角度来看，这并不完全正确。</p><p id="50e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，Python有一个特殊的包<code class="fe ni nj nk nl b">Fraction</code>，用来处理这些与分数相关的算术运算。总的来说，用法类似于<code class="fe ni nj nk nl b">Decimal</code>类。让我们看看他们的行动:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">分数</p></figure><p id="f3c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上所示，要创建一个分数，需要实例化一个<code class="fe ni nj nk nl b">Fraction</code>对象，指定分子和分母。它们支持我们之前讨论过的算术运算，比如加法和乘法。除了这些基本用法之外，下面的代码片段向您展示了额外的常用操作:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">分数的附加运算</p></figure><p id="42a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中有几件事情需要强调。</p><ul class=""><li id="e5b1" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">通过在实例化期间设置<code class="fe ni nj nk nl b">_normalize</code>参数来控制规范化。默认情况下，分数将被规范化为最小的分母。</li><li id="e4c7" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated">要将浮点数转换成分数，在浮点数上使用<code class="fe ni nj nk nl b">as_integer_ratio()</code>函数将返回一个元组。我们使用星号来解包元组，元组的元素(在我们的例子中就是<code class="fe ni nj nk nl b">(1, 2)</code>)用于创建新的分数。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="dd60" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">5.设置字符串的数字格式</h1><p id="fc65" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">需要将数字显示为字符串是很常见的。在许多情况下，我们需要格式化，以便数字对于手边的任务更容易阅读。</p><p id="ebb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们显示一个包含多个数字的非常大的数字，您可能希望分隔符更好地理解该数字，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">大量的数字</p></figure><p id="b3ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们想要显示两位数精度的浮点数，比如某个学生的分数列表中的平均分数。考虑下面这个简单的例子。</p><p id="58c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里需要注意一些事情:</p><ol class=""><li id="3b9d" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu nu nf ng nh bi translated">上一个例子使用了<code class="fe ni nj nk nl b">format()</code>方法，而下面的例子使用了<a class="ae ky" href="https://medium.com/swlh/string-formatting-in-python-6-things-to-know-about-f-strings-72fd38d96172" rel="noopener"> f-strings </a>，这只是向您展示了有多种方法来格式化字符串。</li><li id="03fe" class="mz na it lb b lc nm lf nn li no lm np lq nq lu nu nf ng nh bi translated">格式化浮点数的另一种方法是使用<code class="fe ni nj nk nl b">round()</code>方法，该方法创建一个具有所需精度的新浮点数。请注意，使用<code class="fe ni nj nk nl b">round()</code>不同于字符串格式化，它不会创建一个新的浮点数。</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">浮点精度</p></figure><p id="bacd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在科学计算项目中，数字可以变得很大或很小，在这种情况下，科学符号是相关的技术，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">科学符号</p></figure><p id="1ea9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以百分比显示数字也很常见，例如利率和其他小额金额，如促销活动的折扣率。展示了一些琐碎的例子。值得注意的是，我们可以通过在百分号前指定值来控制精度。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">百分率</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1c27" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="3254" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在本文中，我们回顾了在Python中处理数字的五种高级技术。这里有一个快速回顾。</p><ul class=""><li id="4fed" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">除了基本运算符(+、-、*、/)之外，我们还可以使用%来计算模，**来计算取幂运算，而//则用来计算除法运算。</li><li id="bc03" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated">这些算术运算符可以与赋值运算符一起使用，后者在执行适当的运算后对值进行赋值。</li><li id="b824" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated">如果我们需要精确的计算，我们需要使用标准库中的<em class="nt">十进制</em>模块中的<code class="fe ni nj nk nl b">Decimal</code>类。</li><li id="9772" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated"><em class="nt">分数</em>模块中的<code class="fe ni nj nk nl b">Fraction</code>类是专门为处理分数而设计的。</li><li id="667d" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated">strings的<code class="fe ni nj nk nl b">format()</code>方法和f-strings是以期望的方式格式化数字的便利工具，例如百分比和科学记数法。</li></ul></div></div>    
</body>
</html>