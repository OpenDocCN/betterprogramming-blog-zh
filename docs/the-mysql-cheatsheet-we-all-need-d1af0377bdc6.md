# 我们都需要的 MySQL 备忘单

> 原文：<https://betterprogramming.pub/the-mysql-cheatsheet-we-all-need-d1af0377bdc6>

## 你总是忘记的所有重要的 MySQL 命令

![](img/2b1e58a4c8a5f8838c32c10cefae4043.png)

由[萨法尔·萨法罗夫](https://unsplash.com/@codestorm?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

尽管我对数据科学充满热情，但我热爱数据库。我第一次接触他们是在我大学三年级的一门课上，我们学习了用 MySQL 创建和管理数据库。我学到了很多，这些知识在过去的几年里对我非常有用。然而，SQL 语法很容易忘记。为了避免花更多的时间在谷歌上搜索如何做这个或那个，而不是实际去做，我宁愿做一个小抄，今天我想和你分享。

# 连接到 MySQL 服务器

开始使用 MySQL 数据库的第一步是连接到它。在终端窗口中，键入:

```
mysql [-h machine] -u <user> -p [db_name]
```

如果服务器和客户机运行在同一台机器上，就不需要`-h`标志。`db_name`也是可选的，因为正如我们现在看到的，您可以用一个命令创建或更改当前数据库。

一旦连接到服务器，我们可以随时从 shell 中运行一些有趣的命令:

*   `\T`:将所有输出打印到文本文件中
*   `\s`:打印一些关于 MySQL 服务器的信息
*   `\c`:删除当前句子
*   `\.somefile.sql`:运行存储在文件中的所有 SQL 语句
*   `help`:显示手册页
*   `help` `create table`:显示 `“CREATE TABLE”`命令的手册页
*   `\q`完成与 MySQL 服务器的连接

# 创建用户和数据库

MySQL 有一个默认的根用户，但是它应该只用于管理数据库，而不是用于数据操作。这就是为什么我们应该创建一个标准用户。

```
**CREATE USER** 'mike' **IDENTIFIED BY** 'difficultpassword'**CREATE USER** 'mike'@'localhost' **IDENTIFED BY** 'difficultpassword'
```

在这个代码片段中，我们没有创建两个用户，而是创建了一个无论客户端在服务器内部还是外部都可以使用的用户。

现在，我们将了解如何创建一个数据库，并为不同的用户分配不同的权限，包括我们刚刚创建的用户。

# 创建表格

表是 MySQL 等关系数据库的核心概念。在下面的代码片段中，我们将学习创建一个基本表，然后学习如何使用主键、限制、外键和默认值来创建表。

# 插入一行

在我们创建了表之后，下一步将是用一些数据填充它们。以下示例显示如何插入一行，然后同时插入多行:

# 进行查询

使用`SELECT`命令进行查询，这允许我们从数据库中检索数据。MySQL 允许我们进行复杂的查询，从几个表中检索信息，或者从不同查询的结果中进行逻辑运算。

# 创建视图

视图允许我们将一个`SELECT`语句包装成一个类似表格的视图。然后，我们可以为该视图的用户分配特殊权限。但是，如果被包装的`SELECT`语句引用聚合函数(如`SUM`、`MIN`等)或使用 `GROUP BY`、`DISTINCT`等。，不能在视图上执行`INSERT`、 `UPDATE`或`DELETE`操作。

# 进行交易

事务是一系列原子操作，即整组句子成功或整体失败。如果一个事务的一句话失败了，MySQL 引擎会撤销该事务之前的句子。

# 创建存储过程

存储过程是一系列 SQL 语句，可以随时从控制台或`.sql`文件中调用。这类似于标准编程语言中的函数。

# 玩弄变数

变量是临时存储查询结果或行中某一列的值以便以后使用的一种有用方式。MySQL 中有两种主要类型的变量:本地变量和用户自定义变量(也称为会话变量)。前几个必须在使用前声明，并且它们的作用域被限制在定义它们的存储过程中。第二个不需要预先声明，它们的值可以随时访问，但是只能在客户端创建的会话中访问。

# 玩光标

游标是一种工具，用于逐个元组地迭代查询的所有结果。这在开发需要将每一行转换成某个类的对象的客户端应用程序时非常有用。在 MySQL 中声明一个游标并遍历它非常容易:

# 流控制

在存储过程中，我们可以像在任何其他编程语言中一样进行流控制:

# 创建触发器

触发器是在特定事件发生之前或之后运行的过程，如表或视图中的插入、更新或删除。我们必须小心触发器，因为它们会消耗我们服务器的大量资源。

# 创建预定事件

预定事件是在特定时刻触发的程序。有计划在某一天和某一小时运行的一次性事件，也有在某一天之后直到(可选)结束日期每分钟、每小时、每天等运行的定期事件。

MySQL 是一个非常复杂的 DMBS，所以正如你所想象的，有太多的主题我无法在这里涵盖，因为这篇文章会变得太长。然而，有了这里提到的要点，对大多数用户来说应该足够了，如果你还需要别的东西，[官方文档](https://dev.mysql.com/doc/refman/8.0/en/)可能会有你问题的答案。