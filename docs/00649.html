<html>
<head>
<title>Getting Started With the Combine Framework in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift联合框架入门</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/getting-started-with-the-combine-framework-in-swift-36fe4ff6e568?source=collection_archive---------4-----------------------#2019-06-25">https://betterprogramming.pub/getting-started-with-the-combine-framework-in-swift-36fe4ff6e568?source=collection_archive---------4-----------------------#2019-06-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/ac22e0ce1147018e80656c4da37a9bff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rr4Wfzy7KN1lU1D_Fto_rw.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">在<a class="ae kf" href="https://unsplash.com/search/photos/apple-code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kf" href="https://unsplash.com/@jantined?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Jantine Doornbos </a>拍摄的照片</p></figure><p id="a99e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://developer.apple.com/documentation/combine" rel="noopener ugc nofollow" target="_blank"> Combine </a>是苹果公司在2019年WWDC上推出的新框架。该框架提供了一个声明性的<a class="ae kf" href="https://developer.apple.com/swift/" rel="noopener ugc nofollow" target="_blank"> Swift </a> API，用于随时间处理值。</p><p id="20a5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">换句话说，正如苹果自己描述的:</p><blockquote class="le"><p id="900a" class="lf lg it bd lh li lj lk ll lm ln ld dk translated">通过组合事件处理运算符来自定义异步事件的处理。</p></blockquote><p id="5d8d" class="pw-post-body-paragraph kg kh it ki b kj lo kl km kn lp kp kq kr lq kt ku kv lr kx ky kz ls lb lc ld im bi translated">起初，这可能听起来让人不知所措。它实际上意味着什么？我可以用它做什么，什么时候应该使用它？</p><p id="9d4b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">希望看完这篇博文，你应该能回答这些问题。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="f72b" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">什么是组合？</h1><p id="76f8" class="pw-post-body-paragraph kg kh it ki b kj my kl km kn mz kp kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">Combine框架可以与类似于<a class="ae kf" href="https://github.com/ReactiveX/RxSwift" rel="noopener ugc nofollow" target="_blank"> RxSwift </a>和<a class="ae kf" href="https://github.com/ReactiveCocoa/ReactiveSwift" rel="noopener ugc nofollow" target="_blank"> ReactiveSwift </a>的框架相比较(正式名称为<a class="ae kf" href="https://github.com/ReactiveCocoa/ReactiveCocoa/" rel="noopener ugc nofollow" target="_blank"> ReactiveCocoa </a>)。</p><p id="6062" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它允许您通过提供声明性的Swift API来编写功能反应型代码。</p><p id="e357" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">函数式反应式编程(FRP)语言允许您随时间处理值。这些类型的值包括网络响应、用户界面事件和其他类型的异步数据。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="623c" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">联合收割机的基本原则</h1><p id="8f0e" class="pw-post-body-paragraph kg kh it ki b kj my kl km kn mz kp kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">Combine的基本原理让你明白它是如何工作的，以及如何使用它。在我们深入代码示例之前，最好先了解一些背景信息。这将帮助您更好地理解代码是如何工作和运行的。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="0de0" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">发布者和订阅者</h1><p id="1971" class="pw-post-body-paragraph kg kh it ki b kj my kl km kn mz kp kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">Combine框架附带了所谓的发布者和订阅者。如果您熟悉RxSwift:</p><ul class=""><li id="ed26" class="nd ne it ki b kj kk kn ko kr nf kv ng kz nh ld ni nj nk nl bi translated">出版商和观察者是一样的。</li><li id="24b5" class="nd ne it ki b kj nm kn nn kr no kv np kz nq ld ni nj nk nl bi translated">订阅者与观察者相同。</li></ul><p id="9f8b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">名字不同，但都给了我们相同的理解。</p><p id="8730" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">发布者公开可以更改的值，订阅者订阅这些值以接收所有更新。当我们在使用Combine时查看foundation框架中可用的一些发布者示例时，请记住这一点。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="6338" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">基础框架和组合</h1><p id="748d" class="pw-post-body-paragraph kg kh it ki b kj my kl km kn mz kp kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">foundation框架包含了许多使用Combine的扩展。它允许您使用您已经熟悉的常见类型。</p><p id="f39f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例子包括:</p><ul class=""><li id="e78d" class="nd ne it ki b kj kk kn ko kr nf kv ng kz nh ld ni nj nk nl bi translated">发布数据响应或请求错误的<code class="fe nr ns nt nu b">URLSessionTask</code>发布者。</li><li id="c153" class="nd ne it ki b kj nm kn nn kr no kv np kz nq ld ni nj nk nl bi translated">便于JSON解码的运算符。</li><li id="fcf8" class="nd ne it ki b kj nm kn nn kr no kv np kz nq ld ni nj nk nl bi translated">发布通知的特定<code class="fe nr ns nt nu b">Notification.Name</code>的发布者。</li></ul><p id="345a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以最后一个例子为例，我们可以解释发布者和订阅者的概念。</p><p id="2beb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在下面的代码示例中，我们为新的博客帖子通知创建一个新的<code class="fe nr ns nt nu b">Publisher</code>。</p><figure class="nv nw nx ny gt ju"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="5938" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该发布者将监听<code class="fe nr ns nt nu b">newBlogPost</code>通知名称的传入通知。然而，这只有在有订户时才会发生。</p><p id="9d1a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以创建一个<code class="fe nr ns nt nu b">lastPostTitleLabel</code>，将订阅者分配给发布者。</p><pre class="nv nw nx ny gt ob nu oc od aw oe bi"><span id="b1ad" class="of mb it nu b gy og oh l oi oj">let lastPostLabel = UILabel()<br/>let lastPostLabelSubscriber = Subscribers.Assign(object: lastPostLabel, keyPath: \.text)<br/>blogPostPublisher.subscribe(lastPostLabelSubscriber)</span></pre><p id="0120" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您尝试这段代码，您可能会注意到它还不能工作。</p><p id="56a2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它会导致以下错误:</p><p id="d223" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe nr ns nt nu b">Instance method ‘subscribe’ requires the types ‘NotificationCenter.Publisher.Output’ (aka ‘Notification’) and ‘String?’ be equivalent</code></p><p id="a74a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">标签的文本属性需要接收一个<code class="fe nr ns nt nu b">String?</code>值，而流发布一个<code class="fe nr ns nt nu b">Notification</code>。</p><p id="c0a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们需要使用一个您可能已经熟悉的操作符:<code class="fe nr ns nt nu b">map</code>。使用该运算符，我们可以将输出值从<code class="fe nr ns nt nu b">Notification</code>更改为所需的<code class="fe nr ns nt nu b">String?</code>类型。</p><pre class="nv nw nx ny gt ob nu oc od aw oe bi"><span id="f669" class="of mb it nu b gy og oh l oi oj">let blogPostPublisher = NotificationCenter.Publisher(center: .default, name: .newBlogPost, object: nil)<br/>    .map { (notification) -&gt; String? in<br/>        return (notification.object as? BlogPost)?.title ?? ""<br/>    }</span></pre><p id="4df3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将产生以下完整的代码示例:</p><figure class="nv nw nx ny gt ju"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="75a2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">每当一篇新的博客文章是<code class="fe nr ns nt nu b">Published</code>，标签<code class="fe nr ns nt nu b">Subscriber</code>就会更新它的文本值。太好了！</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="d05a" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">订阅的规则</h1><p id="b202" class="pw-post-body-paragraph kg kh it ki b kj my kl km kn mz kp kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">现在，您已经看到了Combine中发布者和订阅者的基本示例，是时候回顾一下订阅所附带的规则了:</p><ul class=""><li id="f030" class="nd ne it ki b kj kk kn ko kr nf kv ng kz nh ld ni nj nk nl bi translated">只能有一个订户。</li><li id="4e1d" class="nd ne it ki b kj nm kn nn kr no kv np kz nq ld ni nj nk nl bi translated">可以发布零个<em class="ok">或多个</em>值。</li><li id="0fac" class="nd ne it ki b kj nm kn nn kr no kv np kz nq ld ni nj nk nl bi translated">最多会调用一个完成。</li></ul><p id="1fb4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">没错，订阅<em class="ok">可以</em>随完成而来，但并不总是如此。我们的<code class="fe nr ns nt nu b">Notification</code>例子就是这样一个永远不会完成的发布者。</p><p id="8630" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">完成发布者的一个例子是<code class="fe nr ns nt nu b">URLSessionTask</code>发布者，它将完成数据响应或请求错误。</p><p id="f9c7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">事实是，每当流中出现错误时，订阅就会被取消。即使流允许多个值通过。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="e04b" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">@将值绑定到更改的已发布用法</h1><p id="7efc" class="pw-post-body-paragraph kg kh it ki b kj my kl km kn mz kp kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">既然我们已经知道了基础知识，我们可以直接进入<code class="fe nr ns nt nu b">@Published</code>关键词。</p><p id="04b4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个关键字是一个<a class="ae kf" href="https://www.avanderlee.com/swift/property-wrappers/" rel="noopener ugc nofollow" target="_blank">属性包装器</a>,并向任何属性添加一个发布者。一个简单的例子可以是我们分配给<code class="fe nr ns nt nu b">UIButton</code>的启用状态的布尔值:</p><figure class="nv nw nx ny gt ju"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="0c6b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要对此进行分解:</p><ul class=""><li id="c107" class="nd ne it ki b kj kk kn ko kr nf kv ng kz nh ld ni nj nk nl bi translated"><code class="fe nr ns nt nu b">UISwitch</code>将触发<code class="fe nr ns nt nu b">didSwitch</code>方法，并将<code class="fe nr ns nt nu b">isSubmitAllowed</code>值更改为真或假。</li><li id="5dc9" class="nd ne it ki b kj nm kn nn kr no kv np kz nq ld ni nj nk nl bi translated"><code class="fe nr ns nt nu b">submitButton.isEnabled</code>的值被绑定到<code class="fe nr ns nt nu b">isSubmitAllowed</code>属性。</li><li id="abd6" class="nd ne it ki b kj nm kn nn kr no kv np kz nq ld ni nj nk nl bi translated">当我们使用UI时，对<code class="fe nr ns nt nu b">isSubmitAllowed</code>的任何更改都被分配给主队列上的这个<code class="fe nr ns nt nu b">isEnabled</code>属性。</li></ul><p id="d638" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可能注意到的第一件事是<code class="fe nr ns nt nu b">isSubmitAllowed</code>前面的美元符号。它允许您访问包装的<code class="fe nr ns nt nu b">Publisher</code>值。由此，您可以访问所有的操作符，或者像我们在示例中所做的那样，订阅它。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="e0e6" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">联合收割机中的内存管理</h1><p id="e68a" class="pw-post-body-paragraph kg kh it ki b kj my kl km kn mz kp kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">RxSwift配有一个<code class="fe nr ns nt nu b">DisposeBag</code>，Combine配有一个<code class="fe nr ns nt nu b">AnyCancellable</code>。</p><p id="304e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个类在<code class="fe nr ns nt nu b">deinit</code>上调用<code class="fe nr ns nt nu b">cancel()</code>并确保订阅提前终止。如果不实现这一点，您可能会陷入保留周期。</p><p id="17bf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以上面的例子为例，我们可以如下添加它，以确保我们的提交按钮订阅被正确发布:</p><figure class="nv nw nx ny gt ju"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="dd16" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe nr ns nt nu b">switchSubscriber</code>的生命周期与<code class="fe nr ns nt nu b">FormViewController</code>的生命周期相关联。</p><p id="91cb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">每当视图控制器被释放时，属性也被释放，并调用<code class="fe nr ns nt nu b">cancel()</code>方法。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="fe59" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">错误类型和流</h1><p id="d4fe" class="pw-post-body-paragraph kg kh it ki b kj my kl km kn mz kp kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">一旦开始使用Combine，就会遇到错误类型不匹配的错误。</p><p id="2840" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">每个发布者都描述了他们是如何失败的，以及可以预期的错误类型。就像我们在通知示例中使用的<code class="fe nr ns nt nu b">map</code>操作符一样，您可以使用操作符从错误中恢复或做出反应。</p><p id="925f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可能想尝试的常见运算符:</p><ul class=""><li id="a77d" class="nd ne it ki b kj kk kn ko kr nf kv ng kz nh ld ni nj nk nl bi translated"><code class="fe nr ns nt nu b">assertNoFailure()</code>，将错误类型更改为<code class="fe nr ns nt nu b">Never</code>，并在错误发生时调用断言。</li><li id="0ccb" class="nd ne it ki b kj nm kn nn kr no kv np kz nq ld ni nj nk nl bi translated"><code class="fe nr ns nt nu b">mapError()</code>，允许您更改错误类型。</li><li id="96da" class="nd ne it ki b kj nm kn nn kr no kv np kz nq ld ni nj nk nl bi translated">其他操作员如<code class="fe nr ns nt nu b">retry</code>、<code class="fe nr ns nt nu b">catch</code>、<code class="fe nr ns nt nu b">abortOnError</code>、<code class="fe nr ns nt nu b">replaceError</code>。</li></ul></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="c53a" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">调试合并流</h1><p id="b01b" class="pw-post-body-paragraph kg kh it ki b kj my kl km kn mz kp kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">调试函数式反应式语言可能很难。这通常会导致Xcode中出现冗长的错误描述和不可读的堆栈跟踪。</p><figure class="nv nw nx ny gt ju gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/065db9cf8af126699d6ea05f4404b247.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*foenyRQ2fB-lH7QCAvP5hg.png"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">长错误描述</p></figure><p id="2b89" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通常，这是开发人员不使用RxSwift和ReactiveSwift这样的框架的原因。看着Combine，似乎体验没什么不同。</p><p id="018e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">幸运的是，在Combine中可以使用以下操作符进行调试:</p><ul class=""><li id="dcd7" class="nd ne it ki b kj kk kn ko kr nf kv ng kz nh ld ni nj nk nl bi translated"><code class="fe nr ns nt nu b">print()</code>，打印所有发布事件的日志消息。</li><li id="7203" class="nd ne it ki b kj nm kn nn kr no kv np kz nq ld ni nj nk nl bi translated"><code class="fe nr ns nt nu b">breakpoint()</code>，当提供的闭包需要停止调试器中的进程时，它会发出调试器信号。</li><li id="fadf" class="nd ne it ki b kj nm kn nn kr no kv np kz nq ld ni nj nk nl bi translated"><code class="fe nr ns nt nu b">breakpointOnError()</code>，它只在接收到一个失败时引发调试器。</li></ul></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="4951" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">所有发布者操作员的列表</h1><p id="2dd9" class="pw-post-body-paragraph kg kh it ki b kj my kl km kn mz kp kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">不幸的是，很难在这里列出所有的publisher操作符并使它们保持最新。找到它们的最好方法是深入研究<a class="ae kf" href="https://developer.apple.com/documentation/combine/publisher" rel="noopener ugc nofollow" target="_blank">文档主题</a>。</p><p id="5c30" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，为了让你有所了解，这里有一个来自WWDC的单词网:</p><figure class="nv nw nx ny gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi om"><img src="../Images/bd05163bd1f7e121c891c4b15493c56b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mrhWgnS3_JEoGV5Z.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">Swift中的组合运算符</p></figure></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="a7ab" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">与MVVM结合使用</h1><p id="82f1" class="pw-post-body-paragraph kg kh it ki b kj my kl km kn mz kp kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">组合框架非常适合与MVVM结合使用。其实用Combine好多了！</p><p id="56b7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我不会讲得太深入，但是之前的例子可以转换成MVVM的例子，如下所示:</p><figure class="nv nw nx ny gt ju"><div class="bz fp l di"><div class="nz oa l"/></div></figure></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="537e" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">我应该何时使用联合收割机？</h1><p id="19ab" class="pw-post-body-paragraph kg kh it ki b kj my kl km kn mz kp kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">现在你已经知道了Combine的基本原理，还有一个重要的问题:“你应该什么时候使用它？”</p><p id="25a9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们看一下引用自<a class="ae kf" href="https://developer.apple.com/documentation/combine" rel="noopener ugc nofollow" target="_blank">苹果文档</a>的一段话，Combine会给出以下内容:</p><blockquote class="le"><p id="e093" class="lf lg it bd lh li lj lk ll lm ln ld dk translated">通过采用Combine，您将使您的代码更容易阅读和维护，通过集中您的事件处理代码和消除麻烦的技术，如嵌套闭包和基于约定的回调。</p></blockquote><p id="fe04" class="pw-post-body-paragraph kg kh it ki b kj lo kl km kn lp kp kq kr lq kt ku kv lr kx ky kz ls lb lc ld im bi translated">虽然这肯定是真的，但我们刚刚看到调试可能相当困难。</p><p id="1c13" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一个缺点是它有一个学习曲线。不仅仅是你，你所有的同事都需要进入Combine并知道如何使用它。</p><p id="727e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您不熟悉像Combine这样的框架，以一个充满流和订阅者的项目结束，以一个相当困难的代码库结束并不罕见。</p><p id="5b24" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，在开始使用Combine之前，请确保在一个较小的项目中进行尝试。</p><p id="cc64" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">和你的同事讨论这个框架，问问你自己你的代码是否需要合并。如果你真的去做，太好了！</p><p id="7972" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，要确保你保持敏锐，不要以一个布满电线和难以调试代码的项目而告终，因为那最终会减慢你的速度。</p><p id="db09" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果状态变化很大，且需要大量异步代码，那么首先进行组合，并从组合中受益。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="fe53" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">结论</h1><p id="1295" class="pw-post-body-paragraph kg kh it ki b kj my kl km kn mz kp kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">您应该能够开始使用联合收割机。解释了基本原理，但还有更多的内容要讲。</p><p id="40aa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上面的很多话题都可以有自己的博客。因此，我鼓励你开始探索结合自己！</p><p id="f466" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，以下WWDC会议是给自己提供更多背景信息的良好开端:</p><ul class=""><li id="f045" class="nd ne it ki b kj kk kn ko kr nf kv ng kz nh ld ni nj nk nl bi translated"><a class="ae kf" href="https://developer.apple.com/videos/play/wwdc2019/722/" rel="noopener ugc nofollow" target="_blank">介绍联合收割机</a></li><li id="097e" class="nd ne it ki b kj nm kn nn kr no kv np kz nq ld ni nj nk nl bi translated"><a class="ae kf" href="https://developer.apple.com/videos/play/wwdc2019/711/" rel="noopener ugc nofollow" target="_blank">介绍联合收割机及基础进展</a></li><li id="e5ef" class="nd ne it ki b kj nm kn nn kr no kv np kz nq ld ni nj nk nl bi translated"><a class="ae kf" href="https://developer.apple.com/videos/play/wwdc2019/721/" rel="noopener ugc nofollow" target="_blank">结合实际</a></li></ul><p id="c229" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢阅读！</p></div></div>    
</body>
</html>