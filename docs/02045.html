<html>
<head>
<title>Implement an ImagePicker in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中实现ImagePicker</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/implement-imagepicker-using-swiftui-7f2a28caaf9c?source=collection_archive---------1-----------------------#2019-11-02">https://betterprogramming.pub/implement-imagepicker-using-swiftui-7f2a28caaf9c?source=collection_archive---------1-----------------------#2019-11-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5d2b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">从您的图库中选择或拍照，一切尽在SwiftUI中</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/26efa21b64c49c8a6f52cdac1f8a6677.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/1*NwVUDILQxrgfNmfq86vPWw.gif"/></div></figure></div><div class="ab cl kn ko hu kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="ij ik il im in"><h1 id="bffa" class="ku kv iq bd kw kx ky kz la lb lc ld le jw lf jx lg jz lh ka li kc lj kd lk ll bi translated">第一步。如何创建您的SwiftUI项目</h1><p id="f2f8" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">在Xcode中，进入文件→新建→项目→单视图App →下一步→选择用户界面→ SwiftUI →下一步→选择你想要的项目位置→完成。</p></div><div class="ab cl kn ko hu kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="ij ik il im in"><h1 id="1f14" class="ku kv iq bd kw kx ky kz la lb lc ld le jw lf jx lg jz lh ka li kc lj kd lk ll bi translated">第二步。内容视图. swift</h1><p id="93b1" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">默认的<code class="fe mi mj mk ml b">SwiftUI(ContentView)</code> <strong class="lo ir"> </strong>文件会出现以下代码:</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="4700" class="mq kv iq ml b gy mr ms l mt mu"><strong class="ml ir">import</strong> SwiftUI<br/><strong class="ml ir">struct</strong> ContentView: View {<strong class="ml ir">var</strong> body: <strong class="ml ir">some</strong> View {<br/>    Text(”Hello World!”)<br/>  }<br/>}<strong class="ml ir">struct</strong> ContentView_Previews: PreviewProvider {<strong class="ml ir">  <br/>  static</strong> <strong class="ml ir">var</strong> previews: <strong class="ml ir">some</strong> View {<br/>     ContentView()<br/>   }<br/>}</span></pre><p id="9b17" class="pw-post-body-paragraph lm ln iq lo b lp mv jr lr ls mw ju lu lv mx lx ly lz my mb mc md mz mf mg mh ij bi translated">在右边，您可以看到UI的预览。</p><p id="59d7" class="pw-post-body-paragraph lm ln iq lo b lp mv jr lr ls mw ju lu lv mx lx ly lz my mb mc md mz mf mg mh ij bi translated">如果看不到预览，进入<em class="na">调整编辑器</em>选项，选择<em class="na">画布</em>(或按<code class="fe mi mj mk ml b">option+CMD+enter</code> ) <em class="na">。</em> <strong class="lo ir"> <em class="na"> </em> </strong>之后，确保画布正在显示UI预览。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/4d08a8f44f01f324ef907a8d88e4ae9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*dETAqAvTw731r03R.png"/></div></figure></div><div class="ab cl kn ko hu kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="ij ik il im in"><h1 id="fe5f" class="ku kv iq bd kw kx ky kz la lb lc ld le jw lf jx lg jz lh ka li kc lj kd lk ll bi translated">第三步。创建用户界面</h1><p id="9c43" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">在<code class="fe mi mj mk ml b">ContentView</code>体内我们将做以下事情:</p><ol class=""><li id="ab31" class="nc nd iq lo b lp mv ls mw lv ne lz nf md ng mh nh ni nj nk bi translated">定义<code class="fe mi mj mk ml b">NavigationView</code>，给<code class="fe mi mj mk ml b">navigationBarTitle</code>。</li><li id="203a" class="nc nd iq lo b lp nl ls nm lv nn lz no md np mh nh ni nj nk bi translated">定义<code class="fe mi mj mk ml b">VStack</code>。</li><li id="a2af" class="nc nd iq lo b lp nl ls nm lv nn lz no md np mh nh ni nj nk bi translated">在<code class="fe mi mj mk ml b">VStack</code>中，我们必须定义一个<code class="fe mi mj mk ml b">Image</code>来显示选中的图像和一个<code class="fe mi mj mk ml b">Button</code>。点击此按钮，我们将打开<code class="fe mi mj mk ml b">ImagePicker</code>。</li></ol><p id="bdac" class="pw-post-body-paragraph lm ln iq lo b lp mv jr lr ls mw ju lu lv mx lx ly lz my mb mc md mz mf mg mh ij bi translated">因此，我们的代码看起来会像这样:</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="2281" class="mq kv iq ml b gy mr ms l mt mu"><strong class="ml ir">import</strong> SwiftUI</span><span id="6155" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">struct</strong> Demo: View {<br/>   <strong class="ml ir">var</strong> body: <strong class="ml ir">some</strong> View {<br/>      //MARK:<strong class="ml ir"> Step 1: Define the NavigationView and give the      navigationBarTitle<br/>      <br/>      </strong>NavigationView{<br/>          //MARK:<strong class="ml ir"> Step 2: Define the VStack<br/>          </strong>VStack {<br/>             //MARK:<strong class="ml ir"> Define the Image<br/>             </strong>Image(systemName: “cloud”)<br/>                .resizable()<br/>                .scaledToFit()<br/>                .padding()<br/>                .foregroundColor(Color.orange)<br/>         <br/>             //MARK:<strong class="ml ir"> Define the Button<br/>             </strong>Button(“Open Camera”){<br/>                //Button Action Goes here<br/>             }.padding()<br/>              .foregroundColor(Color.white)<br/>              .background(Color.orange)<br/>              .cornerRadius(10)<br/>       }<br/>        .navigationBarTitle(Text(“Camera”))<br/>     }<br/>   }<br/>}</span><span id="80af" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">struct</strong> Demo_Previews: PreviewProvider {<br/>   <strong class="ml ir">static</strong> <strong class="ml ir">var</strong> previews: <strong class="ml ir">some</strong> View {<br/>       Demo()<br/>   }<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi nr"><img src="../Images/ce3ae457faf27170e4101c8c6a371c2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*tlDIFgdp5LgVG9etMDFYWA.png"/></div></div></figure><p id="ed22" class="pw-post-body-paragraph lm ln iq lo b lp mv jr lr ls mw ju lu lv mx lx ly lz my mb mc md mz mf mg mh ij bi translated">现在我们完成了我们的UI。接下来，我们要实现<code class="fe mi mj mk ml b">UIImagePickerController</code>。</p></div><div class="ab cl kn ko hu kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="ij ik il im in"><h1 id="946f" class="ku kv iq bd kw kx ky kz la lb lc ld le jw lf jx lg jz lh ka li kc lj kd lk ll bi translated">第四步。创建一个<code class="fe mi mj mk ml b">UIImagePickerController</code></h1><p id="739b" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">现在的问题是:“你打算怎么展示一个<code class="fe mi mj mk ml b">UIImagePickerController</code>？”因此，为了显示一个<code class="fe mi mj mk ml b">UIImagePickerController</code>，我们将使用<code class="fe mi mj mk ml b">UIViewControllerRepresentable</code>协议。</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="0046" class="mq kv iq ml b gy mr ms l mt mu"><strong class="ml ir">struct</strong> ImagePicker : UIViewControllerRepresentable {</span><span id="eed1" class="mq kv iq ml b gy nq ms l mt mu">}</span></pre><p id="5b3a" class="pw-post-body-paragraph lm ln iq lo b lp mv jr lr ls mw ju lu lv mx lx ly lz my mb mc md mz mf mg mh ij bi translated">现在，我们必须实现协议方法，它们是<code class="fe mi mj mk ml b">updateUIViewController</code>、<code class="fe mi mj mk ml b">makeCoordinator</code>和<code class="fe mi mj mk ml b">makeUIViewController</code>。</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="de30" class="mq kv iq ml b gy mr ms l mt mu"><strong class="ml ir">func</strong> updateUIViewController(<strong class="ml ir">_</strong> uiViewController: UIImagePickerController, context: UIViewControllerRepresentableContext&lt;ImagePicker&gt;) <br/>{<br/>   //Update UIViewcontrolleer Method<br/>}</span><span id="0c51" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">func</strong> makeCoordinator(){</span><span id="e6b9" class="mq kv iq ml b gy nq ms l mt mu">//Make Coordinator which will commnicate with the    ImagePickerViewController<br/>}</span><span id="633d" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">func</strong> makeUIViewController(context: UIViewControllerRepresentableContext&lt;ImagePicker&gt;)<br/>{<br/>   // Create UIViewController which we will display inside the View of the UIViewControllerRepresentable</span><span id="0bdc" class="mq kv iq ml b gy nq ms l mt mu">}</span></pre><p id="ccce" class="pw-post-body-paragraph lm ln iq lo b lp mv jr lr ls mw ju lu lv mx lx ly lz my mb mc md mz mf mg mh ij bi translated">既然我们已经实现了协议<code class="fe mi mj mk ml b">UIViewControllerRepresentable</code>的所有方法，让我们在<code class="fe mi mj mk ml b">makeUIViewController</code>方法中创建一个<code class="fe mi mj mk ml b">ImagePickerViewController</code>。</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="45f1" class="mq kv iq ml b gy mr ms l mt mu"><strong class="ml ir">func</strong> makeUIViewController(context: UIViewControllerRepresentableContext&lt;ImagePicker&gt;) -&gt; UIImagePickerController <br/>{<br/>   <strong class="ml ir">let</strong> picker = UIImagePickerController()<br/>   picker.delegate = context.coordinator<br/>   <strong class="ml ir">return</strong> picker<br/>}</span></pre></div><div class="ab cl kn ko hu kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="ij ik il im in"><h1 id="f5ee" class="ku kv iq bd kw kx ky kz la lb lc ld le jw lf jx lg jz lh ka li kc lj kd lk ll bi translated">第五步。创建图像拾取器协调器</h1><p id="2b1e" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">现在我们必须创建一个协调器，它可以在<code class="fe mi mj mk ml b">UIViewControllerRepresentable</code>和<code class="fe mi mj mk ml b">ImagePickerViewController</code>委托方法之间进行通信。</p><p id="5c7e" class="pw-post-body-paragraph lm ln iq lo b lp mv jr lr ls mw ju lu lv mx lx ly lz my mb mc md mz mf mg mh ij bi translated">因此，我们将创建一个新的类<code class="fe mi mj mk ml b">ImagePickerCordinator</code>，它将实现协议<code class="fe mi mj mk ml b">UINavigationControllerDelegate</code>和<code class="fe mi mj mk ml b">UIImagePickerControllerDelegate</code>，并将实现这些协议所需的方法。</p><p id="0761" class="pw-post-body-paragraph lm ln iq lo b lp mv jr lr ls mw ju lu lv mx lx ly lz my mb mc md mz mf mg mh ij bi translated"><code class="fe mi mj mk ml b">ImagePickerCordinator</code>看起来会像这样:</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="612d" class="mq kv iq ml b gy mr ms l mt mu"><strong class="ml ir">class</strong> ImagePickerCordinator : NSObject, UINavigationControllerDelegate, UIImagePickerControllerDelegate{</span><span id="9bdb" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">var</strong> image      : Image?</span><span id="679b" class="mq kv iq ml b gy nq ms l mt mu">//Selected Image<br/>   <strong class="ml ir">func</strong> imagePickerController(<strong class="ml ir">_</strong> picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [UIImagePickerController.InfoKey : <strong class="ml ir">Any</strong>]) {</span><span id="9ac2" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">let</strong> uiImage = info[UIImagePickerController.InfoKey.originalImage]    <strong class="ml ir">as</strong>! UIImage<br/>   image = Image(uiImage: uiImage)<br/>   <strong class="ml ir"><br/></strong>}</span><span id="f338" class="mq kv iq ml b gy nq ms l mt mu">//Image selection got cancel<br/>   <strong class="ml ir">func</strong> imagePickerControllerDidCancel(<strong class="ml ir">_</strong> picker:      UIImagePickerController) {<br/>   <strong class="ml ir"><br/> </strong>}<br/>}</span></pre><p id="03fd" class="pw-post-body-paragraph lm ln iq lo b lp mv jr lr ls mw ju lu lv mx lx ly lz my mb mc md mz mf mg mh ij bi translated">现在，如果用户选择了一张图片，我们必须通知我们的<code class="fe mi mj mk ml b">ContentView</code>显示选中的图片。</p><p id="d545" class="pw-post-body-paragraph lm ln iq lo b lp mv jr lr ls mw ju lu lv mx lx ly lz my mb mc md mz mf mg mh ij bi translated">为此，我们将使用<code class="fe mi mj mk ml b">@Binding</code>和<code class="fe mi mj mk ml b">@State</code>的概念。我们将创建两个名为<code class="fe mi mj mk ml b">image</code>和<code class="fe mi mj mk ml b">isShown</code>的<code class="fe mi mj mk ml b">Binding</code>变量，因此现在我们的<code class="fe mi mj mk ml b">ImagePickerCordinator</code>将如下所示:</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="f41c" class="mq kv iq ml b gy mr ms l mt mu"><strong class="ml ir">class</strong> ImagePickerCordinator : NSObject, UINavigationControllerDelegate, UIImagePickerControllerDelegate{</span><span id="4b56" class="mq kv iq ml b gy nq ms l mt mu">@Binding <strong class="ml ir">var</strong> isShown : Bool<br/>@Binding <strong class="ml ir">var</strong> image : Image?</span><span id="d687" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">init</strong>(isShown : Binding&lt;Bool&gt;, image: Binding&lt;Image?&gt;) {<br/>      _isShown = isShown<br/>      _image = image<br/>   }</span><span id="a912" class="mq kv iq ml b gy nq ms l mt mu">//Selected Image<br/>   <strong class="ml ir">func</strong> imagePickerController(<strong class="ml ir">_</strong> picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [UIImagePickerController.InfoKey : <strong class="ml ir">Any</strong>]) {</span><span id="ae70" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">let</strong> uiImage = info[UIImagePickerController.InfoKey.originalImage]   <strong class="ml ir">as</strong>! UIImage</span><span id="6e7b" class="mq kv iq ml b gy nq ms l mt mu">image = Image(uiImage: uiImage)<br/>   isShown = <strong class="ml ir">false</strong></span><span id="853f" class="mq kv iq ml b gy nq ms l mt mu">}</span><span id="ea24" class="mq kv iq ml b gy nq ms l mt mu">//Image selection got cancel<br/>   <strong class="ml ir">func</strong> imagePickerControllerDidCancel(<strong class="ml ir">_</strong> picker: UIImagePickerController) {<br/>   isShown = <strong class="ml ir">false<br/>   </strong>}</span><span id="df31" class="mq kv iq ml b gy nq ms l mt mu">}</span></pre><p id="70dd" class="pw-post-body-paragraph lm ln iq lo b lp mv jr lr ls mw ju lu lv mx lx ly lz my mb mc md mz mf mg mh ij bi translated">既然我们的协调者已经准备好进行交流，让我们对<code class="fe mi mj mk ml b">UIViewControllerRepresentable</code> <code class="fe mi mj mk ml b">makeCoordinator()</code>函数进行修改。</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="8712" class="mq kv iq ml b gy mr ms l mt mu"><strong class="ml ir">func</strong> makeCoordinator() -&gt; ImagePickerCordinator {<br/>   <strong class="ml ir">return</strong> ImagePickerCordinator(isShown: $isShown, image: $image)<br/>}</span></pre><p id="a329" class="pw-post-body-paragraph lm ln iq lo b lp mv jr lr ls mw ju lu lv mx lx ly lz my mb mc md mz mf mg mh ij bi translated">为了传递<code class="fe mi mj mk ml b">ImagePickerCordinator</code>中的<code class="fe mi mj mk ml b">binding</code>变量，我们将在<code class="fe mi mj mk ml b">UIViewControllerRepresentable</code>中创建这两个变量。现在<code class="fe mi mj mk ml b">UIViewControllerRepresentable</code>文件看起来会像这样:</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="346c" class="mq kv iq ml b gy mr ms l mt mu"><strong class="ml ir">struct</strong> ImagePicker : UIViewControllerRepresentable {</span><span id="25aa" class="mq kv iq ml b gy nq ms l mt mu">   @Binding <strong class="ml ir">var</strong> isShown : Bool<br/>   @Binding <strong class="ml ir">var</strong> image : Image?</span><span id="85e2" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">func</strong> updateUIViewController(<strong class="ml ir">_</strong> uiViewController: UIImagePickerController, context: UIViewControllerRepresentableContext&lt;ImagePicker&gt;) {</span><span id="a622" class="mq kv iq ml b gy nq ms l mt mu">}</span><span id="b768" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">func</strong> makeCoordinator() -&gt; ImagePickerCordinator {<br/>      <strong class="ml ir">return</strong> ImagePickerCordinator(isShown: $isShown, image: $image)<br/>   }</span><span id="20d9" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">func</strong> makeUIViewController(context: UIViewControllerRepresentableContext&lt;ImagePicker&gt;) -&gt; UIImagePickerController {</span><span id="1336" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">let</strong> picker = UIImagePickerController()<br/>      picker.delegate = context.coordinator<br/>      <strong class="ml ir">return</strong> picker<br/>   }<br/>}</span></pre></div><div class="ab cl kn ko hu kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="ij ik il im in"><h1 id="7070" class="ku kv iq bd kw kx ky kz la lb lc ld le jw lf jx lg jz lh ka li kc lj kd lk ll bi translated">第六步。创建照片捕捉视图</h1><p id="c6b9" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">每当用户点击<code class="fe mi mj mk ml b">ContentView</code>中的<code class="fe mi mj mk ml b">Button</code>时，我们希望在表单或模态中显示一个<code class="fe mi mj mk ml b">imagePicker</code>。</p><p id="2a69" class="pw-post-body-paragraph lm ln iq lo b lp mv jr lr ls mw ju lu lv mx lx ly lz my mb mc md mz mf mg mh ij bi translated">为此，我们必须创建一个新的<code class="fe mi mj mk ml b">CustomView</code>，我们可以将其命名为<code class="fe mi mj mk ml b">PhotoCaptureView</code>，它将被称为<code class="fe mi mj mk ml b">ImagePicker</code>。它是一个<code class="fe mi mj mk ml b">UIViewControllerRepresentable</code>，所以看起来像这样:</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="153a" class="mq kv iq ml b gy mr ms l mt mu"><strong class="ml ir">import</strong> SwiftUI</span><span id="5567" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">struct</strong> PhotoCaptureView: View {</span><span id="7f2f" class="mq kv iq ml b gy nq ms l mt mu">   @Binding <strong class="ml ir">var</strong> showImagePicker : Bool<br/>   @Binding <strong class="ml ir">var</strong> image : Image?<br/> <br/>   <strong class="ml ir">var</strong> body: <strong class="ml ir">some</strong> View {<br/>      ImagePicker(isShown: $showImagePicker, image: $image)<br/>   }<br/>}</span><span id="09b5" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">struct</strong> PhotoCaptureView_Previews: PreviewProvider {<br/>   <strong class="ml ir">static</strong> <strong class="ml ir">var</strong> previews: <strong class="ml ir">some</strong> View {<br/>      PhotoCaptureView(showImagePicker: .constant(<strong class="ml ir">false</strong>), image:  .constant(Image(“”)))<br/>   }<br/>}</span></pre></div><div class="ab cl kn ko hu kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="ij ik il im in"><h1 id="6996" class="ku kv iq bd kw kx ky kz la lb lc ld le jw lf jx lg jz lh ka li kc lj kd lk ll bi translated">最后一步7。在ContentView中实现ImagePicker</h1><p id="d3fc" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">在<code class="fe mi mj mk ml b">contentView</code>内部，我们只需要创建两个<code class="fe mi mj mk ml b">@State</code>变量，命名为<code class="fe mi mj mk ml b">showImagePicker</code>和<code class="fe mi mj mk ml b">image</code>。这将创建一个<code class="fe mi mj mk ml b">sheet</code>或<code class="fe mi mj mk ml b">modal</code>并调用<code class="fe mi mj mk ml b">CustomView</code>，即<code class="fe mi mj mk ml b">PhotoCaptureView</code>，因此我们的<code class="fe mi mj mk ml b">ContentView</code>代码将如下所示:</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="4a18" class="mq kv iq ml b gy mr ms l mt mu"><strong class="ml ir">import</strong> SwiftUI</span><span id="ccc9" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">struct</strong> ContentView: View {<br/>   @State <strong class="ml ir">private</strong> <strong class="ml ir">var</strong> showImagePicker : Bool = <strong class="ml ir">false<br/>   </strong>@State <strong class="ml ir">private</strong> <strong class="ml ir">var</strong> image : Image? = <strong class="ml ir">nil<br/>   <br/>   var</strong> body: <strong class="ml ir">some</strong> View {<br/>      NavigationView{<br/>        VStack {<br/>          image?.resizable().scaledToFit()<br/>          Button(“Open Camera”){<br/>          <strong class="ml ir">self</strong>.showImagePicker = <strong class="ml ir">true<br/>       </strong>}.padding()<br/>        .foregroundColor(Color.white)<br/>        .background(Color.purple)<br/>        .cornerRadius(10)<br/>   }.sheet(isPresented: <strong class="ml ir">self</strong>.$showImagePicker)<br/>     {<br/>        PhotoCaptureView(showImagePicker: <strong class="ml ir">self</strong>.$showImagePicker, image: <strong class="ml ir">self</strong>.$image)<br/>      }<br/>       .navigationBarTitle(Text(“Camera”))<br/>    }<br/>  }<br/>}</span><span id="f2ff" class="mq kv iq ml b gy nq ms l mt mu"><strong class="ml ir">struct</strong> ContentView_Previews: PreviewProvider {<br/>   <strong class="ml ir">static</strong> <strong class="ml ir">var</strong> previews: <strong class="ml ir">some</strong> View {<br/>      ContentView()<br/>   }<br/>}</span></pre></div><div class="ab cl kn ko hu kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="ij ik il im in"><h1 id="b82a" class="ku kv iq bd kw kx ky kz la lb lc ld le jw lf jx lg jz lh ka li kc lj kd lk ll bi translated">最终产品</h1><p id="6b9f" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">最终的代码将如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="a21c" class="pw-post-body-paragraph lm ln iq lo b lp mv jr lr ls mw ju lu lv mx lx ly lz my mb mc md mz mf mg mh ij bi translated">在<a class="ae ny" href="https://github.com/rathodmayur93/ImagePickerSwiftUI" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到这个项目。</p></div></div>    
</body>
</html>