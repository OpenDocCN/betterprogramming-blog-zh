<html>
<head>
<title>4 Ways to Add External JavaScript Files in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中添加外部JavaScript文件的4种方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/4-ways-of-adding-external-js-files-in-reactjs-823f85de3668?source=collection_archive---------0-----------------------#2020-04-06">https://betterprogramming.pub/4-ways-of-adding-external-js-files-in-reactjs-823f85de3668?source=collection_archive---------0-----------------------#2020-04-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="366e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">反应钩子和其他方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/06624249cc14a982ce7cff271b286f87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iLt_otrbPJceYlzyIQcjJg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">凯利·西克玛在<a class="ae ky" href="https://unsplash.com/s/photos/script?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="bae1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管npm包广泛可用，但有时我们可能需要依赖一些外部库，这些库要求我们导入一些JS文件。</p><p id="1b72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于跨应用程序使用的特性，我们可以简单地使用全局<code class="fe lv lw lx ly b">index.html</code>文件中的<code class="fe lv lw lx ly b">&lt;script&gt;</code>标签将JS文件添加到<code class="fe lv lw lx ly b">head</code> <em class="lz"> </em>中。</p><p id="6adb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，对于在特定组件中使用的功能，这没有意义。由于React不支持<code class="fe lv lw lx ly b">Component</code><em class="lz"/>中的<code class="fe lv lw lx ly b">&lt;script&gt;</code>标签，这里有几种将JS文件附加到特定组件的方法。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="edb4" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">反应脚本标签</h1><p id="17ff" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">对于初学者来说，这是加载JS文件最简单的方法。</p><p id="4725" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.npmjs.com/package/react-script-tag" rel="noopener ugc nofollow" target="_blank"> React-script-tag </a>是一个npm包，提供了支持通用渲染的React <code class="fe lv lw lx ly b">&lt;script&gt;</code>标签。支持所有标准的<code class="fe lv lw lx ly b">&lt;script&gt;</code> <a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script" rel="noopener ugc nofollow" target="_blank">属性</a>，如<code class="fe lv lw lx ly b">async</code>、<code class="fe lv lw lx ly b">src</code>、<code class="fe lv lw lx ly b">type</code>、<code class="fe lv lw lx ly b">defer</code>，包括<code class="fe lv lw lx ly b">onLoad</code>和<code class="fe lv lw lx ly b">onError</code>回调。</p><pre class="kj kk kl km gt ne ly nf ng aw nh bi"><span id="85e6" class="ni mi it ly b gy nj nk l nl nm"><strong class="ly iu">import</strong> ScriptTag <strong class="ly iu">from</strong> 'react-script-tag';</span><span id="ec82" class="ni mi it ly b gy nn nk l nl nm">const Demo = props =&gt; (<br/><strong class="ly iu">&lt;</strong>ScriptTag type<strong class="ly iu">=</strong>"text/javascript" src<strong class="ly iu">=</strong>"<!-- -->/path/to/resource.js<!-- -->"<!-- --> <strong class="ly iu">/&gt;<br/>)</strong></span></pre><p id="34b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还有一个<strong class="lb iu"> </strong> <code class="fe lv lw lx ly b">isHydrating</code>标志，是一个<code class="fe lv lw lx ly b">boolean</code>值。默认为<code class="fe lv lw lx ly b">false</code>，如果客户端正在使用服务器渲染，则必须为<code class="fe lv lw lx ly b">true</code>。</p><p id="00ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在React文档中阅读更多关于<code class="fe lv lw lx ly b">hydrate()</code> <a class="ae ky" href="https://reactjs.org/docs/react-dom.html#hydrate" rel="noopener ugc nofollow" target="_blank">的内容。</a></p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="84e1" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">反应头盔</h1><p id="4a9c" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated"><a class="ae ky" href="https://www.npmjs.com/package/react-helmet" rel="noopener ugc nofollow" target="_blank">头盔</a>是一个React组件，管理你对文档头的所有更改。这是另一个简单、初学者友好的包，支持服务器端和客户端渲染。</p><p id="194b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/nfl/react-helmet" rel="noopener ugc nofollow" target="_blank">头盔</a>取普通HTML标签，输出普通HTML标签。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="0ee3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注:<strong class="lb iu"> </strong> React头盔比react-script-tag重，如果你的唯一目的是使用<code class="fe lv lw lx ly b">script</code>标签，我不建议使用。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="d48e" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">DOM方法</h1><p id="2641" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">虽然上面的解决方案很容易实现，但是它需要我们添加额外的包来扩充我们的应用程序。如果你有一些编码经验，那么你可以做:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="1b2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您在多个组件中追加JS文件，最好有一个自定义文件，它返回一个函数来完成这项工作。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="c53e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在您的组件中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="d640" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您不想在页面重定向/重新加载时保留附加的JS文件，那么您应该删除<code class="fe lv lw lx ly b">componentDidUnmount</code>生命周期方法中的脚本。要实现这一点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="c775" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在您的组件中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="ec8b" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">反应钩</h1><p id="5274" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">如果你是React中钩子的粉丝，那么<code class="fe lv lw lx ly b">useEffect</code>是添加外部JS文件的好方法。使用效果钩可以阅读我关于<a class="ae ky" href="https://medium.com/better-programming/tips-for-using-reacts-useeffect-effectively-dfe6ae951421?source=friends_link&amp;sk=87e8a3137afd3b78b22651508f340c57" rel="noopener">的文章。</a></p><p id="819e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">给出一个要点<code class="fe lv lw lx ly b">useEffect</code>类似于React类组件中的<code class="fe lv lw lx ly b">componentDidMount</code>和<code class="fe lv lw lx ly b">componentDidUpdate</code>生命周期方法。</p><p id="af57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你的效果返回一个函数，React会在清理的时候运行它，基本上就是<code class="fe lv lw lx ly b">componentDidUnmount</code>生命周期方法。这是我们将删除附加脚本的地方。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="c3e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React允许我们构建<a class="ae ky" href="https://reactjs.org/docs/hooks-custom.html" rel="noopener ugc nofollow" target="_blank">定制钩子</a>，这让我们能够将组件逻辑提取到可重用的函数中。将外部JS文件附加到组件的逻辑可以存储为如下所示的自定义挂钩:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="19dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可用于以下组件:</p><pre class="kj kk kl km gt ne ly nf ng aw nh bi"><span id="9c21" class="ni mi it ly b gy nj nk l nl nm">import importScript from 'customHooks/importScript';</span><span id="65ef" class="ni mi it ly b gy nn nk l nl nm">const Demo = props =&gt; {<br/>  importScript("<!-- -->/path/to/resource.js<!-- -->");<br/>}</span></pre></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="d51e" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">资源</h1><div class="nq nr gp gr ns nt"><a href="https://stackoverflow.com/questions/34424845/adding-script-tag-to-react-jsx" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd iu gy z fp ny fr fs nz fu fw is bi translated">将脚本标签添加到反应/JSX</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">您希望在每次渲染该组件时都反复获取并执行脚本，还是只在…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">stackoverflow.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh ks nt"/></div></div></a></div><div class="nq nr gp gr ns nt"><a href="https://www.npmjs.com/package/react-script-tag" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd iu gy z fp ny fr fs nz fu fw is bi translated">反应脚本标签</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">特性:支持通用渲染客户端渲染的React标签正确地将脚本标签附加到页面上…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">www.npmjs.com</p></div></div><div class="oc l"><div class="oi l oe of og oc oh ks nt"/></div></div></a></div><div class="nq nr gp gr ns nt"><a href="https://github.com/nfl/react-helmet" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd iu gy z fp ny fr fs nz fu fw is bi translated">NFL/react-头盔</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">这个可重用的React组件将管理您对文档头的所有更改。头盔采用普通的HTML标签和…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">github.com</p></div></div><div class="oc l"><div class="oj l oe of og oc oh ks nt"/></div></div></a></div></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><p id="9541" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>